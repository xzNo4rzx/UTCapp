function Wk(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function Eb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Dm={exports:{}},Ec={},Om={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yv;function $k(){if(Yv)return Ve;Yv=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function w(R){return R===null||typeof R!="object"?null:(R=y&&R[y]||R["@@iterator"],typeof R=="function"?R:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,k={};function x(R,z,X){this.props=R,this.context=z,this.refs=k,this.updater=X||T}x.prototype.isReactComponent={},x.prototype.setState=function(R,z){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,z,"setState")},x.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function N(){}N.prototype=x.prototype;function U(R,z,X){this.props=R,this.context=z,this.refs=k,this.updater=X||T}var H=U.prototype=new N;H.constructor=U,I(H,x.prototype),H.isPureReactComponent=!0;var K=Array.isArray,G=Object.prototype.hasOwnProperty,ne={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function P(R,z,X){var J,oe={},ye=null,xe=null;if(z!=null)for(J in z.ref!==void 0&&(xe=z.ref),z.key!==void 0&&(ye=""+z.key),z)G.call(z,J)&&!D.hasOwnProperty(J)&&(oe[J]=z[J]);var Se=arguments.length-2;if(Se===1)oe.children=X;else if(1<Se){for(var Re=Array(Se),Ke=0;Ke<Se;Ke++)Re[Ke]=arguments[Ke+2];oe.children=Re}if(R&&R.defaultProps)for(J in Se=R.defaultProps,Se)oe[J]===void 0&&(oe[J]=Se[J]);return{$$typeof:n,type:R,key:ye,ref:xe,props:oe,_owner:ne.current}}function A(R,z){return{$$typeof:n,type:R.type,key:z,ref:R.ref,props:R.props,_owner:R._owner}}function V(R){return typeof R=="object"&&R!==null&&R.$$typeof===n}function L(R){var z={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(X){return z[X]})}var F=/\/+/g;function O(R,z){return typeof R=="object"&&R!==null&&R.key!=null?L(""+R.key):z.toString(36)}function we(R,z,X,J,oe){var ye=typeof R;(ye==="undefined"||ye==="boolean")&&(R=null);var xe=!1;if(R===null)xe=!0;else switch(ye){case"string":case"number":xe=!0;break;case"object":switch(R.$$typeof){case n:case e:xe=!0}}if(xe)return xe=R,oe=oe(xe),R=J===""?"."+O(xe,0):J,K(oe)?(X="",R!=null&&(X=R.replace(F,"$&/")+"/"),we(oe,z,X,"",function(Ke){return Ke})):oe!=null&&(V(oe)&&(oe=A(oe,X+(!oe.key||xe&&xe.key===oe.key?"":(""+oe.key).replace(F,"$&/")+"/")+R)),z.push(oe)),1;if(xe=0,J=J===""?".":J+":",K(R))for(var Se=0;Se<R.length;Se++){ye=R[Se];var Re=J+O(ye,Se);xe+=we(ye,z,X,Re,oe)}else if(Re=w(R),typeof Re=="function")for(R=Re.call(R),Se=0;!(ye=R.next()).done;)ye=ye.value,Re=J+O(ye,Se++),xe+=we(ye,z,X,Re,oe);else if(ye==="object")throw z=String(R),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return xe}function he(R,z,X){if(R==null)return R;var J=[],oe=0;return we(R,J,"","",function(ye){return z.call(X,ye,oe++)}),J}function Ie(R){if(R._status===-1){var z=R._result;z=z(),z.then(function(X){(R._status===0||R._status===-1)&&(R._status=1,R._result=X)},function(X){(R._status===0||R._status===-1)&&(R._status=2,R._result=X)}),R._status===-1&&(R._status=0,R._result=z)}if(R._status===1)return R._result.default;throw R._result}var te={current:null},se={transition:null},pe={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:se,ReactCurrentOwner:ne};return Ve.Children={map:he,forEach:function(R,z,X){he(R,function(){z.apply(this,arguments)},X)},count:function(R){var z=0;return he(R,function(){z++}),z},toArray:function(R){return he(R,function(z){return z})||[]},only:function(R){if(!V(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},Ve.Component=x,Ve.Fragment=t,Ve.Profiler=i,Ve.PureComponent=U,Ve.StrictMode=r,Ve.Suspense=h,Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,Ve.cloneElement=function(R,z,X){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var J=I({},R.props),oe=R.key,ye=R.ref,xe=R._owner;if(z!=null){if(z.ref!==void 0&&(ye=z.ref,xe=ne.current),z.key!==void 0&&(oe=""+z.key),R.type&&R.type.defaultProps)var Se=R.type.defaultProps;for(Re in z)G.call(z,Re)&&!D.hasOwnProperty(Re)&&(J[Re]=z[Re]===void 0&&Se!==void 0?Se[Re]:z[Re])}var Re=arguments.length-2;if(Re===1)J.children=X;else if(1<Re){Se=Array(Re);for(var Ke=0;Ke<Re;Ke++)Se[Ke]=arguments[Ke+2];J.children=Se}return{$$typeof:n,type:R.type,key:oe,ref:ye,props:J,_owner:xe}},Ve.createContext=function(R){return R={$$typeof:l,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:o,_context:R},R.Consumer=R},Ve.createElement=P,Ve.createFactory=function(R){var z=P.bind(null,R);return z.type=R,z},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(R){return{$$typeof:c,render:R}},Ve.isValidElement=V,Ve.lazy=function(R){return{$$typeof:m,_payload:{_status:-1,_result:R},_init:Ie}},Ve.memo=function(R,z){return{$$typeof:f,type:R,compare:z===void 0?null:z}},Ve.startTransition=function(R){var z=se.transition;se.transition={};try{R()}finally{se.transition=z}},Ve.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},Ve.useCallback=function(R,z){return te.current.useCallback(R,z)},Ve.useContext=function(R){return te.current.useContext(R)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(R){return te.current.useDeferredValue(R)},Ve.useEffect=function(R,z){return te.current.useEffect(R,z)},Ve.useId=function(){return te.current.useId()},Ve.useImperativeHandle=function(R,z,X){return te.current.useImperativeHandle(R,z,X)},Ve.useInsertionEffect=function(R,z){return te.current.useInsertionEffect(R,z)},Ve.useLayoutEffect=function(R,z){return te.current.useLayoutEffect(R,z)},Ve.useMemo=function(R,z){return te.current.useMemo(R,z)},Ve.useReducer=function(R,z,X){return te.current.useReducer(R,z,X)},Ve.useRef=function(R){return te.current.useRef(R)},Ve.useState=function(R){return te.current.useState(R)},Ve.useSyncExternalStore=function(R,z,X){return te.current.useSyncExternalStore(R,z,X)},Ve.useTransition=function(){return te.current.useTransition()},Ve.version="18.2.0",Ve}var Gv;function hy(){return Gv||(Gv=1,Om.exports=$k()),Om.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kv;function qk(){if(Kv)return Ec;Kv=1;var n=hy(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,h,f){var m,y={},w=null,T=null;f!==void 0&&(w=""+f),h.key!==void 0&&(w=""+h.key),h.ref!==void 0&&(T=h.ref);for(m in h)r.call(h,m)&&!o.hasOwnProperty(m)&&(y[m]=h[m]);if(c&&c.defaultProps)for(m in h=c.defaultProps,h)y[m]===void 0&&(y[m]=h[m]);return{$$typeof:e,type:c,key:w,ref:T,props:y,_owner:i.current}}return Ec.Fragment=t,Ec.jsx=l,Ec.jsxs=l,Ec}var Qv;function Yk(){return Qv||(Qv=1,Dm.exports=qk()),Dm.exports}var b=Yk(),W=hy();const Tf=Eb(W),Gk=Wk({__proto__:null,default:Tf},[W]),Kk=()=>{};var Xv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Qk=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],l=n[t++],c=n[t++],h=((i&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return e.join("")},bb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],l=i+1<n.length,c=l?n[i+1]:0,h=i+2<n.length,f=h?n[i+2]:0,m=o>>2,y=(o&3)<<4|c>>4;let w=(c&15)<<2|f>>6,T=f&63;h||(T=64,l||(w=64)),r.push(t[m],t[y],t[w],t[T])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(xb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Qk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const y=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||f==null||y==null)throw new Xk;const w=o<<2|c>>4;if(r.push(w),f!==64){const T=c<<4&240|f>>2;if(r.push(T),y!==64){const I=f<<6&192|y;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Xk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Jk=function(n){const e=xb(n);return bb.encodeByteArray(e,!0)},Tb=function(n){return Jk(n).replace(/\./g,"")},Sb=function(n){try{return bb.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP=()=>Zk().__FIREBASE_DEFAULTS__,tP=()=>{if(typeof process>"u"||typeof Xv>"u")return;const n=Xv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},nP=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Sb(n[1]);return e&&JSON.parse(e)},Sf=()=>{try{return Kk()||eP()||tP()||nP()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},rP=n=>Sf()?.emulatorHosts?.[n],Ib=()=>Sf()?.config,kb=n=>Sf()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Pb(n){return(await fetch(n,{credentials:"include"})).ok}const Bc={};function sP(){const n={prod:[],emulator:[]};for(const e of Object.keys(Bc))Bc[e]?n.emulator.push(e):n.prod.push(e);return n}function oP(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Jv=!1;function aP(n,e){if(typeof window>"u"||typeof document>"u"||!ml(window.location.host)||Bc[n]===e||Bc[n]||Jv)return;Bc[n]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",o=sP().prod.length>0;function l(){const w=document.getElementById(r);w&&w.remove()}function c(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function h(w,T){w.setAttribute("width","24"),w.setAttribute("id",T),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function f(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{Jv=!0,l()},w}function m(w,T){w.setAttribute("id",T),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function y(){const w=oP(r),T=t("text"),I=document.getElementById(T)||document.createElement("span"),k=t("learnmore"),x=document.getElementById(k)||document.createElement("a"),N=t("preprendIcon"),U=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const H=w.element;c(H),m(x,k);const K=f();h(U,N),H.append(U,I,x,K),document.body.appendChild(H)}o?(I.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function cP(){const n=Sf()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hP(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function dP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fP(){const n=fn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function pP(){return!cP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mP(){try{return typeof indexedDB=="object"}catch{return!1}}function gP(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP="FirebaseError";class Ui extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=yP,Object.setPrototypeOf(this,Ui.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wu.prototype.create)}}class wu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],l=o?_P(o,r):"Error",c=`${this.serviceName}: ${l} (${i}).`;return new Ui(i,c,r)}}function _P(n,e){return n.replace(vP,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const vP=/\{\$([^}]+)}/g;function wP(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Uo(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],l=e[i];if(Zv(o)&&Zv(l)){if(!Uo(o,l))return!1}else if(o!==l)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Zv(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Dc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Oc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function EP(n,e){const t=new xP(n,e);return t.subscribe.bind(t)}class xP{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");bP(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Mm),i.error===void 0&&(i.error=Mm),i.complete===void 0&&(i.complete=Mm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bP(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Mm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(n){return n&&n._delegate?n._delegate:n}class zo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new iP;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IP(e))try{this.getOrInitializeService({instanceIdentifier:Po})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Po){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Po){return this.instances.has(e)}getOptions(e=Po){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:SP(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Po){return this.component?this.component.multipleInstances?e:Po:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SP(n){return n===Po?void 0:n}function IP(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new TP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Fe||(Fe={}));const PP={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},CP=Fe.INFO,AP={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},RP=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=AP[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dy{constructor(e){this.name=e,this._logLevel=CP,this._logHandler=RP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const DP=(n,e)=>e.some(t=>n instanceof t);let ew,tw;function OP(){return ew||(ew=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MP(){return tw||(tw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Cb=new WeakMap,mg=new WeakMap,Ab=new WeakMap,Nm=new WeakMap,fy=new WeakMap;function NP(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(Cs(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&Cb.set(t,n)}).catch(()=>{}),fy.set(e,n),e}function LP(n){if(mg.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});mg.set(n,e)}let gg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return mg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Ab.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Cs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function VP(n){gg=n(gg)}function FP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Lm(this),e,...t);return Ab.set(r,e.sort?e.sort():[e]),Cs(r)}:MP().includes(n)?function(...e){return n.apply(Lm(this),e),Cs(Cb.get(this))}:function(...e){return Cs(n.apply(Lm(this),e))}}function jP(n){return typeof n=="function"?FP(n):(n instanceof IDBTransaction&&LP(n),DP(n,OP())?new Proxy(n,gg):n)}function Cs(n){if(n instanceof IDBRequest)return NP(n);if(Nm.has(n))return Nm.get(n);const e=jP(n);return e!==n&&(Nm.set(n,e),fy.set(e,n)),e}const Lm=n=>fy.get(n);function UP(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const l=indexedDB.open(n,e),c=Cs(l);return r&&l.addEventListener("upgradeneeded",h=>{r(Cs(l.result),h.oldVersion,h.newVersion,Cs(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const zP=["get","getKey","getAll","getAllKeys","count"],BP=["put","add","delete","clear"],Vm=new Map;function nw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Vm.get(e))return Vm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=BP.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||zP.includes(t)))return;const o=async function(l,...c){const h=this.transaction(l,i?"readwrite":"readonly");let f=h.store;return r&&(f=f.index(c.shift())),(await Promise.all([f[t](...c),i&&h.done]))[0]};return Vm.set(e,o),o}VP(n=>({...n,get:(e,t,r)=>nw(e,t)||n.get(e,t,r),has:(e,t)=>!!nw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(WP(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function WP(n){return n.getComponent()?.type==="VERSION"}const yg="@firebase/app",rw="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li=new dy("@firebase/app"),$P="@firebase/app-compat",qP="@firebase/analytics-compat",YP="@firebase/analytics",GP="@firebase/app-check-compat",KP="@firebase/app-check",QP="@firebase/auth",XP="@firebase/auth-compat",JP="@firebase/database",ZP="@firebase/data-connect",eC="@firebase/database-compat",tC="@firebase/functions",nC="@firebase/functions-compat",rC="@firebase/installations",iC="@firebase/installations-compat",sC="@firebase/messaging",oC="@firebase/messaging-compat",aC="@firebase/performance",lC="@firebase/performance-compat",cC="@firebase/remote-config",uC="@firebase/remote-config-compat",hC="@firebase/storage",dC="@firebase/storage-compat",fC="@firebase/firestore",pC="@firebase/ai",mC="@firebase/firestore-compat",gC="firebase",yC="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="[DEFAULT]",_C={[yg]:"fire-core",[$P]:"fire-core-compat",[YP]:"fire-analytics",[qP]:"fire-analytics-compat",[KP]:"fire-app-check",[GP]:"fire-app-check-compat",[QP]:"fire-auth",[XP]:"fire-auth-compat",[JP]:"fire-rtdb",[ZP]:"fire-data-connect",[eC]:"fire-rtdb-compat",[tC]:"fire-fn",[nC]:"fire-fn-compat",[rC]:"fire-iid",[iC]:"fire-iid-compat",[sC]:"fire-fcm",[oC]:"fire-fcm-compat",[aC]:"fire-perf",[lC]:"fire-perf-compat",[cC]:"fire-rc",[uC]:"fire-rc-compat",[hC]:"fire-gcs",[dC]:"fire-gcs-compat",[fC]:"fire-fst",[mC]:"fire-fst-compat",[pC]:"fire-vertex","fire-js":"fire-js",[gC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd=new Map,vC=new Map,vg=new Map;function iw(n,e){try{n.container.addComponent(e)}catch(t){Li.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function sl(n){const e=n.name;if(vg.has(e))return Li.debug(`There were multiple attempts to register component ${e}.`),!1;vg.set(e,n);for(const t of Bd.values())iw(t,n);for(const t of vC.values())iw(t,n);return!0}function py(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ar(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},As=new wu("app","Firebase",wC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw As.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=yC;function Rb(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:_g,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw As.create("bad-app-name",{appName:String(i)});if(t||(t=Ib()),!t)throw As.create("no-options");const o=Bd.get(i);if(o){if(Uo(t,o.options)&&Uo(r,o.config))return o;throw As.create("duplicate-app",{appName:i})}const l=new kP(i);for(const h of vg.values())l.addComponent(h);const c=new EC(t,r,l);return Bd.set(i,c),c}function xC(n=_g){const e=Bd.get(n);if(!e&&n===_g&&Ib())return Rb();if(!e)throw As.create("no-app",{appName:n});return e}function Rs(n,e,t){let r=_C[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Li.warn(l.join(" "));return}sl(new zo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC="firebase-heartbeat-database",TC=1,tu="firebase-heartbeat-store";let Fm=null;function Db(){return Fm||(Fm=UP(bC,TC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(tu)}catch(t){console.warn(t)}}}}).catch(n=>{throw As.create("idb-open",{originalErrorMessage:n.message})})),Fm}async function SC(n){try{const t=(await Db()).transaction(tu),r=await t.objectStore(tu).get(Ob(n));return await t.done,r}catch(e){if(e instanceof Ui)Li.warn(e.message);else{const t=As.create("idb-get",{originalErrorMessage:e?.message});Li.warn(t.message)}}}async function sw(n,e){try{const r=(await Db()).transaction(tu,"readwrite");await r.objectStore(tu).put(e,Ob(n)),await r.done}catch(t){if(t instanceof Ui)Li.warn(t.message);else{const r=As.create("idb-set",{originalErrorMessage:t?.message});Li.warn(r.message)}}}function Ob(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=1024,kC=30;class PC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new AC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ow();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>kC){const i=RC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Li.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ow(),{heartbeatsToSend:t,unsentEntries:r}=CC(this._heartbeatsCache.heartbeats),i=Tb(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Li.warn(e),""}}}function ow(){return new Date().toISOString().substring(0,10)}function CC(n,e=IC){const t=[];let r=n.slice();for(const i of n){const o=t.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),aw(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),aw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class AC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mP()?gP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await SC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return sw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return sw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function aw(n){return Tb(JSON.stringify({version:2,heartbeats:n})).length}function RC(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(n){sl(new zo("platform-logger",e=>new HP(e),"PRIVATE")),sl(new zo("heartbeat",e=>new PC(e),"PRIVATE")),Rs(yg,rw,n),Rs(yg,rw,"esm2020"),Rs("fire-js","")}DC("");function Mb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const OC=Mb,Nb=new wu("auth","Firebase",Mb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd=new dy("@firebase/auth");function MC(n,...e){Hd.logLevel<=Fe.WARN&&Hd.warn(`Auth (${gl}): ${n}`,...e)}function Id(n,...e){Hd.logLevel<=Fe.ERROR&&Hd.error(`Auth (${gl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(n,...e){throw my(n,...e)}function ei(n,...e){return my(n,...e)}function Lb(n,e,t){const r={...OC(),[e]:t};return new wu("auth","Firebase",r).create(e,{appName:n.name})}function Mi(n){return Lb(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function my(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Nb.create(n,...e)}function Ce(n,e,...t){if(!n)throw my(e,...t)}function Di(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Id(e),new Error(e)}function Vi(n,e){n||Di(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(){return typeof self<"u"&&self.location?.href||""}function NC(){return lw()==="http:"||lw()==="https:"}function lw(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NC()||hP()||"connection"in navigator)?navigator.onLine:!0}function VC(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vi(t>e,"Short delay should be less than long delay!"),this.isMobile=lP()||dP()}get(){return LC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(n,e){Vi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Di("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Di("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Di("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],UC=new xu(3e4,6e4);function Hs(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ws(n,e,t,r,i={}){return Fb(n,i,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=Eu({key:n.config.apiKey,...l}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:h,...o};return uP()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&ml(n.emulatorConfig.host)&&(f.credentials="include"),Vb.fetch()(await jb(n,n.config.apiHost,t,c),f)})}async function Fb(n,e,t){n._canInitEmulator=!1;const r={...FC,...e};try{const i=new BC(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw rd(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[h,f]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw rd(n,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw rd(n,"email-already-in-use",l);if(h==="USER_DISABLED")throw rd(n,"user-disabled",l);const m=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Lb(n,m,f);Rr(n,m)}}catch(i){if(i instanceof Ui)throw i;Rr(n,"network-request-failed",{message:String(i)})}}async function bu(n,e,t,r,i={}){const o=await Ws(n,e,t,r,i);return"mfaPendingCredential"in o&&Rr(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function jb(n,e,t,r){const i=`${e}${t}?${r}`,o=n,l=o.config.emulator?gy(n.config,i):`${n.config.apiScheme}://${i}`;return jC.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function zC(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class BC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ei(this.auth,"network-request-failed")),UC.get())})}}function rd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=ei(n,e,r);return i.customData._tokenResponse=t,i}function cw(n){return n!==void 0&&n.enterprise!==void 0}class HC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return zC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function WC(n,e){return Ws(n,"GET","/v2/recaptchaConfig",Hs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $C(n,e){return Ws(n,"POST","/v1/accounts:delete",e)}async function Wd(n,e){return Ws(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qC(n,e=!1){const t=Bt(n),r=await t.getIdToken(e),i=yy(r);Ce(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o?.sign_in_provider;return{claims:i,token:r,authTime:Hc(jm(i.auth_time)),issuedAtTime:Hc(jm(i.iat)),expirationTime:Hc(jm(i.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function jm(n){return Number(n)*1e3}function yy(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Id("JWT malformed, contained fewer than 3 sections"),null;try{const i=Sb(t);return i?JSON.parse(i):(Id("Failed to decode base64 JWT payload"),null)}catch(i){return Id("Caught error parsing JWT payload as JSON",i?.toString()),null}}function uw(n){const e=yy(n);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ui&&YC(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function YC({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hc(this.lastLoginAt),this.creationTime=Hc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $d(n){const e=n.auth,t=await n.getIdToken(),r=await nu(n,Wd(e,{idToken:t}));Ce(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const o=i.providerUserInfo?.length?Ub(i.providerUserInfo):[],l=QC(n.providerData,o),c=n.isAnonymous,h=!(n.email&&i.passwordHash)&&!l?.length,f=c?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Eg(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(n,m)}async function KC(n){const e=Bt(n);await $d(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function QC(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Ub(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XC(n,e){const t=await Fb(n,{},async()=>{const r=Eu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,l=await jb(n,i,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:c,body:r};return n.emulatorConfig&&ml(n.emulatorConfig.host)&&(h.credentials="include"),Vb.fetch()(l,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function JC(n,e){return Ws(n,"POST","/v2/accounts:revokeToken",Hs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):uw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=uw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await XC(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,l=new el;return r&&(Ce(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Ce(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),o&&(Ce(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new el,this.toJSON())}_performRefresh(){return Di("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(n,e){Ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class kr{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new GC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Eg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await nu(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return qC(this,e)}reload(){return KC(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new kr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await $d(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ar(this.auth.app))return Promise.reject(Mi(this.auth));const e=await this.getIdToken();return await nu(this,$C(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,c=t.tenantId??void 0,h=t._redirectEventId??void 0,f=t.createdAt??void 0,m=t.lastLoginAt??void 0,{uid:y,emailVerified:w,isAnonymous:T,providerData:I,stsTokenManager:k}=t;Ce(y&&k,e,"internal-error");const x=el.fromJSON(this.name,k);Ce(typeof y=="string",e,"internal-error"),ms(r,e.name),ms(i,e.name),Ce(typeof w=="boolean",e,"internal-error"),Ce(typeof T=="boolean",e,"internal-error"),ms(o,e.name),ms(l,e.name),ms(c,e.name),ms(h,e.name),ms(f,e.name),ms(m,e.name);const N=new kr({uid:y,auth:e,email:i,emailVerified:w,displayName:r,isAnonymous:T,photoURL:l,phoneNumber:o,tenantId:c,stsTokenManager:x,createdAt:f,lastLoginAt:m});return I&&Array.isArray(I)&&(N.providerData=I.map(U=>({...U}))),h&&(N._redirectEventId=h),N}static async _fromIdTokenResponse(e,t,r=!1){const i=new el;i.updateFromServerResponse(t);const o=new kr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await $d(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Ce(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?Ub(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!o?.length,c=new el;c.updateFromIdToken(r);const h=new kr({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:l}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Eg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=new Map;function Oi(n){Vi(n instanceof Function,"Expected a class definition");let e=hw.get(n);return e?(Vi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,hw.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}zb.type="NONE";const dw=zb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(n,e,t){return`firebase:${n}:${e}:${t}`}class tl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=kd(this.userKey,i.apiKey,o),this.fullPersistenceKey=kd("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Wd(this.auth,{idToken:e}).catch(()=>{});return t?kr._fromGetAccountInfoResponse(this.auth,t,e):null}return kr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new tl(Oi(dw),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=i[0]||Oi(dw);const l=kd(r,e.config.apiKey,e.name);let c=null;for(const f of t)try{const m=await f._get(l);if(m){let y;if(typeof m=="string"){const w=await Wd(e,{idToken:m}).catch(()=>{});if(!w)break;y=await kr._fromGetAccountInfoResponse(e,w,m)}else y=kr._fromJSON(e,m);f!==o&&(c=y),o=f;break}}catch{}const h=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new tl(o,e,r):(o=h[0],c&&await o._set(l,c.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new tl(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($b(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Bb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Yb(e))return"Blackberry";if(Gb(e))return"Webos";if(Hb(e))return"Safari";if((e.includes("chrome/")||Wb(e))&&!e.includes("edge/"))return"Chrome";if(qb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Bb(n=fn()){return/firefox\//i.test(n)}function Hb(n=fn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Wb(n=fn()){return/crios\//i.test(n)}function $b(n=fn()){return/iemobile/i.test(n)}function qb(n=fn()){return/android/i.test(n)}function Yb(n=fn()){return/blackberry/i.test(n)}function Gb(n=fn()){return/webos/i.test(n)}function _y(n=fn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function ZC(n=fn()){return _y(n)&&!!window.navigator?.standalone}function eA(){return fP()&&document.documentMode===10}function Kb(n=fn()){return _y(n)||qb(n)||Gb(n)||Yb(n)||/windows phone/i.test(n)||$b(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(n,e=[]){let t;switch(n){case"Browser":t=fw(fn());break;case"Worker":t=`${fw(fn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${gl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,c)=>{try{const h=e(o);l(h)}catch(h){c(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nA(n,e={}){return Ws(n,"GET","/v2/passwordPolicy",Hs(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=6;class iA{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??rA,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pw(this),this.idTokenSubscription=new pw(this),this.beforeStateQueue=new tA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Nb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Oi(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await tl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Wd(this,{idToken:e}),r=await kr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ar(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,l=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await $d(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=VC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ar(this.app))return Promise.reject(Mi(this));const t=e?Bt(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ar(this.app)?Promise.reject(Mi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ar(this.app)?Promise.reject(Mi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Oi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nA(this),t=new iA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await JC(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Oi(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await tl.create(this,[Oi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Qb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ar(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&MC(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ko(n){return Bt(n)}class pw{constructor(e){this.auth=e,this.observer=null,this.addObserver=EP(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let If={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oA(n){If=n}function Xb(n){return If.loadJS(n)}function aA(){return If.recaptchaEnterpriseScript}function lA(){return If.gapiScript}function cA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class uA{constructor(){this.enterprise=new hA}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class hA{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const dA="recaptcha-enterprise",Jb="NO_RECAPTCHA";class fA{constructor(e){this.type=dA,this.auth=Ko(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{WC(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new HC(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(h=>{c(h)})})}function i(o,l,c){const h=window.grecaptcha;cw(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{l(f)}).catch(()=>{l(Jb)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new uA().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(c=>{if(!t&&cw(window.grecaptcha))i(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=aA();h.length!==0&&(h+=c),Xb(h).then(()=>{i(c,o,l)}).catch(f=>{l(f)})}}).catch(c=>{l(c)})})}}async function mw(n,e,t,r=!1,i=!1){const o=new fA(n);let l;if(i)l=Jb;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const h=c.phoneEnrollmentInfo.phoneNumber,f=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const h=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function xg(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await mw(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await mw(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(n,e){const t=py(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(Uo(o,e??{}))return i;Rr(i,"already-initialized")}return t.initialize({options:e})}function mA(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Oi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function gA(n,e,t){const r=Ko(n);Ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=Zb(e),{host:l,port:c}=yA(e),h=c===null?"":`:${c}`,f={url:`${o}//${l}${h}/`},m=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ce(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ce(Uo(f,r.config.emulator)&&Uo(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,ml(l)?(Pb(`${o}//${l}${h}`),aP("Auth",!0)):_A()}function Zb(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function yA(n){const e=Zb(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:gw(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:gw(l)}}}function gw(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function _A(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Di("not implemented")}_getIdTokenResponse(e){return Di("not implemented")}_linkToIdToken(e,t){return Di("not implemented")}_getReauthenticationResolver(e){return Di("not implemented")}}async function vA(n,e){return Ws(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wA(n,e){return bu(n,"POST","/v1/accounts:signInWithPassword",Hs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EA(n,e){return bu(n,"POST","/v1/accounts:signInWithEmailLink",Hs(n,e))}async function xA(n,e){return bu(n,"POST","/v1/accounts:signInWithEmailLink",Hs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru extends vy{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new ru(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new ru(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xg(e,t,"signInWithPassword",wA);case"emailLink":return EA(e,{email:this._email,oobCode:this._password});default:Rr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xg(e,r,"signUpPassword",vA);case"emailLink":return xA(e,{idToken:t,email:this._email,oobCode:this._password});default:Rr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nl(n,e){return bu(n,"POST","/v1/accounts:signInWithIdp",Hs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="http://localhost";class Bo extends vy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Bo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Rr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=t;if(!r||!i)return null;const l=new Bo(r,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return nl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,nl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,nl(e,t)}buildRequest(){const e={requestUri:bA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Eu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function SA(n){const e=Dc(Oc(n)).link,t=e?Dc(Oc(e)).deep_link_id:null,r=Dc(Oc(n)).deep_link_id;return(r?Dc(Oc(r)).link:null)||r||t||e||n}class wy{constructor(e){const t=Dc(Oc(e)),r=t.apiKey??null,i=t.oobCode??null,o=TA(t.mode??null);Ce(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=SA(e);try{return new wy(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(){this.providerId=yl.PROVIDER_ID}static credential(e,t){return ru._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=wy.parseLink(t);return Ce(r,"argument-error"),ru._fromEmailAndCode(e,r.code,r.tenantId)}}yl.PROVIDER_ID="password";yl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";yl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu extends eT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends Tu{constructor(){super("facebook.com")}static credential(e){return Bo._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Es.credential(e.oauthAccessToken)}catch{return null}}}Es.FACEBOOK_SIGN_IN_METHOD="facebook.com";Es.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs extends Tu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Bo._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return xs.credentialFromTaggedObject(e)}static credentialFromError(e){return xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return xs.credential(t,r)}catch{return null}}}xs.GOOGLE_SIGN_IN_METHOD="google.com";xs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs extends Tu{constructor(){super("github.com")}static credential(e){return Bo._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bs.credential(e.oauthAccessToken)}catch{return null}}}bs.GITHUB_SIGN_IN_METHOD="github.com";bs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts extends Tu{constructor(){super("twitter.com")}static credential(e,t){return Bo._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ts.credential(t,r)}catch{return null}}}Ts.TWITTER_SIGN_IN_METHOD="twitter.com";Ts.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IA(n,e){return bu(n,"POST","/v1/accounts:signUp",Hs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await kr._fromIdTokenResponse(e,r,i),l=yw(r);return new Ho({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=yw(r);return new Ho({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function yw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd extends Ui{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,qd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new qd(e,t,r,i)}}function tT(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?qd._fromErrorAndOperation(n,o,e,r):o})}async function kA(n,e,t=!1){const r=await nu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ho._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PA(n,e,t=!1){const{auth:r}=n;if(ar(r.app))return Promise.reject(Mi(r));const i="reauthenticate";try{const o=await nu(n,tT(r,i,e,n),t);Ce(o.idToken,r,"internal-error");const l=yy(o.idToken);Ce(l,r,"internal-error");const{sub:c}=l;return Ce(n.uid===c,r,"user-mismatch"),Ho._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Rr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nT(n,e,t=!1){if(ar(n.app))return Promise.reject(Mi(n));const r="signIn",i=await tT(n,r,e),o=await Ho._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function CA(n,e){return nT(Ko(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rT(n){const e=Ko(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function AA(n,e,t){if(ar(n.app))return Promise.reject(Mi(n));const r=Ko(n),l=await xg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",IA).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&rT(n),h}),c=await Ho._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(c.user),c}function iT(n,e,t){return ar(n.app)?Promise.reject(Mi(n)):CA(Bt(n),yl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&rT(n),r})}function RA(n,e,t,r){return Bt(n).onIdTokenChanged(e,t,r)}function DA(n,e,t){return Bt(n).beforeAuthStateChanged(e,t)}function sT(n,e,t,r){return Bt(n).onAuthStateChanged(e,t,r)}function OA(n){return Bt(n).signOut()}const Yd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Yd,"1"),this.storage.removeItem(Yd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA=1e3,NA=10;class aT extends oT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Kb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);eA()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,NA):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},MA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}aT.type="LOCAL";const LA=aT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT extends oT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}lT.type="SESSION";const cT=lT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new kf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,l=this.handlersMap[i];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(l).map(async f=>f(t.origin,o)),h=await VA(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((c,h)=>{const f=Ey("",20);i.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(y){const w=y;if(w.data.eventId===f)switch(w.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(w.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(){return window}function jA(n){ti().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(){return typeof ti().WorkerGlobalScope<"u"&&typeof ti().importScripts=="function"}async function UA(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zA(){return navigator?.serviceWorker?.controller||null}function BA(){return uT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="firebaseLocalStorageDb",HA=1,Gd="firebaseLocalStorage",dT="fbase_key";class Su{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Pf(n,e){return n.transaction([Gd],e?"readwrite":"readonly").objectStore(Gd)}function WA(){const n=indexedDB.deleteDatabase(hT);return new Su(n).toPromise()}function bg(){const n=indexedDB.open(hT,HA);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Gd,{keyPath:dT})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Gd)?e(r):(r.close(),await WA(),e(await bg()))})})}async function _w(n,e,t){const r=Pf(n,!0).put({[dT]:e,value:t});return new Su(r).toPromise()}async function $A(n,e){const t=Pf(n,!1).get(e),r=await new Su(t).toPromise();return r===void 0?null:r.value}function vw(n,e){const t=Pf(n,!0).delete(e);return new Su(t).toPromise()}const qA=800,YA=3;class fT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>YA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kf._getInstance(BA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await UA(),!this.activeServiceWorker)return;this.sender=new FA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||zA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await bg();return await _w(e,Yd,"1"),await vw(e,Yd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>_w(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>$A(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>vw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Pf(i,!1).getAll();return new Su(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}fT.type="LOCAL";const GA=fT;new xu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(n,e){return e?Oi(e):(Ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy extends vy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return nl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return nl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function QA(n){return nT(n.auth,new xy(n),n.bypassAuthState)}function XA(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),PA(t,new xy(n),n.bypassAuthState)}async function JA(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),kA(t,new xy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return QA;case"linkViaPopup":case"linkViaRedirect":return JA;case"reauthViaPopup":case"reauthViaRedirect":return XA;default:Rr(this.auth,"internal-error")}}resolve(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=new xu(2e3,1e4);class Za extends pT{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Za.currentPopupAction&&Za.currentPopupAction.cancel(),Za.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){Vi(this.filter.length===1,"Popup operations only handle one event");const e=Ey();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ei(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ei(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Za.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ei(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ZA.get())};e()}}Za.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR="pendingRedirect",Pd=new Map;class tR extends pT{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Pd.get(this.auth._key());if(!e){try{const r=await nR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Pd.set(this.auth._key(),e)}return this.bypassAuthState||Pd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nR(n,e){const t=sR(e),r=iR(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function rR(n,e){Pd.set(n._key(),e)}function iR(n){return Oi(n._redirectPersistence)}function sR(n){return kd(eR,n.config.apiKey,n.name)}async function oR(n,e,t=!1){if(ar(n.app))return Promise.reject(Mi(n));const r=Ko(n),i=KA(r,e),l=await new tR(r,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=600*1e3;class lR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!mT(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ei(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aR&&this.cachedEventUids.clear(),this.cachedEventUids.has(ww(e))}saveEventToCache(e){this.cachedEventUids.add(ww(e)),this.lastProcessedEventTime=Date.now()}}function ww(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function mT({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function cR(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mT(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uR(n,e={}){return Ws(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dR=/^https?/;async function fR(n){if(n.config.emulator)return;const{authorizedDomains:e}=await uR(n);for(const t of e)try{if(pR(t))return}catch{}Rr(n,"unauthorized-domain")}function pR(n){const e=wg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!dR.test(t))return!1;if(hR.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=new xu(3e4,6e4);function Ew(){const n=ti().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function gR(n){return new Promise((e,t)=>{function r(){Ew(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ew(),t(ei(n,"network-request-failed"))},timeout:mR.get()})}if(ti().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ti().gapi?.load)r();else{const i=cA("iframefcb");return ti()[i]=()=>{gapi.load?r():t(ei(n,"network-request-failed"))},Xb(`${lA()}?onload=${i}`).catch(o=>t(o))}}).catch(e=>{throw Cd=null,e})}let Cd=null;function yR(n){return Cd=Cd||gR(n),Cd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=new xu(5e3,15e3),vR="__/auth/iframe",wR="emulator/auth/iframe",ER={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bR(n){const e=n.config;Ce(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?gy(e,wR):`https://${n.config.authDomain}/${vR}`,r={apiKey:e.apiKey,appName:n.name,v:gl},i=xR.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Eu(r).slice(1)}`}async function TR(n){const e=await yR(n),t=ti().gapi;return Ce(t,n,"internal-error"),e.open({where:document.body,url:bR(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ER,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const l=ei(n,"network-request-failed"),c=ti().setTimeout(()=>{o(l)},_R.get());function h(){ti().clearTimeout(c),i(r)}r.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},IR=500,kR=600,PR="_blank",CR="http://localhost";class xw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function AR(n,e,t,r=IR,i=kR){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const h={...SR,width:r.toString(),height:i.toString(),top:o,left:l},f=fn().toLowerCase();t&&(c=Wb(f)?PR:t),Bb(f)&&(e=e||CR,h.scrollbars="yes");const m=Object.entries(h).reduce((w,[T,I])=>`${w}${T}=${I},`,"");if(ZC(f)&&c!=="_self")return RR(e||"",c),new xw(null);const y=window.open(e||"",c,m);Ce(y,n,"popup-blocked");try{y.focus()}catch{}return new xw(y)}function RR(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR="__/auth/handler",OR="emulator/auth/handler",MR=encodeURIComponent("fac");async function bw(n,e,t,r,i,o){Ce(n.config.authDomain,n,"auth-domain-config-required"),Ce(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:gl,eventId:i};if(e instanceof eT){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",wP(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,y]of Object.entries({}))l[m]=y}if(e instanceof Tu){const m=e.getScopes().filter(y=>y!=="");m.length>0&&(l.scopes=m.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const h=await n._getAppCheckToken(),f=h?`#${MR}=${encodeURIComponent(h)}`:"";return`${NR(n)}?${Eu(c).slice(1)}${f}`}function NR({config:n}){return n.emulator?gy(n,OR):`https://${n.authDomain}/${DR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="webStorageSupport";class LR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cT,this._completeRedirectFn=oR,this._overrideRedirectResult=rR}async _openPopup(e,t,r,i){Vi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await bw(e,t,r,wg(),i);return AR(e,o,Ey())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await bw(e,t,r,wg(),i);return jA(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Vi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await TR(e),r=new lR(e);return t.register("authEvent",i=>(Ce(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Um,{type:Um},i=>{const o=i?.[0]?.[Um];o!==void 0&&t(!!o),Rr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=fR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Kb()||Hb()||_y()}}const VR=LR;var Tw="@firebase/auth",Sw="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function UR(n){sl(new zo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;Ce(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qb(n)},f=new sA(r,i,o,h);return mA(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),sl(new zo("auth-internal",e=>{const t=Ko(e.getProvider("auth").getImmediate());return(r=>new FR(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rs(Tw,Sw,jR(n)),Rs(Tw,Sw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=300,BR=kb("authIdTokenMaxAge")||zR;let Iw=null;const HR=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>BR)return;const i=t?.token;Iw!==i&&(Iw=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function by(n=xC()){const e=py(n,"auth");if(e.isInitialized())return e.getImmediate();const t=pA(n,{popupRedirectResolver:VR,persistence:[GA,LA,cT]}),r=kb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=HR(o.toString());DA(t,l,()=>l(t.currentUser)),RA(t,c=>l(c))}}const i=rP("auth");return i&&gA(t,`http://${i}`),t}function WR(){return document.getElementsByTagName("head")?.[0]??document}oA({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=ei("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",WR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});UR("Browser");var $R="firebase",qR="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rs($R,qR,"app");var kw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ds,gT;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,P){function A(){}A.prototype=P.prototype,D.D=P.prototype,D.prototype=new A,D.prototype.constructor=D,D.C=function(V,L,F){for(var O=Array(arguments.length-2),we=2;we<arguments.length;we++)O[we-2]=arguments[we];return P.prototype[L].apply(V,O)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,P,A){A||(A=0);var V=Array(16);if(typeof P=="string")for(var L=0;16>L;++L)V[L]=P.charCodeAt(A++)|P.charCodeAt(A++)<<8|P.charCodeAt(A++)<<16|P.charCodeAt(A++)<<24;else for(L=0;16>L;++L)V[L]=P[A++]|P[A++]<<8|P[A++]<<16|P[A++]<<24;P=D.g[0],A=D.g[1],L=D.g[2];var F=D.g[3],O=P+(F^A&(L^F))+V[0]+3614090360&4294967295;P=A+(O<<7&4294967295|O>>>25),O=F+(L^P&(A^L))+V[1]+3905402710&4294967295,F=P+(O<<12&4294967295|O>>>20),O=L+(A^F&(P^A))+V[2]+606105819&4294967295,L=F+(O<<17&4294967295|O>>>15),O=A+(P^L&(F^P))+V[3]+3250441966&4294967295,A=L+(O<<22&4294967295|O>>>10),O=P+(F^A&(L^F))+V[4]+4118548399&4294967295,P=A+(O<<7&4294967295|O>>>25),O=F+(L^P&(A^L))+V[5]+1200080426&4294967295,F=P+(O<<12&4294967295|O>>>20),O=L+(A^F&(P^A))+V[6]+2821735955&4294967295,L=F+(O<<17&4294967295|O>>>15),O=A+(P^L&(F^P))+V[7]+4249261313&4294967295,A=L+(O<<22&4294967295|O>>>10),O=P+(F^A&(L^F))+V[8]+1770035416&4294967295,P=A+(O<<7&4294967295|O>>>25),O=F+(L^P&(A^L))+V[9]+2336552879&4294967295,F=P+(O<<12&4294967295|O>>>20),O=L+(A^F&(P^A))+V[10]+4294925233&4294967295,L=F+(O<<17&4294967295|O>>>15),O=A+(P^L&(F^P))+V[11]+2304563134&4294967295,A=L+(O<<22&4294967295|O>>>10),O=P+(F^A&(L^F))+V[12]+1804603682&4294967295,P=A+(O<<7&4294967295|O>>>25),O=F+(L^P&(A^L))+V[13]+4254626195&4294967295,F=P+(O<<12&4294967295|O>>>20),O=L+(A^F&(P^A))+V[14]+2792965006&4294967295,L=F+(O<<17&4294967295|O>>>15),O=A+(P^L&(F^P))+V[15]+1236535329&4294967295,A=L+(O<<22&4294967295|O>>>10),O=P+(L^F&(A^L))+V[1]+4129170786&4294967295,P=A+(O<<5&4294967295|O>>>27),O=F+(A^L&(P^A))+V[6]+3225465664&4294967295,F=P+(O<<9&4294967295|O>>>23),O=L+(P^A&(F^P))+V[11]+643717713&4294967295,L=F+(O<<14&4294967295|O>>>18),O=A+(F^P&(L^F))+V[0]+3921069994&4294967295,A=L+(O<<20&4294967295|O>>>12),O=P+(L^F&(A^L))+V[5]+3593408605&4294967295,P=A+(O<<5&4294967295|O>>>27),O=F+(A^L&(P^A))+V[10]+38016083&4294967295,F=P+(O<<9&4294967295|O>>>23),O=L+(P^A&(F^P))+V[15]+3634488961&4294967295,L=F+(O<<14&4294967295|O>>>18),O=A+(F^P&(L^F))+V[4]+3889429448&4294967295,A=L+(O<<20&4294967295|O>>>12),O=P+(L^F&(A^L))+V[9]+568446438&4294967295,P=A+(O<<5&4294967295|O>>>27),O=F+(A^L&(P^A))+V[14]+3275163606&4294967295,F=P+(O<<9&4294967295|O>>>23),O=L+(P^A&(F^P))+V[3]+4107603335&4294967295,L=F+(O<<14&4294967295|O>>>18),O=A+(F^P&(L^F))+V[8]+1163531501&4294967295,A=L+(O<<20&4294967295|O>>>12),O=P+(L^F&(A^L))+V[13]+2850285829&4294967295,P=A+(O<<5&4294967295|O>>>27),O=F+(A^L&(P^A))+V[2]+4243563512&4294967295,F=P+(O<<9&4294967295|O>>>23),O=L+(P^A&(F^P))+V[7]+1735328473&4294967295,L=F+(O<<14&4294967295|O>>>18),O=A+(F^P&(L^F))+V[12]+2368359562&4294967295,A=L+(O<<20&4294967295|O>>>12),O=P+(A^L^F)+V[5]+4294588738&4294967295,P=A+(O<<4&4294967295|O>>>28),O=F+(P^A^L)+V[8]+2272392833&4294967295,F=P+(O<<11&4294967295|O>>>21),O=L+(F^P^A)+V[11]+1839030562&4294967295,L=F+(O<<16&4294967295|O>>>16),O=A+(L^F^P)+V[14]+4259657740&4294967295,A=L+(O<<23&4294967295|O>>>9),O=P+(A^L^F)+V[1]+2763975236&4294967295,P=A+(O<<4&4294967295|O>>>28),O=F+(P^A^L)+V[4]+1272893353&4294967295,F=P+(O<<11&4294967295|O>>>21),O=L+(F^P^A)+V[7]+4139469664&4294967295,L=F+(O<<16&4294967295|O>>>16),O=A+(L^F^P)+V[10]+3200236656&4294967295,A=L+(O<<23&4294967295|O>>>9),O=P+(A^L^F)+V[13]+681279174&4294967295,P=A+(O<<4&4294967295|O>>>28),O=F+(P^A^L)+V[0]+3936430074&4294967295,F=P+(O<<11&4294967295|O>>>21),O=L+(F^P^A)+V[3]+3572445317&4294967295,L=F+(O<<16&4294967295|O>>>16),O=A+(L^F^P)+V[6]+76029189&4294967295,A=L+(O<<23&4294967295|O>>>9),O=P+(A^L^F)+V[9]+3654602809&4294967295,P=A+(O<<4&4294967295|O>>>28),O=F+(P^A^L)+V[12]+3873151461&4294967295,F=P+(O<<11&4294967295|O>>>21),O=L+(F^P^A)+V[15]+530742520&4294967295,L=F+(O<<16&4294967295|O>>>16),O=A+(L^F^P)+V[2]+3299628645&4294967295,A=L+(O<<23&4294967295|O>>>9),O=P+(L^(A|~F))+V[0]+4096336452&4294967295,P=A+(O<<6&4294967295|O>>>26),O=F+(A^(P|~L))+V[7]+1126891415&4294967295,F=P+(O<<10&4294967295|O>>>22),O=L+(P^(F|~A))+V[14]+2878612391&4294967295,L=F+(O<<15&4294967295|O>>>17),O=A+(F^(L|~P))+V[5]+4237533241&4294967295,A=L+(O<<21&4294967295|O>>>11),O=P+(L^(A|~F))+V[12]+1700485571&4294967295,P=A+(O<<6&4294967295|O>>>26),O=F+(A^(P|~L))+V[3]+2399980690&4294967295,F=P+(O<<10&4294967295|O>>>22),O=L+(P^(F|~A))+V[10]+4293915773&4294967295,L=F+(O<<15&4294967295|O>>>17),O=A+(F^(L|~P))+V[1]+2240044497&4294967295,A=L+(O<<21&4294967295|O>>>11),O=P+(L^(A|~F))+V[8]+1873313359&4294967295,P=A+(O<<6&4294967295|O>>>26),O=F+(A^(P|~L))+V[15]+4264355552&4294967295,F=P+(O<<10&4294967295|O>>>22),O=L+(P^(F|~A))+V[6]+2734768916&4294967295,L=F+(O<<15&4294967295|O>>>17),O=A+(F^(L|~P))+V[13]+1309151649&4294967295,A=L+(O<<21&4294967295|O>>>11),O=P+(L^(A|~F))+V[4]+4149444226&4294967295,P=A+(O<<6&4294967295|O>>>26),O=F+(A^(P|~L))+V[11]+3174756917&4294967295,F=P+(O<<10&4294967295|O>>>22),O=L+(P^(F|~A))+V[2]+718787259&4294967295,L=F+(O<<15&4294967295|O>>>17),O=A+(F^(L|~P))+V[9]+3951481745&4294967295,D.g[0]=D.g[0]+P&4294967295,D.g[1]=D.g[1]+(L+(O<<21&4294967295|O>>>11))&4294967295,D.g[2]=D.g[2]+L&4294967295,D.g[3]=D.g[3]+F&4294967295}r.prototype.u=function(D,P){P===void 0&&(P=D.length);for(var A=P-this.blockSize,V=this.B,L=this.h,F=0;F<P;){if(L==0)for(;F<=A;)i(this,D,F),F+=this.blockSize;if(typeof D=="string"){for(;F<P;)if(V[L++]=D.charCodeAt(F++),L==this.blockSize){i(this,V),L=0;break}}else for(;F<P;)if(V[L++]=D[F++],L==this.blockSize){i(this,V),L=0;break}}this.h=L,this.o+=P},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var P=1;P<D.length-8;++P)D[P]=0;var A=8*this.o;for(P=D.length-8;P<D.length;++P)D[P]=A&255,A/=256;for(this.u(D),D=Array(16),P=A=0;4>P;++P)for(var V=0;32>V;V+=8)D[A++]=this.g[P]>>>V&255;return D};function o(D,P){var A=c;return Object.prototype.hasOwnProperty.call(A,D)?A[D]:A[D]=P(D)}function l(D,P){this.h=P;for(var A=[],V=!0,L=D.length-1;0<=L;L--){var F=D[L]|0;V&&F==P||(A[L]=F,V=!1)}this.g=A}var c={};function h(D){return-128<=D&&128>D?o(D,function(P){return new l([P|0],0>P?-1:0)}):new l([D|0],0>D?-1:0)}function f(D){if(isNaN(D)||!isFinite(D))return y;if(0>D)return x(f(-D));for(var P=[],A=1,V=0;D>=A;V++)P[V]=D/A|0,A*=4294967296;return new l(P,0)}function m(D,P){if(D.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(D.charAt(0)=="-")return x(m(D.substring(1),P));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=f(Math.pow(P,8)),V=y,L=0;L<D.length;L+=8){var F=Math.min(8,D.length-L),O=parseInt(D.substring(L,L+F),P);8>F?(F=f(Math.pow(P,F)),V=V.j(F).add(f(O))):(V=V.j(A),V=V.add(f(O)))}return V}var y=h(0),w=h(1),T=h(16777216);n=l.prototype,n.m=function(){if(k(this))return-x(this).m();for(var D=0,P=1,A=0;A<this.g.length;A++){var V=this.i(A);D+=(0<=V?V:4294967296+V)*P,P*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(I(this))return"0";if(k(this))return"-"+x(this).toString(D);for(var P=f(Math.pow(D,6)),A=this,V="";;){var L=K(A,P).g;A=N(A,L.j(P));var F=((0<A.g.length?A.g[0]:A.h)>>>0).toString(D);if(A=L,I(A))return F+V;for(;6>F.length;)F="0"+F;V=F+V}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function I(D){if(D.h!=0)return!1;for(var P=0;P<D.g.length;P++)if(D.g[P]!=0)return!1;return!0}function k(D){return D.h==-1}n.l=function(D){return D=N(this,D),k(D)?-1:I(D)?0:1};function x(D){for(var P=D.g.length,A=[],V=0;V<P;V++)A[V]=~D.g[V];return new l(A,~D.h).add(w)}n.abs=function(){return k(this)?x(this):this},n.add=function(D){for(var P=Math.max(this.g.length,D.g.length),A=[],V=0,L=0;L<=P;L++){var F=V+(this.i(L)&65535)+(D.i(L)&65535),O=(F>>>16)+(this.i(L)>>>16)+(D.i(L)>>>16);V=O>>>16,F&=65535,O&=65535,A[L]=O<<16|F}return new l(A,A[A.length-1]&-2147483648?-1:0)};function N(D,P){return D.add(x(P))}n.j=function(D){if(I(this)||I(D))return y;if(k(this))return k(D)?x(this).j(x(D)):x(x(this).j(D));if(k(D))return x(this.j(x(D)));if(0>this.l(T)&&0>D.l(T))return f(this.m()*D.m());for(var P=this.g.length+D.g.length,A=[],V=0;V<2*P;V++)A[V]=0;for(V=0;V<this.g.length;V++)for(var L=0;L<D.g.length;L++){var F=this.i(V)>>>16,O=this.i(V)&65535,we=D.i(L)>>>16,he=D.i(L)&65535;A[2*V+2*L]+=O*he,U(A,2*V+2*L),A[2*V+2*L+1]+=F*he,U(A,2*V+2*L+1),A[2*V+2*L+1]+=O*we,U(A,2*V+2*L+1),A[2*V+2*L+2]+=F*we,U(A,2*V+2*L+2)}for(V=0;V<P;V++)A[V]=A[2*V+1]<<16|A[2*V];for(V=P;V<2*P;V++)A[V]=0;return new l(A,0)};function U(D,P){for(;(D[P]&65535)!=D[P];)D[P+1]+=D[P]>>>16,D[P]&=65535,P++}function H(D,P){this.g=D,this.h=P}function K(D,P){if(I(P))throw Error("division by zero");if(I(D))return new H(y,y);if(k(D))return P=K(x(D),P),new H(x(P.g),x(P.h));if(k(P))return P=K(D,x(P)),new H(x(P.g),P.h);if(30<D.g.length){if(k(D)||k(P))throw Error("slowDivide_ only works with positive integers.");for(var A=w,V=P;0>=V.l(D);)A=G(A),V=G(V);var L=ne(A,1),F=ne(V,1);for(V=ne(V,2),A=ne(A,2);!I(V);){var O=F.add(V);0>=O.l(D)&&(L=L.add(A),F=O),V=ne(V,1),A=ne(A,1)}return P=N(D,L.j(P)),new H(L,P)}for(L=y;0<=D.l(P);){for(A=Math.max(1,Math.floor(D.m()/P.m())),V=Math.ceil(Math.log(A)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),F=f(A),O=F.j(P);k(O)||0<O.l(D);)A-=V,F=f(A),O=F.j(P);I(F)&&(F=w),L=L.add(F),D=N(D,O)}return new H(L,D)}n.A=function(D){return K(this,D).h},n.and=function(D){for(var P=Math.max(this.g.length,D.g.length),A=[],V=0;V<P;V++)A[V]=this.i(V)&D.i(V);return new l(A,this.h&D.h)},n.or=function(D){for(var P=Math.max(this.g.length,D.g.length),A=[],V=0;V<P;V++)A[V]=this.i(V)|D.i(V);return new l(A,this.h|D.h)},n.xor=function(D){for(var P=Math.max(this.g.length,D.g.length),A=[],V=0;V<P;V++)A[V]=this.i(V)^D.i(V);return new l(A,this.h^D.h)};function G(D){for(var P=D.g.length+1,A=[],V=0;V<P;V++)A[V]=D.i(V)<<1|D.i(V-1)>>>31;return new l(A,D.h)}function ne(D,P){var A=P>>5;P%=32;for(var V=D.g.length-A,L=[],F=0;F<V;F++)L[F]=0<P?D.i(F+A)>>>P|D.i(F+A+1)<<32-P:D.i(F+A);return new l(L,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,gT=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=m,Ds=l}).apply(typeof kw<"u"?kw:typeof self<"u"?self:typeof window<"u"?window:{});var id=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yT,Mc,_T,Ad,Tg,vT,wT,ET;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,_,E){return d==Array.prototype||d==Object.prototype||(d[_]=E.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof id=="object"&&id];for(var _=0;_<d.length;++_){var E=d[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function i(d,_){if(_)e:{var E=r;d=d.split(".");for(var C=0;C<d.length-1;C++){var $=d[C];if(!($ in E))break e;E=E[$]}d=d[d.length-1],C=E[d],_=_(C),_!=C&&_!=null&&e(E,d,{configurable:!0,writable:!0,value:_})}}function o(d,_){d instanceof String&&(d+="");var E=0,C=!1,$={next:function(){if(!C&&E<d.length){var Z=E++;return{value:_(Z,d[Z]),done:!1}}return C=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}i("Array.prototype.values",function(d){return d||function(){return o(this,function(_,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function h(d){var _=typeof d;return _=_!="object"?_:d?Array.isArray(d)?"array":_:"null",_=="array"||_=="object"&&typeof d.length=="number"}function f(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function m(d,_,E){return d.call.apply(d.bind,arguments)}function y(d,_,E){if(!d)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,C),d.apply(_,$)}}return function(){return d.apply(_,arguments)}}function w(d,_,E){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:y,w.apply(null,arguments)}function T(d,_){var E=Array.prototype.slice.call(arguments,1);return function(){var C=E.slice();return C.push.apply(C,arguments),d.apply(this,C)}}function I(d,_){function E(){}E.prototype=_.prototype,d.aa=_.prototype,d.prototype=new E,d.prototype.constructor=d,d.Qb=function(C,$,Z){for(var de=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)de[Xe-2]=arguments[Xe];return _.prototype[$].apply(C,de)}}function k(d){const _=d.length;if(0<_){const E=Array(_);for(let C=0;C<_;C++)E[C]=d[C];return E}return[]}function x(d,_){for(let E=1;E<arguments.length;E++){const C=arguments[E];if(h(C)){const $=d.length||0,Z=C.length||0;d.length=$+Z;for(let de=0;de<Z;de++)d[$+de]=C[de]}else d.push(C)}}class N{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function U(d){return/^[\s\xa0]*$/.test(d)}function H(){var d=c.navigator;return d&&(d=d.userAgent)?d:""}function K(d){return K[" "](d),d}K[" "]=function(){};var G=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function ne(d,_,E){for(const C in d)_.call(E,d[C],C,d)}function D(d,_){for(const E in d)_.call(void 0,d[E],E,d)}function P(d){const _={};for(const E in d)_[E]=d[E];return _}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(d,_){let E,C;for(let $=1;$<arguments.length;$++){C=arguments[$];for(E in C)d[E]=C[E];for(let Z=0;Z<A.length;Z++)E=A[Z],Object.prototype.hasOwnProperty.call(C,E)&&(d[E]=C[E])}}function L(d){var _=1;d=d.split(":");const E=[];for(;0<_&&d.length;)E.push(d.shift()),_--;return d.length&&E.push(d.join(":")),E}function F(d){c.setTimeout(()=>{throw d},0)}function O(){var d=pe;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class we{constructor(){this.h=this.g=null}add(_,E){const C=he.get();C.set(_,E),this.h?this.h.next=C:this.g=C,this.h=C}}var he=new N(()=>new Ie,d=>d.reset());class Ie{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let te,se=!1,pe=new we,R=()=>{const d=c.Promise.resolve(void 0);te=()=>{d.then(z)}};var z=()=>{for(var d;d=O();){try{d.h.call(d.g)}catch(E){F(E)}var _=he;_.j(d),100>_.h&&(_.h++,d.next=_.g,_.g=d)}se=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function J(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}J.prototype.h=function(){this.defaultPrevented=!0};var oe=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};c.addEventListener("test",E,_),c.removeEventListener("test",E,_)}catch{}return d}();function ye(d,_){if(J.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var E=this.type=d.type,C=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget){if(G){e:{try{K(_.nodeName);var $=!0;break e}catch{}$=!1}$||(_=null)}}else E=="mouseover"?_=d.fromElement:E=="mouseout"&&(_=d.toElement);this.relatedTarget=_,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:xe[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&ye.aa.h.call(this)}}I(ye,J);var xe={2:"touch",3:"pen",4:"mouse"};ye.prototype.h=function(){ye.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Se="closure_listenable_"+(1e6*Math.random()|0),Re=0;function Ke(d,_,E,C,$){this.listener=d,this.proxy=null,this.src=_,this.type=E,this.capture=!!C,this.ha=$,this.key=++Re,this.da=this.fa=!1}function st(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function tt(d){this.src=d,this.g={},this.h=0}tt.prototype.add=function(d,_,E,C,$){var Z=d.toString();d=this.g[Z],d||(d=this.g[Z]=[],this.h++);var de=Gn(d,_,C,$);return-1<de?(_=d[de],E||(_.fa=!1)):(_=new Ke(_,this.src,Z,!!C,$),_.fa=E,d.push(_)),_};function At(d,_){var E=_.type;if(E in d.g){var C=d.g[E],$=Array.prototype.indexOf.call(C,_,void 0),Z;(Z=0<=$)&&Array.prototype.splice.call(C,$,1),Z&&(st(_),d.g[E].length==0&&(delete d.g[E],d.h--))}}function Gn(d,_,E,C){for(var $=0;$<d.length;++$){var Z=d[$];if(!Z.da&&Z.listener==_&&Z.capture==!!E&&Z.ha==C)return $}return-1}var ui="closure_lm_"+(1e6*Math.random()|0),Bi={};function Hi(d,_,E,C,$){if(Array.isArray(_)){for(var Z=0;Z<_.length;Z++)Hi(d,_[Z],E,C,$);return null}return E=Al(E),d&&d[Se]?d.K(_,E,f(C)?!!C.capture:!1,$):hi(d,_,E,!1,C,$)}function hi(d,_,E,C,$,Z){if(!_)throw Error("Invalid event type");var de=f($)?!!$.capture:!!$,Xe=na(d);if(Xe||(d[ui]=Xe=new tt(d)),E=Xe.add(_,E,C,de,Z),E.proxy)return E;if(C=ta(),E.proxy=C,C.src=d,C.listener=E,d.addEventListener)oe||($=de),$===void 0&&($=!1),d.addEventListener(_.toString(),C,$);else if(d.attachEvent)d.attachEvent(di(_.toString()),C);else if(d.addListener&&d.removeListener)d.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return E}function ta(){function d(E){return _.call(d.src,d.listener,E)}const _=Cl;return d}function Wi(d,_,E,C,$){if(Array.isArray(_))for(var Z=0;Z<_.length;Z++)Wi(d,_[Z],E,C,$);else C=f(C)?!!C.capture:!!C,E=Al(E),d&&d[Se]?(d=d.i,_=String(_).toString(),_ in d.g&&(Z=d.g[_],E=Gn(Z,E,C,$),-1<E&&(st(Z[E]),Array.prototype.splice.call(Z,E,1),Z.length==0&&(delete d.g[_],d.h--)))):d&&(d=na(d))&&(_=d.g[_.toString()],d=-1,_&&(d=Gn(_,E,C,$)),(E=-1<d?_[d]:null)&&Nn(E))}function Nn(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[Se])At(_.i,d);else{var E=d.type,C=d.proxy;_.removeEventListener?_.removeEventListener(E,C,d.capture):_.detachEvent?_.detachEvent(di(E),C):_.addListener&&_.removeListener&&_.removeListener(C),(E=na(_))?(At(E,d),E.h==0&&(E.src=null,_[ui]=null)):st(d)}}}function di(d){return d in Bi?Bi[d]:Bi[d]="on"+d}function Cl(d,_){if(d.da)d=!0;else{_=new ye(_,this);var E=d.listener,C=d.ha||d.src;d.fa&&Nn(d),d=E.call(C,_)}return d}function na(d){return d=d[ui],d instanceof tt?d:null}var ra="__closure_events_fn_"+(1e9*Math.random()>>>0);function Al(d){return typeof d=="function"?d:(d[ra]||(d[ra]=function(_){return d.handleEvent(_)}),d[ra])}function Lt(){X.call(this),this.i=new tt(this),this.M=this,this.F=null}I(Lt,X),Lt.prototype[Se]=!0,Lt.prototype.removeEventListener=function(d,_,E,C){Wi(this,d,_,E,C)};function Vt(d,_){var E,C=d.F;if(C)for(E=[];C;C=C.F)E.push(C);if(d=d.M,C=_.type||_,typeof _=="string")_=new J(_,d);else if(_ instanceof J)_.target=_.target||d;else{var $=_;_=new J(C,d),V(_,$)}if($=!0,E)for(var Z=E.length-1;0<=Z;Z--){var de=_.g=E[Z];$=fi(de,C,!0,_)&&$}if(de=_.g=d,$=fi(de,C,!0,_)&&$,$=fi(de,C,!1,_)&&$,E)for(Z=0;Z<E.length;Z++)de=_.g=E[Z],$=fi(de,C,!1,_)&&$}Lt.prototype.N=function(){if(Lt.aa.N.call(this),this.i){var d=this.i,_;for(_ in d.g){for(var E=d.g[_],C=0;C<E.length;C++)st(E[C]);delete d.g[_],d.h--}}this.F=null},Lt.prototype.K=function(d,_,E,C){return this.i.add(String(d),_,!1,E,C)},Lt.prototype.L=function(d,_,E,C){return this.i.add(String(d),_,!0,E,C)};function fi(d,_,E,C){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();for(var $=!0,Z=0;Z<_.length;++Z){var de=_[Z];if(de&&!de.da&&de.capture==E){var Xe=de.listener,Ft=de.ha||de.src;de.fa&&At(d.i,de),$=Xe.call(Ft,C)!==!1&&$}}return $&&!C.defaultPrevented}function Rl(d,_,E){if(typeof d=="function")E&&(d=w(d,E));else if(d&&typeof d.handleEvent=="function")d=w(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:c.setTimeout(d,_||0)}function $i(d){d.g=Rl(()=>{d.g=null,d.i&&(d.i=!1,$i(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class Ks extends X{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:$i(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qs(d){X.call(this),this.h=d,this.g={}}I(Qs,X);var Dl=[];function Ol(d){ne(d.g,function(_,E){this.g.hasOwnProperty(E)&&Nn(_)},d),d.g={}}Qs.prototype.N=function(){Qs.aa.N.call(this),Ol(this)},Qs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ml=c.JSON.stringify,Nl=c.JSON.parse,Ll=class{stringify(d){return c.JSON.stringify(d,void 0)}parse(d){return c.JSON.parse(d,void 0)}};function Xs(){}Xs.prototype.h=null;function ia(d){return d.h||(d.h=d.i())}function sa(){}var Kn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Nr(){J.call(this,"d")}I(Nr,J);function oa(){J.call(this,"c")}I(oa,J);var Lr={},Vl=null;function Js(){return Vl=Vl||new Lt}Lr.La="serverreachability";function Fl(d){J.call(this,Lr.La,d)}I(Fl,J);function pi(d){const _=Js();Vt(_,new Fl(_))}Lr.STAT_EVENT="statevent";function jl(d,_){J.call(this,Lr.STAT_EVENT,d),this.stat=_}I(jl,J);function Et(d){const _=Js();Vt(_,new jl(_,d))}Lr.Ma="timingevent";function aa(d,_){J.call(this,Lr.Ma,d),this.size=_}I(aa,J);function ur(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){d()},_)}function Zs(){this.g=!0}Zs.prototype.xa=function(){this.g=!1};function eo(d,_,E,C,$,Z){d.info(function(){if(d.g)if(Z)for(var de="",Xe=Z.split("&"),Ft=0;Ft<Xe.length;Ft++){var Be=Xe[Ft].split("=");if(1<Be.length){var Ht=Be[0];Be=Be[1];var Rt=Ht.split("_");de=2<=Rt.length&&Rt[1]=="type"?de+(Ht+"="+Be+"&"):de+(Ht+"=redacted&")}}else de=null;else de=Z;return"XMLHTTP REQ ("+C+") [attempt "+$+"]: "+_+`
`+E+`
`+de})}function la(d,_,E,C,$,Z,de){d.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+$+"]: "+_+`
`+E+`
`+Z+" "+de})}function hr(d,_,E,C){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+op(d,E)+(C?" "+C:"")})}function Ul(d,_){d.info(function(){return"TIMEOUT: "+_})}Zs.prototype.info=function(){};function op(d,_){if(!d.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(d=0;d<E.length;d++)if(Array.isArray(E[d])){var C=E[d];if(!(2>C.length)){var $=C[1];if(Array.isArray($)&&!(1>$.length)){var Z=$[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var de=1;de<$.length;de++)$[de]=""}}}}return Ml(E)}catch{return _}}var ca={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Hu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},dr;function to(){}I(to,Xs),to.prototype.g=function(){return new XMLHttpRequest},to.prototype.i=function(){return{}},dr=new to;function fr(d,_,E,C){this.j=d,this.i=_,this.l=E,this.R=C||1,this.U=new Qs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Wu}function Wu(){this.i=null,this.g="",this.h=!1}var zl={},ua={};function ha(d,_,E){d.L=1,d.v=Qi(Vn(_)),d.m=E,d.P=!0,Bl(d,null)}function Bl(d,_){d.F=Date.now(),nt(d),d.A=Vn(d.v);var E=d.A,C=d.R;Array.isArray(C)||(C=[String(C)]),Ji(E.i,"t",C),d.C=0,E=d.j.J,d.h=new Wu,d.g=lh(d.j,E?_:null,!d.m),0<d.O&&(d.M=new Ks(w(d.Y,d,d.g),d.O)),_=d.U,E=d.g,C=d.ca;var $="readystatechange";Array.isArray($)||($&&(Dl[0]=$.toString()),$=Dl);for(var Z=0;Z<$.length;Z++){var de=Hi(E,$[Z],C||_.handleEvent,!1,_.h||_);if(!de)break;_.g[de.key]=de}_=d.H?P(d.H):{},d.m?(d.u||(d.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,_)):(d.u="GET",d.g.ea(d.A,d.u,null,_)),pi(),eo(d.i,d.u,d.A,d.l,d.R,d.m)}fr.prototype.ca=function(d){d=d.target;const _=this.M;_&&wn(d)==3?_.j():this.Y(d)},fr.prototype.Y=function(d){try{if(d==this.g)e:{const Rt=wn(this.g);var _=this.g.Ba();const Jn=this.g.Z();if(!(3>Rt)&&(Rt!=3||this.g&&(this.h.h||this.g.oa()||Gl(this.g)))){this.J||Rt!=4||_==7||(_==8||0>=Jn?pi(3):pi(2)),no(this);var E=this.g.Z();this.X=E;t:if($u(this)){var C=Gl(this.g);d="";var $=C.length,Z=wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qn(this),qi(this);var de="";break t}this.h.i=new c.TextDecoder}for(_=0;_<$;_++)this.h.h=!0,d+=this.h.i.decode(C[_],{stream:!(Z&&_==$-1)});C.length=0,this.h.g+=d,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=E==200,la(this.i,this.u,this.A,this.l,this.R,Rt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Xe,Ft=this.g;if((Xe=Ft.g?Ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(Xe)){var Be=Xe;break t}}Be=null}if(E=Be)hr(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hl(this,E);else{this.o=!1,this.s=3,Et(12),Qn(this),qi(this);break e}}if(this.P){E=!0;let jn;for(;!this.J&&this.C<de.length;)if(jn=ap(this,de),jn==ua){Rt==4&&(this.s=4,Et(14),E=!1),hr(this.i,this.l,null,"[Incomplete Response]");break}else if(jn==zl){this.s=4,Et(15),hr(this.i,this.l,de,"[Invalid Chunk]"),E=!1;break}else hr(this.i,this.l,jn,null),Hl(this,jn);if($u(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||de.length!=0||this.h.h||(this.s=1,Et(16),E=!1),this.o=this.o&&E,!E)hr(this.i,this.l,de,"[Invalid Chunked Response]"),Qn(this),qi(this);else if(0<de.length&&!this.W){this.W=!0;var Ht=this.j;Ht.g==this&&Ht.ba&&!Ht.M&&(Ht.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),Ql(Ht),Ht.M=!0,Et(11))}}else hr(this.i,this.l,de,null),Hl(this,de);Rt==4&&Qn(this),this.o&&!this.J&&(Rt==4?xa(this.j,this):(this.o=!1,nt(this)))}else ya(this.g),E==400&&0<de.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),Qn(this),qi(this)}}}catch{}finally{}};function $u(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function ap(d,_){var E=d.C,C=_.indexOf(`
`,E);return C==-1?ua:(E=Number(_.substring(E,C)),isNaN(E)?zl:(C+=1,C+E>_.length?ua:(_=_.slice(C,C+E),d.C=C+E,_)))}fr.prototype.cancel=function(){this.J=!0,Qn(this)};function nt(d){d.S=Date.now()+d.I,qu(d,d.I)}function qu(d,_){if(d.B!=null)throw Error("WatchDog timer not null");d.B=ur(w(d.ba,d),_)}function no(d){d.B&&(c.clearTimeout(d.B),d.B=null)}fr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Ul(this.i,this.A),this.L!=2&&(pi(),Et(17)),Qn(this),this.s=2,qi(this)):qu(this,this.S-d)};function qi(d){d.j.G==0||d.J||xa(d.j,d)}function Qn(d){no(d);var _=d.M;_&&typeof _.ma=="function"&&_.ma(),d.M=null,Ol(d.U),d.g&&(_=d.g,d.g=null,_.abort(),_.ma())}function Hl(d,_){try{var E=d.j;if(E.G!=0&&(E.g==d||pn(E.h,d))){if(!d.K&&pn(E.h,d)&&E.G==3){try{var C=E.Da.g.parse(_)}catch{C=null}if(Array.isArray(C)&&C.length==3){var $=C;if($[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<d.F)Ea(E),_r(E);else break e;wa(E),Et(18)}}else E.za=$[1],0<E.za-E.T&&37500>$[2]&&E.F&&E.v==0&&!E.C&&(E.C=ur(w(E.Za,E),6e3));if(1>=Gu(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else vi(E,11)}else if((d.K||E.g==d)&&Ea(E),!U(_))for($=E.Da.g.parse(_),_=0;_<$.length;_++){let Be=$[_];if(E.T=Be[0],Be=Be[1],E.G==2)if(Be[0]=="c"){E.K=Be[1],E.ia=Be[2];const Ht=Be[3];Ht!=null&&(E.la=Ht,E.j.info("VER="+E.la));const Rt=Be[4];Rt!=null&&(E.Aa=Rt,E.j.info("SVER="+E.Aa));const Jn=Be[5];Jn!=null&&typeof Jn=="number"&&0<Jn&&(C=1.5*Jn,E.L=C,E.j.info("backChannelRequestTimeoutMs_="+C)),C=E;const jn=d.g;if(jn){const co=jn.g?jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(co){var Z=C.h;Z.g||co.indexOf("spdy")==-1&&co.indexOf("quic")==-1&&co.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Wl(Z,Z.h),Z.h=null))}if(C.D){const Ta=jn.g?jn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ta&&(C.ya=Ta,et(C.I,C.D,Ta))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-d.F,E.j.info("Handshake RTT: "+E.R+"ms")),C=E;var de=d;if(C.qa=ah(C,C.J?C.ia:null,C.W),de.K){Ku(C.h,de);var Xe=de,Ft=C.L;Ft&&(Xe.I=Ft),Xe.B&&(no(Xe),nt(Xe)),C.g=de}else lo(C);0<E.i.length&&Ur(E)}else Be[0]!="stop"&&Be[0]!="close"||vi(E,7);else E.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?vi(E,7):Kt(E):Be[0]!="noop"&&E.l&&E.l.ta(Be),E.v=0)}}pi(4)}catch{}}var Yu=class{constructor(d,_){this.g=d,this.map=_}};function ro(d){this.l=d||10,c.PerformanceNavigationTiming?(d=c.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ln(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Gu(d){return d.h?1:d.g?d.g.size:0}function pn(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function Wl(d,_){d.g?d.g.add(_):d.h=_}function Ku(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}ro.prototype.cancel=function(){if(this.i=Qu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Qu(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const E of d.g.values())_=_.concat(E.D);return _}return k(d.i)}function da(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(h(d)){for(var _=[],E=d.length,C=0;C<E;C++)_.push(d[C]);return _}_=[],E=0;for(C in d)_[E++]=d[C];return _}function fa(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(h(d)||typeof d=="string"){var _=[];d=d.length;for(var E=0;E<d;E++)_.push(E);return _}_=[],E=0;for(const C in d)_[E++]=C;return _}}}function Yi(d,_){if(d.forEach&&typeof d.forEach=="function")d.forEach(_,void 0);else if(h(d)||typeof d=="string")Array.prototype.forEach.call(d,_,void 0);else for(var E=fa(d),C=da(d),$=C.length,Z=0;Z<$;Z++)_.call(void 0,C[Z],E&&E[Z],d)}var io=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lp(d,_){if(d){d=d.split("&");for(var E=0;E<d.length;E++){var C=d[E].indexOf("="),$=null;if(0<=C){var Z=d[E].substring(0,C);$=d[E].substring(C+1)}else Z=d[E];_(Z,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function mi(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof mi){this.h=d.h,so(this,d.j),this.o=d.o,this.g=d.g,Gi(this,d.s),this.l=d.l;var _=d.i,E=new Vr;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),Ki(this,E),this.m=d.m}else d&&(_=String(d).match(io))?(this.h=!1,so(this,_[1]||"",!0),this.o=ze(_[2]||""),this.g=ze(_[3]||"",!0),Gi(this,_[4]),this.l=ze(_[5]||"",!0),Ki(this,_[6]||"",!0),this.m=ze(_[7]||"")):(this.h=!1,this.i=new Vr(null,this.h))}mi.prototype.toString=function(){var d=[],_=this.j;_&&d.push(Xi(_,pa,!0),":");var E=this.g;return(E||_=="file")&&(d.push("//"),(_=this.o)&&d.push(Xi(_,pa,!0),"@"),d.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&d.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(Xi(E,E.charAt(0)=="/"?Zu:Ju,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",Xi(E,$l)),d.join("")};function Vn(d){return new mi(d)}function so(d,_,E){d.j=E?ze(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function Gi(d,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);d.s=_}else d.s=null}function Ki(d,_,E){_ instanceof Vr?(d.i=_,Fr(d.i,d.h)):(E||(_=Xi(_,eh)),d.i=new Vr(_,d.h))}function et(d,_,E){d.i.set(_,E)}function Qi(d){return et(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function ze(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Xi(d,_,E){return typeof d=="string"?(d=encodeURI(d).replace(_,Xu),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Xu(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var pa=/[#\/\?@]/g,Ju=/[#\?:]/g,Zu=/[#\?]/g,eh=/[#\?@]/g,$l=/#/g;function Vr(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function Gt(d){d.g||(d.g=new Map,d.h=0,d.i&&lp(d.i,function(_,E){d.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}n=Vr.prototype,n.add=function(d,_){Gt(this),this.i=null,d=Xn(this,d);var E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(_),this.h+=1,this};function pr(d,_){Gt(d),_=Xn(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function mr(d,_){return Gt(d),_=Xn(d,_),d.g.has(_)}n.forEach=function(d,_){Gt(this),this.g.forEach(function(E,C){E.forEach(function($){d.call(_,$,C,this)},this)},this)},n.na=function(){Gt(this);const d=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let C=0;C<_.length;C++){const $=d[C];for(let Z=0;Z<$.length;Z++)E.push(_[C])}return E},n.V=function(d){Gt(this);let _=[];if(typeof d=="string")mr(this,d)&&(_=_.concat(this.g.get(Xn(this,d))));else{d=Array.from(this.g.values());for(let E=0;E<d.length;E++)_=_.concat(d[E])}return _},n.set=function(d,_){return Gt(this),this.i=null,d=Xn(this,d),mr(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},n.get=function(d,_){return d?(d=this.V(d),0<d.length?String(d[0]):_):_};function Ji(d,_,E){pr(d,_),0<E.length&&(d.i=null,d.g.set(Xn(d,_),k(E)),d.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var C=_[E];const Z=encodeURIComponent(String(C)),de=this.V(C);for(C=0;C<de.length;C++){var $=Z;de[C]!==""&&($+="="+encodeURIComponent(String(de[C]))),d.push($)}}return this.i=d.join("&")};function Xn(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function Fr(d,_){_&&!d.j&&(Gt(d),d.i=null,d.g.forEach(function(E,C){var $=C.toLowerCase();C!=$&&(pr(this,C),Ji(this,$,E))},d)),d.j=_}function cp(d,_){const E=new Zs;if(c.Image){const C=new Image;C.onload=T(vn,E,"TestLoadImage: loaded",!0,_,C),C.onerror=T(vn,E,"TestLoadImage: error",!1,_,C),C.onabort=T(vn,E,"TestLoadImage: abort",!1,_,C),C.ontimeout=T(vn,E,"TestLoadImage: timeout",!1,_,C),c.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=d}else _(!1)}function th(d,_){const E=new Zs,C=new AbortController,$=setTimeout(()=>{C.abort(),vn(E,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:C.signal}).then(Z=>{clearTimeout($),Z.ok?vn(E,"TestPingServer: ok",!0,_):vn(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout($),vn(E,"TestPingServer: error",!1,_)})}function vn(d,_,E,C,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),C(E)}catch{}}function up(){this.g=new Ll}function nh(d,_,E){const C=E||"";try{Yi(d,function($,Z){let de=$;f($)&&(de=Ml($)),_.push(C+Z+"="+encodeURIComponent(de))})}catch($){throw _.push(C+"type="+encodeURIComponent("_badmap")),$}}function gi(d){this.l=d.Ub||null,this.j=d.eb||!1}I(gi,Xs),gi.prototype.g=function(){return new oo(this.l,this.j)},gi.prototype.i=function(d){return function(){return d}}({});function oo(d,_){Lt.call(this),this.D=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(oo,Lt),n=oo.prototype,n.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=_,this.readyState=1,yr(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(_.body=d),(this.D||c).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gr(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,yr(this)),this.g&&(this.readyState=3,yr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rh(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function rh(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?gr(this):yr(this),this.readyState==3&&rh(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,gr(this))},n.Qa=function(d){this.g&&(this.response=d,gr(this))},n.ga=function(){this.g&&gr(this)};function gr(d){d.readyState=4,d.l=null,d.j=null,d.v=null,yr(d)}n.setRequestHeader=function(d,_){this.u.append(d,_)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=_.next();return d.join(`\r
`)};function yr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(oo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function yi(d){let _="";return ne(d,function(E,C){_+=C,_+=":",_+=E,_+=`\r
`}),_}function Zi(d,_,E){e:{for(C in E){var C=!1;break e}C=!0}C||(E=yi(E),typeof d=="string"?E!=null&&encodeURIComponent(String(E)):et(d,_,E))}function ht(d){Lt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(ht,Lt);var hp=/^https?$/i,ql=["POST","PUT"];n=ht.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,_,E,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():dr.g(),this.v=this.o?ia(this.o):ia(dr),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(Z){ao(this,Z);return}if(d=E||"",E=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var $ in C)E.set($,C[$]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const Z of C.keys())E.set(Z,C.get(Z));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(E.keys()).find(Z=>Z.toLowerCase()=="content-type"),$=c.FormData&&d instanceof c.FormData,!(0<=Array.prototype.indexOf.call(ql,_,void 0))||C||$||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,de]of E)this.g.setRequestHeader(Z,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ga(this),this.u=!0,this.g.send(d),this.u=!1}catch(Z){ao(this,Z)}};function ao(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.m=5,ma(d),Fn(d)}function ma(d){d.A||(d.A=!0,Vt(d,"complete"),Vt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Vt(this,"complete"),Vt(this,"abort"),Fn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fn(this,!0)),ht.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Yl(this):this.bb())},n.bb=function(){Yl(this)};function Yl(d){if(d.h&&typeof l<"u"&&(!d.v[1]||wn(d)!=4||d.Z()!=2)){if(d.u&&wn(d)==4)Rl(d.Ea,0,d);else if(Vt(d,"readystatechange"),wn(d)==4){d.h=!1;try{const de=d.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var C;if(C=de===0){var $=String(d.D).match(io)[1]||null;!$&&c.self&&c.self.location&&($=c.self.location.protocol.slice(0,-1)),C=!hp.test($?$.toLowerCase():"")}E=C}if(E)Vt(d,"complete"),Vt(d,"success");else{d.m=6;try{var Z=2<wn(d)?d.g.statusText:""}catch{Z=""}d.l=Z+" ["+d.Z()+"]",ma(d)}}finally{Fn(d)}}}}function Fn(d,_){if(d.g){ga(d);const E=d.g,C=d.v[0]?()=>{}:null;d.g=null,d.v=null,_||Vt(d,"ready");try{E.onreadystatechange=C}catch{}}}function ga(d){d.I&&(c.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function wn(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<wn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),Nl(_)}};function Gl(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function ya(d){const _={};d=(d.g&&2<=wn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<d.length;C++){if(U(d[C]))continue;var E=L(d[C]);const $=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Z=_[$]||[];_[$]=Z,Z.push(E)}D(_,function(C){return C.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function jr(d,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||_}function Kl(d){this.Aa=0,this.i=[],this.j=new Zs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=jr("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=jr("baseRetryDelayMs",5e3,d),this.cb=jr("retryDelaySeedMs",1e4,d),this.Wa=jr("forwardChannelMaxRetries",2,d),this.wa=jr("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new ro(d&&d.concurrentRequestLimit),this.Da=new up,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Kl.prototype,n.la=8,n.G=1,n.connect=function(d,_,E,C){Et(0),this.W=d,this.H=_||{},E&&C!==void 0&&(this.H.OSID=E,this.H.OAID=C),this.F=this.X,this.I=ah(this,null,this.W),Ur(this)};function Kt(d){if(_a(d),d.G==3){var _=d.U++,E=Vn(d.I);if(et(E,"SID",d.K),et(E,"RID",_),et(E,"TYPE","terminate"),_i(d,E),_=new fr(d,d.j,_),_.L=2,_.v=Qi(Vn(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&c.Image&&(new Image().src=_.v,E=!0),E||(_.g=lh(_.j,null),_.g.ea(_.v)),_.F=Date.now(),nt(_)}oh(d)}function _r(d){d.g&&(Ql(d),d.g.cancel(),d.g=null)}function _a(d){_r(d),d.u&&(c.clearTimeout(d.u),d.u=null),Ea(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&c.clearTimeout(d.s),d.s=null)}function Ur(d){if(!Ln(d.h)&&!d.s){d.s=!0;var _=d.Ga;te||R(),se||(te(),se=!0),pe.add(_,d),d.B=0}}function dp(d,_){return Gu(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=_.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=ur(w(d.Ga,d,_),sh(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const $=new fr(this,this.j,d);let Z=this.o;if(this.S&&(Z?(Z=P(Z),V(Z,this.S)):Z=this.S),this.m!==null||this.O||($.H=Z,Z=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var C=this.i[E];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(_+=C,4096<_){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=es(this,$,_),E=Vn(this.I),et(E,"RID",d),et(E,"CVER",22),this.D&&et(E,"X-HTTP-Session-Id",this.D),_i(this,E),Z&&(this.O?_="headers="+encodeURIComponent(String(yi(Z)))+"&"+_:this.m&&Zi(E,this.m,Z)),Wl(this.h,$),this.Ua&&et(E,"TYPE","init"),this.P?(et(E,"$req",_),et(E,"SID","null"),$.T=!0,ha($,E,null)):ha($,E,_),this.G=2}}else this.G==3&&(d?va(this,d):this.i.length==0||Ln(this.h)||va(this))};function va(d,_){var E;_?E=_.l:E=d.U++;const C=Vn(d.I);et(C,"SID",d.K),et(C,"RID",E),et(C,"AID",d.T),_i(d,C),d.m&&d.o&&Zi(C,d.m,d.o),E=new fr(d,d.j,E,d.B+1),d.m===null&&(E.H=d.o),_&&(d.i=_.D.concat(d.i)),_=es(d,E,1e3),E.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Wl(d.h,E),ha(E,C,_)}function _i(d,_){d.H&&ne(d.H,function(E,C){et(_,C,E)}),d.l&&Yi({},function(E,C){et(_,C,E)})}function es(d,_,E){E=Math.min(d.i.length,E);var C=d.l?w(d.l.Na,d.l,d):null;e:{var $=d.i;let Z=-1;for(;;){const de=["count="+E];Z==-1?0<E?(Z=$[0].g,de.push("ofs="+Z)):Z=0:de.push("ofs="+Z);let Xe=!0;for(let Ft=0;Ft<E;Ft++){let Be=$[Ft].g;const Ht=$[Ft].map;if(Be-=Z,0>Be)Z=Math.max(0,$[Ft].g-100),Xe=!1;else try{nh(Ht,de,"req"+Be+"_")}catch{C&&C(Ht)}}if(Xe){C=de.join("&");break e}}}return d=d.i.splice(0,E),_.D=d,C}function lo(d){if(!d.g&&!d.u){d.Y=1;var _=d.Fa;te||R(),se||(te(),se=!0),pe.add(_,d),d.v=0}}function wa(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=ur(w(d.Fa,d),sh(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,ih(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=ur(w(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),_r(this),ih(this))};function Ql(d){d.A!=null&&(c.clearTimeout(d.A),d.A=null)}function ih(d){d.g=new fr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var _=Vn(d.qa);et(_,"RID","rpc"),et(_,"SID",d.K),et(_,"AID",d.T),et(_,"CI",d.F?"0":"1"),!d.F&&d.ja&&et(_,"TO",d.ja),et(_,"TYPE","xmlhttp"),_i(d,_),d.m&&d.o&&Zi(_,d.m,d.o),d.L&&(d.g.I=d.L);var E=d.g;d=d.ia,E.L=1,E.v=Qi(Vn(_)),E.m=null,E.P=!0,Bl(E,d)}n.Za=function(){this.C!=null&&(this.C=null,_r(this),wa(this),Et(19))};function Ea(d){d.C!=null&&(c.clearTimeout(d.C),d.C=null)}function xa(d,_){var E=null;if(d.g==_){Ea(d),Ql(d),d.g=null;var C=2}else if(pn(d.h,_))E=_.D,Ku(d.h,_),C=1;else return;if(d.G!=0){if(_.o)if(C==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var $=d.B;C=Js(),Vt(C,new aa(C,E)),Ur(d)}else lo(d);else if($=_.s,$==3||$==0&&0<_.X||!(C==1&&dp(d,_)||C==2&&wa(d)))switch(E&&0<E.length&&(_=d.h,_.i=_.i.concat(E)),$){case 1:vi(d,5);break;case 4:vi(d,10);break;case 3:vi(d,6);break;default:vi(d,2)}}}function sh(d,_){let E=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(E*=2),E*_}function vi(d,_){if(d.j.info("Error code "+_),_==2){var E=w(d.fb,d),C=d.Xa;const $=!C;C=new mi(C||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||so(C,"https"),Qi(C),$?cp(C.toString(),E):th(C.toString(),E)}else Et(2);d.G=0,d.l&&d.l.sa(_),oh(d),_a(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function oh(d){if(d.G=0,d.ka=[],d.l){const _=Qu(d.h);(_.length!=0||d.i.length!=0)&&(x(d.ka,_),x(d.ka,d.i),d.h.i.length=0,k(d.i),d.i.length=0),d.l.ra()}}function ah(d,_,E){var C=E instanceof mi?Vn(E):new mi(E);if(C.g!="")_&&(C.g=_+"."+C.g),Gi(C,C.s);else{var $=c.location;C=$.protocol,_=_?_+"."+$.hostname:$.hostname,$=+$.port;var Z=new mi(null);C&&so(Z,C),_&&(Z.g=_),$&&Gi(Z,$),E&&(Z.l=E),C=Z}return E=d.D,_=d.ya,E&&_&&et(C,E,_),et(C,"VER",d.la),_i(d,C),C}function lh(d,_,E){if(_&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Ca&&!d.pa?new ht(new gi({eb:E})):new ht(d.pa),_.Ha(d.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xl(){}n=Xl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ba(){}ba.prototype.g=function(d,_){return new mn(d,_)};function mn(d,_){Lt.call(this),this.g=new Kl(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(d?d["X-WebChannel-Client-Profile"]=_.va:d={"X-WebChannel-Client-Profile":_.va}),this.g.S=d,(d=_&&_.Sb)&&!U(d)&&(this.g.m=d),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!U(_)&&(this.g.D=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new zr(this)}I(mn,Lt),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Kt(this.g)},mn.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.u&&(E={},E.__data__=Ml(d),d=E);_.i.push(new Yu(_.Ya++,d)),_.G==3&&Ur(_)},mn.prototype.N=function(){this.g.l=null,delete this.j,Kt(this.g),delete this.g,mn.aa.N.call(this)};function ch(d){Nr.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const E in _){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}I(ch,Nr);function uh(){oa.call(this),this.status=1}I(uh,oa);function zr(d){this.g=d}I(zr,Xl),zr.prototype.ua=function(){Vt(this.g,"a")},zr.prototype.ta=function(d){Vt(this.g,new ch(d))},zr.prototype.sa=function(d){Vt(this.g,new uh)},zr.prototype.ra=function(){Vt(this.g,"b")},ba.prototype.createWebChannel=ba.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,ET=function(){return new ba},wT=function(){return Js()},vT=Lr,Tg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ca.NO_ERROR=0,ca.TIMEOUT=8,ca.HTTP_ERROR=6,Ad=ca,Hu.COMPLETE="complete",_T=Hu,sa.EventType=Kn,Kn.OPEN="a",Kn.CLOSE="b",Kn.ERROR="c",Kn.MESSAGE="d",Lt.prototype.listen=Lt.prototype.K,Mc=sa,ht.prototype.listenOnce=ht.prototype.L,ht.prototype.getLastError=ht.prototype.Ka,ht.prototype.getLastErrorCode=ht.prototype.Ba,ht.prototype.getStatus=ht.prototype.Z,ht.prototype.getResponseJson=ht.prototype.Oa,ht.prototype.getResponseText=ht.prototype.oa,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Ha,yT=ht}).apply(typeof id<"u"?id:typeof self<"u"?self:typeof window<"u"?window:{});const Pw="@firebase/firestore",Cw="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pn.UNAUTHENTICATED=new Pn(null),Pn.GOOGLE_CREDENTIALS=new Pn("google-credentials-uid"),Pn.FIRST_PARTY=new Pn("first-party-uid"),Pn.MOCK_USER=new Pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _l="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=new dy("@firebase/firestore");function Ga(){return Wo.logLevel}function ge(n,...e){if(Wo.logLevel<=Fe.DEBUG){const t=e.map(Ty);Wo.debug(`Firestore (${_l}): ${n}`,...t)}}function Fi(n,...e){if(Wo.logLevel<=Fe.ERROR){const t=e.map(Ty);Wo.error(`Firestore (${_l}): ${n}`,...t)}}function iu(n,...e){if(Wo.logLevel<=Fe.WARN){const t=e.map(Ty);Wo.warn(`Firestore (${_l}): ${n}`,...t)}}function Ty(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,xT(n,r,t)}function xT(n,e,t){let r=`FIRESTORE (${_l}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Fi(r),new Error(r)}function Qe(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||xT(e,i,r)}function Me(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends Ui{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Pn.UNAUTHENTICATED))}shutdown(){}}class KR{constructor(e){this.t=e,this.currentUser=Pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0,42304);let r=this.i;const i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let o=new Ni;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ni,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await i(this.currentUser)})},c=h=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ni)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qe(typeof r.accessToken=="string",31837,{l:r}),new YR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new Pn(e)}}class QR{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Pn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class XR{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new QR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Pn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Aw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ar(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Qe(this.o===void 0,3512);const r=o=>{o.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,ge("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Aw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Aw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=ZR(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}}function je(n,e){return n<e?-1:n>e?1:0}function Sg(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),o=e.charAt(r);if(i!==o)return zm(i)===zm(o)?je(i,o):zm(i)?1:-1}return je(n.length,e.length)}const eD=55296,tD=57343;function zm(n){const e=n.charCodeAt(0);return e>=eD&&e<=tD}function ol(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw="__name__";class Xr{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ae(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Xr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=Xr.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return je(e.length,t.length)}static compareSegments(e,t){const r=Xr.isNumericId(e),i=Xr.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Xr.extractNumericId(e).compare(Xr.extractNumericId(t)):Sg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ds.fromString(e.substring(4,e.length-2))}}class it extends Xr{construct(e,t,r){return new it(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new fe(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new it(t)}static emptyPath(){return new it([])}}const nD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends Xr{construct(e,t,r){return new en(e,t,r)}static isValidIdentifier(e){return nD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Rw}static keyField(){return new en([Rw])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new fe(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new fe(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new fe(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else c==="`"?(l=!l,i++):c!=="."||l?(r+=c,i++):(o(),i++)}if(o(),l)throw new fe(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(t)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(it.fromString(e))}static fromName(e){return new Te(it.fromString(e).popFirst(5))}static empty(){return new Te(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return it.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new it(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(n,e,t){if(!t)throw new fe(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rD(n,e,t,r){if(e===!0&&r===!0)throw new fe(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Dw(n){if(!Te.isDocumentKey(n))throw new fe(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ow(n){if(Te.isDocumentKey(n))throw new fe(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function TT(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Cf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae(12329,{type:typeof n})}function Ar(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new fe(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Cf(n);throw new fe(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function iD(n,e){if(e<=0)throw new fe(re.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Iu(n,e){if(!TT(n))throw new fe(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(i&&typeof l!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new fe(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw=-62135596800,Nw=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Nw);return new ct(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Mw)throw new fe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Nw}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Iu(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Mw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:Nt("string",ct._jsonSchemaVersion),seconds:Nt("number"),nanoseconds:Nt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new ct(0,0))}static max(){return new Oe(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su=-1;function sD(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Oe.fromTimestamp(r===1e9?new ct(t+1,0):new ct(t,r));return new Ls(i,Te.empty(),e)}function oD(n){return new Ls(n.readTime,n.key,su)}class Ls{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ls(Oe.min(),Te.empty(),su)}static max(){return new Ls(Oe.max(),Te.empty(),su)}}function aD(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(n.documentKey,e.documentKey),t!==0?t:je(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vl(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==lD)throw n;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.reject(t)}static resolve(e){return new ie((t,r)=>{t(e)})}static reject(e){return new ie((t,r)=>{r(e)})}static waitFor(e){return new ie((t,r)=>{let i=0,o=0,l=!1;e.forEach(c=>{++i,c.next(()=>{++o,l&&o===i&&t()},h=>r(h))}),l=!0,o===i&&t()})}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next(i=>i?ie.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new ie((r,i)=>{const o=e.length,l=new Array(o);let c=0;for(let h=0;h<o;h++){const f=h;t(e[f]).next(m=>{l[f]=m,++c,c===o&&r(l)},m=>i(m))}})}static doWhile(e,t){return new ie((r,i)=>{const o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}}function uD(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function wl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Af.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy=-1;function Rf(n){return n==null}function Kd(n){return n===0&&1/n==-1/0}function hD(n){return typeof n=="number"&&Number.isInteger(n)&&!Kd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="";function dD(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Lw(e)),e=fD(n.get(t),e);return Lw(e)}function fD(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case ST:t+="";break;default:t+=o}}return t}function Lw(n){return n+ST+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function $s(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function IT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,t){this.comparator=e,this.root=t||Zt.EMPTY}insert(e,t){return new gt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sd(this.root,e,this.comparator,!1)}getReverseIterator(){return new sd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sd(this.root,e,this.comparator,!0)}}class sd{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??Zt.RED,this.left=i??Zt.EMPTY,this.right=o??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new Zt(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Zt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Fw(this.data.getIterator())}getIteratorFrom(e){return new Fw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new zt(this.comparator);return t.data=e,t}}class Fw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new Yn([])}unionWith(e){let t=new zt(en.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Yn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ol(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new kT("Invalid base64 string: "+o):o}}(e);return new nn(t)}static fromUint8Array(e){const t=function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o}(e);return new nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const pD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vs(n){if(Qe(!!n,39018),typeof n=="string"){let e=0;const t=pD.exec(n);if(Qe(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tt(n.seconds),nanos:Tt(n.nanos)}}function Tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Fs(n){return typeof n=="string"?nn.fromBase64String(n):nn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="server_timestamp",CT="__type__",AT="__previous_value__",RT="__local_write_time__";function ky(n){return(n?.mapValue?.fields||{})[CT]?.stringValue===PT}function Df(n){const e=n.mapValue.fields[AT];return ky(e)?Df(e):e}function ou(n){const e=Vs(n.mapValue.fields[RT].timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,t,r,i,o,l,c,h,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=m}}const Qd="(default)";class au{constructor(e,t){this.projectId=e,this.database=t||Qd}static empty(){return new au("","")}get isDefaultDatabase(){return this.database===Qd}isEqual(e){return e instanceof au&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="__type__",gD="__max__",od={mapValue:{}},OT="__vector__",Xd="value";function js(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ky(n)?4:_D(n)?9007199254740991:yD(n)?10:11:Ae(28295,{value:n})}function li(n,e){if(n===e)return!0;const t=js(n);if(t!==js(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ou(n).isEqual(ou(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=Vs(i.timestampValue),c=Vs(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Fs(i.bytesValue).isEqual(Fs(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Tt(i.geoPointValue.latitude)===Tt(o.geoPointValue.latitude)&&Tt(i.geoPointValue.longitude)===Tt(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Tt(i.integerValue)===Tt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=Tt(i.doubleValue),c=Tt(o.doubleValue);return l===c?Kd(l)===Kd(c):isNaN(l)&&isNaN(c)}return!1}(n,e);case 9:return ol(n.arrayValue.values||[],e.arrayValue.values||[],li);case 10:case 11:return function(i,o){const l=i.mapValue.fields||{},c=o.mapValue.fields||{};if(Vw(l)!==Vw(c))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(c[h]===void 0||!li(l[h],c[h])))return!1;return!0}(n,e);default:return Ae(52216,{left:n})}}function lu(n,e){return(n.values||[]).find(t=>li(t,e))!==void 0}function al(n,e){if(n===e)return 0;const t=js(n),r=js(e);if(t!==r)return je(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return je(n.booleanValue,e.booleanValue);case 2:return function(o,l){const c=Tt(o.integerValue||o.doubleValue),h=Tt(l.integerValue||l.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return jw(n.timestampValue,e.timestampValue);case 4:return jw(ou(n),ou(e));case 5:return Sg(n.stringValue,e.stringValue);case 6:return function(o,l){const c=Fs(o),h=Fs(l);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const c=o.split("/"),h=l.split("/");for(let f=0;f<c.length&&f<h.length;f++){const m=je(c[f],h[f]);if(m!==0)return m}return je(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const c=je(Tt(o.latitude),Tt(l.latitude));return c!==0?c:je(Tt(o.longitude),Tt(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Uw(n.arrayValue,e.arrayValue);case 10:return function(o,l){const c=o.fields||{},h=l.fields||{},f=c[Xd]?.arrayValue,m=h[Xd]?.arrayValue,y=je(f?.values?.length||0,m?.values?.length||0);return y!==0?y:Uw(f,m)}(n.mapValue,e.mapValue);case 11:return function(o,l){if(o===od.mapValue&&l===od.mapValue)return 0;if(o===od.mapValue)return 1;if(l===od.mapValue)return-1;const c=o.fields||{},h=Object.keys(c),f=l.fields||{},m=Object.keys(f);h.sort(),m.sort();for(let y=0;y<h.length&&y<m.length;++y){const w=Sg(h[y],m[y]);if(w!==0)return w;const T=al(c[h[y]],f[m[y]]);if(T!==0)return T}return je(h.length,m.length)}(n.mapValue,e.mapValue);default:throw Ae(23264,{he:t})}}function jw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return je(n,e);const t=Vs(n),r=Vs(e),i=je(t.seconds,r.seconds);return i!==0?i:je(t.nanos,r.nanos)}function Uw(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=al(t[i],r[i]);if(o)return o}return je(t.length,r.length)}function ll(n){return Ig(n)}function Ig(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Vs(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Fs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Te.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=Ig(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const l of r)o?o=!1:i+=",",i+=`${l}:${Ig(t.fields[l])}`;return i+"}"}(n.mapValue):Ae(61005,{value:n})}function Rd(n){switch(js(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Df(n);return e?16+Rd(e):16;case 5:return 2*n.stringValue.length;case 6:return Fs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Rd(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return $s(r.fields,(o,l)=>{i+=o.length+Rd(l)}),i}(n.mapValue);default:throw Ae(13486,{value:n})}}function zw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function kg(n){return!!n&&"integerValue"in n}function Py(n){return!!n&&"arrayValue"in n}function Bw(n){return!!n&&"nullValue"in n}function Hw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Dd(n){return!!n&&"mapValue"in n}function yD(n){return(n?.mapValue?.fields||{})[DT]?.stringValue===OT}function Wc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return $s(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Wc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Wc(n.arrayValue.values[t]);return e}return{...n}}function _D(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===gD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Dd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wc(t)}setAll(e){let t=en.emptyPath(),r={},i=[];e.forEach((l,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=c.popLast()}l?r[c.lastSegment()]=Wc(l):i.push(c.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());Dd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return li(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Dd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){$s(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new An(Wc(this.value))}}function MT(n){const e=[];return $s(n.fields,(t,r)=>{const i=new en([t]);if(Dd(r)){const o=MT(r.mapValue).fields;if(o.length===0)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)}),new Yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,t,r,i,o,l,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new un(e,0,Oe.min(),Oe.min(),Oe.min(),An.empty(),0)}static newFoundDocument(e,t,r,i){return new un(e,1,t,Oe.min(),r,i,0)}static newNoDocument(e,t){return new un(e,2,t,Oe.min(),Oe.min(),An.empty(),0)}static newUnknownDocument(e,t){return new un(e,3,t,Oe.min(),Oe.min(),An.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,t){this.position=e,this.inclusive=t}}function Ww(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],l=n.position[i];if(o.field.isKeyField()?r=Te.comparator(Te.fromName(l.referenceValue),t.key):r=al(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function $w(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!li(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,t="asc"){this.field=e,this.dir=t}}function vD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{}class Mt extends NT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ED(e,t,r):t==="array-contains"?new TD(e,r):t==="in"?new SD(e,r):t==="not-in"?new ID(e,r):t==="array-contains-any"?new kD(e,r):new Mt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new xD(e,r):new bD(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(al(t,this.value)):t!==null&&js(this.value)===js(t)&&this.matchesComparison(al(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dr extends NT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Dr(e,t)}matches(e){return LT(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function LT(n){return n.op==="and"}function VT(n){return wD(n)&&LT(n)}function wD(n){for(const e of n.filters)if(e instanceof Dr)return!1;return!0}function Pg(n){if(n instanceof Mt)return n.field.canonicalString()+n.op.toString()+ll(n.value);if(VT(n))return n.filters.map(e=>Pg(e)).join(",");{const e=n.filters.map(t=>Pg(t)).join(",");return`${n.op}(${e})`}}function FT(n,e){return n instanceof Mt?function(r,i){return i instanceof Mt&&r.op===i.op&&r.field.isEqual(i.field)&&li(r.value,i.value)}(n,e):n instanceof Dr?function(r,i){return i instanceof Dr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,l,c)=>o&&FT(l,i.filters[c]),!0):!1}(n,e):void Ae(19439)}function jT(n){return n instanceof Mt?function(t){return`${t.field.canonicalString()} ${t.op} ${ll(t.value)}`}(n):n instanceof Dr?function(t){return t.op.toString()+" {"+t.getFilters().map(jT).join(" ,")+"}"}(n):"Filter"}class ED extends Mt{constructor(e,t,r){super(e,t,r),this.key=Te.fromName(r.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class xD extends Mt{constructor(e,t){super(e,"in",t),this.keys=UT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class bD extends Mt{constructor(e,t){super(e,"not-in",t),this.keys=UT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function UT(n,e){return(e.arrayValue?.values||[]).map(t=>Te.fromName(t.referenceValue))}class TD extends Mt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Py(t)&&lu(t.arrayValue,this.value)}}class SD extends Mt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&lu(this.value.arrayValue,t)}}class ID extends Mt{constructor(e,t){super(e,"not-in",t)}matches(e){if(lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!lu(this.value.arrayValue,t)}}class kD extends Mt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Py(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>lu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,t=null,r=[],i=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=c,this.Te=null}}function qw(n,e=null,t=[],r=[],i=null,o=null,l=null){return new PD(n,e,t,r,i,o,l)}function Cy(n){const e=Me(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Pg(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Rf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ll(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ll(r)).join(",")),e.Te=t}return e.Te}function Ay(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!vD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!FT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$w(n.startAt,e.startAt)&&$w(n.endAt,e.endAt)}function Cg(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,t=null,r=[],i=[],o=null,l="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function CD(n,e,t,r,i,o,l,c){return new El(n,e,t,r,i,o,l,c)}function Of(n){return new El(n)}function Yw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function zT(n){return n.collectionGroup!==null}function $c(n){const e=Me(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new zt(en.comparator);return l.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(c=c.add(f.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new cu(o,r))}),t.has(en.keyField().canonicalString())||e.Ie.push(new cu(en.keyField(),r))}return e.Ie}function ni(n){const e=Me(n);return e.Ee||(e.Ee=AD(e,$c(n))),e.Ee}function AD(n,e){if(n.limitType==="F")return qw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new cu(i.field,o)});const t=n.endAt?new Jd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Jd(n.startAt.position,n.startAt.inclusive):null;return qw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Ag(n,e){const t=n.filters.concat([e]);return new El(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Zd(n,e,t){return new El(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Mf(n,e){return Ay(ni(n),ni(e))&&n.limitType===e.limitType}function BT(n){return`${Cy(ni(n))}|lt:${n.limitType}`}function Ka(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>jT(i)).join(", ")}]`),Rf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ll(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ll(i)).join(",")),`Target(${r})`}(ni(n))}; limitType=${n.limitType})`}function Nf(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Te.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of $c(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(l,c,h){const f=Ww(l,c,h);return l.inclusive?f<=0:f<0}(r.startAt,$c(r),i)||r.endAt&&!function(l,c,h){const f=Ww(l,c,h);return l.inclusive?f>=0:f>0}(r.endAt,$c(r),i))}(n,e)}function RD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function HT(n){return(e,t)=>{let r=!1;for(const i of $c(n)){const o=DD(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function DD(n,e,t){const r=n.field.isKeyField()?Te.comparator(e.key,t.key):function(o,l,c){const h=l.data.field(o),f=c.data.field(o);return h!==null&&f!==null?al(h,f):Ae(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ae(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){$s(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return IT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD=new gt(Te.comparator);function ji(){return OD}const WT=new gt(Te.comparator);function Nc(...n){let e=WT;for(const t of n)e=e.insert(t.key,t);return e}function $T(n){let e=WT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Do(){return qc()}function qT(){return qc()}function qc(){return new Qo(n=>n.toString(),(n,e)=>n.isEqual(e))}const MD=new gt(Te.comparator),ND=new zt(Te.comparator);function Ue(...n){let e=ND;for(const t of n)e=e.add(t);return e}const LD=new zt(je);function VD(){return LD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kd(e)?"-0":e}}function YT(n){return{integerValue:""+n}}function FD(n,e){return hD(e)?YT(e):Ry(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(){this._=void 0}}function jD(n,e,t){return n instanceof ef?function(i,o){const l={fields:{[CT]:{stringValue:PT},[RT]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&ky(o)&&(o=Df(o)),o&&(l.fields[AT]=o),{mapValue:l}}(t,e):n instanceof uu?KT(n,e):n instanceof hu?QT(n,e):function(i,o){const l=GT(i,o),c=Gw(l)+Gw(i.Ae);return kg(l)&&kg(i.Ae)?YT(c):Ry(i.serializer,c)}(n,e)}function UD(n,e,t){return n instanceof uu?KT(n,e):n instanceof hu?QT(n,e):t}function GT(n,e){return n instanceof tf?function(r){return kg(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class ef extends Lf{}class uu extends Lf{constructor(e){super(),this.elements=e}}function KT(n,e){const t=XT(e);for(const r of n.elements)t.some(i=>li(i,r))||t.push(r);return{arrayValue:{values:t}}}class hu extends Lf{constructor(e){super(),this.elements=e}}function QT(n,e){let t=XT(e);for(const r of n.elements)t=t.filter(i=>!li(i,r));return{arrayValue:{values:t}}}class tf extends Lf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Gw(n){return Tt(n.integerValue||n.doubleValue)}function XT(n){return Py(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function zD(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof uu&&i instanceof uu||r instanceof hu&&i instanceof hu?ol(r.elements,i.elements,li):r instanceof tf&&i instanceof tf?li(r.Ae,i.Ae):r instanceof ef&&i instanceof ef}(n.transform,e.transform)}class BD{constructor(e,t){this.version=e,this.transformResults=t}}class ri{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ri}static exists(e){return new ri(void 0,e)}static updateTime(e){return new ri(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Od(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Vf{}function JT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new e1(n.key,ri.none()):new ku(n.key,n.data,ri.none());{const t=n.data,r=An.empty();let i=new zt(en.comparator);for(let o of e.fields)if(!i.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),i=i.add(o)}return new qs(n.key,r,new Yn(i.toArray()),ri.none())}}function HD(n,e,t){n instanceof ku?function(i,o,l){const c=i.value.clone(),h=Qw(i.fieldTransforms,o,l.transformResults);c.setAll(h),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(n,e,t):n instanceof qs?function(i,o,l){if(!Od(i.precondition,o))return void o.convertToUnknownDocument(l.version);const c=Qw(i.fieldTransforms,o,l.transformResults),h=o.data;h.setAll(ZT(i)),h.setAll(c),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(n,e,t):function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function Yc(n,e,t,r){return n instanceof ku?function(o,l,c,h){if(!Od(o.precondition,l))return c;const f=o.value.clone(),m=Xw(o.fieldTransforms,h,l);return f.setAll(m),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof qs?function(o,l,c,h){if(!Od(o.precondition,l))return c;const f=Xw(o.fieldTransforms,h,l),m=l.data;return m.setAll(ZT(o)),m.setAll(f),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(n,e,t,r):function(o,l,c){return Od(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(n,e,t)}function WD(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=GT(r.transform,i||null);o!=null&&(t===null&&(t=An.empty()),t.set(r.field,o))}return t||null}function Kw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ol(r,i,(o,l)=>zD(o,l))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ku extends Vf{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class qs extends Vf{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function ZT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Qw(n,e,t){const r=new Map;Qe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const o=n[i],l=o.transform,c=e.data.field(o.field);r.set(o.field,UD(l,c,t[i]))}return r}function Xw(n,e,t){const r=new Map;for(const i of n){const o=i.transform,l=t.data.field(i.field);r.set(i.field,jD(o,l,e))}return r}class e1 extends Vf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $D extends Vf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&HD(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Yc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Yc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=qT();return this.mutations.forEach(i=>{const o=e.get(i.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=t.has(i.key)?null:c;const h=JT(l,c);h!==null&&r.set(i.key,h),l.isValidDocument()||l.convertToNoDocument(Oe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ue())}isEqual(e){return this.batchId===e.batchId&&ol(this.mutations,e.mutations,(t,r)=>Kw(t,r))&&ol(this.baseMutations,e.baseMutations,(t,r)=>Kw(t,r))}}class Dy{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Qe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return MD}();const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new Dy(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot,He;function KD(n){switch(n){case re.OK:return Ae(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Ae(15467,{code:n})}}function t1(n){if(n===void 0)return Fi("GRPC error has no .code"),re.UNKNOWN;switch(n){case Ot.OK:return re.OK;case Ot.CANCELLED:return re.CANCELLED;case Ot.UNKNOWN:return re.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return re.INTERNAL;case Ot.UNAVAILABLE:return re.UNAVAILABLE;case Ot.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Ot.NOT_FOUND:return re.NOT_FOUND;case Ot.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Ot.ABORTED:return re.ABORTED;case Ot.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Ot.DATA_LOSS:return re.DATA_LOSS;default:return Ae(39323,{code:n})}}(He=Ot||(Ot={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=new Ds([4294967295,4294967295],0);function Jw(n){const e=QD().encode(n),t=new gT;return t.update(e),new Uint8Array(t.digest())}function Zw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ds([t,r],0),new Ds([i,o],0)]}class Oy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Lc(`Invalid padding: ${t}`);if(r<0)throw new Lc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Lc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Lc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ds.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Ds.fromNumber(r)));return i.compare(XD)===1&&(i=new Ds([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Jw(e),[r,i]=Zw(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,i,o);if(!this.we(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Oy(o,i,t);return r.forEach(c=>l.insert(c)),l}insert(e){if(this.ge===0)return;const t=Jw(e),[r,i]=Zw(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,i,o);this.Se(l)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Lc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Pu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ff(Oe.min(),i,new gt(je),ji(),Ue())}}class Pu{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Pu(r,t,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class n1{constructor(e,t){this.targetId=e,this.Ce=t}}class r1{constructor(e,t,r=nn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class eE{constructor(){this.ve=0,this.Fe=tE(),this.Me=nn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ue(),t=Ue(),r=Ue();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ae(38017,{changeType:o})}}),new Pu(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=tE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class JD{constructor(e){this.Ge=e,this.ze=new Map,this.je=ji(),this.Je=ad(),this.He=ad(),this.Ye=new gt(je)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const o=i.target;if(Cg(o))if(r===0){const l=new Te(o.path);this.et(t,l,un.newNoDocument(l,Oe.min()))}else Qe(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const c=this.ut(e),h=c?this.ct(c,e,l):1;if(h!==0){this.it(t);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let l,c;try{l=Fs(r).toUint8Array()}catch(h){if(h instanceof kT)return iu("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new Oy(l,i,o)}catch(h){return iu(h instanceof Lc?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const l=this.Ge.ht(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(t,o,null),i++)}),i}Tt(e){const t=new Map;this.ze.forEach((o,l)=>{const c=this.ot(l);if(c){if(o.current&&Cg(c.target)){const h=new Te(c.target.path);this.It(h).has(l)||this.Et(l,h)||this.et(l,h,un.newNoDocument(h,e))}o.Be&&(t.set(l,o.ke()),o.qe())}});let r=Ue();this.He.forEach((o,l)=>{let c=!0;l.forEachWhile(h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.je.forEach((o,l)=>l.setReadTime(e));const i=new Ff(e,t,this.Ye,this.je,r);return this.je=ji(),this.Je=ad(),this.He=ad(),this.Ye=new gt(je),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new eE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new zt(je),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new zt(je),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new eE),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ad(){return new gt(Te.comparator)}function tE(){return new gt(Te.comparator)}const ZD={asc:"ASCENDING",desc:"DESCENDING"},e2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},t2={and:"AND",or:"OR"};class n2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Rg(n,e){return n.useProto3Json||Rf(e)?e:{value:e}}function nf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function i1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function r2(n,e){return nf(n,e.toTimestamp())}function ii(n){return Qe(!!n,49232),Oe.fromTimestamp(function(t){const r=Vs(t);return new ct(r.seconds,r.nanos)}(n))}function My(n,e){return Dg(n,e).canonicalString()}function Dg(n,e){const t=function(i){return new it(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function s1(n){const e=it.fromString(n);return Qe(u1(e),10190,{key:e.toString()}),e}function Og(n,e){return My(n.databaseId,e.path)}function Bm(n,e){const t=s1(e);if(t.get(1)!==n.databaseId.projectId)throw new fe(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new fe(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te(a1(t))}function o1(n,e){return My(n.databaseId,e)}function i2(n){const e=s1(n);return e.length===4?it.emptyPath():a1(e)}function Mg(n){return new it(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function a1(n){return Qe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function nE(n,e,t){return{name:Og(n,e),fields:t.value.mapValue.fields}}function s2(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ae(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(Qe(m===void 0||typeof m=="string",58123),nn.fromBase64String(m||"")):(Qe(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),nn.fromUint8Array(m||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(f){const m=f.code===void 0?re.UNKNOWN:t1(f.code);return new fe(m,f.message||"")}(l);t=new r1(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Bm(n,r.document.name),o=ii(r.document.updateTime),l=r.document.createTime?ii(r.document.createTime):Oe.min(),c=new An({mapValue:{fields:r.document.fields}}),h=un.newFoundDocument(i,o,l,c),f=r.targetIds||[],m=r.removedTargetIds||[];t=new Md(f,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Bm(n,r.document),o=r.readTime?ii(r.readTime):Oe.min(),l=un.newNoDocument(i,o),c=r.removedTargetIds||[];t=new Md([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Bm(n,r.document),o=r.removedTargetIds||[];t=new Md([],o,i,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,l=new GD(i,o),c=r.targetId;t=new n1(c,l)}}return t}function o2(n,e){let t;if(e instanceof ku)t={update:nE(n,e.key,e.value)};else if(e instanceof e1)t={delete:Og(n,e.key)};else if(e instanceof qs)t={update:nE(n,e.key,e.data),updateMask:m2(e.fieldMask)};else{if(!(e instanceof $D))return Ae(16599,{Vt:e.type});t={verify:Og(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const c=l.transform;if(c instanceof ef)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof uu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof hu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof tf)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw Ae(20930,{transform:l.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:r2(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ae(27497)}(n,e.precondition)),t}function a2(n,e){return n&&n.length>0?(Qe(e!==void 0,14353),n.map(t=>function(i,o){let l=i.updateTime?ii(i.updateTime):ii(o);return l.isEqual(Oe.min())&&(l=ii(o)),new BD(l,i.transformResults||[])}(t,e))):[]}function l2(n,e){return{documents:[o1(n,e.path)]}}function c2(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=o1(n,i);const o=function(f){if(f.length!==0)return c1(Dr.create(f,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const l=function(f){if(f.length!==0)return f.map(m=>function(w){return{field:Qa(w.field),direction:d2(w.dir)}}(m))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=Rg(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:t,parent:i}}function u2(n){let e=i2(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Qe(r===1,65062);const m=t.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=function(y){const w=l1(y);return w instanceof Dr&&VT(w)?w.getFilters():[w]}(t.where));let l=[];t.orderBy&&(l=function(y){return y.map(w=>function(I){return new cu(Xa(I.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(w))}(t.orderBy));let c=null;t.limit&&(c=function(y){let w;return w=typeof y=="object"?y.value:y,Rf(w)?null:w}(t.limit));let h=null;t.startAt&&(h=function(y){const w=!!y.before,T=y.values||[];return new Jd(T,w)}(t.startAt));let f=null;return t.endAt&&(f=function(y){const w=!y.before,T=y.values||[];return new Jd(T,w)}(t.endAt)),CD(e,i,l,o,c,"F",h,f)}function h2(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function l1(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Xa(t.unaryFilter.field);return Mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Xa(t.unaryFilter.field);return Mt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Xa(t.unaryFilter.field);return Mt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Xa(t.unaryFilter.field);return Mt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}}(n):n.fieldFilter!==void 0?function(t){return Mt.create(Xa(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Dr.create(t.compositeFilter.filters.map(r=>l1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}}(t.compositeFilter.op))}(n):Ae(30097,{filter:n})}function d2(n){return ZD[n]}function f2(n){return e2[n]}function p2(n){return t2[n]}function Qa(n){return{fieldPath:n.canonicalString()}}function Xa(n){return en.fromServerFormat(n.fieldPath)}function c1(n){return n instanceof Mt?function(t){if(t.op==="=="){if(Hw(t.value))return{unaryFilter:{field:Qa(t.field),op:"IS_NAN"}};if(Bw(t.value))return{unaryFilter:{field:Qa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Hw(t.value))return{unaryFilter:{field:Qa(t.field),op:"IS_NOT_NAN"}};if(Bw(t.value))return{unaryFilter:{field:Qa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qa(t.field),op:f2(t.op),value:t.value}}}(n):n instanceof Dr?function(t){const r=t.getFilters().map(i=>c1(i));return r.length===1?r[0]:{compositeFilter:{op:p2(t.op),filters:r}}}(n):Ae(54877,{filter:n})}function m2(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function u1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,t,r,i,o=Oe.min(),l=Oe.min(),c=nn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new Ss(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e){this.yt=e}}function y2(n){const e=u2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Zd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(){this.Cn=new v2}addToCollectionParentIndex(e,t){return this.Cn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(Ls.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(Ls.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class v2{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new zt(it.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new zt(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},h1=41943040;class Cn{static withCacheSize(e){return new Cn(e,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(h1,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new cl(0)}static cr(){return new cl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="LruGarbageCollector",d1=1048576;function sE([n,e],[t,r]){const i=je(n,t);return i===0?je(e,r):i}class w2{constructor(e){this.Ir=e,this.buffer=new zt(sE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();sE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class E2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(iE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){wl(t)?ge(iE,"Ignoring IndexedDB error during garbage collection: ",t):await vl(t)}await this.Vr(3e5)})}}class x2{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(Af.ce);const r=new w2(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(rE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rE):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,l,c,h,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,l=Date.now(),this.nthSequenceNumber(e,i))).next(y=>(r=y,c=Date.now(),this.removeTargets(e,r,t))).next(y=>(o=y,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(f=Date.now(),Ga()<=Fe.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-m}ms
	Determined least recently used ${i} in `+(c-l)+`ms
	Removed ${o} targets in `+(h-c)+`ms
	Removed ${y} documents in `+(f-h)+`ms
Total Duration: ${f-m}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:y})))}}function b2(n,e){return new x2(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(){this.changes=new Qo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Yc(r.mutation,i,Yn.empty(),ct.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ue()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ue()){const i=Do();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let l=Nc();return o.forEach((c,h)=>{l=l.insert(c,h.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Do();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ue()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((l,c)=>{t.set(l,c)})})}computeViews(e,t,r,i){let o=ji();const l=qc(),c=function(){return qc()}();return t.forEach((h,f)=>{const m=r.get(f.key);i.has(f.key)&&(m===void 0||m.mutation instanceof qs)?o=o.insert(f.key,f):m!==void 0?(l.set(f.key,m.mutation.getFieldMask()),Yc(m.mutation,f,m.mutation.getFieldMask(),ct.now())):l.set(f.key,Yn.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,m)=>l.set(f,m)),t.forEach((f,m)=>c.set(f,new S2(m,l.get(f)??null))),c))}recalculateAndSaveOverlays(e,t){const r=qc();let i=new gt((l,c)=>l-c),o=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const c of l)c.keys().forEach(h=>{const f=t.get(h);if(f===null)return;let m=r.get(h)||Yn.empty();m=c.applyToLocalView(f,m),r.set(h,m);const y=(i.get(c.batchId)||Ue()).add(h);i=i.insert(c.batchId,y)})}).next(()=>{const l=[],c=i.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),f=h.key,m=h.value,y=qT();m.forEach(w=>{if(!o.has(w)){const T=JT(t.get(w),r.get(w));T!==null&&y.set(w,T),o=o.add(w)}}),l.push(this.documentOverlayCache.saveOverlays(e,f,y))}return ie.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(l){return Te.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):zT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):ie.resolve(Do());let c=su,h=o;return l.next(f=>ie.forEach(f,(m,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),o.get(m)?ie.resolve():this.remoteDocumentCache.getEntry(e,m).next(w=>{h=h.insert(m,w)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,Ue())).next(m=>({batchId:c,changes:$T(m)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next(r=>{let i=Nc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let l=Nc();return this.indexManager.getCollectionParents(e,o).next(c=>ie.forEach(c,h=>{const f=function(y,w){return new El(w,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(m=>{m.forEach((y,w)=>{l=l.insert(y,w)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(l=>{o.forEach((h,f)=>{const m=f.getKey();l.get(m)===null&&(l=l.insert(m,un.newInvalidDocument(m)))});let c=Nc();return l.forEach((h,f)=>{const m=o.get(h);m!==void 0&&Yc(m.mutation,f,Yn.empty(),ct.now()),Nf(t,f)&&(c=c.insert(h,f))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ie.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ii(i.createTime)}}(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:y2(i.bundledQuery),readTime:ii(i.readTime)}}(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(){this.overlays=new gt(Te.comparator),this.qr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Do();return ie.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),ie.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const i=Do(),o=t.length+1,l=new Te(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const h=c.getNext().value,f=h.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>r&&i.set(h.getKey(),h)}return ie.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new gt((f,m)=>f-m);const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let m=o.get(f.largestBatchId);m===null&&(m=Do(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const c=Do(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,m)=>c.set(f,m)),!(c.size()>=i)););return ie.resolve(c)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new YD(t,r));let o=this.qr.get(t);o===void 0&&(o=Ue(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(){this.Qr=new zt(Yt.$r),this.Ur=new zt(Yt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Yt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Yt(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){const t=new Te(new it([])),r=new Yt(t,e),i=new Yt(t,e+1),o=[];return this.Ur.forEachInRange([r,i],l=>{this.Gr(l),o.push(l.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Te(new it([])),r=new Yt(t,e),i=new Yt(t,e+1);let o=Ue();return this.Ur.forEachInRange([r,i],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new Yt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Yt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Te.comparator(e.key,t.key)||je(e.Yr,t.Yr)}static Kr(e,t){return je(e.Yr,t.Yr)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new zt(Yt.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new qD(o,t,r,i);this.mutationQueue.push(l);for(const c of i)this.Zr=this.Zr.add(new Yt(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return ie.resolve(l)}lookupMutationBatch(e,t){return ie.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),o=i<0?0:i;return ie.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?Iy:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Yt(t,0),i=new Yt(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],l=>{const c=this.Xr(l.Yr);o.push(c)}),ie.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new zt(je);return t.forEach(i=>{const o=new Yt(i,0),l=new Yt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],c=>{r=r.add(c.Yr)})}),ie.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Te.isDocumentKey(o)||(o=o.child(""));const l=new Yt(new Te(o),0);let c=new zt(je);return this.Zr.forEachWhile(h=>{const f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(c=c.add(h.Yr)),!0)},l),ie.resolve(this.ti(c))}ti(e){const t=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Qe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ie.forEach(t.mutations,i=>{const o=new Yt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){const r=new Yt(t,0),i=this.Zr.firstAfterOrEqual(r);return ie.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e){this.ri=e,this.docs=function(){return new gt(Te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,l=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():un.newInvalidDocument(t))}getEntries(e,t){let r=ji();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():un.newInvalidDocument(i))}),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=ji();const l=t.path,c=new Te(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:f,value:{document:m}}=h.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||aD(oD(m),r)<=0||(i.has(m.key)||Nf(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return ie.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Ae(9500)}ii(e,t){return ie.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new D2(this)}getSize(e){return ie.resolve(this.size)}}class D2 extends T2{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),ie.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e){this.persistence=e,this.si=new Qo(t=>Cy(t),Ay),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.oi=0,this._i=new Ny,this.targetCount=0,this.ai=cl.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ie.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new cl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Pr(t),ie.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.si.forEach((l,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),ie.waitFor(o).next(()=>i)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(l=>{o.push(i.markPotentiallyOrphaned(e,l))}),ie.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,t){this.ui={},this.overlays={},this.ci=new Af(0),this.li=!1,this.li=!0,this.hi=new C2,this.referenceDelegate=e(this),this.Pi=new O2(this),this.indexManager=new _2,this.remoteDocumentCache=function(i){return new R2(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new g2(t),this.Ii=new k2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new P2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new A2(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ge("MemoryPersistence","Starting transaction:",e);const i=new M2(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return ie.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}}class M2 extends cD{constructor(e){super(),this.currentSequenceNumber=e}}class Ly{constructor(e){this.persistence=e,this.Ri=new Ny,this.Vi=null}static mi(e){return new Ly(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,r=>{const i=Te.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,Oe.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return ie.or([()=>ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class rf{constructor(e,t){this.persistence=e,this.pi=new Qo(r=>dD(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=b2(this,t)}static mi(e,t){return new rf(e,t)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return ie.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?ie.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,l=>this.br(e,l,t).next(c=>{c||(r++,o.removeEntry(l,Oe.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Rd(e.data.value)),t}br(e,t,r){return ie.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return ie.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Ue(),i=Ue();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Vy(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return pP()?8:uD(fn())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.ys(e,t).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new N2;return this.Ss(e,t,l).next(c=>{if(o.result=c,this.Vs)return this.bs(e,t,l,c.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(Ga()<=Fe.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Ka(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(Ga()<=Fe.DEBUG&&ge("QueryEngine","Query:",Ka(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Ga()<=Fe.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Ka(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ni(t))):ie.resolve())}ys(e,t){if(Yw(t))return ie.resolve(null);let r=ni(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Zd(t,null,"F"),r=ni(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=Ue(...o);return this.ps.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,r).next(h=>{const f=this.Ds(t,c);return this.Cs(t,f,l,h.readTime)?this.ys(e,Zd(t,null,"F")):this.vs(e,f,t,h)}))})))}ws(e,t,r,i){return Yw(t)||i.isEqual(Oe.min())?ie.resolve(null):this.ps.getDocuments(e,r).next(o=>{const l=this.Ds(t,o);return this.Cs(t,l,r,i)?ie.resolve(null):(Ga()<=Fe.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ka(t)),this.vs(e,l,t,sD(i,su)).next(c=>c))})}Ds(e,t){let r=new zt(HT(e));return t.forEach((i,o)=>{Nf(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return Ga()<=Fe.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Ka(t)),this.ps.getDocumentsMatchingQuery(e,t,Ls.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy="LocalStore",V2=3e8;class F2{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new gt(je),this.xs=new Qo(o=>Cy(o),Ay),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new I2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function j2(n,e,t,r){return new F2(n,e,t,r)}async function p1(n,e){const t=Me(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],c=[];let h=Ue();for(const f of i){l.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}for(const f of o){c.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}return t.localDocuments.getDocuments(r,h).next(f=>({Ls:f,removedBatchIds:l,addedBatchIds:c}))})})}function U2(n,e){const t=Me(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return function(c,h,f,m){const y=f.batch,w=y.keys();let T=ie.resolve();return w.forEach(I=>{T=T.next(()=>m.getEntry(h,I)).next(k=>{const x=f.docVersions.get(I);Qe(x!==null,48541),k.version.compareTo(x)<0&&(y.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),m.addEntry(k)))})}),T.next(()=>c.mutationQueue.removeMutationBatch(h,y))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=Ue();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(h=h.add(c.batch.mutations[f].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function m1(n){const e=Me(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function z2(n,e){const t=Me(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const c=[];e.targetChanges.forEach((m,y)=>{const w=i.get(y);if(!w)return;c.push(t.Pi.removeMatchingKeys(o,m.removedDocuments,y).next(()=>t.Pi.addMatchingKeys(o,m.addedDocuments,y)));let T=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?T=T.withResumeToken(nn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):m.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(m.resumeToken,r)),i=i.insert(y,T),function(k,x,N){return k.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=V2?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(w,T,m)&&c.push(t.Pi.updateTargetData(o,T))});let h=ji(),f=Ue();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push(B2(o,l,e.documentUpdates).next(m=>{h=m.ks,f=m.qs})),!r.isEqual(Oe.min())){const m=t.Pi.getLastRemoteSnapshotVersion(o).next(y=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(m)}return ie.waitFor(c).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(t.Ms=i,o))}function B2(n,e,t){let r=Ue(),i=Ue();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=ji();return t.forEach((c,h)=>{const f=o.get(c);h.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(c)),h.isNoDocument()&&h.version.isEqual(Oe.min())?(e.removeEntry(c,h.readTime),l=l.insert(c,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),l=l.insert(c,h)):ge(Fy,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",h.version)}),{ks:l,qs:i}})}function H2(n,e){const t=Me(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Iy),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function W2(n,e){const t=Me(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,ie.resolve(i)):t.Pi.allocateTargetId(r).next(l=>(i=new Ss(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function Ng(n,e,t){const r=Me(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!wl(l))throw l;ge(Fy,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function oE(n,e,t){const r=Me(n);let i=Oe.min(),o=Ue();return r.persistence.runTransaction("Execute query","readwrite",l=>function(h,f,m){const y=Me(h),w=y.xs.get(m);return w!==void 0?ie.resolve(y.Ms.get(w)):y.Pi.getTargetData(f,m)}(r,l,ni(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,c.targetId).next(h=>{o=h})}).next(()=>r.Fs.getDocumentsMatchingQuery(l,e,t?i:Oe.min(),t?o:Ue())).next(c=>($2(r,RD(e),c),{documents:c,Qs:o})))}function $2(n,e,t){let r=n.Os.get(e)||Oe.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}class aE{constructor(){this.activeTargetIds=VD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class q2{constructor(){this.Mo=new aE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new aE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="ConnectivityMonitor";class cE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(lE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(lE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ld=null;function Lg(){return ld===null?ld=function(){return 268435456+Math.round(2147483648*Math.random())}():ld++,"0x"+ld.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="RestConnection",G2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class K2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Qd?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){const l=Lg(),c=this.zo(e,t.toUriEncodedString());ge(Hm,`Sending RPC '${e}' ${l}:`,c,r);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,i,o);const{host:f}=new URL(c),m=ml(f);return this.Jo(e,c,h,r,m).then(y=>(ge(Hm,`Received RPC '${e}' ${l}: `,y),y),y=>{throw iu(Hm,`RPC '${e}' ${l} failed with error: `,y,"url: ",c,"request:",r),y})}Ho(e,t,r,i,o,l){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_l}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){const r=G2[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class X2 extends K2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){const l=Lg();return new Promise((c,h)=>{const f=new yT;f.setWithCredentials(!0),f.listenOnce(_T.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Ad.NO_ERROR:const y=f.getResponseJson();ge(ln,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),c(y);break;case Ad.TIMEOUT:ge(ln,`RPC '${e}' ${l} timed out`),h(new fe(re.DEADLINE_EXCEEDED,"Request time out"));break;case Ad.HTTP_ERROR:const w=f.getStatus();if(ge(ln,`RPC '${e}' ${l} failed with status:`,w,"response text:",f.getResponseText()),w>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const I=T?.error;if(I&&I.status&&I.message){const k=function(N){const U=N.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(U)>=0?U:re.UNKNOWN}(I.status);h(new fe(k,I.message))}else h(new fe(re.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new fe(re.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:l,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ge(ln,`RPC '${e}' ${l} completed.`)}});const m=JSON.stringify(i);ge(ln,`RPC '${e}' ${l} sending request:`,i),f.send(t,"POST",m,r,15)})}T_(e,t,r){const i=Lg(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=ET(),c=wT(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const m=o.join("");ge(ln,`Creating RPC '${e}' stream ${i}: ${m}`,h);const y=l.createWebChannel(m,h);this.I_(y);let w=!1,T=!1;const I=new Q2({Yo:x=>{T?ge(ln,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(w||(ge(ln,`Opening RPC '${e}' stream ${i} transport.`),y.open(),w=!0),ge(ln,`RPC '${e}' stream ${i} sending:`,x),y.send(x))},Zo:()=>y.close()}),k=(x,N,U)=>{x.listen(N,H=>{try{U(H)}catch(K){setTimeout(()=>{throw K},0)}})};return k(y,Mc.EventType.OPEN,()=>{T||(ge(ln,`RPC '${e}' stream ${i} transport opened.`),I.o_())}),k(y,Mc.EventType.CLOSE,()=>{T||(T=!0,ge(ln,`RPC '${e}' stream ${i} transport closed`),I.a_(),this.E_(y))}),k(y,Mc.EventType.ERROR,x=>{T||(T=!0,iu(ln,`RPC '${e}' stream ${i} transport errored. Name:`,x.name,"Message:",x.message),I.a_(new fe(re.UNAVAILABLE,"The operation could not be completed")))}),k(y,Mc.EventType.MESSAGE,x=>{if(!T){const N=x.data[0];Qe(!!N,16349);const U=N,H=U?.error||U[0]?.error;if(H){ge(ln,`RPC '${e}' stream ${i} received error:`,H);const K=H.status;let G=function(P){const A=Ot[P];if(A!==void 0)return t1(A)}(K),ne=H.message;G===void 0&&(G=re.INTERNAL,ne="Unknown error status: "+K+" with message "+H.message),T=!0,I.a_(new fe(G,ne)),y.close()}else ge(ln,`RPC '${e}' stream ${i} received:`,N),I.u_(N)}}),k(c,vT.STAT_EVENT,x=>{x.stat===Tg.PROXY?ge(ln,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===Tg.NOPROXY&&ge(ln,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.__()},0),I}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Wm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(n){return new n2(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ge("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="PersistentStream";class y1{constructor(e,t,r,i,o,l,c,h){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new g1(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(Fi(t.toString()),Fi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{const i=new fe(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ge(uE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(ge(uE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class J2 extends y1{constructor(e,t,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=s2(this.serializer,e),r=function(o){if(!("targetChange"in o))return Oe.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Oe.min():l.readTime?ii(l.readTime):Oe.min()}(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Mg(this.serializer),t.addTarget=function(o,l){let c;const h=l.target;if(c=Cg(h)?{documents:l2(o,h)}:{query:c2(o,h).ft},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=i1(o,l.resumeToken);const f=Rg(o,l.expectedCount);f!==null&&(c.expectedCount=f)}else if(l.snapshotVersion.compareTo(Oe.min())>0){c.readTime=nf(o,l.snapshotVersion.toTimestamp());const f=Rg(o,l.expectedCount);f!==null&&(c.expectedCount=f)}return c}(this.serializer,e);const r=h2(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Mg(this.serializer),t.removeTarget=e,this.q_(t)}}class Z2 extends y1{constructor(e,t,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=a2(e.writeResults,e.commitTime),r=ii(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Mg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>o2(this.serializer,r))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{}class tO extends eO{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new fe(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Go(e,Dg(t,r),i,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new fe(re.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Ho(e,Dg(t,r),i,l,c,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(re.UNKNOWN,l.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class nO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Fi(t),this.aa=!1):ge("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o="RemoteStore";class rO{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(l=>{r.enqueueAndForget(async()=>{Xo(this)&&(ge($o,"Restarting streams for network reachability change."),await async function(h){const f=Me(h);f.Ea.add(4),await Cu(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Uf(f)}(this))})}),this.Ra=new nO(r,i)}}async function Uf(n){if(Xo(n))for(const e of n.da)await e(!0)}async function Cu(n){for(const e of n.da)await e(!1)}function _1(n,e){const t=Me(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),By(t)?zy(t):xl(t).O_()&&Uy(t,e))}function jy(n,e){const t=Me(n),r=xl(t);t.Ia.delete(e),r.O_()&&v1(t,e),t.Ia.size===0&&(r.O_()?r.L_():Xo(t)&&t.Ra.set("Unknown"))}function Uy(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}xl(n).Y_(e)}function v1(n,e){n.Va.Ue(e),xl(n).Z_(e)}function zy(n){n.Va=new JD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),xl(n).start(),n.Ra.ua()}function By(n){return Xo(n)&&!xl(n).x_()&&n.Ia.size>0}function Xo(n){return Me(n).Ea.size===0}function w1(n){n.Va=void 0}async function iO(n){n.Ra.set("Online")}async function sO(n){n.Ia.forEach((e,t)=>{Uy(n,e)})}async function oO(n,e){w1(n),By(n)?(n.Ra.ha(e),zy(n)):n.Ra.set("Unknown")}async function aO(n,e,t){if(n.Ra.set("Online"),e instanceof r1&&e.state===2&&e.cause)try{await async function(i,o){const l=o.cause;for(const c of o.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,l),i.Ia.delete(c),i.Va.removeTarget(c))}(n,e)}catch(r){ge($o,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await sf(n,r)}else if(e instanceof Md?n.Va.Ze(e):e instanceof n1?n.Va.st(e):n.Va.tt(e),!t.isEqual(Oe.min()))try{const r=await m1(n.localStore);t.compareTo(r)>=0&&await function(o,l){const c=o.Va.Tt(l);return c.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const m=o.Ia.get(f);m&&o.Ia.set(f,m.withResumeToken(h.resumeToken,l))}}),c.targetMismatches.forEach((h,f)=>{const m=o.Ia.get(h);if(!m)return;o.Ia.set(h,m.withResumeToken(nn.EMPTY_BYTE_STRING,m.snapshotVersion)),v1(o,h);const y=new Ss(m.target,h,f,m.sequenceNumber);Uy(o,y)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t)}catch(r){ge($o,"Failed to raise snapshot:",r),await sf(n,r)}}async function sf(n,e,t){if(!wl(e))throw e;n.Ea.add(1),await Cu(n),n.Ra.set("Offline"),t||(t=()=>m1(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ge($o,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Uf(n)})}function E1(n,e){return e().catch(t=>sf(n,t,e))}async function zf(n){const e=Me(n),t=Us(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Iy;for(;lO(e);)try{const i=await H2(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,cO(e,i)}catch(i){await sf(e,i)}x1(e)&&b1(e)}function lO(n){return Xo(n)&&n.Ta.length<10}function cO(n,e){n.Ta.push(e);const t=Us(n);t.O_()&&t.X_&&t.ea(e.mutations)}function x1(n){return Xo(n)&&!Us(n).x_()&&n.Ta.length>0}function b1(n){Us(n).start()}async function uO(n){Us(n).ra()}async function hO(n){const e=Us(n);for(const t of n.Ta)e.ea(t.mutations)}async function dO(n,e,t){const r=n.Ta.shift(),i=Dy.from(r,e,t);await E1(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await zf(n)}async function fO(n,e){e&&Us(n).X_&&await async function(r,i){if(function(l){return KD(l)&&l!==re.ABORTED}(i.code)){const o=r.Ta.shift();Us(r).B_(),await E1(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await zf(r)}}(n,e),x1(n)&&b1(n)}async function hE(n,e){const t=Me(n);t.asyncQueue.verifyOperationInProgress(),ge($o,"RemoteStore received new credentials");const r=Xo(t);t.Ea.add(3),await Cu(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Uf(t)}async function pO(n,e){const t=Me(n);e?(t.Ea.delete(2),await Uf(t)):e||(t.Ea.add(2),await Cu(t),t.Ra.set("Unknown"))}function xl(n){return n.ma||(n.ma=function(t,r,i){const o=Me(t);return o.sa(),new J2(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:iO.bind(null,n),t_:sO.bind(null,n),r_:oO.bind(null,n),H_:aO.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),By(n)?zy(n):n.Ra.set("Unknown")):(await n.ma.stop(),w1(n))})),n.ma}function Us(n){return n.fa||(n.fa=function(t,r,i){const o=Me(t);return o.sa(),new Z2(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:uO.bind(null,n),r_:fO.bind(null,n),ta:hO.bind(null,n),na:dO.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await zf(n)):(await n.fa.stop(),n.Ta.length>0&&(ge($o,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const l=Date.now()+r,c=new Hy(e,t,l,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wy(n,e){if(Fi("AsyncQueue",`${e}: ${n}`),wl(n))return new fe(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{static emptySet(e){return new rl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Te.comparator(t.key,r.key):(t,r)=>Te.comparator(t.key,r.key),this.keyedMap=Nc(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof rl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new rl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(){this.ga=new gt(Te.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}}class ul{constructor(e,t,r,i,o,l,c,h,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,o){const l=[];return t.forEach(c=>{l.push({type:0,doc:c})}),new ul(e,t,rl.emptySet(t),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class gO{constructor(){this.queries=fE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Me(t),o=i.queries;i.queries=fE(),o.forEach((l,c)=>{for(const h of c.Sa)h.onError(r)})})(this,new fe(re.ABORTED,"Firestore shutting down"))}}function fE(){return new Qo(n=>BT(n),Mf)}async function $y(n,e){const t=Me(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new mO,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const c=Wy(l,`Initialization of query '${Ka(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&Yy(t)}async function qy(n,e){const t=Me(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function yO(n,e){const t=Me(n);let r=!1;for(const i of e){const o=i.query,l=t.queries.get(o);if(l){for(const c of l.Sa)c.Fa(i)&&(r=!0);l.wa=i}}r&&Yy(t)}function _O(n,e,t){const r=Me(n),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(t);r.queries.delete(e)}function Yy(n){n.Ca.forEach(e=>{e.next()})}var Vg,pE;(pE=Vg||(Vg={})).Ma="default",pE.Cache="cache";class Gy{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ul(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ul.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Vg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e){this.key=e}}class S1{constructor(e){this.key=e}}class vO{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ue(),this.mutatedKeys=Ue(),this.eu=HT(e),this.tu=new rl(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new dE,i=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=i,c=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((m,y)=>{const w=i.get(m),T=Nf(this.query,y)?y:null,I=!!w&&this.mutatedKeys.has(w.key),k=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let x=!1;w&&T?w.data.isEqual(T.data)?I!==k&&(r.track({type:3,doc:T}),x=!0):this.su(w,T)||(r.track({type:2,doc:T}),x=!0,(h&&this.eu(T,h)>0||f&&this.eu(T,f)<0)&&(c=!0)):!w&&T?(r.track({type:0,doc:T}),x=!0):w&&!T&&(r.track({type:1,doc:w}),x=!0,(h||f)&&(c=!0)),x&&(T?(l=l.add(T),o=k?o.add(m):o.delete(m)):(l=l.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{tu:l,iu:r,Cs:c,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort((m,y)=>function(T,I){const k=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:x})}};return k(T)-k(I)}(m.type,y.type)||this.eu(m.doc,y.doc)),this.ou(r),i=i??!1;const c=t&&!i?this._u():[],h=this.Xa.size===0&&this.current&&!i?1:0,f=h!==this.Za;return this.Za=h,l.length!==0||f?{snapshot:new ul(this.query,e.tu,o,l,e.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new dE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ue(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new S1(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new T1(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=Ue();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ul.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ky="SyncEngine";class wO{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class EO{constructor(e){this.key=e,this.hu=!1}}class xO{constructor(e,t,r,i,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Qo(c=>BT(c),Mf),this.Iu=new Map,this.Eu=new Set,this.du=new gt(Te.comparator),this.Au=new Map,this.Ru=new Ny,this.Vu={},this.mu=new Map,this.fu=cl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function bO(n,e,t=!0){const r=R1(n);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await I1(r,e,t,!0),i}async function TO(n,e){const t=R1(n);await I1(t,e,!0,!1)}async function I1(n,e,t,r){const i=await W2(n.localStore,ni(e)),o=i.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let c;return r&&(c=await SO(n,e,o,l==="current",i.resumeToken)),n.isPrimaryClient&&t&&_1(n.remoteStore,i),c}async function SO(n,e,t,r,i){n.pu=(y,w,T)=>async function(k,x,N,U){let H=x.view.ru(N);H.Cs&&(H=await oE(k.localStore,x.query,!1).then(({documents:D})=>x.view.ru(D,H)));const K=U&&U.targetChanges.get(x.targetId),G=U&&U.targetMismatches.get(x.targetId)!=null,ne=x.view.applyChanges(H,k.isPrimaryClient,K,G);return gE(k,x.targetId,ne.au),ne.snapshot}(n,y,w,T);const o=await oE(n.localStore,e,!0),l=new vO(e,o.Qs),c=l.ru(o.documents),h=Pu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=l.applyChanges(c,n.isPrimaryClient,h);gE(n,t,f.au);const m=new wO(e,t,l);return n.Tu.set(e,m),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function IO(n,e,t){const r=Me(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(l=>!Mf(l,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ng(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&jy(r.remoteStore,i.targetId),Fg(r,i.targetId)}).catch(vl)):(Fg(r,i.targetId),await Ng(r.localStore,i.targetId,!0))}async function kO(n,e){const t=Me(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),jy(t.remoteStore,r.targetId))}async function PO(n,e,t){const r=NO(n);try{const i=await function(l,c){const h=Me(l),f=ct.now(),m=c.reduce((T,I)=>T.add(I.key),Ue());let y,w;return h.persistence.runTransaction("Locally write mutations","readwrite",T=>{let I=ji(),k=Ue();return h.Ns.getEntries(T,m).next(x=>{I=x,I.forEach((N,U)=>{U.isValidDocument()||(k=k.add(N))})}).next(()=>h.localDocuments.getOverlayedDocuments(T,I)).next(x=>{y=x;const N=[];for(const U of c){const H=WD(U,y.get(U.key).overlayedDocument);H!=null&&N.push(new qs(U.key,H,MT(H.value.mapValue),ri.exists(!0)))}return h.mutationQueue.addMutationBatch(T,f,N,c)}).next(x=>{w=x;const N=x.applyToLocalDocumentSet(y,k);return h.documentOverlayCache.saveOverlays(T,x.batchId,N)})}).then(()=>({batchId:w.batchId,changes:$T(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,c,h){let f=l.Vu[l.currentUser.toKey()];f||(f=new gt(je)),f=f.insert(c,h),l.Vu[l.currentUser.toKey()]=f}(r,i.batchId,t),await Au(r,i.changes),await zf(r.remoteStore)}catch(i){const o=Wy(i,"Failed to persist write");t.reject(o)}}async function k1(n,e){const t=Me(n);try{const r=await z2(t.localStore,e);e.targetChanges.forEach((i,o)=>{const l=t.Au.get(o);l&&(Qe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.hu=!0:i.modifiedDocuments.size>0?Qe(l.hu,14607):i.removedDocuments.size>0&&(Qe(l.hu,42227),l.hu=!1))}),await Au(t,r,e)}catch(r){await vl(r)}}function mE(n,e,t){const r=Me(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach((o,l)=>{const c=l.view.va(e);c.snapshot&&i.push(c.snapshot)}),function(l,c){const h=Me(l);h.onlineState=c;let f=!1;h.queries.forEach((m,y)=>{for(const w of y.Sa)w.va(c)&&(f=!0)}),f&&Yy(h)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function CO(n,e,t){const r=Me(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),o=i&&i.key;if(o){let l=new gt(Te.comparator);l=l.insert(o,un.newNoDocument(o,Oe.min()));const c=Ue().add(o),h=new Ff(Oe.min(),new Map,new gt(je),l,c);await k1(r,h),r.du=r.du.remove(o),r.Au.delete(e),Qy(r)}else await Ng(r.localStore,e,!1).then(()=>Fg(r,e,t)).catch(vl)}async function AO(n,e){const t=Me(n),r=e.batch.batchId;try{const i=await U2(t.localStore,e);C1(t,r,null),P1(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Au(t,i)}catch(i){await vl(i)}}async function RO(n,e,t){const r=Me(n);try{const i=await function(l,c){const h=Me(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return h.mutationQueue.lookupMutationBatch(f,c).next(y=>(Qe(y!==null,37113),m=y.keys(),h.mutationQueue.removeMutationBatch(f,y))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,m,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>h.localDocuments.getDocuments(f,m))})}(r.localStore,e);C1(r,e,t),P1(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Au(r,i)}catch(i){await vl(i)}}function P1(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function C1(n,e,t){const r=Me(n);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Fg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||A1(n,r)})}function A1(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(jy(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Qy(n))}function gE(n,e,t){for(const r of t)r instanceof T1?(n.Ru.addReference(r.key,e),DO(n,r)):r instanceof S1?(ge(Ky,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||A1(n,r.key)):Ae(19791,{wu:r})}function DO(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ge(Ky,"New document in limbo: "+t),n.Eu.add(r),Qy(n))}function Qy(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Te(it.fromString(e)),r=n.fu.next();n.Au.set(r,new EO(t)),n.du=n.du.insert(t,r),_1(n.remoteStore,new Ss(ni(Of(t.path)),r,"TargetPurposeLimboResolution",Af.ce))}}async function Au(n,e,t){const r=Me(n),i=[],o=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach((c,h)=>{l.push(r.pu(h,e,t).then(f=>{if((f||t)&&r.isPrimaryClient){const m=f?!f.fromCache:t?.targetChanges.get(h.targetId)?.current;r.sharedClientState.updateQueryState(h.targetId,m?"current":"not-current")}if(f){i.push(f);const m=Vy.As(h.targetId,f);o.push(m)}}))}),await Promise.all(l),r.Pu.H_(i),await async function(h,f){const m=Me(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>ie.forEach(f,w=>ie.forEach(w.Es,T=>m.persistence.referenceDelegate.addReference(y,w.targetId,T)).next(()=>ie.forEach(w.ds,T=>m.persistence.referenceDelegate.removeReference(y,w.targetId,T)))))}catch(y){if(!wl(y))throw y;ge(Fy,"Failed to update sequence numbers: "+y)}for(const y of f){const w=y.targetId;if(!y.fromCache){const T=m.Ms.get(w),I=T.snapshotVersion,k=T.withLastLimboFreeSnapshotVersion(I);m.Ms=m.Ms.insert(w,k)}}}(r.localStore,o))}async function OO(n,e){const t=Me(n);if(!t.currentUser.isEqual(e)){ge(Ky,"User change. New user:",e.toKey());const r=await p1(t.localStore,e);t.currentUser=e,function(o,l){o.mu.forEach(c=>{c.forEach(h=>{h.reject(new fe(re.CANCELLED,l))})}),o.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Au(t,r.Ls)}}function MO(n,e){const t=Me(n),r=t.Au.get(e);if(r&&r.hu)return Ue().add(r.key);{let i=Ue();const o=t.Iu.get(e);if(!o)return i;for(const l of o){const c=t.Tu.get(l);i=i.unionWith(c.view.nu)}return i}}function R1(n){const e=Me(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=k1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CO.bind(null,e),e.Pu.H_=yO.bind(null,e.eventManager),e.Pu.yu=_O.bind(null,e.eventManager),e}function NO(n){const e=Me(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RO.bind(null,e),e}class of{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return j2(this.persistence,new L2,e.initialUser,this.serializer)}Cu(e){return new f1(Ly.mi,this.serializer)}Du(e){return new q2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}of.provider={build:()=>new of};class LO extends of{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Qe(this.persistence.referenceDelegate instanceof rf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new E2(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new f1(r=>rf.mi(r,t),this.serializer)}}class jg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>mE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=OO.bind(null,this.syncEngine),await pO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new gO}()}createDatastore(e){const t=jf(e.databaseInfo.databaseId),r=function(o){return new X2(o)}(e.databaseInfo);return function(o,l,c,h){return new tO(o,l,c,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,l,c){return new rO(r,i,o,l,c)}(this.localStore,this.datastore,e.asyncQueue,t=>mE(this.syncEngine,t,0),function(){return cE.v()?new cE:new Y2}())}createSyncEngine(e,t){return function(i,o,l,c,h,f,m){const y=new xO(i,o,l,c,h,f);return m&&(y.gu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(t){const r=Me(t);ge($o,"RemoteStore shutting down."),r.Ea.add(5),await Cu(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}jg.provider={build:()=>new jg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Fi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs="FirestoreClient";class VO{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Pn.UNAUTHENTICATED,this.clientId=Sy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{ge(zs,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(ge(zs,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Wy(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $m(n,e){n.asyncQueue.verifyOperationInProgress(),ge(zs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await p1(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function yE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await FO(n);ge(zs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>hE(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>hE(e.remoteStore,i)),n._onlineComponents=e}async function FO(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge(zs,"Using user provided OfflineComponentProvider");try{await $m(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===re.FAILED_PRECONDITION||i.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;iu("Error using user provided cache. Falling back to memory cache: "+t),await $m(n,new of)}}else ge(zs,"Using default OfflineComponentProvider"),await $m(n,new LO(void 0));return n._offlineComponents}async function D1(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge(zs,"Using user provided OnlineComponentProvider"),await yE(n,n._uninitializedComponentsProvider._online)):(ge(zs,"Using default OnlineComponentProvider"),await yE(n,new jg))),n._onlineComponents}function jO(n){return D1(n).then(e=>e.syncEngine)}async function af(n){const e=await D1(n),t=e.eventManager;return t.onListen=bO.bind(null,e.syncEngine),t.onUnlisten=IO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=TO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=kO.bind(null,e.syncEngine),t}function UO(n,e,t={}){const r=new Ni;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,c,h,f){const m=new Xy({next:w=>{m.Nu(),l.enqueueAndForget(()=>qy(o,y));const T=w.docs.has(c);!T&&w.fromCache?f.reject(new fe(re.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&w.fromCache&&h&&h.source==="server"?f.reject(new fe(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(w)},error:w=>f.reject(w)}),y=new Gy(Of(c.path),m,{includeMetadataChanges:!0,qa:!0});return $y(o,y)}(await af(n),n.asyncQueue,e,t,r)),r.promise}function zO(n,e,t={}){const r=new Ni;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,c,h,f){const m=new Xy({next:w=>{m.Nu(),l.enqueueAndForget(()=>qy(o,y)),w.fromCache&&h.source==="server"?f.reject(new fe(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(w)},error:w=>f.reject(w)}),y=new Gy(c,m,{includeMetadataChanges:!0,qa:!0});return $y(o,y)}(await af(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO="firestore.googleapis.com",vE=!0;class wE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new fe(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=BO,this.ssl=vE}else this.host=e.host,this.ssl=e.ssl??vE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=h1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<d1)throw new fe(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=O1(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new fe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new fe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new fe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jy{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new GR;switch(r.type){case"firstParty":return new XR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=_E.get(t);r&&(ge("ComponentProvider","Removing Datastore"),_E.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zi(this.firestore,e,this._query)}}class _t{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Os(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}toJSON(){return{type:_t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Iu(t,_t._jsonSchema))return new _t(e,r||null,new Te(it.fromString(t.referencePath)))}}_t._jsonSchemaVersion="firestore/documentReference/1.0",_t._jsonSchema={type:Nt("string",_t._jsonSchemaVersion),referencePath:Nt("string")};class Os extends zi{constructor(e,t,r){super(e,t,Of(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new Te(e))}withConverter(e){return new Os(this.firestore,e,this._path)}}function lf(n,e,...t){if(n=Bt(n),bT("collection","path",e),n instanceof Jy){const r=it.fromString(e,...t);return Ow(r),new Os(n,null,r)}{if(!(n instanceof _t||n instanceof Os))throw new fe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(it.fromString(e,...t));return Ow(r),new Os(n.firestore,null,r)}}function Ir(n,e,...t){if(n=Bt(n),arguments.length===1&&(e=Sy.newId()),bT("doc","path",e),n instanceof Jy){const r=it.fromString(e,...t);return Dw(r),new _t(n,null,new Te(r))}{if(!(n instanceof _t||n instanceof Os))throw new fe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(it.fromString(e,...t));return Dw(r),new _t(n.firestore,n instanceof Os?n.converter:null,new Te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="AsyncQueue";class xE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new g1(this,"async_queue_retry"),this._c=()=>{const r=Wm();r&&ge(EE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Wm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Wm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Ni;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!wl(e))throw e;ge(EE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Fi("INTERNAL UNHANDLED ERROR: ",bE(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Hy.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&Ae(47125,{Pc:bE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function bE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}class qo extends Jy{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new xE,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xE(e),this._firestoreClient=void 0,await e}}}function HO(n,e,t){t||(t=Qd);const r=py(n,"firestore");if(r.isInitialized(t)){const i=r.getImmediate({identifier:t}),o=r.getOptions(t);if(Uo(o,e))return i;throw new fe(re.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new fe(re.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<d1)throw new fe(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&ml(e.host)&&Pb(e.host),r.initialize({options:e,instanceIdentifier:t})}function Bf(n){if(n._terminated)throw new fe(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||WO(n),n._firestoreClient}function WO(n){const e=n._freezeSettings(),t=function(i,o,l,c){return new mD(i,o,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,O1(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new VO(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(i){const o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lr(nn.fromBase64String(e))}catch(t){throw new fe(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new lr(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:lr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Iu(e,lr._jsonSchema))return lr.fromBase64String(e.bytes)}}lr._jsonSchemaVersion="firestore/bytes/1.0",lr._jsonSchema={type:Nt("string",lr._jsonSchemaVersion),bytes:Nt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:si._jsonSchemaVersion}}static fromJSON(e){if(Iu(e,si._jsonSchema))return new si(e.latitude,e.longitude)}}si._jsonSchemaVersion="firestore/geoPoint/1.0",si._jsonSchema={type:Nt("string",si._jsonSchemaVersion),latitude:Nt("number"),longitude:Nt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:oi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Iu(e,oi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new oi(e.vectorValues);throw new fe(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}oi._jsonSchemaVersion="firestore/vectorValue/1.0",oi._jsonSchema={type:Nt("string",oi._jsonSchemaVersion),vectorValues:Nt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=/^__.*__$/;class qO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new qs(e,this.data,this.fieldMask,t,this.fieldTransforms):new ku(e,this.data,t,this.fieldTransforms)}}class M1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new qs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function N1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:n})}}class e_{constructor(e,t,r,i,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new e_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return cf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(N1(this.Ac)&&$O.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class YO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||jf(e)}Cc(e,t,r,i=!1){return new e_({Ac:e,methodName:t,Dc:r,path:en.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function t_(n){const e=n._freezeSettings(),t=jf(n._databaseId);return new YO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function GO(n,e,t,r,i,o={}){const l=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);n_("Data must be an object, but it was:",l,r);const c=L1(r,l);let h,f;if(o.merge)h=new Yn(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const m=[];for(const y of o.mergeFields){const w=Ug(e,y,t);if(!l.contains(w))throw new fe(re.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);F1(m,w)||m.push(w)}h=new Yn(m),f=l.fieldTransforms.filter(y=>h.covers(y.field))}else h=null,f=l.fieldTransforms;return new qO(new An(c),h,f)}class Wf extends Zy{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wf}}function KO(n,e,t,r){const i=n.Cc(1,e,t);n_("Data must be an object, but it was:",i,r);const o=[],l=An.empty();$s(r,(h,f)=>{const m=r_(e,h,t);f=Bt(f);const y=i.yc(m);if(f instanceof Wf)o.push(m);else{const w=Ru(f,y);w!=null&&(o.push(m),l.set(m,w))}});const c=new Yn(o);return new M1(l,c,i.fieldTransforms)}function QO(n,e,t,r,i,o){const l=n.Cc(1,e,t),c=[Ug(e,r,t)],h=[i];if(o.length%2!=0)throw new fe(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)c.push(Ug(e,o[w])),h.push(o[w+1]);const f=[],m=An.empty();for(let w=c.length-1;w>=0;--w)if(!F1(f,c[w])){const T=c[w];let I=h[w];I=Bt(I);const k=l.yc(T);if(I instanceof Wf)f.push(T);else{const x=Ru(I,k);x!=null&&(f.push(T),m.set(T,x))}}const y=new Yn(f);return new M1(m,y,l.fieldTransforms)}function XO(n,e,t,r=!1){return Ru(t,n.Cc(r?4:3,e))}function Ru(n,e){if(V1(n=Bt(n)))return n_("Unsupported field value:",e,n),L1(n,e);if(n instanceof Zy)return function(r,i){if(!N1(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const o=[];let l=0;for(const c of r){let h=Ru(c,i.wc(l));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),l++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Bt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return FD(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=ct.fromDate(r);return{timestampValue:nf(i.serializer,o)}}if(r instanceof ct){const o=new ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nf(i.serializer,o)}}if(r instanceof si)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof lr)return{bytesValue:i1(i.serializer,r._byteString)};if(r instanceof _t){const o=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw i.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:My(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof oi)return function(l,c){return{mapValue:{fields:{[DT]:{stringValue:OT},[Xd]:{arrayValue:{values:l.toArray().map(f=>{if(typeof f!="number")throw c.Sc("VectorValues must only contain numeric values.");return Ry(c.serializer,f)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Cf(r)}`)}(n,e)}function L1(n,e){const t={};return IT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$s(n,(r,i)=>{const o=Ru(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function V1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ct||n instanceof si||n instanceof lr||n instanceof _t||n instanceof Zy||n instanceof oi)}function n_(n,e,t){if(!V1(t)||!TT(t)){const r=Cf(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function Ug(n,e,t){if((e=Bt(e))instanceof Hf)return e._internalPath;if(typeof e=="string")return r_(n,e);throw cf("Field path arguments must be of type string or ",n,!1,void 0,t)}const JO=new RegExp("[~\\*/\\[\\]]");function r_(n,e,t){if(e.search(JO)>=0)throw cf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Hf(...e.split("."))._internalPath}catch{throw cf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function cf(n,e,t,r,i){const o=r&&!r.isEmpty(),l=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${r}`),l&&(h+=` in document ${i}`),h+=")"),new fe(re.INVALID_ARGUMENT,c+n+h)}function F1(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field($f("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class ZO extends j1{data(){return super.data()}}function $f(n,e){return typeof e=="string"?r_(n,e):e instanceof Hf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new fe(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class i_{}class s_ extends i_{}function z1(n,e,...t){let r=[];e instanceof i_&&r.push(e),r=r.concat(t),function(o){const l=o.filter(h=>h instanceof o_).length,c=o.filter(h=>h instanceof qf).length;if(l>1||l>0&&c>0)throw new fe(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class qf extends s_{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new qf(e,t,r)}_apply(e){const t=this._parse(e);return B1(e._query,t),new zi(e.firestore,e.converter,Ag(e._query,t))}_parse(e){const t=t_(e.firestore);return function(o,l,c,h,f,m,y){let w;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new fe(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){IE(y,m);const I=[];for(const k of y)I.push(SE(h,o,k));w={arrayValue:{values:I}}}else w=SE(h,o,y)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||IE(y,m),w=XO(c,l,y,m==="in"||m==="not-in");return Mt.create(f,m,w)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function eM(n,e,t){const r=e,i=$f("where",n);return qf._create(i,r,t)}class o_ extends i_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new o_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Dr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let l=i;const c=o.getFlattenedFilters();for(const h of c)B1(l,h),l=Ag(l,h)}(e._query,t),new zi(e.firestore,e.converter,Ag(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class a_ extends s_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new a_(e,t)}_apply(e){const t=function(i,o,l){if(i.startAt!==null)throw new fe(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new fe(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new cu(o,l)}(e._query,this._field,this._direction);return new zi(e.firestore,e.converter,function(i,o){const l=i.explicitOrderBy.concat([o]);return new El(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function tM(n,e="asc"){const t=e,r=$f("orderBy",n);return a_._create(r,t)}class l_ extends s_{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new l_(e,t,r)}_apply(e){return new zi(e.firestore,e.converter,Zd(e._query,this._limit,this._limitType))}}function nM(n){return iD("limit",n),l_._create("limit",n,"F")}function SE(n,e,t){if(typeof(t=Bt(t))=="string"){if(t==="")throw new fe(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zT(e)&&t.indexOf("/")!==-1)throw new fe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(it.fromString(t));if(!Te.isDocumentKey(r))throw new fe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zw(n,new Te(r))}if(t instanceof _t)return zw(n,t._key);throw new fe(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cf(t)}.`)}function IE(n,e){if(!Array.isArray(n)||n.length===0)throw new fe(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function B1(n,e){const t=function(i,o){for(const l of i)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new fe(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class rM{convertValue(e,t="none"){switch(js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return $s(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){const t=e.fields?.[Xd].arrayValue?.values?.map(r=>Tt(r.doubleValue));return new oi(t)}convertGeoPoint(e){return new si(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Df(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ou(e));default:return null}}convertTimestamp(e){const t=Vs(e);return new ct(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=it.fromString(e);Qe(u1(r),9688,{name:e});const i=new au(r.get(1),r.get(3)),o=new Te(r.popFirst(5));return i.isEqual(t)||Fi(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Vc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Lo extends j1{constructor(e,t,r,i,o,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Nd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field($f("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Lo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Lo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Lo._jsonSchema={type:Nt("string",Lo._jsonSchemaVersion),bundleSource:Nt("string","DocumentSnapshot"),bundleName:Nt("string"),bundle:Nt("string")};class Nd extends Lo{data(e={}){return super.data(e)}}class Vo{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Vc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Nd(this._firestore,this._userDataWriter,r.key,r,new Vc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(c=>{const h=new Nd(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Vc(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const h=new Nd(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Vc(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,m=-1;return c.type!==0&&(f=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),m=l.indexOf(c.doc.key)),{type:sM(c.type),doc:h,oldIndex:f,newIndex:m}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Sy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function sM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(n){n=Ar(n,_t);const e=Ar(n.firestore,qo);return UO(Bf(e),n._key).then(t=>W1(e,n,t))}Vo._jsonSchemaVersion="firestore/querySnapshot/1.0",Vo._jsonSchema={type:Nt("string",Vo._jsonSchemaVersion),bundleSource:Nt("string","QuerySnapshot"),bundleName:Nt("string"),bundle:Nt("string")};class c_ extends rM{constructor(e){super(),this.firestore=e}convertBytes(e){return new lr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,t)}}function uf(n){n=Ar(n,zi);const e=Ar(n.firestore,qo),t=Bf(e),r=new c_(e);return U1(n._query),zO(t,n._query).then(i=>new Vo(e,r,n,i))}function u_(n,e,t){n=Ar(n,_t);const r=Ar(n.firestore,qo),i=iM(n.converter,e,t);return H1(r,[GO(t_(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ri.none())])}function Ja(n,e,t,...r){n=Ar(n,_t);const i=Ar(n.firestore,qo),o=t_(i);let l;return l=typeof(e=Bt(e))=="string"||e instanceof Hf?QO(o,"updateDoc",n._key,e,t,r):KO(o,"updateDoc",n._key,e),H1(i,[l.toMutation(n._key,ri.exists(!0))])}function oM(n,...e){n=Bt(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||TE(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(TE(e[r])){const h=e[r];e[r]=h.next?.bind(h),e[r+1]=h.error?.bind(h),e[r+2]=h.complete?.bind(h)}let o,l,c;if(n instanceof _t)l=Ar(n.firestore,qo),c=Of(n._key.path),o={next:h=>{e[r]&&e[r](W1(l,n,h))},error:e[r+1],complete:e[r+2]};else{const h=Ar(n,zi);l=Ar(h.firestore,qo),c=h._query;const f=new c_(l);o={next:m=>{e[r]&&e[r](new Vo(l,f,h,m))},error:e[r+1],complete:e[r+2]},U1(n._query)}return function(f,m,y,w){const T=new Xy(w),I=new Gy(m,T,y);return f.asyncQueue.enqueueAndForget(async()=>$y(await af(f),I)),()=>{T.Nu(),f.asyncQueue.enqueueAndForget(async()=>qy(await af(f),I))}}(Bf(l),c,i,o)}function H1(n,e){return function(r,i){const o=new Ni;return r.asyncQueue.enqueueAndForget(async()=>PO(await jO(r),i,o)),o.promise}(Bf(n),e)}function W1(n,e,t){const r=t.docs.get(e._key),i=new c_(n);return new Lo(n,i,e._key,r,new Vc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){_l=i})(gl),sl(new zo("firestore",(r,{instanceIdentifier:i,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new qo(new KR(r.getProvider("auth-internal")),new JR(l,r.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new fe(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new au(f.options.projectId,m)}(l,i),l);return o={useFetchStreams:t,...o},c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Rs(Pw,Cw,e),Rs(Pw,Cw,"esm2020")})();const Sr={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},aM=n=>typeof n=="string"&&n.length>8?n.slice(0,4)+""+n.slice(-4):String(n);if(!Sr.apiKey||Sr.apiKey==="undefined"||Sr.apiKey==="null")throw console.error("[Firebase] Variables manquantes au build:",{apiKey:Sr.apiKey?aM(Sr.apiKey):"(absente)",authDomain:Sr.authDomain||"(absent)",projectId:Sr.projectId||"(absent)",storageBucket:Sr.storageBucket||"(absent)",messagingSenderId:Sr.messagingSenderId||"(absent)",appId:Sr.appId||"(absent)"}),new Error("Firebase config invalide: VITE_FIREBASE_API_KEY absente ct frontend build");const h_=Rb(Sr),Ld=by(h_),_n=HO(h_,{experimentalForceLongPolling:!0,useFetchStreams:!1}),lM="https://utc-api.onrender.com";async function qm(n,e={}){const r=`${lM}${n.startsWith("/")?"":"/"}${n}`,{method:i="GET",token:o,body:l}=e,c={"Content-Type":"application/json"};o&&(c.Authorization=`Bearer ${o}`);const h=await fetch(r,{method:i,headers:c,body:l?JSON.stringify(l):void 0,cache:"no-store"});if(!h.ok){const m=await h.text().catch(()=>"");throw new Error(`API ${h.status} ${r}: ${m}`)}return(h.headers.get("content-type")||"").includes("application/json")?h.json():h.text()}const cM=W.createContext(),uM=({children:n})=>{const e=W.useMemo(()=>by(h_),[]),[t,r]=W.useState(null),[i,o]=W.useState(null),[l,c]=W.useState(!0),h=W.useCallback(async m=>{try{const y=await m.getIdToken();await qm("/me/init",{token:y});const w=await qm("/me/portfolio",{token:y});o(w||{cash:1e4,positions:[],history:[]})}catch(y){console.error("[UserContext] loadPortfolio error:",y),o({cash:1e4,positions:[],history:[]})}},[]),f=W.useCallback(async m=>{try{if(!t)return;const y=await t.getIdToken();await qm("/me/portfolio",{method:"POST",token:y,body:m}),o(m)}catch(y){console.error("[UserContext] savePortfolio error:",y)}},[t]);return W.useEffect(()=>{const m=sT(e,async y=>{c(!0),y?(r(y),await h(y)):(r(null),o(null)),c(!1)});return()=>m()},[e,h]),b.jsx(cM.Provider,{value:{user:t,portfolio:i,setPortfolio:f,loading:l},children:n})};var cd={},Ym={exports:{}},In={},Gm={exports:{}},Km={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kE;function hM(){return kE||(kE=1,function(n){function e(se,pe){var R=se.length;se.push(pe);e:for(;0<R;){var z=R-1>>>1,X=se[z];if(0<i(X,pe))se[z]=pe,se[R]=X,R=z;else break e}}function t(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var pe=se[0],R=se.pop();if(R!==pe){se[0]=R;e:for(var z=0,X=se.length,J=X>>>1;z<J;){var oe=2*(z+1)-1,ye=se[oe],xe=oe+1,Se=se[xe];if(0>i(ye,R))xe<X&&0>i(Se,ye)?(se[z]=Se,se[xe]=R,z=xe):(se[z]=ye,se[oe]=R,z=oe);else if(xe<X&&0>i(Se,R))se[z]=Se,se[xe]=R,z=xe;else break e}}return pe}function i(se,pe){var R=se.sortIndex-pe.sortIndex;return R!==0?R:se.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var h=[],f=[],m=1,y=null,w=3,T=!1,I=!1,k=!1,x=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(se){for(var pe=t(f);pe!==null;){if(pe.callback===null)r(f);else if(pe.startTime<=se)r(f),pe.sortIndex=pe.expirationTime,e(h,pe);else break;pe=t(f)}}function K(se){if(k=!1,H(se),!I)if(t(h)!==null)I=!0,Ie(G);else{var pe=t(f);pe!==null&&te(K,pe.startTime-se)}}function G(se,pe){I=!1,k&&(k=!1,N(P),P=-1),T=!0;var R=w;try{for(H(pe),y=t(h);y!==null&&(!(y.expirationTime>pe)||se&&!L());){var z=y.callback;if(typeof z=="function"){y.callback=null,w=y.priorityLevel;var X=z(y.expirationTime<=pe);pe=n.unstable_now(),typeof X=="function"?y.callback=X:y===t(h)&&r(h),H(pe)}else r(h);y=t(h)}if(y!==null)var J=!0;else{var oe=t(f);oe!==null&&te(K,oe.startTime-pe),J=!1}return J}finally{y=null,w=R,T=!1}}var ne=!1,D=null,P=-1,A=5,V=-1;function L(){return!(n.unstable_now()-V<A)}function F(){if(D!==null){var se=n.unstable_now();V=se;var pe=!0;try{pe=D(!0,se)}finally{pe?O():(ne=!1,D=null)}}else ne=!1}var O;if(typeof U=="function")O=function(){U(F)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,he=we.port2;we.port1.onmessage=F,O=function(){he.postMessage(null)}}else O=function(){x(F,0)};function Ie(se){D=se,ne||(ne=!0,O())}function te(se,pe){P=x(function(){se(n.unstable_now())},pe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(se){se.callback=null},n.unstable_continueExecution=function(){I||T||(I=!0,Ie(G))},n.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<se?Math.floor(1e3/se):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(se){switch(w){case 1:case 2:case 3:var pe=3;break;default:pe=w}var R=w;w=pe;try{return se()}finally{w=R}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(se,pe){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var R=w;w=se;try{return pe()}finally{w=R}},n.unstable_scheduleCallback=function(se,pe,R){var z=n.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?z+R:z):R=z,se){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=R+X,se={id:m++,callback:pe,priorityLevel:se,startTime:R,expirationTime:X,sortIndex:-1},R>z?(se.sortIndex=R,e(f,se),t(h)===null&&se===t(f)&&(k?(N(P),P=-1):k=!0,te(K,R-z))):(se.sortIndex=X,e(h,se),I||T||(I=!0,Ie(G))),se},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(se){var pe=w;return function(){var R=w;w=pe;try{return se.apply(this,arguments)}finally{w=R}}}}(Km)),Km}var PE;function dM(){return PE||(PE=1,Gm.exports=hM()),Gm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CE;function fM(){if(CE)return In;CE=1;var n=hy(),e=dM();function t(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(s,a){l(s,a),l(s+"Capture",a)}function l(s,a){for(i[s]=a,s=0;s<a.length;s++)r.add(a[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function w(s){return h.call(y,s)?!0:h.call(m,s)?!1:f.test(s)?y[s]=!0:(m[s]=!0,!1)}function T(s,a,u,p){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function I(s,a,u,p){if(a===null||typeof a>"u"||T(s,a,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function k(s,a,u,p,g,v,S){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=p,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=s,this.type=a,this.sanitizeURL=v,this.removeEmptyString=S}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){x[s]=new k(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];x[a]=new k(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){x[s]=new k(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){x[s]=new k(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){x[s]=new k(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){x[s]=new k(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){x[s]=new k(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){x[s]=new k(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){x[s]=new k(s,5,!1,s.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function U(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(N,U);x[a]=new k(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(N,U);x[a]=new k(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(N,U);x[a]=new k(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){x[s]=new k(s,1,!1,s.toLowerCase(),null,!1,!1)}),x.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){x[s]=new k(s,1,!1,s.toLowerCase(),null,!0,!0)});function H(s,a,u,p){var g=x.hasOwnProperty(a)?x[a]:null;(g!==null?g.type!==0:p||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(I(a,u,g,p)&&(u=null),p||g===null?w(a)&&(u===null?s.removeAttribute(a):s.setAttribute(a,""+u)):g.mustUseProperty?s[g.propertyName]=u===null?g.type===3?!1:"":u:(a=g.attributeName,p=g.attributeNamespace,u===null?s.removeAttribute(a):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,p?s.setAttributeNS(p,a,u):s.setAttribute(a,u))))}var K=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G=Symbol.for("react.element"),ne=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),L=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),we=Symbol.for("react.suspense_list"),he=Symbol.for("react.memo"),Ie=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),se=Symbol.iterator;function pe(s){return s===null||typeof s!="object"?null:(s=se&&s[se]||s["@@iterator"],typeof s=="function"?s:null)}var R=Object.assign,z;function X(s){if(z===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);z=a&&a[1]||""}return`
`+z+s}var J=!1;function oe(s,a){if(!s||J)return"";J=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(Q){var p=Q}Reflect.construct(s,[],a)}else{try{a.call()}catch(Q){p=Q}s.call(a.prototype)}else{try{throw Error()}catch(Q){p=Q}s()}}catch(Q){if(Q&&p&&typeof Q.stack=="string"){for(var g=Q.stack.split(`
`),v=p.stack.split(`
`),S=g.length-1,M=v.length-1;1<=S&&0<=M&&g[S]!==v[M];)M--;for(;1<=S&&0<=M;S--,M--)if(g[S]!==v[M]){if(S!==1||M!==1)do if(S--,M--,0>M||g[S]!==v[M]){var j=`
`+g[S].replace(" at new "," at ");return s.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",s.displayName)),j}while(1<=S&&0<=M);break}}}finally{J=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?X(s):""}function ye(s){switch(s.tag){case 5:return X(s.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return s=oe(s.type,!1),s;case 11:return s=oe(s.type.render,!1),s;case 1:return s=oe(s.type,!0),s;default:return""}}function xe(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case D:return"Fragment";case ne:return"Portal";case A:return"Profiler";case P:return"StrictMode";case O:return"Suspense";case we:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case L:return(s.displayName||"Context")+".Consumer";case V:return(s._context.displayName||"Context")+".Provider";case F:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case he:return a=s.displayName||null,a!==null?a:xe(s.type)||"Memo";case Ie:a=s._payload,s=s._init;try{return xe(s(a))}catch{}}return null}function Se(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xe(a);case 8:return a===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Re(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ke(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function st(s){var a=Ke(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),p=""+s[a];if(!s.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,v=u.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return g.call(this)},set:function(S){p=""+S,v.call(this,S)}}),Object.defineProperty(s,a,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(S){p=""+S},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function tt(s){s._valueTracker||(s._valueTracker=st(s))}function At(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),p="";return s&&(p=Ke(s)?s.checked?"true":"false":s.value),s=p,s!==u?(a.setValue(s),!0):!1}function Gn(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function ui(s,a){var u=a.checked;return R({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function Bi(s,a){var u=a.defaultValue==null?"":a.defaultValue,p=a.checked!=null?a.checked:a.defaultChecked;u=Re(a.value!=null?a.value:u),s._wrapperState={initialChecked:p,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Hi(s,a){a=a.checked,a!=null&&H(s,"checked",a,!1)}function hi(s,a){Hi(s,a);var u=Re(a.value),p=a.type;if(u!=null)p==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(p==="submit"||p==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?Wi(s,a.type,u):a.hasOwnProperty("defaultValue")&&Wi(s,a.type,Re(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function ta(s,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var p=a.type;if(!(p!=="submit"&&p!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,u||a===s.value||(s.value=a),s.defaultValue=a}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function Wi(s,a,u){(a!=="number"||Gn(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var Nn=Array.isArray;function di(s,a,u,p){if(s=s.options,a){a={};for(var g=0;g<u.length;g++)a["$"+u[g]]=!0;for(u=0;u<s.length;u++)g=a.hasOwnProperty("$"+s[u].value),s[u].selected!==g&&(s[u].selected=g),g&&p&&(s[u].defaultSelected=!0)}else{for(u=""+Re(u),a=null,g=0;g<s.length;g++){if(s[g].value===u){s[g].selected=!0,p&&(s[g].defaultSelected=!0);return}a!==null||s[g].disabled||(a=s[g])}a!==null&&(a.selected=!0)}}function Cl(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return R({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function na(s,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(Nn(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}s._wrapperState={initialValue:Re(u)}}function ra(s,a){var u=Re(a.value),p=Re(a.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),a.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),p!=null&&(s.defaultValue=""+p)}function Al(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function Lt(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vt(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?Lt(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var fi,Rl=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,p,g){MSApp.execUnsafeLocalFunction(function(){return s(a,u,p,g)})}:s}(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(fi=fi||document.createElement("div"),fi.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=fi.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function $i(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var Ks={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qs=["Webkit","ms","Moz","O"];Object.keys(Ks).forEach(function(s){Qs.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),Ks[a]=Ks[s]})});function Dl(s,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||Ks.hasOwnProperty(s)&&Ks[s]?(""+a).trim():a+"px"}function Ol(s,a){s=s.style;for(var u in a)if(a.hasOwnProperty(u)){var p=u.indexOf("--")===0,g=Dl(u,a[u],p);u==="float"&&(u="cssFloat"),p?s.setProperty(u,g):s[u]=g}}var Ml=R({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nl(s,a){if(a){if(Ml[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Ll(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xs=null;function ia(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var sa=null,Kn=null,Nr=null;function oa(s){if(s=oc(s)){if(typeof sa!="function")throw Error(t(280));var a=s.stateNode;a&&(a=_h(a),sa(s.stateNode,s.type,a))}}function Lr(s){Kn?Nr?Nr.push(s):Nr=[s]:Kn=s}function Vl(){if(Kn){var s=Kn,a=Nr;if(Nr=Kn=null,oa(s),a)for(s=0;s<a.length;s++)oa(a[s])}}function Js(s,a){return s(a)}function Fl(){}var pi=!1;function jl(s,a,u){if(pi)return s(a,u);pi=!0;try{return Js(s,a,u)}finally{pi=!1,(Kn!==null||Nr!==null)&&(Fl(),Vl())}}function Et(s,a){var u=s.stateNode;if(u===null)return null;var p=_h(u);if(p===null)return null;u=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var aa=!1;if(c)try{var ur={};Object.defineProperty(ur,"passive",{get:function(){aa=!0}}),window.addEventListener("test",ur,ur),window.removeEventListener("test",ur,ur)}catch{aa=!1}function Zs(s,a,u,p,g,v,S,M,j){var Q=Array.prototype.slice.call(arguments,3);try{a.apply(u,Q)}catch(le){this.onError(le)}}var eo=!1,la=null,hr=!1,Ul=null,op={onError:function(s){eo=!0,la=s}};function ca(s,a,u,p,g,v,S,M,j){eo=!1,la=null,Zs.apply(op,arguments)}function Hu(s,a,u,p,g,v,S,M,j){if(ca.apply(this,arguments),eo){if(eo){var Q=la;eo=!1,la=null}else throw Error(t(198));hr||(hr=!0,Ul=Q)}}function dr(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function to(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function fr(s){if(dr(s)!==s)throw Error(t(188))}function Wu(s){var a=s.alternate;if(!a){if(a=dr(s),a===null)throw Error(t(188));return a!==s?null:s}for(var u=s,p=a;;){var g=u.return;if(g===null)break;var v=g.alternate;if(v===null){if(p=g.return,p!==null){u=p;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===u)return fr(g),s;if(v===p)return fr(g),a;v=v.sibling}throw Error(t(188))}if(u.return!==p.return)u=g,p=v;else{for(var S=!1,M=g.child;M;){if(M===u){S=!0,u=g,p=v;break}if(M===p){S=!0,p=g,u=v;break}M=M.sibling}if(!S){for(M=v.child;M;){if(M===u){S=!0,u=v,p=g;break}if(M===p){S=!0,p=v,u=g;break}M=M.sibling}if(!S)throw Error(t(189))}}if(u.alternate!==p)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?s:a}function zl(s){return s=Wu(s),s!==null?ua(s):null}function ua(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=ua(s);if(a!==null)return a;s=s.sibling}return null}var ha=e.unstable_scheduleCallback,Bl=e.unstable_cancelCallback,$u=e.unstable_shouldYield,ap=e.unstable_requestPaint,nt=e.unstable_now,qu=e.unstable_getCurrentPriorityLevel,no=e.unstable_ImmediatePriority,qi=e.unstable_UserBlockingPriority,Qn=e.unstable_NormalPriority,Hl=e.unstable_LowPriority,Yu=e.unstable_IdlePriority,ro=null,Ln=null;function Gu(s){if(Ln&&typeof Ln.onCommitFiberRoot=="function")try{Ln.onCommitFiberRoot(ro,s,void 0,(s.current.flags&128)===128)}catch{}}var pn=Math.clz32?Math.clz32:Qu,Wl=Math.log,Ku=Math.LN2;function Qu(s){return s>>>=0,s===0?32:31-(Wl(s)/Ku|0)|0}var da=64,fa=4194304;function Yi(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function io(s,a){var u=s.pendingLanes;if(u===0)return 0;var p=0,g=s.suspendedLanes,v=s.pingedLanes,S=u&268435455;if(S!==0){var M=S&~g;M!==0?p=Yi(M):(v&=S,v!==0&&(p=Yi(v)))}else S=u&~g,S!==0?p=Yi(S):v!==0&&(p=Yi(v));if(p===0)return 0;if(a!==0&&a!==p&&(a&g)===0&&(g=p&-p,v=a&-a,g>=v||g===16&&(v&4194240)!==0))return a;if((p&4)!==0&&(p|=u&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=p;0<a;)u=31-pn(a),g=1<<u,p|=s[u],a&=~g;return p}function lp(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mi(s,a){for(var u=s.suspendedLanes,p=s.pingedLanes,g=s.expirationTimes,v=s.pendingLanes;0<v;){var S=31-pn(v),M=1<<S,j=g[S];j===-1?((M&u)===0||(M&p)!==0)&&(g[S]=lp(M,a)):j<=a&&(s.expiredLanes|=M),v&=~M}}function Vn(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function so(){var s=da;return da<<=1,(da&4194240)===0&&(da=64),s}function Gi(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function Ki(s,a,u){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-pn(a),s[a]=u}function et(s,a){var u=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var p=s.eventTimes;for(s=s.expirationTimes;0<u;){var g=31-pn(u),v=1<<g;a[g]=0,p[g]=-1,s[g]=-1,u&=~v}}function Qi(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var p=31-pn(u),g=1<<p;g&a|s[p]&a&&(s[p]|=a),u&=~g}}var ze=0;function Xi(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Xu,pa,Ju,Zu,eh,$l=!1,Vr=[],Gt=null,pr=null,mr=null,Ji=new Map,Xn=new Map,Fr=[],cp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function th(s,a){switch(s){case"focusin":case"focusout":Gt=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":Ji.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xn.delete(a.pointerId)}}function vn(s,a,u,p,g,v){return s===null||s.nativeEvent!==v?(s={blockedOn:a,domEventName:u,eventSystemFlags:p,nativeEvent:v,targetContainers:[g]},a!==null&&(a=oc(a),a!==null&&pa(a)),s):(s.eventSystemFlags|=p,a=s.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),s)}function up(s,a,u,p,g){switch(a){case"focusin":return Gt=vn(Gt,s,a,u,p,g),!0;case"dragenter":return pr=vn(pr,s,a,u,p,g),!0;case"mouseover":return mr=vn(mr,s,a,u,p,g),!0;case"pointerover":var v=g.pointerId;return Ji.set(v,vn(Ji.get(v)||null,s,a,u,p,g)),!0;case"gotpointercapture":return v=g.pointerId,Xn.set(v,vn(Xn.get(v)||null,s,a,u,p,g)),!0}return!1}function nh(s){var a=uo(s.target);if(a!==null){var u=dr(a);if(u!==null){if(a=u.tag,a===13){if(a=to(u),a!==null){s.blockedOn=a,eh(s.priority,function(){Ju(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function gi(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=ma(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var p=new u.constructor(u.type,u);Xs=p,u.target.dispatchEvent(p),Xs=null}else return a=oc(u),a!==null&&pa(a),s.blockedOn=u,!1;a.shift()}return!0}function oo(s,a,u){gi(s)&&u.delete(a)}function rh(){$l=!1,Gt!==null&&gi(Gt)&&(Gt=null),pr!==null&&gi(pr)&&(pr=null),mr!==null&&gi(mr)&&(mr=null),Ji.forEach(oo),Xn.forEach(oo)}function gr(s,a){s.blockedOn===a&&(s.blockedOn=null,$l||($l=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,rh)))}function yr(s){function a(g){return gr(g,s)}if(0<Vr.length){gr(Vr[0],s);for(var u=1;u<Vr.length;u++){var p=Vr[u];p.blockedOn===s&&(p.blockedOn=null)}}for(Gt!==null&&gr(Gt,s),pr!==null&&gr(pr,s),mr!==null&&gr(mr,s),Ji.forEach(a),Xn.forEach(a),u=0;u<Fr.length;u++)p=Fr[u],p.blockedOn===s&&(p.blockedOn=null);for(;0<Fr.length&&(u=Fr[0],u.blockedOn===null);)nh(u),u.blockedOn===null&&Fr.shift()}var yi=K.ReactCurrentBatchConfig,Zi=!0;function ht(s,a,u,p){var g=ze,v=yi.transition;yi.transition=null;try{ze=1,ql(s,a,u,p)}finally{ze=g,yi.transition=v}}function hp(s,a,u,p){var g=ze,v=yi.transition;yi.transition=null;try{ze=4,ql(s,a,u,p)}finally{ze=g,yi.transition=v}}function ql(s,a,u,p){if(Zi){var g=ma(s,a,u,p);if(g===null)xp(s,a,p,ao,u),th(s,p);else if(up(g,s,a,u,p))p.stopPropagation();else if(th(s,p),a&4&&-1<cp.indexOf(s)){for(;g!==null;){var v=oc(g);if(v!==null&&Xu(v),v=ma(s,a,u,p),v===null&&xp(s,a,p,ao,u),v===g)break;g=v}g!==null&&p.stopPropagation()}else xp(s,a,p,null,u)}}var ao=null;function ma(s,a,u,p){if(ao=null,s=ia(p),s=uo(s),s!==null)if(a=dr(s),a===null)s=null;else if(u=a.tag,u===13){if(s=to(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return ao=s,null}function Yl(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qu()){case no:return 1;case qi:return 4;case Qn:case Hl:return 16;case Yu:return 536870912;default:return 16}default:return 16}}var Fn=null,ga=null,wn=null;function Gl(){if(wn)return wn;var s,a=ga,u=a.length,p,g="value"in Fn?Fn.value:Fn.textContent,v=g.length;for(s=0;s<u&&a[s]===g[s];s++);var S=u-s;for(p=1;p<=S&&a[u-p]===g[v-p];p++);return wn=g.slice(s,1<p?1-p:void 0)}function ya(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function jr(){return!0}function Kl(){return!1}function Kt(s){function a(u,p,g,v,S){this._reactName=u,this._targetInst=g,this.type=p,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var M in s)s.hasOwnProperty(M)&&(u=s[M],this[M]=u?u(v):v[M]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?jr:Kl,this.isPropagationStopped=Kl,this}return R(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=jr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=jr)},persist:function(){},isPersistent:jr}),a}var _r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_a=Kt(_r),Ur=R({},_r,{view:0,detail:0}),dp=Kt(Ur),va,_i,es,lo=R({},Ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==es&&(es&&s.type==="mousemove"?(va=s.screenX-es.screenX,_i=s.screenY-es.screenY):_i=va=0,es=s),va)},movementY:function(s){return"movementY"in s?s.movementY:_i}}),wa=Kt(lo),Ql=R({},lo,{dataTransfer:0}),ih=Kt(Ql),Ea=R({},Ur,{relatedTarget:0}),xa=Kt(Ea),sh=R({},_r,{animationName:0,elapsedTime:0,pseudoElement:0}),vi=Kt(sh),oh=R({},_r,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ah=Kt(oh),lh=R({},_r,{data:0}),Xl=Kt(lh),ba={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ch={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uh(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=ch[s])?!!a[s]:!1}function zr(){return uh}var d=R({},Ur,{key:function(s){if(s.key){var a=ba[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=ya(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?mn[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zr,charCode:function(s){return s.type==="keypress"?ya(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ya(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),_=Kt(d),E=R({},lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),C=Kt(E),$=R({},Ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zr}),Z=Kt($),de=R({},_r,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xe=Kt(de),Ft=R({},lo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Be=Kt(Ft),Ht=[9,13,27,32],Rt=c&&"CompositionEvent"in window,Jn=null;c&&"documentMode"in document&&(Jn=document.documentMode);var jn=c&&"TextEvent"in window&&!Jn,co=c&&(!Rt||Jn&&8<Jn&&11>=Jn),Ta=" ",U_=!1;function z_(s,a){switch(s){case"keyup":return Ht.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function B_(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Sa=!1;function zI(s,a){switch(s){case"compositionend":return B_(a);case"keypress":return a.which!==32?null:(U_=!0,Ta);case"textInput":return s=a.data,s===Ta&&U_?null:s;default:return null}}function BI(s,a){if(Sa)return s==="compositionend"||!Rt&&z_(s,a)?(s=Gl(),wn=ga=Fn=null,Sa=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return co&&a.locale!=="ko"?null:a.data;default:return null}}var HI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function H_(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!HI[s.type]:a==="textarea"}function W_(s,a,u,p){Lr(p),a=mh(a,"onChange"),0<a.length&&(u=new _a("onChange","change",null,u,p),s.push({event:u,listeners:a}))}var Jl=null,Zl=null;function WI(s){l0(s,0)}function hh(s){var a=Aa(s);if(At(a))return s}function $I(s,a){if(s==="change")return a}var $_=!1;if(c){var fp;if(c){var pp="oninput"in document;if(!pp){var q_=document.createElement("div");q_.setAttribute("oninput","return;"),pp=typeof q_.oninput=="function"}fp=pp}else fp=!1;$_=fp&&(!document.documentMode||9<document.documentMode)}function Y_(){Jl&&(Jl.detachEvent("onpropertychange",G_),Zl=Jl=null)}function G_(s){if(s.propertyName==="value"&&hh(Zl)){var a=[];W_(a,Zl,s,ia(s)),jl(WI,a)}}function qI(s,a,u){s==="focusin"?(Y_(),Jl=a,Zl=u,Jl.attachEvent("onpropertychange",G_)):s==="focusout"&&Y_()}function YI(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return hh(Zl)}function GI(s,a){if(s==="click")return hh(a)}function KI(s,a){if(s==="input"||s==="change")return hh(a)}function QI(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var vr=typeof Object.is=="function"?Object.is:QI;function ec(s,a){if(vr(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),p=Object.keys(a);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var g=u[p];if(!h.call(a,g)||!vr(s[g],a[g]))return!1}return!0}function K_(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Q_(s,a){var u=K_(s);s=0;for(var p;u;){if(u.nodeType===3){if(p=s+u.textContent.length,s<=a&&p>=a)return{node:u,offset:a-s};s=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=K_(u)}}function X_(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?X_(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function J_(){for(var s=window,a=Gn();a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=Gn(s.document)}return a}function mp(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function XI(s){var a=J_(),u=s.focusedElem,p=s.selectionRange;if(a!==u&&u&&u.ownerDocument&&X_(u.ownerDocument.documentElement,u)){if(p!==null&&mp(u)){if(a=p.start,s=p.end,s===void 0&&(s=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(s,u.value.length);else if(s=(a=u.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var g=u.textContent.length,v=Math.min(p.start,g);p=p.end===void 0?v:Math.min(p.end,g),!s.extend&&v>p&&(g=p,p=v,v=g),g=Q_(u,v);var S=Q_(u,p);g&&S&&(s.rangeCount!==1||s.anchorNode!==g.node||s.anchorOffset!==g.offset||s.focusNode!==S.node||s.focusOffset!==S.offset)&&(a=a.createRange(),a.setStart(g.node,g.offset),s.removeAllRanges(),v>p?(s.addRange(a),s.extend(S.node,S.offset)):(a.setEnd(S.node,S.offset),s.addRange(a)))}}for(a=[],s=u;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)s=a[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var JI=c&&"documentMode"in document&&11>=document.documentMode,Ia=null,gp=null,tc=null,yp=!1;function Z_(s,a,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;yp||Ia==null||Ia!==Gn(p)||(p=Ia,"selectionStart"in p&&mp(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),tc&&ec(tc,p)||(tc=p,p=mh(gp,"onSelect"),0<p.length&&(a=new _a("onSelect","select",null,a,u),s.push({event:a,listeners:p}),a.target=Ia)))}function dh(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var ka={animationend:dh("Animation","AnimationEnd"),animationiteration:dh("Animation","AnimationIteration"),animationstart:dh("Animation","AnimationStart"),transitionend:dh("Transition","TransitionEnd")},_p={},e0={};c&&(e0=document.createElement("div").style,"AnimationEvent"in window||(delete ka.animationend.animation,delete ka.animationiteration.animation,delete ka.animationstart.animation),"TransitionEvent"in window||delete ka.transitionend.transition);function fh(s){if(_p[s])return _p[s];if(!ka[s])return s;var a=ka[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in e0)return _p[s]=a[u];return s}var t0=fh("animationend"),n0=fh("animationiteration"),r0=fh("animationstart"),i0=fh("transitionend"),s0=new Map,o0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ts(s,a){s0.set(s,a),o(a,[s])}for(var vp=0;vp<o0.length;vp++){var wp=o0[vp],ZI=wp.toLowerCase(),ek=wp[0].toUpperCase()+wp.slice(1);ts(ZI,"on"+ek)}ts(t0,"onAnimationEnd"),ts(n0,"onAnimationIteration"),ts(r0,"onAnimationStart"),ts("dblclick","onDoubleClick"),ts("focusin","onFocus"),ts("focusout","onBlur"),ts(i0,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tk=new Set("cancel close invalid load scroll toggle".split(" ").concat(nc));function a0(s,a,u){var p=s.type||"unknown-event";s.currentTarget=u,Hu(p,a,void 0,s),s.currentTarget=null}function l0(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var p=s[u],g=p.event;p=p.listeners;e:{var v=void 0;if(a)for(var S=p.length-1;0<=S;S--){var M=p[S],j=M.instance,Q=M.currentTarget;if(M=M.listener,j!==v&&g.isPropagationStopped())break e;a0(g,M,Q),v=j}else for(S=0;S<p.length;S++){if(M=p[S],j=M.instance,Q=M.currentTarget,M=M.listener,j!==v&&g.isPropagationStopped())break e;a0(g,M,Q),v=j}}}if(hr)throw s=Ul,hr=!1,Ul=null,s}function ot(s,a){var u=a[Pp];u===void 0&&(u=a[Pp]=new Set);var p=s+"__bubble";u.has(p)||(c0(a,s,2,!1),u.add(p))}function Ep(s,a,u){var p=0;a&&(p|=4),c0(u,s,p,a)}var ph="_reactListening"+Math.random().toString(36).slice(2);function rc(s){if(!s[ph]){s[ph]=!0,r.forEach(function(u){u!=="selectionchange"&&(tk.has(u)||Ep(u,!1,s),Ep(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[ph]||(a[ph]=!0,Ep("selectionchange",!1,a))}}function c0(s,a,u,p){switch(Yl(a)){case 1:var g=ht;break;case 4:g=hp;break;default:g=ql}u=g.bind(null,a,u,s),g=void 0,!aa||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),p?g!==void 0?s.addEventListener(a,u,{capture:!0,passive:g}):s.addEventListener(a,u,!0):g!==void 0?s.addEventListener(a,u,{passive:g}):s.addEventListener(a,u,!1)}function xp(s,a,u,p,g){var v=p;if((a&1)===0&&(a&2)===0&&p!==null)e:for(;;){if(p===null)return;var S=p.tag;if(S===3||S===4){var M=p.stateNode.containerInfo;if(M===g||M.nodeType===8&&M.parentNode===g)break;if(S===4)for(S=p.return;S!==null;){var j=S.tag;if((j===3||j===4)&&(j=S.stateNode.containerInfo,j===g||j.nodeType===8&&j.parentNode===g))return;S=S.return}for(;M!==null;){if(S=uo(M),S===null)return;if(j=S.tag,j===5||j===6){p=v=S;continue e}M=M.parentNode}}p=p.return}jl(function(){var Q=v,le=ia(u),ce=[];e:{var ae=s0.get(s);if(ae!==void 0){var me=_a,ve=s;switch(s){case"keypress":if(ya(u)===0)break e;case"keydown":case"keyup":me=_;break;case"focusin":ve="focus",me=xa;break;case"focusout":ve="blur",me=xa;break;case"beforeblur":case"afterblur":me=xa;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=wa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=ih;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=Z;break;case t0:case n0:case r0:me=vi;break;case i0:me=Xe;break;case"scroll":me=dp;break;case"wheel":me=Be;break;case"copy":case"cut":case"paste":me=ah;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=C}var Ee=(a&4)!==0,xt=!Ee&&s==="scroll",q=Ee?ae!==null?ae+"Capture":null:ae;Ee=[];for(var B=Q,Y;B!==null;){Y=B;var ue=Y.stateNode;if(Y.tag===5&&ue!==null&&(Y=ue,q!==null&&(ue=Et(B,q),ue!=null&&Ee.push(ic(B,ue,Y)))),xt)break;B=B.return}0<Ee.length&&(ae=new me(ae,ve,null,u,le),ce.push({event:ae,listeners:Ee}))}}if((a&7)===0){e:{if(ae=s==="mouseover"||s==="pointerover",me=s==="mouseout"||s==="pointerout",ae&&u!==Xs&&(ve=u.relatedTarget||u.fromElement)&&(uo(ve)||ve[wi]))break e;if((me||ae)&&(ae=le.window===le?le:(ae=le.ownerDocument)?ae.defaultView||ae.parentWindow:window,me?(ve=u.relatedTarget||u.toElement,me=Q,ve=ve?uo(ve):null,ve!==null&&(xt=dr(ve),ve!==xt||ve.tag!==5&&ve.tag!==6)&&(ve=null)):(me=null,ve=Q),me!==ve)){if(Ee=wa,ue="onMouseLeave",q="onMouseEnter",B="mouse",(s==="pointerout"||s==="pointerover")&&(Ee=C,ue="onPointerLeave",q="onPointerEnter",B="pointer"),xt=me==null?ae:Aa(me),Y=ve==null?ae:Aa(ve),ae=new Ee(ue,B+"leave",me,u,le),ae.target=xt,ae.relatedTarget=Y,ue=null,uo(le)===Q&&(Ee=new Ee(q,B+"enter",ve,u,le),Ee.target=Y,Ee.relatedTarget=xt,ue=Ee),xt=ue,me&&ve)t:{for(Ee=me,q=ve,B=0,Y=Ee;Y;Y=Pa(Y))B++;for(Y=0,ue=q;ue;ue=Pa(ue))Y++;for(;0<B-Y;)Ee=Pa(Ee),B--;for(;0<Y-B;)q=Pa(q),Y--;for(;B--;){if(Ee===q||q!==null&&Ee===q.alternate)break t;Ee=Pa(Ee),q=Pa(q)}Ee=null}else Ee=null;me!==null&&u0(ce,ae,me,Ee,!1),ve!==null&&xt!==null&&u0(ce,xt,ve,Ee,!0)}}e:{if(ae=Q?Aa(Q):window,me=ae.nodeName&&ae.nodeName.toLowerCase(),me==="select"||me==="input"&&ae.type==="file")var be=$I;else if(H_(ae))if($_)be=KI;else{be=YI;var ke=qI}else(me=ae.nodeName)&&me.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(be=GI);if(be&&(be=be(s,Q))){W_(ce,be,u,le);break e}ke&&ke(s,ae,Q),s==="focusout"&&(ke=ae._wrapperState)&&ke.controlled&&ae.type==="number"&&Wi(ae,"number",ae.value)}switch(ke=Q?Aa(Q):window,s){case"focusin":(H_(ke)||ke.contentEditable==="true")&&(Ia=ke,gp=Q,tc=null);break;case"focusout":tc=gp=Ia=null;break;case"mousedown":yp=!0;break;case"contextmenu":case"mouseup":case"dragend":yp=!1,Z_(ce,u,le);break;case"selectionchange":if(JI)break;case"keydown":case"keyup":Z_(ce,u,le)}var Pe;if(Rt)e:{switch(s){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else Sa?z_(s,u)&&(De="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(De="onCompositionStart");De&&(co&&u.locale!=="ko"&&(Sa||De!=="onCompositionStart"?De==="onCompositionEnd"&&Sa&&(Pe=Gl()):(Fn=le,ga="value"in Fn?Fn.value:Fn.textContent,Sa=!0)),ke=mh(Q,De),0<ke.length&&(De=new Xl(De,s,null,u,le),ce.push({event:De,listeners:ke}),Pe?De.data=Pe:(Pe=B_(u),Pe!==null&&(De.data=Pe)))),(Pe=jn?zI(s,u):BI(s,u))&&(Q=mh(Q,"onBeforeInput"),0<Q.length&&(le=new Xl("onBeforeInput","beforeinput",null,u,le),ce.push({event:le,listeners:Q}),le.data=Pe))}l0(ce,a)})}function ic(s,a,u){return{instance:s,listener:a,currentTarget:u}}function mh(s,a){for(var u=a+"Capture",p=[];s!==null;){var g=s,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=Et(s,u),v!=null&&p.unshift(ic(s,v,g)),v=Et(s,a),v!=null&&p.push(ic(s,v,g))),s=s.return}return p}function Pa(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function u0(s,a,u,p,g){for(var v=a._reactName,S=[];u!==null&&u!==p;){var M=u,j=M.alternate,Q=M.stateNode;if(j!==null&&j===p)break;M.tag===5&&Q!==null&&(M=Q,g?(j=Et(u,v),j!=null&&S.unshift(ic(u,j,M))):g||(j=Et(u,v),j!=null&&S.push(ic(u,j,M)))),u=u.return}S.length!==0&&s.push({event:a,listeners:S})}var nk=/\r\n?/g,rk=/\u0000|\uFFFD/g;function h0(s){return(typeof s=="string"?s:""+s).replace(nk,`
`).replace(rk,"")}function gh(s,a,u){if(a=h0(a),h0(s)!==a&&u)throw Error(t(425))}function yh(){}var bp=null,Tp=null;function Sp(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Ip=typeof setTimeout=="function"?setTimeout:void 0,ik=typeof clearTimeout=="function"?clearTimeout:void 0,d0=typeof Promise=="function"?Promise:void 0,sk=typeof queueMicrotask=="function"?queueMicrotask:typeof d0<"u"?function(s){return d0.resolve(null).then(s).catch(ok)}:Ip;function ok(s){setTimeout(function(){throw s})}function kp(s,a){var u=a,p=0;do{var g=u.nextSibling;if(s.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(p===0){s.removeChild(g),yr(a);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=g}while(u);yr(a)}function ns(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function f0(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return s;a--}else u==="/$"&&a++}s=s.previousSibling}return null}var Ca=Math.random().toString(36).slice(2),Br="__reactFiber$"+Ca,sc="__reactProps$"+Ca,wi="__reactContainer$"+Ca,Pp="__reactEvents$"+Ca,ak="__reactListeners$"+Ca,lk="__reactHandles$"+Ca;function uo(s){var a=s[Br];if(a)return a;for(var u=s.parentNode;u;){if(a=u[wi]||u[Br]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=f0(s);s!==null;){if(u=s[Br])return u;s=f0(s)}return a}s=u,u=s.parentNode}return null}function oc(s){return s=s[Br]||s[wi],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Aa(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function _h(s){return s[sc]||null}var Cp=[],Ra=-1;function rs(s){return{current:s}}function at(s){0>Ra||(s.current=Cp[Ra],Cp[Ra]=null,Ra--)}function rt(s,a){Ra++,Cp[Ra]=s.current,s.current=a}var is={},rn=rs(is),En=rs(!1),ho=is;function Da(s,a){var u=s.type.contextTypes;if(!u)return is;var p=s.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===a)return p.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in u)g[v]=a[v];return p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=g),g}function xn(s){return s=s.childContextTypes,s!=null}function vh(){at(En),at(rn)}function p0(s,a,u){if(rn.current!==is)throw Error(t(168));rt(rn,a),rt(En,u)}function m0(s,a,u){var p=s.stateNode;if(a=a.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var g in p)if(!(g in a))throw Error(t(108,Se(s)||"Unknown",g));return R({},u,p)}function wh(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||is,ho=rn.current,rt(rn,s),rt(En,En.current),!0}function g0(s,a,u){var p=s.stateNode;if(!p)throw Error(t(169));u?(s=m0(s,a,ho),p.__reactInternalMemoizedMergedChildContext=s,at(En),at(rn),rt(rn,s)):at(En),rt(En,u)}var Ei=null,Eh=!1,Ap=!1;function y0(s){Ei===null?Ei=[s]:Ei.push(s)}function ck(s){Eh=!0,y0(s)}function ss(){if(!Ap&&Ei!==null){Ap=!0;var s=0,a=ze;try{var u=Ei;for(ze=1;s<u.length;s++){var p=u[s];do p=p(!0);while(p!==null)}Ei=null,Eh=!1}catch(g){throw Ei!==null&&(Ei=Ei.slice(s+1)),ha(no,ss),g}finally{ze=a,Ap=!1}}return null}var Oa=[],Ma=0,xh=null,bh=0,Zn=[],er=0,fo=null,xi=1,bi="";function po(s,a){Oa[Ma++]=bh,Oa[Ma++]=xh,xh=s,bh=a}function _0(s,a,u){Zn[er++]=xi,Zn[er++]=bi,Zn[er++]=fo,fo=s;var p=xi;s=bi;var g=32-pn(p)-1;p&=~(1<<g),u+=1;var v=32-pn(a)+g;if(30<v){var S=g-g%5;v=(p&(1<<S)-1).toString(32),p>>=S,g-=S,xi=1<<32-pn(a)+g|u<<g|p,bi=v+s}else xi=1<<v|u<<g|p,bi=s}function Rp(s){s.return!==null&&(po(s,1),_0(s,1,0))}function Dp(s){for(;s===xh;)xh=Oa[--Ma],Oa[Ma]=null,bh=Oa[--Ma],Oa[Ma]=null;for(;s===fo;)fo=Zn[--er],Zn[er]=null,bi=Zn[--er],Zn[er]=null,xi=Zn[--er],Zn[er]=null}var Un=null,zn=null,dt=!1,wr=null;function v0(s,a){var u=ir(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=s,a=s.deletions,a===null?(s.deletions=[u],s.flags|=16):a.push(u)}function w0(s,a){switch(s.tag){case 5:var u=s.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,Un=s,zn=ns(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,Un=s,zn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=fo!==null?{id:xi,overflow:bi}:null,s.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=ir(18,null,null,0),u.stateNode=a,u.return=s,s.child=u,Un=s,zn=null,!0):!1;default:return!1}}function Op(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Mp(s){if(dt){var a=zn;if(a){var u=a;if(!w0(s,a)){if(Op(s))throw Error(t(418));a=ns(u.nextSibling);var p=Un;a&&w0(s,a)?v0(p,u):(s.flags=s.flags&-4097|2,dt=!1,Un=s)}}else{if(Op(s))throw Error(t(418));s.flags=s.flags&-4097|2,dt=!1,Un=s}}}function E0(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Un=s}function Th(s){if(s!==Un)return!1;if(!dt)return E0(s),dt=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!Sp(s.type,s.memoizedProps)),a&&(a=zn)){if(Op(s))throw x0(),Error(t(418));for(;a;)v0(s,a),a=ns(a.nextSibling)}if(E0(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(a===0){zn=ns(s.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}s=s.nextSibling}zn=null}}else zn=Un?ns(s.stateNode.nextSibling):null;return!0}function x0(){for(var s=zn;s;)s=ns(s.nextSibling)}function Na(){zn=Un=null,dt=!1}function Np(s){wr===null?wr=[s]:wr.push(s)}var uk=K.ReactCurrentBatchConfig;function Er(s,a){if(s&&s.defaultProps){a=R({},a),s=s.defaultProps;for(var u in s)a[u]===void 0&&(a[u]=s[u]);return a}return a}var Sh=rs(null),Ih=null,La=null,Lp=null;function Vp(){Lp=La=Ih=null}function Fp(s){var a=Sh.current;at(Sh),s._currentValue=a}function jp(s,a,u){for(;s!==null;){var p=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),s===u)break;s=s.return}}function Va(s,a){Ih=s,Lp=La=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&(bn=!0),s.firstContext=null)}function tr(s){var a=s._currentValue;if(Lp!==s)if(s={context:s,memoizedValue:a,next:null},La===null){if(Ih===null)throw Error(t(308));La=s,Ih.dependencies={lanes:0,firstContext:s}}else La=La.next=s;return a}var mo=null;function Up(s){mo===null?mo=[s]:mo.push(s)}function b0(s,a,u,p){var g=a.interleaved;return g===null?(u.next=u,Up(a)):(u.next=g.next,g.next=u),a.interleaved=u,Ti(s,p)}function Ti(s,a){s.lanes|=a;var u=s.alternate;for(u!==null&&(u.lanes|=a),u=s,s=s.return;s!==null;)s.childLanes|=a,u=s.alternate,u!==null&&(u.childLanes|=a),u=s,s=s.return;return u.tag===3?u.stateNode:null}var os=!1;function zp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function T0(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Si(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function as(s,a,u){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,(We&2)!==0){var g=p.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),p.pending=a,Ti(s,u)}return g=p.interleaved,g===null?(a.next=a,Up(p)):(a.next=g.next,g.next=a),p.interleaved=a,Ti(s,u)}function kh(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var p=a.lanes;p&=s.pendingLanes,u|=p,a.lanes=u,Qi(s,u)}}function S0(s,a){var u=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var g=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var S={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};v===null?g=v=S:v=v.next=S,u=u.next}while(u!==null);v===null?g=v=a:v=v.next=a}else g=v=a;u={baseState:p.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:p.shared,effects:p.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}function Ph(s,a,u,p){var g=s.updateQueue;os=!1;var v=g.firstBaseUpdate,S=g.lastBaseUpdate,M=g.shared.pending;if(M!==null){g.shared.pending=null;var j=M,Q=j.next;j.next=null,S===null?v=Q:S.next=Q,S=j;var le=s.alternate;le!==null&&(le=le.updateQueue,M=le.lastBaseUpdate,M!==S&&(M===null?le.firstBaseUpdate=Q:M.next=Q,le.lastBaseUpdate=j))}if(v!==null){var ce=g.baseState;S=0,le=Q=j=null,M=v;do{var ae=M.lane,me=M.eventTime;if((p&ae)===ae){le!==null&&(le=le.next={eventTime:me,lane:0,tag:M.tag,payload:M.payload,callback:M.callback,next:null});e:{var ve=s,Ee=M;switch(ae=a,me=u,Ee.tag){case 1:if(ve=Ee.payload,typeof ve=="function"){ce=ve.call(me,ce,ae);break e}ce=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Ee.payload,ae=typeof ve=="function"?ve.call(me,ce,ae):ve,ae==null)break e;ce=R({},ce,ae);break e;case 2:os=!0}}M.callback!==null&&M.lane!==0&&(s.flags|=64,ae=g.effects,ae===null?g.effects=[M]:ae.push(M))}else me={eventTime:me,lane:ae,tag:M.tag,payload:M.payload,callback:M.callback,next:null},le===null?(Q=le=me,j=ce):le=le.next=me,S|=ae;if(M=M.next,M===null){if(M=g.shared.pending,M===null)break;ae=M,M=ae.next,ae.next=null,g.lastBaseUpdate=ae,g.shared.pending=null}}while(!0);if(le===null&&(j=ce),g.baseState=j,g.firstBaseUpdate=Q,g.lastBaseUpdate=le,a=g.shared.interleaved,a!==null){g=a;do S|=g.lane,g=g.next;while(g!==a)}else v===null&&(g.shared.lanes=0);_o|=S,s.lanes=S,s.memoizedState=ce}}function I0(s,a,u){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var p=s[a],g=p.callback;if(g!==null){if(p.callback=null,p=u,typeof g!="function")throw Error(t(191,g));g.call(p)}}}var k0=new n.Component().refs;function Bp(s,a,u,p){a=s.memoizedState,u=u(p,a),u=u==null?a:R({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Ch={isMounted:function(s){return(s=s._reactInternals)?dr(s)===s:!1},enqueueSetState:function(s,a,u){s=s._reactInternals;var p=yn(),g=hs(s),v=Si(p,g);v.payload=a,u!=null&&(v.callback=u),a=as(s,v,g),a!==null&&(Tr(a,s,g,p),kh(a,s,g))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var p=yn(),g=hs(s),v=Si(p,g);v.tag=1,v.payload=a,u!=null&&(v.callback=u),a=as(s,v,g),a!==null&&(Tr(a,s,g,p),kh(a,s,g))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=yn(),p=hs(s),g=Si(u,p);g.tag=2,a!=null&&(g.callback=a),a=as(s,g,p),a!==null&&(Tr(a,s,p,u),kh(a,s,p))}};function P0(s,a,u,p,g,v,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,v,S):a.prototype&&a.prototype.isPureReactComponent?!ec(u,p)||!ec(g,v):!0}function C0(s,a,u){var p=!1,g=is,v=a.contextType;return typeof v=="object"&&v!==null?v=tr(v):(g=xn(a)?ho:rn.current,p=a.contextTypes,v=(p=p!=null)?Da(s,g):is),a=new a(u,v),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Ch,s.stateNode=a,a._reactInternals=s,p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=g,s.__reactInternalMemoizedMaskedChildContext=v),a}function A0(s,a,u,p){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,p),a.state!==s&&Ch.enqueueReplaceState(a,a.state,null)}function Hp(s,a,u,p){var g=s.stateNode;g.props=u,g.state=s.memoizedState,g.refs=k0,zp(s);var v=a.contextType;typeof v=="object"&&v!==null?g.context=tr(v):(v=xn(a)?ho:rn.current,g.context=Da(s,v)),g.state=s.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Bp(s,a,v,u),g.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(a=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),a!==g.state&&Ch.enqueueReplaceState(g,g.state,null),Ph(s,u,g,p),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308)}function ac(s,a,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var p=u.stateNode}if(!p)throw Error(t(147,s));var g=p,v=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===v?a.ref:(a=function(S){var M=g.refs;M===k0&&(M=g.refs={}),S===null?delete M[v]:M[v]=S},a._stringRef=v,a)}if(typeof s!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,s))}return s}function Ah(s,a){throw s=Object.prototype.toString.call(a),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function R0(s){var a=s._init;return a(s._payload)}function D0(s){function a(q,B){if(s){var Y=q.deletions;Y===null?(q.deletions=[B],q.flags|=16):Y.push(B)}}function u(q,B){if(!s)return null;for(;B!==null;)a(q,B),B=B.sibling;return null}function p(q,B){for(q=new Map;B!==null;)B.key!==null?q.set(B.key,B):q.set(B.index,B),B=B.sibling;return q}function g(q,B){return q=fs(q,B),q.index=0,q.sibling=null,q}function v(q,B,Y){return q.index=Y,s?(Y=q.alternate,Y!==null?(Y=Y.index,Y<B?(q.flags|=2,B):Y):(q.flags|=2,B)):(q.flags|=1048576,B)}function S(q){return s&&q.alternate===null&&(q.flags|=2),q}function M(q,B,Y,ue){return B===null||B.tag!==6?(B=Im(Y,q.mode,ue),B.return=q,B):(B=g(B,Y),B.return=q,B)}function j(q,B,Y,ue){var be=Y.type;return be===D?le(q,B,Y.props.children,ue,Y.key):B!==null&&(B.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===Ie&&R0(be)===B.type)?(ue=g(B,Y.props),ue.ref=ac(q,B,Y),ue.return=q,ue):(ue=Kh(Y.type,Y.key,Y.props,null,q.mode,ue),ue.ref=ac(q,B,Y),ue.return=q,ue)}function Q(q,B,Y,ue){return B===null||B.tag!==4||B.stateNode.containerInfo!==Y.containerInfo||B.stateNode.implementation!==Y.implementation?(B=km(Y,q.mode,ue),B.return=q,B):(B=g(B,Y.children||[]),B.return=q,B)}function le(q,B,Y,ue,be){return B===null||B.tag!==7?(B=xo(Y,q.mode,ue,be),B.return=q,B):(B=g(B,Y),B.return=q,B)}function ce(q,B,Y){if(typeof B=="string"&&B!==""||typeof B=="number")return B=Im(""+B,q.mode,Y),B.return=q,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case G:return Y=Kh(B.type,B.key,B.props,null,q.mode,Y),Y.ref=ac(q,null,B),Y.return=q,Y;case ne:return B=km(B,q.mode,Y),B.return=q,B;case Ie:var ue=B._init;return ce(q,ue(B._payload),Y)}if(Nn(B)||pe(B))return B=xo(B,q.mode,Y,null),B.return=q,B;Ah(q,B)}return null}function ae(q,B,Y,ue){var be=B!==null?B.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return be!==null?null:M(q,B,""+Y,ue);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case G:return Y.key===be?j(q,B,Y,ue):null;case ne:return Y.key===be?Q(q,B,Y,ue):null;case Ie:return be=Y._init,ae(q,B,be(Y._payload),ue)}if(Nn(Y)||pe(Y))return be!==null?null:le(q,B,Y,ue,null);Ah(q,Y)}return null}function me(q,B,Y,ue,be){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return q=q.get(Y)||null,M(B,q,""+ue,be);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case G:return q=q.get(ue.key===null?Y:ue.key)||null,j(B,q,ue,be);case ne:return q=q.get(ue.key===null?Y:ue.key)||null,Q(B,q,ue,be);case Ie:var ke=ue._init;return me(q,B,Y,ke(ue._payload),be)}if(Nn(ue)||pe(ue))return q=q.get(Y)||null,le(B,q,ue,be,null);Ah(B,ue)}return null}function ve(q,B,Y,ue){for(var be=null,ke=null,Pe=B,De=B=0,qt=null;Pe!==null&&De<Y.length;De++){Pe.index>De?(qt=Pe,Pe=null):qt=Pe.sibling;var qe=ae(q,Pe,Y[De],ue);if(qe===null){Pe===null&&(Pe=qt);break}s&&Pe&&qe.alternate===null&&a(q,Pe),B=v(qe,B,De),ke===null?be=qe:ke.sibling=qe,ke=qe,Pe=qt}if(De===Y.length)return u(q,Pe),dt&&po(q,De),be;if(Pe===null){for(;De<Y.length;De++)Pe=ce(q,Y[De],ue),Pe!==null&&(B=v(Pe,B,De),ke===null?be=Pe:ke.sibling=Pe,ke=Pe);return dt&&po(q,De),be}for(Pe=p(q,Pe);De<Y.length;De++)qt=me(Pe,q,De,Y[De],ue),qt!==null&&(s&&qt.alternate!==null&&Pe.delete(qt.key===null?De:qt.key),B=v(qt,B,De),ke===null?be=qt:ke.sibling=qt,ke=qt);return s&&Pe.forEach(function(ps){return a(q,ps)}),dt&&po(q,De),be}function Ee(q,B,Y,ue){var be=pe(Y);if(typeof be!="function")throw Error(t(150));if(Y=be.call(Y),Y==null)throw Error(t(151));for(var ke=be=null,Pe=B,De=B=0,qt=null,qe=Y.next();Pe!==null&&!qe.done;De++,qe=Y.next()){Pe.index>De?(qt=Pe,Pe=null):qt=Pe.sibling;var ps=ae(q,Pe,qe.value,ue);if(ps===null){Pe===null&&(Pe=qt);break}s&&Pe&&ps.alternate===null&&a(q,Pe),B=v(ps,B,De),ke===null?be=ps:ke.sibling=ps,ke=ps,Pe=qt}if(qe.done)return u(q,Pe),dt&&po(q,De),be;if(Pe===null){for(;!qe.done;De++,qe=Y.next())qe=ce(q,qe.value,ue),qe!==null&&(B=v(qe,B,De),ke===null?be=qe:ke.sibling=qe,ke=qe);return dt&&po(q,De),be}for(Pe=p(q,Pe);!qe.done;De++,qe=Y.next())qe=me(Pe,q,De,qe.value,ue),qe!==null&&(s&&qe.alternate!==null&&Pe.delete(qe.key===null?De:qe.key),B=v(qe,B,De),ke===null?be=qe:ke.sibling=qe,ke=qe);return s&&Pe.forEach(function(Hk){return a(q,Hk)}),dt&&po(q,De),be}function xt(q,B,Y,ue){if(typeof Y=="object"&&Y!==null&&Y.type===D&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case G:e:{for(var be=Y.key,ke=B;ke!==null;){if(ke.key===be){if(be=Y.type,be===D){if(ke.tag===7){u(q,ke.sibling),B=g(ke,Y.props.children),B.return=q,q=B;break e}}else if(ke.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===Ie&&R0(be)===ke.type){u(q,ke.sibling),B=g(ke,Y.props),B.ref=ac(q,ke,Y),B.return=q,q=B;break e}u(q,ke);break}else a(q,ke);ke=ke.sibling}Y.type===D?(B=xo(Y.props.children,q.mode,ue,Y.key),B.return=q,q=B):(ue=Kh(Y.type,Y.key,Y.props,null,q.mode,ue),ue.ref=ac(q,B,Y),ue.return=q,q=ue)}return S(q);case ne:e:{for(ke=Y.key;B!==null;){if(B.key===ke)if(B.tag===4&&B.stateNode.containerInfo===Y.containerInfo&&B.stateNode.implementation===Y.implementation){u(q,B.sibling),B=g(B,Y.children||[]),B.return=q,q=B;break e}else{u(q,B);break}else a(q,B);B=B.sibling}B=km(Y,q.mode,ue),B.return=q,q=B}return S(q);case Ie:return ke=Y._init,xt(q,B,ke(Y._payload),ue)}if(Nn(Y))return ve(q,B,Y,ue);if(pe(Y))return Ee(q,B,Y,ue);Ah(q,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,B!==null&&B.tag===6?(u(q,B.sibling),B=g(B,Y),B.return=q,q=B):(u(q,B),B=Im(Y,q.mode,ue),B.return=q,q=B),S(q)):u(q,B)}return xt}var Fa=D0(!0),O0=D0(!1),lc={},Hr=rs(lc),cc=rs(lc),uc=rs(lc);function go(s){if(s===lc)throw Error(t(174));return s}function Wp(s,a){switch(rt(uc,a),rt(cc,s),rt(Hr,lc),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Vt(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=Vt(a,s)}at(Hr),rt(Hr,a)}function ja(){at(Hr),at(cc),at(uc)}function M0(s){go(uc.current);var a=go(Hr.current),u=Vt(a,s.type);a!==u&&(rt(cc,s),rt(Hr,u))}function $p(s){cc.current===s&&(at(Hr),at(cc))}var ft=rs(0);function Rh(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var qp=[];function Yp(){for(var s=0;s<qp.length;s++)qp[s]._workInProgressVersionPrimary=null;qp.length=0}var Dh=K.ReactCurrentDispatcher,Gp=K.ReactCurrentBatchConfig,yo=0,pt=null,jt=null,Wt=null,Oh=!1,hc=!1,dc=0,hk=0;function sn(){throw Error(t(321))}function Kp(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!vr(s[u],a[u]))return!1;return!0}function Qp(s,a,u,p,g,v){if(yo=v,pt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Dh.current=s===null||s.memoizedState===null?mk:gk,s=u(p,g),hc){v=0;do{if(hc=!1,dc=0,25<=v)throw Error(t(301));v+=1,Wt=jt=null,a.updateQueue=null,Dh.current=yk,s=u(p,g)}while(hc)}if(Dh.current=Lh,a=jt!==null&&jt.next!==null,yo=0,Wt=jt=pt=null,Oh=!1,a)throw Error(t(300));return s}function Xp(){var s=dc!==0;return dc=0,s}function Wr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?pt.memoizedState=Wt=s:Wt=Wt.next=s,Wt}function nr(){if(jt===null){var s=pt.alternate;s=s!==null?s.memoizedState:null}else s=jt.next;var a=Wt===null?pt.memoizedState:Wt.next;if(a!==null)Wt=a,jt=s;else{if(s===null)throw Error(t(310));jt=s,s={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},Wt===null?pt.memoizedState=Wt=s:Wt=Wt.next=s}return Wt}function fc(s,a){return typeof a=="function"?a(s):a}function Jp(s){var a=nr(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var p=jt,g=p.baseQueue,v=u.pending;if(v!==null){if(g!==null){var S=g.next;g.next=v.next,v.next=S}p.baseQueue=g=v,u.pending=null}if(g!==null){v=g.next,p=p.baseState;var M=S=null,j=null,Q=v;do{var le=Q.lane;if((yo&le)===le)j!==null&&(j=j.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),p=Q.hasEagerState?Q.eagerState:s(p,Q.action);else{var ce={lane:le,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};j===null?(M=j=ce,S=p):j=j.next=ce,pt.lanes|=le,_o|=le}Q=Q.next}while(Q!==null&&Q!==v);j===null?S=p:j.next=M,vr(p,a.memoizedState)||(bn=!0),a.memoizedState=p,a.baseState=S,a.baseQueue=j,u.lastRenderedState=p}if(s=u.interleaved,s!==null){g=s;do v=g.lane,pt.lanes|=v,_o|=v,g=g.next;while(g!==s)}else g===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function Zp(s){var a=nr(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var p=u.dispatch,g=u.pending,v=a.memoizedState;if(g!==null){u.pending=null;var S=g=g.next;do v=s(v,S.action),S=S.next;while(S!==g);vr(v,a.memoizedState)||(bn=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),u.lastRenderedState=v}return[v,p]}function N0(){}function L0(s,a){var u=pt,p=nr(),g=a(),v=!vr(p.memoizedState,g);if(v&&(p.memoizedState=g,bn=!0),p=p.queue,em(j0.bind(null,u,p,s),[s]),p.getSnapshot!==a||v||Wt!==null&&Wt.memoizedState.tag&1){if(u.flags|=2048,pc(9,F0.bind(null,u,p,g,a),void 0,null),$t===null)throw Error(t(349));(yo&30)!==0||V0(u,a,g)}return g}function V0(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=pt.updateQueue,a===null?(a={lastEffect:null,stores:null},pt.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function F0(s,a,u,p){a.value=u,a.getSnapshot=p,U0(a)&&z0(s)}function j0(s,a,u){return u(function(){U0(a)&&z0(s)})}function U0(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!vr(s,u)}catch{return!0}}function z0(s){var a=Ti(s,1);a!==null&&Tr(a,s,1,-1)}function B0(s){var a=Wr();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fc,lastRenderedState:s},a.queue=s,s=s.dispatch=pk.bind(null,pt,s),[a.memoizedState,s]}function pc(s,a,u,p){return s={tag:s,create:a,destroy:u,deps:p,next:null},a=pt.updateQueue,a===null?(a={lastEffect:null,stores:null},pt.updateQueue=a,a.lastEffect=s.next=s):(u=a.lastEffect,u===null?a.lastEffect=s.next=s:(p=u.next,u.next=s,s.next=p,a.lastEffect=s)),s}function H0(){return nr().memoizedState}function Mh(s,a,u,p){var g=Wr();pt.flags|=s,g.memoizedState=pc(1|a,u,void 0,p===void 0?null:p)}function Nh(s,a,u,p){var g=nr();p=p===void 0?null:p;var v=void 0;if(jt!==null){var S=jt.memoizedState;if(v=S.destroy,p!==null&&Kp(p,S.deps)){g.memoizedState=pc(a,u,v,p);return}}pt.flags|=s,g.memoizedState=pc(1|a,u,v,p)}function W0(s,a){return Mh(8390656,8,s,a)}function em(s,a){return Nh(2048,8,s,a)}function $0(s,a){return Nh(4,2,s,a)}function q0(s,a){return Nh(4,4,s,a)}function Y0(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function G0(s,a,u){return u=u!=null?u.concat([s]):null,Nh(4,4,Y0.bind(null,a,s),u)}function tm(){}function K0(s,a){var u=nr();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&Kp(a,p[1])?p[0]:(u.memoizedState=[s,a],s)}function Q0(s,a){var u=nr();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&Kp(a,p[1])?p[0]:(s=s(),u.memoizedState=[s,a],s)}function X0(s,a,u){return(yo&21)===0?(s.baseState&&(s.baseState=!1,bn=!0),s.memoizedState=u):(vr(u,a)||(u=so(),pt.lanes|=u,_o|=u,s.baseState=!0),a)}function dk(s,a){var u=ze;ze=u!==0&&4>u?u:4,s(!0);var p=Gp.transition;Gp.transition={};try{s(!1),a()}finally{ze=u,Gp.transition=p}}function J0(){return nr().memoizedState}function fk(s,a,u){var p=hs(s);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},Z0(s))ev(a,u);else if(u=b0(s,a,u,p),u!==null){var g=yn();Tr(u,s,p,g),tv(u,a,p)}}function pk(s,a,u){var p=hs(s),g={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(Z0(s))ev(a,g);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var S=a.lastRenderedState,M=v(S,u);if(g.hasEagerState=!0,g.eagerState=M,vr(M,S)){var j=a.interleaved;j===null?(g.next=g,Up(a)):(g.next=j.next,j.next=g),a.interleaved=g;return}}catch{}finally{}u=b0(s,a,g,p),u!==null&&(g=yn(),Tr(u,s,p,g),tv(u,a,p))}}function Z0(s){var a=s.alternate;return s===pt||a!==null&&a===pt}function ev(s,a){hc=Oh=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function tv(s,a,u){if((u&4194240)!==0){var p=a.lanes;p&=s.pendingLanes,u|=p,a.lanes=u,Qi(s,u)}}var Lh={readContext:tr,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useInsertionEffect:sn,useLayoutEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useMutableSource:sn,useSyncExternalStore:sn,useId:sn,unstable_isNewReconciler:!1},mk={readContext:tr,useCallback:function(s,a){return Wr().memoizedState=[s,a===void 0?null:a],s},useContext:tr,useEffect:W0,useImperativeHandle:function(s,a,u){return u=u!=null?u.concat([s]):null,Mh(4194308,4,Y0.bind(null,a,s),u)},useLayoutEffect:function(s,a){return Mh(4194308,4,s,a)},useInsertionEffect:function(s,a){return Mh(4,2,s,a)},useMemo:function(s,a){var u=Wr();return a=a===void 0?null:a,s=s(),u.memoizedState=[s,a],s},useReducer:function(s,a,u){var p=Wr();return a=u!==void 0?u(a):a,p.memoizedState=p.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},p.queue=s,s=s.dispatch=fk.bind(null,pt,s),[p.memoizedState,s]},useRef:function(s){var a=Wr();return s={current:s},a.memoizedState=s},useState:B0,useDebugValue:tm,useDeferredValue:function(s){return Wr().memoizedState=s},useTransition:function(){var s=B0(!1),a=s[0];return s=dk.bind(null,s[1]),Wr().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,u){var p=pt,g=Wr();if(dt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),$t===null)throw Error(t(349));(yo&30)!==0||V0(p,a,u)}g.memoizedState=u;var v={value:u,getSnapshot:a};return g.queue=v,W0(j0.bind(null,p,v,s),[s]),p.flags|=2048,pc(9,F0.bind(null,p,v,u,a),void 0,null),u},useId:function(){var s=Wr(),a=$t.identifierPrefix;if(dt){var u=bi,p=xi;u=(p&~(1<<32-pn(p)-1)).toString(32)+u,a=":"+a+"R"+u,u=dc++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=hk++,a=":"+a+"r"+u.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},gk={readContext:tr,useCallback:K0,useContext:tr,useEffect:em,useImperativeHandle:G0,useInsertionEffect:$0,useLayoutEffect:q0,useMemo:Q0,useReducer:Jp,useRef:H0,useState:function(){return Jp(fc)},useDebugValue:tm,useDeferredValue:function(s){var a=nr();return X0(a,jt.memoizedState,s)},useTransition:function(){var s=Jp(fc)[0],a=nr().memoizedState;return[s,a]},useMutableSource:N0,useSyncExternalStore:L0,useId:J0,unstable_isNewReconciler:!1},yk={readContext:tr,useCallback:K0,useContext:tr,useEffect:em,useImperativeHandle:G0,useInsertionEffect:$0,useLayoutEffect:q0,useMemo:Q0,useReducer:Zp,useRef:H0,useState:function(){return Zp(fc)},useDebugValue:tm,useDeferredValue:function(s){var a=nr();return jt===null?a.memoizedState=s:X0(a,jt.memoizedState,s)},useTransition:function(){var s=Zp(fc)[0],a=nr().memoizedState;return[s,a]},useMutableSource:N0,useSyncExternalStore:L0,useId:J0,unstable_isNewReconciler:!1};function Ua(s,a){try{var u="",p=a;do u+=ye(p),p=p.return;while(p);var g=u}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:s,source:a,stack:g,digest:null}}function nm(s,a,u){return{value:s,source:null,stack:u??null,digest:a??null}}function rm(s,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var _k=typeof WeakMap=="function"?WeakMap:Map;function nv(s,a,u){u=Si(-1,u),u.tag=3,u.payload={element:null};var p=a.value;return u.callback=function(){Hh||(Hh=!0,_m=p),rm(s,a)},u}function rv(s,a,u){u=Si(-1,u),u.tag=3;var p=s.type.getDerivedStateFromError;if(typeof p=="function"){var g=a.value;u.payload=function(){return p(g)},u.callback=function(){rm(s,a)}}var v=s.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(u.callback=function(){rm(s,a),typeof p!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var S=a.stack;this.componentDidCatch(a.value,{componentStack:S!==null?S:""})}),u}function iv(s,a,u){var p=s.pingCache;if(p===null){p=s.pingCache=new _k;var g=new Set;p.set(a,g)}else g=p.get(a),g===void 0&&(g=new Set,p.set(a,g));g.has(u)||(g.add(u),s=Dk.bind(null,s,a,u),a.then(s,s))}function sv(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function ov(s,a,u,p,g){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=Si(-1,1),a.tag=2,as(u,a,1))),u.lanes|=1),s):(s.flags|=65536,s.lanes=g,s)}var vk=K.ReactCurrentOwner,bn=!1;function gn(s,a,u,p){a.child=s===null?O0(a,null,u,p):Fa(a,s.child,u,p)}function av(s,a,u,p,g){u=u.render;var v=a.ref;return Va(a,g),p=Qp(s,a,u,p,v,g),u=Xp(),s!==null&&!bn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~g,Ii(s,a,g)):(dt&&u&&Rp(a),a.flags|=1,gn(s,a,p,g),a.child)}function lv(s,a,u,p,g){if(s===null){var v=u.type;return typeof v=="function"&&!Sm(v)&&v.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=v,cv(s,a,v,p,g)):(s=Kh(u.type,null,p,a,a.mode,g),s.ref=a.ref,s.return=a,a.child=s)}if(v=s.child,(s.lanes&g)===0){var S=v.memoizedProps;if(u=u.compare,u=u!==null?u:ec,u(S,p)&&s.ref===a.ref)return Ii(s,a,g)}return a.flags|=1,s=fs(v,p),s.ref=a.ref,s.return=a,a.child=s}function cv(s,a,u,p,g){if(s!==null){var v=s.memoizedProps;if(ec(v,p)&&s.ref===a.ref)if(bn=!1,a.pendingProps=p=v,(s.lanes&g)!==0)(s.flags&131072)!==0&&(bn=!0);else return a.lanes=s.lanes,Ii(s,a,g)}return im(s,a,u,p,g)}function uv(s,a,u){var p=a.pendingProps,g=p.children,v=s!==null?s.memoizedState:null;if(p.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(Ba,Bn),Bn|=u;else{if((u&1073741824)===0)return s=v!==null?v.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,rt(Ba,Bn),Bn|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=v!==null?v.baseLanes:u,rt(Ba,Bn),Bn|=p}else v!==null?(p=v.baseLanes|u,a.memoizedState=null):p=u,rt(Ba,Bn),Bn|=p;return gn(s,a,g,u),a.child}function hv(s,a){var u=a.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function im(s,a,u,p,g){var v=xn(u)?ho:rn.current;return v=Da(a,v),Va(a,g),u=Qp(s,a,u,p,v,g),p=Xp(),s!==null&&!bn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~g,Ii(s,a,g)):(dt&&p&&Rp(a),a.flags|=1,gn(s,a,u,g),a.child)}function dv(s,a,u,p,g){if(xn(u)){var v=!0;wh(a)}else v=!1;if(Va(a,g),a.stateNode===null)Fh(s,a),C0(a,u,p),Hp(a,u,p,g),p=!0;else if(s===null){var S=a.stateNode,M=a.memoizedProps;S.props=M;var j=S.context,Q=u.contextType;typeof Q=="object"&&Q!==null?Q=tr(Q):(Q=xn(u)?ho:rn.current,Q=Da(a,Q));var le=u.getDerivedStateFromProps,ce=typeof le=="function"||typeof S.getSnapshotBeforeUpdate=="function";ce||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(M!==p||j!==Q)&&A0(a,S,p,Q),os=!1;var ae=a.memoizedState;S.state=ae,Ph(a,p,S,g),j=a.memoizedState,M!==p||ae!==j||En.current||os?(typeof le=="function"&&(Bp(a,u,le,p),j=a.memoizedState),(M=os||P0(a,u,M,p,ae,j,Q))?(ce||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(a.flags|=4194308)):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=j),S.props=p,S.state=j,S.context=Q,p=M):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{S=a.stateNode,T0(s,a),M=a.memoizedProps,Q=a.type===a.elementType?M:Er(a.type,M),S.props=Q,ce=a.pendingProps,ae=S.context,j=u.contextType,typeof j=="object"&&j!==null?j=tr(j):(j=xn(u)?ho:rn.current,j=Da(a,j));var me=u.getDerivedStateFromProps;(le=typeof me=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(M!==ce||ae!==j)&&A0(a,S,p,j),os=!1,ae=a.memoizedState,S.state=ae,Ph(a,p,S,g);var ve=a.memoizedState;M!==ce||ae!==ve||En.current||os?(typeof me=="function"&&(Bp(a,u,me,p),ve=a.memoizedState),(Q=os||P0(a,u,Q,p,ae,ve,j)||!1)?(le||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(p,ve,j),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(p,ve,j)),typeof S.componentDidUpdate=="function"&&(a.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof S.componentDidUpdate!="function"||M===s.memoizedProps&&ae===s.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&ae===s.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=ve),S.props=p,S.state=ve,S.context=j,p=Q):(typeof S.componentDidUpdate!="function"||M===s.memoizedProps&&ae===s.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&ae===s.memoizedState||(a.flags|=1024),p=!1)}return sm(s,a,u,p,v,g)}function sm(s,a,u,p,g,v){hv(s,a);var S=(a.flags&128)!==0;if(!p&&!S)return g&&g0(a,u,!1),Ii(s,a,v);p=a.stateNode,vk.current=a;var M=S&&typeof u.getDerivedStateFromError!="function"?null:p.render();return a.flags|=1,s!==null&&S?(a.child=Fa(a,s.child,null,v),a.child=Fa(a,null,M,v)):gn(s,a,M,v),a.memoizedState=p.state,g&&g0(a,u,!0),a.child}function fv(s){var a=s.stateNode;a.pendingContext?p0(s,a.pendingContext,a.pendingContext!==a.context):a.context&&p0(s,a.context,!1),Wp(s,a.containerInfo)}function pv(s,a,u,p,g){return Na(),Np(g),a.flags|=256,gn(s,a,u,p),a.child}var om={dehydrated:null,treeContext:null,retryLane:0};function am(s){return{baseLanes:s,cachePool:null,transitions:null}}function mv(s,a,u){var p=a.pendingProps,g=ft.current,v=!1,S=(a.flags&128)!==0,M;if((M=S)||(M=s!==null&&s.memoizedState===null?!1:(g&2)!==0),M?(v=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(g|=1),rt(ft,g&1),s===null)return Mp(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(S=p.children,s=p.fallback,v?(p=a.mode,v=a.child,S={mode:"hidden",children:S},(p&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=S):v=Qh(S,p,0,null),s=xo(s,p,u,null),v.return=a,s.return=a,v.sibling=s,a.child=v,a.child.memoizedState=am(u),a.memoizedState=om,s):lm(a,S));if(g=s.memoizedState,g!==null&&(M=g.dehydrated,M!==null))return wk(s,a,S,p,M,g,u);if(v){v=p.fallback,S=a.mode,g=s.child,M=g.sibling;var j={mode:"hidden",children:p.children};return(S&1)===0&&a.child!==g?(p=a.child,p.childLanes=0,p.pendingProps=j,a.deletions=null):(p=fs(g,j),p.subtreeFlags=g.subtreeFlags&14680064),M!==null?v=fs(M,v):(v=xo(v,S,u,null),v.flags|=2),v.return=a,p.return=a,p.sibling=v,a.child=p,p=v,v=a.child,S=s.child.memoizedState,S=S===null?am(u):{baseLanes:S.baseLanes|u,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=s.childLanes&~u,a.memoizedState=om,p}return v=s.child,s=v.sibling,p=fs(v,{mode:"visible",children:p.children}),(a.mode&1)===0&&(p.lanes=u),p.return=a,p.sibling=null,s!==null&&(u=a.deletions,u===null?(a.deletions=[s],a.flags|=16):u.push(s)),a.child=p,a.memoizedState=null,p}function lm(s,a){return a=Qh({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function Vh(s,a,u,p){return p!==null&&Np(p),Fa(a,s.child,null,u),s=lm(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function wk(s,a,u,p,g,v,S){if(u)return a.flags&256?(a.flags&=-257,p=nm(Error(t(422))),Vh(s,a,S,p)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(v=p.fallback,g=a.mode,p=Qh({mode:"visible",children:p.children},g,0,null),v=xo(v,g,S,null),v.flags|=2,p.return=a,v.return=a,p.sibling=v,a.child=p,(a.mode&1)!==0&&Fa(a,s.child,null,S),a.child.memoizedState=am(S),a.memoizedState=om,v);if((a.mode&1)===0)return Vh(s,a,S,null);if(g.data==="$!"){if(p=g.nextSibling&&g.nextSibling.dataset,p)var M=p.dgst;return p=M,v=Error(t(419)),p=nm(v,p,void 0),Vh(s,a,S,p)}if(M=(S&s.childLanes)!==0,bn||M){if(p=$t,p!==null){switch(S&-S){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(p.suspendedLanes|S))!==0?0:g,g!==0&&g!==v.retryLane&&(v.retryLane=g,Ti(s,g),Tr(p,s,g,-1))}return Tm(),p=nm(Error(t(421))),Vh(s,a,S,p)}return g.data==="$?"?(a.flags|=128,a.child=s.child,a=Ok.bind(null,s),g._reactRetry=a,null):(s=v.treeContext,zn=ns(g.nextSibling),Un=a,dt=!0,wr=null,s!==null&&(Zn[er++]=xi,Zn[er++]=bi,Zn[er++]=fo,xi=s.id,bi=s.overflow,fo=a),a=lm(a,p.children),a.flags|=4096,a)}function gv(s,a,u){s.lanes|=a;var p=s.alternate;p!==null&&(p.lanes|=a),jp(s.return,a,u)}function cm(s,a,u,p,g){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:g}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=p,v.tail=u,v.tailMode=g)}function yv(s,a,u){var p=a.pendingProps,g=p.revealOrder,v=p.tail;if(gn(s,a,p.children,u),p=ft.current,(p&2)!==0)p=p&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&gv(s,u,a);else if(s.tag===19)gv(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}p&=1}if(rt(ft,p),(a.mode&1)===0)a.memoizedState=null;else switch(g){case"forwards":for(u=a.child,g=null;u!==null;)s=u.alternate,s!==null&&Rh(s)===null&&(g=u),u=u.sibling;u=g,u===null?(g=a.child,a.child=null):(g=u.sibling,u.sibling=null),cm(a,!1,g,u,v);break;case"backwards":for(u=null,g=a.child,a.child=null;g!==null;){if(s=g.alternate,s!==null&&Rh(s)===null){a.child=g;break}s=g.sibling,g.sibling=u,u=g,g=s}cm(a,!0,u,null,v);break;case"together":cm(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Fh(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function Ii(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),_o|=a.lanes,(u&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(t(153));if(a.child!==null){for(s=a.child,u=fs(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=fs(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function Ek(s,a,u){switch(a.tag){case 3:fv(a),Na();break;case 5:M0(a);break;case 1:xn(a.type)&&wh(a);break;case 4:Wp(a,a.stateNode.containerInfo);break;case 10:var p=a.type._context,g=a.memoizedProps.value;rt(Sh,p._currentValue),p._currentValue=g;break;case 13:if(p=a.memoizedState,p!==null)return p.dehydrated!==null?(rt(ft,ft.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?mv(s,a,u):(rt(ft,ft.current&1),s=Ii(s,a,u),s!==null?s.sibling:null);rt(ft,ft.current&1);break;case 19:if(p=(u&a.childLanes)!==0,(s.flags&128)!==0){if(p)return yv(s,a,u);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),rt(ft,ft.current),p)break;return null;case 22:case 23:return a.lanes=0,uv(s,a,u)}return Ii(s,a,u)}var _v,um,vv,wv;_v=function(s,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},um=function(){},vv=function(s,a,u,p){var g=s.memoizedProps;if(g!==p){s=a.stateNode,go(Hr.current);var v=null;switch(u){case"input":g=ui(s,g),p=ui(s,p),v=[];break;case"select":g=R({},g,{value:void 0}),p=R({},p,{value:void 0}),v=[];break;case"textarea":g=Cl(s,g),p=Cl(s,p),v=[];break;default:typeof g.onClick!="function"&&typeof p.onClick=="function"&&(s.onclick=yh)}Nl(u,p);var S;u=null;for(Q in g)if(!p.hasOwnProperty(Q)&&g.hasOwnProperty(Q)&&g[Q]!=null)if(Q==="style"){var M=g[Q];for(S in M)M.hasOwnProperty(S)&&(u||(u={}),u[S]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(i.hasOwnProperty(Q)?v||(v=[]):(v=v||[]).push(Q,null));for(Q in p){var j=p[Q];if(M=g?.[Q],p.hasOwnProperty(Q)&&j!==M&&(j!=null||M!=null))if(Q==="style")if(M){for(S in M)!M.hasOwnProperty(S)||j&&j.hasOwnProperty(S)||(u||(u={}),u[S]="");for(S in j)j.hasOwnProperty(S)&&M[S]!==j[S]&&(u||(u={}),u[S]=j[S])}else u||(v||(v=[]),v.push(Q,u)),u=j;else Q==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,M=M?M.__html:void 0,j!=null&&M!==j&&(v=v||[]).push(Q,j)):Q==="children"?typeof j!="string"&&typeof j!="number"||(v=v||[]).push(Q,""+j):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(i.hasOwnProperty(Q)?(j!=null&&Q==="onScroll"&&ot("scroll",s),v||M===j||(v=[])):(v=v||[]).push(Q,j))}u&&(v=v||[]).push("style",u);var Q=v;(a.updateQueue=Q)&&(a.flags|=4)}},wv=function(s,a,u,p){u!==p&&(a.flags|=4)};function mc(s,a){if(!dt)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function on(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,p=0;if(a)for(var g=s.child;g!==null;)u|=g.lanes|g.childLanes,p|=g.subtreeFlags&14680064,p|=g.flags&14680064,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)u|=g.lanes|g.childLanes,p|=g.subtreeFlags,p|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=p,s.childLanes=u,a}function xk(s,a,u){var p=a.pendingProps;switch(Dp(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return on(a),null;case 1:return xn(a.type)&&vh(),on(a),null;case 3:return p=a.stateNode,ja(),at(En),at(rn),Yp(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(s===null||s.child===null)&&(Th(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,wr!==null&&(Em(wr),wr=null))),um(s,a),on(a),null;case 5:$p(a);var g=go(uc.current);if(u=a.type,s!==null&&a.stateNode!=null)vv(s,a,u,p,g),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!p){if(a.stateNode===null)throw Error(t(166));return on(a),null}if(s=go(Hr.current),Th(a)){p=a.stateNode,u=a.type;var v=a.memoizedProps;switch(p[Br]=a,p[sc]=v,s=(a.mode&1)!==0,u){case"dialog":ot("cancel",p),ot("close",p);break;case"iframe":case"object":case"embed":ot("load",p);break;case"video":case"audio":for(g=0;g<nc.length;g++)ot(nc[g],p);break;case"source":ot("error",p);break;case"img":case"image":case"link":ot("error",p),ot("load",p);break;case"details":ot("toggle",p);break;case"input":Bi(p,v),ot("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!v.multiple},ot("invalid",p);break;case"textarea":na(p,v),ot("invalid",p)}Nl(u,v),g=null;for(var S in v)if(v.hasOwnProperty(S)){var M=v[S];S==="children"?typeof M=="string"?p.textContent!==M&&(v.suppressHydrationWarning!==!0&&gh(p.textContent,M,s),g=["children",M]):typeof M=="number"&&p.textContent!==""+M&&(v.suppressHydrationWarning!==!0&&gh(p.textContent,M,s),g=["children",""+M]):i.hasOwnProperty(S)&&M!=null&&S==="onScroll"&&ot("scroll",p)}switch(u){case"input":tt(p),ta(p,v,!0);break;case"textarea":tt(p),Al(p);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(p.onclick=yh)}p=g,a.updateQueue=p,p!==null&&(a.flags|=4)}else{S=g.nodeType===9?g:g.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Lt(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=S.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof p.is=="string"?s=S.createElement(u,{is:p.is}):(s=S.createElement(u),u==="select"&&(S=s,p.multiple?S.multiple=!0:p.size&&(S.size=p.size))):s=S.createElementNS(s,u),s[Br]=a,s[sc]=p,_v(s,a,!1,!1),a.stateNode=s;e:{switch(S=Ll(u,p),u){case"dialog":ot("cancel",s),ot("close",s),g=p;break;case"iframe":case"object":case"embed":ot("load",s),g=p;break;case"video":case"audio":for(g=0;g<nc.length;g++)ot(nc[g],s);g=p;break;case"source":ot("error",s),g=p;break;case"img":case"image":case"link":ot("error",s),ot("load",s),g=p;break;case"details":ot("toggle",s),g=p;break;case"input":Bi(s,p),g=ui(s,p),ot("invalid",s);break;case"option":g=p;break;case"select":s._wrapperState={wasMultiple:!!p.multiple},g=R({},p,{value:void 0}),ot("invalid",s);break;case"textarea":na(s,p),g=Cl(s,p),ot("invalid",s);break;default:g=p}Nl(u,g),M=g;for(v in M)if(M.hasOwnProperty(v)){var j=M[v];v==="style"?Ol(s,j):v==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&Rl(s,j)):v==="children"?typeof j=="string"?(u!=="textarea"||j!=="")&&$i(s,j):typeof j=="number"&&$i(s,""+j):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(i.hasOwnProperty(v)?j!=null&&v==="onScroll"&&ot("scroll",s):j!=null&&H(s,v,j,S))}switch(u){case"input":tt(s),ta(s,p,!1);break;case"textarea":tt(s),Al(s);break;case"option":p.value!=null&&s.setAttribute("value",""+Re(p.value));break;case"select":s.multiple=!!p.multiple,v=p.value,v!=null?di(s,!!p.multiple,v,!1):p.defaultValue!=null&&di(s,!!p.multiple,p.defaultValue,!0);break;default:typeof g.onClick=="function"&&(s.onclick=yh)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return on(a),null;case 6:if(s&&a.stateNode!=null)wv(s,a,s.memoizedProps,p);else{if(typeof p!="string"&&a.stateNode===null)throw Error(t(166));if(u=go(uc.current),go(Hr.current),Th(a)){if(p=a.stateNode,u=a.memoizedProps,p[Br]=a,(v=p.nodeValue!==u)&&(s=Un,s!==null))switch(s.tag){case 3:gh(p.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&gh(p.nodeValue,u,(s.mode&1)!==0)}v&&(a.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[Br]=a,a.stateNode=p}return on(a),null;case 13:if(at(ft),p=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(dt&&zn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)x0(),Na(),a.flags|=98560,v=!1;else if(v=Th(a),p!==null&&p.dehydrated!==null){if(s===null){if(!v)throw Error(t(318));if(v=a.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[Br]=a}else Na(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;on(a),v=!1}else wr!==null&&(Em(wr),wr=null),v=!0;if(!v)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(p=p!==null,p!==(s!==null&&s.memoizedState!==null)&&p&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(ft.current&1)!==0?Ut===0&&(Ut=3):Tm())),a.updateQueue!==null&&(a.flags|=4),on(a),null);case 4:return ja(),um(s,a),s===null&&rc(a.stateNode.containerInfo),on(a),null;case 10:return Fp(a.type._context),on(a),null;case 17:return xn(a.type)&&vh(),on(a),null;case 19:if(at(ft),v=a.memoizedState,v===null)return on(a),null;if(p=(a.flags&128)!==0,S=v.rendering,S===null)if(p)mc(v,!1);else{if(Ut!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(S=Rh(s),S!==null){for(a.flags|=128,mc(v,!1),p=S.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),a.subtreeFlags=0,p=u,u=a.child;u!==null;)v=u,s=p,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=s,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,s=S.dependencies,v.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return rt(ft,ft.current&1|2),a.child}s=s.sibling}v.tail!==null&&nt()>Ha&&(a.flags|=128,p=!0,mc(v,!1),a.lanes=4194304)}else{if(!p)if(s=Rh(S),s!==null){if(a.flags|=128,p=!0,u=s.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),mc(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!dt)return on(a),null}else 2*nt()-v.renderingStartTime>Ha&&u!==1073741824&&(a.flags|=128,p=!0,mc(v,!1),a.lanes=4194304);v.isBackwards?(S.sibling=a.child,a.child=S):(u=v.last,u!==null?u.sibling=S:a.child=S,v.last=S)}return v.tail!==null?(a=v.tail,v.rendering=a,v.tail=a.sibling,v.renderingStartTime=nt(),a.sibling=null,u=ft.current,rt(ft,p?u&1|2:u&1),a):(on(a),null);case 22:case 23:return bm(),p=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==p&&(a.flags|=8192),p&&(a.mode&1)!==0?(Bn&1073741824)!==0&&(on(a),a.subtreeFlags&6&&(a.flags|=8192)):on(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function bk(s,a){switch(Dp(a),a.tag){case 1:return xn(a.type)&&vh(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return ja(),at(En),at(rn),Yp(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return $p(a),null;case 13:if(at(ft),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(t(340));Na()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return at(ft),null;case 4:return ja(),null;case 10:return Fp(a.type._context),null;case 22:case 23:return bm(),null;case 24:return null;default:return null}}var jh=!1,an=!1,Tk=typeof WeakSet=="function"?WeakSet:Set,_e=null;function za(s,a){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){yt(s,a,p)}else u.current=null}function hm(s,a,u){try{u()}catch(p){yt(s,a,p)}}var Ev=!1;function Sk(s,a){if(bp=Zi,s=J_(),mp(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var g=p.anchorOffset,v=p.focusNode;p=p.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break e}var S=0,M=-1,j=-1,Q=0,le=0,ce=s,ae=null;t:for(;;){for(var me;ce!==u||g!==0&&ce.nodeType!==3||(M=S+g),ce!==v||p!==0&&ce.nodeType!==3||(j=S+p),ce.nodeType===3&&(S+=ce.nodeValue.length),(me=ce.firstChild)!==null;)ae=ce,ce=me;for(;;){if(ce===s)break t;if(ae===u&&++Q===g&&(M=S),ae===v&&++le===p&&(j=S),(me=ce.nextSibling)!==null)break;ce=ae,ae=ce.parentNode}ce=me}u=M===-1||j===-1?null:{start:M,end:j}}else u=null}u=u||{start:0,end:0}}else u=null;for(Tp={focusedElem:s,selectionRange:u},Zi=!1,_e=a;_e!==null;)if(a=_e,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,_e=s;else for(;_e!==null;){a=_e;try{var ve=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(ve!==null){var Ee=ve.memoizedProps,xt=ve.memoizedState,q=a.stateNode,B=q.getSnapshotBeforeUpdate(a.elementType===a.type?Ee:Er(a.type,Ee),xt);q.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var Y=a.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ue){yt(a,a.return,ue)}if(s=a.sibling,s!==null){s.return=a.return,_e=s;break}_e=a.return}return ve=Ev,Ev=!1,ve}function gc(s,a,u){var p=a.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var g=p=p.next;do{if((g.tag&s)===s){var v=g.destroy;g.destroy=void 0,v!==void 0&&hm(a,u,v)}g=g.next}while(g!==p)}}function Uh(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&s)===s){var p=u.create;u.destroy=p()}u=u.next}while(u!==a)}}function dm(s){var a=s.ref;if(a!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof a=="function"?a(s):a.current=s}}function xv(s){var a=s.alternate;a!==null&&(s.alternate=null,xv(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[Br],delete a[sc],delete a[Pp],delete a[ak],delete a[lk])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function bv(s){return s.tag===5||s.tag===3||s.tag===4}function Tv(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||bv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function fm(s,a,u){var p=s.tag;if(p===5||p===6)s=s.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(s,a):u.insertBefore(s,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(s,u)):(a=u,a.appendChild(s)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=yh));else if(p!==4&&(s=s.child,s!==null))for(fm(s,a,u),s=s.sibling;s!==null;)fm(s,a,u),s=s.sibling}function pm(s,a,u){var p=s.tag;if(p===5||p===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(p!==4&&(s=s.child,s!==null))for(pm(s,a,u),s=s.sibling;s!==null;)pm(s,a,u),s=s.sibling}var Qt=null,xr=!1;function ls(s,a,u){for(u=u.child;u!==null;)Sv(s,a,u),u=u.sibling}function Sv(s,a,u){if(Ln&&typeof Ln.onCommitFiberUnmount=="function")try{Ln.onCommitFiberUnmount(ro,u)}catch{}switch(u.tag){case 5:an||za(u,a);case 6:var p=Qt,g=xr;Qt=null,ls(s,a,u),Qt=p,xr=g,Qt!==null&&(xr?(s=Qt,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):Qt.removeChild(u.stateNode));break;case 18:Qt!==null&&(xr?(s=Qt,u=u.stateNode,s.nodeType===8?kp(s.parentNode,u):s.nodeType===1&&kp(s,u),yr(s)):kp(Qt,u.stateNode));break;case 4:p=Qt,g=xr,Qt=u.stateNode.containerInfo,xr=!0,ls(s,a,u),Qt=p,xr=g;break;case 0:case 11:case 14:case 15:if(!an&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){g=p=p.next;do{var v=g,S=v.destroy;v=v.tag,S!==void 0&&((v&2)!==0||(v&4)!==0)&&hm(u,a,S),g=g.next}while(g!==p)}ls(s,a,u);break;case 1:if(!an&&(za(u,a),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(M){yt(u,a,M)}ls(s,a,u);break;case 21:ls(s,a,u);break;case 22:u.mode&1?(an=(p=an)||u.memoizedState!==null,ls(s,a,u),an=p):ls(s,a,u);break;default:ls(s,a,u)}}function Iv(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new Tk),a.forEach(function(p){var g=Mk.bind(null,s,p);u.has(p)||(u.add(p),p.then(g,g))})}}function br(s,a){var u=a.deletions;if(u!==null)for(var p=0;p<u.length;p++){var g=u[p];try{var v=s,S=a,M=S;e:for(;M!==null;){switch(M.tag){case 5:Qt=M.stateNode,xr=!1;break e;case 3:Qt=M.stateNode.containerInfo,xr=!0;break e;case 4:Qt=M.stateNode.containerInfo,xr=!0;break e}M=M.return}if(Qt===null)throw Error(t(160));Sv(v,S,g),Qt=null,xr=!1;var j=g.alternate;j!==null&&(j.return=null),g.return=null}catch(Q){yt(g,a,Q)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)kv(a,s),a=a.sibling}function kv(s,a){var u=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(br(a,s),$r(s),p&4){try{gc(3,s,s.return),Uh(3,s)}catch(Ee){yt(s,s.return,Ee)}try{gc(5,s,s.return)}catch(Ee){yt(s,s.return,Ee)}}break;case 1:br(a,s),$r(s),p&512&&u!==null&&za(u,u.return);break;case 5:if(br(a,s),$r(s),p&512&&u!==null&&za(u,u.return),s.flags&32){var g=s.stateNode;try{$i(g,"")}catch(Ee){yt(s,s.return,Ee)}}if(p&4&&(g=s.stateNode,g!=null)){var v=s.memoizedProps,S=u!==null?u.memoizedProps:v,M=s.type,j=s.updateQueue;if(s.updateQueue=null,j!==null)try{M==="input"&&v.type==="radio"&&v.name!=null&&Hi(g,v),Ll(M,S);var Q=Ll(M,v);for(S=0;S<j.length;S+=2){var le=j[S],ce=j[S+1];le==="style"?Ol(g,ce):le==="dangerouslySetInnerHTML"?Rl(g,ce):le==="children"?$i(g,ce):H(g,le,ce,Q)}switch(M){case"input":hi(g,v);break;case"textarea":ra(g,v);break;case"select":var ae=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var me=v.value;me!=null?di(g,!!v.multiple,me,!1):ae!==!!v.multiple&&(v.defaultValue!=null?di(g,!!v.multiple,v.defaultValue,!0):di(g,!!v.multiple,v.multiple?[]:"",!1))}g[sc]=v}catch(Ee){yt(s,s.return,Ee)}}break;case 6:if(br(a,s),$r(s),p&4){if(s.stateNode===null)throw Error(t(162));g=s.stateNode,v=s.memoizedProps;try{g.nodeValue=v}catch(Ee){yt(s,s.return,Ee)}}break;case 3:if(br(a,s),$r(s),p&4&&u!==null&&u.memoizedState.isDehydrated)try{yr(a.containerInfo)}catch(Ee){yt(s,s.return,Ee)}break;case 4:br(a,s),$r(s);break;case 13:br(a,s),$r(s),g=s.child,g.flags&8192&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||(ym=nt())),p&4&&Iv(s);break;case 22:if(le=u!==null&&u.memoizedState!==null,s.mode&1?(an=(Q=an)||le,br(a,s),an=Q):br(a,s),$r(s),p&8192){if(Q=s.memoizedState!==null,(s.stateNode.isHidden=Q)&&!le&&(s.mode&1)!==0)for(_e=s,le=s.child;le!==null;){for(ce=_e=le;_e!==null;){switch(ae=_e,me=ae.child,ae.tag){case 0:case 11:case 14:case 15:gc(4,ae,ae.return);break;case 1:za(ae,ae.return);var ve=ae.stateNode;if(typeof ve.componentWillUnmount=="function"){p=ae,u=ae.return;try{a=p,ve.props=a.memoizedProps,ve.state=a.memoizedState,ve.componentWillUnmount()}catch(Ee){yt(p,u,Ee)}}break;case 5:za(ae,ae.return);break;case 22:if(ae.memoizedState!==null){Av(ce);continue}}me!==null?(me.return=ae,_e=me):Av(ce)}le=le.sibling}e:for(le=null,ce=s;;){if(ce.tag===5){if(le===null){le=ce;try{g=ce.stateNode,Q?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(M=ce.stateNode,j=ce.memoizedProps.style,S=j!=null&&j.hasOwnProperty("display")?j.display:null,M.style.display=Dl("display",S))}catch(Ee){yt(s,s.return,Ee)}}}else if(ce.tag===6){if(le===null)try{ce.stateNode.nodeValue=Q?"":ce.memoizedProps}catch(Ee){yt(s,s.return,Ee)}}else if((ce.tag!==22&&ce.tag!==23||ce.memoizedState===null||ce===s)&&ce.child!==null){ce.child.return=ce,ce=ce.child;continue}if(ce===s)break e;for(;ce.sibling===null;){if(ce.return===null||ce.return===s)break e;le===ce&&(le=null),ce=ce.return}le===ce&&(le=null),ce.sibling.return=ce.return,ce=ce.sibling}}break;case 19:br(a,s),$r(s),p&4&&Iv(s);break;case 21:break;default:br(a,s),$r(s)}}function $r(s){var a=s.flags;if(a&2){try{e:{for(var u=s.return;u!==null;){if(bv(u)){var p=u;break e}u=u.return}throw Error(t(160))}switch(p.tag){case 5:var g=p.stateNode;p.flags&32&&($i(g,""),p.flags&=-33);var v=Tv(s);pm(s,v,g);break;case 3:case 4:var S=p.stateNode.containerInfo,M=Tv(s);fm(s,M,S);break;default:throw Error(t(161))}}catch(j){yt(s,s.return,j)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function Ik(s,a,u){_e=s,Pv(s)}function Pv(s,a,u){for(var p=(s.mode&1)!==0;_e!==null;){var g=_e,v=g.child;if(g.tag===22&&p){var S=g.memoizedState!==null||jh;if(!S){var M=g.alternate,j=M!==null&&M.memoizedState!==null||an;M=jh;var Q=an;if(jh=S,(an=j)&&!Q)for(_e=g;_e!==null;)S=_e,j=S.child,S.tag===22&&S.memoizedState!==null?Rv(g):j!==null?(j.return=S,_e=j):Rv(g);for(;v!==null;)_e=v,Pv(v),v=v.sibling;_e=g,jh=M,an=Q}Cv(s)}else(g.subtreeFlags&8772)!==0&&v!==null?(v.return=g,_e=v):Cv(s)}}function Cv(s){for(;_e!==null;){var a=_e;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:an||Uh(5,a);break;case 1:var p=a.stateNode;if(a.flags&4&&!an)if(u===null)p.componentDidMount();else{var g=a.elementType===a.type?u.memoizedProps:Er(a.type,u.memoizedProps);p.componentDidUpdate(g,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var v=a.updateQueue;v!==null&&I0(a,v,p);break;case 3:var S=a.updateQueue;if(S!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}I0(a,S,u)}break;case 5:var M=a.stateNode;if(u===null&&a.flags&4){u=M;var j=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&u.focus();break;case"img":j.src&&(u.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var Q=a.alternate;if(Q!==null){var le=Q.memoizedState;if(le!==null){var ce=le.dehydrated;ce!==null&&yr(ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}an||a.flags&512&&dm(a)}catch(ae){yt(a,a.return,ae)}}if(a===s){_e=null;break}if(u=a.sibling,u!==null){u.return=a.return,_e=u;break}_e=a.return}}function Av(s){for(;_e!==null;){var a=_e;if(a===s){_e=null;break}var u=a.sibling;if(u!==null){u.return=a.return,_e=u;break}_e=a.return}}function Rv(s){for(;_e!==null;){var a=_e;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{Uh(4,a)}catch(j){yt(a,u,j)}break;case 1:var p=a.stateNode;if(typeof p.componentDidMount=="function"){var g=a.return;try{p.componentDidMount()}catch(j){yt(a,g,j)}}var v=a.return;try{dm(a)}catch(j){yt(a,v,j)}break;case 5:var S=a.return;try{dm(a)}catch(j){yt(a,S,j)}}}catch(j){yt(a,a.return,j)}if(a===s){_e=null;break}var M=a.sibling;if(M!==null){M.return=a.return,_e=M;break}_e=a.return}}var kk=Math.ceil,zh=K.ReactCurrentDispatcher,mm=K.ReactCurrentOwner,rr=K.ReactCurrentBatchConfig,We=0,$t=null,Dt=null,Xt=0,Bn=0,Ba=rs(0),Ut=0,yc=null,_o=0,Bh=0,gm=0,_c=null,Tn=null,ym=0,Ha=1/0,ki=null,Hh=!1,_m=null,cs=null,Wh=!1,us=null,$h=0,vc=0,vm=null,qh=-1,Yh=0;function yn(){return(We&6)!==0?nt():qh!==-1?qh:qh=nt()}function hs(s){return(s.mode&1)===0?1:(We&2)!==0&&Xt!==0?Xt&-Xt:uk.transition!==null?(Yh===0&&(Yh=so()),Yh):(s=ze,s!==0||(s=window.event,s=s===void 0?16:Yl(s.type)),s)}function Tr(s,a,u,p){if(50<vc)throw vc=0,vm=null,Error(t(185));Ki(s,u,p),((We&2)===0||s!==$t)&&(s===$t&&((We&2)===0&&(Bh|=u),Ut===4&&ds(s,Xt)),Sn(s,p),u===1&&We===0&&(a.mode&1)===0&&(Ha=nt()+500,Eh&&ss()))}function Sn(s,a){var u=s.callbackNode;mi(s,a);var p=io(s,s===$t?Xt:0);if(p===0)u!==null&&Bl(u),s.callbackNode=null,s.callbackPriority=0;else if(a=p&-p,s.callbackPriority!==a){if(u!=null&&Bl(u),a===1)s.tag===0?ck(Ov.bind(null,s)):y0(Ov.bind(null,s)),sk(function(){(We&6)===0&&ss()}),u=null;else{switch(Xi(p)){case 1:u=no;break;case 4:u=qi;break;case 16:u=Qn;break;case 536870912:u=Yu;break;default:u=Qn}u=zv(u,Dv.bind(null,s))}s.callbackPriority=a,s.callbackNode=u}}function Dv(s,a){if(qh=-1,Yh=0,(We&6)!==0)throw Error(t(327));var u=s.callbackNode;if(Wa()&&s.callbackNode!==u)return null;var p=io(s,s===$t?Xt:0);if(p===0)return null;if((p&30)!==0||(p&s.expiredLanes)!==0||a)a=Gh(s,p);else{a=p;var g=We;We|=2;var v=Nv();($t!==s||Xt!==a)&&(ki=null,Ha=nt()+500,wo(s,a));do try{Ak();break}catch(M){Mv(s,M)}while(!0);Vp(),zh.current=v,We=g,Dt!==null?a=0:($t=null,Xt=0,a=Ut)}if(a!==0){if(a===2&&(g=Vn(s),g!==0&&(p=g,a=wm(s,g))),a===1)throw u=yc,wo(s,0),ds(s,p),Sn(s,nt()),u;if(a===6)ds(s,p);else{if(g=s.current.alternate,(p&30)===0&&!Pk(g)&&(a=Gh(s,p),a===2&&(v=Vn(s),v!==0&&(p=v,a=wm(s,v))),a===1))throw u=yc,wo(s,0),ds(s,p),Sn(s,nt()),u;switch(s.finishedWork=g,s.finishedLanes=p,a){case 0:case 1:throw Error(t(345));case 2:Eo(s,Tn,ki);break;case 3:if(ds(s,p),(p&130023424)===p&&(a=ym+500-nt(),10<a)){if(io(s,0)!==0)break;if(g=s.suspendedLanes,(g&p)!==p){yn(),s.pingedLanes|=s.suspendedLanes&g;break}s.timeoutHandle=Ip(Eo.bind(null,s,Tn,ki),a);break}Eo(s,Tn,ki);break;case 4:if(ds(s,p),(p&4194240)===p)break;for(a=s.eventTimes,g=-1;0<p;){var S=31-pn(p);v=1<<S,S=a[S],S>g&&(g=S),p&=~v}if(p=g,p=nt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*kk(p/1960))-p,10<p){s.timeoutHandle=Ip(Eo.bind(null,s,Tn,ki),p);break}Eo(s,Tn,ki);break;case 5:Eo(s,Tn,ki);break;default:throw Error(t(329))}}}return Sn(s,nt()),s.callbackNode===u?Dv.bind(null,s):null}function wm(s,a){var u=_c;return s.current.memoizedState.isDehydrated&&(wo(s,a).flags|=256),s=Gh(s,a),s!==2&&(a=Tn,Tn=u,a!==null&&Em(a)),s}function Em(s){Tn===null?Tn=s:Tn.push.apply(Tn,s)}function Pk(s){for(var a=s;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var g=u[p],v=g.getSnapshot;g=g.value;try{if(!vr(v(),g))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ds(s,a){for(a&=~gm,a&=~Bh,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var u=31-pn(a),p=1<<u;s[u]=-1,a&=~p}}function Ov(s){if((We&6)!==0)throw Error(t(327));Wa();var a=io(s,0);if((a&1)===0)return Sn(s,nt()),null;var u=Gh(s,a);if(s.tag!==0&&u===2){var p=Vn(s);p!==0&&(a=p,u=wm(s,p))}if(u===1)throw u=yc,wo(s,0),ds(s,a),Sn(s,nt()),u;if(u===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,Eo(s,Tn,ki),Sn(s,nt()),null}function xm(s,a){var u=We;We|=1;try{return s(a)}finally{We=u,We===0&&(Ha=nt()+500,Eh&&ss())}}function vo(s){us!==null&&us.tag===0&&(We&6)===0&&Wa();var a=We;We|=1;var u=rr.transition,p=ze;try{if(rr.transition=null,ze=1,s)return s()}finally{ze=p,rr.transition=u,We=a,(We&6)===0&&ss()}}function bm(){Bn=Ba.current,at(Ba)}function wo(s,a){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,ik(u)),Dt!==null)for(u=Dt.return;u!==null;){var p=u;switch(Dp(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&vh();break;case 3:ja(),at(En),at(rn),Yp();break;case 5:$p(p);break;case 4:ja();break;case 13:at(ft);break;case 19:at(ft);break;case 10:Fp(p.type._context);break;case 22:case 23:bm()}u=u.return}if($t=s,Dt=s=fs(s.current,null),Xt=Bn=a,Ut=0,yc=null,gm=Bh=_o=0,Tn=_c=null,mo!==null){for(a=0;a<mo.length;a++)if(u=mo[a],p=u.interleaved,p!==null){u.interleaved=null;var g=p.next,v=u.pending;if(v!==null){var S=v.next;v.next=g,p.next=S}u.pending=p}mo=null}return s}function Mv(s,a){do{var u=Dt;try{if(Vp(),Dh.current=Lh,Oh){for(var p=pt.memoizedState;p!==null;){var g=p.queue;g!==null&&(g.pending=null),p=p.next}Oh=!1}if(yo=0,Wt=jt=pt=null,hc=!1,dc=0,mm.current=null,u===null||u.return===null){Ut=1,yc=a,Dt=null;break}e:{var v=s,S=u.return,M=u,j=a;if(a=Xt,M.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var Q=j,le=M,ce=le.tag;if((le.mode&1)===0&&(ce===0||ce===11||ce===15)){var ae=le.alternate;ae?(le.updateQueue=ae.updateQueue,le.memoizedState=ae.memoizedState,le.lanes=ae.lanes):(le.updateQueue=null,le.memoizedState=null)}var me=sv(S);if(me!==null){me.flags&=-257,ov(me,S,M,v,a),me.mode&1&&iv(v,Q,a),a=me,j=Q;var ve=a.updateQueue;if(ve===null){var Ee=new Set;Ee.add(j),a.updateQueue=Ee}else ve.add(j);break e}else{if((a&1)===0){iv(v,Q,a),Tm();break e}j=Error(t(426))}}else if(dt&&M.mode&1){var xt=sv(S);if(xt!==null){(xt.flags&65536)===0&&(xt.flags|=256),ov(xt,S,M,v,a),Np(Ua(j,M));break e}}v=j=Ua(j,M),Ut!==4&&(Ut=2),_c===null?_c=[v]:_c.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,a&=-a,v.lanes|=a;var q=nv(v,j,a);S0(v,q);break e;case 1:M=j;var B=v.type,Y=v.stateNode;if((v.flags&128)===0&&(typeof B.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(cs===null||!cs.has(Y)))){v.flags|=65536,a&=-a,v.lanes|=a;var ue=rv(v,M,a);S0(v,ue);break e}}v=v.return}while(v!==null)}Vv(u)}catch(be){a=be,Dt===u&&u!==null&&(Dt=u=u.return);continue}break}while(!0)}function Nv(){var s=zh.current;return zh.current=Lh,s===null?Lh:s}function Tm(){(Ut===0||Ut===3||Ut===2)&&(Ut=4),$t===null||(_o&268435455)===0&&(Bh&268435455)===0||ds($t,Xt)}function Gh(s,a){var u=We;We|=2;var p=Nv();($t!==s||Xt!==a)&&(ki=null,wo(s,a));do try{Ck();break}catch(g){Mv(s,g)}while(!0);if(Vp(),We=u,zh.current=p,Dt!==null)throw Error(t(261));return $t=null,Xt=0,Ut}function Ck(){for(;Dt!==null;)Lv(Dt)}function Ak(){for(;Dt!==null&&!$u();)Lv(Dt)}function Lv(s){var a=Uv(s.alternate,s,Bn);s.memoizedProps=s.pendingProps,a===null?Vv(s):Dt=a,mm.current=null}function Vv(s){var a=s;do{var u=a.alternate;if(s=a.return,(a.flags&32768)===0){if(u=xk(u,a,Bn),u!==null){Dt=u;return}}else{if(u=bk(u,a),u!==null){u.flags&=32767,Dt=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Ut=6,Dt=null;return}}if(a=a.sibling,a!==null){Dt=a;return}Dt=a=s}while(a!==null);Ut===0&&(Ut=5)}function Eo(s,a,u){var p=ze,g=rr.transition;try{rr.transition=null,ze=1,Rk(s,a,u,p)}finally{rr.transition=g,ze=p}return null}function Rk(s,a,u,p){do Wa();while(us!==null);if((We&6)!==0)throw Error(t(327));u=s.finishedWork;var g=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var v=u.lanes|u.childLanes;if(et(s,v),s===$t&&(Dt=$t=null,Xt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Wh||(Wh=!0,zv(Qn,function(){return Wa(),null})),v=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||v){v=rr.transition,rr.transition=null;var S=ze;ze=1;var M=We;We|=4,mm.current=null,Sk(s,u),kv(u,s),XI(Tp),Zi=!!bp,Tp=bp=null,s.current=u,Ik(u),ap(),We=M,ze=S,rr.transition=v}else s.current=u;if(Wh&&(Wh=!1,us=s,$h=g),v=s.pendingLanes,v===0&&(cs=null),Gu(u.stateNode),Sn(s,nt()),a!==null)for(p=s.onRecoverableError,u=0;u<a.length;u++)g=a[u],p(g.value,{componentStack:g.stack,digest:g.digest});if(Hh)throw Hh=!1,s=_m,_m=null,s;return($h&1)!==0&&s.tag!==0&&Wa(),v=s.pendingLanes,(v&1)!==0?s===vm?vc++:(vc=0,vm=s):vc=0,ss(),null}function Wa(){if(us!==null){var s=Xi($h),a=rr.transition,u=ze;try{if(rr.transition=null,ze=16>s?16:s,us===null)var p=!1;else{if(s=us,us=null,$h=0,(We&6)!==0)throw Error(t(331));var g=We;for(We|=4,_e=s.current;_e!==null;){var v=_e,S=v.child;if((_e.flags&16)!==0){var M=v.deletions;if(M!==null){for(var j=0;j<M.length;j++){var Q=M[j];for(_e=Q;_e!==null;){var le=_e;switch(le.tag){case 0:case 11:case 15:gc(8,le,v)}var ce=le.child;if(ce!==null)ce.return=le,_e=ce;else for(;_e!==null;){le=_e;var ae=le.sibling,me=le.return;if(xv(le),le===Q){_e=null;break}if(ae!==null){ae.return=me,_e=ae;break}_e=me}}}var ve=v.alternate;if(ve!==null){var Ee=ve.child;if(Ee!==null){ve.child=null;do{var xt=Ee.sibling;Ee.sibling=null,Ee=xt}while(Ee!==null)}}_e=v}}if((v.subtreeFlags&2064)!==0&&S!==null)S.return=v,_e=S;else e:for(;_e!==null;){if(v=_e,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:gc(9,v,v.return)}var q=v.sibling;if(q!==null){q.return=v.return,_e=q;break e}_e=v.return}}var B=s.current;for(_e=B;_e!==null;){S=_e;var Y=S.child;if((S.subtreeFlags&2064)!==0&&Y!==null)Y.return=S,_e=Y;else e:for(S=B;_e!==null;){if(M=_e,(M.flags&2048)!==0)try{switch(M.tag){case 0:case 11:case 15:Uh(9,M)}}catch(be){yt(M,M.return,be)}if(M===S){_e=null;break e}var ue=M.sibling;if(ue!==null){ue.return=M.return,_e=ue;break e}_e=M.return}}if(We=g,ss(),Ln&&typeof Ln.onPostCommitFiberRoot=="function")try{Ln.onPostCommitFiberRoot(ro,s)}catch{}p=!0}return p}finally{ze=u,rr.transition=a}}return!1}function Fv(s,a,u){a=Ua(u,a),a=nv(s,a,1),s=as(s,a,1),a=yn(),s!==null&&(Ki(s,1,a),Sn(s,a))}function yt(s,a,u){if(s.tag===3)Fv(s,s,u);else for(;a!==null;){if(a.tag===3){Fv(a,s,u);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(cs===null||!cs.has(p))){s=Ua(u,s),s=rv(a,s,1),a=as(a,s,1),s=yn(),a!==null&&(Ki(a,1,s),Sn(a,s));break}}a=a.return}}function Dk(s,a,u){var p=s.pingCache;p!==null&&p.delete(a),a=yn(),s.pingedLanes|=s.suspendedLanes&u,$t===s&&(Xt&u)===u&&(Ut===4||Ut===3&&(Xt&130023424)===Xt&&500>nt()-ym?wo(s,0):gm|=u),Sn(s,a)}function jv(s,a){a===0&&((s.mode&1)===0?a=1:(a=fa,fa<<=1,(fa&130023424)===0&&(fa=4194304)));var u=yn();s=Ti(s,a),s!==null&&(Ki(s,a,u),Sn(s,u))}function Ok(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),jv(s,u)}function Mk(s,a){var u=0;switch(s.tag){case 13:var p=s.stateNode,g=s.memoizedState;g!==null&&(u=g.retryLane);break;case 19:p=s.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(a),jv(s,u)}var Uv;Uv=function(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps||En.current)bn=!0;else{if((s.lanes&u)===0&&(a.flags&128)===0)return bn=!1,Ek(s,a,u);bn=(s.flags&131072)!==0}else bn=!1,dt&&(a.flags&1048576)!==0&&_0(a,bh,a.index);switch(a.lanes=0,a.tag){case 2:var p=a.type;Fh(s,a),s=a.pendingProps;var g=Da(a,rn.current);Va(a,u),g=Qp(null,a,p,s,g,u);var v=Xp();return a.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,xn(p)?(v=!0,wh(a)):v=!1,a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,zp(a),g.updater=Ch,a.stateNode=g,g._reactInternals=a,Hp(a,p,s,u),a=sm(null,a,p,!0,v,u)):(a.tag=0,dt&&v&&Rp(a),gn(null,a,g,u),a=a.child),a;case 16:p=a.elementType;e:{switch(Fh(s,a),s=a.pendingProps,g=p._init,p=g(p._payload),a.type=p,g=a.tag=Lk(p),s=Er(p,s),g){case 0:a=im(null,a,p,s,u);break e;case 1:a=dv(null,a,p,s,u);break e;case 11:a=av(null,a,p,s,u);break e;case 14:a=lv(null,a,p,Er(p.type,s),u);break e}throw Error(t(306,p,""))}return a;case 0:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:Er(p,g),im(s,a,p,g,u);case 1:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:Er(p,g),dv(s,a,p,g,u);case 3:e:{if(fv(a),s===null)throw Error(t(387));p=a.pendingProps,v=a.memoizedState,g=v.element,T0(s,a),Ph(a,p,null,u);var S=a.memoizedState;if(p=S.element,v.isDehydrated)if(v={element:p,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){g=Ua(Error(t(423)),a),a=pv(s,a,p,u,g);break e}else if(p!==g){g=Ua(Error(t(424)),a),a=pv(s,a,p,u,g);break e}else for(zn=ns(a.stateNode.containerInfo.firstChild),Un=a,dt=!0,wr=null,u=O0(a,null,p,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Na(),p===g){a=Ii(s,a,u);break e}gn(s,a,p,u)}a=a.child}return a;case 5:return M0(a),s===null&&Mp(a),p=a.type,g=a.pendingProps,v=s!==null?s.memoizedProps:null,S=g.children,Sp(p,g)?S=null:v!==null&&Sp(p,v)&&(a.flags|=32),hv(s,a),gn(s,a,S,u),a.child;case 6:return s===null&&Mp(a),null;case 13:return mv(s,a,u);case 4:return Wp(a,a.stateNode.containerInfo),p=a.pendingProps,s===null?a.child=Fa(a,null,p,u):gn(s,a,p,u),a.child;case 11:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:Er(p,g),av(s,a,p,g,u);case 7:return gn(s,a,a.pendingProps,u),a.child;case 8:return gn(s,a,a.pendingProps.children,u),a.child;case 12:return gn(s,a,a.pendingProps.children,u),a.child;case 10:e:{if(p=a.type._context,g=a.pendingProps,v=a.memoizedProps,S=g.value,rt(Sh,p._currentValue),p._currentValue=S,v!==null)if(vr(v.value,S)){if(v.children===g.children&&!En.current){a=Ii(s,a,u);break e}}else for(v=a.child,v!==null&&(v.return=a);v!==null;){var M=v.dependencies;if(M!==null){S=v.child;for(var j=M.firstContext;j!==null;){if(j.context===p){if(v.tag===1){j=Si(-1,u&-u),j.tag=2;var Q=v.updateQueue;if(Q!==null){Q=Q.shared;var le=Q.pending;le===null?j.next=j:(j.next=le.next,le.next=j),Q.pending=j}}v.lanes|=u,j=v.alternate,j!==null&&(j.lanes|=u),jp(v.return,u,a),M.lanes|=u;break}j=j.next}}else if(v.tag===10)S=v.type===a.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(t(341));S.lanes|=u,M=S.alternate,M!==null&&(M.lanes|=u),jp(S,u,a),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===a){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}gn(s,a,g.children,u),a=a.child}return a;case 9:return g=a.type,p=a.pendingProps.children,Va(a,u),g=tr(g),p=p(g),a.flags|=1,gn(s,a,p,u),a.child;case 14:return p=a.type,g=Er(p,a.pendingProps),g=Er(p.type,g),lv(s,a,p,g,u);case 15:return cv(s,a,a.type,a.pendingProps,u);case 17:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:Er(p,g),Fh(s,a),a.tag=1,xn(p)?(s=!0,wh(a)):s=!1,Va(a,u),C0(a,p,g),Hp(a,p,g,u),sm(null,a,p,!0,s,u);case 19:return yv(s,a,u);case 22:return uv(s,a,u)}throw Error(t(156,a.tag))};function zv(s,a){return ha(s,a)}function Nk(s,a,u,p){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ir(s,a,u,p){return new Nk(s,a,u,p)}function Sm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Lk(s){if(typeof s=="function")return Sm(s)?1:0;if(s!=null){if(s=s.$$typeof,s===F)return 11;if(s===he)return 14}return 2}function fs(s,a){var u=s.alternate;return u===null?(u=ir(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function Kh(s,a,u,p,g,v){var S=2;if(p=s,typeof s=="function")Sm(s)&&(S=1);else if(typeof s=="string")S=5;else e:switch(s){case D:return xo(u.children,g,v,a);case P:S=8,g|=8;break;case A:return s=ir(12,u,a,g|2),s.elementType=A,s.lanes=v,s;case O:return s=ir(13,u,a,g),s.elementType=O,s.lanes=v,s;case we:return s=ir(19,u,a,g),s.elementType=we,s.lanes=v,s;case te:return Qh(u,g,v,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case V:S=10;break e;case L:S=9;break e;case F:S=11;break e;case he:S=14;break e;case Ie:S=16,p=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return a=ir(S,u,a,g),a.elementType=s,a.type=p,a.lanes=v,a}function xo(s,a,u,p){return s=ir(7,s,p,a),s.lanes=u,s}function Qh(s,a,u,p){return s=ir(22,s,p,a),s.elementType=te,s.lanes=u,s.stateNode={isHidden:!1},s}function Im(s,a,u){return s=ir(6,s,null,a),s.lanes=u,s}function km(s,a,u){return a=ir(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function Vk(s,a,u,p,g){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gi(0),this.expirationTimes=Gi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gi(0),this.identifierPrefix=p,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Pm(s,a,u,p,g,v,S,M,j){return s=new Vk(s,a,u,M,j),a===1?(a=1,v===!0&&(a|=8)):a=0,v=ir(3,null,null,a),s.current=v,v.stateNode=s,v.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},zp(v),s}function Fk(s,a,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ne,key:p==null?null:""+p,children:s,containerInfo:a,implementation:u}}function Bv(s){if(!s)return is;s=s._reactInternals;e:{if(dr(s)!==s||s.tag!==1)throw Error(t(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(xn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(s.tag===1){var u=s.type;if(xn(u))return m0(s,u,a)}return a}function Hv(s,a,u,p,g,v,S,M,j){return s=Pm(u,p,!0,s,g,v,S,M,j),s.context=Bv(null),u=s.current,p=yn(),g=hs(u),v=Si(p,g),v.callback=a??null,as(u,v,g),s.current.lanes=g,Ki(s,g,p),Sn(s,p),s}function Xh(s,a,u,p){var g=a.current,v=yn(),S=hs(g);return u=Bv(u),a.context===null?a.context=u:a.pendingContext=u,a=Si(v,S),a.payload={element:s},p=p===void 0?null:p,p!==null&&(a.callback=p),s=as(g,a,S),s!==null&&(Tr(s,g,S,v),kh(s,g,S)),S}function Jh(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Wv(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function Cm(s,a){Wv(s,a),(s=s.alternate)&&Wv(s,a)}function jk(){return null}var $v=typeof reportError=="function"?reportError:function(s){console.error(s)};function Am(s){this._internalRoot=s}Zh.prototype.render=Am.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(t(409));Xh(s,a,null,null)},Zh.prototype.unmount=Am.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;vo(function(){Xh(null,s,null,null)}),a[wi]=null}};function Zh(s){this._internalRoot=s}Zh.prototype.unstable_scheduleHydration=function(s){if(s){var a=Zu();s={blockedOn:null,target:s,priority:a};for(var u=0;u<Fr.length&&a!==0&&a<Fr[u].priority;u++);Fr.splice(u,0,s),u===0&&nh(s)}};function Rm(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function ed(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function qv(){}function Uk(s,a,u,p,g){if(g){if(typeof p=="function"){var v=p;p=function(){var Q=Jh(S);v.call(Q)}}var S=Hv(a,p,s,0,null,!1,!1,"",qv);return s._reactRootContainer=S,s[wi]=S.current,rc(s.nodeType===8?s.parentNode:s),vo(),S}for(;g=s.lastChild;)s.removeChild(g);if(typeof p=="function"){var M=p;p=function(){var Q=Jh(j);M.call(Q)}}var j=Pm(s,0,!1,null,null,!1,!1,"",qv);return s._reactRootContainer=j,s[wi]=j.current,rc(s.nodeType===8?s.parentNode:s),vo(function(){Xh(a,j,u,p)}),j}function td(s,a,u,p,g){var v=u._reactRootContainer;if(v){var S=v;if(typeof g=="function"){var M=g;g=function(){var j=Jh(S);M.call(j)}}Xh(a,S,s,g)}else S=Uk(u,a,s,g,p);return Jh(S)}Xu=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var u=Yi(a.pendingLanes);u!==0&&(Qi(a,u|1),Sn(a,nt()),(We&6)===0&&(Ha=nt()+500,ss()))}break;case 13:vo(function(){var p=Ti(s,1);if(p!==null){var g=yn();Tr(p,s,1,g)}}),Cm(s,1)}},pa=function(s){if(s.tag===13){var a=Ti(s,134217728);if(a!==null){var u=yn();Tr(a,s,134217728,u)}Cm(s,134217728)}},Ju=function(s){if(s.tag===13){var a=hs(s),u=Ti(s,a);if(u!==null){var p=yn();Tr(u,s,a,p)}Cm(s,a)}},Zu=function(){return ze},eh=function(s,a){var u=ze;try{return ze=s,a()}finally{ze=u}},sa=function(s,a,u){switch(a){case"input":if(hi(s,u),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var p=u[a];if(p!==s&&p.form===s.form){var g=_h(p);if(!g)throw Error(t(90));At(p),hi(p,g)}}}break;case"textarea":ra(s,u);break;case"select":a=u.value,a!=null&&di(s,!!u.multiple,a,!1)}},Js=xm,Fl=vo;var zk={usingClientEntryPoint:!1,Events:[oc,Aa,_h,Lr,Vl,xm]},wc={findFiberByHostInstance:uo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Bk={bundleType:wc.bundleType,version:wc.version,rendererPackageName:wc.rendererPackageName,rendererConfig:wc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=zl(s),s===null?null:s.stateNode},findFiberByHostInstance:wc.findFiberByHostInstance||jk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{ro=nd.inject(Bk),Ln=nd}catch{}}return In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zk,In.createPortal=function(s,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rm(a))throw Error(t(200));return Fk(s,a,null,u)},In.createRoot=function(s,a){if(!Rm(s))throw Error(t(299));var u=!1,p="",g=$v;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(g=a.onRecoverableError)),a=Pm(s,1,!1,null,null,u,!1,p,g),s[wi]=a.current,rc(s.nodeType===8?s.parentNode:s),new Am(a)},In.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=zl(a),s=s===null?null:s.stateNode,s},In.flushSync=function(s){return vo(s)},In.hydrate=function(s,a,u){if(!ed(a))throw Error(t(200));return td(null,s,a,!0,u)},In.hydrateRoot=function(s,a,u){if(!Rm(s))throw Error(t(405));var p=u!=null&&u.hydratedSources||null,g=!1,v="",S=$v;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onRecoverableError!==void 0&&(S=u.onRecoverableError)),a=Hv(a,null,s,1,u??null,g,!1,v,S),s[wi]=a.current,rc(s),p)for(s=0;s<p.length;s++)u=p[s],g=u._getVersion,g=g(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,g]:a.mutableSourceEagerHydrationData.push(u,g);return new Zh(a)},In.render=function(s,a,u){if(!ed(a))throw Error(t(200));return td(null,s,a,!1,u)},In.unmountComponentAtNode=function(s){if(!ed(s))throw Error(t(40));return s._reactRootContainer?(vo(function(){td(null,null,s,!1,function(){s._reactRootContainer=null,s[wi]=null})}),!0):!1},In.unstable_batchedUpdates=xm,In.unstable_renderSubtreeIntoContainer=function(s,a,u,p){if(!ed(u))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return td(s,a,u,!1,p)},In.version="18.2.0-next-9e3b772b8-20220608",In}var AE;function $1(){if(AE)return Ym.exports;AE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ym.exports=fM(),Ym.exports}var RE;function pM(){if(RE)return cd;RE=1;var n=$1();return cd.createRoot=n.createRoot,cd.hydrateRoot=n.hydrateRoot,cd}var mM=pM();const gM=Eb(mM),q1=W.createContext(null),bl=()=>W.useContext(q1),yM=({children:n})=>{const[e,t]=W.useState(null),[r,i]=W.useState(!0);W.useEffect(()=>{const h=sT(Ld,f=>{t(f||null),i(!1)});return()=>h()},[]);const c={user:e,initializing:r,login:async(h,f)=>{const m=await iT(Ld,h,f);return t(m.user),m.user},logout:async()=>{await OA(Ld),t(null)}};return b.jsx(q1.Provider,{value:c,children:!r&&n})},_M={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_BASE:"https://utc-api.onrender.com",VITE_API_BASE_URL:"https://utc-api.onrender.com",VITE_SIGNAL_API_URL:"https://utc-ai-signal-api.onrender.com"},vM=typeof import.meta<"u"&&_M&&"https://utc-api.onrender.com"||"https://utc-api.onrender.com";async function d_(n,e={}){const t=/^https?:\/\//.test(n)?n:`${vM}${n.startsWith("/")?n:`/${n}`}`,r={"content-type":"application/json",...e.headers||{}},i=await fetch(t,{...e,headers:r}),o=await i.text();if(!i.ok)throw new Error(`HTTP ${i.status} ${i.statusText} for ${t} :: ${o.slice(0,200)}`);const l=(i.headers.get("content-type")||"").toLowerCase();if(!l.includes("application/json"))throw new Error(`Non-JSON response from ${t} :: CT=${l} :: Preview=${o.slice(0,200)}`);try{return JSON.parse(o)}catch(c){throw new Error(`Invalid JSON from ${t} :: ${c?.message} :: Preview=${o.slice(0,200)}`)}}async function wM(n){return(await d_(`/price?symbol=${n}`))?.price}async function zg(n){const e=Array.isArray(n)?n:[n],t=new URLSearchParams({symbols:e.join(",")}).toString();return d_(`/prices?${t}`)}async function EM(){return d_("/signals/tick")}const Du=W.createContext(),vs=1e4,Bg=["BTC","ETH","SOL","XRP","ADA","DOGE","SHIB","AVAX","TRX","DOT","MATIC","LTC","BCH","UNI","LINK","XLM","ATOM","ETC","FIL","APT","ARB","OP","NEAR","SUI","INJ","TWT","RUNE","PEPE","GMT","LDO","RNDR","FTM","EGLD","FLOW","GRT","IMX","STX","ENS","CRV","HBAR","CRO"],Qm=()=>new Date().toISOString(),Jt=n=>Math.round((Number(n)||0)*100)/100,bt=(n,e=0)=>Number.isFinite(n)?n:e,Hn=n=>String(n||"").toUpperCase();function Xm(){return{portfolioName:`PT${new Date().getFullYear()}${String(new Date().getMonth()+1).padStart(2,"0")}-001`,cash:vs,positions:[],history:[],watchlist:Bg,lastUpdated:null,snapRef:{ts:null,prices:{}}}}const xM=({children:n})=>{const{user:e}=bl(),[t,r]=W.useState(""),[i,o]=W.useState(vs),[l,c]=W.useState([]),[h,f]=W.useState([]),[m,y]=W.useState(Bg),[w,T]=W.useState({ts:null,prices:{}}),[I,k]=W.useState({}),[x,N]=W.useState(null);W.useEffect(()=>{if(!e?.uid)return;const R=Ir(_n,"portfolios",e.uid);let z=()=>{};return(async()=>((await Gc(R)).exists()||await u_(R,Xm(),{merge:!0}),z=oM(R,J=>{const oe=J.data()||{};r(oe.portfolioName||""),o(bt(oe.cash,vs)),c(Array.isArray(oe.positions)?oe.positions:[]),f(Array.isArray(oe.history)?oe.history:[]),y(Array.isArray(oe.watchlist)&&oe.watchlist.length?oe.watchlist:Bg),N(oe.lastUpdated||null),T({ts:oe.snapRef?.ts??null,prices:oe.snapRef?.prices??{}})})))(),()=>z()},[e]);const U=W.useMemo(()=>{const R={};for(const z of l){const X=Hn(z.symbol);R[X]||(R[X]=[]),R[X].push(z)}return R},[l]),H=W.useMemo(()=>{let R=0;for(const z of l){const X=Hn(z.symbol),J=bt(I[X],z.buyPrice);R+=bt(z.qty,0)*bt(J,0)}return Jt(R)},[l,I]),K=W.useMemo(()=>{let R=0;for(const z of l)R+=bt(z.qty,0)*bt(z.buyPrice,0);return Jt(R)},[l]),G=W.useMemo(()=>{let R=0;for(const z of h)z.type==="SELL"&&(Number.isFinite(z.pnlUSD)?R+=z.pnlUSD:Number.isFinite(z.price)&&Number.isFinite(z.qty)&&Number.isFinite(z.buyPrice)&&(R+=(z.price-z.buyPrice)*z.qty));return Jt(R)},[h]),ne=W.useMemo(()=>{let R=0;for(const z of l){const X=Hn(z.symbol),J=bt(I[X],z.buyPrice);R+=(bt(J,0)-bt(z.buyPrice,0))*bt(z.qty,0)}return Jt(R)},[l,I]),D=W.useMemo(()=>Jt(G+ne),[G,ne]),P=W.useMemo(()=>Jt(i+H),[i,H]),A=W.useMemo(()=>Jt((P-vs)/vs*100),[P]),V=W.useMemo(()=>l.length,[l]),L=W.useMemo(()=>{const R=h.filter(X=>X.type==="BUY").length,z=h.filter(X=>X.type==="SELL").length;return Math.min(R,z)},[h]),F=W.useMemo(()=>h.filter(R=>R.type==="SELL"&&bt(R.pnlUSD,0)>0).length,[h]),O=R=>{const z=Hn(R),X=bt(I[z],NaN),J=bt(w.prices?.[z],NaN);if(!Number.isFinite(X)||!Number.isFinite(J)||J<=0)return{"1m":null,"5m":null,"10m":null,"1h":null,"6h":null,"1d":null,"7d":null};const oe=Jt((X-J)/J*100);return{"1m":oe,"5m":oe,"10m":oe,"1h":oe,"6h":oe,"1d":oe,"7d":oe}},we=async()=>{try{const R=Array.from(new Set([...m.map(Hn),...l.map(J=>Hn(J.symbol))])).filter(Boolean);if(!R.length)return;let z={};for(const J of R)try{const ye=await(await fetch(`/api/candles?symbol=${J}USDT&interval=1m&limit=2`)).json();if(Array.isArray(ye)&&ye.length){const xe=ye[ye.length-1];z[J]=Number(xe.close)}}catch(oe){console.error(oe)}for(const J of Object.keys(prices)){const oe=Number(prices[J]);Number.isFinite(oe)&&(z[Hn(J)]=oe)}k(J=>({...J,...z}));const X=Qm();N(X),e?.uid&&await Ja(Ir(_n,"portfolios",e.uid),{lastUpdated:X})}catch{}},he=async(R,z)=>{if(!e?.uid)return;const X=Hn(R),J=Jt(bt(z,0));if(J<=0)return;const{prices:oe={}}=await zg([X]),ye=Number(oe[X]);if(!Number.isFinite(ye)||ye<=0)return;const xe=Jt(J/ye);if(xe<=0)return;const Se={id:`BUY-${Date.now()}`,type:"BUY",symbol:X,qty:xe,price:ye,at:Qm()},Re=Ir(_n,"portfolios",e.uid),st=(await Gc(Re)).data()||Xm(),tt=Jt(bt(st.cash,vs)-J);if(tt<0)return;const At=[{id:`POS-${Date.now()}`,symbol:X,qty:xe,buyPrice:ye,buyAt:Se.at},...Array.isArray(st.positions)?st.positions:[]],Gn=[Se,...Array.isArray(st.history)?st.history:[]];await Ja(Re,{cash:tt,positions:At,history:Gn})},Ie=async(R,z=100,X=null)=>{if(!e?.uid)return;const J=Hn(R),oe=Math.min(100,Math.max(0,bt(z,100))),ye=Ir(_n,"portfolios",e.uid),Se=(await Gc(ye)).data()||Xm(),Re=Array.isArray(Se.positions)?Se.positions:[],Ke=Re.findIndex(Nn=>Hn(Nn.symbol)===J);if(Ke<0)return;const st=Re[Ke];let tt=Number(X);if(!Number.isFinite(tt)||tt<=0){const{prices:Nn={}}=await zg([J]);if(tt=Number(Nn[J]),!Number.isFinite(tt)||tt<=0)return}const At=oe>=100?st.qty:Jt(bt(st.qty,0)*oe/100);if(At<=0)return;const Gn=Jt(At*tt),ui=Jt((tt-bt(st.buyPrice,0))*At),Bi={id:`SELL-${Date.now()}`,type:"SELL",symbol:J,qty:At,price:tt,at:Qm(),pnlUSD:ui,pnlPct:bt(st.buyPrice,0)>0?Jt((tt-st.buyPrice)/st.buyPrice*100):0,buyPrice:st.buyPrice},Hi=Jt(bt(st.qty,0)-At),hi=[...Re];Hi<=0?hi.splice(Ke,1):hi[Ke]={...st,qty:Hi};const ta=Jt(bt(Se.cash,vs)+Gn),Wi=[Bi,...Array.isArray(Se.history)?Se.history:[]];await Ja(ye,{cash:ta,positions:hi,history:Wi})},te=async()=>{if(!e?.uid)return;const R=Ir(_n,"portfolios",e.uid);await Ja(R,{cash:vs,positions:[]})},se=async()=>{if(!e?.uid)return;const R=Array.from(new Set([...m.map(Hn),...l.map(X=>Hn(X.symbol))])).filter(Boolean);if(!R.length)return;let z={};for(const X of R)try{const oe=await(await fetch(`/api/candles?symbol=${X}USDT&interval=1m&limit=2`)).json();if(Array.isArray(oe)&&oe.length){const ye=oe[oe.length-1];z[X]=Number(ye.close)}}catch(J){console.error(J)}for(const X of Object.keys(prices)){const J=Number(prices[X]);Number.isFinite(J)&&(z[Hn(X)]=J)}await Ja(Ir(_n,"portfolios",e.uid),{snapRef:{ts:Date.now(),prices:z}})};W.useEffect(()=>{we();const R=setInterval(we,6e4);return()=>clearInterval(R)},[e?.uid,m.length,l.length]);const pe=W.useMemo(()=>({portfolioName:t,cash:i,positions:l,history:h,watchlist:m,currentPrices:I,lastUpdated:x,positionsMap:U,investedAmount:K,openPositionsValue:H,totalValue:P,totalProfit:D,totalProfitPercent:A,activePositionsCount:V,totalTrades:L,positiveTrades:F,getDeltas:O,setWatchlist:y,updatePrices:we,buyPosition:he,sellPosition:Ie,resetPortfolio:te,setPortfolioName:r,setSharedSnapshotRef:se}),[t,i,l,h,m,I,x,U,K,H,P,D,A,V,L,F]);return b.jsx(Du.Provider,{value:pe,children:n})},DE=n=>typeof n!="number"||!Number.isFinite(n)?"":n>=1?n.toFixed(2):n>=.01?n.toFixed(4):n.toFixed(6),Y1=({show:n,symbol:e,price:t,percent:r,positions:i,onClose:o,onConfirm:l,onChangePercent:c,onSetMax:h})=>{if(!n)return null;const f=(e||"").toUpperCase(),m=Array.isArray(i)?i.find(x=>(x.symbol||"").toUpperCase()===f):null,y=typeof m?.quantity=="number"?m.quantity:m?.qty||0,w=(typeof m?.buyPrice=="number"?m.buyPrice:0)*(typeof y=="number"?y:0),T=(typeof t=="number"?t:0)*(typeof y=="number"?r/100*y:0),I=typeof t=="number"&&typeof m?.buyPrice=="number"&&typeof y=="number"?(t-m.buyPrice)*(y*(r/100)):0,k=I>=0?"lightgreen":"salmon";return b.jsx("div",{style:{position:"fixed",inset:0,background:"#0009",zIndex:1e3},children:b.jsxs("div",{style:{width:"min(560px, 92vw)",margin:"8% auto",background:"#1f1f1f",borderRadius:10,color:"#fff",padding:"1.25rem 1.25rem 1rem",border:"1px solid #2a2a2a",boxShadow:"0 8px 30px rgba(0,0,0,0.45)"},children:[b.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[b.jsxs("h3",{style:{margin:0},children:["VENTE  ",f]}),b.jsx("button",{onClick:o,style:{padding:"6px 10px",border:"1px solid #3a3a3a",borderRadius:6,background:"#2b2b2b",color:"#ddd",cursor:"pointer"},children:"Fermer"})]}),b.jsx("div",{style:{marginTop:12,padding:12,borderRadius:8,background:"#181818",border:"1px solid #2a2a2a"},children:m?b.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[b.jsxs("div",{children:[b.jsx("div",{style:{fontSize:12,color:"#9aa0a6"},children:"ID position"}),b.jsx("div",{style:{fontWeight:600,overflow:"hidden",textOverflow:"ellipsis"},children:m.id})]}),b.jsxs("div",{children:[b.jsx("div",{style:{fontSize:12,color:"#9aa0a6"},children:"Date & heure d'achat"}),b.jsx("div",{children:m.buyAt?new Date(m.buyAt).toLocaleString():""})]}),b.jsxs("div",{children:[b.jsx("div",{style:{fontSize:12,color:"#9aa0a6"},children:"Quantit"}),b.jsx("div",{style:{fontWeight:600},children:y??0})]}),b.jsxs("div",{children:[b.jsx("div",{style:{fontSize:12,color:"#9aa0a6"},children:"Investi ($)"}),b.jsx("div",{style:{fontWeight:600},children:w?`$${w.toFixed(2)}`:""})]}),b.jsxs("div",{children:[b.jsx("div",{style:{fontSize:12,color:"#9aa0a6"},children:"Prix d'achat"}),b.jsx("div",{children:DE(m.buyPrice)})]}),b.jsxs("div",{children:[b.jsx("div",{style:{fontSize:12,color:"#9aa0a6"},children:"Prix actuel"}),b.jsx("div",{children:DE(t)})]})]}):b.jsxs("div",{style:{color:"#bbb"},children:["Aucune position ouverte trouve pour ",b.jsx("b",{children:f}),"."]})}),b.jsxs("div",{style:{marginTop:16},children:[b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[b.jsx("label",{style:{display:"block"},children:"Pourcentage  vendre"}),b.jsx("button",{onClick:h,style:{marginLeft:"auto",padding:"6px 10px",border:"none",borderRadius:6,background:"#3a3a3a",color:"#fff",cursor:"pointer",fontWeight:600},children:"MAX"})]}),b.jsx("input",{type:"range",min:0,max:100,step:1,value:typeof r=="number"?r:100,onChange:c,style:{width:"100%"}}),b.jsxs("div",{style:{marginTop:8,display:"flex",gap:12,alignItems:"center",flexWrap:"wrap"},children:[b.jsxs("div",{style:{fontSize:14,color:"#9aa0a6"},children:["Pourcentage slectionn:",b.jsxs("b",{style:{color:"#fff"},children:[typeof r=="number"?r:100,"%"]})]}),b.jsxs("div",{style:{fontSize:14,color:"#9aa0a6"},children:["Produit de vente estim:",b.jsx("b",{style:{color:"#fff"},children:T?`$${T.toFixed(2)}`:""})]}),b.jsxs("div",{style:{fontSize:14,color:"#9aa0a6"},children:["Rsultat estim:",b.jsx("b",{style:{color:k},children:I?`$${I.toFixed(2)}`:""})]})]})]}),b.jsxs("div",{style:{display:"flex",gap:8,marginTop:16,justifyContent:"flex-end"},children:[b.jsx("button",{onClick:o,style:{padding:"10px 14px",border:"none",borderRadius:6,background:"#555",color:"#fff",cursor:"pointer"},children:"Annuler"}),b.jsx("button",{onClick:l,disabled:!m||!y||r<=0,style:{padding:"10px 14px",border:"none",borderRadius:6,background:!m||!y||r<=0?"#2f4f2f":"#dc3545",color:"#fff",cursor:!m||!y||r<=0?"not-allowed":"pointer",fontWeight:700},children:"Confirmer la vente"})]})]})})},bM=n=>typeof n=="number"&&Number.isFinite(n)?`${n.toFixed(2)}%`:"",TM=n=>typeof n!="number"||!Number.isFinite(n)?"":n>=1?n.toFixed(2):n>=.01?n.toFixed(4):n.toFixed(6),SM=({show:n,symbol:e,amount:t,onChangeAmount:r,onClose:i,onConfirm:o})=>n?b.jsx("div",{style:{position:"fixed",inset:0,background:"#0009",zIndex:1e3},children:b.jsxs("div",{style:{width:"min(520px, 92vw)",margin:"10% auto",background:"#1f1f1f",borderRadius:8,color:"#fff",padding:"1.25rem 1.25rem 1rem"},children:[b.jsxs("h3",{style:{marginTop:0},children:["ACHAT  ",e]}),b.jsx("label",{style:{display:"block",marginBottom:8},children:"Montant en USD"}),b.jsx("input",{type:"number",min:"1",step:"1",value:t,onChange:l=>r(l.target.value),style:{width:"100%",padding:"10px 12px",borderRadius:6,border:"1px solid #333",background:"#121212",color:"#fff"},placeholder:"Ex: 1000"}),b.jsxs("div",{style:{display:"flex",gap:8,marginTop:16,justifyContent:"flex-end"},children:[b.jsx("button",{onClick:i,style:{padding:"10px 14px",border:"none",borderRadius:6,background:"#555",color:"#fff",cursor:"pointer"},children:"Annuler"}),b.jsx("button",{onClick:o,style:{padding:"10px 14px",border:"none",borderRadius:6,background:"#198754",color:"#fff",cursor:"pointer",fontWeight:600},children:"Confirmer lachat"})]})]})}):null;function IM(){const{currentPrices:n,positionsMap:e,buyPosition:t,sellPosition:r,getDeltas:i,lastUpdated:o}=W.useContext(Du),[l,c]=W.useState(!1),[h,f]=W.useState(""),[m,y]=W.useState(""),[w,T]=W.useState(!1),[I,k]=W.useState(""),[x,N]=W.useState(100),U=W.useMemo(()=>{const he=[];for(const Ie of Object.values(e||{}))for(const te of Ie)he.push({...te,quantity:te.qty});return he},[e]),{gainers:H,losers:K}=W.useMemo(()=>{const Ie=Object.keys(n||{}).map(te=>{const se=i(te)||{};return{symbol:te.toUpperCase(),price:n[te],change5m:typeof se["5m"]=="number"?se["5m"]:null}}).filter(te=>typeof te.change5m=="number");return Ie.sort((te,se)=>(se.change5m??-1/0)-(te.change5m??-1/0)),{gainers:Ie.slice(0,5),losers:Ie.slice(-5).reverse()}},[n,i]),G=he=>!!(e&&e[(he||"").toUpperCase()]),ne=he=>{f(he.toUpperCase()),y(""),c(!0)},D=async()=>{const he=Number(m);!Number.isFinite(he)||he<=0||(await t(h,he),c(!1))},P=he=>{k(he.toUpperCase()),N(100),T(!0)},A=async()=>{await r(I,x),T(!1)},V={overflowX:"auto",borderRadius:8,border:"1px solid #2a2a2a"},L={width:"100%",borderCollapse:"collapse",minWidth:620,color:"#fff"},F={textAlign:"left",padding:"10px 12px",background:"#232323",position:"sticky",top:0},O={padding:"10px 12px",borderTop:"1px solid #2a2a2a"},we=he=>he.map((Ie,te)=>{const se=Ie.symbol.toUpperCase(),pe=Ie.price??NaN,R=Ie.change5m;return b.jsxs("tr",{style:{background:te%2?"#222":"#262626"},children:[b.jsx("td",{style:O,children:b.jsx("b",{children:se})}),b.jsx("td",{style:O,children:TM(pe)}),b.jsx("td",{style:{...O,color:typeof R=="number"?R>=0?"lightgreen":"salmon":"#ddd"},children:typeof R=="number"?bM(R):""}),b.jsx("td",{style:O,children:b.jsxs("div",{style:{display:"flex",gap:8},children:[b.jsx("button",{onClick:()=>ne(se),style:{padding:"6px 10px",border:"none",borderRadius:4,background:"#198754",color:"#fff",cursor:"pointer",fontWeight:600},children:"ACHAT"}),G(se)&&b.jsx("button",{onClick:()=>P(se),style:{padding:"6px 10px",border:"none",borderRadius:4,background:"#dc3545",color:"#fff",cursor:"pointer",fontWeight:600},children:"VENTE"})]})}),b.jsx("td",{style:O,children:G(se)?b.jsx("span",{style:{color:"#dc3545"},children:""}):b.jsx("span",{style:{color:"#888"},children:""})}),b.jsx("td",{style:O,children:b.jsx("a",{href:`https://www.tradingview.com/symbols/${se}USD`,target:"_blank",rel:"noreferrer",style:{color:"#4ea8de",fontWeight:700,textDecoration:"none"},children:""})})]},`${se}-${te}`)});return b.jsxs("div",{children:[b.jsxs("div",{style:{display:"flex",gap:16,alignItems:"baseline",marginBottom:10},children:[b.jsx("h2",{style:{margin:0},children:"Top Movers (5m)"}),b.jsx("span",{style:{color:"#aaa",fontSize:12},children:o?`MAJ ${new Date(o).toLocaleTimeString()}`:""})]}),b.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:16},children:[b.jsxs("div",{style:{background:"#1b1b1b",padding:12,borderRadius:8,border:"1px solid #2a2a2a"},children:[b.jsx("h4",{style:{margin:"0 0 8px 0",color:"#7ee787"},children:"Hausses  5 min"}),b.jsx("div",{style:V,children:b.jsxs("table",{style:L,children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{style:F,children:"Crypto"}),b.jsx("th",{style:F,children:"Prix (USD)"}),b.jsx("th",{style:F,children:"Var 5m"}),b.jsx("th",{style:F}),b.jsx("th",{style:F}),b.jsx("th",{style:F,children:"TD"})]})}),b.jsx("tbody",{children:we(H)})]})})]}),b.jsxs("div",{style:{background:"#1b1b1b",padding:12,borderRadius:8,border:"1px solid #2a2a2a"},children:[b.jsx("h4",{style:{margin:"0 0 8px 0",color:"#ff7b72"},children:"Baisses  5 min"}),b.jsx("div",{style:V,children:b.jsxs("table",{style:L,children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{style:F,children:"Crypto"}),b.jsx("th",{style:F,children:"Prix (USD)"}),b.jsx("th",{style:F,children:"Var 5m"}),b.jsx("th",{style:F}),b.jsx("th",{style:F}),b.jsx("th",{style:F,children:"TD"})]})}),b.jsx("tbody",{children:we(K)})]})})]})]}),b.jsx(SM,{show:l,symbol:h,amount:m,onChangeAmount:y,onClose:()=>c(!1),onConfirm:D}),b.jsx(Y1,{show:w,symbol:I,price:n[(I||"").toUpperCase()]??0,percent:x,positions:U,onClose:()=>T(!1),onConfirm:A,onChangePercent:he=>N(Number(he.target.value)),onSetMax:()=>N(100)})]})}const OE=["BTC","ETH","USDT","BNB","ADA","SOL","XRP","DOT","DOGE","MATIC"];function Hg(n){return n==null?"":n>=1e3?n.toLocaleString(void 0,{maximumFractionDigits:0}):n.toFixed(2)}function kM(n){if(n==null)return"";const e=Number.isFinite(n)?n:null;return e==null?"":`${Math.abs(e)<.01?e.toFixed(3):e.toFixed(2)}%`}function bo({k:n,v:e}){const t=e==null?"neutral":e>0?"up":e<0?"down":"neutral";return b.jsxs("div",{className:"tr-chip",children:[b.jsx("span",{className:"k",children:n}),b.jsx("span",{className:`v ${t}`,children:kM(e)})]})}function PM({sym:n,price:e,deltas:t,hasPos:r,onBuy:i,onSell:o}){const l=t?.["1m"],c=typeof l=="number"?l>0?"rgba(0,255,0,0.06)":l<0?"rgba(255,0,0,0.06)":"transparent":"transparent";return b.jsxs("li",{className:"tr-row",style:{background:`linear-gradient(${c}, ${c})`},children:[b.jsxs("div",{className:"tr-sym",children:[b.jsx("span",{className:"code",children:n}),b.jsx("a",{href:`https://www.tradingview.com/symbols/${n}USD`,target:"_blank",rel:"noreferrer",className:"pair",children:" TV"})]}),b.jsx("div",{className:"tr-price",children:e!=null?`$${Hg(e)}`:""}),b.jsxs("div",{className:"tr-vars",children:[b.jsx(bo,{k:"1m",v:t["1m"]}),b.jsx(bo,{k:"5m",v:t["5m"]}),b.jsx(bo,{k:"10m",v:t["10m"]}),b.jsx(bo,{k:"1h",v:t["1h"]}),b.jsx(bo,{k:"6h",v:t["6h"]}),b.jsx(bo,{k:"1d",v:t["1d"]}),b.jsx(bo,{k:"7d",v:t["7d"]})]}),b.jsxs("div",{className:"tr-actions",children:[b.jsx("button",{className:"tr-btn buy",onClick:()=>i(n,e),disabled:!e,children:"Acheter"}),b.jsx("button",{className:"tr-btn sell",onClick:()=>o(n,e),disabled:!r||!e,children:"Vendre"})]})]})}function ME(){const{cash:n,positions:e,currentPrices:t,lastUpdated:r,buyPosition:i,sellPosition:o,resetPortfolio:l,updatePrices:c,getDeltas:h}=W.useContext(Du),f=W.useMemo(()=>{const H=Object.keys(t||{});return H.sort((K,G)=>{const ne=OE.indexOf(K),D=OE.indexOf(G);return ne!==-1||D!==-1?(ne===-1?999:ne)-(D===-1?999:D):K.localeCompare(G)}),H},[t]),[m,y]=W.useState(null),[w,T]=W.useState(100),[I,k]=W.useState(null);function x(H,K){const G=window.prompt(`USD  investir dans ${H} :`,"0"),ne=parseFloat(G||"0");ne>0&&K&&i(H,ne)}function N(H,K){y(H),T(100),k(K)}function U(){const H=e.find(ne=>(ne.symbol||"").toUpperCase()===m);if(!H||!I){y(null);return}const K=H.qty*I;w/100*K>0&&o(m,w,I),y(null)}return b.jsx("div",{style:{minHeight:"100vh",backgroundImage:'url("/backgrounds/homebackground.png")',backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundAttachment:"fixed"},children:b.jsxs("div",{className:"tr-wrap",style:{paddingTop:"108px"},children:[b.jsx("div",{className:"tr-header",children:b.jsx("h2",{style:{margin:0},children:" Trading"})}),b.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, minmax(140px, 1fr))",gap:8,alignItems:"center",marginBottom:12},children:[b.jsxs("div",{style:{padding:"10px 12px",borderRadius:10,border:"1px solid rgba(255,255,255,0.18)",background:"rgba(0,0,0,0.18)"},children:["Cash $",Hg(n)]}),b.jsxs("div",{style:{padding:"10px 12px",borderRadius:10,border:"1px solid rgba(255,255,255,0.18)",background:"rgba(0,0,0,0.18)"},children:["Valeur totale $",Hg(e.reduce((H,K)=>H+K.qty*(t[(K.symbol||"").toUpperCase()]||0),n))]}),b.jsx("div",{style:{padding:"10px 12px",borderRadius:10,border:"1px solid rgba(255,255,255,0.18)",background:"rgba(0,0,0,0.18)"},children:"P&L %"}),b.jsx("button",{onClick:c,className:"tr-btn buy",style:{cursor:"pointer"},children:"Mettre  jour"}),b.jsx("button",{onClick:l,className:"tr-btn sell",style:{cursor:"pointer"},children:"RESET PT"})]}),b.jsxs("div",{style:{color:"var(--muted)",fontSize:12,marginBottom:10},children:["Dernire mise  jour: ",r?new Date(r).toLocaleString():"","  Variations = *prix backend* vs *snapshot persistant* (1m7j)."]}),b.jsx("div",{style:{margin:"10px 0 18px 0"},children:b.jsx(IM,{})}),b.jsx("ul",{className:"tr-list",children:f.map(H=>b.jsx(PM,{sym:H,price:t[H],deltas:h(H),hasPos:e.some(K=>(K.symbol||"").toUpperCase()===H&&K.qty>0),onBuy:x,onSell:N},H))}),m&&b.jsx("div",{style:{position:"fixed",inset:0,background:"#0009",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},children:b.jsxs("div",{style:{width:"min(520px, 92vw)",background:"#1f1f1f",borderRadius:8,color:"#fff",padding:"1.25rem 1.25rem 1rem"},children:[b.jsxs("h3",{style:{marginTop:0},children:["Vendre ",m]}),b.jsxs("div",{style:{margin:"8px 0"},children:[b.jsxs("label",{style:{display:"block",marginBottom:6},children:["%  vendre : ",w,"%"]}),b.jsx("input",{type:"range",min:1,max:100,value:w,onChange:H=>T(Number(H.target.value)),style:{width:"100%"}}),b.jsx("button",{onClick:()=>T(100),style:{marginTop:8,padding:"6px 10px",border:"none",borderRadius:6,background:"#555",color:"#fff",cursor:"pointer"},children:"Max"})]}),b.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8},children:[b.jsx("button",{onClick:()=>y(null),style:{padding:"8px 12px",border:"none",borderRadius:6,background:"#555",color:"#fff",cursor:"pointer"},children:"Annuler"}),b.jsx("button",{onClick:U,style:{padding:"8px 12px",border:"none",borderRadius:6,background:"#dc3545",color:"#fff",cursor:"pointer"},children:"Vendre"})]})]})})]})})}$1();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function du(){return du=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},du.apply(this,arguments)}var Is;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Is||(Is={}));const NE="popstate";function CM(n){n===void 0&&(n={});function e(r,i){let{pathname:o,search:l,hash:c}=r.location;return Wg("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:hf(i)}return RM(e,t,null,n)}function Pt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function G1(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AM(){return Math.random().toString(36).substr(2,8)}function LE(n,e){return{usr:n.state,key:n.key,idx:e}}function Wg(n,e,t,r){return t===void 0&&(t=null),du({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Tl(e):e,{state:t,key:e&&e.key||r||AM()})}function hf(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Tl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function RM(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,c=Is.Pop,h=null,f=m();f==null&&(f=0,l.replaceState(du({},l.state,{idx:f}),""));function m(){return(l.state||{idx:null}).idx}function y(){c=Is.Pop;let x=m(),N=x==null?null:x-f;f=x,h&&h({action:c,location:k.location,delta:N})}function w(x,N){c=Is.Push;let U=Wg(k.location,x,N);f=m()+1;let H=LE(U,f),K=k.createHref(U);try{l.pushState(H,"",K)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;i.location.assign(K)}o&&h&&h({action:c,location:k.location,delta:1})}function T(x,N){c=Is.Replace;let U=Wg(k.location,x,N);f=m();let H=LE(U,f),K=k.createHref(U);l.replaceState(H,"",K),o&&h&&h({action:c,location:k.location,delta:0})}function I(x){let N=i.location.origin!=="null"?i.location.origin:i.location.href,U=typeof x=="string"?x:hf(x);return U=U.replace(/ $/,"%20"),Pt(N,"No window.location.(origin|href) available to create URL for href: "+U),new URL(U,N)}let k={get action(){return c},get location(){return n(i,l)},listen(x){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(NE,y),h=x,()=>{i.removeEventListener(NE,y),h=null}},createHref(x){return e(i,x)},createURL:I,encodeLocation(x){let N=I(x);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:w,replace:T,go(x){return l.go(x)}};return k}var VE;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(VE||(VE={}));function DM(n,e,t){return t===void 0&&(t="/"),OM(n,e,t)}function OM(n,e,t,r){let i=typeof e=="string"?Tl(e):e,o=f_(i.pathname||"/",t);if(o==null)return null;let l=K1(n);MM(l);let c=null;for(let h=0;c==null&&h<l.length;++h){let f=qM(o);c=HM(l[h],f)}return c}function K1(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(o,l,c)=>{let h={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};h.relativePath.startsWith("/")&&(Pt(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let f=Ms([r,h.relativePath]),m=t.concat(h);o.children&&o.children.length>0&&(Pt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),K1(o.children,e,m,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:zM(f,o.index),routesMeta:m})};return n.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,l);else for(let h of Q1(o.path))i(o,l,h)}),e}function Q1(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=Q1(r.join("/")),c=[];return c.push(...l.map(h=>h===""?o:[o,h].join("/"))),i&&c.push(...l),c.map(h=>n.startsWith("/")&&h===""?"/":h)}function MM(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:BM(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const NM=/^:[\w-]+$/,LM=3,VM=2,FM=1,jM=10,UM=-2,FE=n=>n==="*";function zM(n,e){let t=n.split("/"),r=t.length;return t.some(FE)&&(r+=UM),e&&(r+=VM),t.filter(i=>!FE(i)).reduce((i,o)=>i+(NM.test(o)?LM:o===""?FM:jM),r)}function BM(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function HM(n,e,t){let{routesMeta:r}=n,i={},o="/",l=[];for(let c=0;c<r.length;++c){let h=r[c],f=c===r.length-1,m=o==="/"?e:e.slice(o.length)||"/",y=WM({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},m),w=h.route;if(!y)return null;Object.assign(i,y.params),l.push({params:i,pathname:Ms([o,y.pathname]),pathnameBase:QM(Ms([o,y.pathnameBase])),route:w}),y.pathnameBase!=="/"&&(o=Ms([o,y.pathnameBase]))}return l}function WM(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=$M(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((f,m,y)=>{let{paramName:w,isOptional:T}=m;if(w==="*"){let k=c[y]||"";l=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const I=c[y];return T&&!I?f[w]=void 0:f[w]=(I||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:n}}function $M(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),G1(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,h)=>(r.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function qM(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return G1(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function f_(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function YM(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Tl(n):n;return{pathname:t?t.startsWith("/")?t:GM(t,e):e,search:XM(r),hash:JM(i)}}function GM(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Jm(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function KM(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function p_(n,e){let t=KM(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function m_(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Tl(n):(i=du({},n),Pt(!i.pathname||!i.pathname.includes("?"),Jm("?","pathname","search",i)),Pt(!i.pathname||!i.pathname.includes("#"),Jm("#","pathname","hash",i)),Pt(!i.search||!i.search.includes("#"),Jm("#","search","hash",i)));let o=n===""||i.pathname==="",l=o?"/":i.pathname,c;if(l==null)c=t;else{let y=e.length-1;if(!r&&l.startsWith("..")){let w=l.split("/");for(;w[0]==="..";)w.shift(),y-=1;i.pathname=w.join("/")}c=y>=0?e[y]:"/"}let h=YM(i,c),f=l&&l!=="/"&&l.endsWith("/"),m=(o||l===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(f||m)&&(h.pathname+="/"),h}const Ms=n=>n.join("/").replace(/\/\/+/g,"/"),QM=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),XM=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,JM=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function ZM(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const X1=["post","put","patch","delete"];new Set(X1);const eN=["get",...X1];new Set(eN);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fu(){return fu=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},fu.apply(this,arguments)}const g_=W.createContext(null),tN=W.createContext(null),Ys=W.createContext(null),Yf=W.createContext(null),Gs=W.createContext({outlet:null,matches:[],isDataRoute:!1}),J1=W.createContext(null);function nN(n,e){let{relative:t}=e===void 0?{}:e;Sl()||Pt(!1);let{basename:r,navigator:i}=W.useContext(Ys),{hash:o,pathname:l,search:c}=eS(n,{relative:t}),h=l;return r!=="/"&&(h=l==="/"?r:Ms([r,l])),i.createHref({pathname:h,search:c,hash:o})}function Sl(){return W.useContext(Yf)!=null}function Ou(){return Sl()||Pt(!1),W.useContext(Yf).location}function Z1(n){W.useContext(Ys).static||W.useLayoutEffect(n)}function Gf(){let{isDataRoute:n}=W.useContext(Gs);return n?mN():rN()}function rN(){Sl()||Pt(!1);let n=W.useContext(g_),{basename:e,future:t,navigator:r}=W.useContext(Ys),{matches:i}=W.useContext(Gs),{pathname:o}=Ou(),l=JSON.stringify(p_(i,t.v7_relativeSplatPath)),c=W.useRef(!1);return Z1(()=>{c.current=!0}),W.useCallback(function(f,m){if(m===void 0&&(m={}),!c.current)return;if(typeof f=="number"){r.go(f);return}let y=m_(f,JSON.parse(l),o,m.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Ms([e,y.pathname])),(m.replace?r.replace:r.push)(y,m.state,m)},[e,r,l,o,n])}function eS(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=W.useContext(Ys),{matches:i}=W.useContext(Gs),{pathname:o}=Ou(),l=JSON.stringify(p_(i,r.v7_relativeSplatPath));return W.useMemo(()=>m_(n,JSON.parse(l),o,t==="path"),[n,l,o,t])}function iN(n,e){return sN(n,e)}function sN(n,e,t,r){Sl()||Pt(!1);let{navigator:i}=W.useContext(Ys),{matches:o}=W.useContext(Gs),l=o[o.length-1],c=l?l.params:{};l&&l.pathname;let h=l?l.pathnameBase:"/";l&&l.route;let f=Ou(),m;if(e){var y;let x=typeof e=="string"?Tl(e):e;h==="/"||(y=x.pathname)!=null&&y.startsWith(h)||Pt(!1),m=x}else m=f;let w=m.pathname||"/",T=w;if(h!=="/"){let x=h.replace(/^\//,"").split("/");T="/"+w.replace(/^\//,"").split("/").slice(x.length).join("/")}let I=DM(n,{pathname:T}),k=uN(I&&I.map(x=>Object.assign({},x,{params:Object.assign({},c,x.params),pathname:Ms([h,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?h:Ms([h,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),o,t,r);return e&&k?W.createElement(Yf.Provider,{value:{location:fu({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Is.Pop}},k):k}function oN(){let n=pN(),e=ZM(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),t?W.createElement("pre",{style:i},t):null,null)}const aN=W.createElement(oN,null);class lN extends W.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?W.createElement(Gs.Provider,{value:this.props.routeContext},W.createElement(J1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cN(n){let{routeContext:e,match:t,children:r}=n,i=W.useContext(g_);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),W.createElement(Gs.Provider,{value:e},r)}function uN(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var o;if(!t)return null;if(t.errors)n=t.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=(i=t)==null?void 0:i.errors;if(c!=null){let m=l.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);m>=0||Pt(!1),l=l.slice(0,Math.min(l.length,m+1))}let h=!1,f=-1;if(t&&r&&r.v7_partialHydration)for(let m=0;m<l.length;m++){let y=l[m];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=m),y.route.id){let{loaderData:w,errors:T}=t,I=y.route.loader&&w[y.route.id]===void 0&&(!T||T[y.route.id]===void 0);if(y.route.lazy||I){h=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((m,y,w)=>{let T,I=!1,k=null,x=null;t&&(T=c&&y.route.id?c[y.route.id]:void 0,k=y.route.errorElement||aN,h&&(f<0&&w===0?(gN("route-fallback"),I=!0,x=null):f===w&&(I=!0,x=y.route.hydrateFallbackElement||null)));let N=e.concat(l.slice(0,w+1)),U=()=>{let H;return T?H=k:I?H=x:y.route.Component?H=W.createElement(y.route.Component,null):y.route.element?H=y.route.element:H=m,W.createElement(cN,{match:y,routeContext:{outlet:m,matches:N,isDataRoute:t!=null},children:H})};return t&&(y.route.ErrorBoundary||y.route.errorElement||w===0)?W.createElement(lN,{location:t.location,revalidation:t.revalidation,component:k,error:T,children:U(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):U()},null)}var tS=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(tS||{}),nS=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(nS||{});function hN(n){let e=W.useContext(g_);return e||Pt(!1),e}function dN(n){let e=W.useContext(tN);return e||Pt(!1),e}function fN(n){let e=W.useContext(Gs);return e||Pt(!1),e}function rS(n){let e=fN(),t=e.matches[e.matches.length-1];return t.route.id||Pt(!1),t.route.id}function pN(){var n;let e=W.useContext(J1),t=dN(),r=rS();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function mN(){let{router:n}=hN(tS.UseNavigateStable),e=rS(nS.UseNavigateStable),t=W.useRef(!1);return Z1(()=>{t.current=!0}),W.useCallback(function(i,o){o===void 0&&(o={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,fu({fromRouteId:e},o)))},[n,e])}const jE={};function gN(n,e,t){jE[n]||(jE[n]=!0)}function yN(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function iS(n){let{to:e,replace:t,state:r,relative:i}=n;Sl()||Pt(!1);let{future:o,static:l}=W.useContext(Ys),{matches:c}=W.useContext(Gs),{pathname:h}=Ou(),f=Gf(),m=m_(e,p_(c,o.v7_relativeSplatPath),h,i==="path"),y=JSON.stringify(m);return W.useEffect(()=>f(JSON.parse(y),{replace:t,state:r,relative:i}),[f,y,i,t,r]),null}function Gr(n){Pt(!1)}function _N(n){let{basename:e="/",children:t=null,location:r,navigationType:i=Is.Pop,navigator:o,static:l=!1,future:c}=n;Sl()&&Pt(!1);let h=e.replace(/^\/*/,"/"),f=W.useMemo(()=>({basename:h,navigator:o,static:l,future:fu({v7_relativeSplatPath:!1},c)}),[h,c,o,l]);typeof r=="string"&&(r=Tl(r));let{pathname:m="/",search:y="",hash:w="",state:T=null,key:I="default"}=r,k=W.useMemo(()=>{let x=f_(m,h);return x==null?null:{location:{pathname:x,search:y,hash:w,state:T,key:I},navigationType:i}},[h,m,y,w,T,I,i]);return k==null?null:W.createElement(Ys.Provider,{value:f},W.createElement(Yf.Provider,{children:t,value:k}))}function vN(n){let{children:e,location:t}=n;return iN($g(e),t)}new Promise(()=>{});function $g(n,e){e===void 0&&(e=[]);let t=[];return W.Children.forEach(n,(r,i)=>{if(!W.isValidElement(r))return;let o=[...e,i];if(r.type===W.Fragment){t.push.apply(t,$g(r.props.children,o));return}r.type!==Gr&&Pt(!1),!r.props.index||!r.props.children||Pt(!1);let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=$g(r.props.children,o)),t.push(l)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qg(){return qg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},qg.apply(this,arguments)}function wN(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function EN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function xN(n,e){return n.button===0&&(!e||e==="_self")&&!EN(n)}const bN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],TN="6";try{window.__reactRouterVersion=TN}catch{}const SN="startTransition",UE=Gk[SN];function IN(n){let{basename:e,children:t,future:r,window:i}=n,o=W.useRef();o.current==null&&(o.current=CM({window:i,v5Compat:!0}));let l=o.current,[c,h]=W.useState({action:l.action,location:l.location}),{v7_startTransition:f}=r||{},m=W.useCallback(y=>{f&&UE?UE(()=>h(y)):h(y)},[h,f]);return W.useLayoutEffect(()=>l.listen(m),[l,m]),W.useEffect(()=>yN(r),[r]),W.createElement(_N,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:l,future:r})}const kN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",PN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qn=W.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:o,replace:l,state:c,target:h,to:f,preventScrollReset:m,viewTransition:y}=e,w=wN(e,bN),{basename:T}=W.useContext(Ys),I,k=!1;if(typeof f=="string"&&PN.test(f)&&(I=f,kN))try{let H=new URL(window.location.href),K=f.startsWith("//")?new URL(H.protocol+f):new URL(f),G=f_(K.pathname,T);K.origin===H.origin&&G!=null?f=G+K.search+K.hash:k=!0}catch{}let x=nN(f,{relative:i}),N=CN(f,{replace:l,state:c,target:h,preventScrollReset:m,relative:i,viewTransition:y});function U(H){r&&r(H),H.defaultPrevented||N(H)}return W.createElement("a",qg({},w,{href:I||x,onClick:k||o?r:U,ref:t,target:h}))});var zE;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(zE||(zE={}));var BE;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(BE||(BE={}));function CN(n,e){let{target:t,replace:r,state:i,preventScrollReset:o,relative:l,viewTransition:c}=e===void 0?{}:e,h=Gf(),f=Ou(),m=eS(n,{relative:l});return W.useCallback(y=>{if(xN(y,t)){y.preventDefault();let w=r!==void 0?r:hf(f)===hf(m);h(n,{replace:w,state:i,preventScrollReset:o,relative:l,viewTransition:c})}},[f,h,m,r,i,t,n,o,l,c])}const sS=W.createContext({pendingUsers:0}),oS=()=>W.useContext(sS),AN=({children:n})=>{const[e,t]=W.useState(0);return W.useEffect(()=>{let r=!1;const i=async()=>{try{let l=0;try{const c=z1(lf(_n,"users"),eM("approved","==",!1));l=(await uf(c)).size}catch{}if(l===0)try{l=(await uf(lf(_n,"pendingUsers"))).size}catch{}r||t(l)}catch{r||t(0)}};i();const o=setInterval(i,3e4);return()=>{r=!0,clearInterval(o)}},[]),b.jsx(sS.Provider,{value:{pendingUsers:e},children:n})},RN=()=>{const{user:n,logout:e}=bl(),{pendingUsers:t}=oS(),[r,i]=W.useState(!1),o=W.useRef(null);W.useEffect(()=>{const h=f=>{r&&o.current&&!o.current.contains(f.target)&&i(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[r]);const l=()=>i(!1),c={display:"block",padding:"1rem",color:"#fff",fontSize:"1.2rem",textDecoration:"none"};return b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100%",padding:"1rem 1rem 1rem 1.5rem",display:"flex",alignItems:"center",gap:"1rem",backgroundColor:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(8px)",zIndex:1e3},children:[b.jsx("button",{onClick:()=>i(!r),style:{fontSize:"2rem",background:"transparent",color:"#fff",border:"none",cursor:"pointer"},children:""}),b.jsx("h1",{style:{color:"#4ea8de",fontFamily:"sans-serif",fontSize:"1.5rem",animation:"slideTitle 2s ease-in-out infinite alternate"},children:"Ultimate Trading Champions"})]}),b.jsxs("div",{ref:o,style:{position:"fixed",top:0,left:r?0:"-260px",width:"260px",height:"100%",backgroundImage:'url("/backgrounds/menubackground.png")',backgroundSize:"cover",backgroundPosition:"center",transition:"left 0.3s ease-in-out",zIndex:999,paddingTop:"5rem",fontFamily:"sans-serif",borderRight:"1px solid #333",overflow:"hidden"},children:[b.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(8px)",zIndex:0}}),b.jsxs("div",{style:{position:"relative",zIndex:1},children:[b.jsx(qn,{to:"/",onClick:l,style:c,children:" Accueil"}),n&&b.jsxs(b.Fragment,{children:[b.jsx(qn,{to:"/trading",onClick:l,style:c,children:" Trading"}),b.jsx(qn,{to:"/ia-trader",onClick:l,style:c,children:" IA Trader"}),b.jsx(qn,{to:"/analysis",onClick:l,style:c,children:" Analyse"}),b.jsx(qn,{to:"/signals",onClick:l,style:c,children:" Signaux"}),b.jsx(qn,{to:"/profile",onClick:l,style:c,children:" Profil"})]}),n?.email==="xzno4rzx@gmail.com"&&b.jsxs(qn,{to:"/admin",onClick:l,style:{...c,color:"#4ea8de",position:"relative"},children:[" Admin",t>0&&b.jsx("span",{style:{position:"absolute",top:"8px",right:"20px",background:"red",color:"#fff",borderRadius:"50%",padding:"2px 6px",fontSize:"0.7rem"},children:t})]}),b.jsx("div",{style:{marginTop:"2rem"},children:n?b.jsx("button",{onClick:()=>{e(),i(!1)},style:{...c,background:"transparent",border:"none",cursor:"pointer",textAlign:"left"},children:" Dconnexion"}):b.jsx(qn,{to:"/login",onClick:l,style:c,children:" Connexion"})})]})]}),b.jsx("style",{children:`
        @keyframes slideTitle {
          0% { transform: translateX(0px); opacity: 0.8; }
          100% { transform: translateX(4px); opacity: 1; }
        }
      `})]})},DN=async n=>{try{const e=Ir(_n,"iatraders",n),t=await Gc(e);return t.exists()?t.data():null}catch(e){return console.error(" Firestore loadIATrader:",e),null}},ON=async(n,e)=>{try{const t=Ir(_n,"iatraders",n);await u_(t,e,{merge:!0})}catch(t){console.error(" Firestore saveIATrader:",t)}},aS=W.createContext(),$a=Object.freeze({buyFraction:1/3,takeProfit:.03,stopLoss:.05,checkIntervalSec:60,minScore:{conservateur:16,equilibre:12,aggressif:8}}),To=()=>new Date().toISOString(),sr=n=>Math.round(n*100)/100,Wn=(n,e=0)=>typeof n=="number"&&Number.isFinite(n)?n:e,HE=async n=>{const e=String(n||"").toUpperCase(),{price:t}=await wM(e),r=Number(t);return Number.isFinite(r)?r:NaN},WE=async n=>{if(!n||n.length===0)return{};const e=Array.from(new Set(n.map(i=>String(i||"").toUpperCase()))),{prices:t={}}=await zg(e),r={};for(const i of e){const o=Number(t?.[i]??t?.[`${i}USDT`]);Number.isFinite(o)&&(r[i]=o)}return r},MN=({children:n})=>{const{user:e}=bl(),[t]=W.useState("IA Trader"),[r,i]=W.useState(()=>To()),[o,l]=W.useState(1e4),[c,h]=W.useState([]),[f,m]=W.useState([]),[y,w]=W.useState({}),[T,I]=W.useState(!1),[k,x]=W.useState("equilibre"),[N,U]=W.useState(null),[H,K]=W.useState([]),[G,ne]=W.useState($a.checkIntervalSec),D=W.useMemo(()=>c.reduce((z,X)=>{const J=(X.symbol||"").toUpperCase(),oe=Wn(y[J],X.buyPrice);return z+Wn(X.qty,0)*oe},0),[c,y]),P=W.useMemo(()=>sr(o+D),[o,D]),A=z=>{K(X=>[`[${new Date().toLocaleTimeString()}] ${z}`,...X].slice(0,500))};W.useEffect(()=>{let z=!0;return(async()=>{if(e)try{const J=await DN(e.uid);J&&z&&(i(J.iaStart||To()),l(Wn(J.iaCash,1e4)),h(Array.isArray(J.iaPositions)?J.iaPositions:[]),m(Array.isArray(J.iaHistory)?J.iaHistory:[]),x(J.riskMode||"equilibre"),A("Donnes IA Trader charges depuis Firestore."))}catch{A(" chec chargement Firestore (IA Trader).")}})(),()=>z=!1},[e]),W.useEffect(()=>{(async()=>{if(e)try{await ON(e.uid,{iaName:t,iaStart:r,iaCash:o,iaPositions:c,iaHistory:f,riskMode:k,lastTickAt:N})}catch{}})()},[e,t,r,o,c,f,k,N]);const V=async()=>{const z=c.map(J=>(J.symbol||"").toUpperCase());if(z.length===0)return;const X=await WE(z);w(J=>({...J,...X}))},L=(z,X=100,J=null)=>{z=(z||"").toUpperCase(),h(oe=>{const ye=oe.findIndex(At=>(At.symbol||"").toUpperCase()===z);if(ye<0)return oe;const xe=oe[ye],Se=Wn(J??y[z]??NaN,xe.buyPrice),Re=X>=100?xe.qty:sr(Wn(xe.qty,0)*Wn(X,100)/100),Ke=sr(Wn(Se,0)*Re),st=sr(Wn(xe.qty,0)-Re);l(At=>sr(At+Ke)),m(At=>[{id:`SELL-${Date.now()}`,type:"SELL",symbol:z,qty:Re,price:Se,at:To(),pnlUSD:sr((Se-xe.buyPrice)*Re),pnlPct:sr((Se-xe.buyPrice)/xe.buyPrice*100)},...At]);const tt=[...oe];return st<=0?tt.splice(ye,1):tt[ye]={...xe,qty:st},A(`Vente ${X}% ${z} @ ${Se}`),tt})},F=async(z,X=null)=>{z=(z||"").toUpperCase();const J=Wn(X??await HE(z),NaN);if(!Number.isFinite(J)||J<=0){A(` Prix invalide pour ${z}, achat annul.`);return}const oe=sr(o*$a.buyFraction);if(oe<=0){A(" Cash insuffisant.");return}const ye=sr(oe/J);if(ye<=0){A(" Quantit nulle (prix trop lev ou cash trop faible).");return}const xe=sr(o-oe),Se=sr(J*(1+$a.takeProfit)),Re=sr(J*(1-$a.stopLoss));l(xe),h(Ke=>[{id:`BUY-${Date.now()}`,symbol:z,qty:ye,buyPrice:J,buyAt:To(),tp:Se,sl:Re},...Ke]),m(Ke=>[{id:`BUY-${Date.now()}`,type:"BUY",symbol:z,qty:ye,price:J,at:To()},...Ke]),w(Ke=>({...Ke,[z]:J})),A(`Achat ${z} qty ${ye} @ ${J} | TP ${Se} / SL ${Re}`)},O=async()=>{if(c.length===0)return;const z=await WE(c.map(X=>X.symbol));if(Object.keys(z).length!==0){w(X=>({...X,...z}));for(const X of c){const J=(X.symbol||"").toUpperCase(),oe=Wn(z[J],NaN);if(Number.isFinite(oe)){if(oe>=Wn(X.tp,1/0)){L(J,100,oe),A(` TP touch sur ${J} @ ${oe}`);continue}if(oe<=Wn(X.sl,0)){L(J,100,oe),A(` SL touch sur ${J} @ ${oe}`);continue}}}}},we=W.useMemo(()=>$a.minScore[k]??$a.minScore.equilibre,[k]),he=async()=>{const z=await EM();return Array.isArray(z)?z:[]},Ie=async()=>{try{const z=await he();if(!z.length)return;for(const X of z.slice(0,10)){const J=(X.action||X.type||"").toUpperCase(),oe=(X.symbol||X.pair||"").replace("/USDT","").toUpperCase(),ye=Wn(X.score,0);if(!(!oe||!J)&&(J==="BUY"&&ye>=we&&await F(oe),J==="SELL"&&c.find(Se=>(Se.symbol||"").toUpperCase()===oe))){const Se=await HE(oe);L(oe,100,Se)}}}catch{}};W.useEffect(()=>{if(!T)return;let z=!1;const X=async()=>{try{await V(),await O(),await Ie(),U(To())}catch{}z||(J=setTimeout(X,Math.max(5,G)*1e3))};let J=setTimeout(X,100);return()=>{z=!0,clearTimeout(J)}},[T,G,c,k]);const te=()=>{T||(I(!0),A(" IA Trader dmarr."))},se=()=>{T&&(I(!1),A(" IA Trader arrt."))},pe=()=>{i(To()),l(1e4),h([]),m([]),w({}),A(" IA Trader rinitialis (cash 10 000$).")},R=W.useMemo(()=>({iaName:t,iaStart:r,iaCash:o,iaPositions:c,iaHistory:f,currentPrices:y,isRunning:T,riskMode:k,lastTickAt:N,tickSec:G,totalValue:P,setRiskMode:x,setTickSec:ne,start:te,stop:se,resetIATrader:pe,buyPosition:F,sellPosition:L,updateIaPrices:V}),[t,r,o,c,f,y,T,k,N,G,P]);return b.jsx(aS.Provider,{value:R,children:n})},NN=(n,e=null)=>{const{user:t}=bl(),r=t?.uid;if(!r)return[e,()=>{}];const i=`${n}-${r}`,o=()=>{try{const c=localStorage.getItem(i);return c?JSON.parse(c):e}catch{return e}},l=c=>{try{localStorage.setItem(i,JSON.stringify(c))}catch(h){console.error("Erreur storage:",h)}};return[o(),l]},LN=()=>{const{portfolioName:n,cash:e,positions:t,history:r,currentPrices:i}=W.useContext(Du),{iaName:o,iaStart:l,iaCash:c,iaPositions:h,iaHistory:f,iaCurrentPrices:m}=W.useContext(aS),[y]=NN("ptStartDate",null),w=(x,N=2)=>x?Number(x).toFixed(N):"0.00",T=x=>new Date(x||new Date).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),I=(x=[])=>x.filter(N=>N.profit>0).length,k=({title:x,name:N,start:U,cash:H,positions:K=[],history:G=[],currentPrices:ne,to:D})=>{const P=I(G),A=G.length,V=K.reduce((we,he)=>we+he.quantity*he.buyPrice,0),L=K.reduce((we,he)=>{const Ie=(he?.symbol&&ne?.[he.symbol])??he.buyPrice;return we+he.quantity*Ie},0),F=H+L-1e4,O=(H+L-1e4)/1e4*100;return b.jsxs("section",{className:"slide-up-box",style:jN,children:[b.jsx("h2",{children:x}),b.jsxs("p",{style:{color:"#aaa",fontSize:"0.9rem"},children:["Nom : ",b.jsx("strong",{children:N}),b.jsx("br",{}),"Dmarr le : ",U?T(U):"",b.jsx("br",{}),"Cash disponible : $",w(H),b.jsx("br",{}),"Positions en cours : ",K.length,b.jsx("br",{}),"Valeur actuelle : $",w(L),b.jsx("br",{}),"Total investi : $",w(V),b.jsx("br",{}),"Trades gagnants : ",P," / ",A]}),b.jsxs("div",{style:{marginTop:"1rem",padding:"0.5rem",backgroundColor:F>=0?"#153d27":"#3d1d1d",color:F>=0?"lightgreen":"salmon",borderRadius:"6px",textAlign:"center",fontSize:"0.9rem",maxWidth:"90px"},children:[b.jsx("div",{style:{fontWeight:"bold"},children:"Rendement total"}),b.jsxs("div",{children:["$",w(F),b.jsx("br",{}),"(",w(O),"%)"]})]}),b.jsx(qn,{to:D,style:UN,children:" Accder"})]})};return b.jsxs("div",{style:VN,children:[b.jsxs("div",{style:FN,children:[k({title:" Portefeuille virtuel",name:n,start:y,cash:e,positions:t,history:r,currentPrices:i,to:"/trading"}),k({title:" IA Trader",name:o,start:l,cash:c,positions:h,history:f,currentPrices:m,to:"/ia-trader"})]}),b.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",marginTop:"3rem"},children:[b.jsxs(qn,{to:"/analysis",style:Zm,children:[" Analyse",b.jsx("br",{}),"Voir les tendances"]}),b.jsxs(qn,{to:"/signals",style:Zm,children:[" Signaux",b.jsx("br",{}),"Opportunits IA"]}),b.jsxs(qn,{to:"/profile",style:Zm,children:[" Profil",b.jsx("br",{}),"Historique & stats"]})]}),b.jsx("style",{children:`
        .slide-up-box {
          opacity: 0;
          transform: translateY(20px);
          animation: slideUp 0.6s ease-out forwards;
        }
        @keyframes slideUp {
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})},VN={padding:"6rem 2rem 2rem",backgroundImage:'url("/backgrounds/homebackground.png")',backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed",minHeight:"100vh",color:"#eee"},FN={display:"flex",justifyContent:"center",gap:"2rem",flexWrap:"wrap"},jN={width:"250px",padding:"1.5rem",backgroundColor:"rgba(30,30,30,0.6)",borderRadius:"8px",fontFamily:"sans-serif",backdropFilter:"blur(10px)",flexShrink:0},Zm={flex:"1",minWidth:"250px",backgroundColor:"rgba(30,30,30,0.6)",color:"#eee",textDecoration:"none",borderRadius:"6px",padding:"1rem",border:"1px solid #333",backdropFilter:"blur(6px)",fontWeight:"bold"},UN={display:"inline-block",marginTop:"1rem",padding:"4px 8px",backgroundColor:"#4ea8de",color:"#fff",textDecoration:"none",borderRadius:"4px",fontWeight:"bold",fontSize:"0.85rem"};function lS(n,e){return function(){return n.apply(e,arguments)}}const{toString:zN}=Object.prototype,{getPrototypeOf:y_}=Object,{iterator:Kf,toStringTag:cS}=Symbol,Qf=(n=>e=>{const t=zN.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Mr=n=>(n=n.toLowerCase(),e=>Qf(e)===n),Xf=n=>e=>typeof e===n,{isArray:Il}=Array,pu=Xf("undefined");function Mu(n){return n!==null&&!pu(n)&&n.constructor!==null&&!pu(n.constructor)&&On(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const uS=Mr("ArrayBuffer");function BN(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&uS(n.buffer),e}const HN=Xf("string"),On=Xf("function"),hS=Xf("number"),Nu=n=>n!==null&&typeof n=="object",WN=n=>n===!0||n===!1,Vd=n=>{if(Qf(n)!=="object")return!1;const e=y_(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(cS in n)&&!(Kf in n)},$N=n=>{if(!Nu(n)||Mu(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},qN=Mr("Date"),YN=Mr("File"),GN=Mr("Blob"),KN=Mr("FileList"),QN=n=>Nu(n)&&On(n.pipe),XN=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||On(n.append)&&((e=Qf(n))==="formdata"||e==="object"&&On(n.toString)&&n.toString()==="[object FormData]"))},JN=Mr("URLSearchParams"),[ZN,eL,tL,nL]=["ReadableStream","Request","Response","Headers"].map(Mr),rL=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Lu(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),Il(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{if(Mu(n))return;const o=t?Object.getOwnPropertyNames(n):Object.keys(n),l=o.length;let c;for(r=0;r<l;r++)c=o[r],e.call(null,n[c],c,n)}}function dS(n,e){if(Mu(n))return null;e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const Oo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,fS=n=>!pu(n)&&n!==Oo;function Yg(){const{caseless:n}=fS(this)&&this||{},e={},t=(r,i)=>{const o=n&&dS(e,i)||i;Vd(e[o])&&Vd(r)?e[o]=Yg(e[o],r):Vd(r)?e[o]=Yg({},r):Il(r)?e[o]=r.slice():e[o]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Lu(arguments[r],t);return e}const iL=(n,e,t,{allOwnKeys:r}={})=>(Lu(e,(i,o)=>{t&&On(i)?n[o]=lS(i,t):n[o]=i},{allOwnKeys:r}),n),sL=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),oL=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},aL=(n,e,t,r)=>{let i,o,l;const c={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),o=i.length;o-- >0;)l=i[o],(!r||r(l,n,e))&&!c[l]&&(e[l]=n[l],c[l]=!0);n=t!==!1&&y_(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},lL=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},cL=n=>{if(!n)return null;if(Il(n))return n;let e=n.length;if(!hS(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},uL=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&y_(Uint8Array)),hL=(n,e)=>{const r=(n&&n[Kf]).call(n);let i;for(;(i=r.next())&&!i.done;){const o=i.value;e.call(n,o[0],o[1])}},dL=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},fL=Mr("HTMLFormElement"),pL=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),$E=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),mL=Mr("RegExp"),pS=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};Lu(t,(i,o)=>{let l;(l=e(i,o,n))!==!1&&(r[o]=l||i)}),Object.defineProperties(n,r)},gL=n=>{pS(n,(e,t)=>{if(On(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(On(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},yL=(n,e)=>{const t={},r=i=>{i.forEach(o=>{t[o]=!0})};return Il(n)?r(n):r(String(n).split(e)),t},_L=()=>{},vL=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function wL(n){return!!(n&&On(n.append)&&n[cS]==="FormData"&&n[Kf])}const EL=n=>{const e=new Array(10),t=(r,i)=>{if(Nu(r)){if(e.indexOf(r)>=0)return;if(Mu(r))return r;if(!("toJSON"in r)){e[i]=r;const o=Il(r)?[]:{};return Lu(r,(l,c)=>{const h=t(l,i+1);!pu(h)&&(o[c]=h)}),e[i]=void 0,o}}return r};return t(n,0)},xL=Mr("AsyncFunction"),bL=n=>n&&(Nu(n)||On(n))&&On(n.then)&&On(n.catch),mS=((n,e)=>n?setImmediate:e?((t,r)=>(Oo.addEventListener("message",({source:i,data:o})=>{i===Oo&&o===t&&r.length&&r.shift()()},!1),i=>{r.push(i),Oo.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",On(Oo.postMessage)),TL=typeof queueMicrotask<"u"?queueMicrotask.bind(Oo):typeof process<"u"&&process.nextTick||mS,SL=n=>n!=null&&On(n[Kf]),ee={isArray:Il,isArrayBuffer:uS,isBuffer:Mu,isFormData:XN,isArrayBufferView:BN,isString:HN,isNumber:hS,isBoolean:WN,isObject:Nu,isPlainObject:Vd,isEmptyObject:$N,isReadableStream:ZN,isRequest:eL,isResponse:tL,isHeaders:nL,isUndefined:pu,isDate:qN,isFile:YN,isBlob:GN,isRegExp:mL,isFunction:On,isStream:QN,isURLSearchParams:JN,isTypedArray:uL,isFileList:KN,forEach:Lu,merge:Yg,extend:iL,trim:rL,stripBOM:sL,inherits:oL,toFlatObject:aL,kindOf:Qf,kindOfTest:Mr,endsWith:lL,toArray:cL,forEachEntry:hL,matchAll:dL,isHTMLForm:fL,hasOwnProperty:$E,hasOwnProp:$E,reduceDescriptors:pS,freezeMethods:gL,toObjectSet:yL,toCamelCase:pL,noop:_L,toFiniteNumber:vL,findKey:dS,global:Oo,isContextDefined:fS,isSpecCompliantForm:wL,toJSONObject:EL,isAsyncFn:xL,isThenable:bL,setImmediate:mS,asap:TL,isIterable:SL};function Le(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}ee.inherits(Le,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ee.toJSONObject(this.config),code:this.code,status:this.status}}});const gS=Le.prototype,yS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{yS[n]={value:n}});Object.defineProperties(Le,yS);Object.defineProperty(gS,"isAxiosError",{value:!0});Le.from=(n,e,t,r,i,o)=>{const l=Object.create(gS);return ee.toFlatObject(n,l,function(h){return h!==Error.prototype},c=>c!=="isAxiosError"),Le.call(l,n.message,e,t,r,i),l.cause=n,l.name=n.name,o&&Object.assign(l,o),l};const IL=null;function Gg(n){return ee.isPlainObject(n)||ee.isArray(n)}function _S(n){return ee.endsWith(n,"[]")?n.slice(0,-2):n}function qE(n,e,t){return n?n.concat(e).map(function(i,o){return i=_S(i),!t&&o?"["+i+"]":i}).join(t?".":""):e}function kL(n){return ee.isArray(n)&&!n.some(Gg)}const PL=ee.toFlatObject(ee,{},null,function(e){return/^is[A-Z]/.test(e)});function Jf(n,e,t){if(!ee.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=ee.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,x){return!ee.isUndefined(x[k])});const r=t.metaTokens,i=t.visitor||m,o=t.dots,l=t.indexes,h=(t.Blob||typeof Blob<"u"&&Blob)&&ee.isSpecCompliantForm(e);if(!ee.isFunction(i))throw new TypeError("visitor must be a function");function f(I){if(I===null)return"";if(ee.isDate(I))return I.toISOString();if(ee.isBoolean(I))return I.toString();if(!h&&ee.isBlob(I))throw new Le("Blob is not supported. Use a Buffer instead.");return ee.isArrayBuffer(I)||ee.isTypedArray(I)?h&&typeof Blob=="function"?new Blob([I]):Buffer.from(I):I}function m(I,k,x){let N=I;if(I&&!x&&typeof I=="object"){if(ee.endsWith(k,"{}"))k=r?k:k.slice(0,-2),I=JSON.stringify(I);else if(ee.isArray(I)&&kL(I)||(ee.isFileList(I)||ee.endsWith(k,"[]"))&&(N=ee.toArray(I)))return k=_S(k),N.forEach(function(H,K){!(ee.isUndefined(H)||H===null)&&e.append(l===!0?qE([k],K,o):l===null?k:k+"[]",f(H))}),!1}return Gg(I)?!0:(e.append(qE(x,k,o),f(I)),!1)}const y=[],w=Object.assign(PL,{defaultVisitor:m,convertValue:f,isVisitable:Gg});function T(I,k){if(!ee.isUndefined(I)){if(y.indexOf(I)!==-1)throw Error("Circular reference detected in "+k.join("."));y.push(I),ee.forEach(I,function(N,U){(!(ee.isUndefined(N)||N===null)&&i.call(e,N,ee.isString(U)?U.trim():U,k,w))===!0&&T(N,k?k.concat(U):[U])}),y.pop()}}if(!ee.isObject(n))throw new TypeError("data must be an object");return T(n),e}function YE(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function __(n,e){this._pairs=[],n&&Jf(n,this,e)}const vS=__.prototype;vS.append=function(e,t){this._pairs.push([e,t])};vS.toString=function(e){const t=e?function(r){return e.call(this,r,YE)}:YE;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function CL(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function wS(n,e,t){if(!e)return n;const r=t&&t.encode||CL;ee.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let o;if(i?o=i(e,t):o=ee.isURLSearchParams(e)?e.toString():new __(e,t).toString(r),o){const l=n.indexOf("#");l!==-1&&(n=n.slice(0,l)),n+=(n.indexOf("?")===-1?"?":"&")+o}return n}class GE{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ee.forEach(this.handlers,function(r){r!==null&&e(r)})}}const ES={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},AL=typeof URLSearchParams<"u"?URLSearchParams:__,RL=typeof FormData<"u"?FormData:null,DL=typeof Blob<"u"?Blob:null,OL={isBrowser:!0,classes:{URLSearchParams:AL,FormData:RL,Blob:DL},protocols:["http","https","file","blob","url","data"]},v_=typeof window<"u"&&typeof document<"u",Kg=typeof navigator=="object"&&navigator||void 0,ML=v_&&(!Kg||["ReactNative","NativeScript","NS"].indexOf(Kg.product)<0),NL=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",LL=v_&&window.location.href||"http://localhost",VL=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:v_,hasStandardBrowserEnv:ML,hasStandardBrowserWebWorkerEnv:NL,navigator:Kg,origin:LL},Symbol.toStringTag,{value:"Module"})),hn={...VL,...OL};function FL(n,e){return Jf(n,new hn.classes.URLSearchParams,{visitor:function(t,r,i,o){return hn.isNode&&ee.isBuffer(t)?(this.append(r,t.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...e})}function jL(n){return ee.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function UL(n){const e={},t=Object.keys(n);let r;const i=t.length;let o;for(r=0;r<i;r++)o=t[r],e[o]=n[o];return e}function xS(n){function e(t,r,i,o){let l=t[o++];if(l==="__proto__")return!0;const c=Number.isFinite(+l),h=o>=t.length;return l=!l&&ee.isArray(i)?i.length:l,h?(ee.hasOwnProp(i,l)?i[l]=[i[l],r]:i[l]=r,!c):((!i[l]||!ee.isObject(i[l]))&&(i[l]=[]),e(t,r,i[l],o)&&ee.isArray(i[l])&&(i[l]=UL(i[l])),!c)}if(ee.isFormData(n)&&ee.isFunction(n.entries)){const t={};return ee.forEachEntry(n,(r,i)=>{e(jL(r),i,t,0)}),t}return null}function zL(n,e,t){if(ee.isString(n))try{return(e||JSON.parse)(n),ee.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const Vu={transitional:ES,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,o=ee.isObject(e);if(o&&ee.isHTMLForm(e)&&(e=new FormData(e)),ee.isFormData(e))return i?JSON.stringify(xS(e)):e;if(ee.isArrayBuffer(e)||ee.isBuffer(e)||ee.isStream(e)||ee.isFile(e)||ee.isBlob(e)||ee.isReadableStream(e))return e;if(ee.isArrayBufferView(e))return e.buffer;if(ee.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return FL(e,this.formSerializer).toString();if((c=ee.isFileList(e))||r.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return Jf(c?{"files[]":e}:e,h&&new h,this.formSerializer)}}return o||i?(t.setContentType("application/json",!1),zL(e)):e}],transformResponse:[function(e){const t=this.transitional||Vu.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(ee.isResponse(e)||ee.isReadableStream(e))return e;if(e&&ee.isString(e)&&(r&&!this.responseType||i)){const l=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(c){if(l)throw c.name==="SyntaxError"?Le.from(c,Le.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:hn.classes.FormData,Blob:hn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ee.forEach(["delete","get","head","post","put","patch"],n=>{Vu.headers[n]={}});const BL=ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),HL=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(l){i=l.indexOf(":"),t=l.substring(0,i).trim().toLowerCase(),r=l.substring(i+1).trim(),!(!t||e[t]&&BL[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},KE=Symbol("internals");function xc(n){return n&&String(n).trim().toLowerCase()}function Fd(n){return n===!1||n==null?n:ee.isArray(n)?n.map(Fd):String(n)}function WL(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const $L=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function eg(n,e,t,r,i){if(ee.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!ee.isString(e)){if(ee.isString(r))return e.indexOf(r)!==-1;if(ee.isRegExp(r))return r.test(e)}}function qL(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function YL(n,e){const t=ee.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,o,l){return this[r].call(this,e,i,o,l)},configurable:!0})})}let Mn=class{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function o(c,h,f){const m=xc(h);if(!m)throw new Error("header name must be a non-empty string");const y=ee.findKey(i,m);(!y||i[y]===void 0||f===!0||f===void 0&&i[y]!==!1)&&(i[y||h]=Fd(c))}const l=(c,h)=>ee.forEach(c,(f,m)=>o(f,m,h));if(ee.isPlainObject(e)||e instanceof this.constructor)l(e,t);else if(ee.isString(e)&&(e=e.trim())&&!$L(e))l(HL(e),t);else if(ee.isObject(e)&&ee.isIterable(e)){let c={},h,f;for(const m of e){if(!ee.isArray(m))throw TypeError("Object iterator must return a key-value pair");c[f=m[0]]=(h=c[f])?ee.isArray(h)?[...h,m[1]]:[h,m[1]]:m[1]}l(c,t)}else e!=null&&o(t,e,r);return this}get(e,t){if(e=xc(e),e){const r=ee.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return WL(i);if(ee.isFunction(t))return t.call(this,i,r);if(ee.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=xc(e),e){const r=ee.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||eg(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function o(l){if(l=xc(l),l){const c=ee.findKey(r,l);c&&(!t||eg(r,r[c],c,t))&&(delete r[c],i=!0)}}return ee.isArray(e)?e.forEach(o):o(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const o=t[r];(!e||eg(this,this[o],o,e,!0))&&(delete this[o],i=!0)}return i}normalize(e){const t=this,r={};return ee.forEach(this,(i,o)=>{const l=ee.findKey(r,o);if(l){t[l]=Fd(i),delete t[o];return}const c=e?qL(o):String(o).trim();c!==o&&delete t[o],t[c]=Fd(i),r[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ee.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&ee.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[KE]=this[KE]={accessors:{}}).accessors,i=this.prototype;function o(l){const c=xc(l);r[c]||(YL(i,l),r[c]=!0)}return ee.isArray(e)?e.forEach(o):o(e),this}};Mn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ee.reduceDescriptors(Mn.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});ee.freezeMethods(Mn);function tg(n,e){const t=this||Vu,r=e||t,i=Mn.from(r.headers);let o=r.data;return ee.forEach(n,function(c){o=c.call(t,o,i.normalize(),e?e.status:void 0)}),i.normalize(),o}function bS(n){return!!(n&&n.__CANCEL__)}function kl(n,e,t){Le.call(this,n??"canceled",Le.ERR_CANCELED,e,t),this.name="CanceledError"}ee.inherits(kl,Le,{__CANCEL__:!0});function TS(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new Le("Request failed with status code "+t.status,[Le.ERR_BAD_REQUEST,Le.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function GL(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function KL(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,o=0,l;return e=e!==void 0?e:1e3,function(h){const f=Date.now(),m=r[o];l||(l=f),t[i]=h,r[i]=f;let y=o,w=0;for(;y!==i;)w+=t[y++],y=y%n;if(i=(i+1)%n,i===o&&(o=(o+1)%n),f-l<e)return;const T=m&&f-m;return T?Math.round(w*1e3/T):void 0}}function QL(n,e){let t=0,r=1e3/e,i,o;const l=(f,m=Date.now())=>{t=m,i=null,o&&(clearTimeout(o),o=null),n(...f)};return[(...f)=>{const m=Date.now(),y=m-t;y>=r?l(f,m):(i=f,o||(o=setTimeout(()=>{o=null,l(i)},r-y)))},()=>i&&l(i)]}const df=(n,e,t=3)=>{let r=0;const i=KL(50,250);return QL(o=>{const l=o.loaded,c=o.lengthComputable?o.total:void 0,h=l-r,f=i(h),m=l<=c;r=l;const y={loaded:l,total:c,progress:c?l/c:void 0,bytes:h,rate:f||void 0,estimated:f&&c&&m?(c-l)/f:void 0,event:o,lengthComputable:c!=null,[e?"download":"upload"]:!0};n(y)},t)},QE=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},XE=n=>(...e)=>ee.asap(()=>n(...e)),XL=hn.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,hn.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(hn.origin),hn.navigator&&/(msie|trident)/i.test(hn.navigator.userAgent)):()=>!0,JL=hn.hasStandardBrowserEnv?{write(n,e,t,r,i,o){const l=[n+"="+encodeURIComponent(e)];ee.isNumber(t)&&l.push("expires="+new Date(t).toGMTString()),ee.isString(r)&&l.push("path="+r),ee.isString(i)&&l.push("domain="+i),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function ZL(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function eV(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function SS(n,e,t){let r=!ZL(e);return n&&(r||t==!1)?eV(n,e):e}const JE=n=>n instanceof Mn?{...n}:n;function Yo(n,e){e=e||{};const t={};function r(f,m,y,w){return ee.isPlainObject(f)&&ee.isPlainObject(m)?ee.merge.call({caseless:w},f,m):ee.isPlainObject(m)?ee.merge({},m):ee.isArray(m)?m.slice():m}function i(f,m,y,w){if(ee.isUndefined(m)){if(!ee.isUndefined(f))return r(void 0,f,y,w)}else return r(f,m,y,w)}function o(f,m){if(!ee.isUndefined(m))return r(void 0,m)}function l(f,m){if(ee.isUndefined(m)){if(!ee.isUndefined(f))return r(void 0,f)}else return r(void 0,m)}function c(f,m,y){if(y in e)return r(f,m);if(y in n)return r(void 0,f)}const h={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:c,headers:(f,m,y)=>i(JE(f),JE(m),y,!0)};return ee.forEach(Object.keys({...n,...e}),function(m){const y=h[m]||i,w=y(n[m],e[m],m);ee.isUndefined(w)&&y!==c||(t[m]=w)}),t}const IS=n=>{const e=Yo({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:o,headers:l,auth:c}=e;e.headers=l=Mn.from(l),e.url=wS(SS(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),c&&l.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let h;if(ee.isFormData(t)){if(hn.hasStandardBrowserEnv||hn.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((h=l.getContentType())!==!1){const[f,...m]=h?h.split(";").map(y=>y.trim()).filter(Boolean):[];l.setContentType([f||"multipart/form-data",...m].join("; "))}}if(hn.hasStandardBrowserEnv&&(r&&ee.isFunction(r)&&(r=r(e)),r||r!==!1&&XL(e.url))){const f=i&&o&&JL.read(o);f&&l.set(i,f)}return e},tV=typeof XMLHttpRequest<"u",nV=tV&&function(n){return new Promise(function(t,r){const i=IS(n);let o=i.data;const l=Mn.from(i.headers).normalize();let{responseType:c,onUploadProgress:h,onDownloadProgress:f}=i,m,y,w,T,I;function k(){T&&T(),I&&I(),i.cancelToken&&i.cancelToken.unsubscribe(m),i.signal&&i.signal.removeEventListener("abort",m)}let x=new XMLHttpRequest;x.open(i.method.toUpperCase(),i.url,!0),x.timeout=i.timeout;function N(){if(!x)return;const H=Mn.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),G={data:!c||c==="text"||c==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:H,config:n,request:x};TS(function(D){t(D),k()},function(D){r(D),k()},G),x=null}"onloadend"in x?x.onloadend=N:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(N)},x.onabort=function(){x&&(r(new Le("Request aborted",Le.ECONNABORTED,n,x)),x=null)},x.onerror=function(){r(new Le("Network Error",Le.ERR_NETWORK,n,x)),x=null},x.ontimeout=function(){let K=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const G=i.transitional||ES;i.timeoutErrorMessage&&(K=i.timeoutErrorMessage),r(new Le(K,G.clarifyTimeoutError?Le.ETIMEDOUT:Le.ECONNABORTED,n,x)),x=null},o===void 0&&l.setContentType(null),"setRequestHeader"in x&&ee.forEach(l.toJSON(),function(K,G){x.setRequestHeader(G,K)}),ee.isUndefined(i.withCredentials)||(x.withCredentials=!!i.withCredentials),c&&c!=="json"&&(x.responseType=i.responseType),f&&([w,I]=df(f,!0),x.addEventListener("progress",w)),h&&x.upload&&([y,T]=df(h),x.upload.addEventListener("progress",y),x.upload.addEventListener("loadend",T)),(i.cancelToken||i.signal)&&(m=H=>{x&&(r(!H||H.type?new kl(null,n,x):H),x.abort(),x=null)},i.cancelToken&&i.cancelToken.subscribe(m),i.signal&&(i.signal.aborted?m():i.signal.addEventListener("abort",m)));const U=GL(i.url);if(U&&hn.protocols.indexOf(U)===-1){r(new Le("Unsupported protocol "+U+":",Le.ERR_BAD_REQUEST,n));return}x.send(o||null)})},rV=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,i;const o=function(f){if(!i){i=!0,c();const m=f instanceof Error?f:this.reason;r.abort(m instanceof Le?m:new kl(m instanceof Error?m.message:m))}};let l=e&&setTimeout(()=>{l=null,o(new Le(`timeout ${e} of ms exceeded`,Le.ETIMEDOUT))},e);const c=()=>{n&&(l&&clearTimeout(l),l=null,n.forEach(f=>{f.unsubscribe?f.unsubscribe(o):f.removeEventListener("abort",o)}),n=null)};n.forEach(f=>f.addEventListener("abort",o));const{signal:h}=r;return h.unsubscribe=()=>ee.asap(c),h}},iV=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},sV=async function*(n,e){for await(const t of oV(n))yield*iV(t,e)},oV=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},ZE=(n,e,t,r)=>{const i=sV(n,e);let o=0,l,c=h=>{l||(l=!0,r&&r(h))};return new ReadableStream({async pull(h){try{const{done:f,value:m}=await i.next();if(f){c(),h.close();return}let y=m.byteLength;if(t){let w=o+=y;t(w)}h.enqueue(new Uint8Array(m))}catch(f){throw c(f),f}},cancel(h){return c(h),i.return()}},{highWaterMark:2})},Zf=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",kS=Zf&&typeof ReadableStream=="function",aV=Zf&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),PS=(n,...e)=>{try{return!!n(...e)}catch{return!1}},lV=kS&&PS(()=>{let n=!1;const e=new Request(hn.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),ex=64*1024,Qg=kS&&PS(()=>ee.isReadableStream(new Response("").body)),ff={stream:Qg&&(n=>n.body)};Zf&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!ff[e]&&(ff[e]=ee.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new Le(`Response type '${e}' is not supported`,Le.ERR_NOT_SUPPORT,r)})})})(new Response);const cV=async n=>{if(n==null)return 0;if(ee.isBlob(n))return n.size;if(ee.isSpecCompliantForm(n))return(await new Request(hn.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(ee.isArrayBufferView(n)||ee.isArrayBuffer(n))return n.byteLength;if(ee.isURLSearchParams(n)&&(n=n+""),ee.isString(n))return(await aV(n)).byteLength},uV=async(n,e)=>{const t=ee.toFiniteNumber(n.getContentLength());return t??cV(e)},hV=Zf&&(async n=>{let{url:e,method:t,data:r,signal:i,cancelToken:o,timeout:l,onDownloadProgress:c,onUploadProgress:h,responseType:f,headers:m,withCredentials:y="same-origin",fetchOptions:w}=IS(n);f=f?(f+"").toLowerCase():"text";let T=rV([i,o&&o.toAbortSignal()],l),I;const k=T&&T.unsubscribe&&(()=>{T.unsubscribe()});let x;try{if(h&&lV&&t!=="get"&&t!=="head"&&(x=await uV(m,r))!==0){let G=new Request(e,{method:"POST",body:r,duplex:"half"}),ne;if(ee.isFormData(r)&&(ne=G.headers.get("content-type"))&&m.setContentType(ne),G.body){const[D,P]=QE(x,df(XE(h)));r=ZE(G.body,ex,D,P)}}ee.isString(y)||(y=y?"include":"omit");const N="credentials"in Request.prototype;I=new Request(e,{...w,signal:T,method:t.toUpperCase(),headers:m.normalize().toJSON(),body:r,duplex:"half",credentials:N?y:void 0});let U=await fetch(I,w);const H=Qg&&(f==="stream"||f==="response");if(Qg&&(c||H&&k)){const G={};["status","statusText","headers"].forEach(A=>{G[A]=U[A]});const ne=ee.toFiniteNumber(U.headers.get("content-length")),[D,P]=c&&QE(ne,df(XE(c),!0))||[];U=new Response(ZE(U.body,ex,D,()=>{P&&P(),k&&k()}),G)}f=f||"text";let K=await ff[ee.findKey(ff,f)||"text"](U,n);return!H&&k&&k(),await new Promise((G,ne)=>{TS(G,ne,{data:K,headers:Mn.from(U.headers),status:U.status,statusText:U.statusText,config:n,request:I})})}catch(N){throw k&&k(),N&&N.name==="TypeError"&&/Load failed|fetch/i.test(N.message)?Object.assign(new Le("Network Error",Le.ERR_NETWORK,n,I),{cause:N.cause||N}):Le.from(N,N&&N.code,n,I)}}),Xg={http:IL,xhr:nV,fetch:hV};ee.forEach(Xg,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const tx=n=>`- ${n}`,dV=n=>ee.isFunction(n)||n===null||n===!1,CS={getAdapter:n=>{n=ee.isArray(n)?n:[n];const{length:e}=n;let t,r;const i={};for(let o=0;o<e;o++){t=n[o];let l;if(r=t,!dV(t)&&(r=Xg[(l=String(t)).toLowerCase()],r===void 0))throw new Le(`Unknown adapter '${l}'`);if(r)break;i[l||"#"+o]=r}if(!r){const o=Object.entries(i).map(([c,h])=>`adapter ${c} `+(h===!1?"is not supported by the environment":"is not available in the build"));let l=e?o.length>1?`since :
`+o.map(tx).join(`
`):" "+tx(o[0]):"as no adapter specified";throw new Le("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return r},adapters:Xg};function ng(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new kl(null,n)}function nx(n){return ng(n),n.headers=Mn.from(n.headers),n.data=tg.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),CS.getAdapter(n.adapter||Vu.adapter)(n).then(function(r){return ng(n),r.data=tg.call(n,n.transformResponse,r),r.headers=Mn.from(r.headers),r},function(r){return bS(r)||(ng(n),r&&r.response&&(r.response.data=tg.call(n,n.transformResponse,r.response),r.response.headers=Mn.from(r.response.headers))),Promise.reject(r)})}const AS="1.11.0",ep={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{ep[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const rx={};ep.transitional=function(e,t,r){function i(o,l){return"[Axios v"+AS+"] Transitional option '"+o+"'"+l+(r?". "+r:"")}return(o,l,c)=>{if(e===!1)throw new Le(i(l," has been removed"+(t?" in "+t:"")),Le.ERR_DEPRECATED);return t&&!rx[l]&&(rx[l]=!0,console.warn(i(l," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,l,c):!0}};ep.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function fV(n,e,t){if(typeof n!="object")throw new Le("options must be an object",Le.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const o=r[i],l=e[o];if(l){const c=n[o],h=c===void 0||l(c,o,n);if(h!==!0)throw new Le("option "+o+" must be "+h,Le.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Le("Unknown option "+o,Le.ERR_BAD_OPTION)}}const jd={assertOptions:fV,validators:ep},qr=jd.validators;let Fo=class{constructor(e){this.defaults=e||{},this.interceptors={request:new GE,response:new GE}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Yo(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:o}=t;r!==void 0&&jd.assertOptions(r,{silentJSONParsing:qr.transitional(qr.boolean),forcedJSONParsing:qr.transitional(qr.boolean),clarifyTimeoutError:qr.transitional(qr.boolean)},!1),i!=null&&(ee.isFunction(i)?t.paramsSerializer={serialize:i}:jd.assertOptions(i,{encode:qr.function,serialize:qr.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),jd.assertOptions(t,{baseUrl:qr.spelling("baseURL"),withXsrfToken:qr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let l=o&&ee.merge(o.common,o[t.method]);o&&ee.forEach(["delete","get","head","post","put","patch","common"],I=>{delete o[I]}),t.headers=Mn.concat(l,o);const c=[];let h=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(t)===!1||(h=h&&k.synchronous,c.unshift(k.fulfilled,k.rejected))});const f=[];this.interceptors.response.forEach(function(k){f.push(k.fulfilled,k.rejected)});let m,y=0,w;if(!h){const I=[nx.bind(this),void 0];for(I.unshift(...c),I.push(...f),w=I.length,m=Promise.resolve(t);y<w;)m=m.then(I[y++],I[y++]);return m}w=c.length;let T=t;for(y=0;y<w;){const I=c[y++],k=c[y++];try{T=I(T)}catch(x){k.call(this,x);break}}try{m=nx.call(this,T)}catch(I){return Promise.reject(I)}for(y=0,w=f.length;y<w;)m=m.then(f[y++],f[y++]);return m}getUri(e){e=Yo(this.defaults,e);const t=SS(e.baseURL,e.url,e.allowAbsoluteUrls);return wS(t,e.params,e.paramsSerializer)}};ee.forEach(["delete","get","head","options"],function(e){Fo.prototype[e]=function(t,r){return this.request(Yo(r||{},{method:e,url:t,data:(r||{}).data}))}});ee.forEach(["post","put","patch"],function(e){function t(r){return function(o,l,c){return this.request(Yo(c||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}Fo.prototype[e]=t(),Fo.prototype[e+"Form"]=t(!0)});let pV=class RS{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(o){t=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const l=new Promise(c=>{r.subscribe(c),o=c}).then(i);return l.cancel=function(){r.unsubscribe(o)},l},e(function(o,l,c){r.reason||(r.reason=new kl(o,l,c),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new RS(function(i){e=i}),cancel:e}}};function mV(n){return function(t){return n.apply(null,t)}}function gV(n){return ee.isObject(n)&&n.isAxiosError===!0}const Jg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Jg).forEach(([n,e])=>{Jg[e]=n});function DS(n){const e=new Fo(n),t=lS(Fo.prototype.request,e);return ee.extend(t,Fo.prototype,e,{allOwnKeys:!0}),ee.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return DS(Yo(n,i))},t}const Ct=DS(Vu);Ct.Axios=Fo;Ct.CanceledError=kl;Ct.CancelToken=pV;Ct.isCancel=bS;Ct.VERSION=AS;Ct.toFormData=Jf;Ct.AxiosError=Le;Ct.Cancel=Ct.CanceledError;Ct.all=function(e){return Promise.all(e)};Ct.spread=mV;Ct.isAxiosError=gV;Ct.mergeConfig=Yo;Ct.AxiosHeaders=Mn;Ct.formToJSON=n=>xS(ee.isHTMLForm(n)?new FormData(n):n);Ct.getAdapter=CS.getAdapter;Ct.HttpStatusCode=Jg;Ct.default=Ct;const{Axios:w6,AxiosError:E6,CanceledError:x6,isCancel:b6,CancelToken:T6,VERSION:S6,all:I6,Cancel:k6,isAxiosError:P6,spread:C6,toFormData:A6,AxiosHeaders:R6,HttpStatusCode:D6,formToJSON:O6,getAdapter:M6,mergeConfig:N6}=Ct;/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Fu(n){return n+.5|0}const ks=(n,e,t)=>Math.max(Math.min(n,t),e);function Fc(n){return ks(Fu(n*2.55),0,255)}function Ns(n){return ks(Fu(n*255),0,255)}function Ri(n){return ks(Fu(n/2.55)/100,0,1)}function ix(n){return ks(Fu(n*100),0,100)}const or={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Zg=[..."0123456789ABCDEF"],yV=n=>Zg[n&15],_V=n=>Zg[(n&240)>>4]+Zg[n&15],ud=n=>(n&240)>>4===(n&15),vV=n=>ud(n.r)&&ud(n.g)&&ud(n.b)&&ud(n.a);function wV(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&or[n[1]]*17,g:255&or[n[2]]*17,b:255&or[n[3]]*17,a:e===5?or[n[4]]*17:255}:(e===7||e===9)&&(t={r:or[n[1]]<<4|or[n[2]],g:or[n[3]]<<4|or[n[4]],b:or[n[5]]<<4|or[n[6]],a:e===9?or[n[7]]<<4|or[n[8]]:255})),t}const EV=(n,e)=>n<255?e(n):"";function xV(n){var e=vV(n)?yV:_V;return n?"#"+e(n.r)+e(n.g)+e(n.b)+EV(n.a,e):void 0}const bV=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function OS(n,e,t){const r=e*Math.min(t,1-t),i=(o,l=(o+n/30)%12)=>t-r*Math.max(Math.min(l-3,9-l,1),-1);return[i(0),i(8),i(4)]}function TV(n,e,t){const r=(i,o=(i+n/60)%6)=>t-t*e*Math.max(Math.min(o,4-o,1),0);return[r(5),r(3),r(1)]}function SV(n,e,t){const r=OS(n,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)r[i]*=1-e-t,r[i]+=e;return r}function IV(n,e,t,r,i){return n===i?(e-t)/r+(e<t?6:0):e===i?(t-n)/r+2:(n-e)/r+4}function w_(n){const t=n.r/255,r=n.g/255,i=n.b/255,o=Math.max(t,r,i),l=Math.min(t,r,i),c=(o+l)/2;let h,f,m;return o!==l&&(m=o-l,f=c>.5?m/(2-o-l):m/(o+l),h=IV(t,r,i,m,o),h=h*60+.5),[h|0,f||0,c]}function E_(n,e,t,r){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,r)).map(Ns)}function x_(n,e,t){return E_(OS,n,e,t)}function kV(n,e,t){return E_(SV,n,e,t)}function PV(n,e,t){return E_(TV,n,e,t)}function MS(n){return(n%360+360)%360}function CV(n){const e=bV.exec(n);let t=255,r;if(!e)return;e[5]!==r&&(t=e[6]?Fc(+e[5]):Ns(+e[5]));const i=MS(+e[2]),o=+e[3]/100,l=+e[4]/100;return e[1]==="hwb"?r=kV(i,o,l):e[1]==="hsv"?r=PV(i,o,l):r=x_(i,o,l),{r:r[0],g:r[1],b:r[2],a:t}}function AV(n,e){var t=w_(n);t[0]=MS(t[0]+e),t=x_(t),n.r=t[0],n.g=t[1],n.b=t[2]}function RV(n){if(!n)return;const e=w_(n),t=e[0],r=ix(e[1]),i=ix(e[2]);return n.a<255?`hsla(${t}, ${r}%, ${i}%, ${Ri(n.a)})`:`hsl(${t}, ${r}%, ${i}%)`}const sx={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ox={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function DV(){const n={},e=Object.keys(ox),t=Object.keys(sx);let r,i,o,l,c;for(r=0;r<e.length;r++){for(l=c=e[r],i=0;i<t.length;i++)o=t[i],c=c.replace(o,sx[o]);o=parseInt(ox[l],16),n[c]=[o>>16&255,o>>8&255,o&255]}return n}let hd;function OV(n){hd||(hd=DV(),hd.transparent=[0,0,0,0]);const e=hd[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const MV=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function NV(n){const e=MV.exec(n);let t=255,r,i,o;if(e){if(e[7]!==r){const l=+e[7];t=e[8]?Fc(l):ks(l*255,0,255)}return r=+e[1],i=+e[3],o=+e[5],r=255&(e[2]?Fc(r):ks(r,0,255)),i=255&(e[4]?Fc(i):ks(i,0,255)),o=255&(e[6]?Fc(o):ks(o,0,255)),{r,g:i,b:o,a:t}}}function LV(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Ri(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const rg=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,qa=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function VV(n,e,t){const r=qa(Ri(n.r)),i=qa(Ri(n.g)),o=qa(Ri(n.b));return{r:Ns(rg(r+t*(qa(Ri(e.r))-r))),g:Ns(rg(i+t*(qa(Ri(e.g))-i))),b:Ns(rg(o+t*(qa(Ri(e.b))-o))),a:n.a+t*(e.a-n.a)}}function dd(n,e,t){if(n){let r=w_(n);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,e===0?360:1)),r=x_(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function NS(n,e){return n&&Object.assign(e||{},n)}function ax(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Ns(n[3]))):(e=NS(n,{r:0,g:0,b:0,a:1}),e.a=Ns(e.a)),e}function FV(n){return n.charAt(0)==="r"?NV(n):CV(n)}class mu{constructor(e){if(e instanceof mu)return e;const t=typeof e;let r;t==="object"?r=ax(e):t==="string"&&(r=wV(e)||OV(e)||FV(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=NS(this._rgb);return e&&(e.a=Ri(e.a)),e}set rgb(e){this._rgb=ax(e)}rgbString(){return this._valid?LV(this._rgb):void 0}hexString(){return this._valid?xV(this._rgb):void 0}hslString(){return this._valid?RV(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,i=e.rgb;let o;const l=t===o?.5:t,c=2*l-1,h=r.a-i.a,f=((c*h===-1?c:(c+h)/(1+c*h))+1)/2;o=1-f,r.r=255&f*r.r+o*i.r+.5,r.g=255&f*r.g+o*i.g+.5,r.b=255&f*r.b+o*i.b+.5,r.a=l*r.a+(1-l)*i.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=VV(this._rgb,e._rgb,t)),this}clone(){return new mu(this.rgb)}alpha(e){return this._rgb.a=Ns(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Fu(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return dd(this._rgb,2,e),this}darken(e){return dd(this._rgb,2,-e),this}saturate(e){return dd(this._rgb,1,e),this}desaturate(e){return dd(this._rgb,1,-e),this}rotate(e){return AV(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Pi(){}const jV=(()=>{let n=0;return()=>n++})();function ut(n){return n==null}function tn(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ye(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function cr(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Yr(n,e){return cr(n)?n:e}function $e(n,e){return typeof n>"u"?e:n}const UV=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function lt(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Ze(n,e,t,r){let i,o,l;if(tn(n))for(o=n.length,i=0;i<o;i++)e.call(t,n[i],i);else if(Ye(n))for(l=Object.keys(n),o=l.length,i=0;i<o;i++)e.call(t,n[l[i]],l[i])}function pf(n,e){let t,r,i,o;if(!n||!e||n.length!==e.length)return!1;for(t=0,r=n.length;t<r;++t)if(i=n[t],o=e[t],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function mf(n){if(tn(n))return n.map(mf);if(Ye(n)){const e=Object.create(null),t=Object.keys(n),r=t.length;let i=0;for(;i<r;++i)e[t[i]]=mf(n[t[i]]);return e}return n}function LS(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function zV(n,e,t,r){if(!LS(n))return;const i=e[n],o=t[n];Ye(i)&&Ye(o)?gu(i,o,r):e[n]=mf(o)}function gu(n,e,t){const r=tn(e)?e:[e],i=r.length;if(!Ye(n))return n;t=t||{};const o=t.merger||zV;let l;for(let c=0;c<i;++c){if(l=r[c],!Ye(l))continue;const h=Object.keys(l);for(let f=0,m=h.length;f<m;++f)o(h[f],n,l,t)}return n}function Kc(n,e){return gu(n,e,{merger:BV})}function BV(n,e,t){if(!LS(n))return;const r=e[n],i=t[n];Ye(r)&&Ye(i)?Kc(r,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=mf(i))}const lx={"":n=>n,x:n=>n.x,y:n=>n.y};function HV(n){const e=n.split("."),t=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}function WV(n){const e=HV(n);return t=>{for(const r of e){if(r==="")break;t=t&&t[r]}return t}}function gf(n,e){return(lx[e]||(lx[e]=WV(e)))(n)}function b_(n){return n.charAt(0).toUpperCase()+n.slice(1)}const yf=n=>typeof n<"u",Bs=n=>typeof n=="function",cx=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function $V(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const dn=Math.PI,ai=2*dn,qV=ai+dn,_f=Number.POSITIVE_INFINITY,YV=dn/180,Pr=dn/2,So=dn/4,ux=dn*2/3,VS=Math.log10,hl=Math.sign;function Qc(n,e,t){return Math.abs(n-e)<t}function hx(n){const e=Math.round(n);n=Qc(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(VS(n))),r=n/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function GV(n){const e=[],t=Math.sqrt(n);let r;for(r=1;r<t;r++)n%r===0&&(e.push(r),e.push(n/r));return t===(t|0)&&e.push(t),e.sort((i,o)=>i-o).pop(),e}function KV(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function yu(n){return!KV(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function QV(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function XV(n,e,t){let r,i,o;for(r=0,i=n.length;r<i;r++)o=n[r][t],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function Mo(n){return n*(dn/180)}function JV(n){return n*(180/dn)}function dx(n){if(!cr(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function ZV(n,e){const t=e.x-n.x,r=e.y-n.y,i=Math.sqrt(t*t+r*r);let o=Math.atan2(r,t);return o<-.5*dn&&(o+=ai),{angle:o,distance:i}}function ey(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function eF(n,e){return(n-e+qV)%ai-dn}function ws(n){return(n%ai+ai)%ai}function FS(n,e,t,r){const i=ws(n),o=ws(e),l=ws(t),c=ws(o-i),h=ws(l-i),f=ws(i-o),m=ws(i-l);return i===o||i===l||r&&o===l||c>h&&f<m}function Cr(n,e,t){return Math.max(e,Math.min(t,n))}function tF(n){return Cr(n,-32768,32767)}function jc(n,e,t,r=1e-6){return n>=Math.min(e,t)-r&&n<=Math.max(e,t)+r}function T_(n,e,t){t=t||(l=>n[l]<e);let r=n.length-1,i=0,o;for(;r-i>1;)o=i+r>>1,t(o)?i=o:r=o;return{lo:i,hi:r}}const No=(n,e,t,r)=>T_(n,t,r?i=>{const o=n[i][e];return o<t||o===t&&n[i+1][e]===t}:i=>n[i][e]<t),nF=(n,e,t)=>T_(n,t,r=>n[r][e]>=t);function rF(n,e,t){let r=0,i=n.length;for(;r<i&&n[r]<e;)r++;for(;i>r&&n[i-1]>t;)i--;return r>0||i<n.length?n.slice(r,i):n}const jS=["push","pop","shift","splice","unshift"];function iF(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),jS.forEach(t=>{const r="_onData"+b_(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...o){const l=i.apply(this,o);return n._chartjs.listeners.forEach(c=>{typeof c[r]=="function"&&c[r](...o)}),l}})})}function fx(n,e){const t=n._chartjs;if(!t)return;const r=t.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(jS.forEach(o=>{delete n[o]}),delete n._chartjs)}function sF(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const US=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function zS(n,e){let t=[],r=!1;return function(...i){t=i,r||(r=!0,US.call(window,()=>{r=!1,n.apply(e,t)}))}}function oF(n,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(n,e,r)):n.apply(this,r),e}}const BS=n=>n==="start"?"left":n==="end"?"right":"center",$n=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,aF=(n,e,t,r)=>n===(r?"left":"right")?t:n==="center"?(e+t)/2:e;function lF(n,e,t){const r=e.length;let i=0,o=r;if(n._sorted){const{iScale:l,vScale:c,_parsed:h}=n,f=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,m=l.axis,{min:y,max:w,minDefined:T,maxDefined:I}=l.getUserBounds();if(T){if(i=Math.min(No(h,m,y).lo,t?r:No(e,m,l.getPixelForValue(y)).lo),f){const k=h.slice(0,i+1).reverse().findIndex(x=>!ut(x[c.axis]));i-=Math.max(0,k)}i=Cr(i,0,r-1)}if(I){let k=Math.max(No(h,l.axis,w,!0).hi+1,t?0:No(e,m,l.getPixelForValue(w),!0).hi+1);if(f){const x=h.slice(k-1).findIndex(N=>!ut(N[c.axis]));k+=Math.max(0,x)}o=Cr(k,i,r)-i}else o=r-i}return{start:i,count:o}}function cF(n){const{xScale:e,yScale:t,_scaleRanges:r}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return n._scaleRanges=i,!0;const o=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,i),o}const fd=n=>n===0||n===1,px=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*ai/t)),mx=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*ai/t)+1,Xc={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Pr)+1,easeOutSine:n=>Math.sin(n*Pr),easeInOutSine:n=>-.5*(Math.cos(dn*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>fd(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>fd(n)?n:px(n,.075,.3),easeOutElastic:n=>fd(n)?n:mx(n,.075,.3),easeInOutElastic(n){return fd(n)?n:n<.5?.5*px(n*2,.1125,.45):.5+.5*mx(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Xc.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Xc.easeInBounce(n*2)*.5:Xc.easeOutBounce(n*2-1)*.5+.5};function S_(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function gx(n){return S_(n)?n:new mu(n)}function ig(n){return S_(n)?n:new mu(n).saturate(.5).darken(.1).hexString()}const uF=["x","y","borderWidth","radius","tension"],hF=["color","borderColor","backgroundColor"];function dF(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:hF},numbers:{type:"number",properties:uF}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function fF(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const yx=new Map;function pF(n,e){e=e||{};const t=n+JSON.stringify(e);let r=yx.get(t);return r||(r=new Intl.NumberFormat(n,e),yx.set(t,r)),r}function HS(n,e,t){return pF(e,t).format(n)}const mF={values(n){return tn(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const r=this.chart.options.locale;let i,o=n;if(t.length>1){const f=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(f<1e-4||f>1e15)&&(i="scientific"),o=gF(n,t)}const l=VS(Math.abs(o)),c=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),h={notation:i,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(h,this.options.ticks.format),HS(n,r,h)}};function gF(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var WS={formatters:mF};function yF(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:WS.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Go=Object.create(null),ty=Object.create(null);function Jc(n,e){if(!e)return n;const t=e.split(".");for(let r=0,i=t.length;r<i;++r){const o=t[r];n=n[o]||(n[o]=Object.create(null))}return n}function sg(n,e,t){return typeof e=="string"?gu(Jc(n,e),t):gu(Jc(n,""),e)}class _F{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>ig(i.backgroundColor),this.hoverBorderColor=(r,i)=>ig(i.borderColor),this.hoverColor=(r,i)=>ig(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return sg(this,e,t)}get(e){return Jc(this,e)}describe(e,t){return sg(ty,e,t)}override(e,t){return sg(Go,e,t)}route(e,t,r,i){const o=Jc(this,e),l=Jc(this,r),c="_"+t;Object.defineProperties(o,{[c]:{value:o[t],writable:!0},[t]:{enumerable:!0,get(){const h=this[c],f=l[i];return Ye(h)?Object.assign({},f,h):$e(h,f)},set(h){this[c]=h}}})}apply(e){e.forEach(t=>t(this))}}var St=new _F({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[dF,fF,yF]);function vF(n){return!n||ut(n.size)||ut(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function _x(n,e,t,r,i){let o=e[i];return o||(o=e[i]=n.measureText(i).width,t.push(i)),o>r&&(r=o),r}function Io(n,e,t){const r=n.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*r)/r+i}function vx(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function ny(n,e,t,r){$S(n,e,t,r,null)}function $S(n,e,t,r,i){let o,l,c,h,f,m,y,w;const T=e.pointStyle,I=e.rotation,k=e.radius;let x=(I||0)*YV;if(T&&typeof T=="object"&&(o=T.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(t,r),n.rotate(x),n.drawImage(T,-T.width/2,-T.height/2,T.width,T.height),n.restore();return}if(!(isNaN(k)||k<=0)){switch(n.beginPath(),T){default:i?n.ellipse(t,r,i/2,k,0,0,ai):n.arc(t,r,k,0,ai),n.closePath();break;case"triangle":m=i?i/2:k,n.moveTo(t+Math.sin(x)*m,r-Math.cos(x)*k),x+=ux,n.lineTo(t+Math.sin(x)*m,r-Math.cos(x)*k),x+=ux,n.lineTo(t+Math.sin(x)*m,r-Math.cos(x)*k),n.closePath();break;case"rectRounded":f=k*.516,h=k-f,l=Math.cos(x+So)*h,y=Math.cos(x+So)*(i?i/2-f:h),c=Math.sin(x+So)*h,w=Math.sin(x+So)*(i?i/2-f:h),n.arc(t-y,r-c,f,x-dn,x-Pr),n.arc(t+w,r-l,f,x-Pr,x),n.arc(t+y,r+c,f,x,x+Pr),n.arc(t-w,r+l,f,x+Pr,x+dn),n.closePath();break;case"rect":if(!I){h=Math.SQRT1_2*k,m=i?i/2:h,n.rect(t-m,r-h,2*m,2*h);break}x+=So;case"rectRot":y=Math.cos(x)*(i?i/2:k),l=Math.cos(x)*k,c=Math.sin(x)*k,w=Math.sin(x)*(i?i/2:k),n.moveTo(t-y,r-c),n.lineTo(t+w,r-l),n.lineTo(t+y,r+c),n.lineTo(t-w,r+l),n.closePath();break;case"crossRot":x+=So;case"cross":y=Math.cos(x)*(i?i/2:k),l=Math.cos(x)*k,c=Math.sin(x)*k,w=Math.sin(x)*(i?i/2:k),n.moveTo(t-y,r-c),n.lineTo(t+y,r+c),n.moveTo(t+w,r-l),n.lineTo(t-w,r+l);break;case"star":y=Math.cos(x)*(i?i/2:k),l=Math.cos(x)*k,c=Math.sin(x)*k,w=Math.sin(x)*(i?i/2:k),n.moveTo(t-y,r-c),n.lineTo(t+y,r+c),n.moveTo(t+w,r-l),n.lineTo(t-w,r+l),x+=So,y=Math.cos(x)*(i?i/2:k),l=Math.cos(x)*k,c=Math.sin(x)*k,w=Math.sin(x)*(i?i/2:k),n.moveTo(t-y,r-c),n.lineTo(t+y,r+c),n.moveTo(t+w,r-l),n.lineTo(t-w,r+l);break;case"line":l=i?i/2:Math.cos(x)*k,c=Math.sin(x)*k,n.moveTo(t-l,r-c),n.lineTo(t+l,r+c);break;case"dash":n.moveTo(t,r),n.lineTo(t+Math.cos(x)*(i?i/2:k),r+Math.sin(x)*k);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function _u(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function I_(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function k_(n){n.restore()}function wF(n,e,t,r,i){if(!e)return n.lineTo(t.x,t.y);if(i==="middle"){const o=(e.x+t.x)/2;n.lineTo(o,e.y),n.lineTo(o,t.y)}else i==="after"!=!!r?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function EF(n,e,t,r){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function xF(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),ut(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function bF(n,e,t,r,i){if(i.strikethrough||i.underline){const o=n.measureText(r),l=e-o.actualBoundingBoxLeft,c=e+o.actualBoundingBoxRight,h=t-o.actualBoundingBoxAscent,f=t+o.actualBoundingBoxDescent,m=i.strikethrough?(h+f)/2:f;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(l,m),n.lineTo(c,m),n.stroke()}}function TF(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function vf(n,e,t,r,i,o={}){const l=tn(e)?e:[e],c=o.strokeWidth>0&&o.strokeColor!=="";let h,f;for(n.save(),n.font=i.string,xF(n,o),h=0;h<l.length;++h)f=l[h],o.backdrop&&TF(n,o.backdrop),c&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),ut(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(f,t,r,o.maxWidth)),n.fillText(f,t,r,o.maxWidth),bF(n,t,r,f,o),r+=Number(i.lineHeight);n.restore()}function ry(n,e){const{x:t,y:r,w:i,h:o,radius:l}=e;n.arc(t+l.topLeft,r+l.topLeft,l.topLeft,1.5*dn,dn,!0),n.lineTo(t,r+o-l.bottomLeft),n.arc(t+l.bottomLeft,r+o-l.bottomLeft,l.bottomLeft,dn,Pr,!0),n.lineTo(t+i-l.bottomRight,r+o),n.arc(t+i-l.bottomRight,r+o-l.bottomRight,l.bottomRight,Pr,0,!0),n.lineTo(t+i,r+l.topRight),n.arc(t+i-l.topRight,r+l.topRight,l.topRight,0,-Pr,!0),n.lineTo(t+l.topLeft,r)}const SF=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,IF=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function kF(n,e){const t=(""+n).match(SF);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const PF=n=>+n||0;function qS(n,e){const t={},r=Ye(e),i=r?Object.keys(e):e,o=Ye(n)?r?l=>$e(n[l],n[e[l]]):l=>n[l]:()=>n;for(const l of i)t[l]=PF(o(l));return t}function CF(n){return qS(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Zc(n){return qS(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Or(n){const e=CF(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Dn(n,e){n=n||{},e=e||St.font;let t=$e(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let r=$e(n.style,e.style);r&&!(""+r).match(IF)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:$e(n.family,e.family),lineHeight:kF($e(n.lineHeight,e.lineHeight),t),size:t,style:r,weight:$e(n.weight,e.weight),string:""};return i.string=vF(i),i}function pd(n,e,t,r){let i,o,l;for(i=0,o=n.length;i<o;++i)if(l=n[i],l!==void 0&&l!==void 0)return l}function AF(n,e,t){const{min:r,max:i}=n,o=UV(e,(i-r)/2),l=(c,h)=>t&&c===0?0:c+h;return{min:l(r,-Math.abs(o)),max:l(i,o)}}function Jo(n,e){return Object.assign(Object.create(n),e)}function P_(n,e=[""],t,r,i=()=>n[0]){const o=t||n;typeof r>"u"&&(r=QS("_fallback",n));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:r,_getTarget:i,override:c=>P_([c,...n],e,o,r)};return new Proxy(l,{deleteProperty(c,h){return delete c[h],delete c._keys,delete n[0][h],!0},get(c,h){return GS(c,h,()=>FF(h,e,n,c))},getOwnPropertyDescriptor(c,h){return Reflect.getOwnPropertyDescriptor(c._scopes[0],h)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(c,h){return Ex(c).includes(h)},ownKeys(c){return Ex(c)},set(c,h,f){const m=c._storage||(c._storage=i());return c[h]=m[h]=f,delete c._keys,!0}})}function dl(n,e,t,r){const i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:YS(n,r),setContext:o=>dl(n,o,t,r),override:o=>dl(n.override(o),e,t,r)};return new Proxy(i,{deleteProperty(o,l){return delete o[l],delete n[l],!0},get(o,l,c){return GS(o,l,()=>DF(o,l,c))},getOwnPropertyDescriptor(o,l){return o._descriptors.allKeys?Reflect.has(n,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,l)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,l){return Reflect.has(n,l)},ownKeys(){return Reflect.ownKeys(n)},set(o,l,c){return n[l]=c,delete o[l],!0}})}function YS(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:r,isScriptable:Bs(t)?t:()=>t,isIndexable:Bs(r)?r:()=>r}}const RF=(n,e)=>n?n+b_(e):e,C_=(n,e)=>Ye(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function GS(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const r=t();return n[e]=r,r}function DF(n,e,t){const{_proxy:r,_context:i,_subProxy:o,_descriptors:l}=n;let c=r[e];return Bs(c)&&l.isScriptable(e)&&(c=OF(e,c,n,t)),tn(c)&&c.length&&(c=MF(e,c,n,l.isIndexable)),C_(e,c)&&(c=dl(c,i,o&&o[e],l)),c}function OF(n,e,t,r){const{_proxy:i,_context:o,_subProxy:l,_stack:c}=t;if(c.has(n))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+n);c.add(n);let h=e(o,l||r);return c.delete(n),C_(n,h)&&(h=A_(i._scopes,i,n,h)),h}function MF(n,e,t,r){const{_proxy:i,_context:o,_subProxy:l,_descriptors:c}=t;if(typeof o.index<"u"&&r(n))return e[o.index%e.length];if(Ye(e[0])){const h=e,f=i._scopes.filter(m=>m!==h);e=[];for(const m of h){const y=A_(f,i,n,m);e.push(dl(y,o,l&&l[n],c))}}return e}function KS(n,e,t){return Bs(n)?n(e,t):n}const NF=(n,e)=>n===!0?e:typeof n=="string"?gf(e,n):void 0;function LF(n,e,t,r,i){for(const o of e){const l=NF(t,o);if(l){n.add(l);const c=KS(l._fallback,t,i);if(typeof c<"u"&&c!==t&&c!==r)return c}else if(l===!1&&typeof r<"u"&&t!==r)return null}return!1}function A_(n,e,t,r){const i=e._rootScopes,o=KS(e._fallback,t,r),l=[...n,...i],c=new Set;c.add(r);let h=wx(c,l,t,o||t,r);return h===null||typeof o<"u"&&o!==t&&(h=wx(c,l,o,h,r),h===null)?!1:P_(Array.from(c),[""],i,o,()=>VF(e,t,r))}function wx(n,e,t,r,i){for(;t;)t=LF(n,e,t,r,i);return t}function VF(n,e,t){const r=n._getTarget();e in r||(r[e]={});const i=r[e];return tn(i)&&Ye(t)?t:i||{}}function FF(n,e,t,r){let i;for(const o of e)if(i=QS(RF(o,n),t),typeof i<"u")return C_(n,i)?A_(t,r,n,i):i}function QS(n,e){for(const t of e){if(!t)continue;const r=t[n];if(typeof r<"u")return r}}function Ex(n){let e=n._keys;return e||(e=n._keys=jF(n._scopes)),e}function jF(n){const e=new Set;for(const t of n)for(const r of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const UF=Number.EPSILON||1e-14,fl=(n,e)=>e<n.length&&!n[e].skip&&n[e],XS=n=>n==="x"?"y":"x";function zF(n,e,t,r){const i=n.skip?e:n,o=e,l=t.skip?e:t,c=ey(o,i),h=ey(l,o);let f=c/(c+h),m=h/(c+h);f=isNaN(f)?0:f,m=isNaN(m)?0:m;const y=r*f,w=r*m;return{previous:{x:o.x-y*(l.x-i.x),y:o.y-y*(l.y-i.y)},next:{x:o.x+w*(l.x-i.x),y:o.y+w*(l.y-i.y)}}}function BF(n,e,t){const r=n.length;let i,o,l,c,h,f=fl(n,0);for(let m=0;m<r-1;++m)if(h=f,f=fl(n,m+1),!(!h||!f)){if(Qc(e[m],0,UF)){t[m]=t[m+1]=0;continue}i=t[m]/e[m],o=t[m+1]/e[m],c=Math.pow(i,2)+Math.pow(o,2),!(c<=9)&&(l=3/Math.sqrt(c),t[m]=i*l*e[m],t[m+1]=o*l*e[m])}}function HF(n,e,t="x"){const r=XS(t),i=n.length;let o,l,c,h=fl(n,0);for(let f=0;f<i;++f){if(l=c,c=h,h=fl(n,f+1),!c)continue;const m=c[t],y=c[r];l&&(o=(m-l[t])/3,c[`cp1${t}`]=m-o,c[`cp1${r}`]=y-o*e[f]),h&&(o=(h[t]-m)/3,c[`cp2${t}`]=m+o,c[`cp2${r}`]=y+o*e[f])}}function WF(n,e="x"){const t=XS(e),r=n.length,i=Array(r).fill(0),o=Array(r);let l,c,h,f=fl(n,0);for(l=0;l<r;++l)if(c=h,h=f,f=fl(n,l+1),!!h){if(f){const m=f[e]-h[e];i[l]=m!==0?(f[t]-h[t])/m:0}o[l]=c?f?hl(i[l-1])!==hl(i[l])?0:(i[l-1]+i[l])/2:i[l-1]:i[l]}BF(n,i,o),HF(n,o,e)}function md(n,e,t){return Math.max(Math.min(n,t),e)}function $F(n,e){let t,r,i,o,l,c=_u(n[0],e);for(t=0,r=n.length;t<r;++t)l=o,o=c,c=t<r-1&&_u(n[t+1],e),o&&(i=n[t],l&&(i.cp1x=md(i.cp1x,e.left,e.right),i.cp1y=md(i.cp1y,e.top,e.bottom)),c&&(i.cp2x=md(i.cp2x,e.left,e.right),i.cp2y=md(i.cp2y,e.top,e.bottom)))}function qF(n,e,t,r,i){let o,l,c,h;if(e.spanGaps&&(n=n.filter(f=>!f.skip)),e.cubicInterpolationMode==="monotone")WF(n,i);else{let f=r?n[n.length-1]:n[0];for(o=0,l=n.length;o<l;++o)c=n[o],h=zF(f,c,n[Math.min(o+1,l-(r?0:1))%l],e.tension),c.cp1x=h.previous.x,c.cp1y=h.previous.y,c.cp2x=h.next.x,c.cp2y=h.next.y,f=c}e.capBezierPoints&&$F(n,t)}function R_(){return typeof window<"u"&&typeof document<"u"}function D_(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function wf(n,e,t){let r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!==-1&&(r=r/100*e.parentNode[t])):r=n,r}const tp=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function YF(n,e){return tp(n).getPropertyValue(e)}const GF=["top","right","bottom","left"];function jo(n,e,t){const r={};t=t?"-"+t:"";for(let i=0;i<4;i++){const o=GF[i];r[o]=parseFloat(n[e+"-"+o+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const KF=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function QF(n,e){const t=n.touches,r=t&&t.length?t[0]:n,{offsetX:i,offsetY:o}=r;let l=!1,c,h;if(KF(i,o,n.target))c=i,h=o;else{const f=e.getBoundingClientRect();c=r.clientX-f.left,h=r.clientY-f.top,l=!0}return{x:c,y:h,box:l}}function Co(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:r}=e,i=tp(t),o=i.boxSizing==="border-box",l=jo(i,"padding"),c=jo(i,"border","width"),{x:h,y:f,box:m}=QF(n,t),y=l.left+(m&&c.left),w=l.top+(m&&c.top);let{width:T,height:I}=e;return o&&(T-=l.width+c.width,I-=l.height+c.height),{x:Math.round((h-y)/T*t.width/r),y:Math.round((f-w)/I*t.height/r)}}function XF(n,e,t){let r,i;if(e===void 0||t===void 0){const o=n&&D_(n);if(!o)e=n.clientWidth,t=n.clientHeight;else{const l=o.getBoundingClientRect(),c=tp(o),h=jo(c,"border","width"),f=jo(c,"padding");e=l.width-f.width-h.width,t=l.height-f.height-h.height,r=wf(c.maxWidth,o,"clientWidth"),i=wf(c.maxHeight,o,"clientHeight")}}return{width:e,height:t,maxWidth:r||_f,maxHeight:i||_f}}const gd=n=>Math.round(n*10)/10;function JF(n,e,t,r){const i=tp(n),o=jo(i,"margin"),l=wf(i.maxWidth,n,"clientWidth")||_f,c=wf(i.maxHeight,n,"clientHeight")||_f,h=XF(n,e,t);let{width:f,height:m}=h;if(i.boxSizing==="content-box"){const w=jo(i,"border","width"),T=jo(i,"padding");f-=T.width+w.width,m-=T.height+w.height}return f=Math.max(0,f-o.width),m=Math.max(0,r?f/r:m-o.height),f=gd(Math.min(f,l,h.maxWidth)),m=gd(Math.min(m,c,h.maxHeight)),f&&!m&&(m=gd(f/2)),(e!==void 0||t!==void 0)&&r&&h.height&&m>h.height&&(m=h.height,f=gd(Math.floor(m*r))),{width:f,height:m}}function xx(n,e,t){const r=e||1,i=Math.floor(n.height*r),o=Math.floor(n.width*r);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const l=n.canvas;return l.style&&(t||!l.style.height&&!l.style.width)&&(l.style.height=`${n.height}px`,l.style.width=`${n.width}px`),n.currentDevicePixelRatio!==r||l.height!==i||l.width!==o?(n.currentDevicePixelRatio=r,l.height=i,l.width=o,n.ctx.setTransform(r,0,0,r,0,0),!0):!1}const ZF=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};R_()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function bx(n,e){const t=YF(n,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Ao(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function e4(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:r==="middle"?t<.5?n.y:e.y:r==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function t4(n,e,t,r){const i={x:n.cp2x,y:n.cp2y},o={x:e.cp1x,y:e.cp1y},l=Ao(n,i,t),c=Ao(i,o,t),h=Ao(o,e,t),f=Ao(l,c,t),m=Ao(c,h,t);return Ao(f,m,t)}const n4=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,r){return t-r},leftForLtr(t,r){return t-r}}},r4=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function il(n,e,t){return n?n4(e,t):r4()}function JS(n,e){let t,r;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=r)}function ZS(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function eI(n){return n==="angle"?{between:FS,compare:eF,normalize:ws}:{between:jc,compare:(e,t)=>e-t,normalize:e=>e}}function Tx({start:n,end:e,count:t,loop:r,style:i}){return{start:n%t,end:e%t,loop:r&&(e-n+1)%t===0,style:i}}function i4(n,e,t){const{property:r,start:i,end:o}=t,{between:l,normalize:c}=eI(r),h=e.length;let{start:f,end:m,loop:y}=n,w,T;if(y){for(f+=h,m+=h,w=0,T=h;w<T&&l(c(e[f%h][r]),i,o);++w)f--,m--;f%=h,m%=h}return m<f&&(m+=h),{start:f,end:m,loop:y,style:n.style}}function s4(n,e,t){if(!t)return[n];const{property:r,start:i,end:o}=t,l=e.length,{compare:c,between:h,normalize:f}=eI(r),{start:m,end:y,loop:w,style:T}=i4(n,e,t),I=[];let k=!1,x=null,N,U,H;const K=()=>h(i,H,N)&&c(i,H)!==0,G=()=>c(o,N)===0||h(o,H,N),ne=()=>k||K(),D=()=>!k||G();for(let P=m,A=m;P<=y;++P)U=e[P%l],!U.skip&&(N=f(U[r]),N!==H&&(k=h(N,i,o),x===null&&ne()&&(x=c(N,i)===0?P:A),x!==null&&D()&&(I.push(Tx({start:x,end:P,loop:w,count:l,style:T})),x=null),A=P,H=N));return x!==null&&I.push(Tx({start:x,end:y,loop:w,count:l,style:T})),I}function o4(n,e){const t=[],r=n.segments;for(let i=0;i<r.length;i++){const o=s4(r[i],n.points,e);o.length&&t.push(...o)}return t}function a4(n,e,t,r){let i=0,o=e-1;if(t&&!r)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(o+=i);o>i&&n[o%e].skip;)o--;return o%=e,{start:i,end:o}}function l4(n,e,t,r){const i=n.length,o=[];let l=e,c=n[e],h;for(h=e+1;h<=t;++h){const f=n[h%i];f.skip||f.stop?c.skip||(r=!1,o.push({start:e%i,end:(h-1)%i,loop:r}),e=l=f.stop?h:null):(l=h,c.skip&&(e=h)),c=f}return l!==null&&o.push({start:e%i,end:l%i,loop:r}),o}function c4(n,e){const t=n.points,r=n.options.spanGaps,i=t.length;if(!i)return[];const o=!!n._loop,{start:l,end:c}=a4(t,i,o,r);if(r===!0)return Sx(n,[{start:l,end:c,loop:o}],t,e);const h=c<l?c+i:c,f=!!n._fullLoop&&l===0&&c===i-1;return Sx(n,l4(t,l,h,f),t,e)}function Sx(n,e,t,r){return!r||!r.setContext||!t?e:u4(n,e,t,r)}function u4(n,e,t,r){const i=n._chart.getContext(),o=Ix(n.options),{_datasetIndex:l,options:{spanGaps:c}}=n,h=t.length,f=[];let m=o,y=e[0].start,w=y;function T(I,k,x,N){const U=c?-1:1;if(I!==k){for(I+=h;t[I%h].skip;)I-=U;for(;t[k%h].skip;)k+=U;I%h!==k%h&&(f.push({start:I%h,end:k%h,loop:x,style:N}),m=N,y=k%h)}}for(const I of e){y=c?y:I.start;let k=t[y%h],x;for(w=y+1;w<=I.end;w++){const N=t[w%h];x=Ix(r.setContext(Jo(i,{type:"segment",p0:k,p1:N,p0DataIndex:(w-1)%h,p1DataIndex:w%h,datasetIndex:l}))),h4(x,m)&&T(y,w-1,I.loop,m),k=N,m=x}y<w-1&&T(y,w-1,I.loop,m)}return f}function Ix(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function h4(n,e){if(!e)return!1;const t=[],r=function(i,o){return S_(o)?(t.includes(o)||t.push(o),t.indexOf(o)):o};return JSON.stringify(n,r)!==JSON.stringify(e,r)}function yd(n,e,t){return n.options.clip?n[t]:e[t]}function d4(n,e){const{xScale:t,yScale:r}=n;return t&&r?{left:yd(t,e,"left"),right:yd(t,e,"right"),top:yd(r,e,"top"),bottom:yd(r,e,"bottom")}:e}function f4(n,e){const t=e._clip;if(t.disabled)return!1;const r=d4(e,n.chartArea);return{left:t.left===!1?0:r.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:r.right+(t.right===!0?0:t.right),top:t.top===!1?0:r.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:r.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class p4{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,i){const o=t.listeners[i],l=t.duration;o.forEach(c=>c({chart:e,initial:t.initial,numSteps:l,currentStep:Math.min(r-t.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=US.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const o=r.items;let l=o.length-1,c=!1,h;for(;l>=0;--l)h=o[l],h._active?(h._total>r.duration&&(r.duration=h._total),h.tick(e),c=!0):(o[l]=o[o.length-1],o.pop());c&&(i.draw(),this._notify(i,r,e,"progress")),o.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),t+=o.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ci=new p4;const kx="transparent",m4={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const r=gx(n||kx),i=r.valid&&gx(e||kx);return i&&i.valid?i.mix(r,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class g4{constructor(e,t,r,i){const o=t[r];i=pd([e.to,i,o,e.from]);const l=pd([e.from,o,i]);this._active=!0,this._fn=e.fn||m4[e.type||typeof l],this._easing=Xc[e.easing]||Xc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=l,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const i=this._target[this._prop],o=r-this._start,l=this._duration-o;this._start=r,this._duration=Math.floor(Math.max(l,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=pd([e.to,t,i,e.from]),this._from=pd([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,i=this._prop,o=this._from,l=this._loop,c=this._to;let h;if(this._active=o!==c&&(l||t<r),!this._active){this._target[i]=c,this._notify(!0);return}if(t<0){this._target[i]=o;return}h=t/r%2,h=l&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[i]=this._fn(o,c,h)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}}class tI{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Ye(e))return;const t=Object.keys(St.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const o=e[i];if(!Ye(o))return;const l={};for(const c of t)l[c]=o[c];(tn(o.properties)&&o.properties||[i]).forEach(c=>{(c===i||!r.has(c))&&r.set(c,l)})})}_animateOptions(e,t){const r=t.options,i=_4(e,r);if(!i)return[];const o=this._createAnimations(i,r);return r.$shared&&y4(e.options.$animations,r).then(()=>{e.options=r},()=>{}),o}_createAnimations(e,t){const r=this._properties,i=[],o=e.$animations||(e.$animations={}),l=Object.keys(t),c=Date.now();let h;for(h=l.length-1;h>=0;--h){const f=l[h];if(f.charAt(0)==="$")continue;if(f==="options"){i.push(...this._animateOptions(e,t));continue}const m=t[f];let y=o[f];const w=r.get(f);if(y)if(w&&y.active()){y.update(w,m,c);continue}else y.cancel();if(!w||!w.duration){e[f]=m;continue}o[f]=y=new g4(w,e,f,m),i.push(y)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const r=this._createAnimations(e,t);if(r.length)return Ci.add(this._chart,r),!0}}function y4(n,e){const t=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const o=n[r[i]];o&&o.active()&&t.push(o.wait())}return Promise.all(t)}function _4(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function Px(n,e){const t=n&&n.options||{},r=t.reverse,i=t.min===void 0?e:0,o=t.max===void 0?e:0;return{start:r?o:i,end:r?i:o}}function v4(n,e,t){if(t===!1)return!1;const r=Px(n,t),i=Px(e,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function w4(n){let e,t,r,i;return Ye(n)?(e=n.top,t=n.right,r=n.bottom,i=n.left):e=t=r=i=n,{top:e,right:t,bottom:r,left:i,disabled:n===!1}}function nI(n,e){const t=[],r=n._getSortedDatasetMetas(e);let i,o;for(i=0,o=r.length;i<o;++i)t.push(r[i].index);return t}function Cx(n,e,t,r={}){const i=n.keys,o=r.mode==="single";let l,c,h,f;if(e===null)return;let m=!1;for(l=0,c=i.length;l<c;++l){if(h=+i[l],h===t){if(m=!0,r.all)continue;break}f=n.values[h],cr(f)&&(o||e===0||hl(e)===hl(f))&&(e+=f)}return!m&&!r.all?0:e}function E4(n,e){const{iScale:t,vScale:r}=e,i=t.axis==="x"?"x":"y",o=r.axis==="x"?"x":"y",l=Object.keys(n),c=new Array(l.length);let h,f,m;for(h=0,f=l.length;h<f;++h)m=l[h],c[h]={[i]:m,[o]:n[m]};return c}function og(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function x4(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function b4(n){const{min:e,max:t,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function T4(n,e,t){const r=n[e]||(n[e]={});return r[t]||(r[t]={})}function Ax(n,e,t,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const o=n[i.index];if(t&&o>0||!t&&o<0)return i.index}return null}function Rx(n,e){const{chart:t,_cachedMeta:r}=n,i=t._stacks||(t._stacks={}),{iScale:o,vScale:l,index:c}=r,h=o.axis,f=l.axis,m=x4(o,l,r),y=e.length;let w;for(let T=0;T<y;++T){const I=e[T],{[h]:k,[f]:x}=I,N=I._stacks||(I._stacks={});w=N[f]=T4(i,m,k),w[c]=x,w._top=Ax(w,l,!0,r.type),w._bottom=Ax(w,l,!1,r.type);const U=w._visualValues||(w._visualValues={});U[c]=x}}function ag(n,e){const t=n.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function S4(n,e){return Jo(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function I4(n,e,t){return Jo(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function bc(n,e){const t=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){e=e||n._parsed;for(const i of e){const o=i._stacks;if(!o||o[r]===void 0||o[r][t]===void 0)return;delete o[r][t],o[r]._visualValues!==void 0&&o[r]._visualValues[t]!==void 0&&delete o[r]._visualValues[t]}}}const lg=n=>n==="reset"||n==="none",Dx=(n,e)=>e?n:Object.assign({},n),k4=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:nI(t,!0),values:null};class rI{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=og(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&bc(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,r=this.getDataset(),i=(y,w,T,I)=>y==="x"?w:y==="r"?I:T,o=t.xAxisID=$e(r.xAxisID,ag(e,"x")),l=t.yAxisID=$e(r.yAxisID,ag(e,"y")),c=t.rAxisID=$e(r.rAxisID,ag(e,"r")),h=t.indexAxis,f=t.iAxisID=i(h,o,l,c),m=t.vAxisID=i(h,l,o,c);t.xScale=this.getScaleForId(o),t.yScale=this.getScaleForId(l),t.rScale=this.getScaleForId(c),t.iScale=this.getScaleForId(f),t.vScale=this.getScaleForId(m)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&fx(this._data,this),e._stacked&&bc(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),r=this._data;if(Ye(t)){const i=this._cachedMeta;this._data=E4(t,i)}else if(r!==t){if(r){fx(r,this);const i=this._cachedMeta;bc(i),i._parsed=[]}t&&Object.isExtensible(t)&&iF(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const o=t._stacked;t._stacked=og(t.vScale,t),t.stack!==r.stack&&(i=!0,bc(t),t.stack=r.stack),this._resyncElements(e),(i||o!==t._stacked)&&(Rx(this,t._parsed),t._stacked=og(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:r,_data:i}=this,{iScale:o,_stacked:l}=r,c=o.axis;let h=e===0&&t===i.length?!0:r._sorted,f=e>0&&r._parsed[e-1],m,y,w;if(this._parsing===!1)r._parsed=i,r._sorted=!0,w=i;else{tn(i[e])?w=this.parseArrayData(r,i,e,t):Ye(i[e])?w=this.parseObjectData(r,i,e,t):w=this.parsePrimitiveData(r,i,e,t);const T=()=>y[c]===null||f&&y[c]<f[c];for(m=0;m<t;++m)r._parsed[m+e]=y=w[m],h&&(T()&&(h=!1),f=y);r._sorted=h}l&&Rx(this,w)}parsePrimitiveData(e,t,r,i){const{iScale:o,vScale:l}=e,c=o.axis,h=l.axis,f=o.getLabels(),m=o===l,y=new Array(i);let w,T,I;for(w=0,T=i;w<T;++w)I=w+r,y[w]={[c]:m||o.parse(f[I],I),[h]:l.parse(t[I],I)};return y}parseArrayData(e,t,r,i){const{xScale:o,yScale:l}=e,c=new Array(i);let h,f,m,y;for(h=0,f=i;h<f;++h)m=h+r,y=t[m],c[h]={x:o.parse(y[0],m),y:l.parse(y[1],m)};return c}parseObjectData(e,t,r,i){const{xScale:o,yScale:l}=e,{xAxisKey:c="x",yAxisKey:h="y"}=this._parsing,f=new Array(i);let m,y,w,T;for(m=0,y=i;m<y;++m)w=m+r,T=t[w],f[m]={x:o.parse(gf(T,c),w),y:l.parse(gf(T,h),w)};return f}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,r){const i=this.chart,o=this._cachedMeta,l=t[e.axis],c={keys:nI(i,!0),values:t._stacks[e.axis]._visualValues};return Cx(c,l,o.index,{mode:r})}updateRangeFromParsed(e,t,r,i){const o=r[t.axis];let l=o===null?NaN:o;const c=i&&r._stacks[t.axis];i&&c&&(i.values=c,l=Cx(i,o,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,t){const r=this._cachedMeta,i=r._parsed,o=r._sorted&&e===r.iScale,l=i.length,c=this._getOtherScale(e),h=k4(t,r,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:m,max:y}=b4(c);let w,T;function I(){T=i[w];const k=T[c.axis];return!cr(T[e.axis])||m>k||y<k}for(w=0;w<l&&!(!I()&&(this.updateRangeFromParsed(f,e,T,h),o));++w);if(o){for(w=l-1;w>=0;--w)if(!I()){this.updateRangeFromParsed(f,e,T,h);break}}return f}getAllParsedValues(e){const t=this._cachedMeta._parsed,r=[];let i,o,l;for(i=0,o=t.length;i<o;++i)l=t[i][e.axis],cr(l)&&r.push(l);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,r=t.iScale,i=t.vScale,o=this.getParsed(e);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:i?""+i.getLabelForValue(o[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=w4($e(this.options.clip,v4(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,r=this._cachedMeta,i=r.data||[],o=t.chartArea,l=[],c=this._drawStart||0,h=this._drawCount||i.length-c,f=this.options.drawActiveElementsOnTop;let m;for(r.dataset&&r.dataset.draw(e,o,c,h),m=c;m<c+h;++m){const y=i[m];y.hidden||(y.active&&f?l.push(y):y.draw(e,o))}for(m=0;m<l.length;++m)l[m].draw(e,o)}getStyle(e,t){const r=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,t,r){const i=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const l=this._cachedMeta.data[e];o=l.$context||(l.$context=I4(this.getContext(),e,l)),o.parsed=this.getParsed(e),o.raw=i.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=S4(this.chart.getContext(),this.index)),o.dataset=i,o.index=o.datasetIndex=this.index;return o.active=!!t,o.mode=r,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",r){const i=t==="active",o=this._cachedDataOpts,l=e+"-"+t,c=o[l],h=this.enableOptionSharing&&yf(r);if(c)return Dx(c,h);const f=this.chart.config,m=f.datasetElementScopeKeys(this._type,e),y=i?[`${e}Hover`,"hover",e,""]:[e,""],w=f.getOptionScopes(this.getDataset(),m),T=Object.keys(St.elements[e]),I=()=>this.getContext(r,i,t),k=f.resolveNamedOptions(w,T,I,y);return k.$shared&&(k.$shared=h,o[l]=Object.freeze(Dx(k,h))),k}_resolveAnimations(e,t,r){const i=this.chart,o=this._cachedDataOpts,l=`animation-${t}`,c=o[l];if(c)return c;let h;if(i.options.animation!==!1){const m=this.chart.config,y=m.datasetAnimationScopeKeys(this._type,t),w=m.getOptionScopes(this.getDataset(),y);h=m.createResolver(w,this.getContext(e,r,t))}const f=new tI(i,h&&h.animations);return h&&h._cacheable&&(o[l]=Object.freeze(f)),f}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||lg(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const r=this.resolveDataElementOptions(e,t),i=this._sharedOptions,o=this.getSharedOptions(r),l=this.includeOptions(t,o)||o!==i;return this.updateSharedOptions(o,t,r),{sharedOptions:o,includeOptions:l}}updateElement(e,t,r,i){lg(i)?Object.assign(e,r):this._resolveAnimations(t,i).update(e,r)}updateSharedOptions(e,t,r){e&&!lg(t)&&this._resolveAnimations(void 0,t).update(e,r)}_setStyle(e,t,r,i){e.active=i;const o=this.getStyle(t,i);this._resolveAnimations(t,r,i).update(e,{options:!i&&this.getSharedOptions(o)||o})}removeHoverStyle(e,t,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,t,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,r=this._cachedMeta.data;for(const[c,h,f]of this._syncList)this[c](h,f);this._syncList=[];const i=r.length,o=t.length,l=Math.min(o,i);l&&this.parse(0,l),o>i?this._insertElements(i,o-i,e):o<i&&this._removeElements(o,i-o)}_insertElements(e,t,r=!0){const i=this._cachedMeta,o=i.data,l=e+t;let c;const h=f=>{for(f.length+=t,c=f.length-1;c>=l;c--)f[c]=f[c-t]};for(h(o),c=e;c<l;++c)o[c]=new this.dataElementType;this._parsing&&h(i._parsed),this.parse(e,t),r&&this.updateElements(o,e,t,"reset")}updateElements(e,t,r,i){}_removeElements(e,t){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,t);r._stacked&&bc(r,i)}r.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,r,i]=e;this[t](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class P4 extends rI{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:r,data:i=[],_dataset:o}=t,l=this.chart._animationsDisabled;let{start:c,count:h}=lF(t,i,l);this._drawStart=c,this._drawCount=h,cF(t)&&(c=0,h=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=i;const f=this.resolveDatasetElementOptions(e);this.options.showLine||(f.borderWidth=0),f.segment=this.options.segment,this.updateElement(r,void 0,{animated:!l,options:f},e),this.updateElements(i,c,h,e)}updateElements(e,t,r,i){const o=i==="reset",{iScale:l,vScale:c,_stacked:h,_dataset:f}=this._cachedMeta,{sharedOptions:m,includeOptions:y}=this._getSharedOptions(t,i),w=l.axis,T=c.axis,{spanGaps:I,segment:k}=this.options,x=yu(I)?I:Number.POSITIVE_INFINITY,N=this.chart._animationsDisabled||o||i==="none",U=t+r,H=e.length;let K=t>0&&this.getParsed(t-1);for(let G=0;G<H;++G){const ne=e[G],D=N?ne:{};if(G<t||G>=U){D.skip=!0;continue}const P=this.getParsed(G),A=ut(P[T]),V=D[w]=l.getPixelForValue(P[w],G),L=D[T]=o||A?c.getBasePixel():c.getPixelForValue(h?this.applyStack(c,P,h):P[T],G);D.skip=isNaN(V)||isNaN(L)||A,D.stop=G>0&&Math.abs(P[w]-K[w])>x,k&&(D.parsed=P,D.raw=f.data[G]),y&&(D.options=m||this.resolveDataElementOptions(G,ne.active?"active":i)),N||this.updateElement(ne,G,D,i),K=P}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,r=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const o=i[0].size(this.resolveDataElementOptions(0)),l=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,o,l)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function ko(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class O_{static override(e){Object.assign(O_.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return ko()}parse(){return ko()}format(){return ko()}add(){return ko()}diff(){return ko()}startOf(){return ko()}endOf(){return ko()}}var iI={_date:O_};function C4(n,e,t,r){const{controller:i,data:o,_sorted:l}=n,c=i._cachedMeta.iScale,h=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(c&&e===c.axis&&e!=="r"&&l&&o.length){const f=c._reversePixels?nF:No;if(r){if(i._sharedOptions){const m=o[0],y=typeof m.getRange=="function"&&m.getRange(e);if(y){const w=f(o,e,t-y),T=f(o,e,t+y);return{lo:w.lo,hi:T.hi}}}}else{const m=f(o,e,t);if(h){const{vScale:y}=i._cachedMeta,{_parsed:w}=n,T=w.slice(0,m.lo+1).reverse().findIndex(k=>!ut(k[y.axis]));m.lo-=Math.max(0,T);const I=w.slice(m.hi).findIndex(k=>!ut(k[y.axis]));m.hi+=Math.max(0,I)}return m}}return{lo:0,hi:o.length-1}}function np(n,e,t,r,i){const o=n.getSortedVisibleDatasetMetas(),l=t[e];for(let c=0,h=o.length;c<h;++c){const{index:f,data:m}=o[c],{lo:y,hi:w}=C4(o[c],e,l,i);for(let T=y;T<=w;++T){const I=m[T];I.skip||r(I,f,T)}}}function A4(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(r,i){const o=e?Math.abs(r.x-i.x):0,l=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(l,2))}}function cg(n,e,t,r,i){const o=[];return!i&&!n.isPointInArea(e)||np(n,t,e,function(c,h,f){!i&&!_u(c,n.chartArea,0)||c.inRange(e.x,e.y,r)&&o.push({element:c,datasetIndex:h,index:f})},!0),o}function R4(n,e,t,r){let i=[];function o(l,c,h){const{startAngle:f,endAngle:m}=l.getProps(["startAngle","endAngle"],r),{angle:y}=ZV(l,{x:e.x,y:e.y});FS(y,f,m)&&i.push({element:l,datasetIndex:c,index:h})}return np(n,t,e,o),i}function D4(n,e,t,r,i,o){let l=[];const c=A4(t);let h=Number.POSITIVE_INFINITY;function f(m,y,w){const T=m.inRange(e.x,e.y,i);if(r&&!T)return;const I=m.getCenterPoint(i);if(!(!!o||n.isPointInArea(I))&&!T)return;const x=c(e,I);x<h?(l=[{element:m,datasetIndex:y,index:w}],h=x):x===h&&l.push({element:m,datasetIndex:y,index:w})}return np(n,t,e,f),l}function ug(n,e,t,r,i,o){return!o&&!n.isPointInArea(e)?[]:t==="r"&&!r?R4(n,e,t,i):D4(n,e,t,r,i,o)}function Ox(n,e,t,r,i){const o=[],l=t==="x"?"inXRange":"inYRange";let c=!1;return np(n,t,e,(h,f,m)=>{h[l]&&h[l](e[t],i)&&(o.push({element:h,datasetIndex:f,index:m}),c=c||h.inRange(e.x,e.y,i))}),r&&!c?[]:o}var O4={modes:{index(n,e,t,r){const i=Co(e,n),o=t.axis||"x",l=t.includeInvisible||!1,c=t.intersect?cg(n,i,o,r,l):ug(n,i,o,!1,r,l),h=[];return c.length?(n.getSortedVisibleDatasetMetas().forEach(f=>{const m=c[0].index,y=f.data[m];y&&!y.skip&&h.push({element:y,datasetIndex:f.index,index:m})}),h):[]},dataset(n,e,t,r){const i=Co(e,n),o=t.axis||"xy",l=t.includeInvisible||!1;let c=t.intersect?cg(n,i,o,r,l):ug(n,i,o,!1,r,l);if(c.length>0){const h=c[0].datasetIndex,f=n.getDatasetMeta(h).data;c=[];for(let m=0;m<f.length;++m)c.push({element:f[m],datasetIndex:h,index:m})}return c},point(n,e,t,r){const i=Co(e,n),o=t.axis||"xy",l=t.includeInvisible||!1;return cg(n,i,o,r,l)},nearest(n,e,t,r){const i=Co(e,n),o=t.axis||"xy",l=t.includeInvisible||!1;return ug(n,i,o,t.intersect,r,l)},x(n,e,t,r){const i=Co(e,n);return Ox(n,i,"x",t.intersect,r)},y(n,e,t,r){const i=Co(e,n);return Ox(n,i,"y",t.intersect,r)}}};const sI=["left","top","right","bottom"];function Tc(n,e){return n.filter(t=>t.pos===e)}function Mx(n,e){return n.filter(t=>sI.indexOf(t.pos)===-1&&t.box.axis===e)}function Sc(n,e){return n.sort((t,r)=>{const i=e?r:t,o=e?t:r;return i.weight===o.weight?i.index-o.index:i.weight-o.weight})}function M4(n){const e=[];let t,r,i,o,l,c;for(t=0,r=(n||[]).length;t<r;++t)i=n[t],{position:o,options:{stack:l,stackWeight:c=1}}=i,e.push({index:t,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:l&&o+l,stackWeight:c});return e}function N4(n){const e={};for(const t of n){const{stack:r,pos:i,stackWeight:o}=t;if(!r||!sI.includes(i))continue;const l=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=o}return e}function L4(n,e){const t=N4(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let o,l,c;for(o=0,l=n.length;o<l;++o){c=n[o];const{fullSize:h}=c.box,f=t[c.stack],m=f&&c.stackWeight/f.weight;c.horizontal?(c.width=m?m*r:h&&e.availableWidth,c.height=i):(c.width=r,c.height=m?m*i:h&&e.availableHeight)}return t}function V4(n){const e=M4(n),t=Sc(e.filter(f=>f.box.fullSize),!0),r=Sc(Tc(e,"left"),!0),i=Sc(Tc(e,"right")),o=Sc(Tc(e,"top"),!0),l=Sc(Tc(e,"bottom")),c=Mx(e,"x"),h=Mx(e,"y");return{fullSize:t,leftAndTop:r.concat(o),rightAndBottom:i.concat(h).concat(l).concat(c),chartArea:Tc(e,"chartArea"),vertical:r.concat(i).concat(h),horizontal:o.concat(l).concat(c)}}function Nx(n,e,t,r){return Math.max(n[t],e[t])+Math.max(n[r],e[r])}function oI(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function F4(n,e,t,r){const{pos:i,box:o}=t,l=n.maxPadding;if(!Ye(i)){t.size&&(n[i]-=t.size);const y=r[t.stack]||{size:0,count:1};y.size=Math.max(y.size,t.horizontal?o.height:o.width),t.size=y.size/y.count,n[i]+=t.size}o.getPadding&&oI(l,o.getPadding());const c=Math.max(0,e.outerWidth-Nx(l,n,"left","right")),h=Math.max(0,e.outerHeight-Nx(l,n,"top","bottom")),f=c!==n.w,m=h!==n.h;return n.w=c,n.h=h,t.horizontal?{same:f,other:m}:{same:m,other:f}}function j4(n){const e=n.maxPadding;function t(r){const i=Math.max(e[r]-n[r],0);return n[r]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function U4(n,e){const t=e.maxPadding;function r(i){const o={left:0,top:0,right:0,bottom:0};return i.forEach(l=>{o[l]=Math.max(e[l],t[l])}),o}return r(n?["left","right"]:["top","bottom"])}function Uc(n,e,t,r){const i=[];let o,l,c,h,f,m;for(o=0,l=n.length,f=0;o<l;++o){c=n[o],h=c.box,h.update(c.width||e.w,c.height||e.h,U4(c.horizontal,e));const{same:y,other:w}=F4(e,t,c,r);f|=y&&i.length,m=m||w,h.fullSize||i.push(c)}return f&&Uc(i,e,t,r)||m}function _d(n,e,t,r,i){n.top=t,n.left=e,n.right=e+r,n.bottom=t+i,n.width=r,n.height=i}function Lx(n,e,t,r){const i=t.padding;let{x:o,y:l}=e;for(const c of n){const h=c.box,f=r[c.stack]||{placed:0,weight:1},m=c.stackWeight/f.weight||1;if(c.horizontal){const y=e.w*m,w=f.size||h.height;yf(f.start)&&(l=f.start),h.fullSize?_d(h,i.left,l,t.outerWidth-i.right-i.left,w):_d(h,e.left+f.placed,l,y,w),f.start=l,f.placed+=y,l=h.bottom}else{const y=e.h*m,w=f.size||h.width;yf(f.start)&&(o=f.start),h.fullSize?_d(h,o,i.top,w,t.outerHeight-i.bottom-i.top):_d(h,o,e.top+f.placed,w,y),f.start=o,f.placed+=y,o=h.right}}e.x=o,e.y=l}var Ps={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,r){if(!n)return;const i=Or(n.options.layout.padding),o=Math.max(e-i.width,0),l=Math.max(t-i.height,0),c=V4(n.boxes),h=c.vertical,f=c.horizontal;Ze(n.boxes,k=>{typeof k.beforeLayout=="function"&&k.beforeLayout()});const m=h.reduce((k,x)=>x.box.options&&x.box.options.display===!1?k:k+1,0)||1,y=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:o,availableHeight:l,vBoxMaxWidth:o/2/m,hBoxMaxHeight:l/2}),w=Object.assign({},i);oI(w,Or(r));const T=Object.assign({maxPadding:w,w:o,h:l,x:i.left,y:i.top},i),I=L4(h.concat(f),y);Uc(c.fullSize,T,y,I),Uc(h,T,y,I),Uc(f,T,y,I)&&Uc(h,T,y,I),j4(T),Lx(c.leftAndTop,T,y,I),T.x+=T.w,T.y+=T.h,Lx(c.rightAndBottom,T,y,I),n.chartArea={left:T.left,top:T.top,right:T.left+T.w,bottom:T.top+T.h,height:T.h,width:T.w},Ze(c.chartArea,k=>{const x=k.box;Object.assign(x,n.chartArea),x.update(T.w,T.h,{left:0,top:0,right:0,bottom:0})})}};class aI{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,i){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(e){return!0}updateConfig(e){}}class z4 extends aI{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Ud="$chartjs",B4={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Vx=n=>n===null||n==="";function H4(n,e){const t=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[Ud]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",Vx(i)){const o=bx(n,"width");o!==void 0&&(n.width=o)}if(Vx(r))if(n.style.height==="")n.height=n.width/(e||2);else{const o=bx(n,"height");o!==void 0&&(n.height=o)}return n}const lI=ZF?{passive:!0}:!1;function W4(n,e,t){n&&n.addEventListener(e,t,lI)}function $4(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,lI)}function q4(n,e){const t=B4[n.type]||n.type,{x:r,y:i}=Co(n,e);return{type:t,chart:e,native:n,x:r!==void 0?r:null,y:i!==void 0?i:null}}function Ef(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function Y4(n,e,t){const r=n.canvas,i=new MutationObserver(o=>{let l=!1;for(const c of o)l=l||Ef(c.addedNodes,r),l=l&&!Ef(c.removedNodes,r);l&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function G4(n,e,t){const r=n.canvas,i=new MutationObserver(o=>{let l=!1;for(const c of o)l=l||Ef(c.removedNodes,r),l=l&&!Ef(c.addedNodes,r);l&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const vu=new Map;let Fx=0;function cI(){const n=window.devicePixelRatio;n!==Fx&&(Fx=n,vu.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function K4(n,e){vu.size||window.addEventListener("resize",cI),vu.set(n,e)}function Q4(n){vu.delete(n),vu.size||window.removeEventListener("resize",cI)}function X4(n,e,t){const r=n.canvas,i=r&&D_(r);if(!i)return;const o=zS((c,h)=>{const f=i.clientWidth;t(c,h),f<i.clientWidth&&t()},window),l=new ResizeObserver(c=>{const h=c[0],f=h.contentRect.width,m=h.contentRect.height;f===0&&m===0||o(f,m)});return l.observe(i),K4(n,o),l}function hg(n,e,t){t&&t.disconnect(),e==="resize"&&Q4(n)}function J4(n,e,t){const r=n.canvas,i=zS(o=>{n.ctx!==null&&t(q4(o,n))},n);return W4(r,e,i),i}class Z4 extends aI{acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(H4(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[Ud])return!1;const r=t[Ud].initial;["height","width"].forEach(o=>{const l=r[o];ut(l)?t.removeAttribute(o):t.setAttribute(o,l)});const i=r.style||{};return Object.keys(i).forEach(o=>{t.style[o]=i[o]}),t.width=t.width,delete t[Ud],!0}addEventListener(e,t,r){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),l={attach:Y4,detach:G4,resize:X4}[t]||J4;i[t]=l(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),i=r[t];if(!i)return;({attach:hg,detach:hg,resize:hg}[t]||$4)(e,t,i),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,i){return JF(e,t,r,i)}isAttached(e){const t=e&&D_(e);return!!(t&&t.isConnected)}}function ej(n){return!R_()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?z4:Z4}class Pl{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return yu(this.x)&&yu(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const i={};return e.forEach(o=>{i[o]=r[o]&&r[o].active()?r[o]._to:this[o]}),i}}function tj(n,e){const t=n.options.ticks,r=nj(n),i=Math.min(t.maxTicksLimit||r,r),o=t.major.enabled?ij(e):[],l=o.length,c=o[0],h=o[l-1],f=[];if(l>i)return sj(e,f,o,l/i),f;const m=rj(o,e,i);if(l>0){let y,w;const T=l>1?Math.round((h-c)/(l-1)):null;for(vd(e,f,m,ut(T)?0:c-T,c),y=0,w=l-1;y<w;y++)vd(e,f,m,o[y],o[y+1]);return vd(e,f,m,h,ut(T)?e.length:h+T),f}return vd(e,f,m),f}function nj(n){const e=n.options.offset,t=n._tickSize(),r=n._length/t+(e?0:1),i=n._maxLength/t;return Math.floor(Math.min(r,i))}function rj(n,e,t){const r=oj(n),i=e.length/t;if(!r)return Math.max(i,1);const o=GV(r);for(let l=0,c=o.length-1;l<c;l++){const h=o[l];if(h>i)return h}return Math.max(i,1)}function ij(n){const e=[];let t,r;for(t=0,r=n.length;t<r;t++)n[t].major&&e.push(t);return e}function sj(n,e,t,r){let i=0,o=t[0],l;for(r=Math.ceil(r),l=0;l<n.length;l++)l===o&&(e.push(n[l]),i++,o=t[i*r])}function vd(n,e,t,r,i){const o=$e(r,0),l=Math.min($e(i,n.length),n.length);let c=0,h,f,m;for(t=Math.ceil(t),i&&(h=i-r,t=h/Math.floor(h/t)),m=o;m<0;)c++,m=Math.round(o+c*t);for(f=Math.max(o,0);f<l;f++)f===m&&(e.push(n[f]),c++,m=Math.round(o+c*t))}function oj(n){const e=n.length;let t,r;if(e<2)return!1;for(r=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==r)return!1;return r}const aj=n=>n==="left"?"right":n==="right"?"left":n,jx=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,Ux=(n,e)=>Math.min(e||n,n);function zx(n,e){const t=[],r=n.length/e,i=n.length;let o=0;for(;o<i;o+=r)t.push(n[Math.floor(o)]);return t}function lj(n,e,t){const r=n.ticks.length,i=Math.min(e,r-1),o=n._startPixel,l=n._endPixel,c=1e-6;let h=n.getPixelForTick(i),f;if(!(t&&(r===1?f=Math.max(h-o,l-h):e===0?f=(n.getPixelForTick(1)-h)/2:f=(h-n.getPixelForTick(i-1))/2,h+=i<e?f:-f,h<o-c||h>l+c)))return h}function cj(n,e){Ze(n,t=>{const r=t.gc,i=r.length/2;let o;if(i>e){for(o=0;o<i;++o)delete t.data[r[o]];r.splice(0,i)}})}function Ic(n){return n.drawTicks?n.tickLength:0}function Bx(n,e){if(!n.display)return 0;const t=Dn(n.font,e),r=Or(n.padding);return(tn(n.text)?n.text.length:1)*t.lineHeight+r.height}function uj(n,e){return Jo(n,{scale:e,type:"scale"})}function hj(n,e,t){return Jo(n,{tick:t,index:e,type:"tick"})}function dj(n,e,t){let r=BS(n);return(t&&e!=="right"||!t&&e==="right")&&(r=aj(r)),r}function fj(n,e,t,r){const{top:i,left:o,bottom:l,right:c,chart:h}=n,{chartArea:f,scales:m}=h;let y=0,w,T,I;const k=l-i,x=c-o;if(n.isHorizontal()){if(T=$n(r,o,c),Ye(t)){const N=Object.keys(t)[0],U=t[N];I=m[N].getPixelForValue(U)+k-e}else t==="center"?I=(f.bottom+f.top)/2+k-e:I=jx(n,t,e);w=c-o}else{if(Ye(t)){const N=Object.keys(t)[0],U=t[N];T=m[N].getPixelForValue(U)-x+e}else t==="center"?T=(f.left+f.right)/2-x+e:T=jx(n,t,e);I=$n(r,l,i),y=t==="left"?-Pr:Pr}return{titleX:T,titleY:I,maxWidth:w,rotation:y}}class ju extends Pl{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return e=Yr(e,Number.POSITIVE_INFINITY),t=Yr(t,Number.NEGATIVE_INFINITY),r=Yr(r,Number.POSITIVE_INFINITY),i=Yr(i,Number.NEGATIVE_INFINITY),{min:Yr(e,r),max:Yr(t,i),minDefined:cr(e),maxDefined:cr(t)}}getMinMax(e){let{min:t,max:r,minDefined:i,maxDefined:o}=this.getUserBounds(),l;if(i&&o)return{min:t,max:r};const c=this.getMatchingVisibleMetas();for(let h=0,f=c.length;h<f;++h)l=c[h].controller.getMinMax(this,e),i||(t=Math.min(t,l.min)),o||(r=Math.max(r,l.max));return t=o&&t>r?r:t,r=i&&t>r?t:r,{min:Yr(t,Yr(r,t)),max:Yr(r,Yr(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){lt(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:i,grace:o,ticks:l}=this.options,c=l.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=AF(this,o,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=c<this.ticks.length;this._convertTicksToLabels(h?zx(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=tj(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,r;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){lt(this.options.afterUpdate,[this])}beforeSetDimensions(){lt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){lt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),lt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){lt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,i,o;for(r=0,i=e.length;r<i;r++)o=e[r],o.label=lt(t.callback,[o.value,r,e],this)}afterTickToLabelConversion(){lt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){lt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=Ux(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,o=t.maxRotation;let l=i,c,h,f;if(!this._isVisible()||!t.display||i>=o||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const m=this._getLabelSizes(),y=m.widest.width,w=m.highest.height,T=Cr(this.chart.width-y,0,this.maxWidth);c=e.offset?this.maxWidth/r:T/(r-1),y+6>c&&(c=T/(r-(e.offset?.5:1)),h=this.maxHeight-Ic(e.grid)-t.padding-Bx(e.title,this.chart.options.font),f=Math.sqrt(y*y+w*w),l=JV(Math.min(Math.asin(Cr((m.highest.height+6)/c,-1,1)),Math.asin(Cr(h/f,-1,1))-Math.asin(Cr(w/f,-1,1)))),l=Math.max(i,Math.min(o,l))),this.labelRotation=l}afterCalculateLabelRotation(){lt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){lt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:o}}=this,l=this._isVisible(),c=this.isHorizontal();if(l){const h=Bx(i,t.options.font);if(c?(e.width=this.maxWidth,e.height=Ic(o)+h):(e.height=this.maxHeight,e.width=Ic(o)+h),r.display&&this.ticks.length){const{first:f,last:m,widest:y,highest:w}=this._getLabelSizes(),T=r.padding*2,I=Mo(this.labelRotation),k=Math.cos(I),x=Math.sin(I);if(c){const N=r.mirror?0:x*y.width+k*w.height;e.height=Math.min(this.maxHeight,e.height+N+T)}else{const N=r.mirror?0:k*y.width+x*w.height;e.width=Math.min(this.maxWidth,e.width+N+T)}this._calculatePadding(f,m,x,k)}}this._handleMargins(),c?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,i){const{ticks:{align:o,padding:l},position:c}=this.options,h=this.labelRotation!==0,f=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const m=this.getPixelForTick(0)-this.left,y=this.right-this.getPixelForTick(this.ticks.length-1);let w=0,T=0;h?f?(w=i*e.width,T=r*t.height):(w=r*e.height,T=i*t.width):o==="start"?T=t.width:o==="end"?w=e.width:o!=="inner"&&(w=e.width/2,T=t.width/2),this.paddingLeft=Math.max((w-m+l)*this.width/(this.width-m),0),this.paddingRight=Math.max((T-y+l)*this.width/(this.width-y),0)}else{let m=t.height/2,y=e.height/2;o==="start"?(m=0,y=e.height):o==="end"&&(m=t.height,y=0),this.paddingTop=m+l,this.paddingBottom=y+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){lt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,r;for(t=0,r=e.length;t<r;t++)ut(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=zx(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){const{ctx:i,_longestTextCache:o}=this,l=[],c=[],h=Math.floor(t/Ux(t,r));let f=0,m=0,y,w,T,I,k,x,N,U,H,K,G;for(y=0;y<t;y+=h){if(I=e[y].label,k=this._resolveTickFontOptions(y),i.font=x=k.string,N=o[x]=o[x]||{data:{},gc:[]},U=k.lineHeight,H=K=0,!ut(I)&&!tn(I))H=_x(i,N.data,N.gc,H,I),K=U;else if(tn(I))for(w=0,T=I.length;w<T;++w)G=I[w],!ut(G)&&!tn(G)&&(H=_x(i,N.data,N.gc,H,G),K+=U);l.push(H),c.push(K),f=Math.max(H,f),m=Math.max(K,m)}cj(o,t);const ne=l.indexOf(f),D=c.indexOf(m),P=A=>({width:l[A]||0,height:c[A]||0});return{first:P(0),last:P(t-1),widest:P(ne),highest:P(D),widths:l,heights:c}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return tF(this._alignToPixels?Io(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=hj(this.getContext(),e,r))}return this.$context||(this.$context=uj(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Mo(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),o=this._getLabelSizes(),l=e.autoSkipPadding||0,c=o?o.widest.width+l:0,h=o?o.highest.height+l:0;return this.isHorizontal()?h*r>c*i?c/r:h/i:h*i<c*r?h/r:c/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,i=this.options,{grid:o,position:l,border:c}=i,h=o.offset,f=this.isHorizontal(),y=this.ticks.length+(h?1:0),w=Ic(o),T=[],I=c.setContext(this.getContext()),k=I.display?I.width:0,x=k/2,N=function(Ie){return Io(r,Ie,k)};let U,H,K,G,ne,D,P,A,V,L,F,O;if(l==="top")U=N(this.bottom),D=this.bottom-w,A=U-x,L=N(e.top)+x,O=e.bottom;else if(l==="bottom")U=N(this.top),L=e.top,O=N(e.bottom)-x,D=U+x,A=this.top+w;else if(l==="left")U=N(this.right),ne=this.right-w,P=U-x,V=N(e.left)+x,F=e.right;else if(l==="right")U=N(this.left),V=e.left,F=N(e.right)-x,ne=U+x,P=this.left+w;else if(t==="x"){if(l==="center")U=N((e.top+e.bottom)/2+.5);else if(Ye(l)){const Ie=Object.keys(l)[0],te=l[Ie];U=N(this.chart.scales[Ie].getPixelForValue(te))}L=e.top,O=e.bottom,D=U+x,A=D+w}else if(t==="y"){if(l==="center")U=N((e.left+e.right)/2);else if(Ye(l)){const Ie=Object.keys(l)[0],te=l[Ie];U=N(this.chart.scales[Ie].getPixelForValue(te))}ne=U-x,P=ne-w,V=e.left,F=e.right}const we=$e(i.ticks.maxTicksLimit,y),he=Math.max(1,Math.ceil(y/we));for(H=0;H<y;H+=he){const Ie=this.getContext(H),te=o.setContext(Ie),se=c.setContext(Ie),pe=te.lineWidth,R=te.color,z=se.dash||[],X=se.dashOffset,J=te.tickWidth,oe=te.tickColor,ye=te.tickBorderDash||[],xe=te.tickBorderDashOffset;K=lj(this,H,h),K!==void 0&&(G=Io(r,K,pe),f?ne=P=V=F=G:D=A=L=O=G,T.push({tx1:ne,ty1:D,tx2:P,ty2:A,x1:V,y1:L,x2:F,y2:O,width:pe,color:R,borderDash:z,borderDashOffset:X,tickWidth:J,tickColor:oe,tickBorderDash:ye,tickBorderDashOffset:xe}))}return this._ticksLength=y,this._borderValue=U,T}_computeLabelItems(e){const t=this.axis,r=this.options,{position:i,ticks:o}=r,l=this.isHorizontal(),c=this.ticks,{align:h,crossAlign:f,padding:m,mirror:y}=o,w=Ic(r.grid),T=w+m,I=y?-m:T,k=-Mo(this.labelRotation),x=[];let N,U,H,K,G,ne,D,P,A,V,L,F,O="middle";if(i==="top")ne=this.bottom-I,D=this._getXAxisLabelAlignment();else if(i==="bottom")ne=this.top+I,D=this._getXAxisLabelAlignment();else if(i==="left"){const he=this._getYAxisLabelAlignment(w);D=he.textAlign,G=he.x}else if(i==="right"){const he=this._getYAxisLabelAlignment(w);D=he.textAlign,G=he.x}else if(t==="x"){if(i==="center")ne=(e.top+e.bottom)/2+T;else if(Ye(i)){const he=Object.keys(i)[0],Ie=i[he];ne=this.chart.scales[he].getPixelForValue(Ie)+T}D=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")G=(e.left+e.right)/2-T;else if(Ye(i)){const he=Object.keys(i)[0],Ie=i[he];G=this.chart.scales[he].getPixelForValue(Ie)}D=this._getYAxisLabelAlignment(w).textAlign}t==="y"&&(h==="start"?O="top":h==="end"&&(O="bottom"));const we=this._getLabelSizes();for(N=0,U=c.length;N<U;++N){H=c[N],K=H.label;const he=o.setContext(this.getContext(N));P=this.getPixelForTick(N)+o.labelOffset,A=this._resolveTickFontOptions(N),V=A.lineHeight,L=tn(K)?K.length:1;const Ie=L/2,te=he.color,se=he.textStrokeColor,pe=he.textStrokeWidth;let R=D;l?(G=P,D==="inner"&&(N===U-1?R=this.options.reverse?"left":"right":N===0?R=this.options.reverse?"right":"left":R="center"),i==="top"?f==="near"||k!==0?F=-L*V+V/2:f==="center"?F=-we.highest.height/2-Ie*V+V:F=-we.highest.height+V/2:f==="near"||k!==0?F=V/2:f==="center"?F=we.highest.height/2-Ie*V:F=we.highest.height-L*V,y&&(F*=-1),k!==0&&!he.showLabelBackdrop&&(G+=V/2*Math.sin(k))):(ne=P,F=(1-L)*V/2);let z;if(he.showLabelBackdrop){const X=Or(he.backdropPadding),J=we.heights[N],oe=we.widths[N];let ye=F-X.top,xe=0-X.left;switch(O){case"middle":ye-=J/2;break;case"bottom":ye-=J;break}switch(D){case"center":xe-=oe/2;break;case"right":xe-=oe;break;case"inner":N===U-1?xe-=oe:N>0&&(xe-=oe/2);break}z={left:xe,top:ye,width:oe+X.width,height:J+X.height,color:he.backdropColor}}x.push({label:K,font:A,textOffset:F,options:{rotation:k,color:te,strokeColor:se,strokeWidth:pe,textAlign:R,textBaseline:O,translation:[G,ne],backdrop:z}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Mo(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:i,padding:o}}=this.options,l=this._getLabelSizes(),c=e+o,h=l.widest.width;let f,m;return t==="left"?i?(m=this.right+o,r==="near"?f="left":r==="center"?(f="center",m+=h/2):(f="right",m+=h)):(m=this.right-c,r==="near"?f="right":r==="center"?(f="center",m-=h/2):(f="left",m=this.left)):t==="right"?i?(m=this.left+o,r==="near"?f="right":r==="center"?(f="center",m-=h/2):(f="left",m-=h)):(m=this.left+c,r==="near"?f="left":r==="center"?(f="center",m+=h/2):(f="right",m=this.right)):f="right",{textAlign:f,x:m}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:i,width:o,height:l}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,i,o,l),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(o=>o.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,l;const c=(h,f,m)=>{!m.width||!m.color||(r.save(),r.lineWidth=m.width,r.strokeStyle=m.color,r.setLineDash(m.borderDash||[]),r.lineDashOffset=m.borderDashOffset,r.beginPath(),r.moveTo(h.x,h.y),r.lineTo(f.x,f.y),r.stroke(),r.restore())};if(t.display)for(o=0,l=i.length;o<l;++o){const h=i[o];t.drawOnChartArea&&c({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),t.drawTicks&&c({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:r,grid:i}}=this,o=r.setContext(this.getContext()),l=r.display?o.width:0;if(!l)return;const c=i.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let f,m,y,w;this.isHorizontal()?(f=Io(e,this.left,l)-l/2,m=Io(e,this.right,c)+c/2,y=w=h):(y=Io(e,this.top,l)-l/2,w=Io(e,this.bottom,c)+c/2,f=m=h),t.save(),t.lineWidth=o.width,t.strokeStyle=o.color,t.beginPath(),t.moveTo(f,y),t.lineTo(m,w),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&I_(r,i);const o=this.getLabelItems(e);for(const l of o){const c=l.options,h=l.font,f=l.label,m=l.textOffset;vf(r,f,0,m,h,c)}i&&k_(r)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;const o=Dn(r.font),l=Or(r.padding),c=r.align;let h=o.lineHeight/2;t==="bottom"||t==="center"||Ye(t)?(h+=l.bottom,tn(r.text)&&(h+=o.lineHeight*(r.text.length-1))):h+=l.top;const{titleX:f,titleY:m,maxWidth:y,rotation:w}=fj(this,h,t,c);vf(e,r.text,0,0,o,{color:r.color,maxWidth:y,rotation:w,textAlign:dj(c,t,i),textBaseline:"middle",translation:[f,m]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=$e(e.grid&&e.grid.z,-1),i=$e(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==ju.prototype.draw?[{z:t,draw:o=>{this.draw(o)}}]:[{z:r,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let o,l;for(o=0,l=t.length;o<l;++o){const c=t[o];c[r]===this.id&&(!e||c.type===e)&&i.push(c)}return i}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return Dn(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class wd{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;gj(t)&&(r=this.register(t));const i=this.items,o=e.id,l=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in i||(i[o]=e,pj(e,l,r),this.override&&St.override(e.id,e.overrides)),l}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,i=this.scope;r in t&&delete t[r],i&&r in St[i]&&(delete St[i][r],this.override&&delete Go[r])}}function pj(n,e,t){const r=gu(Object.create(null),[t?St.get(t):{},St.get(e),n.defaults]);St.set(e,r),n.defaultRoutes&&mj(e,n.defaultRoutes),n.descriptors&&St.describe(e,n.descriptors)}function mj(n,e){Object.keys(e).forEach(t=>{const r=t.split("."),i=r.pop(),o=[n].concat(r).join("."),l=e[t].split("."),c=l.pop(),h=l.join(".");St.route(o,i,h,c)})}function gj(n){return"id"in n&&"defaults"in n}class yj{constructor(){this.controllers=new wd(rI,"datasets",!0),this.elements=new wd(Pl,"elements"),this.plugins=new wd(Object,"plugins"),this.scales=new wd(ju,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(i=>{const o=r||this._getRegistryForType(i);r||o.isForType(i)||o===this.plugins&&i.id?this._exec(e,o,i):Ze(i,l=>{const c=r||this._getRegistryForType(l);this._exec(e,c,l)})})}_exec(e,t,r){const i=b_(e);lt(r["before"+i],[],r),t[e](r),lt(r["after"+i],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Qr=new yj;class _j{constructor(){this._init=[]}notify(e,t,r,i){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const o=i?this._descriptors(e).filter(i):this._descriptors(e),l=this._notify(o,e,t,r);return t==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),l}_notify(e,t,r,i){i=i||{};for(const o of e){const l=o.plugin,c=l[r],h=[t,i,o.options];if(lt(c,h,l)===!1&&i.cancelable)return!1}return!0}invalidate(){ut(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,i=$e(r.options&&r.options.plugins,{}),o=vj(r);return i===!1&&!t?[]:Ej(e,o,i,t)}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,i=(o,l)=>o.filter(c=>!l.some(h=>c.plugin.id===h.plugin.id));this._notify(i(t,r),e,"stop"),this._notify(i(r,t),e,"start")}}function vj(n){const e={},t=[],r=Object.keys(Qr.plugins.items);for(let o=0;o<r.length;o++)t.push(Qr.getPlugin(r[o]));const i=n.plugins||[];for(let o=0;o<i.length;o++){const l=i[o];t.indexOf(l)===-1&&(t.push(l),e[l.id]=!0)}return{plugins:t,localIds:e}}function wj(n,e){return!e&&n===!1?null:n===!0?{}:n}function Ej(n,{plugins:e,localIds:t},r,i){const o=[],l=n.getContext();for(const c of e){const h=c.id,f=wj(r[h],i);f!==null&&o.push({plugin:c,options:xj(n.config,{plugin:c,local:t[h]},f,l)})}return o}function xj(n,{plugin:e,local:t},r,i){const o=n.pluginScopeKeys(e),l=n.getOptionScopes(r,o);return t&&e.defaults&&l.push(e.defaults),n.createResolver(l,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function iy(n,e){const t=St.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function bj(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function Tj(n,e){return n===e?"_index_":"_value_"}function Hx(n){if(n==="x"||n==="y"||n==="r")return n}function Sj(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function sy(n,...e){if(Hx(n))return n;for(const t of e){const r=t.axis||Sj(t.position)||n.length>1&&Hx(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Wx(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function Ij(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(t.length)return Wx(n,"x",t[0])||Wx(n,"y",t[0])}return{}}function kj(n,e){const t=Go[n.type]||{scales:{}},r=e.scales||{},i=iy(n.type,e),o=Object.create(null);return Object.keys(r).forEach(l=>{const c=r[l];if(!Ye(c))return console.error(`Invalid scale configuration for scale: ${l}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const h=sy(l,c,Ij(l,n),St.scales[c.type]),f=Tj(h,i),m=t.scales||{};o[l]=Kc(Object.create(null),[{axis:h},c,m[h],m[f]])}),n.data.datasets.forEach(l=>{const c=l.type||n.type,h=l.indexAxis||iy(c,e),m=(Go[c]||{}).scales||{};Object.keys(m).forEach(y=>{const w=bj(y,h),T=l[w+"AxisID"]||w;o[T]=o[T]||Object.create(null),Kc(o[T],[{axis:w},r[T],m[y]])})}),Object.keys(o).forEach(l=>{const c=o[l];Kc(c,[St.scales[c.type],St.scale])}),o}function uI(n){const e=n.options||(n.options={});e.plugins=$e(e.plugins,{}),e.scales=kj(n,e)}function hI(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function Pj(n){return n=n||{},n.data=hI(n.data),uI(n),n}const $x=new Map,dI=new Set;function Ed(n,e){let t=$x.get(n);return t||(t=e(),$x.set(n,t),dI.add(t)),t}const kc=(n,e,t)=>{const r=gf(e,t);r!==void 0&&n.add(r)};class Cj{constructor(e){this._config=Pj(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=hI(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),uI(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Ed(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Ed(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Ed(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,r=this.type;return Ed(`${r}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const r=this._scopeCache;let i=r.get(e);return(!i||t)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,t,r){const{options:i,type:o}=this,l=this._cachedScopes(e,r),c=l.get(t);if(c)return c;const h=new Set;t.forEach(m=>{e&&(h.add(e),m.forEach(y=>kc(h,e,y))),m.forEach(y=>kc(h,i,y)),m.forEach(y=>kc(h,Go[o]||{},y)),m.forEach(y=>kc(h,St,y)),m.forEach(y=>kc(h,ty,y))});const f=Array.from(h);return f.length===0&&f.push(Object.create(null)),dI.has(t)&&l.set(t,f),f}chartOptionScopes(){const{options:e,type:t}=this;return[e,Go[t]||{},St.datasets[t]||{},{type:t},St,ty]}resolveNamedOptions(e,t,r,i=[""]){const o={$shared:!0},{resolver:l,subPrefixes:c}=qx(this._resolverCache,e,i);let h=l;if(Rj(l,t)){o.$shared=!1,r=Bs(r)?r():r;const f=this.createResolver(e,r,c);h=dl(l,r,f)}for(const f of t)o[f]=h[f];return o}createResolver(e,t,r=[""],i){const{resolver:o}=qx(this._resolverCache,e,r);return Ye(t)?dl(o,t,void 0,i):o}}function qx(n,e,t){let r=n.get(e);r||(r=new Map,n.set(e,r));const i=t.join();let o=r.get(i);return o||(o={resolver:P_(e,t),subPrefixes:t.filter(c=>!c.toLowerCase().includes("hover"))},r.set(i,o)),o}const Aj=n=>Ye(n)&&Object.getOwnPropertyNames(n).some(e=>Bs(n[e]));function Rj(n,e){const{isScriptable:t,isIndexable:r}=YS(n);for(const i of e){const o=t(i),l=r(i),c=(l||o)&&n[i];if(o&&(Bs(c)||Aj(c))||l&&tn(c))return!0}return!1}var Dj="4.5.0";const Oj=["top","bottom","left","right","chartArea"];function Yx(n,e){return n==="top"||n==="bottom"||Oj.indexOf(n)===-1&&e==="x"}function Gx(n,e){return function(t,r){return t[n]===r[n]?t[e]-r[e]:t[n]-r[n]}}function Kx(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),lt(t&&t.onComplete,[n],e)}function Mj(n){const e=n.chart,t=e.options.animation;lt(t&&t.onProgress,[n],e)}function fI(n){return R_()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const zd={},Qx=n=>{const e=fI(n);return Object.values(zd).filter(t=>t.canvas===e).pop()};function Nj(n,e,t){const r=Object.keys(n);for(const i of r){const o=+i;if(o>=e){const l=n[i];delete n[i],(t>0||o>e)&&(n[o+t]=l)}}}function Lj(n,e,t,r){return!t||n.type==="mouseout"?null:r?e:n}let rp=class{static defaults=St;static instances=zd;static overrides=Go;static registry=Qr;static version=Dj;static getChart=Qx;static register(...e){Qr.add(...e),Xx()}static unregister(...e){Qr.remove(...e),Xx()}constructor(e,t){const r=this.config=new Cj(t),i=fI(e),o=Qx(i);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const l=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||ej(i)),this.platform.updateConfig(r);const c=this.platform.acquireContext(i,l.aspectRatio),h=c&&c.canvas,f=h&&h.height,m=h&&h.width;if(this.id=jV(),this.ctx=c,this.canvas=h,this.width=m,this.height=f,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new _j,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=oF(y=>this.update(y),l.resizeDelay||0),this._dataChanges=[],zd[this.id]=this,!c||!h){console.error("Failed to create chart: can't acquire context from the given item");return}Ci.listen(this,"complete",Kx),Ci.listen(this,"progress",Mj),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:r,height:i,_aspectRatio:o}=this;return ut(e)?t&&o?o:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Qr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():xx(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return vx(this.canvas,this.ctx),this}stop(){return Ci.stop(this),this}resize(e,t){Ci.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const r=this.options,i=this.canvas,o=r.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(i,e,t,o),c=r.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,xx(this,c,!0)&&(this.notifyPlugins("resize",{size:l}),lt(r.onResize,[this,l],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};Ze(t,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,t=e.scales,r=this.scales,i=Object.keys(r).reduce((l,c)=>(l[c]=!1,l),{});let o=[];t&&(o=o.concat(Object.keys(t).map(l=>{const c=t[l],h=sy(l,c),f=h==="r",m=h==="x";return{options:c,dposition:f?"chartArea":m?"bottom":"left",dtype:f?"radialLinear":m?"category":"linear"}}))),Ze(o,l=>{const c=l.options,h=c.id,f=sy(h,c),m=$e(c.type,l.dtype);(c.position===void 0||Yx(c.position,f)!==Yx(l.dposition))&&(c.position=l.dposition),i[h]=!0;let y=null;if(h in r&&r[h].type===m)y=r[h];else{const w=Qr.getScale(m);y=new w({id:h,type:m,ctx:this.ctx,chart:this}),r[y.id]=y}y.init(c,e)}),Ze(i,(l,c)=>{l||delete r[c]}),Ze(r,l=>{Ps.configure(this,l,l.options),Ps.addBox(this,l)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,r=e.length;if(e.sort((i,o)=>i.index-o.index),r>t){for(let i=t;i<r;++i)this._destroyDatasetMeta(i);e.splice(t,r-t)}this._sortedMetasets=e.slice(0).sort(Gx("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((r,i)=>{t.filter(o=>o===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=t.length;r<i;r++){const o=t[r];let l=this.getDatasetMeta(r);const c=o.type||this.config.type;if(l.type&&l.type!==c&&(this._destroyDatasetMeta(r),l=this.getDatasetMeta(r)),l.type=c,l.indexAxis=o.indexAxis||iy(c,this.options),l.order=o.order||0,l.index=r,l.label=""+o.label,l.visible=this.isDatasetVisible(r),l.controller)l.controller.updateIndex(r),l.controller.linkScales();else{const h=Qr.getController(c),{datasetElementType:f,dataElementType:m}=St.datasets[c];Object.assign(h,{dataElementType:Qr.getElement(m),datasetElementType:f&&Qr.getElement(f)}),l.controller=new h(this,r),e.push(l.controller)}}return this._updateMetasets(),e}_resetElements(){Ze(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const r=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let f=0,m=this.data.datasets.length;f<m;f++){const{controller:y}=this.getDatasetMeta(f),w=!i&&o.indexOf(y)===-1;y.buildOrUpdateElements(w),l=Math.max(+y.getMaxOverflow(),l)}l=this._minPadding=r.layout.autoPadding?l:0,this._updateLayout(l),i||Ze(o,f=>{f.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Gx("z","_idx"));const{_active:c,_lastEvent:h}=this;h?this._eventHandler(h,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){Ze(this.scales,e=>{Ps.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!cx(t,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:o}of t){const l=r==="_removeElements"?-o:o;Nj(e,i,l)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,r=o=>new Set(e.filter(l=>l[0]===o).map((l,c)=>c+","+l.splice(1).join(","))),i=r(0);for(let o=1;o<t;o++)if(!cx(i,r(o)))return;return Array.from(i).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ps.update(this,this.width,this.height,e);const t=this.chartArea,r=t.width<=0||t.height<=0;this._layers=[],Ze(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,o)=>{i._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,r=this.data.datasets.length;t<r;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,r=this.data.datasets.length;t<r;++t)this._updateDataset(t,Bs(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ci.has(this)?this.attached&&!Ci.running(this)&&Ci.start(this):(this.draw(),Kx({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,r=[];let i,o;for(i=0,o=t.length;i<o;++i){const l=t[i];(!e||l.visible)&&r.push(l)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=f4(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&I_(t,i),e.controller.draw(),i&&k_(t),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return _u(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,r,i){const o=O4.modes[t];return typeof o=="function"?o(this,e,r,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],r=this._metasets;let i=r.filter(o=>o&&o._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Jo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!t.hidden}setDatasetVisibility(e,t){const r=this.getDatasetMeta(e);r.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,r){const i=r?"show":"hide",o=this.getDatasetMeta(e),l=o.controller._resolveAnimations(void 0,i);yf(t)?(o.data[t].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),l.update(o,{visible:r}),this.update(c=>c.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Ci.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),vx(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete zd[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,r=(o,l)=>{t.addEventListener(this,o,l),e[o]=l},i=(o,l,c)=>{o.offsetX=l,o.offsetY=c,this._eventHandler(o)};Ze(this.options.events,o=>r(o,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,r=(h,f)=>{t.addEventListener(this,h,f),e[h]=f},i=(h,f)=>{e[h]&&(t.removeEventListener(this,h,f),delete e[h])},o=(h,f)=>{this.canvas&&this.resize(h,f)};let l;const c=()=>{i("attach",c),this.attached=!0,this.resize(),r("resize",o),r("detach",l)};l=()=>{this.attached=!1,i("resize",o),this._stop(),this._resize(0,0),r("attach",c)},t.isAttached(this.canvas)?c():l()}unbindEvents(){Ze(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Ze(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,r){const i=r?"set":"remove";let o,l,c,h;for(t==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+i+"DatasetHoverStyle"]()),c=0,h=e.length;c<h;++c){l=e[c];const f=l&&this.getDatasetMeta(l.datasetIndex).controller;f&&f[i+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],r=e.map(({datasetIndex:o,index:l})=>{const c=this.getDatasetMeta(o);if(!c)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:c.data[l],index:l}});!pf(r,t)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,t))}notifyPlugins(e,t,r){return this._plugins.notify(this,e,t,r)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,r){const i=this.options.hover,o=(h,f)=>h.filter(m=>!f.some(y=>m.datasetIndex===y.datasetIndex&&m.index===y.index)),l=o(t,e),c=r?e:o(e,t);l.length&&this.updateHoverStyle(l,i.mode,!1),c.length&&i.mode&&this.updateHoverStyle(c,i.mode,!0)}_eventHandler(e,t){const r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=l=>(l.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const o=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(o||r.changed)&&this.render(),this}_handleEvent(e,t,r){const{_active:i=[],options:o}=this,l=t,c=this._getActiveElements(e,i,r,l),h=$V(e),f=Lj(e,this._lastEvent,r,h);r&&(this._lastEvent=null,lt(o.onHover,[e,c,this],this),h&&lt(o.onClick,[e,c,this],this));const m=!pf(c,i);return(m||t)&&(this._active=c,this._updateHoverStyles(c,i,t)),this._lastEvent=f,m}_getActiveElements(e,t,r,i){if(e.type==="mouseout")return[];if(!r)return t;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,i)}};function Xx(){return Ze(rp.instances,n=>n._plugins.invalidate())}function pI(n,e,t=e){n.lineCap=$e(t.borderCapStyle,e.borderCapStyle),n.setLineDash($e(t.borderDash,e.borderDash)),n.lineDashOffset=$e(t.borderDashOffset,e.borderDashOffset),n.lineJoin=$e(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=$e(t.borderWidth,e.borderWidth),n.strokeStyle=$e(t.borderColor,e.borderColor)}function Vj(n,e,t){n.lineTo(t.x,t.y)}function Fj(n){return n.stepped?wF:n.tension||n.cubicInterpolationMode==="monotone"?EF:Vj}function mI(n,e,t={}){const r=n.length,{start:i=0,end:o=r-1}=t,{start:l,end:c}=e,h=Math.max(i,l),f=Math.min(o,c),m=i<l&&o<l||i>c&&o>c;return{count:r,start:h,loop:e.loop,ilen:f<h&&!m?r+f-h:f-h}}function jj(n,e,t,r){const{points:i,options:o}=e,{count:l,start:c,loop:h,ilen:f}=mI(i,t,r),m=Fj(o);let{move:y=!0,reverse:w}=r||{},T,I,k;for(T=0;T<=f;++T)I=i[(c+(w?f-T:T))%l],!I.skip&&(y?(n.moveTo(I.x,I.y),y=!1):m(n,k,I,w,o.stepped),k=I);return h&&(I=i[(c+(w?f:0))%l],m(n,k,I,w,o.stepped)),!!h}function Uj(n,e,t,r){const i=e.points,{count:o,start:l,ilen:c}=mI(i,t,r),{move:h=!0,reverse:f}=r||{};let m=0,y=0,w,T,I,k,x,N;const U=K=>(l+(f?c-K:K))%o,H=()=>{k!==x&&(n.lineTo(m,x),n.lineTo(m,k),n.lineTo(m,N))};for(h&&(T=i[U(0)],n.moveTo(T.x,T.y)),w=0;w<=c;++w){if(T=i[U(w)],T.skip)continue;const K=T.x,G=T.y,ne=K|0;ne===I?(G<k?k=G:G>x&&(x=G),m=(y*m+K)/++y):(H(),n.lineTo(K,G),I=ne,y=0,k=x=G),N=G}H()}function oy(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?Uj:jj}function zj(n){return n.stepped?e4:n.tension||n.cubicInterpolationMode==="monotone"?t4:Ao}function Bj(n,e,t,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,r)&&i.closePath()),pI(n,e.options),n.stroke(i)}function Hj(n,e,t,r){const{segments:i,options:o}=e,l=oy(e);for(const c of i)pI(n,o,c.style),n.beginPath(),l(n,e,c,{start:t,end:t+r-1})&&n.closePath(),n.stroke()}const Wj=typeof Path2D=="function";function $j(n,e,t,r){Wj&&!e.options.segment?Bj(n,e,t,r):Hj(n,e,t,r)}class qj extends Pl{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;qF(this._points,r,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=c4(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,r=e.length;return r&&t[e[r-1].end]}interpolate(e,t){const r=this.options,i=e[t],o=this.points,l=o4(this,{property:t,start:i,end:i});if(!l.length)return;const c=[],h=zj(r);let f,m;for(f=0,m=l.length;f<m;++f){const{start:y,end:w}=l[f],T=o[y],I=o[w];if(T===I){c.push(T);continue}const k=Math.abs((i-T[t])/(I[t]-T[t])),x=h(T,I,k,r.stepped);x[t]=e[t],c.push(x)}return c.length===1?c[0]:c}pathSegment(e,t,r){return oy(this)(e,this,t,r)}path(e,t,r){const i=this.segments,o=oy(this);let l=this._loop;t=t||0,r=r||this.points.length-t;for(const c of i)l&=o(e,this,c,{start:t,end:t+r-1});return!!l}draw(e,t,r,i){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),$j(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Jx(n,e,t,r){const i=n.options,{[t]:o}=n.getProps([t],r);return Math.abs(e-o)<i.radius+i.hitRadius}class Yj extends Pl{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,r){const i=this.options,{x:o,y:l}=this.getProps(["x","y"],r);return Math.pow(e-o,2)+Math.pow(t-l,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,t){return Jx(this,e,"x",t)}inYRange(e,t){return Jx(this,e,"y",t)}getCenterPoint(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const r=t&&e.borderWidth||0;return(t+r)*2}draw(e,t){const r=this.options;this.skip||r.radius<.1||!_u(this,t,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,ny(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}const Zx=(n,e)=>{let{boxHeight:t=e,boxWidth:r=e}=n;return n.usePointStyle&&(t=Math.min(t,e),r=n.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}},Gj=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class eb extends Pl{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=lt(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=Dn(r.font),o=i.size,l=this._computeTitleHeight(),{boxWidth:c,itemHeight:h}=Zx(r,o);let f,m;t.font=i.string,this.isHorizontal()?(f=this.maxWidth,m=this._fitRows(l,o,c,h)+10):(m=this.maxHeight,f=this._fitCols(l,i,c,h)+10),this.width=Math.min(f,e.maxWidth||this.maxWidth),this.height=Math.min(m,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,i){const{ctx:o,maxWidth:l,options:{labels:{padding:c}}}=this,h=this.legendHitBoxes=[],f=this.lineWidths=[0],m=i+c;let y=e;o.textAlign="left",o.textBaseline="middle";let w=-1,T=-m;return this.legendItems.forEach((I,k)=>{const x=r+t/2+o.measureText(I.text).width;(k===0||f[f.length-1]+x+2*c>l)&&(y+=m,f[f.length-(k>0?0:1)]=0,T+=m,w++),h[k]={left:0,top:T,row:w,width:x,height:i},f[f.length-1]+=x+c}),y}_fitCols(e,t,r,i){const{ctx:o,maxHeight:l,options:{labels:{padding:c}}}=this,h=this.legendHitBoxes=[],f=this.columnSizes=[],m=l-e;let y=c,w=0,T=0,I=0,k=0;return this.legendItems.forEach((x,N)=>{const{itemWidth:U,itemHeight:H}=Kj(r,t,o,x,i);N>0&&T+H+2*c>m&&(y+=w+c,f.push({width:w,height:T}),I+=w+c,k++,w=T=0),h[N]={left:I,top:T,col:k,width:U,height:H},w=Math.max(w,U),T+=H+c}),y+=w,f.push({width:w,height:T}),y}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:o}}=this,l=il(o,this.left,this.width);if(this.isHorizontal()){let c=0,h=$n(r,this.left+i,this.right-this.lineWidths[c]);for(const f of t)c!==f.row&&(c=f.row,h=$n(r,this.left+i,this.right-this.lineWidths[c])),f.top+=this.top+e+i,f.left=l.leftForLtr(l.x(h),f.width),h+=f.width+i}else{let c=0,h=$n(r,this.top+e+i,this.bottom-this.columnSizes[c].height);for(const f of t)f.col!==c&&(c=f.col,h=$n(r,this.top+e+i,this.bottom-this.columnSizes[c].height)),f.top=h,f.left+=this.left+i,f.left=l.leftForLtr(l.x(f.left),f.width),h+=f.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;I_(e,this),this._draw(),k_(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:r,ctx:i}=this,{align:o,labels:l}=e,c=St.color,h=il(e.rtl,this.left,this.width),f=Dn(l.font),{padding:m}=l,y=f.size,w=y/2;let T;this.drawTitle(),i.textAlign=h.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=f.string;const{boxWidth:I,boxHeight:k,itemHeight:x}=Zx(l,y),N=function(ne,D,P){if(isNaN(I)||I<=0||isNaN(k)||k<0)return;i.save();const A=$e(P.lineWidth,1);if(i.fillStyle=$e(P.fillStyle,c),i.lineCap=$e(P.lineCap,"butt"),i.lineDashOffset=$e(P.lineDashOffset,0),i.lineJoin=$e(P.lineJoin,"miter"),i.lineWidth=A,i.strokeStyle=$e(P.strokeStyle,c),i.setLineDash($e(P.lineDash,[])),l.usePointStyle){const V={radius:k*Math.SQRT2/2,pointStyle:P.pointStyle,rotation:P.rotation,borderWidth:A},L=h.xPlus(ne,I/2),F=D+w;$S(i,V,L,F,l.pointStyleWidth&&I)}else{const V=D+Math.max((y-k)/2,0),L=h.leftForLtr(ne,I),F=Zc(P.borderRadius);i.beginPath(),Object.values(F).some(O=>O!==0)?ry(i,{x:L,y:V,w:I,h:k,radius:F}):i.rect(L,V,I,k),i.fill(),A!==0&&i.stroke()}i.restore()},U=function(ne,D,P){vf(i,P.text,ne,D+x/2,f,{strikethrough:P.hidden,textAlign:h.textAlign(P.textAlign)})},H=this.isHorizontal(),K=this._computeTitleHeight();H?T={x:$n(o,this.left+m,this.right-r[0]),y:this.top+m+K,line:0}:T={x:this.left+m,y:$n(o,this.top+K+m,this.bottom-t[0].height),line:0},JS(this.ctx,e.textDirection);const G=x+m;this.legendItems.forEach((ne,D)=>{i.strokeStyle=ne.fontColor,i.fillStyle=ne.fontColor;const P=i.measureText(ne.text).width,A=h.textAlign(ne.textAlign||(ne.textAlign=l.textAlign)),V=I+w+P;let L=T.x,F=T.y;h.setWidth(this.width),H?D>0&&L+V+m>this.right&&(F=T.y+=G,T.line++,L=T.x=$n(o,this.left+m,this.right-r[T.line])):D>0&&F+G>this.bottom&&(L=T.x=L+t[T.line].width+m,T.line++,F=T.y=$n(o,this.top+K+m,this.bottom-t[T.line].height));const O=h.x(L);if(N(O,F,ne),L=aF(A,L+I+w,H?L+V:this.right,e.rtl),U(h.x(L),F,ne),H)T.x+=V+m;else if(typeof ne.text!="string"){const we=f.lineHeight;T.y+=gI(ne,we)+m}else T.y+=G}),ZS(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,r=Dn(t.font),i=Or(t.padding);if(!t.display)return;const o=il(e.rtl,this.left,this.width),l=this.ctx,c=t.position,h=r.size/2,f=i.top+h;let m,y=this.left,w=this.width;if(this.isHorizontal())w=Math.max(...this.lineWidths),m=this.top+f,y=$n(e.align,y,this.right-w);else{const I=this.columnSizes.reduce((k,x)=>Math.max(k,x.height),0);m=f+$n(e.align,this.top,this.bottom-I-e.labels.padding-this._computeTitleHeight())}const T=$n(c,y,y+w);l.textAlign=o.textAlign(BS(c)),l.textBaseline="middle",l.strokeStyle=t.color,l.fillStyle=t.color,l.font=r.string,vf(l,t.text,T,m,r)}_computeTitleHeight(){const e=this.options.title,t=Dn(e.font),r=Or(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,i,o;if(jc(e,this.left,this.right)&&jc(t,this.top,this.bottom)){for(o=this.legendHitBoxes,r=0;r<o.length;++r)if(i=o[r],jc(e,i.left,i.left+i.width)&&jc(t,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const t=this.options;if(!Jj(e.type,t))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,o=Gj(i,r);i&&!o&&lt(t.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!o&&lt(t.onHover,[e,r,this],this)}else r&&lt(t.onClick,[e,r,this],this)}}function Kj(n,e,t,r,i){const o=Qj(r,n,e,t),l=Xj(i,r,e.lineHeight);return{itemWidth:o,itemHeight:l}}function Qj(n,e,t,r){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((o,l)=>o.length>l.length?o:l)),e+t.size/2+r.measureText(i).width}function Xj(n,e,t){let r=n;return typeof e.text!="string"&&(r=gI(e,t)),r}function gI(n,e){const t=n.text?n.text.length:0;return e*t}function Jj(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var Zj={id:"legend",_element:eb,start(n,e,t){const r=n.legend=new eb({ctx:n.ctx,options:t,chart:n});Ps.configure(n,r,t),Ps.addBox(n,r)},stop(n){Ps.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const r=n.legend;Ps.configure(n,r,t),r.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const r=e.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:o,useBorderRadius:l,borderRadius:c}}=n.legend.options;return n._getSortedDatasetMetas().map(h=>{const f=h.controller.getStyle(t?0:void 0),m=Or(f.borderWidth);return{text:e[h.index].label,fillStyle:f.backgroundColor,fontColor:o,hidden:!h.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(m.width+m.height)/4,strokeStyle:f.borderColor,pointStyle:r||f.pointStyle,rotation:f.rotation,textAlign:i||f.textAlign,borderRadius:l&&(c||f.borderRadius),datasetIndex:h.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};const zc={average(n){if(!n.length)return!1;let e,t,r=new Set,i=0,o=0;for(e=0,t=n.length;e<t;++e){const c=n[e].element;if(c&&c.hasValue()){const h=c.tooltipPosition();r.add(h.x),i+=h.y,++o}}return o===0||r.size===0?!1:{x:[...r].reduce((c,h)=>c+h)/r.size,y:i/o}},nearest(n,e){if(!n.length)return!1;let t=e.x,r=e.y,i=Number.POSITIVE_INFINITY,o,l,c;for(o=0,l=n.length;o<l;++o){const h=n[o].element;if(h&&h.hasValue()){const f=h.getCenterPoint(),m=ey(e,f);m<i&&(i=m,c=h)}}if(c){const h=c.tooltipPosition();t=h.x,r=h.y}return{x:t,y:r}}};function Kr(n,e){return e&&(tn(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Ai(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function eU(n,e){const{element:t,datasetIndex:r,index:i}=e,o=n.getDatasetMeta(r).controller,{label:l,value:c}=o.getLabelAndValue(i);return{chart:n,label:l,parsed:o.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:c,dataset:o.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function tb(n,e){const t=n.chart.ctx,{body:r,footer:i,title:o}=n,{boxWidth:l,boxHeight:c}=e,h=Dn(e.bodyFont),f=Dn(e.titleFont),m=Dn(e.footerFont),y=o.length,w=i.length,T=r.length,I=Or(e.padding);let k=I.height,x=0,N=r.reduce((K,G)=>K+G.before.length+G.lines.length+G.after.length,0);if(N+=n.beforeBody.length+n.afterBody.length,y&&(k+=y*f.lineHeight+(y-1)*e.titleSpacing+e.titleMarginBottom),N){const K=e.displayColors?Math.max(c,h.lineHeight):h.lineHeight;k+=T*K+(N-T)*h.lineHeight+(N-1)*e.bodySpacing}w&&(k+=e.footerMarginTop+w*m.lineHeight+(w-1)*e.footerSpacing);let U=0;const H=function(K){x=Math.max(x,t.measureText(K).width+U)};return t.save(),t.font=f.string,Ze(n.title,H),t.font=h.string,Ze(n.beforeBody.concat(n.afterBody),H),U=e.displayColors?l+2+e.boxPadding:0,Ze(r,K=>{Ze(K.before,H),Ze(K.lines,H),Ze(K.after,H)}),U=0,t.font=m.string,Ze(n.footer,H),t.restore(),x+=I.width,{width:x,height:k}}function tU(n,e){const{y:t,height:r}=e;return t<r/2?"top":t>n.height-r/2?"bottom":"center"}function nU(n,e,t,r){const{x:i,width:o}=r,l=t.caretSize+t.caretPadding;if(n==="left"&&i+o+l>e.width||n==="right"&&i-o-l<0)return!0}function rU(n,e,t,r){const{x:i,width:o}=t,{width:l,chartArea:{left:c,right:h}}=n;let f="center";return r==="center"?f=i<=(c+h)/2?"left":"right":i<=o/2?f="left":i>=l-o/2&&(f="right"),nU(f,n,e,t)&&(f="center"),f}function nb(n,e,t){const r=t.yAlign||e.yAlign||tU(n,t);return{xAlign:t.xAlign||e.xAlign||rU(n,e,t,r),yAlign:r}}function iU(n,e){let{x:t,width:r}=n;return e==="right"?t-=r:e==="center"&&(t-=r/2),t}function sU(n,e,t){let{y:r,height:i}=n;return e==="top"?r+=t:e==="bottom"?r-=i+t:r-=i/2,r}function rb(n,e,t,r){const{caretSize:i,caretPadding:o,cornerRadius:l}=n,{xAlign:c,yAlign:h}=t,f=i+o,{topLeft:m,topRight:y,bottomLeft:w,bottomRight:T}=Zc(l);let I=iU(e,c);const k=sU(e,h,f);return h==="center"?c==="left"?I+=f:c==="right"&&(I-=f):c==="left"?I-=Math.max(m,w)+i:c==="right"&&(I+=Math.max(y,T)+i),{x:Cr(I,0,r.width-e.width),y:Cr(k,0,r.height-e.height)}}function xd(n,e,t){const r=Or(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-r.right:n.x+r.left}function ib(n){return Kr([],Ai(n))}function oU(n,e,t){return Jo(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function sb(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const yI={beforeTitle:Pi,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:Pi,beforeBody:Pi,beforeLabel:Pi,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return ut(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Pi,afterBody:Pi,beforeFooter:Pi,footer:Pi,afterFooter:Pi};function kn(n,e,t,r){const i=n[e].call(t,r);return typeof i>"u"?yI[e].call(t,r):i}class ob extends Pl{static positioners=zc;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&t.options.animation&&r.animations,o=new tI(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=oU(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:r}=t,i=kn(r,"beforeTitle",this,e),o=kn(r,"title",this,e),l=kn(r,"afterTitle",this,e);let c=[];return c=Kr(c,Ai(i)),c=Kr(c,Ai(o)),c=Kr(c,Ai(l)),c}getBeforeBody(e,t){return ib(kn(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:r}=t,i=[];return Ze(e,o=>{const l={before:[],lines:[],after:[]},c=sb(r,o);Kr(l.before,Ai(kn(c,"beforeLabel",this,o))),Kr(l.lines,kn(c,"label",this,o)),Kr(l.after,Ai(kn(c,"afterLabel",this,o))),i.push(l)}),i}getAfterBody(e,t){return ib(kn(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:r}=t,i=kn(r,"beforeFooter",this,e),o=kn(r,"footer",this,e),l=kn(r,"afterFooter",this,e);let c=[];return c=Kr(c,Ai(i)),c=Kr(c,Ai(o)),c=Kr(c,Ai(l)),c}_createItems(e){const t=this._active,r=this.chart.data,i=[],o=[],l=[];let c=[],h,f;for(h=0,f=t.length;h<f;++h)c.push(eU(this.chart,t[h]));return e.filter&&(c=c.filter((m,y,w)=>e.filter(m,y,w,r))),e.itemSort&&(c=c.sort((m,y)=>e.itemSort(m,y,r))),Ze(c,m=>{const y=sb(e.callbacks,m);i.push(kn(y,"labelColor",this,m)),o.push(kn(y,"labelPointStyle",this,m)),l.push(kn(y,"labelTextColor",this,m))}),this.labelColors=i,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=c,c}update(e,t){const r=this.options.setContext(this.getContext()),i=this._active;let o,l=[];if(!i.length)this.opacity!==0&&(o={opacity:0});else{const c=zc[r.position].call(this,i,this._eventPosition);l=this._createItems(r),this.title=this.getTitle(l,r),this.beforeBody=this.getBeforeBody(l,r),this.body=this.getBody(l,r),this.afterBody=this.getAfterBody(l,r),this.footer=this.getFooter(l,r);const h=this._size=tb(this,r),f=Object.assign({},c,h),m=nb(this.chart,r,f),y=rb(r,f,m,this.chart);this.xAlign=m.xAlign,this.yAlign=m.yAlign,o={opacity:1,x:y.x,y:y.y,width:h.width,height:h.height,caretX:c.x,caretY:c.y}}this._tooltipItems=l,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,r,i){const o=this.getCaretPosition(e,r,i);t.lineTo(o.x1,o.y1),t.lineTo(o.x2,o.y2),t.lineTo(o.x3,o.y3)}getCaretPosition(e,t,r){const{xAlign:i,yAlign:o}=this,{caretSize:l,cornerRadius:c}=r,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:y}=Zc(c),{x:w,y:T}=e,{width:I,height:k}=t;let x,N,U,H,K,G;return o==="center"?(K=T+k/2,i==="left"?(x=w,N=x-l,H=K+l,G=K-l):(x=w+I,N=x+l,H=K-l,G=K+l),U=x):(i==="left"?N=w+Math.max(h,m)+l:i==="right"?N=w+I-Math.max(f,y)-l:N=this.caretX,o==="top"?(H=T,K=H-l,x=N-l,U=N+l):(H=T+k,K=H+l,x=N+l,U=N-l),G=H),{x1:x,x2:N,x3:U,y1:H,y2:K,y3:G}}drawTitle(e,t,r){const i=this.title,o=i.length;let l,c,h;if(o){const f=il(r.rtl,this.x,this.width);for(e.x=xd(this,r.titleAlign,r),t.textAlign=f.textAlign(r.titleAlign),t.textBaseline="middle",l=Dn(r.titleFont),c=r.titleSpacing,t.fillStyle=r.titleColor,t.font=l.string,h=0;h<o;++h)t.fillText(i[h],f.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+c,h+1===o&&(e.y+=r.titleMarginBottom-c)}}_drawColorBox(e,t,r,i,o){const l=this.labelColors[r],c=this.labelPointStyles[r],{boxHeight:h,boxWidth:f}=o,m=Dn(o.bodyFont),y=xd(this,"left",o),w=i.x(y),T=h<m.lineHeight?(m.lineHeight-h)/2:0,I=t.y+T;if(o.usePointStyle){const k={radius:Math.min(f,h)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},x=i.leftForLtr(w,f)+f/2,N=I+h/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,ny(e,k,x,N),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,ny(e,k,x,N)}else{e.lineWidth=Ye(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;const k=i.leftForLtr(w,f),x=i.leftForLtr(i.xPlus(w,1),f-2),N=Zc(l.borderRadius);Object.values(N).some(U=>U!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,ry(e,{x:k,y:I,w:f,h,radius:N}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),ry(e,{x,y:I+1,w:f-2,h:h-2,radius:N}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(k,I,f,h),e.strokeRect(k,I,f,h),e.fillStyle=l.backgroundColor,e.fillRect(x,I+1,f-2,h-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,t,r){const{body:i}=this,{bodySpacing:o,bodyAlign:l,displayColors:c,boxHeight:h,boxWidth:f,boxPadding:m}=r,y=Dn(r.bodyFont);let w=y.lineHeight,T=0;const I=il(r.rtl,this.x,this.width),k=function(P){t.fillText(P,I.x(e.x+T),e.y+w/2),e.y+=w+o},x=I.textAlign(l);let N,U,H,K,G,ne,D;for(t.textAlign=l,t.textBaseline="middle",t.font=y.string,e.x=xd(this,x,r),t.fillStyle=r.bodyColor,Ze(this.beforeBody,k),T=c&&x!=="right"?l==="center"?f/2+m:f+2+m:0,K=0,ne=i.length;K<ne;++K){for(N=i[K],U=this.labelTextColors[K],t.fillStyle=U,Ze(N.before,k),H=N.lines,c&&H.length&&(this._drawColorBox(t,e,K,I,r),w=Math.max(y.lineHeight,h)),G=0,D=H.length;G<D;++G)k(H[G]),w=y.lineHeight;Ze(N.after,k)}T=0,w=y.lineHeight,Ze(this.afterBody,k),e.y-=o}drawFooter(e,t,r){const i=this.footer,o=i.length;let l,c;if(o){const h=il(r.rtl,this.x,this.width);for(e.x=xd(this,r.footerAlign,r),e.y+=r.footerMarginTop,t.textAlign=h.textAlign(r.footerAlign),t.textBaseline="middle",l=Dn(r.footerFont),t.fillStyle=r.footerColor,t.font=l.string,c=0;c<o;++c)t.fillText(i[c],h.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+r.footerSpacing}}drawBackground(e,t,r,i){const{xAlign:o,yAlign:l}=this,{x:c,y:h}=e,{width:f,height:m}=r,{topLeft:y,topRight:w,bottomLeft:T,bottomRight:I}=Zc(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(c+y,h),l==="top"&&this.drawCaret(e,t,r,i),t.lineTo(c+f-w,h),t.quadraticCurveTo(c+f,h,c+f,h+w),l==="center"&&o==="right"&&this.drawCaret(e,t,r,i),t.lineTo(c+f,h+m-I),t.quadraticCurveTo(c+f,h+m,c+f-I,h+m),l==="bottom"&&this.drawCaret(e,t,r,i),t.lineTo(c+T,h+m),t.quadraticCurveTo(c,h+m,c,h+m-T),l==="center"&&o==="left"&&this.drawCaret(e,t,r,i),t.lineTo(c,h+y),t.quadraticCurveTo(c,h,c+y,h),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,r=this.$animations,i=r&&r.x,o=r&&r.y;if(i||o){const l=zc[e.position].call(this,this._active,this._eventPosition);if(!l)return;const c=this._size=tb(this,e),h=Object.assign({},l,this._size),f=nb(t,e,h),m=rb(e,h,f,t);(i._to!==m.x||o._to!==m.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=c.width,this.height=c.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,m))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const l=Or(t.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&c&&(e.save(),e.globalAlpha=r,this.drawBackground(o,e,i,t),JS(e,t.textDirection),o.y+=l.top,this.drawTitle(o,e,t),this.drawBody(o,e,t),this.drawFooter(o,e,t),ZS(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const r=this._active,i=e.map(({datasetIndex:c,index:h})=>{const f=this.chart.getDatasetMeta(c);if(!f)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:f.data[h],index:h}}),o=!pf(r,i),l=this._positionChanged(i,t);(o||l)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,r=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,o=this._active||[],l=this._getActiveElements(e,o,t,r),c=this._positionChanged(l,e),h=t||!pf(l,o)||c;return h&&(this._active=l,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),h}_getActiveElements(e,t,r,i){const o=this.options;if(e.type==="mouseout")return[];if(!i)return t.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const l=this.chart.getElementsAtEventForMode(e,o.mode,o,r);return o.reverse&&l.reverse(),l}_positionChanged(e,t){const{caretX:r,caretY:i,options:o}=this,l=zc[o.position].call(this,e,t);return l!==!1&&(r!==l.x||i!==l.y)}}var aU={id:"tooltip",_element:ob,positioners:zc,afterInit(n,e,t){t&&(n.tooltip=new ob({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:yI},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function lU(n,e){const t=[],{bounds:i,step:o,min:l,max:c,precision:h,count:f,maxTicks:m,maxDigits:y,includeBounds:w}=n,T=o||1,I=m-1,{min:k,max:x}=e,N=!ut(l),U=!ut(c),H=!ut(f),K=(x-k)/(y+1);let G=hx((x-k)/I/T)*T,ne,D,P,A;if(G<1e-14&&!N&&!U)return[{value:k},{value:x}];A=Math.ceil(x/G)-Math.floor(k/G),A>I&&(G=hx(A*G/I/T)*T),ut(h)||(ne=Math.pow(10,h),G=Math.ceil(G*ne)/ne),i==="ticks"?(D=Math.floor(k/G)*G,P=Math.ceil(x/G)*G):(D=k,P=x),N&&U&&o&&QV((c-l)/o,G/1e3)?(A=Math.round(Math.min((c-l)/G,m)),G=(c-l)/A,D=l,P=c):H?(D=N?l:D,P=U?c:P,A=f-1,G=(P-D)/A):(A=(P-D)/G,Qc(A,Math.round(A),G/1e3)?A=Math.round(A):A=Math.ceil(A));const V=Math.max(dx(G),dx(D));ne=Math.pow(10,ut(h)?V:h),D=Math.round(D*ne)/ne,P=Math.round(P*ne)/ne;let L=0;for(N&&(w&&D!==l?(t.push({value:l}),D<l&&L++,Qc(Math.round((D+L*G)*ne)/ne,l,ab(l,K,n))&&L++):D<l&&L++);L<A;++L){const F=Math.round((D+L*G)*ne)/ne;if(U&&F>c)break;t.push({value:F})}return U&&w&&P!==c?t.length&&Qc(t[t.length-1].value,c,ab(c,K,n))?t[t.length-1].value=c:t.push({value:c}):(!U||P===c)&&t.push({value:P}),t}function ab(n,e,{horizontal:t,minRotation:r}){const i=Mo(r),o=(t?Math.sin(i):Math.cos(i))||.001,l=.75*e*(""+n).length;return Math.min(e/o,l)}class cU extends ju{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return ut(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:i,max:o}=this;const l=h=>i=t?i:h,c=h=>o=r?o:h;if(e){const h=hl(i),f=hl(o);h<0&&f<0?c(0):h>0&&f>0&&l(0)}if(i===o){let h=o===0?1:Math.abs(o*.05);c(o+h),e||l(i-h)}this.min=i,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},o=this._range||this,l=lU(i,o);return e.bounds==="ticks"&&XV(l,this,"value"),e.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-t)/Math.max(e.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return HS(e,this.chart.options.locale,this.options.ticks.format)}}class uU extends cU{static id="linear";static defaults={ticks:{callback:WS.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=cr(e)?e:0,this.max=cr(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=Mo(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,o.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const ip={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Rn=Object.keys(ip);function lb(n,e){return n-e}function cb(n,e){if(ut(e))return null;const t=n._adapter,{parser:r,round:i,isoWeekday:o}=n._parseOpts;let l=e;return typeof r=="function"&&(l=r(l)),cr(l)||(l=typeof r=="string"?t.parse(l,r):t.parse(l)),l===null?null:(i&&(l=i==="week"&&(yu(o)||o===!0)?t.startOf(l,"isoWeek",o):t.startOf(l,i)),+l)}function ub(n,e,t,r){const i=Rn.length;for(let o=Rn.indexOf(n);o<i-1;++o){const l=ip[Rn[o]],c=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((t-e)/(c*l.size))<=r)return Rn[o]}return Rn[i-1]}function hU(n,e,t,r,i){for(let o=Rn.length-1;o>=Rn.indexOf(t);o--){const l=Rn[o];if(ip[l].common&&n._adapter.diff(i,r,l)>=e-1)return l}return Rn[t?Rn.indexOf(t):0]}function dU(n){for(let e=Rn.indexOf(n)+1,t=Rn.length;e<t;++e)if(ip[Rn[e]].common)return Rn[e]}function hb(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:r,hi:i}=T_(t,e),o=t[r]>=e?t[r]:t[i];n[o]=!0}}function fU(n,e,t,r){const i=n._adapter,o=+i.startOf(e[0].value,r),l=e[e.length-1].value;let c,h;for(c=o;c<=l;c=+i.add(c,1,r))h=t[c],h>=0&&(e[h].major=!0);return e}function db(n,e,t){const r=[],i={},o=e.length;let l,c;for(l=0;l<o;++l)c=e[l],i[c]=l,r.push({value:c,major:!1});return o===0||!t?r:fU(n,r,i,t)}class ay extends ju{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const r=e.time||(e.time={}),i=this._adapter=new iI._date(e.adapters.date);i.init(t),Kc(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:cb(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,r=e.time.unit||"day";let{min:i,max:o,minDefined:l,maxDefined:c}=this.getUserBounds();function h(f){!l&&!isNaN(f.min)&&(i=Math.min(i,f.min)),!c&&!isNaN(f.max)&&(o=Math.max(o,f.max))}(!l||!c)&&(h(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&h(this.getMinMax(!1))),i=cr(i)&&!isNaN(i)?i:+t.startOf(Date.now(),r),o=cr(o)&&!isNaN(o)?o:+t.endOf(Date.now(),r)+1,this.min=Math.min(i,o-1),this.max=Math.max(i+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],r=e[e.length-1]),{min:t,max:r}}buildTicks(){const e=this.options,t=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const o=this.min,l=this.max,c=rF(i,o,l);return this._unit=t.unit||(r.autoSkip?ub(t.minUnit,this.min,this.max,this._getLabelCapacity(o)):hU(this,c.length,t.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:dU(this._unit),this.initOffsets(i),e.reverse&&c.reverse(),db(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,r=0,i,o;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?t=1-i:t=(this.getDecimalForValue(e[1])-i)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?r=o:r=(o-this.getDecimalForValue(e[e.length-2]))/2);const l=e.length<3?.5:.25;t=Cr(t,0,l),r=Cr(r,0,l),this._offsets={start:t,end:r,factor:1/(t+1+r)}}_generate(){const e=this._adapter,t=this.min,r=this.max,i=this.options,o=i.time,l=o.unit||ub(o.minUnit,t,r,this._getLabelCapacity(t)),c=$e(i.ticks.stepSize,1),h=l==="week"?o.isoWeekday:!1,f=yu(h)||h===!0,m={};let y=t,w,T;if(f&&(y=+e.startOf(y,"isoWeek",h)),y=+e.startOf(y,f?"day":l),e.diff(r,t,l)>1e5*c)throw new Error(t+" and "+r+" are too far apart with stepSize of "+c+" "+l);const I=i.ticks.source==="data"&&this.getDataTimestamps();for(w=y,T=0;w<r;w=+e.add(w,c,l),T++)hb(m,w,I);return(w===r||i.bounds==="ticks"||T===1)&&hb(m,w,I),Object.keys(m).sort(lb).map(k=>+k)}getLabelForValue(e){const t=this._adapter,r=this.options.time;return r.tooltipFormat?t.format(e,r.tooltipFormat):t.format(e,r.displayFormats.datetime)}format(e,t){const i=this.options.time.displayFormats,o=this._unit,l=t||i[o];return this._adapter.format(e,l)}_tickFormatFunction(e,t,r,i){const o=this.options,l=o.ticks.callback;if(l)return lt(l,[e,t,r],this);const c=o.time.displayFormats,h=this._unit,f=this._majorUnit,m=h&&c[h],y=f&&c[f],w=r[t],T=f&&y&&w&&w.major;return this._adapter.format(e,i||(T?y:m))}generateTickLabels(e){let t,r,i;for(t=0,r=e.length;t<r;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+r)*t.factor)}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,r=this.ctx.measureText(e).width,i=Mo(this.isHorizontal()?t.maxRotation:t.minRotation),o=Math.cos(i),l=Math.sin(i),c=this._resolveTickFontOptions(0).size;return{w:r*o+c*l,h:r*l+c*o}}_getLabelCapacity(e){const t=this.options.time,r=t.displayFormats,i=r[t.unit]||r.millisecond,o=this._tickFormatFunction(e,0,db(this,[e],this._majorUnit),i),l=this._getLabelSize(o),c=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return c>0?c:1}getDataTimestamps(){let e=this._cache.data||[],t,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,r=i.length;t<r;++t)e=e.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,r;if(e.length)return e;const i=this.getLabels();for(t=0,r=i.length;t<r;++t)e.push(cb(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return sF(e.sort(lb))}}function bd(n,e,t){let r=0,i=n.length-1,o,l,c,h;t?(e>=n[r].pos&&e<=n[i].pos&&({lo:r,hi:i}=No(n,"pos",e)),{pos:o,time:c}=n[r],{pos:l,time:h}=n[i]):(e>=n[r].time&&e<=n[i].time&&({lo:r,hi:i}=No(n,"time",e)),{time:o,pos:c}=n[r],{time:l,pos:h}=n[i]);const f=l-o;return f?c+(h-c)*(e-o)/f:c}class V6 extends ay{static id="timeseries";static defaults=ay.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=bd(t,this.min),this._tableRange=bd(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:r}=this,i=[],o=[];let l,c,h,f,m;for(l=0,c=e.length;l<c;++l)f=e[l],f>=t&&f<=r&&i.push(f);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(l=0,c=i.length;l<c;++l)m=i[l+1],h=i[l-1],f=i[l],Math.round((m+h)/2)!==f&&o.push({time:f,pos:l/(c-1)});return o}_generate(){const e=this.min,t=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||r.length===1)&&r.push(t),r.sort((i,o)=>i-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return t.length&&r.length?e=this.normalize(t.concat(r)):e=t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(bd(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return bd(this._table,r*this._tableRange+this._minPos,!0)}}const _I="label";function fb(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function pU(n,e){const t=n.options;t&&e&&Object.assign(t,e)}function vI(n,e){n.labels=e}function wI(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_I;const r=[];n.datasets=e.map(i=>{const o=n.datasets.find(l=>l[t]===i[t]);return!o||!i.data||r.includes(o)?{...i}:(r.push(o),Object.assign(o,i),o)})}function mU(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_I;const t={labels:[],datasets:[]};return vI(t,n.labels),wI(t,n.datasets,e),t}function gU(n,e){const{height:t=150,width:r=300,redraw:i=!1,datasetIdKey:o,type:l,data:c,options:h,plugins:f=[],fallbackContent:m,updateMode:y,...w}=n,T=W.useRef(null),I=W.useRef(null),k=()=>{T.current&&(I.current=new rp(T.current,{type:l,data:mU(c,o),options:h&&{...h},plugins:f}),fb(e,I.current))},x=()=>{fb(e,null),I.current&&(I.current.destroy(),I.current=null)};return W.useEffect(()=>{!i&&I.current&&h&&pU(I.current,h)},[i,h]),W.useEffect(()=>{!i&&I.current&&vI(I.current.config.data,c.labels)},[i,c.labels]),W.useEffect(()=>{!i&&I.current&&c.datasets&&wI(I.current.config.data,c.datasets,o)},[i,c.datasets]),W.useEffect(()=>{I.current&&(i?(x(),setTimeout(k)):I.current.update(y))},[i,h,c.labels,c.datasets,y]),W.useEffect(()=>{I.current&&(x(),setTimeout(k))},[l]),W.useEffect(()=>(k(),()=>x()),[]),Tf.createElement("canvas",{ref:T,role:"img",height:t,width:r,...w},m)}const yU=W.forwardRef(gU);function _U(n,e){return rp.register(e),W.forwardRef((t,r)=>Tf.createElement(yU,{...t,ref:r,type:n}))}const vU=_U("line",P4),EI=6048e5,wU=864e5,Uu=6e4,zu=36e5,EU=1e3,pb=Symbol.for("constructDateFrom");function vt(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&pb in n?n[pb](e):n instanceof Date?new n.constructor(e):new Date(e)}function Ne(n,e){return vt(e||n,n)}function sp(n,e,t){const r=Ne(n,t?.in);return isNaN(e)?vt(t?.in||n,NaN):(e&&r.setDate(r.getDate()+e),r)}function M_(n,e,t){const r=Ne(n,t?.in);if(isNaN(e))return vt(n,NaN);if(!e)return r;const i=r.getDate(),o=vt(n,r.getTime());o.setMonth(r.getMonth()+e+1,0);const l=o.getDate();return i>=l?o:(r.setFullYear(o.getFullYear(),o.getMonth(),i),r)}function N_(n,e,t){return vt(n,+Ne(n)+e)}function xU(n,e,t){return N_(n,e*zu)}let bU={};function Zo(){return bU}function ci(n,e){const t=Zo(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=Ne(n,e?.in),o=i.getDay(),l=(o<r?7:0)+o-r;return i.setDate(i.getDate()-l),i.setHours(0,0,0,0),i}function pl(n,e){return ci(n,{...e,weekStartsOn:1})}function xI(n,e){const t=Ne(n,e?.in),r=t.getFullYear(),i=vt(t,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const o=pl(i),l=vt(t,0);l.setFullYear(r,0,4),l.setHours(0,0,0,0);const c=pl(l);return t.getTime()>=o.getTime()?r+1:t.getTime()>=c.getTime()?r:r-1}function xf(n){const e=Ne(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function ea(n,...e){const t=vt.bind(null,e.find(r=>typeof r=="object"));return e.map(t)}function ly(n,e){const t=Ne(n,e?.in);return t.setHours(0,0,0,0),t}function bI(n,e,t){const[r,i]=ea(t?.in,n,e),o=ly(r),l=ly(i),c=+o-xf(o),h=+l-xf(l);return Math.round((c-h)/wU)}function TU(n,e){const t=xI(n,e),r=vt(n,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),pl(r)}function SU(n,e,t){const r=Ne(n,t?.in);return r.setTime(r.getTime()+e*Uu),r}function IU(n,e,t){return M_(n,e*3,t)}function kU(n,e,t){return N_(n,e*1e3)}function PU(n,e,t){return sp(n,e*7,t)}function CU(n,e,t){return M_(n,e*12,t)}function eu(n,e){const t=+Ne(n)-+Ne(e);return t<0?-1:t>0?1:t}function AU(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function TI(n){return!(!AU(n)&&typeof n!="number"||isNaN(+Ne(n)))}function RU(n,e,t){const[r,i]=ea(t?.in,n,e),o=r.getFullYear()-i.getFullYear(),l=r.getMonth()-i.getMonth();return o*12+l}function DU(n,e,t){const[r,i]=ea(t?.in,n,e);return r.getFullYear()-i.getFullYear()}function SI(n,e,t){const[r,i]=ea(t?.in,n,e),o=mb(r,i),l=Math.abs(bI(r,i));r.setDate(r.getDate()-o*l);const c=+(mb(r,i)===-o),h=o*(l-c);return h===0?0:h}function mb(n,e){const t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function Bu(n){return e=>{const r=(n?Math[n]:Math.trunc)(e);return r===0?0:r}}function OU(n,e,t){const[r,i]=ea(t?.in,n,e),o=(+r-+i)/zu;return Bu(t?.roundingMethod)(o)}function L_(n,e){return+Ne(n)-+Ne(e)}function MU(n,e,t){const r=L_(n,e)/Uu;return Bu(t?.roundingMethod)(r)}function II(n,e){const t=Ne(n,e?.in);return t.setHours(23,59,59,999),t}function kI(n,e){const t=Ne(n,e?.in),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function NU(n,e){const t=Ne(n,e?.in);return+II(t,e)==+kI(t,e)}function PI(n,e,t){const[r,i,o]=ea(t?.in,n,n,e),l=eu(i,o),c=Math.abs(RU(i,o));if(c<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-l*c);let h=eu(i,o)===-l;NU(r)&&c===1&&eu(r,o)===1&&(h=!1);const f=l*(c-+h);return f===0?0:f}function LU(n,e,t){const r=PI(n,e,t)/3;return Bu(t?.roundingMethod)(r)}function VU(n,e,t){const r=L_(n,e)/1e3;return Bu(t?.roundingMethod)(r)}function FU(n,e,t){const r=SI(n,e,t)/7;return Bu(t?.roundingMethod)(r)}function jU(n,e,t){const[r,i]=ea(t?.in,n,e),o=eu(r,i),l=Math.abs(DU(r,i));r.setFullYear(1584),i.setFullYear(1584);const c=eu(r,i)===-o,h=o*(l-+c);return h===0?0:h}function UU(n,e){const t=Ne(n,e?.in),r=t.getMonth(),i=r-r%3;return t.setMonth(i,1),t.setHours(0,0,0,0),t}function zU(n,e){const t=Ne(n,e?.in);return t.setDate(1),t.setHours(0,0,0,0),t}function BU(n,e){const t=Ne(n,e?.in),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(23,59,59,999),t}function CI(n,e){const t=Ne(n,e?.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function HU(n,e){const t=Ne(n,e?.in);return t.setMinutes(59,59,999),t}function WU(n,e){const t=Zo(),r=t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=Ne(n,e?.in),o=i.getDay(),l=(o<r?-7:0)+6-(o-r);return i.setDate(i.getDate()+l),i.setHours(23,59,59,999),i}function $U(n,e){const t=Ne(n,e?.in);return t.setSeconds(59,999),t}function qU(n,e){const t=Ne(n,e?.in),r=t.getMonth(),i=r-r%3+3;return t.setMonth(i,0),t.setHours(23,59,59,999),t}function YU(n,e){const t=Ne(n,e?.in);return t.setMilliseconds(999),t}const GU={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},KU=(n,e,t)=>{let r;const i=GU[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function dg(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const QU={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},XU={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},JU={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ZU={date:dg({formats:QU,defaultWidth:"full"}),time:dg({formats:XU,defaultWidth:"full"}),dateTime:dg({formats:JU,defaultWidth:"full"})},e3={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},t3=(n,e,t,r)=>e3[n];function Pc(n){return(e,t)=>{const r=t?.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const l=n.defaultFormattingWidth||n.defaultWidth,c=t?.width?String(t.width):l;i=n.formattingValues[c]||n.formattingValues[l]}else{const l=n.defaultWidth,c=t?.width?String(t.width):n.defaultWidth;i=n.values[c]||n.values[l]}const o=n.argumentCallback?n.argumentCallback(e):e;return i[o]}}const n3={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},r3={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},i3={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},s3={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},o3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},a3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},l3=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},c3={ordinalNumber:l3,era:Pc({values:n3,defaultWidth:"wide"}),quarter:Pc({values:r3,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Pc({values:i3,defaultWidth:"wide"}),day:Pc({values:s3,defaultWidth:"wide"}),dayPeriod:Pc({values:o3,defaultWidth:"wide",formattingValues:a3,defaultFormattingWidth:"wide"})};function Cc(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],o=e.match(i);if(!o)return null;const l=o[0],c=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],h=Array.isArray(c)?h3(c,y=>y.test(l)):u3(c,y=>y.test(l));let f;f=n.valueCallback?n.valueCallback(h):h,f=t.valueCallback?t.valueCallback(f):f;const m=e.slice(l.length);return{value:f,rest:m}}}function u3(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function h3(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function d3(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],o=e.match(n.parsePattern);if(!o)return null;let l=n.valueCallback?n.valueCallback(o[0]):o[0];l=t.valueCallback?t.valueCallback(l):l;const c=e.slice(i.length);return{value:l,rest:c}}}const f3=/^(\d+)(th|st|nd|rd)?/i,p3=/\d+/i,m3={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},g3={any:[/^b/i,/^(a|c)/i]},y3={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},_3={any:[/1/i,/2/i,/3/i,/4/i]},v3={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},w3={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},E3={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},x3={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},b3={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},T3={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},S3={ordinalNumber:d3({matchPattern:f3,parsePattern:p3,valueCallback:n=>parseInt(n,10)}),era:Cc({matchPatterns:m3,defaultMatchWidth:"wide",parsePatterns:g3,defaultParseWidth:"any"}),quarter:Cc({matchPatterns:y3,defaultMatchWidth:"wide",parsePatterns:_3,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Cc({matchPatterns:v3,defaultMatchWidth:"wide",parsePatterns:w3,defaultParseWidth:"any"}),day:Cc({matchPatterns:E3,defaultMatchWidth:"wide",parsePatterns:x3,defaultParseWidth:"any"}),dayPeriod:Cc({matchPatterns:b3,defaultMatchWidth:"any",parsePatterns:T3,defaultParseWidth:"any"})},AI={code:"en-US",formatDistance:KU,formatLong:ZU,formatRelative:t3,localize:c3,match:S3,options:{weekStartsOn:0,firstWeekContainsDate:1}};function I3(n,e){const t=Ne(n,e?.in);return bI(t,CI(t))+1}function RI(n,e){const t=Ne(n,e?.in),r=+pl(t)-+TU(t);return Math.round(r/EI)+1}function V_(n,e){const t=Ne(n,e?.in),r=t.getFullYear(),i=Zo(),o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,l=vt(e?.in||n,0);l.setFullYear(r+1,0,o),l.setHours(0,0,0,0);const c=ci(l,e),h=vt(e?.in||n,0);h.setFullYear(r,0,o),h.setHours(0,0,0,0);const f=ci(h,e);return+t>=+c?r+1:+t>=+f?r:r-1}function k3(n,e){const t=Zo(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,i=V_(n,e),o=vt(e?.in||n,0);return o.setFullYear(i,0,r),o.setHours(0,0,0,0),ci(o,e)}function DI(n,e){const t=Ne(n,e?.in),r=+ci(t,e)-+k3(t,e);return Math.round(r/EI)+1}function Je(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const gs={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return Je(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Je(t+1,2)},d(n,e){return Je(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Je(n.getHours()%12||12,e.length)},H(n,e){return Je(n.getHours(),e.length)},m(n,e){return Je(n.getMinutes(),e.length)},s(n,e){return Je(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return Je(i,e.length)}},Ya={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},gb={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return gs.y(n,e)},Y:function(n,e,t,r){const i=V_(n,r),o=i>0?i:1-i;if(e==="YY"){const l=o%100;return Je(l,2)}return e==="Yo"?t.ordinalNumber(o,{unit:"year"}):Je(o,e.length)},R:function(n,e){const t=xI(n);return Je(t,e.length)},u:function(n,e){const t=n.getFullYear();return Je(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Je(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Je(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return gs.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return Je(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=DI(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):Je(i,e.length)},I:function(n,e,t){const r=RI(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):Je(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):gs.d(n,e)},D:function(n,e,t){const r=I3(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):Je(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Je(o,2);case"eo":return t.ordinalNumber(o,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Je(o,e.length);case"co":return t.ordinalNumber(o,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Je(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=Ya.noon:r===0?i=Ya.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=Ya.evening:r>=12?i=Ya.afternoon:r>=4?i=Ya.morning:i=Ya.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return gs.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):gs.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):Je(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):Je(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):gs.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):gs.s(n,e)},S:function(n,e){return gs.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return _b(r);case"XXXX":case"XX":return Ro(r);case"XXXXX":case"XXX":default:return Ro(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return _b(r);case"xxxx":case"xx":return Ro(r);case"xxxxx":case"xxx":default:return Ro(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+yb(r,":");case"OOOO":default:return"GMT"+Ro(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+yb(r,":");case"zzzz":default:return"GMT"+Ro(r,":")}},t:function(n,e,t){const r=Math.trunc(+n/1e3);return Je(r,e.length)},T:function(n,e,t){return Je(+n,e.length)}};function yb(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),o=r%60;return o===0?t+String(i):t+String(i)+e+Je(o,2)}function _b(n,e){return n%60===0?(n>0?"-":"+")+Je(Math.abs(n)/60,2):Ro(n,e)}function Ro(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Je(Math.trunc(r/60),2),o=Je(r%60,2);return t+i+e+o}const vb=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},OI=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},P3=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return vb(n,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",vb(r,e)).replace("{{time}}",OI(i,e))},cy={p:OI,P:P3},C3=/^D+$/,A3=/^Y+$/,R3=["D","DD","YY","YYYY"];function MI(n){return C3.test(n)}function NI(n){return A3.test(n)}function uy(n,e,t){const r=D3(n,e,t);if(console.warn(r),R3.includes(n))throw new RangeError(r)}function D3(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const O3=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,M3=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,N3=/^'([^]*?)'?$/,L3=/''/g,V3=/[a-zA-Z]/;function F3(n,e,t){const r=Zo(),i=t?.locale??r.locale??AI,o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,l=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,c=Ne(n,t?.in);if(!TI(c))throw new RangeError("Invalid time value");let h=e.match(M3).map(m=>{const y=m[0];if(y==="p"||y==="P"){const w=cy[y];return w(m,i.formatLong)}return m}).join("").match(O3).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const y=m[0];if(y==="'")return{isToken:!1,value:j3(m)};if(gb[y])return{isToken:!0,value:m};if(y.match(V3))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:m}});i.localize.preprocessor&&(h=i.localize.preprocessor(c,h));const f={firstWeekContainsDate:o,weekStartsOn:l,locale:i};return h.map(m=>{if(!m.isToken)return m.value;const y=m.value;(!t?.useAdditionalWeekYearTokens&&NI(y)||!t?.useAdditionalDayOfYearTokens&&MI(y))&&uy(y,e,String(n));const w=gb[y[0]];return w(c,y,i.localize,f)}).join("")}function j3(n){const e=n.match(N3);return e?e[1].replace(L3,"'"):n}function U3(){return Object.assign({},Zo())}function z3(n,e){const t=Ne(n,e?.in).getDay();return t===0?7:t}function B3(n,e){const t=H3(e)?new e(0):vt(e,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),t}function H3(n){return typeof n=="function"&&n.prototype?.constructor===n}const W3=10;class LI{subPriority=0;validate(e,t){return!0}}class $3 extends LI{constructor(e,t,r,i,o){super(),this.value=e,this.validateValue=t,this.setValue=r,this.priority=i,o&&(this.subPriority=o)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,r){return this.setValue(e,t,this.value,r)}}class q3 extends LI{priority=W3;subPriority=-1;constructor(e,t){super(),this.context=e||(r=>vt(t,r))}set(e,t){return t.timestampIsSet?e:vt(e,B3(e,this.context))}}class Ge{run(e,t,r,i){const o=this.parse(e,t,r,i);return o?{setter:new $3(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(e,t,r){return!0}}class Y3 extends Ge{priority=140;parse(e,t,r){switch(t){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});case"GGGG":default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,t,r){return t.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const It={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Jr={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function kt(n,e){return n&&{value:e(n.value),rest:n.rest}}function mt(n,e){const t=e.match(n);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function Zr(n,e){const t=e.match(n);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const r=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,o=t[3]?parseInt(t[3],10):0,l=t[5]?parseInt(t[5],10):0;return{value:r*(i*zu+o*Uu+l*EU),rest:e.slice(t[0].length)}}function VI(n){return mt(It.anyDigitsSigned,n)}function wt(n,e){switch(n){case 1:return mt(It.singleDigit,e);case 2:return mt(It.twoDigits,e);case 3:return mt(It.threeDigits,e);case 4:return mt(It.fourDigits,e);default:return mt(new RegExp("^\\d{1,"+n+"}"),e)}}function bf(n,e){switch(n){case 1:return mt(It.singleDigitSigned,e);case 2:return mt(It.twoDigitsSigned,e);case 3:return mt(It.threeDigitsSigned,e);case 4:return mt(It.fourDigitsSigned,e);default:return mt(new RegExp("^-?\\d{1,"+n+"}"),e)}}function F_(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function FI(n,e){const t=e>0,r=t?e:1-e;let i;if(r<=50)i=n||100;else{const o=r+50,l=Math.trunc(o/100)*100,c=n>=o%100;i=n+l-(c?100:0)}return t?i:1-i}function jI(n){return n%400===0||n%4===0&&n%100!==0}class G3 extends Ge{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,t,r){const i=o=>({year:o,isTwoDigitYear:t==="yy"});switch(t){case"y":return kt(wt(4,e),i);case"yo":return kt(r.ordinalNumber(e,{unit:"year"}),i);default:return kt(wt(t.length,e),i)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r){const i=e.getFullYear();if(r.isTwoDigitYear){const l=FI(r.year,i);return e.setFullYear(l,0,1),e.setHours(0,0,0,0),e}const o=!("era"in t)||t.era===1?r.year:1-r.year;return e.setFullYear(o,0,1),e.setHours(0,0,0,0),e}}class K3 extends Ge{priority=130;parse(e,t,r){const i=o=>({year:o,isTwoDigitYear:t==="YY"});switch(t){case"Y":return kt(wt(4,e),i);case"Yo":return kt(r.ordinalNumber(e,{unit:"year"}),i);default:return kt(wt(t.length,e),i)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r,i){const o=V_(e,i);if(r.isTwoDigitYear){const c=FI(r.year,o);return e.setFullYear(c,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),ci(e,i)}const l=!("era"in t)||t.era===1?r.year:1-r.year;return e.setFullYear(l,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),ci(e,i)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class Q3 extends Ge{priority=130;parse(e,t){return bf(t==="R"?4:t.length,e)}set(e,t,r){const i=vt(e,0);return i.setFullYear(r,0,4),i.setHours(0,0,0,0),pl(i)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class X3 extends Ge{priority=130;parse(e,t){return bf(t==="u"?4:t.length,e)}set(e,t,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class J3 extends Ge{priority=120;parse(e,t,r){switch(t){case"Q":case"QQ":return wt(t.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class Z3 extends Ge{priority=120;parse(e,t,r){switch(t){case"q":case"qq":return wt(t.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class e5 extends Ge{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,t,r){const i=o=>o-1;switch(t){case"M":return kt(mt(It.month,e),i);case"MM":return kt(wt(2,e),i);case"Mo":return kt(r.ordinalNumber(e,{unit:"month"}),i);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}class t5 extends Ge{priority=110;parse(e,t,r){const i=o=>o-1;switch(t){case"L":return kt(mt(It.month,e),i);case"LL":return kt(wt(2,e),i);case"Lo":return kt(r.ordinalNumber(e,{unit:"month"}),i);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function n5(n,e,t){const r=Ne(n,t?.in),i=DI(r,t)-e;return r.setDate(r.getDate()-i*7),Ne(r,t?.in)}class r5 extends Ge{priority=100;parse(e,t,r){switch(t){case"w":return mt(It.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return wt(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r,i){return ci(n5(e,r,i),i)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function i5(n,e,t){const r=Ne(n,t?.in),i=RI(r,t)-e;return r.setDate(r.getDate()-i*7),r}class s5 extends Ge{priority=100;parse(e,t,r){switch(t){case"I":return mt(It.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return wt(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r){return pl(i5(e,r))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const o5=[31,28,31,30,31,30,31,31,30,31,30,31],a5=[31,29,31,30,31,30,31,31,30,31,30,31];class l5 extends Ge{priority=90;subPriority=1;parse(e,t,r){switch(t){case"d":return mt(It.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return wt(t.length,e)}}validate(e,t){const r=e.getFullYear(),i=jI(r),o=e.getMonth();return i?t>=1&&t<=a5[o]:t>=1&&t<=o5[o]}set(e,t,r){return e.setDate(r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class c5 extends Ge{priority=90;subpriority=1;parse(e,t,r){switch(t){case"D":case"DD":return mt(It.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return wt(t.length,e)}}validate(e,t){const r=e.getFullYear();return jI(r)?t>=1&&t<=366:t>=1&&t<=365}set(e,t,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function j_(n,e,t){const r=Zo(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,o=Ne(n,t?.in),l=o.getDay(),h=(e%7+7)%7,f=7-i,m=e<0||e>6?e-(l+f)%7:(h+f)%7-(l+f)%7;return sp(o,m,t)}class u5 extends Ge{priority=90;parse(e,t,r){switch(t){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,i){return e=j_(e,r,i),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class h5 extends Ge{priority=90;parse(e,t,r,i){const o=l=>{const c=Math.floor((l-1)/7)*7;return(l+i.weekStartsOn+6)%7+c};switch(t){case"e":case"ee":return kt(wt(t.length,e),o);case"eo":return kt(r.ordinalNumber(e,{unit:"day"}),o);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,i){return e=j_(e,r,i),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class d5 extends Ge{priority=90;parse(e,t,r,i){const o=l=>{const c=Math.floor((l-1)/7)*7;return(l+i.weekStartsOn+6)%7+c};switch(t){case"c":case"cc":return kt(wt(t.length,e),o);case"co":return kt(r.ordinalNumber(e,{unit:"day"}),o);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,i){return e=j_(e,r,i),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function f5(n,e,t){const r=Ne(n,t?.in),i=z3(r,t),o=e-i;return sp(r,o,t)}class p5 extends Ge{priority=90;parse(e,t,r){const i=o=>o===0?7:o;switch(t){case"i":case"ii":return wt(t.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return kt(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),i);case"iiiii":return kt(r.day(e,{width:"narrow",context:"formatting"}),i);case"iiiiii":return kt(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),i);case"iiii":default:return kt(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),i)}}validate(e,t){return t>=1&&t<=7}set(e,t,r){return e=f5(e,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class m5 extends Ge{priority=80;parse(e,t,r){switch(t){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(F_(r),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class g5 extends Ge{priority=80;parse(e,t,r){switch(t){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(F_(r),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class y5 extends Ge{priority=80;parse(e,t,r){switch(t){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(F_(r),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class _5 extends Ge{priority=70;parse(e,t,r){switch(t){case"h":return mt(It.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return wt(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,r){const i=e.getHours()>=12;return i&&r<12?e.setHours(r+12,0,0,0):!i&&r===12?e.setHours(0,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class v5 extends Ge{priority=70;parse(e,t,r){switch(t){case"H":return mt(It.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return wt(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,r){return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class w5 extends Ge{priority=70;parse(e,t,r){switch(t){case"K":return mt(It.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return wt(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class E5 extends Ge{priority=70;parse(e,t,r){switch(t){case"k":return mt(It.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return wt(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,r){const i=r<=24?r%24:r;return e.setHours(i,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class x5 extends Ge{priority=60;parse(e,t,r){switch(t){case"m":return mt(It.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return wt(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setMinutes(r,0,0),e}incompatibleTokens=["t","T"]}class b5 extends Ge{priority=50;parse(e,t,r){switch(t){case"s":return mt(It.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return wt(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setSeconds(r,0),e}incompatibleTokens=["t","T"]}class T5 extends Ge{priority=30;parse(e,t){const r=i=>Math.trunc(i*Math.pow(10,-t.length+3));return kt(wt(t.length,e),r)}set(e,t,r){return e.setMilliseconds(r),e}incompatibleTokens=["t","T"]}class S5 extends Ge{priority=10;parse(e,t){switch(t){case"X":return Zr(Jr.basicOptionalMinutes,e);case"XX":return Zr(Jr.basic,e);case"XXXX":return Zr(Jr.basicOptionalSeconds,e);case"XXXXX":return Zr(Jr.extendedOptionalSeconds,e);case"XXX":default:return Zr(Jr.extended,e)}}set(e,t,r){return t.timestampIsSet?e:vt(e,e.getTime()-xf(e)-r)}incompatibleTokens=["t","T","x"]}class I5 extends Ge{priority=10;parse(e,t){switch(t){case"x":return Zr(Jr.basicOptionalMinutes,e);case"xx":return Zr(Jr.basic,e);case"xxxx":return Zr(Jr.basicOptionalSeconds,e);case"xxxxx":return Zr(Jr.extendedOptionalSeconds,e);case"xxx":default:return Zr(Jr.extended,e)}}set(e,t,r){return t.timestampIsSet?e:vt(e,e.getTime()-xf(e)-r)}incompatibleTokens=["t","T","X"]}class k5 extends Ge{priority=40;parse(e){return VI(e)}set(e,t,r){return[vt(e,r*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class P5 extends Ge{priority=20;parse(e){return VI(e)}set(e,t,r){return[vt(e,r),{timestampIsSet:!0}]}incompatibleTokens="*"}const C5={G:new Y3,y:new G3,Y:new K3,R:new Q3,u:new X3,Q:new J3,q:new Z3,M:new e5,L:new t5,w:new r5,I:new s5,d:new l5,D:new c5,E:new u5,e:new h5,c:new d5,i:new p5,a:new m5,b:new g5,B:new y5,h:new _5,H:new v5,K:new w5,k:new E5,m:new x5,s:new b5,S:new T5,X:new S5,x:new I5,t:new k5,T:new P5},A5=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,R5=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,D5=/^'([^]*?)'?$/,O5=/''/g,M5=/\S/,N5=/[a-zA-Z]/;function L5(n,e,t,r){const i=()=>vt(r?.in||t,NaN),o=U3(),l=r?.locale??o.locale??AI,c=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,h=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??o.weekStartsOn??o.locale?.options?.weekStartsOn??0;if(!e)return n?i():Ne(t,r?.in);const f={firstWeekContainsDate:c,weekStartsOn:h,locale:l},m=[new q3(r?.in,t)],y=e.match(R5).map(x=>{const N=x[0];if(N in cy){const U=cy[N];return U(x,l.formatLong)}return x}).join("").match(A5),w=[];for(let x of y){!r?.useAdditionalWeekYearTokens&&NI(x)&&uy(x,e,n),!r?.useAdditionalDayOfYearTokens&&MI(x)&&uy(x,e,n);const N=x[0],U=C5[N];if(U){const{incompatibleTokens:H}=U;if(Array.isArray(H)){const G=w.find(ne=>H.includes(ne.token)||ne.token===N);if(G)throw new RangeError(`The format string mustn't contain \`${G.fullToken}\` and \`${x}\` at the same time`)}else if(U.incompatibleTokens==="*"&&w.length>0)throw new RangeError(`The format string mustn't contain \`${x}\` and any other token at the same time`);w.push({token:N,fullToken:x});const K=U.run(n,x,l.match,f);if(!K)return i();m.push(K.setter),n=K.rest}else{if(N.match(N5))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");if(x==="''"?x="'":N==="'"&&(x=V5(x)),n.indexOf(x)===0)n=n.slice(x.length);else return i()}}if(n.length>0&&M5.test(n))return i();const T=m.map(x=>x.priority).sort((x,N)=>N-x).filter((x,N,U)=>U.indexOf(x)===N).map(x=>m.filter(N=>N.priority===x).sort((N,U)=>U.subPriority-N.subPriority)).map(x=>x[0]);let I=Ne(t,r?.in);if(isNaN(+I))return i();const k={};for(const x of T){if(!x.validate(I,f))return i();const N=x.set(I,k,f);Array.isArray(N)?(I=N[0],Object.assign(k,N[1])):I=N}return I}function V5(n){return n.match(D5)[1].replace(O5,"'")}function F5(n,e){const t=Ne(n,e?.in);return t.setMinutes(0,0,0),t}function j5(n,e){const t=Ne(n,e?.in);return t.setSeconds(0,0),t}function U5(n,e){const t=Ne(n,e?.in);return t.setMilliseconds(0),t}function z5(n,e){const t=()=>vt(e?.in,NaN),r=e?.additionalDigits??2,i=$5(n);let o;if(i.date){const f=q5(i.date,r);o=Y5(f.restDateString,f.year)}if(!o||isNaN(+o))return t();const l=+o;let c=0,h;if(i.time&&(c=G5(i.time),isNaN(c)))return t();if(i.timezone){if(h=K5(i.timezone),isNaN(h))return t()}else{const f=new Date(l+c),m=Ne(0,e?.in);return m.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),m.setHours(f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()),m}return Ne(l+c+h,e?.in)}const Td={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},B5=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,H5=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,W5=/^([+-])(\d{2})(?::?(\d{2}))?$/;function $5(n){const e={},t=n.split(Td.dateTimeDelimiter);let r;if(t.length>2)return e;if(/:/.test(t[0])?r=t[0]:(e.date=t[0],r=t[1],Td.timeZoneDelimiter.test(e.date)&&(e.date=n.split(Td.timeZoneDelimiter)[0],r=n.substr(e.date.length,n.length))),r){const i=Td.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function q5(n,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=n.match(t);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:o===null?i:o*100,restDateString:n.slice((r[1]||r[2]).length)}}function Y5(n,e){if(e===null)return new Date(NaN);const t=n.match(B5);if(!t)return new Date(NaN);const r=!!t[4],i=Ac(t[1]),o=Ac(t[2])-1,l=Ac(t[3]),c=Ac(t[4]),h=Ac(t[5])-1;if(r)return e6(e,c,h)?Q5(e,c,h):new Date(NaN);{const f=new Date(0);return!J5(e,o,l)||!Z5(e,i)?new Date(NaN):(f.setUTCFullYear(e,o,Math.max(i,l)),f)}}function Ac(n){return n?parseInt(n):1}function G5(n){const e=n.match(H5);if(!e)return NaN;const t=fg(e[1]),r=fg(e[2]),i=fg(e[3]);return t6(t,r,i)?t*zu+r*Uu+i*1e3:NaN}function fg(n){return n&&parseFloat(n.replace(",","."))||0}function K5(n){if(n==="Z")return 0;const e=n.match(W5);if(!e)return 0;const t=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return n6(r,i)?t*(r*zu+i*Uu):NaN}function Q5(n,e,t){const r=new Date(0);r.setUTCFullYear(n,0,4);const i=r.getUTCDay()||7,o=(e-1)*7+t+1-i;return r.setUTCDate(r.getUTCDate()+o),r}const X5=[31,null,31,30,31,30,31,31,30,31,30,31];function UI(n){return n%400===0||n%4===0&&n%100!==0}function J5(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(X5[e]||(UI(n)?29:28))}function Z5(n,e){return e>=1&&e<=(UI(n)?366:365)}function e6(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function t6(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function n6(n,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const r6={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};iI._date.override({_id:"date-fns",formats:function(){return r6},parse:function(n,e){if(n===null||typeof n>"u")return null;const t=typeof n;return t==="number"||n instanceof Date?n=Ne(n):t==="string"&&(typeof e=="string"?n=L5(n,e,new Date,this.options):n=z5(n,this.options)),TI(n)?n.getTime():null},format:function(n,e){return F3(n,e,this.options)},add:function(n,e,t){switch(t){case"millisecond":return N_(n,e);case"second":return kU(n,e);case"minute":return SU(n,e);case"hour":return xU(n,e);case"day":return sp(n,e);case"week":return PU(n,e);case"month":return M_(n,e);case"quarter":return IU(n,e);case"year":return CU(n,e);default:return n}},diff:function(n,e,t){switch(t){case"millisecond":return L_(n,e);case"second":return VU(n,e);case"minute":return MU(n,e);case"hour":return OU(n,e);case"day":return SI(n,e);case"week":return FU(n,e);case"month":return PI(n,e);case"quarter":return LU(n,e);case"year":return jU(n,e);default:return 0}},startOf:function(n,e,t){switch(e){case"second":return U5(n);case"minute":return j5(n);case"hour":return F5(n);case"day":return ly(n);case"week":return ci(n);case"isoWeek":return ci(n,{weekStartsOn:+t});case"month":return zU(n);case"quarter":return UU(n);case"year":return CI(n);default:return n}},endOf:function(n,e){switch(e){case"second":return YU(n);case"minute":return $U(n);case"hour":return HU(n);case"day":return II(n);case"week":return WU(n);case"month":return kI(n);case"quarter":return qU(n);case"year":return BU(n);default:return n}}});const i6=typeof window<"u"&&window.innerWidth>=768;rp.register(ay,uU,Yj,qj,aU,Zj);const s6={"1h":{limit:60,aggregate:1,unit:"minute"},"1d":{limit:24,aggregate:1,unit:"hour"},"7d":{limit:7,aggregate:1,unit:"day"},"1m":{limit:30,aggregate:1,unit:"day"},"6m":{limit:180,aggregate:1,unit:"day"}},o6=["BTC","ETH","SOL","ADA","MATIC"],a6=()=>{const[n,e]=W.useState("BTC"),[t,r]=W.useState("1h"),[i,o]=W.useState([]),[l,c]=W.useState("");W.useEffect(()=>{(async()=>{try{const w=s6[t],k=(await Ct.get(`https://min-api.cryptocompare.com/data/v2/histo${w.unit}`,{params:{fsym:n,tsym:"USD",...w}})).data.Data.Data.map(x=>({time:x.time*1e3,close:x.close}));if(o(k),k.length>1){const x=k[0].close,U=(k[k.length-1].close-x)/x*100;c(`Sur la priode ${t}, ${n} a ${U>=0?"gagn":"perdu"} ${Math.abs(U).toFixed(2)}%.`)}}catch(w){console.error("Erreur fetch historique :",w.message),o([]),c("")}})()},[n,t]);const h=useMemo(()=>{if(i.length<20)return[];const T=i.map(U=>U.close),I=(U,H)=>U.map((K,G)=>G<H-1?null:U.slice(G-H+1,G+1).reduce((ne,D)=>ne+D,0)/H),k=I(T,5),x=I(T,20),N=[];for(let U=1;U<i.length;U++)k[U-1]!=null&&x[U-1]!=null&&(k[U]>x[U]&&k[U-1]<=x[U-1]&&N.push({time:i[U].time,type:"buy"}),k[U]<x[U]&&k[U-1]>=x[U-1]&&N.push({time:i[U].time,type:"sell"}));return N},[i]),f=useMemo(()=>({datasets:[{label:`${n} prix`,data:i.map(y=>({x:y.time,y:y.close})),borderColor:"#eee",pointRadius:0},{label:"Signaux achat",data:h.filter(y=>y.type==="buy").map(y=>({x:y.time,y:null})),borderColor:"#10b981",backgroundColor:"#10b981",showLine:!1,pointStyle:"triangle",pointRadius:8},{label:"Signaux vente",data:h.filter(y=>y.type==="sell").map(y=>({x:y.time,y:null})),borderColor:"#ef4444",backgroundColor:"#ef4444",showLine:!1,pointStyle:"rectRot",pointRadius:8}]}),[n,i,h]),m={responsive:!0,scales:{x:{type:"time",grid:{color:"#333"},ticks:{color:"#ccc"}},y:{grid:{color:"#333"},ticks:{color:"#ccc"}}},plugins:{legend:{labels:{color:"#ccc"}},tooltip:{bodyColor:"#000",backgroundColor:"#fff"}}};return b.jsxs("div",{style:{padding:"6rem 2rem 2rem",marginTop:"4rem",backgroundImage:'url("/backgrounds/homebackground.png")',backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:i6?"fixed":"scroll",color:"#eee",fontFamily:"sans-serif",minHeight:"100vh"},children:[b.jsxs("h1",{children:[" Analyse ",n,"/USD  ",t]}),b.jsxs("div",{style:{marginBottom:"1rem",backgroundColor:"rgba(0,0,0,0.5)",padding:"1rem",borderRadius:"8px",backdropFilter:"blur(8px)"},children:[b.jsx("select",{value:n,onChange:y=>e(y.target.value),style:{padding:"0.5rem",marginRight:"1rem",background:"#222",color:"#eee",border:"1px solid #444"},children:o6.map(y=>b.jsx("option",{value:y,children:y},y))}),["1h","1d","7d","1m","6m"].map(y=>b.jsx("button",{onClick:()=>r(y),style:{marginRight:"0.5rem",padding:"0.5rem 1rem",background:y===t?"#10b981":"#222",color:y===t?"#000":"#ccc",border:"1px solid #444",cursor:"pointer"},children:y},y))]}),b.jsx("div",{style:{padding:"1rem",backgroundColor:"rgba(0,0,0,0.5)",borderRadius:"8px",backdropFilter:"blur(8px)",boxShadow:"0 2px 8px rgba(0,0,0,0.6)"},children:b.jsx(vU,{data:f,options:m})}),b.jsxs("div",{style:{marginTop:"1.5rem",color:"#ccc",backgroundColor:"rgba(0,0,0,0.5)",padding:"1rem",borderRadius:"8px",backdropFilter:"blur(8px)"},children:[b.jsx("strong",{children:"Lgende :"}),b.jsxs("ul",{style:{marginTop:"0.5rem",lineHeight:1.6},children:[b.jsxs("li",{children:[b.jsx("span",{style:{color:"#10b981"},children:""})," : signal dachat"]}),b.jsxs("li",{children:[b.jsx("span",{style:{color:"#ef4444"},children:""})," : signal de vente"]})]})]}),l&&b.jsx("p",{style:{marginTop:"1rem",color:"#aaa",backgroundColor:"rgba(0,0,0,0.5)",padding:"1rem",borderRadius:"8px",backdropFilter:"blur(8px)"},children:l})]})};async function l6(n=25){const e=lf(_n,"signals"),t=z1(e,tM("timestamp","desc"),nM(n));return(await uf(t)).docs.map(i=>i.data())}const c6=typeof window<"u"&&window.innerWidth>=768,u6=()=>{const[n,e]=W.useState([]),[t,r]=W.useState([]),i=f=>Number(f||0).toFixed(2),o=f=>f==="BUY"?"#0f0":f==="SELL"?"#f00":f==="CONTEXT"?"#4ea8de":"#aaa",l=(f="")=>f.includes("Faible")?"lightgreen":f.includes("Moyen")?"orange":f.includes("lev")?"salmon":"#ccc",c=async()=>{try{const m=await(await fetch("https://utc-api.onrender.com".replace(/\/+$/,"")+"/get-latest-signals")).json();Array.isArray(m.log)?r(m.log.slice(-25).reverse()):r([" Format de logs inattendu."])}catch(f){console.error(" Erreur chargement logs:",f),r(m=>[...m," Erreur lecture logs serveur."])}},h=async()=>{try{const f=await l6();if(!Array.isArray(f))throw new Error("Donnes invalides");const m=[...f].sort((y,w)=>{const T=new Date(y.timestamp||0);return new Date(w.timestamp||0)-T});e(m)}catch(f){console.error(" Erreur chargement Firestore :",f),e([])}};return W.useEffect(()=>{h(),c();const f=setInterval(()=>{h(),c()},3e4);return()=>clearInterval(f)},[]),b.jsxs("div",{style:{backgroundImage:'url("/backgrounds/homebackground.png")',backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:c6?"fixed":"scroll",padding:"6rem 2rem 2rem",minHeight:"100vh",color:"#fff",fontFamily:"sans-serif"},children:[b.jsx("div",{style:{position:"sticky",top:0,zIndex:100,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(8px)",padding:"1rem",borderRadius:"6px",marginBottom:"1.5rem"},children:b.jsx("h1",{children:" Signaux IA"})}),b.jsx("div",{style:{backgroundColor:"rgba(0,0,0,0.5)",borderRadius:"6px",padding:"1rem",marginBottom:"2rem",fontFamily:"monospace",fontSize:"0.9rem",maxHeight:"180px",overflowY:"auto",boxShadow:"inset 0 0 4px #000"},children:t.length===0?b.jsx("div",{style:{color:"#888"},children:"Aucun log pour le moment"}):t.map((f,m)=>b.jsx("div",{style:{color:"#4ea8de"},children:f},m))}),b.jsx("div",{style:{backgroundColor:"rgba(0,0,0,0.5)",padding:"1rem",borderRadius:"8px",maxHeight:"65vh",overflowY:"auto"},children:n.length===0?b.jsx("p",{style:{color:"#888"},children:"Aucun signal pour linstant."}):b.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:n.map((f,m)=>b.jsxs("div",{style:{borderLeft:`6px solid ${o(f.type)}`,backgroundColor:"rgba(30, 30, 30, 0.6)",backdropFilter:"blur(8px)",borderRadius:"8px",padding:"1rem",width:"100%",boxSizing:"border-box"},children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",alignItems:"center"},children:[b.jsx("div",{style:{fontWeight:"bold",fontSize:"1.2rem"},children:f.crypto||""}),b.jsxs("div",{style:{color:"#ccc",fontSize:"1rem"},children:[" ",f.type_ia||f.type||"inconnu"]}),b.jsxs("div",{style:{color:l(f.risk),fontSize:"1rem"},children:["Risque : ",f.risk||""]})]}),b.jsxs("div",{style:{fontSize:"0.9rem",color:"#aaa",marginTop:"0.3rem"},children:[" Score IA : ",i(f.score)," / 5",f.score20!==void 0&&` | Score global : ${i(f.score20)} / 20`,b.jsx("br",{})," ",new Date(f.timestamp).toLocaleString()]}),Array.isArray(f.explanation)&&b.jsx("ul",{style:{marginTop:"0.5rem",color:"#ddd",fontSize:"0.95rem",lineHeight:"1.4",paddingLeft:"1.2rem"},children:f.explanation.map((y,w)=>b.jsx("li",{children:y},w))}),b.jsx("div",{style:{marginTop:"0.5rem"},children:b.jsx("a",{href:`https://www.tradingview.com/symbols/${f.crypto?.replace("/","")}USD`,target:"_blank",rel:"noreferrer",style:{color:"#4ea8de",fontWeight:"bold",textDecoration:"none"},children:" Voir sur TradingView"})})]},m))})})]})},ys=n=>typeof n!="number"||!Number.isFinite(n)?"":Math.abs(n)>=1e3?`$${n.toLocaleString(void 0,{maximumFractionDigits:2})}`:`$${n.toFixed(2)}`,pg=n=>typeof n=="number"&&Number.isFinite(n)?`${n.toFixed(2)}%`:"",Sd=n=>typeof n!="number"||!Number.isFinite(n)?"":n>=1?n.toFixed(2):n>=.01?n.toFixed(4):n.toFixed(6),cn=(n,e=0)=>typeof n=="number"&&Number.isFinite(n)?n:e,h6=()=>{const{portfolioName:n,cash:e,positions:t,history:r,currentPrices:i,investedAmount:o,activePositionsCount:l,totalTrades:c,positiveTrades:h,totalProfit:f,totalProfitPercent:m,updatePrices:y,resetPortfolio:w,sellPosition:T,totalValue:I}=W.useContext(Du),[k,x]=W.useState(()=>{const te=localStorage.getItem("pt_start");if(te)return te;const se=new Date().toISOString();return localStorage.setItem("pt_start",se),se}),[N,U]=W.useState(!1),[H,K]=W.useState(""),[G,ne]=W.useState(100),D=W.useMemo(()=>t.map(te=>({...te,quantity:te.qty})),[t]),P=async()=>{await y()},A=()=>{w();const te=new Date().toISOString();localStorage.setItem("pt_start",te),x(te)},V=te=>{K(te.toUpperCase()),ne(100),U(!0)},L=async()=>{await T(H,G),U(!1)},F={overflowX:"auto",border:"1px solid #2a2a2a",borderRadius:8},O={width:"100%",minWidth:980,borderCollapse:"collapse",color:"#fff"},we={textAlign:"left",padding:"10px 12px",background:"#232323",position:"sticky",top:0},he={padding:"10px 12px",borderTop:"1px solid #2a2a2a",verticalAlign:"middle"},Ie=W.useMemo(()=>t.map(te=>{const se=(te.symbol||"").toUpperCase(),pe=i[se],R=typeof pe=="number"?pe:te.buyPrice,z=cn(te.qty,0)*cn(te.buyPrice,0),X=cn(te.qty,0)*(cn(R,0)-cn(te.buyPrice,0)),J=cn(te.buyPrice,0)>0?(cn(R,0)-te.buyPrice)/te.buyPrice*100:0;return{...te,sym:se,curPrice:R,investedUSD:z,resultUSD:X,resultPct:J}}),[t,i]);return b.jsxs("div",{style:{backgroundImage:'url("/backgrounds/homebackground.png")',backgroundSize:"cover",backgroundAttachment:"fixed",backgroundPosition:"center",minHeight:"100vh",padding:"6rem 1rem 2rem",fontFamily:"Inter, system-ui, Avenir, Helvetica, Arial, sans-serif",color:"#fff"},children:[b.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",alignItems:"center",marginBottom:10},children:[b.jsxs("h2",{style:{margin:0},children:["Profile  ",b.jsx("span",{style:{color:"#9ecbff"},children:n})]}),b.jsxs("div",{style:{color:"#9aa0a6"},children:[b.jsx("b",{children:"Dbut du PT:"})," ",new Date(k).toLocaleString()]}),b.jsx("button",{onClick:A,style:{padding:"8px 12px",borderRadius:6,background:"#6c757d",border:"none",color:"#fff",cursor:"pointer"},children:"RESET PT TO 10000$"})]}),b.jsxs("section",{style:{marginTop:6},children:[b.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",alignItems:"center",marginBottom:12},children:[b.jsx("h3",{style:{margin:0},children:"Bilan"}),b.jsx("button",{onClick:P,style:{padding:"8px 12px",borderRadius:6,background:"#0d6efd",border:"none",color:"#fff",cursor:"pointer"},children:"UPDATE PRICES NOW"})]}),b.jsxs("div",{style:{display:"grid",gap:12,gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))"},children:[b.jsxs("div",{style:{background:"#1b1b1b",padding:12,borderRadius:8,border:"1px solid #2a2a2a"},children:[b.jsx("div",{style:{color:"#999",fontSize:12},children:"Solde total (cash + investissement valoris)"}),b.jsx("div",{style:{fontSize:20,fontWeight:700},children:ys(I)})]}),b.jsxs("div",{style:{background:"#1b1b1b",padding:12,borderRadius:8,border:"1px solid #2a2a2a"},children:[b.jsx("div",{style:{color:"#999",fontSize:12},children:"Cash disponible"}),b.jsx("div",{style:{fontSize:20,fontWeight:700},children:ys(e)})]}),b.jsxs("div",{style:{background:"#1b1b1b",padding:12,borderRadius:8,border:"1px solid #2a2a2a"},children:[b.jsx("div",{style:{color:"#999",fontSize:12},children:"Investi"}),b.jsx("div",{style:{fontSize:20,fontWeight:700},children:ys(o)})]}),b.jsxs("div",{style:{background:"#1b1b1b",padding:12,borderRadius:8,border:"1px solid #2a2a2a"},children:[b.jsx("div",{style:{color:"#999",fontSize:12},children:"Nombre de positions ouvertes"}),b.jsx("div",{style:{fontSize:20,fontWeight:700},children:l})]}),b.jsxs("div",{style:{background:"#1b1b1b",padding:12,borderRadius:8,border:"1px solid #2a2a2a"},children:[b.jsx("div",{style:{color:"#999",fontSize:12},children:"Nombre de trades"}),b.jsx("div",{style:{fontSize:20,fontWeight:700},children:c})]}),b.jsxs("div",{style:{background:"#1b1b1b",padding:12,borderRadius:8,border:"1px solid #2a2a2a"},children:[b.jsx("div",{style:{color:"#999",fontSize:12},children:"Nombre de trades positifs"}),b.jsx("div",{style:{fontSize:20,fontWeight:700},children:h})]}),b.jsxs("div",{style:{background:"#1b1b1b",padding:12,borderRadius:8,border:"1px solid #2a2a2a"},children:[b.jsx("div",{style:{color:"#999",fontSize:12},children:"Rendement total"}),b.jsxs("div",{style:{fontSize:20,fontWeight:700,color:f>=0?"lightgreen":"salmon"},children:[ys(f)," (",pg(m),")"]})]})]})]}),b.jsxs("section",{style:{marginTop:24},children:[b.jsx("h3",{style:{marginTop:0},children:"Positions en cours"}),b.jsxs("div",{style:{background:"#1b1b1b",padding:12,borderRadius:8,border:"1px solid #2a2a2a"},children:[b.jsx("div",{style:F,children:b.jsxs("table",{style:O,children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{style:we,children:"Crypto"}),b.jsx("th",{style:we,children:"Date & heure d'achat"}),b.jsx("th",{style:we,children:"ID du placement"}),b.jsx("th",{style:we,children:"Montant investi ($)"}),b.jsx("th",{style:we,children:"Prix d'achat"}),b.jsx("th",{style:we,children:"Prix actuel"}),b.jsx("th",{style:we,children:"Rsultat"}),b.jsx("th",{style:we,children:"Vente"})]})}),b.jsx("tbody",{children:Ie.length===0?b.jsx("tr",{children:b.jsx("td",{style:he,colSpan:8,children:"Aucune position ouverte."})}):Ie.map(te=>{const se=te.curPrice>=te.buyPrice?"lightgreen":"salmon",pe=te.resultUSD>=0?"lightgreen":"salmon";return b.jsxs("tr",{children:[b.jsx("td",{style:he,children:b.jsx("b",{children:te.sym})}),b.jsx("td",{style:he,children:new Date(te.buyAt).toLocaleString()}),b.jsx("td",{style:he,title:te.id,children:te.id}),b.jsx("td",{style:he,children:ys(te.investedUSD)}),b.jsx("td",{style:he,children:Sd(te.buyPrice)}),b.jsx("td",{style:{...he,color:se},children:Sd(te.curPrice)}),b.jsxs("td",{style:{...he,color:pe},children:[pg(te.resultPct),"  ",ys(te.resultUSD)]}),b.jsx("td",{style:he,children:b.jsx("button",{onClick:()=>V(te.sym),style:{padding:"6px 10px",border:"none",borderRadius:4,background:"#dc3545",color:"#fff",cursor:"pointer",fontWeight:600},children:"VENTE"})})]},te.id)})})]})}),b.jsxs("p",{style:{color:"#9aa0a6",marginTop:8,fontSize:13},children:["Utilisez ",b.jsx("b",{children:"UPDATE PRICES NOW"})," pour rafrachir les prix et viter tout affichage obsolte."]})]})]}),b.jsxs("section",{style:{marginTop:24},children:[b.jsx("h3",{style:{marginTop:0},children:"Historique"}),b.jsx("div",{style:{background:"#1b1b1b",padding:12,borderRadius:8,border:"1px solid #2a2a2a"},children:b.jsx("div",{style:{...F,maxHeight:420},children:b.jsxs("table",{style:O,children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx("th",{style:we,children:"ID du placement"}),b.jsx("th",{style:we,children:"Date & heure"}),b.jsx("th",{style:we,children:"Crypto"}),b.jsx("th",{style:we,children:"Type"}),b.jsx("th",{style:we,children:"Investissement ($)"}),b.jsx("th",{style:we,children:"Prix d'achat"}),b.jsx("th",{style:we,children:"Prix de vente"}),b.jsx("th",{style:we,children:"Rsultat"})]})}),b.jsx("tbody",{children:r.length===0?b.jsx("tr",{children:b.jsx("td",{style:he,colSpan:8,children:"Aucun historique pour le moment."})}):r.map(te=>{const se=(te.symbol||"").toUpperCase(),pe=te.type==="SELL",R=te.type==="BUY"?cn(te.qty,0)*cn(te.price,0):typeof te.buyPrice=="number"&&typeof te.qty=="number"?te.qty*te.buyPrice:0,z=pe?typeof te.pnlUSD=="number"?te.pnlUSD:(cn(te.price,0)-cn(te.buyPrice,0))*cn(te.qty,0):0,X=pe&&cn(te.buyPrice,0)>0?(cn(te.price,0)-cn(te.buyPrice,0))/cn(te.buyPrice,0)*100:0,J=z>=0?"lightgreen":"salmon";return b.jsxs("tr",{children:[b.jsx("td",{style:he,title:te.id,children:te.id}),b.jsx("td",{style:he,children:new Date(te.at).toLocaleString()}),b.jsx("td",{style:he,children:b.jsx("b",{children:se})}),b.jsx("td",{style:he,children:te.type}),b.jsx("td",{style:he,children:ys(R)}),b.jsx("td",{style:he,children:typeof te.buyPrice=="number"?Sd(te.buyPrice):""}),b.jsx("td",{style:he,children:pe?Sd(te.price):""}),b.jsx("td",{style:{...he,color:J},children:pe?`${pg(X)}  ${ys(z)}`:""})]},te.id)})})]})})})]}),b.jsx(Y1,{show:N,symbol:H,price:i[(H||"").toUpperCase()]??0,percent:G,positions:D,onClose:()=>U(!1),onConfirm:L,onChangePercent:te=>ne(Number(te.target.value)),onSetMax:()=>ne(100)})]})},d6=()=>{const[n,e]=W.useState(""),[t,r]=W.useState(""),[i,o]=W.useState(""),l=Gf(),c=async h=>{h.preventDefault(),o("");try{const f=by(),y=(await iT(f,n,t)).user,w=await Gc(Ir(_n,"users",y.uid));if(!w.exists())throw new Error("Utilisateur inconnu.");if(!w.data().approved)throw new Error("Compte en attente de validation.");l("/")}catch(f){console.error(f),o(f.message||"Erreur de connexion.")}};return b.jsx("div",{style:{backgroundImage:'url("/backgrounds/homebackground.png")',backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed",minHeight:"100vh",padding:"6rem 1rem 2rem",display:"flex",justifyContent:"center",alignItems:"flex-start",fontFamily:"sans-serif",color:"#fff"},children:b.jsxs("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(8px)",padding:"2rem",borderRadius:"12px",maxWidth:"400px",width:"100%"},children:[b.jsx("h2",{style:{marginBottom:"1.5rem",textAlign:"center"},children:" Connexion"}),b.jsxs("form",{onSubmit:c,style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[b.jsx("input",{type:"email",placeholder:"Email",value:n,onChange:h=>e(h.target.value),required:!0,style:{padding:"10px",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1rem"}}),b.jsx("input",{type:"password",placeholder:"Mot de passe",value:t,onChange:h=>r(h.target.value),required:!0,style:{padding:"10px",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1rem"}}),b.jsx("button",{type:"submit",style:{padding:"10px",backgroundColor:"#4ea8de",color:"#fff",border:"none",borderRadius:"4px",fontWeight:"bold",fontSize:"1rem",cursor:"pointer"},children:"Se connecter"}),i&&b.jsx("p",{style:{color:"salmon",textAlign:"center"},children:i})]}),b.jsxs("div",{style:{marginTop:"2rem",textAlign:"center"},children:[b.jsx("p",{style:{color:"#aaa"},children:"Vous navez pas encore de compte ?"}),b.jsx(qn,{to:"/register",style:{color:"#4ea8de",fontWeight:"bold",textDecoration:"none"},children:" Faire une demande dinscription"})]})]})})},f6=()=>{const[n,e]=W.useState(""),[t,r]=W.useState(""),[i,o]=W.useState(""),l=Gf(),c=async h=>{h.preventDefault(),o("");try{const m=(await AA(Ld,n,t)).user;await u_(Ir(_n,"users",m.uid),{email:n,displayName:"",approved:!1,createdAt:new Date().toISOString()}),l("/login")}catch(f){console.error(f),o(f.message)}};return b.jsx("div",{style:{backgroundImage:'url("/backgrounds/homebackground.png")',backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed",minHeight:"100vh",padding:"6rem 1rem 2rem",display:"flex",justifyContent:"center",alignItems:"flex-start",fontFamily:"sans-serif",color:"#fff"},children:b.jsxs("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(8px)",padding:"2rem",borderRadius:"12px",maxWidth:"400px",width:"100%"},children:[b.jsx("h2",{style:{marginBottom:"1.5rem",textAlign:"center"},children:" Demande d'inscription"}),b.jsxs("form",{onSubmit:c,style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"email",style:{display:"block",marginBottom:"0.5rem",color:"#ccc"},children:"Email :"}),b.jsx("input",{id:"email",type:"email",value:n,onChange:h=>e(h.target.value),required:!0,style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1rem"}})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"password",style:{display:"block",marginBottom:"0.5rem",color:"#ccc"},children:"Mot de passe :"}),b.jsx("input",{id:"password",type:"password",value:t,onChange:h=>r(h.target.value),required:!0,style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1rem"}})]}),i&&b.jsx("div",{style:{color:"salmon",textAlign:"center"},children:i}),b.jsx("button",{type:"submit",style:{backgroundColor:"#4ea8de",color:"#fff",padding:"10px",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold",fontSize:"1rem"},children:"Sinscrire"})]}),b.jsx("p",{style:{marginTop:"1.5rem",fontSize:"0.9rem",color:"#aaa",textAlign:"center"},children:"Une fois votre compte cr, il devra tre valid par ladministrateur avant que vous puissiez vous connecter."})]})})},Rc=({children:n,redirectTo:e="/login"})=>{const{user:t,initializing:r}=bl();return r?null:t?n:b.jsx(iS,{to:e,replace:!0})},p6=typeof window<"u"&&window.innerWidth>=768,m6=()=>{const{user:n}=bl(),{refreshPending:e}=oS(),[t,r]=W.useState([]),[i,o]=W.useState(!1),[l,c]=W.useState("");if(n?.email!=="xzno4rzx@gmail.com")return b.jsx(iS,{to:"/"});const h=async()=>{try{const y=await uf(lf(_n,"users"));r(y.docs.map(w=>({id:w.id,...w.data()})))}catch(y){console.error("Erreur rcupration utilisateurs :",y)}},f=async(y,w)=>{try{await Ja(Ir(_n,"users",y),{status:w}),h(),e()}catch(T){console.error("Erreur mise  jour :",T)}},m=async()=>{if(!l.trim()){alert("Merci de saisir un message.");return}o(!0);try{const y=await fetch("https://utc-api.onrender.com".replace(/\/+$/,"")+"/send-manual-signal",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({timestamp:new Date().toISOString(),crypto:"ADMIN",type:"ADMIN_POST",type_ia:"admin_post",score:0,risk:" Info",explanation:[`ADMIN POST: ${l.trim()}`]})});if(!y.ok)throw new Error(`HTTP ${y.status}`);alert(" Message envoy !"),c("")}catch(y){console.error(" Erreur envoi message admin :",y),alert("Erreur lors de lenvoi.")}finally{o(!1)}};return W.useEffect(()=>{h()},[]),b.jsxs("div",{style:{backgroundImage:'url("/backgrounds/homebackground.png")',backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:p6?"fixed":"scroll",padding:"6rem 2rem 2rem",color:"#fff",fontFamily:"sans-serif",minHeight:"100vh"},children:[b.jsxs("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(10px)",padding:"2rem",borderRadius:"12px",marginBottom:"2rem"},children:[b.jsx("h1",{children:" Tableau de bord Admin"}),b.jsx("div",{style:{overflowX:"auto",marginTop:"2rem"},children:b.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.95rem",minWidth:"600px"},children:[b.jsx("thead",{children:b.jsxs("tr",{style:{backgroundColor:"#333"},children:[b.jsx("th",{style:_s,children:"Email"}),b.jsx("th",{style:_s,children:"Nom"}),b.jsx("th",{style:_s,children:"Statut"}),b.jsx("th",{style:_s,children:"Action"})]})}),b.jsx("tbody",{children:t.map((y,w)=>b.jsxs("tr",{style:{background:w%2===0?"#222":"#2a2a2a"},children:[b.jsx("td",{style:_s,children:y.email}),b.jsx("td",{style:_s,children:y.displayName||""}),b.jsx("td",{style:{..._s,color:y.status==="accepted"?"lightgreen":y.status==="refused"?"salmon":"#ccc"},children:y.status||"en attente"}),b.jsxs("td",{style:_s,children:[b.jsx("button",{onClick:()=>f(y.id,"accepted"),style:wb,children:""}),b.jsx("button",{onClick:()=>f(y.id,"refused"),style:{...wb,backgroundColor:"#a00"},children:""})]})]},y.id))})]})})]}),b.jsxs("div",{style:{backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(10px)",padding:"2rem",borderRadius:"12px"},children:[b.jsx("h2",{children:" Envoyer un message admin"}),b.jsx("textarea",{rows:4,value:l,onChange:y=>c(y.target.value),placeholder:"Votre message ici",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",fontFamily:"inherit",marginTop:"0.5rem"}}),b.jsx("button",{onClick:m,disabled:i,style:{marginTop:"1rem",padding:"10px 20px",backgroundColor:"#4ea8de",color:"#fff",border:"none",borderRadius:"6px",fontWeight:"bold",cursor:"pointer"},children:i?"Envoi":" Envoyer"})]})]})},_s={padding:"10px",textAlign:"left",borderBottom:"1px solid #444"},wb={padding:"6px 10px",marginRight:"6px",backgroundColor:"#10b981",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},g6=()=>(W.useEffect(()=>{console.log(" UTC App initialise avec routes.")},[]),console.log(" App.jsx charg"),b.jsxs(b.Fragment,{children:[b.jsx(RN,{}),b.jsxs(vN,{children:[b.jsx(Gr,{path:"/",element:b.jsx(LN,{})}),b.jsx(Gr,{path:"/login",element:b.jsx(d6,{})}),b.jsx(Gr,{path:"/register",element:b.jsx(f6,{})}),b.jsx(Gr,{path:"/trading",element:b.jsx(Rc,{children:b.jsx(ME,{})})}),b.jsx(Gr,{path:"/analysis",element:b.jsx(Rc,{children:b.jsx(a6,{})})}),b.jsx(Gr,{path:"/signals",element:b.jsx(Rc,{children:b.jsx(u6,{})})}),b.jsx(Gr,{path:"/ia-trader",element:b.jsx(Rc,{children:b.jsx(ME,{})})}),b.jsx(Gr,{path:"/profile",element:b.jsx(Rc,{children:b.jsx(h6,{})})}),b.jsx(Gr,{path:"/admin",element:b.jsx(m6,{})})]})]}));gM.createRoot(document.getElementById("root")).render(b.jsx(Tf.StrictMode,{children:b.jsx(IN,{children:b.jsx(yM,{children:b.jsx(xM,{children:b.jsx(MN,{children:b.jsx(AN,{children:b.jsx(uM,{children:b.jsx(g6,{})})})})})})})}));
