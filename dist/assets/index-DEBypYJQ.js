function Uk(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function db(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Im={exports:{}},mc={},km={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jv;function zk(){if(jv)return Ve;jv=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function w(R){return R===null||typeof R!="object"?null:(R=y&&R[y]||R["@@iterator"],typeof R=="function"?R:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,k={};function b(R,F,q){this.props=R,this.context=F,this.refs=k,this.updater=q||T}b.prototype.isReactComponent={},b.prototype.setState=function(R,F){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,F,"setState")},b.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function N(){}N.prototype=b.prototype;function z(R,F,q){this.props=R,this.context=F,this.refs=k,this.updater=q||T}var $=z.prototype=new N;$.constructor=z,I($,b.prototype),$.isPureReactComponent=!0;var te=Array.isArray,Q=Object.prototype.hasOwnProperty,ie={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function P(R,F,q){var K,he={},ge=null,Ee=null;if(F!=null)for(K in F.ref!==void 0&&(Ee=F.ref),F.key!==void 0&&(ge=""+F.key),F)Q.call(F,K)&&!D.hasOwnProperty(K)&&(he[K]=F[K]);var Ae=arguments.length-2;if(Ae===1)he.children=q;else if(1<Ae){for(var Ne=Array(Ae),et=0;et<Ae;et++)Ne[et]=arguments[et+2];he.children=Ne}if(R&&R.defaultProps)for(K in Ae=R.defaultProps,Ae)he[K]===void 0&&(he[K]=Ae[K]);return{$$typeof:n,type:R,key:ge,ref:Ee,props:he,_owner:ie.current}}function A(R,F){return{$$typeof:n,type:R.type,key:F,ref:R.ref,props:R.props,_owner:R._owner}}function V(R){return typeof R=="object"&&R!==null&&R.$$typeof===n}function L(R){var F={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(q){return F[q]})}var j=/\/+/g;function O(R,F){return typeof R=="object"&&R!==null&&R.key!=null?L(""+R.key):F.toString(36)}function se(R,F,q,K,he){var ge=typeof R;(ge==="undefined"||ge==="boolean")&&(R=null);var Ee=!1;if(R===null)Ee=!0;else switch(ge){case"string":case"number":Ee=!0;break;case"object":switch(R.$$typeof){case n:case e:Ee=!0}}if(Ee)return Ee=R,he=he(Ee),R=K===""?"."+O(Ee,0):K,te(he)?(q="",R!=null&&(q=R.replace(j,"$&/")+"/"),se(he,F,q,"",function(et){return et})):he!=null&&(V(he)&&(he=A(he,q+(!he.key||Ee&&Ee.key===he.key?"":(""+he.key).replace(j,"$&/")+"/")+R)),F.push(he)),1;if(Ee=0,K=K===""?".":K+":",te(R))for(var Ae=0;Ae<R.length;Ae++){ge=R[Ae];var Ne=K+O(ge,Ae);Ee+=se(ge,F,q,Ne,he)}else if(Ne=w(R),typeof Ne=="function")for(R=Ne.call(R),Ae=0;!(ge=R.next()).done;)ge=ge.value,Ne=K+O(ge,Ae++),Ee+=se(ge,F,q,Ne,he);else if(ge==="object")throw F=String(R),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.");return Ee}function fe(R,F,q){if(R==null)return R;var K=[],he=0;return se(R,K,"","",function(ge){return F.call(q,ge,he++)}),K}function Se(R){if(R._status===-1){var F=R._result;F=F(),F.then(function(q){(R._status===0||R._status===-1)&&(R._status=1,R._result=q)},function(q){(R._status===0||R._status===-1)&&(R._status=2,R._result=q)}),R._status===-1&&(R._status=0,R._result=F)}if(R._status===1)return R._result.default;throw R._result}var re={current:null},ae={transition:null},J={ReactCurrentDispatcher:re,ReactCurrentBatchConfig:ae,ReactCurrentOwner:ie};return Ve.Children={map:fe,forEach:function(R,F,q){fe(R,function(){F.apply(this,arguments)},q)},count:function(R){var F=0;return fe(R,function(){F++}),F},toArray:function(R){return fe(R,function(F){return F})||[]},only:function(R){if(!V(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},Ve.Component=b,Ve.Fragment=t,Ve.Profiler=i,Ve.PureComponent=z,Ve.StrictMode=r,Ve.Suspense=h,Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,Ve.cloneElement=function(R,F,q){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var K=I({},R.props),he=R.key,ge=R.ref,Ee=R._owner;if(F!=null){if(F.ref!==void 0&&(ge=F.ref,Ee=ie.current),F.key!==void 0&&(he=""+F.key),R.type&&R.type.defaultProps)var Ae=R.type.defaultProps;for(Ne in F)Q.call(F,Ne)&&!D.hasOwnProperty(Ne)&&(K[Ne]=F[Ne]===void 0&&Ae!==void 0?Ae[Ne]:F[Ne])}var Ne=arguments.length-2;if(Ne===1)K.children=q;else if(1<Ne){Ae=Array(Ne);for(var et=0;et<Ne;et++)Ae[et]=arguments[et+2];K.children=Ae}return{$$typeof:n,type:R.type,key:he,ref:ge,props:K,_owner:Ee}},Ve.createContext=function(R){return R={$$typeof:l,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:o,_context:R},R.Consumer=R},Ve.createElement=P,Ve.createFactory=function(R){var F=P.bind(null,R);return F.type=R,F},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(R){return{$$typeof:c,render:R}},Ve.isValidElement=V,Ve.lazy=function(R){return{$$typeof:m,_payload:{_status:-1,_result:R},_init:Se}},Ve.memo=function(R,F){return{$$typeof:f,type:R,compare:F===void 0?null:F}},Ve.startTransition=function(R){var F=ae.transition;ae.transition={};try{R()}finally{ae.transition=F}},Ve.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},Ve.useCallback=function(R,F){return re.current.useCallback(R,F)},Ve.useContext=function(R){return re.current.useContext(R)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(R){return re.current.useDeferredValue(R)},Ve.useEffect=function(R,F){return re.current.useEffect(R,F)},Ve.useId=function(){return re.current.useId()},Ve.useImperativeHandle=function(R,F,q){return re.current.useImperativeHandle(R,F,q)},Ve.useInsertionEffect=function(R,F){return re.current.useInsertionEffect(R,F)},Ve.useLayoutEffect=function(R,F){return re.current.useLayoutEffect(R,F)},Ve.useMemo=function(R,F){return re.current.useMemo(R,F)},Ve.useReducer=function(R,F,q){return re.current.useReducer(R,F,q)},Ve.useRef=function(R){return re.current.useRef(R)},Ve.useState=function(R){return re.current.useState(R)},Ve.useSyncExternalStore=function(R,F,q){return re.current.useSyncExternalStore(R,F,q)},Ve.useTransition=function(){return re.current.useTransition()},Ve.version="18.2.0",Ve}var Uv;function ry(){return Uv||(Uv=1,km.exports=zk()),km.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zv;function Bk(){if(zv)return mc;zv=1;var n=ry(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,h,f){var m,y={},w=null,T=null;f!==void 0&&(w=""+f),h.key!==void 0&&(w=""+h.key),h.ref!==void 0&&(T=h.ref);for(m in h)r.call(h,m)&&!o.hasOwnProperty(m)&&(y[m]=h[m]);if(c&&c.defaultProps)for(m in h=c.defaultProps,h)y[m]===void 0&&(y[m]=h[m]);return{$$typeof:e,type:c,key:w,ref:T,props:y,_owner:i.current}}return mc.Fragment=t,mc.jsx=l,mc.jsxs=l,mc}var Bv;function Wk(){return Bv||(Bv=1,Im.exports=Bk()),Im.exports}var x=Wk(),W=ry();const vf=db(W),$k=Uk({__proto__:null,default:vf},[W]),Hk=()=>{};var Wv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},qk=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],l=n[t++],c=n[t++],h=((i&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return e.join("")},pb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],l=i+1<n.length,c=l?n[i+1]:0,h=i+2<n.length,f=h?n[i+2]:0,m=o>>2,y=(o&3)<<4|c>>4;let w=(c&15)<<2|f>>6,T=f&63;h||(T=64,l||(w=64)),r.push(t[m],t[y],t[w],t[T])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(fb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):qk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const y=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||f==null||y==null)throw new Yk;const w=o<<2|c>>4;if(r.push(w),f!==64){const T=c<<4&240|f>>2;if(r.push(T),y!==64){const I=f<<6&192|y;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Yk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Gk=function(n){const e=fb(n);return pb.encodeByteArray(e,!0)},mb=function(n){return Gk(n).replace(/\./g,"")},gb=function(n){try{return pb.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk=()=>Kk().__FIREBASE_DEFAULTS__,Xk=()=>{if(typeof process>"u"||typeof Wv>"u")return;const n=Wv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Jk=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&gb(n[1]);return e&&JSON.parse(e)},wf=()=>{try{return Hk()||Qk()||Xk()||Jk()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Zk=n=>wf()?.emulatorHosts?.[n],yb=()=>wf()?.config,_b=n=>wf()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function vb(n){return(await fetch(n,{credentials:"include"})).ok}const Lc={};function tP(){const n={prod:[],emulator:[]};for(const e of Object.keys(Lc))Lc[e]?n.emulator.push(e):n.prod.push(e);return n}function nP(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let $v=!1;function rP(n,e){if(typeof window>"u"||typeof document>"u"||!al(window.location.host)||Lc[n]===e||Lc[n]||$v)return;Lc[n]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",o=tP().prod.length>0;function l(){const w=document.getElementById(r);w&&w.remove()}function c(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function h(w,T){w.setAttribute("width","24"),w.setAttribute("id",T),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function f(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{$v=!0,l()},w}function m(w,T){w.setAttribute("id",T),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function y(){const w=nP(r),T=t("text"),I=document.getElementById(T)||document.createElement("span"),k=t("learnmore"),b=document.getElementById(k)||document.createElement("a"),N=t("preprendIcon"),z=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const $=w.element;c($),m(b,k);const te=f();h(z,N),$.append(z,I,b,te),document.body.appendChild($)}o?(I.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function sP(){const n=wf()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aP(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function lP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cP(){const n=fn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function uP(){return!sP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hP(){try{return typeof indexedDB=="object"}catch{return!1}}function dP(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP="FirebaseError";class Mi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=fP,Object.setPrototypeOf(this,Mi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fu.prototype.create)}}class fu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],l=o?pP(o,r):"Error",c=`${this.serviceName}: ${l} (${i}).`;return new Mi(i,c,r)}}function pP(n,e){return n.replace(mP,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const mP=/\{\$([^}]+)}/g;function gP(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ro(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],l=e[i];if(Hv(o)&&Hv(l)){if(!Ro(o,l))return!1}else if(o!==l)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Hv(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ic(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function kc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function yP(n,e){const t=new _P(n,e);return t.subscribe.bind(t)}class _P{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");vP(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Pm),i.error===void 0&&(i.error=Pm),i.complete===void 0&&(i.complete=Pm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vP(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Pm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(n){return n&&n._delegate?n._delegate:n}class Do{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new eP;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(EP(e))try{this.getOrInitializeService({instanceIdentifier:wo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=wo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wo){return this.instances.has(e)}getOptions(e=wo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xP(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=wo){return this.component?this.component.multipleInstances?e:wo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xP(n){return n===wo?void 0:n}function EP(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new wP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Fe||(Fe={}));const TP={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},SP=Fe.INFO,IP={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},kP=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=IP[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class iy{constructor(e){this.name=e,this._logLevel=SP,this._logHandler=kP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const PP=(n,e)=>e.some(t=>n instanceof t);let qv,Yv;function CP(){return qv||(qv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AP(){return Yv||(Yv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wb=new WeakMap,ug=new WeakMap,xb=new WeakMap,Cm=new WeakMap,sy=new WeakMap;function RP(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(vs(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&wb.set(t,n)}).catch(()=>{}),sy.set(e,n),e}function DP(n){if(ug.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});ug.set(n,e)}let hg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ug.get(n);if(e==="objectStoreNames")return n.objectStoreNames||xb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return vs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function OP(n){hg=n(hg)}function MP(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Am(this),e,...t);return xb.set(r,e.sort?e.sort():[e]),vs(r)}:AP().includes(n)?function(...e){return n.apply(Am(this),e),vs(wb.get(this))}:function(...e){return vs(n.apply(Am(this),e))}}function NP(n){return typeof n=="function"?MP(n):(n instanceof IDBTransaction&&DP(n),PP(n,CP())?new Proxy(n,hg):n)}function vs(n){if(n instanceof IDBRequest)return RP(n);if(Cm.has(n))return Cm.get(n);const e=NP(n);return e!==n&&(Cm.set(n,e),sy.set(e,n)),e}const Am=n=>sy.get(n);function LP(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const l=indexedDB.open(n,e),c=vs(l);return r&&l.addEventListener("upgradeneeded",h=>{r(vs(l.result),h.oldVersion,h.newVersion,vs(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const VP=["get","getKey","getAll","getAllKeys","count"],FP=["put","add","delete","clear"],Rm=new Map;function Gv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Rm.get(e))return Rm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=FP.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||VP.includes(t)))return;const o=async function(l,...c){const h=this.transaction(l,i?"readwrite":"readonly");let f=h.store;return r&&(f=f.index(c.shift())),(await Promise.all([f[t](...c),i&&h.done]))[0]};return Rm.set(e,o),o}OP(n=>({...n,get:(e,t,r)=>Gv(e,t)||n.get(e,t,r),has:(e,t)=>!!Gv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(UP(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function UP(n){return n.getComponent()?.type==="VERSION"}const dg="@firebase/app",Kv="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai=new iy("@firebase/app"),zP="@firebase/app-compat",BP="@firebase/analytics-compat",WP="@firebase/analytics",$P="@firebase/app-check-compat",HP="@firebase/app-check",qP="@firebase/auth",YP="@firebase/auth-compat",GP="@firebase/database",KP="@firebase/data-connect",QP="@firebase/database-compat",XP="@firebase/functions",JP="@firebase/functions-compat",ZP="@firebase/installations",eC="@firebase/installations-compat",tC="@firebase/messaging",nC="@firebase/messaging-compat",rC="@firebase/performance",iC="@firebase/performance-compat",sC="@firebase/remote-config",oC="@firebase/remote-config-compat",aC="@firebase/storage",lC="@firebase/storage-compat",cC="@firebase/firestore",uC="@firebase/ai",hC="@firebase/firestore-compat",dC="firebase",fC="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg="[DEFAULT]",pC={[dg]:"fire-core",[zP]:"fire-core-compat",[WP]:"fire-analytics",[BP]:"fire-analytics-compat",[HP]:"fire-app-check",[$P]:"fire-app-check-compat",[qP]:"fire-auth",[YP]:"fire-auth-compat",[GP]:"fire-rtdb",[KP]:"fire-data-connect",[QP]:"fire-rtdb-compat",[XP]:"fire-fn",[JP]:"fire-fn-compat",[ZP]:"fire-iid",[eC]:"fire-iid-compat",[tC]:"fire-fcm",[nC]:"fire-fcm-compat",[rC]:"fire-perf",[iC]:"fire-perf-compat",[sC]:"fire-rc",[oC]:"fire-rc-compat",[aC]:"fire-gcs",[lC]:"fire-gcs-compat",[cC]:"fire-fst",[hC]:"fire-fst-compat",[uC]:"fire-vertex","fire-js":"fire-js",[dC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd=new Map,mC=new Map,pg=new Map;function Qv(n,e){try{n.container.addComponent(e)}catch(t){Ai.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Xa(n){const e=n.name;if(pg.has(e))return Ai.debug(`There were multiple attempts to register component ${e}.`),!1;pg.set(e,n);for(const t of Fd.values())Qv(t,n);for(const t of mC.values())Qv(t,n);return!0}function oy(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function rr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ws=new fu("app","Firebase",gC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Do("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ws.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=fC;function Eb(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:fg,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw ws.create("bad-app-name",{appName:String(i)});if(t||(t=yb()),!t)throw ws.create("no-options");const o=Fd.get(i);if(o){if(Ro(t,o.options)&&Ro(r,o.config))return o;throw ws.create("duplicate-app",{appName:i})}const l=new bP(i);for(const h of pg.values())l.addComponent(h);const c=new yC(t,r,l);return Fd.set(i,c),c}function _C(n=fg){const e=Fd.get(n);if(!e&&n===fg&&yb())return Eb();if(!e)throw ws.create("no-app",{appName:n});return e}function xs(n,e,t){let r=pC[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ai.warn(l.join(" "));return}Xa(new Do(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="firebase-heartbeat-database",wC=1,Gc="firebase-heartbeat-store";let Dm=null;function bb(){return Dm||(Dm=LP(vC,wC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Gc)}catch(t){console.warn(t)}}}}).catch(n=>{throw ws.create("idb-open",{originalErrorMessage:n.message})})),Dm}async function xC(n){try{const t=(await bb()).transaction(Gc),r=await t.objectStore(Gc).get(Tb(n));return await t.done,r}catch(e){if(e instanceof Mi)Ai.warn(e.message);else{const t=ws.create("idb-get",{originalErrorMessage:e?.message});Ai.warn(t.message)}}}async function Xv(n,e){try{const r=(await bb()).transaction(Gc,"readwrite");await r.objectStore(Gc).put(e,Tb(n)),await r.done}catch(t){if(t instanceof Mi)Ai.warn(t.message);else{const r=ws.create("idb-set",{originalErrorMessage:t?.message});Ai.warn(r.message)}}}function Tb(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=1024,bC=30;class TC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new IC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Jv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>bC){const i=kC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ai.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Jv(),{heartbeatsToSend:t,unsentEntries:r}=SC(this._heartbeatsCache.heartbeats),i=mb(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Ai.warn(e),""}}}function Jv(){return new Date().toISOString().substring(0,10)}function SC(n,e=EC){const t=[];let r=n.slice();for(const i of n){const o=t.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),Zv(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Zv(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class IC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hP()?dP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await xC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Xv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Xv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Zv(n){return mb(JSON.stringify({version:2,heartbeats:n})).length}function kC(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(n){Xa(new Do("platform-logger",e=>new jP(e),"PRIVATE")),Xa(new Do("heartbeat",e=>new TC(e),"PRIVATE")),xs(dg,Kv,n),xs(dg,Kv,"esm2020"),xs("fire-js","")}PC("");function Sb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CC=Sb,Ib=new fu("auth","Firebase",Sb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd=new iy("@firebase/auth");function AC(n,...e){jd.logLevel<=Fe.WARN&&jd.warn(`Auth (${ll}): ${n}`,...e)}function Ed(n,...e){jd.logLevel<=Fe.ERROR&&jd.error(`Auth (${ll}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(n,...e){throw ay(n,...e)}function Kr(n,...e){return ay(n,...e)}function kb(n,e,t){const r={...CC(),[e]:t};return new fu("auth","Firebase",r).create(e,{appName:n.name})}function Pi(n){return kb(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ay(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Ib.create(n,...e)}function Pe(n,e,...t){if(!n)throw ay(e,...t)}function Ii(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ed(e),new Error(e)}function Ri(n,e){n||Ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(){return typeof self<"u"&&self.location?.href||""}function RC(){return ew()==="http:"||ew()==="https:"}function ew(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(RC()||aP()||"connection"in navigator)?navigator.onLine:!0}function OC(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ri(t>e,"Short delay should be less than long delay!"),this.isMobile=iP()||lP()}get(){return DC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(n,e){Ri(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],LC=new mu(3e4,6e4);function Ms(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ns(n,e,t,r,i={}){return Cb(n,i,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=pu({key:n.config.apiKey,...l}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:h,...o};return oP()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&al(n.emulatorConfig.host)&&(f.credentials="include"),Pb.fetch()(await Ab(n,n.config.apiHost,t,c),f)})}async function Cb(n,e,t){n._canInitEmulator=!1;const r={...MC,...e};try{const i=new FC(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Xh(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[h,f]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xh(n,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw Xh(n,"email-already-in-use",l);if(h==="USER_DISABLED")throw Xh(n,"user-disabled",l);const m=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw kb(n,m,f);Sr(n,m)}}catch(i){if(i instanceof Mi)throw i;Sr(n,"network-request-failed",{message:String(i)})}}async function gu(n,e,t,r,i={}){const o=await Ns(n,e,t,r,i);return"mfaPendingCredential"in o&&Sr(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function Ab(n,e,t,r){const i=`${e}${t}?${r}`,o=n,l=o.config.emulator?ly(n.config,i):`${n.config.apiScheme}://${i}`;return NC.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function VC(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class FC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Kr(this.auth,"network-request-failed")),LC.get())})}}function Xh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Kr(n,e,r);return i.customData._tokenResponse=t,i}function tw(n){return n!==void 0&&n.enterprise!==void 0}class jC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return VC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function UC(n,e){return Ns(n,"GET","/v2/recaptchaConfig",Ms(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zC(n,e){return Ns(n,"POST","/v1/accounts:delete",e)}async function Ud(n,e){return Ns(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function BC(n,e=!1){const t=Ht(n),r=await t.getIdToken(e),i=cy(r);Pe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o?.sign_in_provider;return{claims:i,token:r,authTime:Vc(Om(i.auth_time)),issuedAtTime:Vc(Om(i.iat)),expirationTime:Vc(Om(i.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Om(n){return Number(n)*1e3}function cy(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Ed("JWT malformed, contained fewer than 3 sections"),null;try{const i=gb(t);return i?JSON.parse(i):(Ed("Failed to decode base64 JWT payload"),null)}catch(i){return Ed("Caught error parsing JWT payload as JSON",i?.toString()),null}}function nw(n){const e=cy(n);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Mi&&WC(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function WC({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vc(this.lastLoginAt),this.creationTime=Vc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zd(n){const e=n.auth,t=await n.getIdToken(),r=await Kc(n,Ud(e,{idToken:t}));Pe(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const o=i.providerUserInfo?.length?Rb(i.providerUserInfo):[],l=qC(n.providerData,o),c=n.isAnonymous,h=!(n.email&&i.passwordHash)&&!l?.length,f=c?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new gg(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(n,m)}async function HC(n){const e=Ht(n);await zd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qC(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Rb(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YC(n,e){const t=await Cb(n,{},async()=>{const r=pu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,l=await Ab(n,i,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:c,body:r};return n.emulatorConfig&&al(n.emulatorConfig.host)&&(h.credentials="include"),Pb.fetch()(l,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function GC(n,e){return Ns(n,"POST","/v2/accounts:revokeToken",Ms(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const t=nw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await YC(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,l=new Ha;return r&&(Pe(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Pe(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),o&&(Pe(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ha,this.toJSON())}_performRefresh(){return Ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function os(n,e){Pe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Er{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new $C(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new gg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Kc(this,this.stsTokenManager.getToken(this.auth,e));return Pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return BC(this,e)}reload(){return HC(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Er({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await zd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rr(this.auth.app))return Promise.reject(Pi(this.auth));const e=await this.getIdToken();return await Kc(this,zC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,c=t.tenantId??void 0,h=t._redirectEventId??void 0,f=t.createdAt??void 0,m=t.lastLoginAt??void 0,{uid:y,emailVerified:w,isAnonymous:T,providerData:I,stsTokenManager:k}=t;Pe(y&&k,e,"internal-error");const b=Ha.fromJSON(this.name,k);Pe(typeof y=="string",e,"internal-error"),os(r,e.name),os(i,e.name),Pe(typeof w=="boolean",e,"internal-error"),Pe(typeof T=="boolean",e,"internal-error"),os(o,e.name),os(l,e.name),os(c,e.name),os(h,e.name),os(f,e.name),os(m,e.name);const N=new Er({uid:y,auth:e,email:i,emailVerified:w,displayName:r,isAnonymous:T,photoURL:l,phoneNumber:o,tenantId:c,stsTokenManager:b,createdAt:f,lastLoginAt:m});return I&&Array.isArray(I)&&(N.providerData=I.map(z=>({...z}))),h&&(N._redirectEventId=h),N}static async _fromIdTokenResponse(e,t,r=!1){const i=new Ha;i.updateFromServerResponse(t);const o=new Er({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await zd(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Pe(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?Rb(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!o?.length,c=new Ha;c.updateFromIdToken(r);const h=new Er({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:l}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new gg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw=new Map;function ki(n){Ri(n instanceof Function,"Expected a class definition");let e=rw.get(n);return e?(Ri(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,rw.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Db.type="NONE";const iw=Db;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(n,e,t){return`firebase:${n}:${e}:${t}`}class qa{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=bd(this.userKey,i.apiKey,o),this.fullPersistenceKey=bd("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ud(this.auth,{idToken:e}).catch(()=>{});return t?Er._fromGetAccountInfoResponse(this.auth,t,e):null}return Er._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new qa(ki(iw),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=i[0]||ki(iw);const l=bd(r,e.config.apiKey,e.name);let c=null;for(const f of t)try{const m=await f._get(l);if(m){let y;if(typeof m=="string"){const w=await Ud(e,{idToken:m}).catch(()=>{});if(!w)break;y=await Er._fromGetAccountInfoResponse(e,w,m)}else y=Er._fromJSON(e,m);f!==o&&(c=y),o=f;break}}catch{}const h=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new qa(o,e,r):(o=h[0],c&&await o._set(l,c.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new qa(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Lb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ob(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Fb(e))return"Blackberry";if(jb(e))return"Webos";if(Mb(e))return"Safari";if((e.includes("chrome/")||Nb(e))&&!e.includes("edge/"))return"Chrome";if(Vb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Ob(n=fn()){return/firefox\//i.test(n)}function Mb(n=fn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Nb(n=fn()){return/crios\//i.test(n)}function Lb(n=fn()){return/iemobile/i.test(n)}function Vb(n=fn()){return/android/i.test(n)}function Fb(n=fn()){return/blackberry/i.test(n)}function jb(n=fn()){return/webos/i.test(n)}function uy(n=fn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function KC(n=fn()){return uy(n)&&!!window.navigator?.standalone}function QC(){return cP()&&document.documentMode===10}function Ub(n=fn()){return uy(n)||Vb(n)||jb(n)||Fb(n)||/windows phone/i.test(n)||Lb(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(n,e=[]){let t;switch(n){case"Browser":t=sw(fn());break;case"Worker":t=`${sw(fn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ll}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,c)=>{try{const h=e(o);l(h)}catch(h){c(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JC(n,e={}){return Ns(n,"GET","/v2/passwordPolicy",Ms(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=6;class eA{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??ZC,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ow(this),this.idTokenSubscription=new ow(this),this.beforeStateQueue=new XC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ib,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ki(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await qa.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ud(this,{idToken:e}),r=await Er._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(rr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,l=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await zd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=OC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rr(this.app))return Promise.reject(Pi(this));const t=e?Ht(e):null;return t&&Pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rr(this.app)?Promise.reject(Pi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rr(this.app)?Promise.reject(Pi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ki(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JC(this),t=new eA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await GC(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ki(e)||this._popupRedirectResolver;Pe(t,this,"argument-error"),this.redirectPersistenceManager=await qa.create(this,[ki(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(rr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&AC(`Error while retrieving App Check token: ${e.error}`),e?.token}}function jo(n){return Ht(n)}class ow{constructor(e){this.auth=e,this.observer=null,this.addObserver=yP(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function nA(n){xf=n}function Bb(n){return xf.loadJS(n)}function rA(){return xf.recaptchaEnterpriseScript}function iA(){return xf.gapiScript}function sA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class oA{constructor(){this.enterprise=new aA}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class aA{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const lA="recaptcha-enterprise",Wb="NO_RECAPTCHA";class cA{constructor(e){this.type=lA,this.auth=jo(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{UC(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new jC(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(h=>{c(h)})})}function i(o,l,c){const h=window.grecaptcha;tw(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{l(f)}).catch(()=>{l(Wb)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new oA().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(c=>{if(!t&&tw(window.grecaptcha))i(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=rA();h.length!==0&&(h+=c),Bb(h).then(()=>{i(c,o,l)}).catch(f=>{l(f)})}}).catch(c=>{l(c)})})}}async function aw(n,e,t,r=!1,i=!1){const o=new cA(n);let l;if(i)l=Wb;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const h=c.phoneEnrollmentInfo.phoneNumber,f=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const h=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function yg(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await aw(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await aw(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(n,e){const t=oy(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(Ro(o,e??{}))return i;Sr(i,"already-initialized")}return t.initialize({options:e})}function hA(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ki);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function dA(n,e,t){const r=jo(n);Pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=$b(e),{host:l,port:c}=fA(e),h=c===null?"":`:${c}`,f={url:`${o}//${l}${h}/`},m=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Pe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Pe(Ro(f,r.config.emulator)&&Ro(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,al(l)?(vb(`${o}//${l}${h}`),rP("Auth",!0)):pA()}function $b(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function fA(n){const e=$b(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:lw(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:lw(l)}}}function lw(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function pA(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ii("not implemented")}_getIdTokenResponse(e){return Ii("not implemented")}_linkToIdToken(e,t){return Ii("not implemented")}_getReauthenticationResolver(e){return Ii("not implemented")}}async function mA(n,e){return Ns(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gA(n,e){return gu(n,"POST","/v1/accounts:signInWithPassword",Ms(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yA(n,e){return gu(n,"POST","/v1/accounts:signInWithEmailLink",Ms(n,e))}async function _A(n,e){return gu(n,"POST","/v1/accounts:signInWithEmailLink",Ms(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc extends hy{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Qc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Qc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yg(e,t,"signInWithPassword",gA);case"emailLink":return yA(e,{email:this._email,oobCode:this._password});default:Sr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yg(e,r,"signUpPassword",mA);case"emailLink":return _A(e,{idToken:t,email:this._email,oobCode:this._password});default:Sr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(n,e){return gu(n,"POST","/v1/accounts:signInWithIdp",Ms(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="http://localhost";class Oo extends hy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Oo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Sr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=t;if(!r||!i)return null;const l=new Oo(r,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Ya(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ya(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ya(e,t)}buildRequest(){const e={requestUri:vA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function xA(n){const e=Ic(kc(n)).link,t=e?Ic(kc(e)).deep_link_id:null,r=Ic(kc(n)).deep_link_id;return(r?Ic(kc(r)).link:null)||r||t||e||n}class dy{constructor(e){const t=Ic(kc(e)),r=t.apiKey??null,i=t.oobCode??null,o=wA(t.mode??null);Pe(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=xA(e);try{return new dy(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(){this.providerId=cl.PROVIDER_ID}static credential(e,t){return Qc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=dy.parseLink(t);return Pe(r,"argument-error"),Qc._fromEmailAndCode(e,r.code,r.tenantId)}}cl.PROVIDER_ID="password";cl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";cl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu extends Hb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends yu{constructor(){super("facebook.com")}static credential(e){return Oo._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hs.credential(e.oauthAccessToken)}catch{return null}}}hs.FACEBOOK_SIGN_IN_METHOD="facebook.com";hs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends yu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Oo._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ds.credential(t,r)}catch{return null}}}ds.GOOGLE_SIGN_IN_METHOD="google.com";ds.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends yu{constructor(){super("github.com")}static credential(e){return Oo._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.GITHUB_SIGN_IN_METHOD="github.com";fs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends yu{constructor(){super("twitter.com")}static credential(e,t){return Oo._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ps.credential(t,r)}catch{return null}}}ps.TWITTER_SIGN_IN_METHOD="twitter.com";ps.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EA(n,e){return gu(n,"POST","/v1/accounts:signUp",Ms(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await Er._fromIdTokenResponse(e,r,i),l=cw(r);return new Mo({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=cw(r);return new Mo({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function cw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd extends Mi{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Bd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Bd(e,t,r,i)}}function qb(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Bd._fromErrorAndOperation(n,o,e,r):o})}async function bA(n,e,t=!1){const r=await Kc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Mo._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TA(n,e,t=!1){const{auth:r}=n;if(rr(r.app))return Promise.reject(Pi(r));const i="reauthenticate";try{const o=await Kc(n,qb(r,i,e,n),t);Pe(o.idToken,r,"internal-error");const l=cy(o.idToken);Pe(l,r,"internal-error");const{sub:c}=l;return Pe(n.uid===c,r,"user-mismatch"),Mo._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Sr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yb(n,e,t=!1){if(rr(n.app))return Promise.reject(Pi(n));const r="signIn",i=await qb(n,r,e),o=await Mo._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function SA(n,e){return Yb(jo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gb(n){const e=jo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function IA(n,e,t){if(rr(n.app))return Promise.reject(Pi(n));const r=jo(n),l=await yg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",EA).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&Gb(n),h}),c=await Mo._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(c.user),c}function Kb(n,e,t){return rr(n.app)?Promise.reject(Pi(n)):SA(Ht(n),cl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Gb(n),r})}function kA(n,e,t,r){return Ht(n).onIdTokenChanged(e,t,r)}function PA(n,e,t){return Ht(n).beforeAuthStateChanged(e,t)}function Qb(n,e,t,r){return Ht(n).onAuthStateChanged(e,t,r)}function CA(n){return Ht(n).signOut()}const Wd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Wd,"1"),this.storage.removeItem(Wd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA=1e3,RA=10;class Jb extends Xb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ub(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);QC()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,RA):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},AA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Jb.type="LOCAL";const DA=Jb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb extends Xb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Zb.type="SESSION";const eT=Zb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Ef(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,l=this.handlersMap[i];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(l).map(async f=>f(t.origin,o)),h=await OA(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ef.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((c,h)=>{const f=fy("",20);i.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(y){const w=y;if(w.data.eventId===f)switch(w.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(w.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(){return window}function NA(n){Qr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(){return typeof Qr().WorkerGlobalScope<"u"&&typeof Qr().importScripts=="function"}async function LA(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VA(){return navigator?.serviceWorker?.controller||null}function FA(){return tT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="firebaseLocalStorageDb",jA=1,$d="firebaseLocalStorage",rT="fbase_key";class _u{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function bf(n,e){return n.transaction([$d],e?"readwrite":"readonly").objectStore($d)}function UA(){const n=indexedDB.deleteDatabase(nT);return new _u(n).toPromise()}function _g(){const n=indexedDB.open(nT,jA);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore($d,{keyPath:rT})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains($d)?e(r):(r.close(),await UA(),e(await _g()))})})}async function uw(n,e,t){const r=bf(n,!0).put({[rT]:e,value:t});return new _u(r).toPromise()}async function zA(n,e){const t=bf(n,!1).get(e),r=await new _u(t).toPromise();return r===void 0?null:r.value}function hw(n,e){const t=bf(n,!0).delete(e);return new _u(t).toPromise()}const BA=800,WA=3;class iT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _g(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>WA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ef._getInstance(FA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await LA(),!this.activeServiceWorker)return;this.sender=new MA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||VA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _g();return await uw(e,Wd,"1"),await hw(e,Wd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>uw(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>zA(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>hw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=bf(i,!1).getAll();return new _u(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iT.type="LOCAL";const $A=iT;new mu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(n,e){return e?ki(e):(Pe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py extends hy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ya(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ya(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ya(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function qA(n){return Yb(n.auth,new py(n),n.bypassAuthState)}function YA(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),TA(t,new py(n),n.bypassAuthState)}async function GA(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),bA(t,new py(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qA;case"linkViaPopup":case"linkViaRedirect":return GA;case"reauthViaPopup":case"reauthViaRedirect":return YA;default:Sr(this.auth,"internal-error")}}resolve(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=new mu(2e3,1e4);class $a extends sT{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,$a.currentPopupAction&&$a.currentPopupAction.cancel(),$a.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){Ri(this.filter.length===1,"Popup operations only handle one event");const e=fy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Kr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Kr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$a.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,KA.get())};e()}}$a.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA="pendingRedirect",Td=new Map;class XA extends sT{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Td.get(this.auth._key());if(!e){try{const r=await JA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Td.set(this.auth._key(),e)}return this.bypassAuthState||Td.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function JA(n,e){const t=tR(e),r=eR(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function ZA(n,e){Td.set(n._key(),e)}function eR(n){return ki(n._redirectPersistence)}function tR(n){return bd(QA,n.config.apiKey,n.name)}async function nR(n,e,t=!1){if(rr(n.app))return Promise.reject(Pi(n));const r=jo(n),i=HA(r,e),l=await new XA(r,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=600*1e3;class iR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!oT(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Kr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rR&&this.cachedEventUids.clear(),this.cachedEventUids.has(dw(e))}saveEventToCache(e){this.cachedEventUids.add(dw(e)),this.lastProcessedEventTime=Date.now()}}function dw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function oT({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function sR(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oT(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oR(n,e={}){return Ns(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lR=/^https?/;async function cR(n){if(n.config.emulator)return;const{authorizedDomains:e}=await oR(n);for(const t of e)try{if(uR(t))return}catch{}Sr(n,"unauthorized-domain")}function uR(n){const e=mg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!lR.test(t))return!1;if(aR.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=new mu(3e4,6e4);function fw(){const n=Qr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function dR(n){return new Promise((e,t)=>{function r(){fw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fw(),t(Kr(n,"network-request-failed"))},timeout:hR.get()})}if(Qr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Qr().gapi?.load)r();else{const i=sA("iframefcb");return Qr()[i]=()=>{gapi.load?r():t(Kr(n,"network-request-failed"))},Bb(`${iA()}?onload=${i}`).catch(o=>t(o))}}).catch(e=>{throw Sd=null,e})}let Sd=null;function fR(n){return Sd=Sd||dR(n),Sd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=new mu(5e3,15e3),mR="__/auth/iframe",gR="emulator/auth/iframe",yR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_R=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vR(n){const e=n.config;Pe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ly(e,gR):`https://${n.config.authDomain}/${mR}`,r={apiKey:e.apiKey,appName:n.name,v:ll},i=_R.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${pu(r).slice(1)}`}async function wR(n){const e=await fR(n),t=Qr().gapi;return Pe(t,n,"internal-error"),e.open({where:document.body,url:vR(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yR,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const l=Kr(n,"network-request-failed"),c=Qr().setTimeout(()=>{o(l)},pR.get());function h(){Qr().clearTimeout(c),i(r)}r.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ER=500,bR=600,TR="_blank",SR="http://localhost";class pw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function IR(n,e,t,r=ER,i=bR){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const h={...xR,width:r.toString(),height:i.toString(),top:o,left:l},f=fn().toLowerCase();t&&(c=Nb(f)?TR:t),Ob(f)&&(e=e||SR,h.scrollbars="yes");const m=Object.entries(h).reduce((w,[T,I])=>`${w}${T}=${I},`,"");if(KC(f)&&c!=="_self")return kR(e||"",c),new pw(null);const y=window.open(e||"",c,m);Pe(y,n,"popup-blocked");try{y.focus()}catch{}return new pw(y)}function kR(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR="__/auth/handler",CR="emulator/auth/handler",AR=encodeURIComponent("fac");async function mw(n,e,t,r,i,o){Pe(n.config.authDomain,n,"auth-domain-config-required"),Pe(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ll,eventId:i};if(e instanceof Hb){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",gP(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,y]of Object.entries({}))l[m]=y}if(e instanceof yu){const m=e.getScopes().filter(y=>y!=="");m.length>0&&(l.scopes=m.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const h=await n._getAppCheckToken(),f=h?`#${AR}=${encodeURIComponent(h)}`:"";return`${RR(n)}?${pu(c).slice(1)}${f}`}function RR({config:n}){return n.emulator?ly(n,CR):`https://${n.authDomain}/${PR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="webStorageSupport";class DR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eT,this._completeRedirectFn=nR,this._overrideRedirectResult=ZA}async _openPopup(e,t,r,i){Ri(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await mw(e,t,r,mg(),i);return IR(e,o,fy())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await mw(e,t,r,mg(),i);return NA(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Ri(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await wR(e),r=new iR(e);return t.register("authEvent",i=>(Pe(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Mm,{type:Mm},i=>{const o=i?.[0]?.[Mm];o!==void 0&&t(!!o),Sr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=cR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ub()||Mb()||uy()}}const OR=DR;var gw="@firebase/auth",yw="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LR(n){Xa(new Do("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;Pe(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zb(n)},f=new tA(r,i,o,h);return hA(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Xa(new Do("auth-internal",e=>{const t=jo(e.getProvider("auth").getImmediate());return(r=>new MR(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xs(gw,yw,NR(n)),xs(gw,yw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=300,FR=_b("authIdTokenMaxAge")||VR;let _w=null;const jR=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>FR)return;const i=t?.token;_w!==i&&(_w=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function my(n=_C()){const e=oy(n,"auth");if(e.isInitialized())return e.getImmediate();const t=uA(n,{popupRedirectResolver:OR,persistence:[$A,DA,eT]}),r=_b("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=jR(o.toString());PA(t,l,()=>l(t.currentUser)),kA(t,c=>l(c))}}const i=Zk("auth");return i&&dA(t,`http://${i}`),t}function UR(){return document.getElementsByTagName("head")?.[0]??document}nA({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=Kr("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",UR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LR("Browser");var zR="firebase",BR="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xs(zR,BR,"app");var vw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Es,aT;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,P){function A(){}A.prototype=P.prototype,D.D=P.prototype,D.prototype=new A,D.prototype.constructor=D,D.C=function(V,L,j){for(var O=Array(arguments.length-2),se=2;se<arguments.length;se++)O[se-2]=arguments[se];return P.prototype[L].apply(V,O)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,P,A){A||(A=0);var V=Array(16);if(typeof P=="string")for(var L=0;16>L;++L)V[L]=P.charCodeAt(A++)|P.charCodeAt(A++)<<8|P.charCodeAt(A++)<<16|P.charCodeAt(A++)<<24;else for(L=0;16>L;++L)V[L]=P[A++]|P[A++]<<8|P[A++]<<16|P[A++]<<24;P=D.g[0],A=D.g[1],L=D.g[2];var j=D.g[3],O=P+(j^A&(L^j))+V[0]+3614090360&4294967295;P=A+(O<<7&4294967295|O>>>25),O=j+(L^P&(A^L))+V[1]+3905402710&4294967295,j=P+(O<<12&4294967295|O>>>20),O=L+(A^j&(P^A))+V[2]+606105819&4294967295,L=j+(O<<17&4294967295|O>>>15),O=A+(P^L&(j^P))+V[3]+3250441966&4294967295,A=L+(O<<22&4294967295|O>>>10),O=P+(j^A&(L^j))+V[4]+4118548399&4294967295,P=A+(O<<7&4294967295|O>>>25),O=j+(L^P&(A^L))+V[5]+1200080426&4294967295,j=P+(O<<12&4294967295|O>>>20),O=L+(A^j&(P^A))+V[6]+2821735955&4294967295,L=j+(O<<17&4294967295|O>>>15),O=A+(P^L&(j^P))+V[7]+4249261313&4294967295,A=L+(O<<22&4294967295|O>>>10),O=P+(j^A&(L^j))+V[8]+1770035416&4294967295,P=A+(O<<7&4294967295|O>>>25),O=j+(L^P&(A^L))+V[9]+2336552879&4294967295,j=P+(O<<12&4294967295|O>>>20),O=L+(A^j&(P^A))+V[10]+4294925233&4294967295,L=j+(O<<17&4294967295|O>>>15),O=A+(P^L&(j^P))+V[11]+2304563134&4294967295,A=L+(O<<22&4294967295|O>>>10),O=P+(j^A&(L^j))+V[12]+1804603682&4294967295,P=A+(O<<7&4294967295|O>>>25),O=j+(L^P&(A^L))+V[13]+4254626195&4294967295,j=P+(O<<12&4294967295|O>>>20),O=L+(A^j&(P^A))+V[14]+2792965006&4294967295,L=j+(O<<17&4294967295|O>>>15),O=A+(P^L&(j^P))+V[15]+1236535329&4294967295,A=L+(O<<22&4294967295|O>>>10),O=P+(L^j&(A^L))+V[1]+4129170786&4294967295,P=A+(O<<5&4294967295|O>>>27),O=j+(A^L&(P^A))+V[6]+3225465664&4294967295,j=P+(O<<9&4294967295|O>>>23),O=L+(P^A&(j^P))+V[11]+643717713&4294967295,L=j+(O<<14&4294967295|O>>>18),O=A+(j^P&(L^j))+V[0]+3921069994&4294967295,A=L+(O<<20&4294967295|O>>>12),O=P+(L^j&(A^L))+V[5]+3593408605&4294967295,P=A+(O<<5&4294967295|O>>>27),O=j+(A^L&(P^A))+V[10]+38016083&4294967295,j=P+(O<<9&4294967295|O>>>23),O=L+(P^A&(j^P))+V[15]+3634488961&4294967295,L=j+(O<<14&4294967295|O>>>18),O=A+(j^P&(L^j))+V[4]+3889429448&4294967295,A=L+(O<<20&4294967295|O>>>12),O=P+(L^j&(A^L))+V[9]+568446438&4294967295,P=A+(O<<5&4294967295|O>>>27),O=j+(A^L&(P^A))+V[14]+3275163606&4294967295,j=P+(O<<9&4294967295|O>>>23),O=L+(P^A&(j^P))+V[3]+4107603335&4294967295,L=j+(O<<14&4294967295|O>>>18),O=A+(j^P&(L^j))+V[8]+1163531501&4294967295,A=L+(O<<20&4294967295|O>>>12),O=P+(L^j&(A^L))+V[13]+2850285829&4294967295,P=A+(O<<5&4294967295|O>>>27),O=j+(A^L&(P^A))+V[2]+4243563512&4294967295,j=P+(O<<9&4294967295|O>>>23),O=L+(P^A&(j^P))+V[7]+1735328473&4294967295,L=j+(O<<14&4294967295|O>>>18),O=A+(j^P&(L^j))+V[12]+2368359562&4294967295,A=L+(O<<20&4294967295|O>>>12),O=P+(A^L^j)+V[5]+4294588738&4294967295,P=A+(O<<4&4294967295|O>>>28),O=j+(P^A^L)+V[8]+2272392833&4294967295,j=P+(O<<11&4294967295|O>>>21),O=L+(j^P^A)+V[11]+1839030562&4294967295,L=j+(O<<16&4294967295|O>>>16),O=A+(L^j^P)+V[14]+4259657740&4294967295,A=L+(O<<23&4294967295|O>>>9),O=P+(A^L^j)+V[1]+2763975236&4294967295,P=A+(O<<4&4294967295|O>>>28),O=j+(P^A^L)+V[4]+1272893353&4294967295,j=P+(O<<11&4294967295|O>>>21),O=L+(j^P^A)+V[7]+4139469664&4294967295,L=j+(O<<16&4294967295|O>>>16),O=A+(L^j^P)+V[10]+3200236656&4294967295,A=L+(O<<23&4294967295|O>>>9),O=P+(A^L^j)+V[13]+681279174&4294967295,P=A+(O<<4&4294967295|O>>>28),O=j+(P^A^L)+V[0]+3936430074&4294967295,j=P+(O<<11&4294967295|O>>>21),O=L+(j^P^A)+V[3]+3572445317&4294967295,L=j+(O<<16&4294967295|O>>>16),O=A+(L^j^P)+V[6]+76029189&4294967295,A=L+(O<<23&4294967295|O>>>9),O=P+(A^L^j)+V[9]+3654602809&4294967295,P=A+(O<<4&4294967295|O>>>28),O=j+(P^A^L)+V[12]+3873151461&4294967295,j=P+(O<<11&4294967295|O>>>21),O=L+(j^P^A)+V[15]+530742520&4294967295,L=j+(O<<16&4294967295|O>>>16),O=A+(L^j^P)+V[2]+3299628645&4294967295,A=L+(O<<23&4294967295|O>>>9),O=P+(L^(A|~j))+V[0]+4096336452&4294967295,P=A+(O<<6&4294967295|O>>>26),O=j+(A^(P|~L))+V[7]+1126891415&4294967295,j=P+(O<<10&4294967295|O>>>22),O=L+(P^(j|~A))+V[14]+2878612391&4294967295,L=j+(O<<15&4294967295|O>>>17),O=A+(j^(L|~P))+V[5]+4237533241&4294967295,A=L+(O<<21&4294967295|O>>>11),O=P+(L^(A|~j))+V[12]+1700485571&4294967295,P=A+(O<<6&4294967295|O>>>26),O=j+(A^(P|~L))+V[3]+2399980690&4294967295,j=P+(O<<10&4294967295|O>>>22),O=L+(P^(j|~A))+V[10]+4293915773&4294967295,L=j+(O<<15&4294967295|O>>>17),O=A+(j^(L|~P))+V[1]+2240044497&4294967295,A=L+(O<<21&4294967295|O>>>11),O=P+(L^(A|~j))+V[8]+1873313359&4294967295,P=A+(O<<6&4294967295|O>>>26),O=j+(A^(P|~L))+V[15]+4264355552&4294967295,j=P+(O<<10&4294967295|O>>>22),O=L+(P^(j|~A))+V[6]+2734768916&4294967295,L=j+(O<<15&4294967295|O>>>17),O=A+(j^(L|~P))+V[13]+1309151649&4294967295,A=L+(O<<21&4294967295|O>>>11),O=P+(L^(A|~j))+V[4]+4149444226&4294967295,P=A+(O<<6&4294967295|O>>>26),O=j+(A^(P|~L))+V[11]+3174756917&4294967295,j=P+(O<<10&4294967295|O>>>22),O=L+(P^(j|~A))+V[2]+718787259&4294967295,L=j+(O<<15&4294967295|O>>>17),O=A+(j^(L|~P))+V[9]+3951481745&4294967295,D.g[0]=D.g[0]+P&4294967295,D.g[1]=D.g[1]+(L+(O<<21&4294967295|O>>>11))&4294967295,D.g[2]=D.g[2]+L&4294967295,D.g[3]=D.g[3]+j&4294967295}r.prototype.u=function(D,P){P===void 0&&(P=D.length);for(var A=P-this.blockSize,V=this.B,L=this.h,j=0;j<P;){if(L==0)for(;j<=A;)i(this,D,j),j+=this.blockSize;if(typeof D=="string"){for(;j<P;)if(V[L++]=D.charCodeAt(j++),L==this.blockSize){i(this,V),L=0;break}}else for(;j<P;)if(V[L++]=D[j++],L==this.blockSize){i(this,V),L=0;break}}this.h=L,this.o+=P},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var P=1;P<D.length-8;++P)D[P]=0;var A=8*this.o;for(P=D.length-8;P<D.length;++P)D[P]=A&255,A/=256;for(this.u(D),D=Array(16),P=A=0;4>P;++P)for(var V=0;32>V;V+=8)D[A++]=this.g[P]>>>V&255;return D};function o(D,P){var A=c;return Object.prototype.hasOwnProperty.call(A,D)?A[D]:A[D]=P(D)}function l(D,P){this.h=P;for(var A=[],V=!0,L=D.length-1;0<=L;L--){var j=D[L]|0;V&&j==P||(A[L]=j,V=!1)}this.g=A}var c={};function h(D){return-128<=D&&128>D?o(D,function(P){return new l([P|0],0>P?-1:0)}):new l([D|0],0>D?-1:0)}function f(D){if(isNaN(D)||!isFinite(D))return y;if(0>D)return b(f(-D));for(var P=[],A=1,V=0;D>=A;V++)P[V]=D/A|0,A*=4294967296;return new l(P,0)}function m(D,P){if(D.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(D.charAt(0)=="-")return b(m(D.substring(1),P));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=f(Math.pow(P,8)),V=y,L=0;L<D.length;L+=8){var j=Math.min(8,D.length-L),O=parseInt(D.substring(L,L+j),P);8>j?(j=f(Math.pow(P,j)),V=V.j(j).add(f(O))):(V=V.j(A),V=V.add(f(O)))}return V}var y=h(0),w=h(1),T=h(16777216);n=l.prototype,n.m=function(){if(k(this))return-b(this).m();for(var D=0,P=1,A=0;A<this.g.length;A++){var V=this.i(A);D+=(0<=V?V:4294967296+V)*P,P*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(I(this))return"0";if(k(this))return"-"+b(this).toString(D);for(var P=f(Math.pow(D,6)),A=this,V="";;){var L=te(A,P).g;A=N(A,L.j(P));var j=((0<A.g.length?A.g[0]:A.h)>>>0).toString(D);if(A=L,I(A))return j+V;for(;6>j.length;)j="0"+j;V=j+V}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function I(D){if(D.h!=0)return!1;for(var P=0;P<D.g.length;P++)if(D.g[P]!=0)return!1;return!0}function k(D){return D.h==-1}n.l=function(D){return D=N(this,D),k(D)?-1:I(D)?0:1};function b(D){for(var P=D.g.length,A=[],V=0;V<P;V++)A[V]=~D.g[V];return new l(A,~D.h).add(w)}n.abs=function(){return k(this)?b(this):this},n.add=function(D){for(var P=Math.max(this.g.length,D.g.length),A=[],V=0,L=0;L<=P;L++){var j=V+(this.i(L)&65535)+(D.i(L)&65535),O=(j>>>16)+(this.i(L)>>>16)+(D.i(L)>>>16);V=O>>>16,j&=65535,O&=65535,A[L]=O<<16|j}return new l(A,A[A.length-1]&-2147483648?-1:0)};function N(D,P){return D.add(b(P))}n.j=function(D){if(I(this)||I(D))return y;if(k(this))return k(D)?b(this).j(b(D)):b(b(this).j(D));if(k(D))return b(this.j(b(D)));if(0>this.l(T)&&0>D.l(T))return f(this.m()*D.m());for(var P=this.g.length+D.g.length,A=[],V=0;V<2*P;V++)A[V]=0;for(V=0;V<this.g.length;V++)for(var L=0;L<D.g.length;L++){var j=this.i(V)>>>16,O=this.i(V)&65535,se=D.i(L)>>>16,fe=D.i(L)&65535;A[2*V+2*L]+=O*fe,z(A,2*V+2*L),A[2*V+2*L+1]+=j*fe,z(A,2*V+2*L+1),A[2*V+2*L+1]+=O*se,z(A,2*V+2*L+1),A[2*V+2*L+2]+=j*se,z(A,2*V+2*L+2)}for(V=0;V<P;V++)A[V]=A[2*V+1]<<16|A[2*V];for(V=P;V<2*P;V++)A[V]=0;return new l(A,0)};function z(D,P){for(;(D[P]&65535)!=D[P];)D[P+1]+=D[P]>>>16,D[P]&=65535,P++}function $(D,P){this.g=D,this.h=P}function te(D,P){if(I(P))throw Error("division by zero");if(I(D))return new $(y,y);if(k(D))return P=te(b(D),P),new $(b(P.g),b(P.h));if(k(P))return P=te(D,b(P)),new $(b(P.g),P.h);if(30<D.g.length){if(k(D)||k(P))throw Error("slowDivide_ only works with positive integers.");for(var A=w,V=P;0>=V.l(D);)A=Q(A),V=Q(V);var L=ie(A,1),j=ie(V,1);for(V=ie(V,2),A=ie(A,2);!I(V);){var O=j.add(V);0>=O.l(D)&&(L=L.add(A),j=O),V=ie(V,1),A=ie(A,1)}return P=N(D,L.j(P)),new $(L,P)}for(L=y;0<=D.l(P);){for(A=Math.max(1,Math.floor(D.m()/P.m())),V=Math.ceil(Math.log(A)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),j=f(A),O=j.j(P);k(O)||0<O.l(D);)A-=V,j=f(A),O=j.j(P);I(j)&&(j=w),L=L.add(j),D=N(D,O)}return new $(L,D)}n.A=function(D){return te(this,D).h},n.and=function(D){for(var P=Math.max(this.g.length,D.g.length),A=[],V=0;V<P;V++)A[V]=this.i(V)&D.i(V);return new l(A,this.h&D.h)},n.or=function(D){for(var P=Math.max(this.g.length,D.g.length),A=[],V=0;V<P;V++)A[V]=this.i(V)|D.i(V);return new l(A,this.h|D.h)},n.xor=function(D){for(var P=Math.max(this.g.length,D.g.length),A=[],V=0;V<P;V++)A[V]=this.i(V)^D.i(V);return new l(A,this.h^D.h)};function Q(D){for(var P=D.g.length+1,A=[],V=0;V<P;V++)A[V]=D.i(V)<<1|D.i(V-1)>>>31;return new l(A,D.h)}function ie(D,P){var A=P>>5;P%=32;for(var V=D.g.length-A,L=[],j=0;j<V;j++)L[j]=0<P?D.i(j+A)>>>P|D.i(j+A+1)<<32-P:D.i(j+A);return new l(L,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,aT=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=m,Es=l}).apply(typeof vw<"u"?vw:typeof self<"u"?self:typeof window<"u"?window:{});var Jh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lT,Pc,cT,Id,vg,uT,hT,dT;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,_,E){return d==Array.prototype||d==Object.prototype||(d[_]=E.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jh=="object"&&Jh];for(var _=0;_<d.length;++_){var E=d[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function i(d,_){if(_)e:{var E=r;d=d.split(".");for(var C=0;C<d.length-1;C++){var H=d[C];if(!(H in E))break e;E=E[H]}d=d[d.length-1],C=E[d],_=_(C),_!=C&&_!=null&&e(E,d,{configurable:!0,writable:!0,value:_})}}function o(d,_){d instanceof String&&(d+="");var E=0,C=!1,H={next:function(){if(!C&&E<d.length){var Z=E++;return{value:_(Z,d[Z]),done:!1}}return C=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}i("Array.prototype.values",function(d){return d||function(){return o(this,function(_,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function h(d){var _=typeof d;return _=_!="object"?_:d?Array.isArray(d)?"array":_:"null",_=="array"||_=="object"&&typeof d.length=="number"}function f(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function m(d,_,E){return d.call.apply(d.bind,arguments)}function y(d,_,E){if(!d)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,C),d.apply(_,H)}}return function(){return d.apply(_,arguments)}}function w(d,_,E){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:y,w.apply(null,arguments)}function T(d,_){var E=Array.prototype.slice.call(arguments,1);return function(){var C=E.slice();return C.push.apply(C,arguments),d.apply(this,C)}}function I(d,_){function E(){}E.prototype=_.prototype,d.aa=_.prototype,d.prototype=new E,d.prototype.constructor=d,d.Qb=function(C,H,Z){for(var pe=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)pe[Qe-2]=arguments[Qe];return _.prototype[H].apply(C,pe)}}function k(d){const _=d.length;if(0<_){const E=Array(_);for(let C=0;C<_;C++)E[C]=d[C];return E}return[]}function b(d,_){for(let E=1;E<arguments.length;E++){const C=arguments[E];if(h(C)){const H=d.length||0,Z=C.length||0;d.length=H+Z;for(let pe=0;pe<Z;pe++)d[H+pe]=C[pe]}else d.push(C)}}class N{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function z(d){return/^[\s\xa0]*$/.test(d)}function $(){var d=c.navigator;return d&&(d=d.userAgent)?d:""}function te(d){return te[" "](d),d}te[" "]=function(){};var Q=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function ie(d,_,E){for(const C in d)_.call(E,d[C],C,d)}function D(d,_){for(const E in d)_.call(void 0,d[E],E,d)}function P(d){const _={};for(const E in d)_[E]=d[E];return _}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(d,_){let E,C;for(let H=1;H<arguments.length;H++){C=arguments[H];for(E in C)d[E]=C[E];for(let Z=0;Z<A.length;Z++)E=A[Z],Object.prototype.hasOwnProperty.call(C,E)&&(d[E]=C[E])}}function L(d){var _=1;d=d.split(":");const E=[];for(;0<_&&d.length;)E.push(d.shift()),_--;return d.length&&E.push(d.join(":")),E}function j(d){c.setTimeout(()=>{throw d},0)}function O(){var d=J;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class se{constructor(){this.h=this.g=null}add(_,E){const C=fe.get();C.set(_,E),this.h?this.h.next=C:this.g=C,this.h=C}}var fe=new N(()=>new Se,d=>d.reset());class Se{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let re,ae=!1,J=new se,R=()=>{const d=c.Promise.resolve(void 0);re=()=>{d.then(F)}};var F=()=>{for(var d;d=O();){try{d.h.call(d.g)}catch(E){j(E)}var _=fe;_.j(d),100>_.h&&(_.h++,d.next=_.g,_.g=d)}ae=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var he=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};c.addEventListener("test",E,_),c.removeEventListener("test",E,_)}catch{}return d}();function ge(d,_){if(K.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var E=this.type=d.type,C=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget){if(Q){e:{try{te(_.nodeName);var H=!0;break e}catch{}H=!1}H||(_=null)}}else E=="mouseover"?_=d.fromElement:E=="mouseout"&&(_=d.toElement);this.relatedTarget=_,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Ee[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&ge.aa.h.call(this)}}I(ge,K);var Ee={2:"touch",3:"pen",4:"mouse"};ge.prototype.h=function(){ge.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ae="closure_listenable_"+(1e6*Math.random()|0),Ne=0;function et(d,_,E,C,H){this.listener=d,this.proxy=null,this.src=_,this.type=E,this.capture=!!C,this.ha=H,this.key=++Ne,this.da=this.fa=!1}function Dt(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function tn(d){this.src=d,this.g={},this.h=0}tn.prototype.add=function(d,_,E,C,H){var Z=d.toString();d=this.g[Z],d||(d=this.g[Z]=[],this.h++);var pe=Ni(d,_,C,H);return-1<pe?(_=d[pe],E||(_.fa=!1)):(_=new et(_,this.src,Z,!!C,H),_.fa=E,d.push(_)),_};function nn(d,_){var E=_.type;if(E in d.g){var C=d.g[E],H=Array.prototype.indexOf.call(C,_,void 0),Z;(Z=0<=H)&&Array.prototype.splice.call(C,H,1),Z&&(Dt(_),d.g[E].length==0&&(delete d.g[E],d.h--))}}function Ni(d,_,E,C){for(var H=0;H<d.length;++H){var Z=d[H];if(!Z.da&&Z.listener==_&&Z.capture==!!E&&Z.ha==C)return H}return-1}var zs="closure_lm_"+(1e6*Math.random()|0),qo={};function xl(d,_,E,C,H){if(Array.isArray(_)){for(var Z=0;Z<_.length;Z++)xl(d,_[Z],E,C,H);return null}return E=Tl(E),d&&d[Ae]?d.K(_,E,f(C)?!!C.capture:!1,H):El(d,_,E,!1,C,H)}function El(d,_,E,C,H,Z){if(!_)throw Error("Invalid event type");var pe=f(H)?!!H.capture:!!H,Qe=Go(d);if(Qe||(d[zs]=Qe=new tn(d)),E=Qe.add(_,E,C,pe,Z),E.proxy)return E;if(C=Lu(),E.proxy=C,C.src=d,C.listener=E,d.addEventListener)he||(H=pe),H===void 0&&(H=!1),d.addEventListener(_.toString(),C,H);else if(d.attachEvent)d.attachEvent(oi(_.toString()),C);else if(d.addListener&&d.removeListener)d.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Lu(){function d(E){return _.call(d.src,d.listener,E)}const _=bl;return d}function Yo(d,_,E,C,H){if(Array.isArray(_))for(var Z=0;Z<_.length;Z++)Yo(d,_[Z],E,C,H);else C=f(C)?!!C.capture:!!C,E=Tl(E),d&&d[Ae]?(d=d.i,_=String(_).toString(),_ in d.g&&(Z=d.g[_],E=Ni(Z,E,C,H),-1<E&&(Dt(Z[E]),Array.prototype.splice.call(Z,E,1),Z.length==0&&(delete d.g[_],d.h--)))):d&&(d=Go(d))&&(_=d.g[_.toString()],d=-1,_&&(d=Ni(_,E,C,H)),(E=-1<d?_[d]:null)&&si(E))}function si(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[Ae])nn(_.i,d);else{var E=d.type,C=d.proxy;_.removeEventListener?_.removeEventListener(E,C,d.capture):_.detachEvent?_.detachEvent(oi(E),C):_.addListener&&_.removeListener&&_.removeListener(C),(E=Go(_))?(nn(E,d),E.h==0&&(E.src=null,_[zs]=null)):Dt(d)}}}function oi(d){return d in qo?qo[d]:qo[d]="on"+d}function bl(d,_){if(d.da)d=!0;else{_=new ge(_,this);var E=d.listener,C=d.ha||d.src;d.fa&&si(d),d=E.call(C,_)}return d}function Go(d){return d=d[zs],d instanceof tn?d:null}var Ko="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tl(d){return typeof d=="function"?d:(d[Ko]||(d[Ko]=function(_){return d.handleEvent(_)}),d[Ko])}function Ot(){q.call(this),this.i=new tn(this),this.M=this,this.F=null}I(Ot,q),Ot.prototype[Ae]=!0,Ot.prototype.removeEventListener=function(d,_,E,C){Yo(this,d,_,E,C)};function Mt(d,_){var E,C=d.F;if(C)for(E=[];C;C=C.F)E.push(C);if(d=d.M,C=_.type||_,typeof _=="string")_=new K(_,d);else if(_ instanceof K)_.target=_.target||d;else{var H=_;_=new K(C,d),V(_,H)}if(H=!0,E)for(var Z=E.length-1;0<=Z;Z--){var pe=_.g=E[Z];H=ai(pe,C,!0,_)&&H}if(pe=_.g=d,H=ai(pe,C,!0,_)&&H,H=ai(pe,C,!1,_)&&H,E)for(Z=0;Z<E.length;Z++)pe=_.g=E[Z],H=ai(pe,C,!1,_)&&H}Ot.prototype.N=function(){if(Ot.aa.N.call(this),this.i){var d=this.i,_;for(_ in d.g){for(var E=d.g[_],C=0;C<E.length;C++)Dt(E[C]);delete d.g[_],d.h--}}this.F=null},Ot.prototype.K=function(d,_,E,C){return this.i.add(String(d),_,!1,E,C)},Ot.prototype.L=function(d,_,E,C){return this.i.add(String(d),_,!0,E,C)};function ai(d,_,E,C){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();for(var H=!0,Z=0;Z<_.length;++Z){var pe=_[Z];if(pe&&!pe.da&&pe.capture==E){var Qe=pe.listener,Nt=pe.ha||pe.src;pe.fa&&nn(d.i,pe),H=Qe.call(Nt,C)!==!1&&H}}return H&&!C.defaultPrevented}function Sl(d,_,E){if(typeof d=="function")E&&(d=w(d,E));else if(d&&typeof d.handleEvent=="function")d=w(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:c.setTimeout(d,_||0)}function Li(d){d.g=Sl(()=>{d.g=null,d.i&&(d.i=!1,Li(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class Bs extends q{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Li(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ws(d){q.call(this),this.h=d,this.g={}}I(Ws,q);var Il=[];function kl(d){ie(d.g,function(_,E){this.g.hasOwnProperty(E)&&si(_)},d),d.g={}}Ws.prototype.N=function(){Ws.aa.N.call(this),kl(this)},Ws.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pl=c.JSON.stringify,Cl=c.JSON.parse,Al=class{stringify(d){return c.JSON.stringify(d,void 0)}parse(d){return c.JSON.parse(d,void 0)}};function $s(){}$s.prototype.h=null;function Qo(d){return d.h||(d.h=d.i())}function Xo(){}var Hn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ar(){K.call(this,"d")}I(Ar,K);function Jo(){K.call(this,"c")}I(Jo,K);var Rr={},Rl=null;function Hs(){return Rl=Rl||new Ot}Rr.La="serverreachability";function Dl(d){K.call(this,Rr.La,d)}I(Dl,K);function li(d){const _=Hs();Mt(_,new Dl(_))}Rr.STAT_EVENT="statevent";function Ol(d,_){K.call(this,Rr.STAT_EVENT,d),this.stat=_}I(Ol,K);function _t(d){const _=Hs();Mt(_,new Ol(_,d))}Rr.Ma="timingevent";function Zo(d,_){K.call(this,Rr.Ma,d),this.size=_}I(Zo,K);function or(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){d()},_)}function qs(){this.g=!0}qs.prototype.xa=function(){this.g=!1};function Ys(d,_,E,C,H,Z){d.info(function(){if(d.g)if(Z)for(var pe="",Qe=Z.split("&"),Nt=0;Nt<Qe.length;Nt++){var Be=Qe[Nt].split("=");if(1<Be.length){var Ut=Be[0];Be=Be[1];var kt=Ut.split("_");pe=2<=kt.length&&kt[1]=="type"?pe+(Ut+"="+Be+"&"):pe+(Ut+"=redacted&")}}else pe=null;else pe=Z;return"XMLHTTP REQ ("+C+") [attempt "+H+"]: "+_+`
`+E+`
`+pe})}function ea(d,_,E,C,H,Z,pe){d.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+H+"]: "+_+`
`+E+`
`+Z+" "+pe})}function ar(d,_,E,C){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+ep(d,E)+(C?" "+C:"")})}function Ml(d,_){d.info(function(){return"TIMEOUT: "+_})}qs.prototype.info=function(){};function ep(d,_){if(!d.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(d=0;d<E.length;d++)if(Array.isArray(E[d])){var C=E[d];if(!(2>C.length)){var H=C[1];if(Array.isArray(H)&&!(1>H.length)){var Z=H[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var pe=1;pe<H.length;pe++)H[pe]=""}}}}return Pl(E)}catch{return _}}var ta={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},lr;function Gs(){}I(Gs,$s),Gs.prototype.g=function(){return new XMLHttpRequest},Gs.prototype.i=function(){return{}},lr=new Gs;function cr(d,_,E,C){this.j=d,this.i=_,this.l=E,this.R=C||1,this.U=new Ws(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fu}function Fu(){this.i=null,this.g="",this.h=!1}var Nl={},na={};function ra(d,_,E){d.L=1,d.v=zi(Nn(_)),d.m=E,d.P=!0,Ll(d,null)}function Ll(d,_){d.F=Date.now(),tt(d),d.A=Nn(d.v);var E=d.A,C=d.R;Array.isArray(C)||(C=[String(C)]),Wi(E.i,"t",C),d.C=0,E=d.j.J,d.h=new Fu,d.g=nh(d.j,E?_:null,!d.m),0<d.O&&(d.M=new Bs(w(d.Y,d,d.g),d.O)),_=d.U,E=d.g,C=d.ca;var H="readystatechange";Array.isArray(H)||(H&&(Il[0]=H.toString()),H=Il);for(var Z=0;Z<H.length;Z++){var pe=xl(E,H[Z],C||_.handleEvent,!1,_.h||_);if(!pe)break;_.g[pe.key]=pe}_=d.H?P(d.H):{},d.m?(d.u||(d.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,_)):(d.u="GET",d.g.ea(d.A,d.u,null,_)),li(),Ys(d.i,d.u,d.A,d.l,d.R,d.m)}cr.prototype.ca=function(d){d=d.target;const _=this.M;_&&vn(d)==3?_.j():this.Y(d)},cr.prototype.Y=function(d){try{if(d==this.g)e:{const kt=vn(this.g);var _=this.g.Ba();const Gn=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||Bl(this.g)))){this.J||kt!=4||_==7||(_==8||0>=Gn?li(3):li(2)),Ks(this);var E=this.g.Z();this.X=E;t:if(ju(this)){var C=Bl(this.g);d="";var H=C.length,Z=vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qn(this),Vi(this);var pe="";break t}this.h.i=new c.TextDecoder}for(_=0;_<H;_++)this.h.h=!0,d+=this.h.i.decode(C[_],{stream:!(Z&&_==H-1)});C.length=0,this.h.g+=d,this.C=0,pe=this.h.g}else pe=this.g.oa();if(this.o=E==200,ea(this.i,this.u,this.A,this.l,this.R,kt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,Nt=this.g;if((Qe=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(Qe)){var Be=Qe;break t}}Be=null}if(E=Be)ar(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vl(this,E);else{this.o=!1,this.s=3,_t(12),qn(this),Vi(this);break e}}if(this.P){E=!0;let Vn;for(;!this.J&&this.C<pe.length;)if(Vn=tp(this,pe),Vn==na){kt==4&&(this.s=4,_t(14),E=!1),ar(this.i,this.l,null,"[Incomplete Response]");break}else if(Vn==Nl){this.s=4,_t(15),ar(this.i,this.l,pe,"[Invalid Chunk]"),E=!1;break}else ar(this.i,this.l,Vn,null),Vl(this,Vn);if(ju(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||pe.length!=0||this.h.h||(this.s=1,_t(16),E=!1),this.o=this.o&&E,!E)ar(this.i,this.l,pe,"[Invalid Chunked Response]"),qn(this),Vi(this);else if(0<pe.length&&!this.W){this.W=!0;var Ut=this.j;Ut.g==this&&Ut.ba&&!Ut.M&&(Ut.j.info("Great, no buffering proxy detected. Bytes received: "+pe.length),$l(Ut),Ut.M=!0,_t(11))}}else ar(this.i,this.l,pe,null),Vl(this,pe);kt==4&&qn(this),this.o&&!this.J&&(kt==4?pa(this.j,this):(this.o=!1,tt(this)))}else ca(this.g),E==400&&0<pe.indexOf("Unknown SID")?(this.s=3,_t(12)):(this.s=0,_t(13)),qn(this),Vi(this)}}}catch{}finally{}};function ju(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function tp(d,_){var E=d.C,C=_.indexOf(`
`,E);return C==-1?na:(E=Number(_.substring(E,C)),isNaN(E)?Nl:(C+=1,C+E>_.length?na:(_=_.slice(C,C+E),d.C=C+E,_)))}cr.prototype.cancel=function(){this.J=!0,qn(this)};function tt(d){d.S=Date.now()+d.I,Uu(d,d.I)}function Uu(d,_){if(d.B!=null)throw Error("WatchDog timer not null");d.B=or(w(d.ba,d),_)}function Ks(d){d.B&&(c.clearTimeout(d.B),d.B=null)}cr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Ml(this.i,this.A),this.L!=2&&(li(),_t(17)),qn(this),this.s=2,Vi(this)):Uu(this,this.S-d)};function Vi(d){d.j.G==0||d.J||pa(d.j,d)}function qn(d){Ks(d);var _=d.M;_&&typeof _.ma=="function"&&_.ma(),d.M=null,kl(d.U),d.g&&(_=d.g,d.g=null,_.abort(),_.ma())}function Vl(d,_){try{var E=d.j;if(E.G!=0&&(E.g==d||pn(E.h,d))){if(!d.K&&pn(E.h,d)&&E.G==3){try{var C=E.Da.g.parse(_)}catch{C=null}if(Array.isArray(C)&&C.length==3){var H=C;if(H[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<d.F)fa(E),pr(E);else break e;da(E),_t(18)}}else E.za=H[1],0<E.za-E.T&&37500>H[2]&&E.F&&E.v==0&&!E.C&&(E.C=or(w(E.Za,E),6e3));if(1>=Bu(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else fi(E,11)}else if((d.K||E.g==d)&&fa(E),!z(_))for(H=E.Da.g.parse(_),_=0;_<H.length;_++){let Be=H[_];if(E.T=Be[0],Be=Be[1],E.G==2)if(Be[0]=="c"){E.K=Be[1],E.ia=Be[2];const Ut=Be[3];Ut!=null&&(E.la=Ut,E.j.info("VER="+E.la));const kt=Be[4];kt!=null&&(E.Aa=kt,E.j.info("SVER="+E.Aa));const Gn=Be[5];Gn!=null&&typeof Gn=="number"&&0<Gn&&(C=1.5*Gn,E.L=C,E.j.info("backChannelRequestTimeoutMs_="+C)),C=E;const Vn=d.g;if(Vn){const no=Vn.g?Vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(no){var Z=C.h;Z.g||no.indexOf("spdy")==-1&&no.indexOf("quic")==-1&&no.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Fl(Z,Z.h),Z.h=null))}if(C.D){const ga=Vn.g?Vn.g.getResponseHeader("X-HTTP-Session-Id"):null;ga&&(C.ya=ga,Ze(C.I,C.D,ga))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-d.F,E.j.info("Handshake RTT: "+E.R+"ms")),C=E;var pe=d;if(C.qa=th(C,C.J?C.ia:null,C.W),pe.K){Wu(C.h,pe);var Qe=pe,Nt=C.L;Nt&&(Qe.I=Nt),Qe.B&&(Ks(Qe),tt(Qe)),C.g=pe}else to(C);0<E.i.length&&Nr(E)}else Be[0]!="stop"&&Be[0]!="close"||fi(E,7);else E.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?fi(E,7):Yt(E):Be[0]!="noop"&&E.l&&E.l.ta(Be),E.v=0)}}li(4)}catch{}}var zu=class{constructor(d,_){this.g=d,this.map=_}};function Qs(d){this.l=d||10,c.PerformanceNavigationTiming?(d=c.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mn(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Bu(d){return d.h?1:d.g?d.g.size:0}function pn(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function Fl(d,_){d.g?d.g.add(_):d.h=_}function Wu(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}Qs.prototype.cancel=function(){if(this.i=$u(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function $u(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const E of d.g.values())_=_.concat(E.D);return _}return k(d.i)}function ia(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(h(d)){for(var _=[],E=d.length,C=0;C<E;C++)_.push(d[C]);return _}_=[],E=0;for(C in d)_[E++]=d[C];return _}function sa(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(h(d)||typeof d=="string"){var _=[];d=d.length;for(var E=0;E<d;E++)_.push(E);return _}_=[],E=0;for(const C in d)_[E++]=C;return _}}}function Fi(d,_){if(d.forEach&&typeof d.forEach=="function")d.forEach(_,void 0);else if(h(d)||typeof d=="string")Array.prototype.forEach.call(d,_,void 0);else for(var E=sa(d),C=ia(d),H=C.length,Z=0;Z<H;Z++)_.call(void 0,C[Z],E&&E[Z],d)}var Xs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function np(d,_){if(d){d=d.split("&");for(var E=0;E<d.length;E++){var C=d[E].indexOf("="),H=null;if(0<=C){var Z=d[E].substring(0,C);H=d[E].substring(C+1)}else Z=d[E];_(Z,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function ci(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof ci){this.h=d.h,Js(this,d.j),this.o=d.o,this.g=d.g,ji(this,d.s),this.l=d.l;var _=d.i,E=new Dr;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),Ui(this,E),this.m=d.m}else d&&(_=String(d).match(Xs))?(this.h=!1,Js(this,_[1]||"",!0),this.o=ze(_[2]||""),this.g=ze(_[3]||"",!0),ji(this,_[4]),this.l=ze(_[5]||"",!0),Ui(this,_[6]||"",!0),this.m=ze(_[7]||"")):(this.h=!1,this.i=new Dr(null,this.h))}ci.prototype.toString=function(){var d=[],_=this.j;_&&d.push(Bi(_,oa,!0),":");var E=this.g;return(E||_=="file")&&(d.push("//"),(_=this.o)&&d.push(Bi(_,oa,!0),"@"),d.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&d.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(Bi(E,E.charAt(0)=="/"?Yu:qu,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",Bi(E,jl)),d.join("")};function Nn(d){return new ci(d)}function Js(d,_,E){d.j=E?ze(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function ji(d,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);d.s=_}else d.s=null}function Ui(d,_,E){_ instanceof Dr?(d.i=_,Or(d.i,d.h)):(E||(_=Bi(_,Gu)),d.i=new Dr(_,d.h))}function Ze(d,_,E){d.i.set(_,E)}function zi(d){return Ze(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function ze(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Bi(d,_,E){return typeof d=="string"?(d=encodeURI(d).replace(_,Hu),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Hu(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var oa=/[#\/\?@]/g,qu=/[#\?:]/g,Yu=/[#\?]/g,Gu=/[#\?@]/g,jl=/#/g;function Dr(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function qt(d){d.g||(d.g=new Map,d.h=0,d.i&&np(d.i,function(_,E){d.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}n=Dr.prototype,n.add=function(d,_){qt(this),this.i=null,d=Yn(this,d);var E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(_),this.h+=1,this};function ur(d,_){qt(d),_=Yn(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function hr(d,_){return qt(d),_=Yn(d,_),d.g.has(_)}n.forEach=function(d,_){qt(this),this.g.forEach(function(E,C){E.forEach(function(H){d.call(_,H,C,this)},this)},this)},n.na=function(){qt(this);const d=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let C=0;C<_.length;C++){const H=d[C];for(let Z=0;Z<H.length;Z++)E.push(_[C])}return E},n.V=function(d){qt(this);let _=[];if(typeof d=="string")hr(this,d)&&(_=_.concat(this.g.get(Yn(this,d))));else{d=Array.from(this.g.values());for(let E=0;E<d.length;E++)_=_.concat(d[E])}return _},n.set=function(d,_){return qt(this),this.i=null,d=Yn(this,d),hr(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},n.get=function(d,_){return d?(d=this.V(d),0<d.length?String(d[0]):_):_};function Wi(d,_,E){ur(d,_),0<E.length&&(d.i=null,d.g.set(Yn(d,_),k(E)),d.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var C=_[E];const Z=encodeURIComponent(String(C)),pe=this.V(C);for(C=0;C<pe.length;C++){var H=Z;pe[C]!==""&&(H+="="+encodeURIComponent(String(pe[C]))),d.push(H)}}return this.i=d.join("&")};function Yn(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function Or(d,_){_&&!d.j&&(qt(d),d.i=null,d.g.forEach(function(E,C){var H=C.toLowerCase();C!=H&&(ur(this,C),Wi(this,H,E))},d)),d.j=_}function rp(d,_){const E=new qs;if(c.Image){const C=new Image;C.onload=T(_n,E,"TestLoadImage: loaded",!0,_,C),C.onerror=T(_n,E,"TestLoadImage: error",!1,_,C),C.onabort=T(_n,E,"TestLoadImage: abort",!1,_,C),C.ontimeout=T(_n,E,"TestLoadImage: timeout",!1,_,C),c.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=d}else _(!1)}function Ku(d,_){const E=new qs,C=new AbortController,H=setTimeout(()=>{C.abort(),_n(E,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:C.signal}).then(Z=>{clearTimeout(H),Z.ok?_n(E,"TestPingServer: ok",!0,_):_n(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(H),_n(E,"TestPingServer: error",!1,_)})}function _n(d,_,E,C,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),C(E)}catch{}}function ip(){this.g=new Al}function Qu(d,_,E){const C=E||"";try{Fi(d,function(H,Z){let pe=H;f(H)&&(pe=Pl(H)),_.push(C+Z+"="+encodeURIComponent(pe))})}catch(H){throw _.push(C+"type="+encodeURIComponent("_badmap")),H}}function ui(d){this.l=d.Ub||null,this.j=d.eb||!1}I(ui,$s),ui.prototype.g=function(){return new Zs(this.l,this.j)},ui.prototype.i=function(d){return function(){return d}}({});function Zs(d,_){Ot.call(this),this.D=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Zs,Ot),n=Zs.prototype,n.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=_,this.readyState=1,fr(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(_.body=d),(this.D||c).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,dr(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,fr(this)),this.g&&(this.readyState=3,fr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xu(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xu(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?dr(this):fr(this),this.readyState==3&&Xu(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,dr(this))},n.Qa=function(d){this.g&&(this.response=d,dr(this))},n.ga=function(){this.g&&dr(this)};function dr(d){d.readyState=4,d.l=null,d.j=null,d.v=null,fr(d)}n.setRequestHeader=function(d,_){this.u.append(d,_)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=_.next();return d.join(`\r
`)};function fr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Zs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function hi(d){let _="";return ie(d,function(E,C){_+=C,_+=":",_+=E,_+=`\r
`}),_}function $i(d,_,E){e:{for(C in E){var C=!1;break e}C=!0}C||(E=hi(E),typeof d=="string"?E!=null&&encodeURIComponent(String(E)):Ze(d,_,E))}function ct(d){Ot.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(ct,Ot);var sp=/^https?$/i,Ul=["POST","PUT"];n=ct.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,_,E,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():lr.g(),this.v=this.o?Qo(this.o):Qo(lr),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(Z){eo(this,Z);return}if(d=E||"",E=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var H in C)E.set(H,C[H]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const Z of C.keys())E.set(Z,C.get(Z));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(E.keys()).find(Z=>Z.toLowerCase()=="content-type"),H=c.FormData&&d instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Ul,_,void 0))||C||H||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,pe]of E)this.g.setRequestHeader(Z,pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{la(this),this.u=!0,this.g.send(d),this.u=!1}catch(Z){eo(this,Z)}};function eo(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.m=5,aa(d),Ln(d)}function aa(d){d.A||(d.A=!0,Mt(d,"complete"),Mt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Mt(this,"complete"),Mt(this,"abort"),Ln(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ln(this,!0)),ct.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?zl(this):this.bb())},n.bb=function(){zl(this)};function zl(d){if(d.h&&typeof l<"u"&&(!d.v[1]||vn(d)!=4||d.Z()!=2)){if(d.u&&vn(d)==4)Sl(d.Ea,0,d);else if(Mt(d,"readystatechange"),vn(d)==4){d.h=!1;try{const pe=d.Z();e:switch(pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var C;if(C=pe===0){var H=String(d.D).match(Xs)[1]||null;!H&&c.self&&c.self.location&&(H=c.self.location.protocol.slice(0,-1)),C=!sp.test(H?H.toLowerCase():"")}E=C}if(E)Mt(d,"complete"),Mt(d,"success");else{d.m=6;try{var Z=2<vn(d)?d.g.statusText:""}catch{Z=""}d.l=Z+" ["+d.Z()+"]",aa(d)}}finally{Ln(d)}}}}function Ln(d,_){if(d.g){la(d);const E=d.g,C=d.v[0]?()=>{}:null;d.g=null,d.v=null,_||Mt(d,"ready");try{E.onreadystatechange=C}catch{}}}function la(d){d.I&&(c.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function vn(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<vn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),Cl(_)}};function Bl(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function ca(d){const _={};d=(d.g&&2<=vn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<d.length;C++){if(z(d[C]))continue;var E=L(d[C]);const H=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Z=_[H]||[];_[H]=Z,Z.push(E)}D(_,function(C){return C.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mr(d,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||_}function Wl(d){this.Aa=0,this.i=[],this.j=new qs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Mr("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Mr("baseRetryDelayMs",5e3,d),this.cb=Mr("retryDelaySeedMs",1e4,d),this.Wa=Mr("forwardChannelMaxRetries",2,d),this.wa=Mr("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Qs(d&&d.concurrentRequestLimit),this.Da=new ip,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Wl.prototype,n.la=8,n.G=1,n.connect=function(d,_,E,C){_t(0),this.W=d,this.H=_||{},E&&C!==void 0&&(this.H.OSID=E,this.H.OAID=C),this.F=this.X,this.I=th(this,null,this.W),Nr(this)};function Yt(d){if(ua(d),d.G==3){var _=d.U++,E=Nn(d.I);if(Ze(E,"SID",d.K),Ze(E,"RID",_),Ze(E,"TYPE","terminate"),di(d,E),_=new cr(d,d.j,_),_.L=2,_.v=zi(Nn(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&c.Image&&(new Image().src=_.v,E=!0),E||(_.g=nh(_.j,null),_.g.ea(_.v)),_.F=Date.now(),tt(_)}eh(d)}function pr(d){d.g&&($l(d),d.g.cancel(),d.g=null)}function ua(d){pr(d),d.u&&(c.clearTimeout(d.u),d.u=null),fa(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&c.clearTimeout(d.s),d.s=null)}function Nr(d){if(!Mn(d.h)&&!d.s){d.s=!0;var _=d.Ga;re||R(),ae||(re(),ae=!0),J.add(_,d),d.B=0}}function op(d,_){return Bu(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=_.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=or(w(d.Ga,d,_),Zu(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const H=new cr(this,this.j,d);let Z=this.o;if(this.S&&(Z?(Z=P(Z),V(Z,this.S)):Z=this.S),this.m!==null||this.O||(H.H=Z,Z=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var C=this.i[E];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(_+=C,4096<_){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=Hi(this,H,_),E=Nn(this.I),Ze(E,"RID",d),Ze(E,"CVER",22),this.D&&Ze(E,"X-HTTP-Session-Id",this.D),di(this,E),Z&&(this.O?_="headers="+encodeURIComponent(String(hi(Z)))+"&"+_:this.m&&$i(E,this.m,Z)),Fl(this.h,H),this.Ua&&Ze(E,"TYPE","init"),this.P?(Ze(E,"$req",_),Ze(E,"SID","null"),H.T=!0,ra(H,E,null)):ra(H,E,_),this.G=2}}else this.G==3&&(d?ha(this,d):this.i.length==0||Mn(this.h)||ha(this))};function ha(d,_){var E;_?E=_.l:E=d.U++;const C=Nn(d.I);Ze(C,"SID",d.K),Ze(C,"RID",E),Ze(C,"AID",d.T),di(d,C),d.m&&d.o&&$i(C,d.m,d.o),E=new cr(d,d.j,E,d.B+1),d.m===null&&(E.H=d.o),_&&(d.i=_.D.concat(d.i)),_=Hi(d,E,1e3),E.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Fl(d.h,E),ra(E,C,_)}function di(d,_){d.H&&ie(d.H,function(E,C){Ze(_,C,E)}),d.l&&Fi({},function(E,C){Ze(_,C,E)})}function Hi(d,_,E){E=Math.min(d.i.length,E);var C=d.l?w(d.l.Na,d.l,d):null;e:{var H=d.i;let Z=-1;for(;;){const pe=["count="+E];Z==-1?0<E?(Z=H[0].g,pe.push("ofs="+Z)):Z=0:pe.push("ofs="+Z);let Qe=!0;for(let Nt=0;Nt<E;Nt++){let Be=H[Nt].g;const Ut=H[Nt].map;if(Be-=Z,0>Be)Z=Math.max(0,H[Nt].g-100),Qe=!1;else try{Qu(Ut,pe,"req"+Be+"_")}catch{C&&C(Ut)}}if(Qe){C=pe.join("&");break e}}}return d=d.i.splice(0,E),_.D=d,C}function to(d){if(!d.g&&!d.u){d.Y=1;var _=d.Fa;re||R(),ae||(re(),ae=!0),J.add(_,d),d.v=0}}function da(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=or(w(d.Fa,d),Zu(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,Ju(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=or(w(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_t(10),pr(this),Ju(this))};function $l(d){d.A!=null&&(c.clearTimeout(d.A),d.A=null)}function Ju(d){d.g=new cr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var _=Nn(d.qa);Ze(_,"RID","rpc"),Ze(_,"SID",d.K),Ze(_,"AID",d.T),Ze(_,"CI",d.F?"0":"1"),!d.F&&d.ja&&Ze(_,"TO",d.ja),Ze(_,"TYPE","xmlhttp"),di(d,_),d.m&&d.o&&$i(_,d.m,d.o),d.L&&(d.g.I=d.L);var E=d.g;d=d.ia,E.L=1,E.v=zi(Nn(_)),E.m=null,E.P=!0,Ll(E,d)}n.Za=function(){this.C!=null&&(this.C=null,pr(this),da(this),_t(19))};function fa(d){d.C!=null&&(c.clearTimeout(d.C),d.C=null)}function pa(d,_){var E=null;if(d.g==_){fa(d),$l(d),d.g=null;var C=2}else if(pn(d.h,_))E=_.D,Wu(d.h,_),C=1;else return;if(d.G!=0){if(_.o)if(C==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var H=d.B;C=Hs(),Mt(C,new Zo(C,E)),Nr(d)}else to(d);else if(H=_.s,H==3||H==0&&0<_.X||!(C==1&&op(d,_)||C==2&&da(d)))switch(E&&0<E.length&&(_=d.h,_.i=_.i.concat(E)),H){case 1:fi(d,5);break;case 4:fi(d,10);break;case 3:fi(d,6);break;default:fi(d,2)}}}function Zu(d,_){let E=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(E*=2),E*_}function fi(d,_){if(d.j.info("Error code "+_),_==2){var E=w(d.fb,d),C=d.Xa;const H=!C;C=new ci(C||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Js(C,"https"),zi(C),H?rp(C.toString(),E):Ku(C.toString(),E)}else _t(2);d.G=0,d.l&&d.l.sa(_),eh(d),ua(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function eh(d){if(d.G=0,d.ka=[],d.l){const _=$u(d.h);(_.length!=0||d.i.length!=0)&&(b(d.ka,_),b(d.ka,d.i),d.h.i.length=0,k(d.i),d.i.length=0),d.l.ra()}}function th(d,_,E){var C=E instanceof ci?Nn(E):new ci(E);if(C.g!="")_&&(C.g=_+"."+C.g),ji(C,C.s);else{var H=c.location;C=H.protocol,_=_?_+"."+H.hostname:H.hostname,H=+H.port;var Z=new ci(null);C&&Js(Z,C),_&&(Z.g=_),H&&ji(Z,H),E&&(Z.l=E),C=Z}return E=d.D,_=d.ya,E&&_&&Ze(C,E,_),Ze(C,"VER",d.la),di(d,C),C}function nh(d,_,E){if(_&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Ca&&!d.pa?new ct(new ui({eb:E})):new ct(d.pa),_.Ha(d.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hl(){}n=Hl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ma(){}ma.prototype.g=function(d,_){return new mn(d,_)};function mn(d,_){Ot.call(this),this.g=new Wl(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(d?d["X-WebChannel-Client-Profile"]=_.va:d={"X-WebChannel-Client-Profile":_.va}),this.g.S=d,(d=_&&_.Sb)&&!z(d)&&(this.g.m=d),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!z(_)&&(this.g.D=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new Lr(this)}I(mn,Ot),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Yt(this.g)},mn.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.u&&(E={},E.__data__=Pl(d),d=E);_.i.push(new zu(_.Ya++,d)),_.G==3&&Nr(_)},mn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,mn.aa.N.call(this)};function rh(d){Ar.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const E in _){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}I(rh,Ar);function ih(){Jo.call(this),this.status=1}I(ih,Jo);function Lr(d){this.g=d}I(Lr,Hl),Lr.prototype.ua=function(){Mt(this.g,"a")},Lr.prototype.ta=function(d){Mt(this.g,new rh(d))},Lr.prototype.sa=function(d){Mt(this.g,new ih)},Lr.prototype.ra=function(){Mt(this.g,"b")},ma.prototype.createWebChannel=ma.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,dT=function(){return new ma},hT=function(){return Hs()},uT=Rr,vg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ta.NO_ERROR=0,ta.TIMEOUT=8,ta.HTTP_ERROR=6,Id=ta,Vu.COMPLETE="complete",cT=Vu,Xo.EventType=Hn,Hn.OPEN="a",Hn.CLOSE="b",Hn.ERROR="c",Hn.MESSAGE="d",Ot.prototype.listen=Ot.prototype.K,Pc=Xo,ct.prototype.listenOnce=ct.prototype.L,ct.prototype.getLastError=ct.prototype.Ka,ct.prototype.getLastErrorCode=ct.prototype.Ba,ct.prototype.getStatus=ct.prototype.Z,ct.prototype.getResponseJson=ct.prototype.Oa,ct.prototype.getResponseText=ct.prototype.oa,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Ha,lT=ct}).apply(typeof Jh<"u"?Jh:typeof self<"u"?self:typeof window<"u"?window:{});const ww="@firebase/firestore",xw="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kn.UNAUTHENTICATED=new kn(null),kn.GOOGLE_CREDENTIALS=new kn("google-credentials-uid"),kn.FIRST_PARTY=new kn("first-party-uid"),kn.MOCK_USER=new kn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ul="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=new iy("@firebase/firestore");function Ua(){return No.logLevel}function _e(n,...e){if(No.logLevel<=Fe.DEBUG){const t=e.map(gy);No.debug(`Firestore (${ul}): ${n}`,...t)}}function Di(n,...e){if(No.logLevel<=Fe.ERROR){const t=e.map(gy);No.error(`Firestore (${ul}): ${n}`,...t)}}function Xc(n,...e){if(No.logLevel<=Fe.WARN){const t=e.map(gy);No.warn(`Firestore (${ul}): ${n}`,...t)}}function gy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,fT(n,r,t)}function fT(n,e,t){let r=`FIRESTORE (${ul}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Di(r),new Error(r)}function Ke(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||fT(e,i,r)}function Oe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends Mi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $R{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(kn.UNAUTHENTICATED))}shutdown(){}}class HR{constructor(e){this.t=e,this.currentUser=kn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0,42304);let r=this.i;const i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let o=new Ci;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ci,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await i(this.currentUser)})},c=h=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ci)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ke(typeof r.accessToken=="string",31837,{l:r}),new WR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new kn(e)}}class qR{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=kn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class YR{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new qR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(kn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ew{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,rr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ke(this.o===void 0,3512);const r=o=>{o.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,_e("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ew(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ke(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ew(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=KR(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}}function je(n,e){return n<e?-1:n>e?1:0}function wg(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),o=e.charAt(r);if(i!==o)return Nm(i)===Nm(o)?je(i,o):Nm(i)?1:-1}return je(n.length,e.length)}const QR=55296,XR=57343;function Nm(n){const e=n.charCodeAt(0);return e>=QR&&e<=XR}function Ja(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw="__name__";class qr{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ce(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ce(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return qr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=qr.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return je(e.length,t.length)}static compareSegments(e,t){const r=qr.isNumericId(e),i=qr.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?qr.extractNumericId(e).compare(qr.extractNumericId(t)):wg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Es.fromString(e.substring(4,e.length-2))}}class rt extends qr{construct(e,t,r){return new rt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new me(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new rt(t)}static emptyPath(){return new rt([])}}const JR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jt extends qr{construct(e,t,r){return new Jt(e,t,r)}static isValidIdentifier(e){return JR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bw}static keyField(){return new Jt([bw])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new me(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new me(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new me(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else c==="`"?(l=!l,i++):c!=="."||l?(r+=c,i++):(o(),i++)}if(o(),l)throw new me(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jt(t)}static emptyPath(){return new Jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(rt.fromString(e))}static fromName(e){return new Te(rt.fromString(e).popFirst(5))}static empty(){return new Te(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return rt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new rt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(n,e,t){if(!t)throw new me(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ZR(n,e,t,r){if(e===!0&&r===!0)throw new me(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Tw(n){if(!Te.isDocumentKey(n))throw new me(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Sw(n){if(Te.isDocumentKey(n))throw new me(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function mT(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Tf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ce(12329,{type:typeof n})}function Is(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new me(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Tf(n);throw new me(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function eD(n,e){if(e<=0)throw new me(ne.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(n,e){const t={typeString:n};return e&&(t.value=e),t}function vu(n,e){if(!mT(n))throw new me(ne.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(i&&typeof l!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new me(ne.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=-62135596800,kw=1e6;class at{static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*kw);return new at(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new me(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Iw)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kw}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:at._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(vu(e,at._jsonSchema))return new at(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Iw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}at._jsonSchemaVersion="firestore/timestamp/1.0",at._jsonSchema={type:Rt("string",at._jsonSchemaVersion),seconds:Rt("number"),nanoseconds:Rt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new at(0,0))}static max(){return new De(new at(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc=-1;function tD(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=De.fromTimestamp(r===1e9?new at(t+1,0):new at(t,r));return new ks(i,Te.empty(),e)}function nD(n){return new ks(n.readTime,n.key,Jc)}class ks{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ks(De.min(),Te.empty(),Jc)}static max(){return new ks(De.max(),Te.empty(),Jc)}}function rD(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(n.documentKey,e.documentKey),t!==0?t:je(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==iD)throw n;_e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let i=0,o=0,l=!1;e.forEach(c=>{++i,c.next(()=>{++o,l&&o===i&&t()},h=>r(h))}),l=!0,o===i&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(i=>i?oe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,i)=>{const o=e.length,l=new Array(o);let c=0;for(let h=0;h<o;h++){const f=h;t(e[f]).next(m=>{l[f]=m,++c,c===o&&r(l)},m=>i(m))}})}static doWhile(e,t){return new oe((r,i)=>{const o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}}function oD(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function dl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Sf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y=-1;function If(n){return n==null}function Hd(n){return n===0&&1/n==-1/0}function aD(n){return typeof n=="number"&&Number.isInteger(n)&&!Hd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="";function lD(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Pw(e)),e=cD(n.get(t),e);return Pw(e)}function cD(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case gT:t+="";break;default:t+=o}}return t}function Pw(n){return n+gT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ls(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function yT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,t){this.comparator=e,this.root=t||Xt.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zh(this.root,e,this.comparator,!0)}}class Zh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??Xt.RED,this.left=i??Xt.EMPTY,this.right=o??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new Xt(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Xt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Aw(this.data.getIterator())}getIteratorFrom(e){return new Aw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new jt(this.comparator);return t.data=e,t}}class Aw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.fields=e,e.sort(Jt.comparator)}static empty(){return new $n([])}unionWith(e){let t=new jt(Jt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new $n(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ja(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new _T("Invalid base64 string: "+o):o}}(e);return new en(t)}static fromUint8Array(e){const t=function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o}(e);return new en(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const uD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ps(n){if(Ke(!!n,39018),typeof n=="string"){let e=0;const t=uD.exec(n);if(Ke(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wt(n.seconds),nanos:wt(n.nanos)}}function wt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Cs(n){return typeof n=="string"?en.fromBase64String(n):en.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="server_timestamp",wT="__type__",xT="__previous_value__",ET="__local_write_time__";function vy(n){return(n?.mapValue?.fields||{})[wT]?.stringValue===vT}function kf(n){const e=n.mapValue.fields[xT];return vy(e)?kf(e):e}function Zc(n){const e=Ps(n.mapValue.fields[ET].timestampValue);return new at(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,t,r,i,o,l,c,h,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=m}}const qd="(default)";class eu{constructor(e,t){this.projectId=e,this.database=t||qd}static empty(){return new eu("","")}get isDefaultDatabase(){return this.database===qd}isEqual(e){return e instanceof eu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT="__type__",dD="__max__",ed={mapValue:{}},TT="__vector__",Yd="value";function As(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?vy(n)?4:pD(n)?9007199254740991:fD(n)?10:11:Ce(28295,{value:n})}function ri(n,e){if(n===e)return!0;const t=As(n);if(t!==As(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Zc(n).isEqual(Zc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=Ps(i.timestampValue),c=Ps(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Cs(i.bytesValue).isEqual(Cs(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return wt(i.geoPointValue.latitude)===wt(o.geoPointValue.latitude)&&wt(i.geoPointValue.longitude)===wt(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return wt(i.integerValue)===wt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=wt(i.doubleValue),c=wt(o.doubleValue);return l===c?Hd(l)===Hd(c):isNaN(l)&&isNaN(c)}return!1}(n,e);case 9:return Ja(n.arrayValue.values||[],e.arrayValue.values||[],ri);case 10:case 11:return function(i,o){const l=i.mapValue.fields||{},c=o.mapValue.fields||{};if(Cw(l)!==Cw(c))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(c[h]===void 0||!ri(l[h],c[h])))return!1;return!0}(n,e);default:return Ce(52216,{left:n})}}function tu(n,e){return(n.values||[]).find(t=>ri(t,e))!==void 0}function Za(n,e){if(n===e)return 0;const t=As(n),r=As(e);if(t!==r)return je(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return je(n.booleanValue,e.booleanValue);case 2:return function(o,l){const c=wt(o.integerValue||o.doubleValue),h=wt(l.integerValue||l.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return Rw(n.timestampValue,e.timestampValue);case 4:return Rw(Zc(n),Zc(e));case 5:return wg(n.stringValue,e.stringValue);case 6:return function(o,l){const c=Cs(o),h=Cs(l);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const c=o.split("/"),h=l.split("/");for(let f=0;f<c.length&&f<h.length;f++){const m=je(c[f],h[f]);if(m!==0)return m}return je(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const c=je(wt(o.latitude),wt(l.latitude));return c!==0?c:je(wt(o.longitude),wt(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Dw(n.arrayValue,e.arrayValue);case 10:return function(o,l){const c=o.fields||{},h=l.fields||{},f=c[Yd]?.arrayValue,m=h[Yd]?.arrayValue,y=je(f?.values?.length||0,m?.values?.length||0);return y!==0?y:Dw(f,m)}(n.mapValue,e.mapValue);case 11:return function(o,l){if(o===ed.mapValue&&l===ed.mapValue)return 0;if(o===ed.mapValue)return 1;if(l===ed.mapValue)return-1;const c=o.fields||{},h=Object.keys(c),f=l.fields||{},m=Object.keys(f);h.sort(),m.sort();for(let y=0;y<h.length&&y<m.length;++y){const w=wg(h[y],m[y]);if(w!==0)return w;const T=Za(c[h[y]],f[m[y]]);if(T!==0)return T}return je(h.length,m.length)}(n.mapValue,e.mapValue);default:throw Ce(23264,{he:t})}}function Rw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return je(n,e);const t=Ps(n),r=Ps(e),i=je(t.seconds,r.seconds);return i!==0?i:je(t.nanos,r.nanos)}function Dw(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=Za(t[i],r[i]);if(o)return o}return je(t.length,r.length)}function el(n){return xg(n)}function xg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Ps(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Cs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Te.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=xg(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const l of r)o?o=!1:i+=",",i+=`${l}:${xg(t.fields[l])}`;return i+"}"}(n.mapValue):Ce(61005,{value:n})}function kd(n){switch(As(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kf(n);return e?16+kd(e):16;case 5:return 2*n.stringValue.length;case 6:return Cs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+kd(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Ls(r.fields,(o,l)=>{i+=o.length+kd(l)}),i}(n.mapValue);default:throw Ce(13486,{value:n})}}function Ow(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Eg(n){return!!n&&"integerValue"in n}function wy(n){return!!n&&"arrayValue"in n}function Mw(n){return!!n&&"nullValue"in n}function Nw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Pd(n){return!!n&&"mapValue"in n}function fD(n){return(n?.mapValue?.fields||{})[bT]?.stringValue===TT}function Fc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ls(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Fc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Fc(n.arrayValue.values[t]);return e}return{...n}}function pD(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===dD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.value=e}static empty(){return new Cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Pd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fc(t)}setAll(e){let t=Jt.emptyPath(),r={},i=[];e.forEach((l,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=c.popLast()}l?r[c.lastSegment()]=Fc(l):i.push(c.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());Pd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ri(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Pd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ls(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Cn(Fc(this.value))}}function ST(n){const e=[];return Ls(n.fields,(t,r)=>{const i=new Jt([t]);if(Pd(r)){const o=ST(r.mapValue).fields;if(o.length===0)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)}),new $n(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,t,r,i,o,l,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new un(e,0,De.min(),De.min(),De.min(),Cn.empty(),0)}static newFoundDocument(e,t,r,i){return new un(e,1,t,De.min(),r,i,0)}static newNoDocument(e,t){return new un(e,2,t,De.min(),De.min(),Cn.empty(),0)}static newUnknownDocument(e,t){return new un(e,3,t,De.min(),De.min(),Cn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,t){this.position=e,this.inclusive=t}}function Lw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],l=n.position[i];if(o.field.isKeyField()?r=Te.comparator(Te.fromName(l.referenceValue),t.key):r=Za(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Vw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ri(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,t="asc"){this.field=e,this.dir=t}}function mD(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{}class At extends IT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new yD(e,t,r):t==="array-contains"?new wD(e,r):t==="in"?new xD(e,r):t==="not-in"?new ED(e,r):t==="array-contains-any"?new bD(e,r):new At(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new _D(e,r):new vD(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Za(t,this.value)):t!==null&&As(this.value)===As(t)&&this.matchesComparison(Za(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ir extends IT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ir(e,t)}matches(e){return kT(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function kT(n){return n.op==="and"}function PT(n){return gD(n)&&kT(n)}function gD(n){for(const e of n.filters)if(e instanceof Ir)return!1;return!0}function bg(n){if(n instanceof At)return n.field.canonicalString()+n.op.toString()+el(n.value);if(PT(n))return n.filters.map(e=>bg(e)).join(",");{const e=n.filters.map(t=>bg(t)).join(",");return`${n.op}(${e})`}}function CT(n,e){return n instanceof At?function(r,i){return i instanceof At&&r.op===i.op&&r.field.isEqual(i.field)&&ri(r.value,i.value)}(n,e):n instanceof Ir?function(r,i){return i instanceof Ir&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,l,c)=>o&&CT(l,i.filters[c]),!0):!1}(n,e):void Ce(19439)}function AT(n){return n instanceof At?function(t){return`${t.field.canonicalString()} ${t.op} ${el(t.value)}`}(n):n instanceof Ir?function(t){return t.op.toString()+" {"+t.getFilters().map(AT).join(" ,")+"}"}(n):"Filter"}class yD extends At{constructor(e,t,r){super(e,t,r),this.key=Te.fromName(r.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class _D extends At{constructor(e,t){super(e,"in",t),this.keys=RT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class vD extends At{constructor(e,t){super(e,"not-in",t),this.keys=RT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function RT(n,e){return(e.arrayValue?.values||[]).map(t=>Te.fromName(t.referenceValue))}class wD extends At{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wy(t)&&tu(t.arrayValue,this.value)}}class xD extends At{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&tu(this.value.arrayValue,t)}}class ED extends At{constructor(e,t){super(e,"not-in",t)}matches(e){if(tu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!tu(this.value.arrayValue,t)}}class bD extends At{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>tu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e,t=null,r=[],i=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=c,this.Te=null}}function Fw(n,e=null,t=[],r=[],i=null,o=null,l=null){return new TD(n,e,t,r,i,o,l)}function xy(n){const e=Oe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>bg(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),If(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>el(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>el(r)).join(",")),e.Te=t}return e.Te}function Ey(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!mD(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!CT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Vw(n.startAt,e.startAt)&&Vw(n.endAt,e.endAt)}function Tg(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,t=null,r=[],i=[],o=null,l="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function SD(n,e,t,r,i,o,l,c){return new fl(n,e,t,r,i,o,l,c)}function by(n){return new fl(n)}function jw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function DT(n){return n.collectionGroup!==null}function jc(n){const e=Oe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new jt(Jt.comparator);return l.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(c=c.add(f.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new nu(o,r))}),t.has(Jt.keyField().canonicalString())||e.Ie.push(new nu(Jt.keyField(),r))}return e.Ie}function Xr(n){const e=Oe(n);return e.Ee||(e.Ee=ID(e,jc(n))),e.Ee}function ID(n,e){if(n.limitType==="F")return Fw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new nu(i.field,o)});const t=n.endAt?new Gd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Gd(n.startAt.position,n.startAt.inclusive):null;return Fw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Sg(n,e){const t=n.filters.concat([e]);return new fl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Kd(n,e,t){return new fl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Pf(n,e){return Ey(Xr(n),Xr(e))&&n.limitType===e.limitType}function OT(n){return`${xy(Xr(n))}|lt:${n.limitType}`}function za(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>AT(i)).join(", ")}]`),If(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>el(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>el(i)).join(",")),`Target(${r})`}(Xr(n))}; limitType=${n.limitType})`}function Cf(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Te.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of jc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(l,c,h){const f=Lw(l,c,h);return l.inclusive?f<=0:f<0}(r.startAt,jc(r),i)||r.endAt&&!function(l,c,h){const f=Lw(l,c,h);return l.inclusive?f>=0:f>0}(r.endAt,jc(r),i))}(n,e)}function kD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function MT(n){return(e,t)=>{let r=!1;for(const i of jc(n)){const o=PD(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function PD(n,e,t){const r=n.field.isKeyField()?Te.comparator(e.key,t.key):function(o,l,c){const h=l.data.field(o),f=c.data.field(o);return h!==null&&f!==null?Za(h,f):Ce(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ce(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ls(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return yT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=new pt(Te.comparator);function Oi(){return CD}const NT=new pt(Te.comparator);function Cc(...n){let e=NT;for(const t of n)e=e.insert(t.key,t);return e}function LT(n){let e=NT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function To(){return Uc()}function VT(){return Uc()}function Uc(){return new Uo(n=>n.toString(),(n,e)=>n.isEqual(e))}const AD=new pt(Te.comparator),RD=new jt(Te.comparator);function Ue(...n){let e=RD;for(const t of n)e=e.add(t);return e}const DD=new jt(je);function OD(){return DD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hd(e)?"-0":e}}function FT(n){return{integerValue:""+n}}function MD(n,e){return aD(e)?FT(e):Ty(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(){this._=void 0}}function ND(n,e,t){return n instanceof Qd?function(i,o){const l={fields:{[wT]:{stringValue:vT},[ET]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&vy(o)&&(o=kf(o)),o&&(l.fields[xT]=o),{mapValue:l}}(t,e):n instanceof ru?UT(n,e):n instanceof iu?zT(n,e):function(i,o){const l=jT(i,o),c=Uw(l)+Uw(i.Ae);return Eg(l)&&Eg(i.Ae)?FT(c):Ty(i.serializer,c)}(n,e)}function LD(n,e,t){return n instanceof ru?UT(n,e):n instanceof iu?zT(n,e):t}function jT(n,e){return n instanceof Xd?function(r){return Eg(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Qd extends Af{}class ru extends Af{constructor(e){super(),this.elements=e}}function UT(n,e){const t=BT(e);for(const r of n.elements)t.some(i=>ri(i,r))||t.push(r);return{arrayValue:{values:t}}}class iu extends Af{constructor(e){super(),this.elements=e}}function zT(n,e){let t=BT(e);for(const r of n.elements)t=t.filter(i=>!ri(i,r));return{arrayValue:{values:t}}}class Xd extends Af{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Uw(n){return wt(n.integerValue||n.doubleValue)}function BT(n){return wy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function VD(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof ru&&i instanceof ru||r instanceof iu&&i instanceof iu?Ja(r.elements,i.elements,ri):r instanceof Xd&&i instanceof Xd?ri(r.Ae,i.Ae):r instanceof Qd&&i instanceof Qd}(n.transform,e.transform)}class FD{constructor(e,t){this.version=e,this.transformResults=t}}class Jr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Jr}static exists(e){return new Jr(void 0,e)}static updateTime(e){return new Jr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Rf{}function WT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new HT(n.key,Jr.none()):new wu(n.key,n.data,Jr.none());{const t=n.data,r=Cn.empty();let i=new jt(Jt.comparator);for(let o of e.fields)if(!i.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),i=i.add(o)}return new Vs(n.key,r,new $n(i.toArray()),Jr.none())}}function jD(n,e,t){n instanceof wu?function(i,o,l){const c=i.value.clone(),h=Bw(i.fieldTransforms,o,l.transformResults);c.setAll(h),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Vs?function(i,o,l){if(!Cd(i.precondition,o))return void o.convertToUnknownDocument(l.version);const c=Bw(i.fieldTransforms,o,l.transformResults),h=o.data;h.setAll($T(i)),h.setAll(c),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(n,e,t):function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function zc(n,e,t,r){return n instanceof wu?function(o,l,c,h){if(!Cd(o.precondition,l))return c;const f=o.value.clone(),m=Ww(o.fieldTransforms,h,l);return f.setAll(m),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof Vs?function(o,l,c,h){if(!Cd(o.precondition,l))return c;const f=Ww(o.fieldTransforms,h,l),m=l.data;return m.setAll($T(o)),m.setAll(f),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(n,e,t,r):function(o,l,c){return Cd(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(n,e,t)}function UD(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=jT(r.transform,i||null);o!=null&&(t===null&&(t=Cn.empty()),t.set(r.field,o))}return t||null}function zw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ja(r,i,(o,l)=>VD(o,l))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class wu extends Rf{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Vs extends Rf{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function $T(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Bw(n,e,t){const r=new Map;Ke(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const o=n[i],l=o.transform,c=e.data.field(o.field);r.set(o.field,LD(l,c,t[i]))}return r}function Ww(n,e,t){const r=new Map;for(const i of n){const o=i.transform,l=t.data.field(i.field);r.set(i.field,ND(o,l,e))}return r}class HT extends Rf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zD extends Rf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&jD(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=zc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=zc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=VT();return this.mutations.forEach(i=>{const o=e.get(i.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=t.has(i.key)?null:c;const h=WT(l,c);h!==null&&r.set(i.key,h),l.isValidDocument()||l.convertToNoDocument(De.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ue())}isEqual(e){return this.batchId===e.batchId&&Ja(this.mutations,e.mutations,(t,r)=>zw(t,r))&&Ja(this.baseMutations,e.baseMutations,(t,r)=>zw(t,r))}}class Sy{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ke(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return AD}();const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new Sy(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,We;function HD(n){switch(n){case ne.OK:return Ce(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Ce(15467,{code:n})}}function qT(n){if(n===void 0)return Di("GRPC error has no .code"),ne.UNKNOWN;switch(n){case Ct.OK:return ne.OK;case Ct.CANCELLED:return ne.CANCELLED;case Ct.UNKNOWN:return ne.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return ne.INTERNAL;case Ct.UNAVAILABLE:return ne.UNAVAILABLE;case Ct.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Ct.NOT_FOUND:return ne.NOT_FOUND;case Ct.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Ct.ABORTED:return ne.ABORTED;case Ct.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Ct.DATA_LOSS:return ne.DATA_LOSS;default:return Ce(39323,{code:n})}}(We=Ct||(Ct={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=new Es([4294967295,4294967295],0);function $w(n){const e=qD().encode(n),t=new aT;return t.update(e),new Uint8Array(t.digest())}function Hw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Es([t,r],0),new Es([i,o],0)]}class Iy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ac(`Invalid padding: ${t}`);if(r<0)throw new Ac(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ac(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ac(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Es.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Es.fromNumber(r)));return i.compare(YD)===1&&(i=new Es([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=$w(e),[r,i]=Hw(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,i,o);if(!this.we(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Iy(o,i,t);return r.forEach(c=>l.insert(c)),l}insert(e){if(this.ge===0)return;const t=$w(e),[r,i]=Hw(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,i,o);this.Se(l)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Ac extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,xu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Df(De.min(),i,new pt(je),Oi(),Ue())}}class xu{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new xu(r,t,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class YT{constructor(e,t){this.targetId=e,this.Ce=t}}class GT{constructor(e,t,r=en.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class qw{constructor(){this.ve=0,this.Fe=Yw(),this.Me=en.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ue(),t=Ue(),r=Ue();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ce(38017,{changeType:o})}}),new xu(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Yw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class GD{constructor(e){this.Ge=e,this.ze=new Map,this.je=Oi(),this.Je=td(),this.He=td(),this.Ye=new pt(je)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const o=i.target;if(Tg(o))if(r===0){const l=new Te(o.path);this.et(t,l,un.newNoDocument(l,De.min()))}else Ke(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const c=this.ut(e),h=c?this.ct(c,e,l):1;if(h!==0){this.it(t);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let l,c;try{l=Cs(r).toUint8Array()}catch(h){if(h instanceof _T)return Xc("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new Iy(l,i,o)}catch(h){return Xc(h instanceof Ac?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const l=this.Ge.ht(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(t,o,null),i++)}),i}Tt(e){const t=new Map;this.ze.forEach((o,l)=>{const c=this.ot(l);if(c){if(o.current&&Tg(c.target)){const h=new Te(c.target.path);this.It(h).has(l)||this.Et(l,h)||this.et(l,h,un.newNoDocument(h,e))}o.Be&&(t.set(l,o.ke()),o.qe())}});let r=Ue();this.He.forEach((o,l)=>{let c=!0;l.forEachWhile(h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.je.forEach((o,l)=>l.setReadTime(e));const i=new Df(e,t,this.Ye,this.je,r);return this.je=Oi(),this.Je=td(),this.He=td(),this.Ye=new pt(je),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new qw,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new jt(je),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new jt(je),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||_e("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new qw),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function td(){return new pt(Te.comparator)}function Yw(){return new pt(Te.comparator)}const KD={asc:"ASCENDING",desc:"DESCENDING"},QD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XD={and:"AND",or:"OR"};class JD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ig(n,e){return n.useProto3Json||If(e)?e:{value:e}}function Jd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ZD(n,e){return Jd(n,e.toTimestamp())}function Zr(n){return Ke(!!n,49232),De.fromTimestamp(function(t){const r=Ps(t);return new at(r.seconds,r.nanos)}(n))}function ky(n,e){return kg(n,e).canonicalString()}function kg(n,e){const t=function(i){return new rt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function QT(n){const e=rt.fromString(n);return Ke(t1(e),10190,{key:e.toString()}),e}function Pg(n,e){return ky(n.databaseId,e.path)}function Lm(n,e){const t=QT(e);if(t.get(1)!==n.databaseId.projectId)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new me(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te(JT(t))}function XT(n,e){return ky(n.databaseId,e)}function e2(n){const e=QT(n);return e.length===4?rt.emptyPath():JT(e)}function Cg(n){return new rt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function JT(n){return Ke(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Gw(n,e,t){return{name:Pg(n,e),fields:t.value.mapValue.fields}}function t2(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ce(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(Ke(m===void 0||typeof m=="string",58123),en.fromBase64String(m||"")):(Ke(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),en.fromUint8Array(m||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(f){const m=f.code===void 0?ne.UNKNOWN:qT(f.code);return new me(m,f.message||"")}(l);t=new GT(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Lm(n,r.document.name),o=Zr(r.document.updateTime),l=r.document.createTime?Zr(r.document.createTime):De.min(),c=new Cn({mapValue:{fields:r.document.fields}}),h=un.newFoundDocument(i,o,l,c),f=r.targetIds||[],m=r.removedTargetIds||[];t=new Ad(f,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Lm(n,r.document),o=r.readTime?Zr(r.readTime):De.min(),l=un.newNoDocument(i,o),c=r.removedTargetIds||[];t=new Ad([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Lm(n,r.document),o=r.removedTargetIds||[];t=new Ad([],o,i,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,l=new $D(i,o),c=r.targetId;t=new YT(c,l)}}return t}function n2(n,e){let t;if(e instanceof wu)t={update:Gw(n,e.key,e.value)};else if(e instanceof HT)t={delete:Pg(n,e.key)};else if(e instanceof Vs)t={update:Gw(n,e.key,e.data),updateMask:h2(e.fieldMask)};else{if(!(e instanceof zD))return Ce(16599,{Vt:e.type});t={verify:Pg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const c=l.transform;if(c instanceof Qd)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ru)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof iu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Xd)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw Ce(20930,{transform:l.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:ZD(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ce(27497)}(n,e.precondition)),t}function r2(n,e){return n&&n.length>0?(Ke(e!==void 0,14353),n.map(t=>function(i,o){let l=i.updateTime?Zr(i.updateTime):Zr(o);return l.isEqual(De.min())&&(l=Zr(o)),new FD(l,i.transformResults||[])}(t,e))):[]}function i2(n,e){return{documents:[XT(n,e.path)]}}function s2(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=XT(n,i);const o=function(f){if(f.length!==0)return e1(Ir.create(f,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const l=function(f){if(f.length!==0)return f.map(m=>function(w){return{field:Ba(w.field),direction:l2(w.dir)}}(m))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=Ig(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:t,parent:i}}function o2(n){let e=e2(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ke(r===1,65062);const m=t.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=function(y){const w=ZT(y);return w instanceof Ir&&PT(w)?w.getFilters():[w]}(t.where));let l=[];t.orderBy&&(l=function(y){return y.map(w=>function(I){return new nu(Wa(I.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(w))}(t.orderBy));let c=null;t.limit&&(c=function(y){let w;return w=typeof y=="object"?y.value:y,If(w)?null:w}(t.limit));let h=null;t.startAt&&(h=function(y){const w=!!y.before,T=y.values||[];return new Gd(T,w)}(t.startAt));let f=null;return t.endAt&&(f=function(y){const w=!y.before,T=y.values||[];return new Gd(T,w)}(t.endAt)),SD(e,i,l,o,c,"F",h,f)}function a2(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ZT(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Wa(t.unaryFilter.field);return At.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Wa(t.unaryFilter.field);return At.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Wa(t.unaryFilter.field);return At.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Wa(t.unaryFilter.field);return At.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}}(n):n.fieldFilter!==void 0?function(t){return At.create(Wa(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ir.create(t.compositeFilter.filters.map(r=>ZT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}}(t.compositeFilter.op))}(n):Ce(30097,{filter:n})}function l2(n){return KD[n]}function c2(n){return QD[n]}function u2(n){return XD[n]}function Ba(n){return{fieldPath:n.canonicalString()}}function Wa(n){return Jt.fromServerFormat(n.fieldPath)}function e1(n){return n instanceof At?function(t){if(t.op==="=="){if(Nw(t.value))return{unaryFilter:{field:Ba(t.field),op:"IS_NAN"}};if(Mw(t.value))return{unaryFilter:{field:Ba(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Nw(t.value))return{unaryFilter:{field:Ba(t.field),op:"IS_NOT_NAN"}};if(Mw(t.value))return{unaryFilter:{field:Ba(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ba(t.field),op:c2(t.op),value:t.value}}}(n):n instanceof Ir?function(t){const r=t.getFilters().map(i=>e1(i));return r.length===1?r[0]:{compositeFilter:{op:u2(t.op),filters:r}}}(n):Ce(54877,{filter:n})}function h2(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function t1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,t,r,i,o=De.min(),l=De.min(),c=en.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new ms(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e){this.yt=e}}function f2(n){const e=o2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Kd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(){this.Cn=new m2}addToCollectionParentIndex(e,t){return this.Cn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(ks.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(ks.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class m2{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new jt(rt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new jt(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},n1=41943040;class Pn{static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(n1,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new tl(0)}static cr(){return new tl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="LruGarbageCollector",r1=1048576;function Xw([n,e],[t,r]){const i=je(n,t);return i===0?je(e,r):i}class g2{constructor(e){this.Ir=e,this.buffer=new jt(Xw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Xw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class y2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){_e(Qw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){dl(t)?_e(Qw,"Ignoring IndexedDB error during garbage collection: ",t):await hl(t)}await this.Vr(3e5)})}}class _2{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return oe.resolve(Sf.ce);const r=new g2(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(Kw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kw):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,l,c,h,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,l=Date.now(),this.nthSequenceNumber(e,i))).next(y=>(r=y,c=Date.now(),this.removeTargets(e,r,t))).next(y=>(o=y,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(f=Date.now(),Ua()<=Fe.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-m}ms
	Determined least recently used ${i} in `+(c-l)+`ms
	Removed ${o} targets in `+(h-c)+`ms
	Removed ${y} documents in `+(f-h)+`ms
Total Duration: ${f-m}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:y})))}}function v2(n,e){return new _2(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(){this.changes=new Uo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&zc(r.mutation,i,$n.empty(),at.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ue()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ue()){const i=To();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let l=Cc();return o.forEach((c,h)=>{l=l.insert(c,h.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=To();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ue()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((l,c)=>{t.set(l,c)})})}computeViews(e,t,r,i){let o=Oi();const l=Uc(),c=function(){return Uc()}();return t.forEach((h,f)=>{const m=r.get(f.key);i.has(f.key)&&(m===void 0||m.mutation instanceof Vs)?o=o.insert(f.key,f):m!==void 0?(l.set(f.key,m.mutation.getFieldMask()),zc(m.mutation,f,m.mutation.getFieldMask(),at.now())):l.set(f.key,$n.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,m)=>l.set(f,m)),t.forEach((f,m)=>c.set(f,new x2(m,l.get(f)??null))),c))}recalculateAndSaveOverlays(e,t){const r=Uc();let i=new pt((l,c)=>l-c),o=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const c of l)c.keys().forEach(h=>{const f=t.get(h);if(f===null)return;let m=r.get(h)||$n.empty();m=c.applyToLocalView(f,m),r.set(h,m);const y=(i.get(c.batchId)||Ue()).add(h);i=i.insert(c.batchId,y)})}).next(()=>{const l=[],c=i.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),f=h.key,m=h.value,y=VT();m.forEach(w=>{if(!o.has(w)){const T=WT(t.get(w),r.get(w));T!==null&&y.set(w,T),o=o.add(w)}}),l.push(this.documentOverlayCache.saveOverlays(e,f,y))}return oe.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(l){return Te.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):DT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):oe.resolve(To());let c=Jc,h=o;return l.next(f=>oe.forEach(f,(m,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),o.get(m)?oe.resolve():this.remoteDocumentCache.getEntry(e,m).next(w=>{h=h.insert(m,w)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,Ue())).next(m=>({batchId:c,changes:LT(m)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next(r=>{let i=Cc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let l=Cc();return this.indexManager.getCollectionParents(e,o).next(c=>oe.forEach(c,h=>{const f=function(y,w){return new fl(w,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(m=>{m.forEach((y,w)=>{l=l.insert(y,w)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(l=>{o.forEach((h,f)=>{const m=f.getKey();l.get(m)===null&&(l=l.insert(m,un.newInvalidDocument(m)))});let c=Cc();return l.forEach((h,f)=>{const m=o.get(h);m!==void 0&&zc(m.mutation,f,$n.empty(),at.now()),Cf(t,f)&&(c=c.insert(h,f))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return oe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Zr(i.createTime)}}(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:f2(i.bundledQuery),readTime:Zr(i.readTime)}}(t)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(){this.overlays=new pt(Te.comparator),this.qr=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=To();return oe.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const i=To(),o=t.length+1,l=new Te(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const h=c.getNext().value,f=h.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>r&&i.set(h.getKey(),h)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new pt((f,m)=>f-m);const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let m=o.get(f.largestBatchId);m===null&&(m=To(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const c=To(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,m)=>c.set(f,m)),!(c.size()>=i)););return oe.resolve(c)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new WD(t,r));let o=this.qr.get(t);o===void 0&&(o=Ue(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(){this.Qr=new jt($t.$r),this.Ur=new jt($t.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new $t(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new $t(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){const t=new Te(new rt([])),r=new $t(t,e),i=new $t(t,e+1),o=[];return this.Ur.forEachInRange([r,i],l=>{this.Gr(l),o.push(l.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Te(new rt([])),r=new $t(t,e),i=new $t(t,e+1);let o=Ue();return this.Ur.forEachInRange([r,i],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new $t(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class $t{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Te.comparator(e.key,t.key)||je(e.Yr,t.Yr)}static Kr(e,t){return je(e.Yr,t.Yr)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new jt($t.$r)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new BD(o,t,r,i);this.mutationQueue.push(l);for(const c of i)this.Zr=this.Zr.add(new $t(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return oe.resolve(l)}lookupMutationBatch(e,t){return oe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),o=i<0?0:i;return oe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?_y:this.tr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new $t(t,0),i=new $t(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],l=>{const c=this.Xr(l.Yr);o.push(c)}),oe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jt(je);return t.forEach(i=>{const o=new $t(i,0),l=new $t(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],c=>{r=r.add(c.Yr)})}),oe.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Te.isDocumentKey(o)||(o=o.child(""));const l=new $t(new Te(o),0);let c=new jt(je);return this.Zr.forEachWhile(h=>{const f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(c=c.add(h.Yr)),!0)},l),oe.resolve(this.ti(c))}ti(e){const t=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ke(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return oe.forEach(t.mutations,i=>{const o=new $t(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){const r=new $t(t,0),i=this.Zr.firstAfterOrEqual(r);return oe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e){this.ri=e,this.docs=function(){return new pt(Te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,l=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():un.newInvalidDocument(t))}getEntries(e,t){let r=Oi();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():un.newInvalidDocument(i))}),oe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Oi();const l=t.path,c=new Te(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:f,value:{document:m}}=h.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||rD(nD(m),r)<=0||(i.has(m.key)||Cf(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return oe.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Ce(9500)}ii(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new P2(this)}getSize(e){return oe.resolve(this.size)}}class P2 extends w2{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e){this.persistence=e,this.si=new Uo(t=>xy(t),Ey),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.oi=0,this._i=new Py,this.targetCount=0,this.ai=tl.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),oe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new tl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Pr(t),oe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.si.forEach((l,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),oe.waitFor(o).next(()=>i)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(l=>{o.push(i.markPotentiallyOrphaned(e,l))}),oe.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e,t){this.ui={},this.overlays={},this.ci=new Sf(0),this.li=!1,this.li=!0,this.hi=new S2,this.referenceDelegate=e(this),this.Pi=new C2(this),this.indexManager=new p2,this.remoteDocumentCache=function(i){return new k2(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new d2(t),this.Ii=new b2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new T2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new I2(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){_e("MemoryPersistence","Starting transaction:",e);const i=new A2(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return oe.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}}class A2 extends sD{constructor(e){super(),this.currentSequenceNumber=e}}class Cy{constructor(e){this.persistence=e,this.Ri=new Py,this.Vi=null}static mi(e){return new Cy(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.fi,r=>{const i=Te.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,De.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return oe.or([()=>oe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Zd{constructor(e,t){this.persistence=e,this.pi=new Uo(r=>lD(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=v2(this,t)}static mi(e,t){return new Zd(e,t)}Ei(){}di(e){return oe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return oe.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?oe.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,l=>this.br(e,l,t).next(c=>{c||(r++,o.removeEntry(l,De.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),oe.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=kd(e.data.value)),t}br(e,t,r){return oe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return oe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Ue(),i=Ue();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Ay(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return uP()?8:oD(fn())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.ys(e,t).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new R2;return this.Ss(e,t,l).next(c=>{if(o.result=c,this.Vs)return this.bs(e,t,l,c.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(Ua()<=Fe.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",za(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),oe.resolve()):(Ua()<=Fe.DEBUG&&_e("QueryEngine","Query:",za(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Ua()<=Fe.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",za(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xr(t))):oe.resolve())}ys(e,t){if(jw(t))return oe.resolve(null);let r=Xr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Kd(t,null,"F"),r=Xr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=Ue(...o);return this.ps.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,r).next(h=>{const f=this.Ds(t,c);return this.Cs(t,f,l,h.readTime)?this.ys(e,Kd(t,null,"F")):this.vs(e,f,t,h)}))})))}ws(e,t,r,i){return jw(t)||i.isEqual(De.min())?oe.resolve(null):this.ps.getDocuments(e,r).next(o=>{const l=this.Ds(t,o);return this.Cs(t,l,r,i)?oe.resolve(null):(Ua()<=Fe.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),za(t)),this.vs(e,l,t,tD(i,Jc)).next(c=>c))})}Ds(e,t){let r=new jt(MT(e));return t.forEach((i,o)=>{Cf(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return Ua()<=Fe.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",za(t)),this.ps.getDocumentsMatchingQuery(e,t,ks.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry="LocalStore",O2=3e8;class M2{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new pt(je),this.xs=new Uo(o=>xy(o),Ey),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new E2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function N2(n,e,t,r){return new M2(n,e,t,r)}async function s1(n,e){const t=Oe(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],c=[];let h=Ue();for(const f of i){l.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}for(const f of o){c.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}return t.localDocuments.getDocuments(r,h).next(f=>({Ls:f,removedBatchIds:l,addedBatchIds:c}))})})}function L2(n,e){const t=Oe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return function(c,h,f,m){const y=f.batch,w=y.keys();let T=oe.resolve();return w.forEach(I=>{T=T.next(()=>m.getEntry(h,I)).next(k=>{const b=f.docVersions.get(I);Ke(b!==null,48541),k.version.compareTo(b)<0&&(y.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),m.addEntry(k)))})}),T.next(()=>c.mutationQueue.removeMutationBatch(h,y))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=Ue();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(h=h.add(c.batch.mutations[f].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function o1(n){const e=Oe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function V2(n,e){const t=Oe(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const c=[];e.targetChanges.forEach((m,y)=>{const w=i.get(y);if(!w)return;c.push(t.Pi.removeMatchingKeys(o,m.removedDocuments,y).next(()=>t.Pi.addMatchingKeys(o,m.addedDocuments,y)));let T=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?T=T.withResumeToken(en.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):m.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(m.resumeToken,r)),i=i.insert(y,T),function(k,b,N){return k.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=O2?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(w,T,m)&&c.push(t.Pi.updateTargetData(o,T))});let h=Oi(),f=Ue();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push(F2(o,l,e.documentUpdates).next(m=>{h=m.ks,f=m.qs})),!r.isEqual(De.min())){const m=t.Pi.getLastRemoteSnapshotVersion(o).next(y=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(m)}return oe.waitFor(c).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(t.Ms=i,o))}function F2(n,e,t){let r=Ue(),i=Ue();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=Oi();return t.forEach((c,h)=>{const f=o.get(c);h.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(c)),h.isNoDocument()&&h.version.isEqual(De.min())?(e.removeEntry(c,h.readTime),l=l.insert(c,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),l=l.insert(c,h)):_e(Ry,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",h.version)}),{ks:l,qs:i}})}function j2(n,e){const t=Oe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=_y),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function U2(n,e){const t=Oe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,oe.resolve(i)):t.Pi.allocateTargetId(r).next(l=>(i=new ms(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function Ag(n,e,t){const r=Oe(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!dl(l))throw l;_e(Ry,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Jw(n,e,t){const r=Oe(n);let i=De.min(),o=Ue();return r.persistence.runTransaction("Execute query","readwrite",l=>function(h,f,m){const y=Oe(h),w=y.xs.get(m);return w!==void 0?oe.resolve(y.Ms.get(w)):y.Pi.getTargetData(f,m)}(r,l,Xr(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,c.targetId).next(h=>{o=h})}).next(()=>r.Fs.getDocumentsMatchingQuery(l,e,t?i:De.min(),t?o:Ue())).next(c=>(z2(r,kD(e),c),{documents:c,Qs:o})))}function z2(n,e,t){let r=n.Os.get(e)||De.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}class Zw{constructor(){this.activeTargetIds=OD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class B2{constructor(){this.Mo=new Zw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Zw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex="ConnectivityMonitor";class tx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){_e(ex,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){_e(ex,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nd=null;function Rg(){return nd===null?nd=function(){return 268435456+Math.round(2147483648*Math.random())}():nd++,"0x"+nd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="RestConnection",$2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class H2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===qd?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){const l=Rg(),c=this.zo(e,t.toUriEncodedString());_e(Vm,`Sending RPC '${e}' ${l}:`,c,r);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,i,o);const{host:f}=new URL(c),m=al(f);return this.Jo(e,c,h,r,m).then(y=>(_e(Vm,`Received RPC '${e}' ${l}: `,y),y),y=>{throw Xc(Vm,`RPC '${e}' ${l} failed with error: `,y,"url: ",c,"request:",r),y})}Ho(e,t,r,i,o,l){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ul}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){const r=$2[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class Y2 extends H2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){const l=Rg();return new Promise((c,h)=>{const f=new lT;f.setWithCredentials(!0),f.listenOnce(cT.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Id.NO_ERROR:const y=f.getResponseJson();_e(ln,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),c(y);break;case Id.TIMEOUT:_e(ln,`RPC '${e}' ${l} timed out`),h(new me(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Id.HTTP_ERROR:const w=f.getStatus();if(_e(ln,`RPC '${e}' ${l} failed with status:`,w,"response text:",f.getResponseText()),w>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const I=T?.error;if(I&&I.status&&I.message){const k=function(N){const z=N.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(z)>=0?z:ne.UNKNOWN}(I.status);h(new me(k,I.message))}else h(new me(ne.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new me(ne.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:l,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{_e(ln,`RPC '${e}' ${l} completed.`)}});const m=JSON.stringify(i);_e(ln,`RPC '${e}' ${l} sending request:`,i),f.send(t,"POST",m,r,15)})}T_(e,t,r){const i=Rg(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=dT(),c=hT(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const m=o.join("");_e(ln,`Creating RPC '${e}' stream ${i}: ${m}`,h);const y=l.createWebChannel(m,h);this.I_(y);let w=!1,T=!1;const I=new q2({Yo:b=>{T?_e(ln,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(w||(_e(ln,`Opening RPC '${e}' stream ${i} transport.`),y.open(),w=!0),_e(ln,`RPC '${e}' stream ${i} sending:`,b),y.send(b))},Zo:()=>y.close()}),k=(b,N,z)=>{b.listen(N,$=>{try{z($)}catch(te){setTimeout(()=>{throw te},0)}})};return k(y,Pc.EventType.OPEN,()=>{T||(_e(ln,`RPC '${e}' stream ${i} transport opened.`),I.o_())}),k(y,Pc.EventType.CLOSE,()=>{T||(T=!0,_e(ln,`RPC '${e}' stream ${i} transport closed`),I.a_(),this.E_(y))}),k(y,Pc.EventType.ERROR,b=>{T||(T=!0,Xc(ln,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),I.a_(new me(ne.UNAVAILABLE,"The operation could not be completed")))}),k(y,Pc.EventType.MESSAGE,b=>{if(!T){const N=b.data[0];Ke(!!N,16349);const z=N,$=z?.error||z[0]?.error;if($){_e(ln,`RPC '${e}' stream ${i} received error:`,$);const te=$.status;let Q=function(P){const A=Ct[P];if(A!==void 0)return qT(A)}(te),ie=$.message;Q===void 0&&(Q=ne.INTERNAL,ie="Unknown error status: "+te+" with message "+$.message),T=!0,I.a_(new me(Q,ie)),y.close()}else _e(ln,`RPC '${e}' stream ${i} received:`,N),I.u_(N)}}),k(c,uT.STAT_EVENT,b=>{b.stat===vg.PROXY?_e(ln,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===vg.NOPROXY&&_e(ln,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.__()},0),I}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Fm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(n){return new JD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&_e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx="PersistentStream";class l1{constructor(e,t,r,i,o,l,c,h){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new a1(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(Di(t.toString()),Di("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{const i=new me(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return _e(nx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(_e(nx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class G2 extends l1{constructor(e,t,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=t2(this.serializer,e),r=function(o){if(!("targetChange"in o))return De.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?De.min():l.readTime?Zr(l.readTime):De.min()}(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Cg(this.serializer),t.addTarget=function(o,l){let c;const h=l.target;if(c=Tg(h)?{documents:i2(o,h)}:{query:s2(o,h).ft},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=KT(o,l.resumeToken);const f=Ig(o,l.expectedCount);f!==null&&(c.expectedCount=f)}else if(l.snapshotVersion.compareTo(De.min())>0){c.readTime=Jd(o,l.snapshotVersion.toTimestamp());const f=Ig(o,l.expectedCount);f!==null&&(c.expectedCount=f)}return c}(this.serializer,e);const r=a2(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Cg(this.serializer),t.removeTarget=e,this.q_(t)}}class K2 extends l1{constructor(e,t,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=r2(e.writeResults,e.commitTime),r=Zr(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Cg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>n2(this.serializer,r))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{}class X2 extends Q2{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Go(e,kg(t,r),i,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new me(ne.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Ho(e,kg(t,r),i,l,c,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new me(ne.UNKNOWN,l.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class J2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Di(t),this.aa=!1):_e("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo="RemoteStore";class Z2{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(l=>{r.enqueueAndForget(async()=>{zo(this)&&(_e(Lo,"Restarting streams for network reachability change."),await async function(h){const f=Oe(h);f.Ea.add(4),await Eu(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Mf(f)}(this))})}),this.Ra=new J2(r,i)}}async function Mf(n){if(zo(n))for(const e of n.da)await e(!0)}async function Eu(n){for(const e of n.da)await e(!1)}function c1(n,e){const t=Oe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ny(t)?My(t):pl(t).O_()&&Oy(t,e))}function Dy(n,e){const t=Oe(n),r=pl(t);t.Ia.delete(e),r.O_()&&u1(t,e),t.Ia.size===0&&(r.O_()?r.L_():zo(t)&&t.Ra.set("Unknown"))}function Oy(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}pl(n).Y_(e)}function u1(n,e){n.Va.Ue(e),pl(n).Z_(e)}function My(n){n.Va=new GD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),pl(n).start(),n.Ra.ua()}function Ny(n){return zo(n)&&!pl(n).x_()&&n.Ia.size>0}function zo(n){return Oe(n).Ea.size===0}function h1(n){n.Va=void 0}async function eO(n){n.Ra.set("Online")}async function tO(n){n.Ia.forEach((e,t)=>{Oy(n,e)})}async function nO(n,e){h1(n),Ny(n)?(n.Ra.ha(e),My(n)):n.Ra.set("Unknown")}async function rO(n,e,t){if(n.Ra.set("Online"),e instanceof GT&&e.state===2&&e.cause)try{await async function(i,o){const l=o.cause;for(const c of o.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,l),i.Ia.delete(c),i.Va.removeTarget(c))}(n,e)}catch(r){_e(Lo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ef(n,r)}else if(e instanceof Ad?n.Va.Ze(e):e instanceof YT?n.Va.st(e):n.Va.tt(e),!t.isEqual(De.min()))try{const r=await o1(n.localStore);t.compareTo(r)>=0&&await function(o,l){const c=o.Va.Tt(l);return c.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const m=o.Ia.get(f);m&&o.Ia.set(f,m.withResumeToken(h.resumeToken,l))}}),c.targetMismatches.forEach((h,f)=>{const m=o.Ia.get(h);if(!m)return;o.Ia.set(h,m.withResumeToken(en.EMPTY_BYTE_STRING,m.snapshotVersion)),u1(o,h);const y=new ms(m.target,h,f,m.sequenceNumber);Oy(o,y)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t)}catch(r){_e(Lo,"Failed to raise snapshot:",r),await ef(n,r)}}async function ef(n,e,t){if(!dl(e))throw e;n.Ea.add(1),await Eu(n),n.Ra.set("Offline"),t||(t=()=>o1(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{_e(Lo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Mf(n)})}function d1(n,e){return e().catch(t=>ef(n,t,e))}async function Nf(n){const e=Oe(n),t=Rs(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:_y;for(;iO(e);)try{const i=await j2(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,sO(e,i)}catch(i){await ef(e,i)}f1(e)&&p1(e)}function iO(n){return zo(n)&&n.Ta.length<10}function sO(n,e){n.Ta.push(e);const t=Rs(n);t.O_()&&t.X_&&t.ea(e.mutations)}function f1(n){return zo(n)&&!Rs(n).x_()&&n.Ta.length>0}function p1(n){Rs(n).start()}async function oO(n){Rs(n).ra()}async function aO(n){const e=Rs(n);for(const t of n.Ta)e.ea(t.mutations)}async function lO(n,e,t){const r=n.Ta.shift(),i=Sy.from(r,e,t);await d1(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Nf(n)}async function cO(n,e){e&&Rs(n).X_&&await async function(r,i){if(function(l){return HD(l)&&l!==ne.ABORTED}(i.code)){const o=r.Ta.shift();Rs(r).B_(),await d1(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Nf(r)}}(n,e),f1(n)&&p1(n)}async function rx(n,e){const t=Oe(n);t.asyncQueue.verifyOperationInProgress(),_e(Lo,"RemoteStore received new credentials");const r=zo(t);t.Ea.add(3),await Eu(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Mf(t)}async function uO(n,e){const t=Oe(n);e?(t.Ea.delete(2),await Mf(t)):e||(t.Ea.add(2),await Eu(t),t.Ra.set("Unknown"))}function pl(n){return n.ma||(n.ma=function(t,r,i){const o=Oe(t);return o.sa(),new G2(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:eO.bind(null,n),t_:tO.bind(null,n),r_:nO.bind(null,n),H_:rO.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),Ny(n)?My(n):n.Ra.set("Unknown")):(await n.ma.stop(),h1(n))})),n.ma}function Rs(n){return n.fa||(n.fa=function(t,r,i){const o=Oe(t);return o.sa(),new K2(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:oO.bind(null,n),r_:cO.bind(null,n),ta:aO.bind(null,n),na:lO.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await Nf(n)):(await n.fa.stop(),n.Ta.length>0&&(_e(Lo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const l=Date.now()+r,c=new Ly(e,t,l,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vy(n,e){if(Di("AsyncQueue",`${e}: ${n}`),dl(n))return new me(ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{static emptySet(e){return new Ga(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Te.comparator(t.key,r.key):(t,r)=>Te.comparator(t.key,r.key),this.keyedMap=Cc(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ga)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ga;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(){this.ga=new pt(Te.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}}class nl{constructor(e,t,r,i,o,l,c,h,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,o){const l=[];return t.forEach(c=>{l.push({type:0,doc:c})}),new nl(e,t,Ga.emptySet(t),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class dO{constructor(){this.queries=sx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Oe(t),o=i.queries;i.queries=sx(),o.forEach((l,c)=>{for(const h of c.Sa)h.onError(r)})})(this,new me(ne.ABORTED,"Firestore shutting down"))}}function sx(){return new Uo(n=>OT(n),Pf)}async function m1(n,e){const t=Oe(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new hO,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const c=Vy(l,`Initialization of query '${za(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&Fy(t)}async function g1(n,e){const t=Oe(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function fO(n,e){const t=Oe(n);let r=!1;for(const i of e){const o=i.query,l=t.queries.get(o);if(l){for(const c of l.Sa)c.Fa(i)&&(r=!0);l.wa=i}}r&&Fy(t)}function pO(n,e,t){const r=Oe(n),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(t);r.queries.delete(e)}function Fy(n){n.Ca.forEach(e=>{e.next()})}var Dg,ox;(ox=Dg||(Dg={})).Ma="default",ox.Cache="cache";class y1{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new nl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Dg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e){this.key=e}}class v1{constructor(e){this.key=e}}class mO{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ue(),this.mutatedKeys=Ue(),this.eu=MT(e),this.tu=new Ga(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new ix,i=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=i,c=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((m,y)=>{const w=i.get(m),T=Cf(this.query,y)?y:null,I=!!w&&this.mutatedKeys.has(w.key),k=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let b=!1;w&&T?w.data.isEqual(T.data)?I!==k&&(r.track({type:3,doc:T}),b=!0):this.su(w,T)||(r.track({type:2,doc:T}),b=!0,(h&&this.eu(T,h)>0||f&&this.eu(T,f)<0)&&(c=!0)):!w&&T?(r.track({type:0,doc:T}),b=!0):w&&!T&&(r.track({type:1,doc:w}),b=!0,(h||f)&&(c=!0)),b&&(T?(l=l.add(T),o=k?o.add(m):o.delete(m)):(l=l.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{tu:l,iu:r,Cs:c,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort((m,y)=>function(T,I){const k=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:b})}};return k(T)-k(I)}(m.type,y.type)||this.eu(m.doc,y.doc)),this.ou(r),i=i??!1;const c=t&&!i?this._u():[],h=this.Xa.size===0&&this.current&&!i?1:0,f=h!==this.Za;return this.Za=h,l.length!==0||f?{snapshot:new nl(this.query,e.tu,o,l,e.mutatedKeys,h===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ix,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ue(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new v1(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new _1(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=Ue();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return nl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const jy="SyncEngine";class gO{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class yO{constructor(e){this.key=e,this.hu=!1}}class _O{constructor(e,t,r,i,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Uo(c=>OT(c),Pf),this.Iu=new Map,this.Eu=new Set,this.du=new pt(Te.comparator),this.Au=new Map,this.Ru=new Py,this.Vu={},this.mu=new Map,this.fu=tl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function vO(n,e,t=!0){const r=S1(n);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await w1(r,e,t,!0),i}async function wO(n,e){const t=S1(n);await w1(t,e,!0,!1)}async function w1(n,e,t,r){const i=await U2(n.localStore,Xr(e)),o=i.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let c;return r&&(c=await xO(n,e,o,l==="current",i.resumeToken)),n.isPrimaryClient&&t&&c1(n.remoteStore,i),c}async function xO(n,e,t,r,i){n.pu=(y,w,T)=>async function(k,b,N,z){let $=b.view.ru(N);$.Cs&&($=await Jw(k.localStore,b.query,!1).then(({documents:D})=>b.view.ru(D,$)));const te=z&&z.targetChanges.get(b.targetId),Q=z&&z.targetMismatches.get(b.targetId)!=null,ie=b.view.applyChanges($,k.isPrimaryClient,te,Q);return lx(k,b.targetId,ie.au),ie.snapshot}(n,y,w,T);const o=await Jw(n.localStore,e,!0),l=new mO(e,o.Qs),c=l.ru(o.documents),h=xu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=l.applyChanges(c,n.isPrimaryClient,h);lx(n,t,f.au);const m=new gO(e,t,l);return n.Tu.set(e,m),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function EO(n,e,t){const r=Oe(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(l=>!Pf(l,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ag(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Dy(r.remoteStore,i.targetId),Og(r,i.targetId)}).catch(hl)):(Og(r,i.targetId),await Ag(r.localStore,i.targetId,!0))}async function bO(n,e){const t=Oe(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Dy(t.remoteStore,r.targetId))}async function TO(n,e,t){const r=RO(n);try{const i=await function(l,c){const h=Oe(l),f=at.now(),m=c.reduce((T,I)=>T.add(I.key),Ue());let y,w;return h.persistence.runTransaction("Locally write mutations","readwrite",T=>{let I=Oi(),k=Ue();return h.Ns.getEntries(T,m).next(b=>{I=b,I.forEach((N,z)=>{z.isValidDocument()||(k=k.add(N))})}).next(()=>h.localDocuments.getOverlayedDocuments(T,I)).next(b=>{y=b;const N=[];for(const z of c){const $=UD(z,y.get(z.key).overlayedDocument);$!=null&&N.push(new Vs(z.key,$,ST($.value.mapValue),Jr.exists(!0)))}return h.mutationQueue.addMutationBatch(T,f,N,c)}).next(b=>{w=b;const N=b.applyToLocalDocumentSet(y,k);return h.documentOverlayCache.saveOverlays(T,b.batchId,N)})}).then(()=>({batchId:w.batchId,changes:LT(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,c,h){let f=l.Vu[l.currentUser.toKey()];f||(f=new pt(je)),f=f.insert(c,h),l.Vu[l.currentUser.toKey()]=f}(r,i.batchId,t),await bu(r,i.changes),await Nf(r.remoteStore)}catch(i){const o=Vy(i,"Failed to persist write");t.reject(o)}}async function x1(n,e){const t=Oe(n);try{const r=await V2(t.localStore,e);e.targetChanges.forEach((i,o)=>{const l=t.Au.get(o);l&&(Ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.hu=!0:i.modifiedDocuments.size>0?Ke(l.hu,14607):i.removedDocuments.size>0&&(Ke(l.hu,42227),l.hu=!1))}),await bu(t,r,e)}catch(r){await hl(r)}}function ax(n,e,t){const r=Oe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach((o,l)=>{const c=l.view.va(e);c.snapshot&&i.push(c.snapshot)}),function(l,c){const h=Oe(l);h.onlineState=c;let f=!1;h.queries.forEach((m,y)=>{for(const w of y.Sa)w.va(c)&&(f=!0)}),f&&Fy(h)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function SO(n,e,t){const r=Oe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),o=i&&i.key;if(o){let l=new pt(Te.comparator);l=l.insert(o,un.newNoDocument(o,De.min()));const c=Ue().add(o),h=new Df(De.min(),new Map,new pt(je),l,c);await x1(r,h),r.du=r.du.remove(o),r.Au.delete(e),Uy(r)}else await Ag(r.localStore,e,!1).then(()=>Og(r,e,t)).catch(hl)}async function IO(n,e){const t=Oe(n),r=e.batch.batchId;try{const i=await L2(t.localStore,e);b1(t,r,null),E1(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await bu(t,i)}catch(i){await hl(i)}}async function kO(n,e,t){const r=Oe(n);try{const i=await function(l,c){const h=Oe(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return h.mutationQueue.lookupMutationBatch(f,c).next(y=>(Ke(y!==null,37113),m=y.keys(),h.mutationQueue.removeMutationBatch(f,y))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,m,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>h.localDocuments.getDocuments(f,m))})}(r.localStore,e);b1(r,e,t),E1(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await bu(r,i)}catch(i){await hl(i)}}function E1(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function b1(n,e,t){const r=Oe(n);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Og(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||T1(n,r)})}function T1(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Dy(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Uy(n))}function lx(n,e,t){for(const r of t)r instanceof _1?(n.Ru.addReference(r.key,e),PO(n,r)):r instanceof v1?(_e(jy,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||T1(n,r.key)):Ce(19791,{wu:r})}function PO(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(_e(jy,"New document in limbo: "+t),n.Eu.add(r),Uy(n))}function Uy(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Te(rt.fromString(e)),r=n.fu.next();n.Au.set(r,new yO(t)),n.du=n.du.insert(t,r),c1(n.remoteStore,new ms(Xr(by(t.path)),r,"TargetPurposeLimboResolution",Sf.ce))}}async function bu(n,e,t){const r=Oe(n),i=[],o=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach((c,h)=>{l.push(r.pu(h,e,t).then(f=>{if((f||t)&&r.isPrimaryClient){const m=f?!f.fromCache:t?.targetChanges.get(h.targetId)?.current;r.sharedClientState.updateQueryState(h.targetId,m?"current":"not-current")}if(f){i.push(f);const m=Ay.As(h.targetId,f);o.push(m)}}))}),await Promise.all(l),r.Pu.H_(i),await async function(h,f){const m=Oe(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>oe.forEach(f,w=>oe.forEach(w.Es,T=>m.persistence.referenceDelegate.addReference(y,w.targetId,T)).next(()=>oe.forEach(w.ds,T=>m.persistence.referenceDelegate.removeReference(y,w.targetId,T)))))}catch(y){if(!dl(y))throw y;_e(Ry,"Failed to update sequence numbers: "+y)}for(const y of f){const w=y.targetId;if(!y.fromCache){const T=m.Ms.get(w),I=T.snapshotVersion,k=T.withLastLimboFreeSnapshotVersion(I);m.Ms=m.Ms.insert(w,k)}}}(r.localStore,o))}async function CO(n,e){const t=Oe(n);if(!t.currentUser.isEqual(e)){_e(jy,"User change. New user:",e.toKey());const r=await s1(t.localStore,e);t.currentUser=e,function(o,l){o.mu.forEach(c=>{c.forEach(h=>{h.reject(new me(ne.CANCELLED,l))})}),o.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await bu(t,r.Ls)}}function AO(n,e){const t=Oe(n),r=t.Au.get(e);if(r&&r.hu)return Ue().add(r.key);{let i=Ue();const o=t.Iu.get(e);if(!o)return i;for(const l of o){const c=t.Tu.get(l);i=i.unionWith(c.view.nu)}return i}}function S1(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=x1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SO.bind(null,e),e.Pu.H_=fO.bind(null,e.eventManager),e.Pu.yu=pO.bind(null,e.eventManager),e}function RO(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=IO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kO.bind(null,e),e}class tf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Of(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return N2(this.persistence,new D2,e.initialUser,this.serializer)}Cu(e){return new i1(Cy.mi,this.serializer)}Du(e){return new B2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tf.provider={build:()=>new tf};class DO extends tf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ke(this.persistence.referenceDelegate instanceof Zd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new y2(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new i1(r=>Zd.mi(r,t),this.serializer)}}class Mg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ax(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=CO.bind(null,this.syncEngine),await uO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new dO}()}createDatastore(e){const t=Of(e.databaseInfo.databaseId),r=function(o){return new Y2(o)}(e.databaseInfo);return function(o,l,c,h){return new X2(o,l,c,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,l,c){return new Z2(r,i,o,l,c)}(this.localStore,this.datastore,e.asyncQueue,t=>ax(this.syncEngine,t,0),function(){return tx.v()?new tx:new W2}())}createSyncEngine(e,t){return function(i,o,l,c,h,f,m){const y=new _O(i,o,l,c,h,f);return m&&(y.gu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(t){const r=Oe(t);_e(Lo,"RemoteStore shutting down."),r.Ea.add(5),await Eu(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Mg.provider={build:()=>new Mg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Di("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds="FirestoreClient";class OO{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=kn.UNAUTHENTICATED,this.clientId=yy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{_e(Ds,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(_e(Ds,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Vy(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function jm(n,e){n.asyncQueue.verifyOperationInProgress(),_e(Ds,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await s1(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function cx(n,e){n.asyncQueue.verifyOperationInProgress();const t=await MO(n);_e(Ds,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>rx(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>rx(e.remoteStore,i)),n._onlineComponents=e}async function MO(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){_e(Ds,"Using user provided OfflineComponentProvider");try{await jm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===ne.FAILED_PRECONDITION||i.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Xc("Error using user provided cache. Falling back to memory cache: "+t),await jm(n,new tf)}}else _e(Ds,"Using default OfflineComponentProvider"),await jm(n,new DO(void 0));return n._offlineComponents}async function k1(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(_e(Ds,"Using user provided OnlineComponentProvider"),await cx(n,n._uninitializedComponentsProvider._online)):(_e(Ds,"Using default OnlineComponentProvider"),await cx(n,new Mg))),n._onlineComponents}function NO(n){return k1(n).then(e=>e.syncEngine)}async function P1(n){const e=await k1(n),t=e.eventManager;return t.onListen=vO.bind(null,e.syncEngine),t.onUnlisten=EO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=wO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=bO.bind(null,e.syncEngine),t}function LO(n,e,t={}){const r=new Ci;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,c,h,f){const m=new I1({next:w=>{m.Nu(),l.enqueueAndForget(()=>g1(o,y));const T=w.docs.has(c);!T&&w.fromCache?f.reject(new me(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&w.fromCache&&h&&h.source==="server"?f.reject(new me(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(w)},error:w=>f.reject(w)}),y=new y1(by(c.path),m,{includeMetadataChanges:!0,qa:!0});return m1(o,y)}(await P1(n),n.asyncQueue,e,t,r)),r.promise}function VO(n,e,t={}){const r=new Ci;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,c,h,f){const m=new I1({next:w=>{m.Nu(),l.enqueueAndForget(()=>g1(o,y)),w.fromCache&&h.source==="server"?f.reject(new me(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(w)},error:w=>f.reject(w)}),y=new y1(c,m,{includeMetadataChanges:!0,qa:!0});return m1(o,y)}(await P1(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO="firestore.googleapis.com",hx=!0;class dx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new me(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=FO,this.ssl=hx}else this.host=e.host,this.ssl=e.ssl??hx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=n1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<r1)throw new me(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=C1(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new me(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zy{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $R;switch(r.type){case"firstParty":return new YR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new me(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=ux.get(t);r&&(_e("ComponentProvider","Removing Datastore"),ux.delete(t),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fs(this.firestore,e,this._query)}}class xt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}toJSON(){return{type:xt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(vu(t,xt._jsonSchema))return new xt(e,r||null,new Te(rt.fromString(t.referencePath)))}}xt._jsonSchemaVersion="firestore/documentReference/1.0",xt._jsonSchema={type:Rt("string",xt._jsonSchemaVersion),referencePath:Rt("string")};class bs extends Fs{constructor(e,t,r){super(e,t,by(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new Te(e))}withConverter(e){return new bs(this.firestore,e,this._path)}}function nf(n,e,...t){if(n=Ht(n),pT("collection","path",e),n instanceof zy){const r=rt.fromString(e,...t);return Sw(r),new bs(n,null,r)}{if(!(n instanceof xt||n instanceof bs))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(rt.fromString(e,...t));return Sw(r),new bs(n.firestore,null,r)}}function Bo(n,e,...t){if(n=Ht(n),arguments.length===1&&(e=yy.newId()),pT("doc","path",e),n instanceof zy){const r=rt.fromString(e,...t);return Tw(r),new xt(n,null,new Te(r))}{if(!(n instanceof xt||n instanceof bs))throw new me(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(rt.fromString(e,...t));return Tw(r),new xt(n.firestore,n instanceof bs?n.converter:null,new Te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx="AsyncQueue";class px{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new a1(this,"async_queue_retry"),this._c=()=>{const r=Fm();r&&_e(fx,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Fm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Fm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Ci;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!dl(e))throw e;_e(fx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Di("INTERNAL UNHANDLED ERROR: ",mx(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Ly.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&Ce(47125,{Pc:mx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function mx(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Tu extends zy{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new px,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new px(e),this._firestoreClient=void 0,await e}}}function jO(n,e,t){t||(t=qd);const r=oy(n,"firestore");if(r.isInitialized(t)){const i=r.getImmediate({identifier:t}),o=r.getOptions(t);if(Ro(o,e))return i;throw new me(ne.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new me(ne.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<r1)throw new me(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&al(e.host)&&vb(e.host),r.initialize({options:e,instanceIdentifier:t})}function By(n){if(n._terminated)throw new me(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||UO(n),n._firestoreClient}function UO(n){const e=n._freezeSettings(),t=function(i,o,l,c){return new hD(i,o,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,C1(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new OO(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(i){const o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ir(en.fromBase64String(e))}catch(t){throw new me(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ir(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ir._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(vu(e,ir._jsonSchema))return ir.fromBase64String(e.bytes)}}ir._jsonSchemaVersion="firestore/bytes/1.0",ir._jsonSchema={type:Rt("string",ir._jsonSchemaVersion),bytes:Rt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new me(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new me(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new me(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ei._jsonSchemaVersion}}static fromJSON(e){if(vu(e,ei._jsonSchema))return new ei(e.latitude,e.longitude)}}ei._jsonSchemaVersion="firestore/geoPoint/1.0",ei._jsonSchema={type:Rt("string",ei._jsonSchemaVersion),latitude:Rt("number"),longitude:Rt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ti._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(vu(e,ti._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new ti(e.vectorValues);throw new me(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ti._jsonSchemaVersion="firestore/vectorValue/1.0",ti._jsonSchema={type:Rt("string",ti._jsonSchemaVersion),vectorValues:Rt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO=/^__.*__$/;class BO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Vs(e,this.data,this.fieldMask,t,this.fieldTransforms):new wu(e,this.data,t,this.fieldTransforms)}}class A1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Vs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function R1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:n})}}class $y{constructor(e,t,r,i,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new $y({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return rf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(R1(this.Ac)&&zO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class WO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Of(e)}Cc(e,t,r,i=!1){return new $y({Ac:e,methodName:t,Dc:r,path:Jt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hy(n){const e=n._freezeSettings(),t=Of(n._databaseId);return new WO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function $O(n,e,t,r,i,o={}){const l=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);qy("Data must be an object, but it was:",l,r);const c=D1(r,l);let h,f;if(o.merge)h=new $n(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const m=[];for(const y of o.mergeFields){const w=Ng(e,y,t);if(!l.contains(w))throw new me(ne.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);M1(m,w)||m.push(w)}h=new $n(m),f=l.fieldTransforms.filter(y=>h.covers(y.field))}else h=null,f=l.fieldTransforms;return new BO(new Cn(c),h,f)}class Vf extends Wy{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vf}}function HO(n,e,t,r){const i=n.Cc(1,e,t);qy("Data must be an object, but it was:",i,r);const o=[],l=Cn.empty();Ls(r,(h,f)=>{const m=Yy(e,h,t);f=Ht(f);const y=i.yc(m);if(f instanceof Vf)o.push(m);else{const w=Su(f,y);w!=null&&(o.push(m),l.set(m,w))}});const c=new $n(o);return new A1(l,c,i.fieldTransforms)}function qO(n,e,t,r,i,o){const l=n.Cc(1,e,t),c=[Ng(e,r,t)],h=[i];if(o.length%2!=0)throw new me(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)c.push(Ng(e,o[w])),h.push(o[w+1]);const f=[],m=Cn.empty();for(let w=c.length-1;w>=0;--w)if(!M1(f,c[w])){const T=c[w];let I=h[w];I=Ht(I);const k=l.yc(T);if(I instanceof Vf)f.push(T);else{const b=Su(I,k);b!=null&&(f.push(T),m.set(T,b))}}const y=new $n(f);return new A1(m,y,l.fieldTransforms)}function YO(n,e,t,r=!1){return Su(t,n.Cc(r?4:3,e))}function Su(n,e){if(O1(n=Ht(n)))return qy("Unsupported field value:",e,n),D1(n,e);if(n instanceof Wy)return function(r,i){if(!R1(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const o=[];let l=0;for(const c of r){let h=Su(c,i.wc(l));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),l++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Ht(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return MD(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=at.fromDate(r);return{timestampValue:Jd(i.serializer,o)}}if(r instanceof at){const o=new at(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Jd(i.serializer,o)}}if(r instanceof ei)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ir)return{bytesValue:KT(i.serializer,r._byteString)};if(r instanceof xt){const o=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw i.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ky(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ti)return function(l,c){return{mapValue:{fields:{[bT]:{stringValue:TT},[Yd]:{arrayValue:{values:l.toArray().map(f=>{if(typeof f!="number")throw c.Sc("VectorValues must only contain numeric values.");return Ty(c.serializer,f)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Tf(r)}`)}(n,e)}function D1(n,e){const t={};return yT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ls(n,(r,i)=>{const o=Su(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function O1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof at||n instanceof ei||n instanceof ir||n instanceof xt||n instanceof Wy||n instanceof ti)}function qy(n,e,t){if(!O1(t)||!mT(t)){const r=Tf(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function Ng(n,e,t){if((e=Ht(e))instanceof Lf)return e._internalPath;if(typeof e=="string")return Yy(n,e);throw rf("Field path arguments must be of type string or ",n,!1,void 0,t)}const GO=new RegExp("[~\\*/\\[\\]]");function Yy(n,e,t){if(e.search(GO)>=0)throw rf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Lf(...e.split("."))._internalPath}catch{throw rf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function rf(n,e,t,r,i){const o=r&&!r.isEmpty(),l=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${r}`),l&&(h+=` in document ${i}`),h+=")"),new me(ne.INVALID_ARGUMENT,c+n+h)}function M1(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ff("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class KO extends N1{data(){return super.data()}}function Ff(n,e){return typeof e=="string"?Yy(n,e):e instanceof Lf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new me(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gy{}class Ky extends Gy{}function L1(n,e,...t){let r=[];e instanceof Gy&&r.push(e),r=r.concat(t),function(o){const l=o.filter(h=>h instanceof Qy).length,c=o.filter(h=>h instanceof jf).length;if(l>1||l>0&&c>0)throw new me(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class jf extends Ky{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new jf(e,t,r)}_apply(e){const t=this._parse(e);return V1(e._query,t),new Fs(e.firestore,e.converter,Sg(e._query,t))}_parse(e){const t=Hy(e.firestore);return function(o,l,c,h,f,m,y){let w;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new me(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){yx(y,m);const I=[];for(const k of y)I.push(gx(h,o,k));w={arrayValue:{values:I}}}else w=gx(h,o,y)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||yx(y,m),w=YO(c,l,y,m==="in"||m==="not-in");return At.create(f,m,w)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function XO(n,e,t){const r=e,i=Ff("where",n);return jf._create(i,r,t)}class Qy extends Gy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Qy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ir.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let l=i;const c=o.getFlattenedFilters();for(const h of c)V1(l,h),l=Sg(l,h)}(e._query,t),new Fs(e.firestore,e.converter,Sg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Xy extends Ky{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Xy(e,t)}_apply(e){const t=function(i,o,l){if(i.startAt!==null)throw new me(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new me(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new nu(o,l)}(e._query,this._field,this._direction);return new Fs(e.firestore,e.converter,function(i,o){const l=i.explicitOrderBy.concat([o]);return new fl(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function JO(n,e="asc"){const t=e,r=Ff("orderBy",n);return Xy._create(r,t)}class Jy extends Ky{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Jy(e,t,r)}_apply(e){return new Fs(e.firestore,e.converter,Kd(e._query,this._limit,this._limitType))}}function ZO(n){return eD("limit",n),Jy._create("limit",n,"F")}function gx(n,e,t){if(typeof(t=Ht(t))=="string"){if(t==="")throw new me(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!DT(e)&&t.indexOf("/")!==-1)throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(rt.fromString(t));if(!Te.isDocumentKey(r))throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ow(n,new Te(r))}if(t instanceof xt)return Ow(n,t._key);throw new me(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tf(t)}.`)}function yx(n,e){if(!Array.isArray(n)||n.length===0)throw new me(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function V1(n,e){const t=function(i,o){for(const l of i)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new me(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class eM{convertValue(e,t="none"){switch(As(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ls(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){const t=e.fields?.[Yd].arrayValue?.values?.map(r=>wt(r.doubleValue));return new ti(t)}convertGeoPoint(e){return new ei(wt(e.latitude),wt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=kf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Zc(e));default:return null}}convertTimestamp(e){const t=Ps(e);return new at(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=rt.fromString(e);Ke(t1(r),9688,{name:e});const i=new eu(r.get(1),r.get(3)),o=new Te(r.popFirst(5));return i.isEqual(t)||Di(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Rc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Po extends N1{constructor(e,t,r,i,o,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Rd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ff("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Po._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Po._jsonSchemaVersion="firestore/documentSnapshot/1.0",Po._jsonSchema={type:Rt("string",Po._jsonSchemaVersion),bundleSource:Rt("string","DocumentSnapshot"),bundleName:Rt("string"),bundle:Rt("string")};class Rd extends Po{data(e={}){return super.data(e)}}class Ka{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Rc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Rd(this._firestore,this._userDataWriter,r.key,r,new Rc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new me(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(c=>{const h=new Rd(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Rc(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const h=new Rd(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Rc(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,m=-1;return c.type!==0&&(f=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),m=l.indexOf(c.doc.key)),{type:nM(c.type),doc:h,oldIndex:f,newIndex:m}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ka._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=yy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function nM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(n){n=Is(n,xt);const e=Is(n.firestore,Tu);return LO(By(e),n._key).then(t=>iM(e,n,t))}Ka._jsonSchemaVersion="firestore/querySnapshot/1.0",Ka._jsonSchema={type:Rt("string",Ka._jsonSchemaVersion),bundleSource:Rt("string","QuerySnapshot"),bundleName:Rt("string"),bundle:Rt("string")};class F1 extends eM{constructor(e){super(),this.firestore=e}convertBytes(e){return new ir(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,t)}}function sf(n){n=Is(n,Fs);const e=Is(n.firestore,Tu),t=By(e),r=new F1(e);return QO(n._query),VO(t,n._query).then(i=>new Ka(e,r,n,i))}function e_(n,e,t){n=Is(n,xt);const r=Is(n.firestore,Tu),i=tM(n.converter,e,t);return j1(r,[$O(Hy(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Jr.none())])}function rM(n,e,t,...r){n=Is(n,xt);const i=Is(n.firestore,Tu),o=Hy(i);let l;return l=typeof(e=Ht(e))=="string"||e instanceof Lf?qO(o,"updateDoc",n._key,e,t,r):HO(o,"updateDoc",n._key,e),j1(i,[l.toMutation(n._key,Jr.exists(!0))])}function j1(n,e){return function(r,i){const o=new Ci;return r.asyncQueue.enqueueAndForget(async()=>TO(await NO(r),i,o)),o.promise}(By(n),e)}function iM(n,e,t){const r=t.docs.get(e._key),i=new F1(n);return new Po(n,i,e._key,r,new Rc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){ul=i})(ll),Xa(new Do("firestore",(r,{instanceIdentifier:i,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new Tu(new HR(r.getProvider("auth-internal")),new GR(l,r.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new me(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eu(f.options.projectId,m)}(l,i),l);return o={useFetchStreams:t,...o},c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),xs(ww,xw,e),xs(ww,xw,"esm2020")})();const xr={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},sM=n=>typeof n=="string"&&n.length>8?n.slice(0,4)+""+n.slice(-4):String(n);if(!xr.apiKey||xr.apiKey==="undefined"||xr.apiKey==="null")throw console.error("[Firebase] Variables manquantes au build:",{apiKey:xr.apiKey?sM(xr.apiKey):"(absente)",authDomain:xr.authDomain||"(absent)",projectId:xr.projectId||"(absent)",storageBucket:xr.storageBucket||"(absent)",messagingSenderId:xr.messagingSenderId||"(absent)",appId:xr.appId||"(absent)"}),new Error("Firebase config invalide: VITE_FIREBASE_API_KEY absente ct frontend build");const t_=Eb(xr),Dd=my(t_),kr=jO(t_,{experimentalForceLongPolling:!0,useFetchStreams:!1});async function Um(n,{method:e="GET",token:t,body:r}={}){const i="https://utc-api.onrender.com".replace(/\/+$/,"")||"",o={"Content-Type":"application/json"};t&&(o.Authorization=`Bearer ${t}`);const l=await fetch(`${i}${n}`,{method:e,headers:o,body:r?JSON.stringify(r):void 0});if(!l.ok){const c=await l.text().catch(()=>"");throw new Error(`API ${l.status} ${l.statusText}: ${c}`)}return l.json()}const oM=W.createContext(),aM=({children:n})=>{const e=W.useMemo(()=>my(t_),[]),[t,r]=W.useState(null),[i,o]=W.useState(null),[l,c]=W.useState(!0),h=W.useCallback(async m=>{try{const y=await m.getIdToken();await Um("/me/init",{token:y});const w=await Um("/me/portfolio",{token:y});o(w||{cash:1e4,positions:[],history:[]})}catch(y){console.error("[UserContext] loadPortfolio error:",y),o({cash:1e4,positions:[],history:[]})}},[]),f=W.useCallback(async m=>{try{if(!t)return;const y=await t.getIdToken();await Um("/me/portfolio",{method:"POST",token:y,body:m}),o(m)}catch(y){console.error("[UserContext] savePortfolio error:",y)}},[t]);return W.useEffect(()=>{const m=Qb(e,async y=>{c(!0),y?(r(y),await h(y)):(r(null),o(null)),c(!1)});return()=>m()},[e,h]),x.jsx(oM.Provider,{value:{user:t,portfolio:i,setPortfolio:f,loading:l},children:n})};var rd={},zm={exports:{}},Sn={},Bm={exports:{}},Wm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _x;function lM(){return _x||(_x=1,function(n){function e(ae,J){var R=ae.length;ae.push(J);e:for(;0<R;){var F=R-1>>>1,q=ae[F];if(0<i(q,J))ae[F]=J,ae[R]=q,R=F;else break e}}function t(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var J=ae[0],R=ae.pop();if(R!==J){ae[0]=R;e:for(var F=0,q=ae.length,K=q>>>1;F<K;){var he=2*(F+1)-1,ge=ae[he],Ee=he+1,Ae=ae[Ee];if(0>i(ge,R))Ee<q&&0>i(Ae,ge)?(ae[F]=Ae,ae[Ee]=R,F=Ee):(ae[F]=ge,ae[he]=R,F=he);else if(Ee<q&&0>i(Ae,R))ae[F]=Ae,ae[Ee]=R,F=Ee;else break e}}return J}function i(ae,J){var R=ae.sortIndex-J.sortIndex;return R!==0?R:ae.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var h=[],f=[],m=1,y=null,w=3,T=!1,I=!1,k=!1,b=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(ae){for(var J=t(f);J!==null;){if(J.callback===null)r(f);else if(J.startTime<=ae)r(f),J.sortIndex=J.expirationTime,e(h,J);else break;J=t(f)}}function te(ae){if(k=!1,$(ae),!I)if(t(h)!==null)I=!0,Se(Q);else{var J=t(f);J!==null&&re(te,J.startTime-ae)}}function Q(ae,J){I=!1,k&&(k=!1,N(P),P=-1),T=!0;var R=w;try{for($(J),y=t(h);y!==null&&(!(y.expirationTime>J)||ae&&!L());){var F=y.callback;if(typeof F=="function"){y.callback=null,w=y.priorityLevel;var q=F(y.expirationTime<=J);J=n.unstable_now(),typeof q=="function"?y.callback=q:y===t(h)&&r(h),$(J)}else r(h);y=t(h)}if(y!==null)var K=!0;else{var he=t(f);he!==null&&re(te,he.startTime-J),K=!1}return K}finally{y=null,w=R,T=!1}}var ie=!1,D=null,P=-1,A=5,V=-1;function L(){return!(n.unstable_now()-V<A)}function j(){if(D!==null){var ae=n.unstable_now();V=ae;var J=!0;try{J=D(!0,ae)}finally{J?O():(ie=!1,D=null)}}else ie=!1}var O;if(typeof z=="function")O=function(){z(j)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,fe=se.port2;se.port1.onmessage=j,O=function(){fe.postMessage(null)}}else O=function(){b(j,0)};function Se(ae){D=ae,ie||(ie=!0,O())}function re(ae,J){P=b(function(){ae(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ae){ae.callback=null},n.unstable_continueExecution=function(){I||T||(I=!0,Se(Q))},n.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ae?Math.floor(1e3/ae):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(ae){switch(w){case 1:case 2:case 3:var J=3;break;default:J=w}var R=w;w=J;try{return ae()}finally{w=R}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ae,J){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var R=w;w=ae;try{return J()}finally{w=R}},n.unstable_scheduleCallback=function(ae,J,R){var F=n.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?F+R:F):R=F,ae){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=R+q,ae={id:m++,callback:J,priorityLevel:ae,startTime:R,expirationTime:q,sortIndex:-1},R>F?(ae.sortIndex=R,e(f,ae),t(h)===null&&ae===t(f)&&(k?(N(P),P=-1):k=!0,re(te,R-F))):(ae.sortIndex=q,e(h,ae),I||T||(I=!0,Se(Q))),ae},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(ae){var J=w;return function(){var R=w;w=J;try{return ae.apply(this,arguments)}finally{w=R}}}}(Wm)),Wm}var vx;function cM(){return vx||(vx=1,Bm.exports=lM()),Bm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wx;function uM(){if(wx)return Sn;wx=1;var n=ry(),e=cM();function t(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(s,a){l(s,a),l(s+"Capture",a)}function l(s,a){for(i[s]=a,s=0;s<a.length;s++)r.add(a[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function w(s){return h.call(y,s)?!0:h.call(m,s)?!1:f.test(s)?y[s]=!0:(m[s]=!0,!1)}function T(s,a,u,p){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function I(s,a,u,p){if(a===null||typeof a>"u"||T(s,a,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function k(s,a,u,p,g,v,S){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=p,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=s,this.type=a,this.sanitizeURL=v,this.removeEmptyString=S}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){b[s]=new k(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];b[a]=new k(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){b[s]=new k(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){b[s]=new k(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){b[s]=new k(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){b[s]=new k(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){b[s]=new k(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){b[s]=new k(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){b[s]=new k(s,5,!1,s.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function z(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(N,z);b[a]=new k(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(N,z);b[a]=new k(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(N,z);b[a]=new k(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){b[s]=new k(s,1,!1,s.toLowerCase(),null,!1,!1)}),b.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){b[s]=new k(s,1,!1,s.toLowerCase(),null,!0,!0)});function $(s,a,u,p){var g=b.hasOwnProperty(a)?b[a]:null;(g!==null?g.type!==0:p||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(I(a,u,g,p)&&(u=null),p||g===null?w(a)&&(u===null?s.removeAttribute(a):s.setAttribute(a,""+u)):g.mustUseProperty?s[g.propertyName]=u===null?g.type===3?!1:"":u:(a=g.attributeName,p=g.attributeNamespace,u===null?s.removeAttribute(a):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,p?s.setAttributeNS(p,a,u):s.setAttribute(a,u))))}var te=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Q=Symbol.for("react.element"),ie=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),L=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),fe=Symbol.for("react.memo"),Se=Symbol.for("react.lazy"),re=Symbol.for("react.offscreen"),ae=Symbol.iterator;function J(s){return s===null||typeof s!="object"?null:(s=ae&&s[ae]||s["@@iterator"],typeof s=="function"?s:null)}var R=Object.assign,F;function q(s){if(F===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);F=a&&a[1]||""}return`
`+F+s}var K=!1;function he(s,a){if(!s||K)return"";K=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(X){var p=X}Reflect.construct(s,[],a)}else{try{a.call()}catch(X){p=X}s.call(a.prototype)}else{try{throw Error()}catch(X){p=X}s()}}catch(X){if(X&&p&&typeof X.stack=="string"){for(var g=X.stack.split(`
`),v=p.stack.split(`
`),S=g.length-1,M=v.length-1;1<=S&&0<=M&&g[S]!==v[M];)M--;for(;1<=S&&0<=M;S--,M--)if(g[S]!==v[M]){if(S!==1||M!==1)do if(S--,M--,0>M||g[S]!==v[M]){var U=`
`+g[S].replace(" at new "," at ");return s.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",s.displayName)),U}while(1<=S&&0<=M);break}}}finally{K=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?q(s):""}function ge(s){switch(s.tag){case 5:return q(s.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return s=he(s.type,!1),s;case 11:return s=he(s.type.render,!1),s;case 1:return s=he(s.type,!0),s;default:return""}}function Ee(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case D:return"Fragment";case ie:return"Portal";case A:return"Profiler";case P:return"StrictMode";case O:return"Suspense";case se:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case L:return(s.displayName||"Context")+".Consumer";case V:return(s._context.displayName||"Context")+".Provider";case j:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case fe:return a=s.displayName||null,a!==null?a:Ee(s.type)||"Memo";case Se:a=s._payload,s=s._init;try{return Ee(s(a))}catch{}}return null}function Ae(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ee(a);case 8:return a===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Ne(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function et(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Dt(s){var a=et(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),p=""+s[a];if(!s.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,v=u.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return g.call(this)},set:function(S){p=""+S,v.call(this,S)}}),Object.defineProperty(s,a,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(S){p=""+S},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function tn(s){s._valueTracker||(s._valueTracker=Dt(s))}function nn(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),p="";return s&&(p=et(s)?s.checked?"true":"false":s.value),s=p,s!==u?(a.setValue(s),!0):!1}function Ni(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function zs(s,a){var u=a.checked;return R({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function qo(s,a){var u=a.defaultValue==null?"":a.defaultValue,p=a.checked!=null?a.checked:a.defaultChecked;u=Ne(a.value!=null?a.value:u),s._wrapperState={initialChecked:p,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function xl(s,a){a=a.checked,a!=null&&$(s,"checked",a,!1)}function El(s,a){xl(s,a);var u=Ne(a.value),p=a.type;if(u!=null)p==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(p==="submit"||p==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?Yo(s,a.type,u):a.hasOwnProperty("defaultValue")&&Yo(s,a.type,Ne(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function Lu(s,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var p=a.type;if(!(p!=="submit"&&p!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,u||a===s.value||(s.value=a),s.defaultValue=a}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function Yo(s,a,u){(a!=="number"||Ni(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var si=Array.isArray;function oi(s,a,u,p){if(s=s.options,a){a={};for(var g=0;g<u.length;g++)a["$"+u[g]]=!0;for(u=0;u<s.length;u++)g=a.hasOwnProperty("$"+s[u].value),s[u].selected!==g&&(s[u].selected=g),g&&p&&(s[u].defaultSelected=!0)}else{for(u=""+Ne(u),a=null,g=0;g<s.length;g++){if(s[g].value===u){s[g].selected=!0,p&&(s[g].defaultSelected=!0);return}a!==null||s[g].disabled||(a=s[g])}a!==null&&(a.selected=!0)}}function bl(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return R({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Go(s,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(si(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}s._wrapperState={initialValue:Ne(u)}}function Ko(s,a){var u=Ne(a.value),p=Ne(a.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),a.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),p!=null&&(s.defaultValue=""+p)}function Tl(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function Ot(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mt(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?Ot(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var ai,Sl=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,p,g){MSApp.execUnsafeLocalFunction(function(){return s(a,u,p,g)})}:s}(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(ai=ai||document.createElement("div"),ai.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=ai.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function Li(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var Bs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ws=["Webkit","ms","Moz","O"];Object.keys(Bs).forEach(function(s){Ws.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),Bs[a]=Bs[s]})});function Il(s,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||Bs.hasOwnProperty(s)&&Bs[s]?(""+a).trim():a+"px"}function kl(s,a){s=s.style;for(var u in a)if(a.hasOwnProperty(u)){var p=u.indexOf("--")===0,g=Il(u,a[u],p);u==="float"&&(u="cssFloat"),p?s.setProperty(u,g):s[u]=g}}var Pl=R({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Cl(s,a){if(a){if(Pl[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Al(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $s=null;function Qo(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Xo=null,Hn=null,Ar=null;function Jo(s){if(s=ec(s)){if(typeof Xo!="function")throw Error(t(280));var a=s.stateNode;a&&(a=dh(a),Xo(s.stateNode,s.type,a))}}function Rr(s){Hn?Ar?Ar.push(s):Ar=[s]:Hn=s}function Rl(){if(Hn){var s=Hn,a=Ar;if(Ar=Hn=null,Jo(s),a)for(s=0;s<a.length;s++)Jo(a[s])}}function Hs(s,a){return s(a)}function Dl(){}var li=!1;function Ol(s,a,u){if(li)return s(a,u);li=!0;try{return Hs(s,a,u)}finally{li=!1,(Hn!==null||Ar!==null)&&(Dl(),Rl())}}function _t(s,a){var u=s.stateNode;if(u===null)return null;var p=dh(u);if(p===null)return null;u=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var Zo=!1;if(c)try{var or={};Object.defineProperty(or,"passive",{get:function(){Zo=!0}}),window.addEventListener("test",or,or),window.removeEventListener("test",or,or)}catch{Zo=!1}function qs(s,a,u,p,g,v,S,M,U){var X=Array.prototype.slice.call(arguments,3);try{a.apply(u,X)}catch(ce){this.onError(ce)}}var Ys=!1,ea=null,ar=!1,Ml=null,ep={onError:function(s){Ys=!0,ea=s}};function ta(s,a,u,p,g,v,S,M,U){Ys=!1,ea=null,qs.apply(ep,arguments)}function Vu(s,a,u,p,g,v,S,M,U){if(ta.apply(this,arguments),Ys){if(Ys){var X=ea;Ys=!1,ea=null}else throw Error(t(198));ar||(ar=!0,Ml=X)}}function lr(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function Gs(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function cr(s){if(lr(s)!==s)throw Error(t(188))}function Fu(s){var a=s.alternate;if(!a){if(a=lr(s),a===null)throw Error(t(188));return a!==s?null:s}for(var u=s,p=a;;){var g=u.return;if(g===null)break;var v=g.alternate;if(v===null){if(p=g.return,p!==null){u=p;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===u)return cr(g),s;if(v===p)return cr(g),a;v=v.sibling}throw Error(t(188))}if(u.return!==p.return)u=g,p=v;else{for(var S=!1,M=g.child;M;){if(M===u){S=!0,u=g,p=v;break}if(M===p){S=!0,p=g,u=v;break}M=M.sibling}if(!S){for(M=v.child;M;){if(M===u){S=!0,u=v,p=g;break}if(M===p){S=!0,p=v,u=g;break}M=M.sibling}if(!S)throw Error(t(189))}}if(u.alternate!==p)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?s:a}function Nl(s){return s=Fu(s),s!==null?na(s):null}function na(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=na(s);if(a!==null)return a;s=s.sibling}return null}var ra=e.unstable_scheduleCallback,Ll=e.unstable_cancelCallback,ju=e.unstable_shouldYield,tp=e.unstable_requestPaint,tt=e.unstable_now,Uu=e.unstable_getCurrentPriorityLevel,Ks=e.unstable_ImmediatePriority,Vi=e.unstable_UserBlockingPriority,qn=e.unstable_NormalPriority,Vl=e.unstable_LowPriority,zu=e.unstable_IdlePriority,Qs=null,Mn=null;function Bu(s){if(Mn&&typeof Mn.onCommitFiberRoot=="function")try{Mn.onCommitFiberRoot(Qs,s,void 0,(s.current.flags&128)===128)}catch{}}var pn=Math.clz32?Math.clz32:$u,Fl=Math.log,Wu=Math.LN2;function $u(s){return s>>>=0,s===0?32:31-(Fl(s)/Wu|0)|0}var ia=64,sa=4194304;function Fi(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Xs(s,a){var u=s.pendingLanes;if(u===0)return 0;var p=0,g=s.suspendedLanes,v=s.pingedLanes,S=u&268435455;if(S!==0){var M=S&~g;M!==0?p=Fi(M):(v&=S,v!==0&&(p=Fi(v)))}else S=u&~g,S!==0?p=Fi(S):v!==0&&(p=Fi(v));if(p===0)return 0;if(a!==0&&a!==p&&(a&g)===0&&(g=p&-p,v=a&-a,g>=v||g===16&&(v&4194240)!==0))return a;if((p&4)!==0&&(p|=u&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=p;0<a;)u=31-pn(a),g=1<<u,p|=s[u],a&=~g;return p}function np(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ci(s,a){for(var u=s.suspendedLanes,p=s.pingedLanes,g=s.expirationTimes,v=s.pendingLanes;0<v;){var S=31-pn(v),M=1<<S,U=g[S];U===-1?((M&u)===0||(M&p)!==0)&&(g[S]=np(M,a)):U<=a&&(s.expiredLanes|=M),v&=~M}}function Nn(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Js(){var s=ia;return ia<<=1,(ia&4194240)===0&&(ia=64),s}function ji(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function Ui(s,a,u){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-pn(a),s[a]=u}function Ze(s,a){var u=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var p=s.eventTimes;for(s=s.expirationTimes;0<u;){var g=31-pn(u),v=1<<g;a[g]=0,p[g]=-1,s[g]=-1,u&=~v}}function zi(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var p=31-pn(u),g=1<<p;g&a|s[p]&a&&(s[p]|=a),u&=~g}}var ze=0;function Bi(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Hu,oa,qu,Yu,Gu,jl=!1,Dr=[],qt=null,ur=null,hr=null,Wi=new Map,Yn=new Map,Or=[],rp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ku(s,a){switch(s){case"focusin":case"focusout":qt=null;break;case"dragenter":case"dragleave":ur=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":Wi.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yn.delete(a.pointerId)}}function _n(s,a,u,p,g,v){return s===null||s.nativeEvent!==v?(s={blockedOn:a,domEventName:u,eventSystemFlags:p,nativeEvent:v,targetContainers:[g]},a!==null&&(a=ec(a),a!==null&&oa(a)),s):(s.eventSystemFlags|=p,a=s.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),s)}function ip(s,a,u,p,g){switch(a){case"focusin":return qt=_n(qt,s,a,u,p,g),!0;case"dragenter":return ur=_n(ur,s,a,u,p,g),!0;case"mouseover":return hr=_n(hr,s,a,u,p,g),!0;case"pointerover":var v=g.pointerId;return Wi.set(v,_n(Wi.get(v)||null,s,a,u,p,g)),!0;case"gotpointercapture":return v=g.pointerId,Yn.set(v,_n(Yn.get(v)||null,s,a,u,p,g)),!0}return!1}function Qu(s){var a=ro(s.target);if(a!==null){var u=lr(a);if(u!==null){if(a=u.tag,a===13){if(a=Gs(u),a!==null){s.blockedOn=a,Gu(s.priority,function(){qu(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function ui(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=aa(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var p=new u.constructor(u.type,u);$s=p,u.target.dispatchEvent(p),$s=null}else return a=ec(u),a!==null&&oa(a),s.blockedOn=u,!1;a.shift()}return!0}function Zs(s,a,u){ui(s)&&u.delete(a)}function Xu(){jl=!1,qt!==null&&ui(qt)&&(qt=null),ur!==null&&ui(ur)&&(ur=null),hr!==null&&ui(hr)&&(hr=null),Wi.forEach(Zs),Yn.forEach(Zs)}function dr(s,a){s.blockedOn===a&&(s.blockedOn=null,jl||(jl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Xu)))}function fr(s){function a(g){return dr(g,s)}if(0<Dr.length){dr(Dr[0],s);for(var u=1;u<Dr.length;u++){var p=Dr[u];p.blockedOn===s&&(p.blockedOn=null)}}for(qt!==null&&dr(qt,s),ur!==null&&dr(ur,s),hr!==null&&dr(hr,s),Wi.forEach(a),Yn.forEach(a),u=0;u<Or.length;u++)p=Or[u],p.blockedOn===s&&(p.blockedOn=null);for(;0<Or.length&&(u=Or[0],u.blockedOn===null);)Qu(u),u.blockedOn===null&&Or.shift()}var hi=te.ReactCurrentBatchConfig,$i=!0;function ct(s,a,u,p){var g=ze,v=hi.transition;hi.transition=null;try{ze=1,Ul(s,a,u,p)}finally{ze=g,hi.transition=v}}function sp(s,a,u,p){var g=ze,v=hi.transition;hi.transition=null;try{ze=4,Ul(s,a,u,p)}finally{ze=g,hi.transition=v}}function Ul(s,a,u,p){if($i){var g=aa(s,a,u,p);if(g===null)gp(s,a,p,eo,u),Ku(s,p);else if(ip(g,s,a,u,p))p.stopPropagation();else if(Ku(s,p),a&4&&-1<rp.indexOf(s)){for(;g!==null;){var v=ec(g);if(v!==null&&Hu(v),v=aa(s,a,u,p),v===null&&gp(s,a,p,eo,u),v===g)break;g=v}g!==null&&p.stopPropagation()}else gp(s,a,p,null,u)}}var eo=null;function aa(s,a,u,p){if(eo=null,s=Qo(p),s=ro(s),s!==null)if(a=lr(s),a===null)s=null;else if(u=a.tag,u===13){if(s=Gs(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return eo=s,null}function zl(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Uu()){case Ks:return 1;case Vi:return 4;case qn:case Vl:return 16;case zu:return 536870912;default:return 16}default:return 16}}var Ln=null,la=null,vn=null;function Bl(){if(vn)return vn;var s,a=la,u=a.length,p,g="value"in Ln?Ln.value:Ln.textContent,v=g.length;for(s=0;s<u&&a[s]===g[s];s++);var S=u-s;for(p=1;p<=S&&a[u-p]===g[v-p];p++);return vn=g.slice(s,1<p?1-p:void 0)}function ca(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Mr(){return!0}function Wl(){return!1}function Yt(s){function a(u,p,g,v,S){this._reactName=u,this._targetInst=g,this.type=p,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var M in s)s.hasOwnProperty(M)&&(u=s[M],this[M]=u?u(v):v[M]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Mr:Wl,this.isPropagationStopped=Wl,this}return R(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Mr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Mr)},persist:function(){},isPersistent:Mr}),a}var pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ua=Yt(pr),Nr=R({},pr,{view:0,detail:0}),op=Yt(Nr),ha,di,Hi,to=R({},Nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Hi&&(Hi&&s.type==="mousemove"?(ha=s.screenX-Hi.screenX,di=s.screenY-Hi.screenY):di=ha=0,Hi=s),ha)},movementY:function(s){return"movementY"in s?s.movementY:di}}),da=Yt(to),$l=R({},to,{dataTransfer:0}),Ju=Yt($l),fa=R({},Nr,{relatedTarget:0}),pa=Yt(fa),Zu=R({},pr,{animationName:0,elapsedTime:0,pseudoElement:0}),fi=Yt(Zu),eh=R({},pr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),th=Yt(eh),nh=R({},pr,{data:0}),Hl=Yt(nh),ma={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ih(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=rh[s])?!!a[s]:!1}function Lr(){return ih}var d=R({},Nr,{key:function(s){if(s.key){var a=ma[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=ca(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?mn[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lr,charCode:function(s){return s.type==="keypress"?ca(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ca(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),_=Yt(d),E=R({},to,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),C=Yt(E),H=R({},Nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lr}),Z=Yt(H),pe=R({},pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qe=Yt(pe),Nt=R({},to,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Be=Yt(Nt),Ut=[9,13,27,32],kt=c&&"CompositionEvent"in window,Gn=null;c&&"documentMode"in document&&(Gn=document.documentMode);var Vn=c&&"TextEvent"in window&&!Gn,no=c&&(!kt||Gn&&8<Gn&&11>=Gn),ga=" ",D_=!1;function O_(s,a){switch(s){case"keyup":return Ut.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function M_(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ya=!1;function VI(s,a){switch(s){case"compositionend":return M_(a);case"keypress":return a.which!==32?null:(D_=!0,ga);case"textInput":return s=a.data,s===ga&&D_?null:s;default:return null}}function FI(s,a){if(ya)return s==="compositionend"||!kt&&O_(s,a)?(s=Bl(),vn=la=Ln=null,ya=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return no&&a.locale!=="ko"?null:a.data;default:return null}}var jI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function N_(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!jI[s.type]:a==="textarea"}function L_(s,a,u,p){Rr(p),a=ch(a,"onChange"),0<a.length&&(u=new ua("onChange","change",null,u,p),s.push({event:u,listeners:a}))}var ql=null,Yl=null;function UI(s){e0(s,0)}function sh(s){var a=Ea(s);if(nn(a))return s}function zI(s,a){if(s==="change")return a}var V_=!1;if(c){var ap;if(c){var lp="oninput"in document;if(!lp){var F_=document.createElement("div");F_.setAttribute("oninput","return;"),lp=typeof F_.oninput=="function"}ap=lp}else ap=!1;V_=ap&&(!document.documentMode||9<document.documentMode)}function j_(){ql&&(ql.detachEvent("onpropertychange",U_),Yl=ql=null)}function U_(s){if(s.propertyName==="value"&&sh(Yl)){var a=[];L_(a,Yl,s,Qo(s)),Ol(UI,a)}}function BI(s,a,u){s==="focusin"?(j_(),ql=a,Yl=u,ql.attachEvent("onpropertychange",U_)):s==="focusout"&&j_()}function WI(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return sh(Yl)}function $I(s,a){if(s==="click")return sh(a)}function HI(s,a){if(s==="input"||s==="change")return sh(a)}function qI(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var mr=typeof Object.is=="function"?Object.is:qI;function Gl(s,a){if(mr(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),p=Object.keys(a);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var g=u[p];if(!h.call(a,g)||!mr(s[g],a[g]))return!1}return!0}function z_(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function B_(s,a){var u=z_(s);s=0;for(var p;u;){if(u.nodeType===3){if(p=s+u.textContent.length,s<=a&&p>=a)return{node:u,offset:a-s};s=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=z_(u)}}function W_(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?W_(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function $_(){for(var s=window,a=Ni();a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=Ni(s.document)}return a}function cp(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function YI(s){var a=$_(),u=s.focusedElem,p=s.selectionRange;if(a!==u&&u&&u.ownerDocument&&W_(u.ownerDocument.documentElement,u)){if(p!==null&&cp(u)){if(a=p.start,s=p.end,s===void 0&&(s=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(s,u.value.length);else if(s=(a=u.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var g=u.textContent.length,v=Math.min(p.start,g);p=p.end===void 0?v:Math.min(p.end,g),!s.extend&&v>p&&(g=p,p=v,v=g),g=B_(u,v);var S=B_(u,p);g&&S&&(s.rangeCount!==1||s.anchorNode!==g.node||s.anchorOffset!==g.offset||s.focusNode!==S.node||s.focusOffset!==S.offset)&&(a=a.createRange(),a.setStart(g.node,g.offset),s.removeAllRanges(),v>p?(s.addRange(a),s.extend(S.node,S.offset)):(a.setEnd(S.node,S.offset),s.addRange(a)))}}for(a=[],s=u;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)s=a[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var GI=c&&"documentMode"in document&&11>=document.documentMode,_a=null,up=null,Kl=null,hp=!1;function H_(s,a,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;hp||_a==null||_a!==Ni(p)||(p=_a,"selectionStart"in p&&cp(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Kl&&Gl(Kl,p)||(Kl=p,p=ch(up,"onSelect"),0<p.length&&(a=new ua("onSelect","select",null,a,u),s.push({event:a,listeners:p}),a.target=_a)))}function oh(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var va={animationend:oh("Animation","AnimationEnd"),animationiteration:oh("Animation","AnimationIteration"),animationstart:oh("Animation","AnimationStart"),transitionend:oh("Transition","TransitionEnd")},dp={},q_={};c&&(q_=document.createElement("div").style,"AnimationEvent"in window||(delete va.animationend.animation,delete va.animationiteration.animation,delete va.animationstart.animation),"TransitionEvent"in window||delete va.transitionend.transition);function ah(s){if(dp[s])return dp[s];if(!va[s])return s;var a=va[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in q_)return dp[s]=a[u];return s}var Y_=ah("animationend"),G_=ah("animationiteration"),K_=ah("animationstart"),Q_=ah("transitionend"),X_=new Map,J_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qi(s,a){X_.set(s,a),o(a,[s])}for(var fp=0;fp<J_.length;fp++){var pp=J_[fp],KI=pp.toLowerCase(),QI=pp[0].toUpperCase()+pp.slice(1);qi(KI,"on"+QI)}qi(Y_,"onAnimationEnd"),qi(G_,"onAnimationIteration"),qi(K_,"onAnimationStart"),qi("dblclick","onDoubleClick"),qi("focusin","onFocus"),qi("focusout","onBlur"),qi(Q_,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ql));function Z_(s,a,u){var p=s.type||"unknown-event";s.currentTarget=u,Vu(p,a,void 0,s),s.currentTarget=null}function e0(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var p=s[u],g=p.event;p=p.listeners;e:{var v=void 0;if(a)for(var S=p.length-1;0<=S;S--){var M=p[S],U=M.instance,X=M.currentTarget;if(M=M.listener,U!==v&&g.isPropagationStopped())break e;Z_(g,M,X),v=U}else for(S=0;S<p.length;S++){if(M=p[S],U=M.instance,X=M.currentTarget,M=M.listener,U!==v&&g.isPropagationStopped())break e;Z_(g,M,X),v=U}}}if(ar)throw s=Ml,ar=!1,Ml=null,s}function it(s,a){var u=a[Ep];u===void 0&&(u=a[Ep]=new Set);var p=s+"__bubble";u.has(p)||(t0(a,s,2,!1),u.add(p))}function mp(s,a,u){var p=0;a&&(p|=4),t0(u,s,p,a)}var lh="_reactListening"+Math.random().toString(36).slice(2);function Xl(s){if(!s[lh]){s[lh]=!0,r.forEach(function(u){u!=="selectionchange"&&(XI.has(u)||mp(u,!1,s),mp(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[lh]||(a[lh]=!0,mp("selectionchange",!1,a))}}function t0(s,a,u,p){switch(zl(a)){case 1:var g=ct;break;case 4:g=sp;break;default:g=Ul}u=g.bind(null,a,u,s),g=void 0,!Zo||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),p?g!==void 0?s.addEventListener(a,u,{capture:!0,passive:g}):s.addEventListener(a,u,!0):g!==void 0?s.addEventListener(a,u,{passive:g}):s.addEventListener(a,u,!1)}function gp(s,a,u,p,g){var v=p;if((a&1)===0&&(a&2)===0&&p!==null)e:for(;;){if(p===null)return;var S=p.tag;if(S===3||S===4){var M=p.stateNode.containerInfo;if(M===g||M.nodeType===8&&M.parentNode===g)break;if(S===4)for(S=p.return;S!==null;){var U=S.tag;if((U===3||U===4)&&(U=S.stateNode.containerInfo,U===g||U.nodeType===8&&U.parentNode===g))return;S=S.return}for(;M!==null;){if(S=ro(M),S===null)return;if(U=S.tag,U===5||U===6){p=v=S;continue e}M=M.parentNode}}p=p.return}Ol(function(){var X=v,ce=Qo(u),ue=[];e:{var le=X_.get(s);if(le!==void 0){var ye=ua,we=s;switch(s){case"keypress":if(ca(u)===0)break e;case"keydown":case"keyup":ye=_;break;case"focusin":we="focus",ye=pa;break;case"focusout":we="blur",ye=pa;break;case"beforeblur":case"afterblur":ye=pa;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=da;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=Ju;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=Z;break;case Y_:case G_:case K_:ye=fi;break;case Q_:ye=Qe;break;case"scroll":ye=op;break;case"wheel":ye=Be;break;case"copy":case"cut":case"paste":ye=th;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=C}var xe=(a&4)!==0,vt=!xe&&s==="scroll",Y=xe?le!==null?le+"Capture":null:le;xe=[];for(var B=X,G;B!==null;){G=B;var de=G.stateNode;if(G.tag===5&&de!==null&&(G=de,Y!==null&&(de=_t(B,Y),de!=null&&xe.push(Jl(B,de,G)))),vt)break;B=B.return}0<xe.length&&(le=new ye(le,we,null,u,ce),ue.push({event:le,listeners:xe}))}}if((a&7)===0){e:{if(le=s==="mouseover"||s==="pointerover",ye=s==="mouseout"||s==="pointerout",le&&u!==$s&&(we=u.relatedTarget||u.fromElement)&&(ro(we)||we[pi]))break e;if((ye||le)&&(le=ce.window===ce?ce:(le=ce.ownerDocument)?le.defaultView||le.parentWindow:window,ye?(we=u.relatedTarget||u.toElement,ye=X,we=we?ro(we):null,we!==null&&(vt=lr(we),we!==vt||we.tag!==5&&we.tag!==6)&&(we=null)):(ye=null,we=X),ye!==we)){if(xe=da,de="onMouseLeave",Y="onMouseEnter",B="mouse",(s==="pointerout"||s==="pointerover")&&(xe=C,de="onPointerLeave",Y="onPointerEnter",B="pointer"),vt=ye==null?le:Ea(ye),G=we==null?le:Ea(we),le=new xe(de,B+"leave",ye,u,ce),le.target=vt,le.relatedTarget=G,de=null,ro(ce)===X&&(xe=new xe(Y,B+"enter",we,u,ce),xe.target=G,xe.relatedTarget=vt,de=xe),vt=de,ye&&we)t:{for(xe=ye,Y=we,B=0,G=xe;G;G=wa(G))B++;for(G=0,de=Y;de;de=wa(de))G++;for(;0<B-G;)xe=wa(xe),B--;for(;0<G-B;)Y=wa(Y),G--;for(;B--;){if(xe===Y||Y!==null&&xe===Y.alternate)break t;xe=wa(xe),Y=wa(Y)}xe=null}else xe=null;ye!==null&&n0(ue,le,ye,xe,!1),we!==null&&vt!==null&&n0(ue,vt,we,xe,!0)}}e:{if(le=X?Ea(X):window,ye=le.nodeName&&le.nodeName.toLowerCase(),ye==="select"||ye==="input"&&le.type==="file")var be=zI;else if(N_(le))if(V_)be=HI;else{be=WI;var Ie=BI}else(ye=le.nodeName)&&ye.toLowerCase()==="input"&&(le.type==="checkbox"||le.type==="radio")&&(be=$I);if(be&&(be=be(s,X))){L_(ue,be,u,ce);break e}Ie&&Ie(s,le,X),s==="focusout"&&(Ie=le._wrapperState)&&Ie.controlled&&le.type==="number"&&Yo(le,"number",le.value)}switch(Ie=X?Ea(X):window,s){case"focusin":(N_(Ie)||Ie.contentEditable==="true")&&(_a=Ie,up=X,Kl=null);break;case"focusout":Kl=up=_a=null;break;case"mousedown":hp=!0;break;case"contextmenu":case"mouseup":case"dragend":hp=!1,H_(ue,u,ce);break;case"selectionchange":if(GI)break;case"keydown":case"keyup":H_(ue,u,ce)}var ke;if(kt)e:{switch(s){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else ya?O_(s,u)&&(Re="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Re="onCompositionStart");Re&&(no&&u.locale!=="ko"&&(ya||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&ya&&(ke=Bl()):(Ln=ce,la="value"in Ln?Ln.value:Ln.textContent,ya=!0)),Ie=ch(X,Re),0<Ie.length&&(Re=new Hl(Re,s,null,u,ce),ue.push({event:Re,listeners:Ie}),ke?Re.data=ke:(ke=M_(u),ke!==null&&(Re.data=ke)))),(ke=Vn?VI(s,u):FI(s,u))&&(X=ch(X,"onBeforeInput"),0<X.length&&(ce=new Hl("onBeforeInput","beforeinput",null,u,ce),ue.push({event:ce,listeners:X}),ce.data=ke))}e0(ue,a)})}function Jl(s,a,u){return{instance:s,listener:a,currentTarget:u}}function ch(s,a){for(var u=a+"Capture",p=[];s!==null;){var g=s,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=_t(s,u),v!=null&&p.unshift(Jl(s,v,g)),v=_t(s,a),v!=null&&p.push(Jl(s,v,g))),s=s.return}return p}function wa(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function n0(s,a,u,p,g){for(var v=a._reactName,S=[];u!==null&&u!==p;){var M=u,U=M.alternate,X=M.stateNode;if(U!==null&&U===p)break;M.tag===5&&X!==null&&(M=X,g?(U=_t(u,v),U!=null&&S.unshift(Jl(u,U,M))):g||(U=_t(u,v),U!=null&&S.push(Jl(u,U,M)))),u=u.return}S.length!==0&&s.push({event:a,listeners:S})}var JI=/\r\n?/g,ZI=/\u0000|\uFFFD/g;function r0(s){return(typeof s=="string"?s:""+s).replace(JI,`
`).replace(ZI,"")}function uh(s,a,u){if(a=r0(a),r0(s)!==a&&u)throw Error(t(425))}function hh(){}var yp=null,_p=null;function vp(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var wp=typeof setTimeout=="function"?setTimeout:void 0,ek=typeof clearTimeout=="function"?clearTimeout:void 0,i0=typeof Promise=="function"?Promise:void 0,tk=typeof queueMicrotask=="function"?queueMicrotask:typeof i0<"u"?function(s){return i0.resolve(null).then(s).catch(nk)}:wp;function nk(s){setTimeout(function(){throw s})}function xp(s,a){var u=a,p=0;do{var g=u.nextSibling;if(s.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(p===0){s.removeChild(g),fr(a);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=g}while(u);fr(a)}function Yi(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function s0(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return s;a--}else u==="/$"&&a++}s=s.previousSibling}return null}var xa=Math.random().toString(36).slice(2),Vr="__reactFiber$"+xa,Zl="__reactProps$"+xa,pi="__reactContainer$"+xa,Ep="__reactEvents$"+xa,rk="__reactListeners$"+xa,ik="__reactHandles$"+xa;function ro(s){var a=s[Vr];if(a)return a;for(var u=s.parentNode;u;){if(a=u[pi]||u[Vr]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=s0(s);s!==null;){if(u=s[Vr])return u;s=s0(s)}return a}s=u,u=s.parentNode}return null}function ec(s){return s=s[Vr]||s[pi],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Ea(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function dh(s){return s[Zl]||null}var bp=[],ba=-1;function Gi(s){return{current:s}}function st(s){0>ba||(s.current=bp[ba],bp[ba]=null,ba--)}function nt(s,a){ba++,bp[ba]=s.current,s.current=a}var Ki={},rn=Gi(Ki),wn=Gi(!1),io=Ki;function Ta(s,a){var u=s.type.contextTypes;if(!u)return Ki;var p=s.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===a)return p.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in u)g[v]=a[v];return p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=g),g}function xn(s){return s=s.childContextTypes,s!=null}function fh(){st(wn),st(rn)}function o0(s,a,u){if(rn.current!==Ki)throw Error(t(168));nt(rn,a),nt(wn,u)}function a0(s,a,u){var p=s.stateNode;if(a=a.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var g in p)if(!(g in a))throw Error(t(108,Ae(s)||"Unknown",g));return R({},u,p)}function ph(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Ki,io=rn.current,nt(rn,s),nt(wn,wn.current),!0}function l0(s,a,u){var p=s.stateNode;if(!p)throw Error(t(169));u?(s=a0(s,a,io),p.__reactInternalMemoizedMergedChildContext=s,st(wn),st(rn),nt(rn,s)):st(wn),nt(wn,u)}var mi=null,mh=!1,Tp=!1;function c0(s){mi===null?mi=[s]:mi.push(s)}function sk(s){mh=!0,c0(s)}function Qi(){if(!Tp&&mi!==null){Tp=!0;var s=0,a=ze;try{var u=mi;for(ze=1;s<u.length;s++){var p=u[s];do p=p(!0);while(p!==null)}mi=null,mh=!1}catch(g){throw mi!==null&&(mi=mi.slice(s+1)),ra(Ks,Qi),g}finally{ze=a,Tp=!1}}return null}var Sa=[],Ia=0,gh=null,yh=0,Kn=[],Qn=0,so=null,gi=1,yi="";function oo(s,a){Sa[Ia++]=yh,Sa[Ia++]=gh,gh=s,yh=a}function u0(s,a,u){Kn[Qn++]=gi,Kn[Qn++]=yi,Kn[Qn++]=so,so=s;var p=gi;s=yi;var g=32-pn(p)-1;p&=~(1<<g),u+=1;var v=32-pn(a)+g;if(30<v){var S=g-g%5;v=(p&(1<<S)-1).toString(32),p>>=S,g-=S,gi=1<<32-pn(a)+g|u<<g|p,yi=v+s}else gi=1<<v|u<<g|p,yi=s}function Sp(s){s.return!==null&&(oo(s,1),u0(s,1,0))}function Ip(s){for(;s===gh;)gh=Sa[--Ia],Sa[Ia]=null,yh=Sa[--Ia],Sa[Ia]=null;for(;s===so;)so=Kn[--Qn],Kn[Qn]=null,yi=Kn[--Qn],Kn[Qn]=null,gi=Kn[--Qn],Kn[Qn]=null}var Fn=null,jn=null,ut=!1,gr=null;function h0(s,a){var u=er(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=s,a=s.deletions,a===null?(s.deletions=[u],s.flags|=16):a.push(u)}function d0(s,a){switch(s.tag){case 5:var u=s.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,Fn=s,jn=Yi(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,Fn=s,jn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=so!==null?{id:gi,overflow:yi}:null,s.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=er(18,null,null,0),u.stateNode=a,u.return=s,s.child=u,Fn=s,jn=null,!0):!1;default:return!1}}function kp(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Pp(s){if(ut){var a=jn;if(a){var u=a;if(!d0(s,a)){if(kp(s))throw Error(t(418));a=Yi(u.nextSibling);var p=Fn;a&&d0(s,a)?h0(p,u):(s.flags=s.flags&-4097|2,ut=!1,Fn=s)}}else{if(kp(s))throw Error(t(418));s.flags=s.flags&-4097|2,ut=!1,Fn=s}}}function f0(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Fn=s}function _h(s){if(s!==Fn)return!1;if(!ut)return f0(s),ut=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!vp(s.type,s.memoizedProps)),a&&(a=jn)){if(kp(s))throw p0(),Error(t(418));for(;a;)h0(s,a),a=Yi(a.nextSibling)}if(f0(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(a===0){jn=Yi(s.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}s=s.nextSibling}jn=null}}else jn=Fn?Yi(s.stateNode.nextSibling):null;return!0}function p0(){for(var s=jn;s;)s=Yi(s.nextSibling)}function ka(){jn=Fn=null,ut=!1}function Cp(s){gr===null?gr=[s]:gr.push(s)}var ok=te.ReactCurrentBatchConfig;function yr(s,a){if(s&&s.defaultProps){a=R({},a),s=s.defaultProps;for(var u in s)a[u]===void 0&&(a[u]=s[u]);return a}return a}var vh=Gi(null),wh=null,Pa=null,Ap=null;function Rp(){Ap=Pa=wh=null}function Dp(s){var a=vh.current;st(vh),s._currentValue=a}function Op(s,a,u){for(;s!==null;){var p=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),s===u)break;s=s.return}}function Ca(s,a){wh=s,Ap=Pa=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&(En=!0),s.firstContext=null)}function Xn(s){var a=s._currentValue;if(Ap!==s)if(s={context:s,memoizedValue:a,next:null},Pa===null){if(wh===null)throw Error(t(308));Pa=s,wh.dependencies={lanes:0,firstContext:s}}else Pa=Pa.next=s;return a}var ao=null;function Mp(s){ao===null?ao=[s]:ao.push(s)}function m0(s,a,u,p){var g=a.interleaved;return g===null?(u.next=u,Mp(a)):(u.next=g.next,g.next=u),a.interleaved=u,_i(s,p)}function _i(s,a){s.lanes|=a;var u=s.alternate;for(u!==null&&(u.lanes|=a),u=s,s=s.return;s!==null;)s.childLanes|=a,u=s.alternate,u!==null&&(u.childLanes|=a),u=s,s=s.return;return u.tag===3?u.stateNode:null}var Xi=!1;function Np(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function g0(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function vi(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function Ji(s,a,u){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,($e&2)!==0){var g=p.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),p.pending=a,_i(s,u)}return g=p.interleaved,g===null?(a.next=a,Mp(p)):(a.next=g.next,g.next=a),p.interleaved=a,_i(s,u)}function xh(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var p=a.lanes;p&=s.pendingLanes,u|=p,a.lanes=u,zi(s,u)}}function y0(s,a){var u=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var g=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var S={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};v===null?g=v=S:v=v.next=S,u=u.next}while(u!==null);v===null?g=v=a:v=v.next=a}else g=v=a;u={baseState:p.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:p.shared,effects:p.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}function Eh(s,a,u,p){var g=s.updateQueue;Xi=!1;var v=g.firstBaseUpdate,S=g.lastBaseUpdate,M=g.shared.pending;if(M!==null){g.shared.pending=null;var U=M,X=U.next;U.next=null,S===null?v=X:S.next=X,S=U;var ce=s.alternate;ce!==null&&(ce=ce.updateQueue,M=ce.lastBaseUpdate,M!==S&&(M===null?ce.firstBaseUpdate=X:M.next=X,ce.lastBaseUpdate=U))}if(v!==null){var ue=g.baseState;S=0,ce=X=U=null,M=v;do{var le=M.lane,ye=M.eventTime;if((p&le)===le){ce!==null&&(ce=ce.next={eventTime:ye,lane:0,tag:M.tag,payload:M.payload,callback:M.callback,next:null});e:{var we=s,xe=M;switch(le=a,ye=u,xe.tag){case 1:if(we=xe.payload,typeof we=="function"){ue=we.call(ye,ue,le);break e}ue=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=xe.payload,le=typeof we=="function"?we.call(ye,ue,le):we,le==null)break e;ue=R({},ue,le);break e;case 2:Xi=!0}}M.callback!==null&&M.lane!==0&&(s.flags|=64,le=g.effects,le===null?g.effects=[M]:le.push(M))}else ye={eventTime:ye,lane:le,tag:M.tag,payload:M.payload,callback:M.callback,next:null},ce===null?(X=ce=ye,U=ue):ce=ce.next=ye,S|=le;if(M=M.next,M===null){if(M=g.shared.pending,M===null)break;le=M,M=le.next,le.next=null,g.lastBaseUpdate=le,g.shared.pending=null}}while(!0);if(ce===null&&(U=ue),g.baseState=U,g.firstBaseUpdate=X,g.lastBaseUpdate=ce,a=g.shared.interleaved,a!==null){g=a;do S|=g.lane,g=g.next;while(g!==a)}else v===null&&(g.shared.lanes=0);uo|=S,s.lanes=S,s.memoizedState=ue}}function _0(s,a,u){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var p=s[a],g=p.callback;if(g!==null){if(p.callback=null,p=u,typeof g!="function")throw Error(t(191,g));g.call(p)}}}var v0=new n.Component().refs;function Lp(s,a,u,p){a=s.memoizedState,u=u(p,a),u=u==null?a:R({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var bh={isMounted:function(s){return(s=s._reactInternals)?lr(s)===s:!1},enqueueSetState:function(s,a,u){s=s._reactInternals;var p=yn(),g=ns(s),v=vi(p,g);v.payload=a,u!=null&&(v.callback=u),a=Ji(s,v,g),a!==null&&(wr(a,s,g,p),xh(a,s,g))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var p=yn(),g=ns(s),v=vi(p,g);v.tag=1,v.payload=a,u!=null&&(v.callback=u),a=Ji(s,v,g),a!==null&&(wr(a,s,g,p),xh(a,s,g))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=yn(),p=ns(s),g=vi(u,p);g.tag=2,a!=null&&(g.callback=a),a=Ji(s,g,p),a!==null&&(wr(a,s,p,u),xh(a,s,p))}};function w0(s,a,u,p,g,v,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,v,S):a.prototype&&a.prototype.isPureReactComponent?!Gl(u,p)||!Gl(g,v):!0}function x0(s,a,u){var p=!1,g=Ki,v=a.contextType;return typeof v=="object"&&v!==null?v=Xn(v):(g=xn(a)?io:rn.current,p=a.contextTypes,v=(p=p!=null)?Ta(s,g):Ki),a=new a(u,v),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=bh,s.stateNode=a,a._reactInternals=s,p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=g,s.__reactInternalMemoizedMaskedChildContext=v),a}function E0(s,a,u,p){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,p),a.state!==s&&bh.enqueueReplaceState(a,a.state,null)}function Vp(s,a,u,p){var g=s.stateNode;g.props=u,g.state=s.memoizedState,g.refs=v0,Np(s);var v=a.contextType;typeof v=="object"&&v!==null?g.context=Xn(v):(v=xn(a)?io:rn.current,g.context=Ta(s,v)),g.state=s.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Lp(s,a,v,u),g.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(a=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),a!==g.state&&bh.enqueueReplaceState(g,g.state,null),Eh(s,u,g,p),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308)}function tc(s,a,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var p=u.stateNode}if(!p)throw Error(t(147,s));var g=p,v=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===v?a.ref:(a=function(S){var M=g.refs;M===v0&&(M=g.refs={}),S===null?delete M[v]:M[v]=S},a._stringRef=v,a)}if(typeof s!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,s))}return s}function Th(s,a){throw s=Object.prototype.toString.call(a),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function b0(s){var a=s._init;return a(s._payload)}function T0(s){function a(Y,B){if(s){var G=Y.deletions;G===null?(Y.deletions=[B],Y.flags|=16):G.push(B)}}function u(Y,B){if(!s)return null;for(;B!==null;)a(Y,B),B=B.sibling;return null}function p(Y,B){for(Y=new Map;B!==null;)B.key!==null?Y.set(B.key,B):Y.set(B.index,B),B=B.sibling;return Y}function g(Y,B){return Y=is(Y,B),Y.index=0,Y.sibling=null,Y}function v(Y,B,G){return Y.index=G,s?(G=Y.alternate,G!==null?(G=G.index,G<B?(Y.flags|=2,B):G):(Y.flags|=2,B)):(Y.flags|=1048576,B)}function S(Y){return s&&Y.alternate===null&&(Y.flags|=2),Y}function M(Y,B,G,de){return B===null||B.tag!==6?(B=wm(G,Y.mode,de),B.return=Y,B):(B=g(B,G),B.return=Y,B)}function U(Y,B,G,de){var be=G.type;return be===D?ce(Y,B,G.props.children,de,G.key):B!==null&&(B.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===Se&&b0(be)===B.type)?(de=g(B,G.props),de.ref=tc(Y,B,G),de.return=Y,de):(de=Wh(G.type,G.key,G.props,null,Y.mode,de),de.ref=tc(Y,B,G),de.return=Y,de)}function X(Y,B,G,de){return B===null||B.tag!==4||B.stateNode.containerInfo!==G.containerInfo||B.stateNode.implementation!==G.implementation?(B=xm(G,Y.mode,de),B.return=Y,B):(B=g(B,G.children||[]),B.return=Y,B)}function ce(Y,B,G,de,be){return B===null||B.tag!==7?(B=mo(G,Y.mode,de,be),B.return=Y,B):(B=g(B,G),B.return=Y,B)}function ue(Y,B,G){if(typeof B=="string"&&B!==""||typeof B=="number")return B=wm(""+B,Y.mode,G),B.return=Y,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Q:return G=Wh(B.type,B.key,B.props,null,Y.mode,G),G.ref=tc(Y,null,B),G.return=Y,G;case ie:return B=xm(B,Y.mode,G),B.return=Y,B;case Se:var de=B._init;return ue(Y,de(B._payload),G)}if(si(B)||J(B))return B=mo(B,Y.mode,G,null),B.return=Y,B;Th(Y,B)}return null}function le(Y,B,G,de){var be=B!==null?B.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return be!==null?null:M(Y,B,""+G,de);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Q:return G.key===be?U(Y,B,G,de):null;case ie:return G.key===be?X(Y,B,G,de):null;case Se:return be=G._init,le(Y,B,be(G._payload),de)}if(si(G)||J(G))return be!==null?null:ce(Y,B,G,de,null);Th(Y,G)}return null}function ye(Y,B,G,de,be){if(typeof de=="string"&&de!==""||typeof de=="number")return Y=Y.get(G)||null,M(B,Y,""+de,be);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case Q:return Y=Y.get(de.key===null?G:de.key)||null,U(B,Y,de,be);case ie:return Y=Y.get(de.key===null?G:de.key)||null,X(B,Y,de,be);case Se:var Ie=de._init;return ye(Y,B,G,Ie(de._payload),be)}if(si(de)||J(de))return Y=Y.get(G)||null,ce(B,Y,de,be,null);Th(B,de)}return null}function we(Y,B,G,de){for(var be=null,Ie=null,ke=B,Re=B=0,Wt=null;ke!==null&&Re<G.length;Re++){ke.index>Re?(Wt=ke,ke=null):Wt=ke.sibling;var qe=le(Y,ke,G[Re],de);if(qe===null){ke===null&&(ke=Wt);break}s&&ke&&qe.alternate===null&&a(Y,ke),B=v(qe,B,Re),Ie===null?be=qe:Ie.sibling=qe,Ie=qe,ke=Wt}if(Re===G.length)return u(Y,ke),ut&&oo(Y,Re),be;if(ke===null){for(;Re<G.length;Re++)ke=ue(Y,G[Re],de),ke!==null&&(B=v(ke,B,Re),Ie===null?be=ke:Ie.sibling=ke,Ie=ke);return ut&&oo(Y,Re),be}for(ke=p(Y,ke);Re<G.length;Re++)Wt=ye(ke,Y,Re,G[Re],de),Wt!==null&&(s&&Wt.alternate!==null&&ke.delete(Wt.key===null?Re:Wt.key),B=v(Wt,B,Re),Ie===null?be=Wt:Ie.sibling=Wt,Ie=Wt);return s&&ke.forEach(function(ss){return a(Y,ss)}),ut&&oo(Y,Re),be}function xe(Y,B,G,de){var be=J(G);if(typeof be!="function")throw Error(t(150));if(G=be.call(G),G==null)throw Error(t(151));for(var Ie=be=null,ke=B,Re=B=0,Wt=null,qe=G.next();ke!==null&&!qe.done;Re++,qe=G.next()){ke.index>Re?(Wt=ke,ke=null):Wt=ke.sibling;var ss=le(Y,ke,qe.value,de);if(ss===null){ke===null&&(ke=Wt);break}s&&ke&&ss.alternate===null&&a(Y,ke),B=v(ss,B,Re),Ie===null?be=ss:Ie.sibling=ss,Ie=ss,ke=Wt}if(qe.done)return u(Y,ke),ut&&oo(Y,Re),be;if(ke===null){for(;!qe.done;Re++,qe=G.next())qe=ue(Y,qe.value,de),qe!==null&&(B=v(qe,B,Re),Ie===null?be=qe:Ie.sibling=qe,Ie=qe);return ut&&oo(Y,Re),be}for(ke=p(Y,ke);!qe.done;Re++,qe=G.next())qe=ye(ke,Y,Re,qe.value,de),qe!==null&&(s&&qe.alternate!==null&&ke.delete(qe.key===null?Re:qe.key),B=v(qe,B,Re),Ie===null?be=qe:Ie.sibling=qe,Ie=qe);return s&&ke.forEach(function(jk){return a(Y,jk)}),ut&&oo(Y,Re),be}function vt(Y,B,G,de){if(typeof G=="object"&&G!==null&&G.type===D&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case Q:e:{for(var be=G.key,Ie=B;Ie!==null;){if(Ie.key===be){if(be=G.type,be===D){if(Ie.tag===7){u(Y,Ie.sibling),B=g(Ie,G.props.children),B.return=Y,Y=B;break e}}else if(Ie.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===Se&&b0(be)===Ie.type){u(Y,Ie.sibling),B=g(Ie,G.props),B.ref=tc(Y,Ie,G),B.return=Y,Y=B;break e}u(Y,Ie);break}else a(Y,Ie);Ie=Ie.sibling}G.type===D?(B=mo(G.props.children,Y.mode,de,G.key),B.return=Y,Y=B):(de=Wh(G.type,G.key,G.props,null,Y.mode,de),de.ref=tc(Y,B,G),de.return=Y,Y=de)}return S(Y);case ie:e:{for(Ie=G.key;B!==null;){if(B.key===Ie)if(B.tag===4&&B.stateNode.containerInfo===G.containerInfo&&B.stateNode.implementation===G.implementation){u(Y,B.sibling),B=g(B,G.children||[]),B.return=Y,Y=B;break e}else{u(Y,B);break}else a(Y,B);B=B.sibling}B=xm(G,Y.mode,de),B.return=Y,Y=B}return S(Y);case Se:return Ie=G._init,vt(Y,B,Ie(G._payload),de)}if(si(G))return we(Y,B,G,de);if(J(G))return xe(Y,B,G,de);Th(Y,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,B!==null&&B.tag===6?(u(Y,B.sibling),B=g(B,G),B.return=Y,Y=B):(u(Y,B),B=wm(G,Y.mode,de),B.return=Y,Y=B),S(Y)):u(Y,B)}return vt}var Aa=T0(!0),S0=T0(!1),nc={},Fr=Gi(nc),rc=Gi(nc),ic=Gi(nc);function lo(s){if(s===nc)throw Error(t(174));return s}function Fp(s,a){switch(nt(ic,a),nt(rc,s),nt(Fr,nc),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Mt(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=Mt(a,s)}st(Fr),nt(Fr,a)}function Ra(){st(Fr),st(rc),st(ic)}function I0(s){lo(ic.current);var a=lo(Fr.current),u=Mt(a,s.type);a!==u&&(nt(rc,s),nt(Fr,u))}function jp(s){rc.current===s&&(st(Fr),st(rc))}var ht=Gi(0);function Sh(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Up=[];function zp(){for(var s=0;s<Up.length;s++)Up[s]._workInProgressVersionPrimary=null;Up.length=0}var Ih=te.ReactCurrentDispatcher,Bp=te.ReactCurrentBatchConfig,co=0,dt=null,Lt=null,zt=null,kh=!1,sc=!1,oc=0,ak=0;function sn(){throw Error(t(321))}function Wp(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!mr(s[u],a[u]))return!1;return!0}function $p(s,a,u,p,g,v){if(co=v,dt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Ih.current=s===null||s.memoizedState===null?hk:dk,s=u(p,g),sc){v=0;do{if(sc=!1,oc=0,25<=v)throw Error(t(301));v+=1,zt=Lt=null,a.updateQueue=null,Ih.current=fk,s=u(p,g)}while(sc)}if(Ih.current=Ah,a=Lt!==null&&Lt.next!==null,co=0,zt=Lt=dt=null,kh=!1,a)throw Error(t(300));return s}function Hp(){var s=oc!==0;return oc=0,s}function jr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?dt.memoizedState=zt=s:zt=zt.next=s,zt}function Jn(){if(Lt===null){var s=dt.alternate;s=s!==null?s.memoizedState:null}else s=Lt.next;var a=zt===null?dt.memoizedState:zt.next;if(a!==null)zt=a,Lt=s;else{if(s===null)throw Error(t(310));Lt=s,s={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},zt===null?dt.memoizedState=zt=s:zt=zt.next=s}return zt}function ac(s,a){return typeof a=="function"?a(s):a}function qp(s){var a=Jn(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var p=Lt,g=p.baseQueue,v=u.pending;if(v!==null){if(g!==null){var S=g.next;g.next=v.next,v.next=S}p.baseQueue=g=v,u.pending=null}if(g!==null){v=g.next,p=p.baseState;var M=S=null,U=null,X=v;do{var ce=X.lane;if((co&ce)===ce)U!==null&&(U=U.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),p=X.hasEagerState?X.eagerState:s(p,X.action);else{var ue={lane:ce,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};U===null?(M=U=ue,S=p):U=U.next=ue,dt.lanes|=ce,uo|=ce}X=X.next}while(X!==null&&X!==v);U===null?S=p:U.next=M,mr(p,a.memoizedState)||(En=!0),a.memoizedState=p,a.baseState=S,a.baseQueue=U,u.lastRenderedState=p}if(s=u.interleaved,s!==null){g=s;do v=g.lane,dt.lanes|=v,uo|=v,g=g.next;while(g!==s)}else g===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function Yp(s){var a=Jn(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var p=u.dispatch,g=u.pending,v=a.memoizedState;if(g!==null){u.pending=null;var S=g=g.next;do v=s(v,S.action),S=S.next;while(S!==g);mr(v,a.memoizedState)||(En=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),u.lastRenderedState=v}return[v,p]}function k0(){}function P0(s,a){var u=dt,p=Jn(),g=a(),v=!mr(p.memoizedState,g);if(v&&(p.memoizedState=g,En=!0),p=p.queue,Gp(R0.bind(null,u,p,s),[s]),p.getSnapshot!==a||v||zt!==null&&zt.memoizedState.tag&1){if(u.flags|=2048,lc(9,A0.bind(null,u,p,g,a),void 0,null),Bt===null)throw Error(t(349));(co&30)!==0||C0(u,a,g)}return g}function C0(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=dt.updateQueue,a===null?(a={lastEffect:null,stores:null},dt.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function A0(s,a,u,p){a.value=u,a.getSnapshot=p,D0(a)&&O0(s)}function R0(s,a,u){return u(function(){D0(a)&&O0(s)})}function D0(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!mr(s,u)}catch{return!0}}function O0(s){var a=_i(s,1);a!==null&&wr(a,s,1,-1)}function M0(s){var a=jr();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ac,lastRenderedState:s},a.queue=s,s=s.dispatch=uk.bind(null,dt,s),[a.memoizedState,s]}function lc(s,a,u,p){return s={tag:s,create:a,destroy:u,deps:p,next:null},a=dt.updateQueue,a===null?(a={lastEffect:null,stores:null},dt.updateQueue=a,a.lastEffect=s.next=s):(u=a.lastEffect,u===null?a.lastEffect=s.next=s:(p=u.next,u.next=s,s.next=p,a.lastEffect=s)),s}function N0(){return Jn().memoizedState}function Ph(s,a,u,p){var g=jr();dt.flags|=s,g.memoizedState=lc(1|a,u,void 0,p===void 0?null:p)}function Ch(s,a,u,p){var g=Jn();p=p===void 0?null:p;var v=void 0;if(Lt!==null){var S=Lt.memoizedState;if(v=S.destroy,p!==null&&Wp(p,S.deps)){g.memoizedState=lc(a,u,v,p);return}}dt.flags|=s,g.memoizedState=lc(1|a,u,v,p)}function L0(s,a){return Ph(8390656,8,s,a)}function Gp(s,a){return Ch(2048,8,s,a)}function V0(s,a){return Ch(4,2,s,a)}function F0(s,a){return Ch(4,4,s,a)}function j0(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function U0(s,a,u){return u=u!=null?u.concat([s]):null,Ch(4,4,j0.bind(null,a,s),u)}function Kp(){}function z0(s,a){var u=Jn();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&Wp(a,p[1])?p[0]:(u.memoizedState=[s,a],s)}function B0(s,a){var u=Jn();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&Wp(a,p[1])?p[0]:(s=s(),u.memoizedState=[s,a],s)}function W0(s,a,u){return(co&21)===0?(s.baseState&&(s.baseState=!1,En=!0),s.memoizedState=u):(mr(u,a)||(u=Js(),dt.lanes|=u,uo|=u,s.baseState=!0),a)}function lk(s,a){var u=ze;ze=u!==0&&4>u?u:4,s(!0);var p=Bp.transition;Bp.transition={};try{s(!1),a()}finally{ze=u,Bp.transition=p}}function $0(){return Jn().memoizedState}function ck(s,a,u){var p=ns(s);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},H0(s))q0(a,u);else if(u=m0(s,a,u,p),u!==null){var g=yn();wr(u,s,p,g),Y0(u,a,p)}}function uk(s,a,u){var p=ns(s),g={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(H0(s))q0(a,g);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var S=a.lastRenderedState,M=v(S,u);if(g.hasEagerState=!0,g.eagerState=M,mr(M,S)){var U=a.interleaved;U===null?(g.next=g,Mp(a)):(g.next=U.next,U.next=g),a.interleaved=g;return}}catch{}finally{}u=m0(s,a,g,p),u!==null&&(g=yn(),wr(u,s,p,g),Y0(u,a,p))}}function H0(s){var a=s.alternate;return s===dt||a!==null&&a===dt}function q0(s,a){sc=kh=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function Y0(s,a,u){if((u&4194240)!==0){var p=a.lanes;p&=s.pendingLanes,u|=p,a.lanes=u,zi(s,u)}}var Ah={readContext:Xn,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useInsertionEffect:sn,useLayoutEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useMutableSource:sn,useSyncExternalStore:sn,useId:sn,unstable_isNewReconciler:!1},hk={readContext:Xn,useCallback:function(s,a){return jr().memoizedState=[s,a===void 0?null:a],s},useContext:Xn,useEffect:L0,useImperativeHandle:function(s,a,u){return u=u!=null?u.concat([s]):null,Ph(4194308,4,j0.bind(null,a,s),u)},useLayoutEffect:function(s,a){return Ph(4194308,4,s,a)},useInsertionEffect:function(s,a){return Ph(4,2,s,a)},useMemo:function(s,a){var u=jr();return a=a===void 0?null:a,s=s(),u.memoizedState=[s,a],s},useReducer:function(s,a,u){var p=jr();return a=u!==void 0?u(a):a,p.memoizedState=p.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},p.queue=s,s=s.dispatch=ck.bind(null,dt,s),[p.memoizedState,s]},useRef:function(s){var a=jr();return s={current:s},a.memoizedState=s},useState:M0,useDebugValue:Kp,useDeferredValue:function(s){return jr().memoizedState=s},useTransition:function(){var s=M0(!1),a=s[0];return s=lk.bind(null,s[1]),jr().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,u){var p=dt,g=jr();if(ut){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),Bt===null)throw Error(t(349));(co&30)!==0||C0(p,a,u)}g.memoizedState=u;var v={value:u,getSnapshot:a};return g.queue=v,L0(R0.bind(null,p,v,s),[s]),p.flags|=2048,lc(9,A0.bind(null,p,v,u,a),void 0,null),u},useId:function(){var s=jr(),a=Bt.identifierPrefix;if(ut){var u=yi,p=gi;u=(p&~(1<<32-pn(p)-1)).toString(32)+u,a=":"+a+"R"+u,u=oc++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=ak++,a=":"+a+"r"+u.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},dk={readContext:Xn,useCallback:z0,useContext:Xn,useEffect:Gp,useImperativeHandle:U0,useInsertionEffect:V0,useLayoutEffect:F0,useMemo:B0,useReducer:qp,useRef:N0,useState:function(){return qp(ac)},useDebugValue:Kp,useDeferredValue:function(s){var a=Jn();return W0(a,Lt.memoizedState,s)},useTransition:function(){var s=qp(ac)[0],a=Jn().memoizedState;return[s,a]},useMutableSource:k0,useSyncExternalStore:P0,useId:$0,unstable_isNewReconciler:!1},fk={readContext:Xn,useCallback:z0,useContext:Xn,useEffect:Gp,useImperativeHandle:U0,useInsertionEffect:V0,useLayoutEffect:F0,useMemo:B0,useReducer:Yp,useRef:N0,useState:function(){return Yp(ac)},useDebugValue:Kp,useDeferredValue:function(s){var a=Jn();return Lt===null?a.memoizedState=s:W0(a,Lt.memoizedState,s)},useTransition:function(){var s=Yp(ac)[0],a=Jn().memoizedState;return[s,a]},useMutableSource:k0,useSyncExternalStore:P0,useId:$0,unstable_isNewReconciler:!1};function Da(s,a){try{var u="",p=a;do u+=ge(p),p=p.return;while(p);var g=u}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:s,source:a,stack:g,digest:null}}function Qp(s,a,u){return{value:s,source:null,stack:u??null,digest:a??null}}function Xp(s,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var pk=typeof WeakMap=="function"?WeakMap:Map;function G0(s,a,u){u=vi(-1,u),u.tag=3,u.payload={element:null};var p=a.value;return u.callback=function(){Vh||(Vh=!0,dm=p),Xp(s,a)},u}function K0(s,a,u){u=vi(-1,u),u.tag=3;var p=s.type.getDerivedStateFromError;if(typeof p=="function"){var g=a.value;u.payload=function(){return p(g)},u.callback=function(){Xp(s,a)}}var v=s.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(u.callback=function(){Xp(s,a),typeof p!="function"&&(es===null?es=new Set([this]):es.add(this));var S=a.stack;this.componentDidCatch(a.value,{componentStack:S!==null?S:""})}),u}function Q0(s,a,u){var p=s.pingCache;if(p===null){p=s.pingCache=new pk;var g=new Set;p.set(a,g)}else g=p.get(a),g===void 0&&(g=new Set,p.set(a,g));g.has(u)||(g.add(u),s=Pk.bind(null,s,a,u),a.then(s,s))}function X0(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function J0(s,a,u,p,g){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=vi(-1,1),a.tag=2,Ji(u,a,1))),u.lanes|=1),s):(s.flags|=65536,s.lanes=g,s)}var mk=te.ReactCurrentOwner,En=!1;function gn(s,a,u,p){a.child=s===null?S0(a,null,u,p):Aa(a,s.child,u,p)}function Z0(s,a,u,p,g){u=u.render;var v=a.ref;return Ca(a,g),p=$p(s,a,u,p,v,g),u=Hp(),s!==null&&!En?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~g,wi(s,a,g)):(ut&&u&&Sp(a),a.flags|=1,gn(s,a,p,g),a.child)}function ev(s,a,u,p,g){if(s===null){var v=u.type;return typeof v=="function"&&!vm(v)&&v.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=v,tv(s,a,v,p,g)):(s=Wh(u.type,null,p,a,a.mode,g),s.ref=a.ref,s.return=a,a.child=s)}if(v=s.child,(s.lanes&g)===0){var S=v.memoizedProps;if(u=u.compare,u=u!==null?u:Gl,u(S,p)&&s.ref===a.ref)return wi(s,a,g)}return a.flags|=1,s=is(v,p),s.ref=a.ref,s.return=a,a.child=s}function tv(s,a,u,p,g){if(s!==null){var v=s.memoizedProps;if(Gl(v,p)&&s.ref===a.ref)if(En=!1,a.pendingProps=p=v,(s.lanes&g)!==0)(s.flags&131072)!==0&&(En=!0);else return a.lanes=s.lanes,wi(s,a,g)}return Jp(s,a,u,p,g)}function nv(s,a,u){var p=a.pendingProps,g=p.children,v=s!==null?s.memoizedState:null;if(p.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(Ma,Un),Un|=u;else{if((u&1073741824)===0)return s=v!==null?v.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,nt(Ma,Un),Un|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=v!==null?v.baseLanes:u,nt(Ma,Un),Un|=p}else v!==null?(p=v.baseLanes|u,a.memoizedState=null):p=u,nt(Ma,Un),Un|=p;return gn(s,a,g,u),a.child}function rv(s,a){var u=a.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function Jp(s,a,u,p,g){var v=xn(u)?io:rn.current;return v=Ta(a,v),Ca(a,g),u=$p(s,a,u,p,v,g),p=Hp(),s!==null&&!En?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~g,wi(s,a,g)):(ut&&p&&Sp(a),a.flags|=1,gn(s,a,u,g),a.child)}function iv(s,a,u,p,g){if(xn(u)){var v=!0;ph(a)}else v=!1;if(Ca(a,g),a.stateNode===null)Dh(s,a),x0(a,u,p),Vp(a,u,p,g),p=!0;else if(s===null){var S=a.stateNode,M=a.memoizedProps;S.props=M;var U=S.context,X=u.contextType;typeof X=="object"&&X!==null?X=Xn(X):(X=xn(u)?io:rn.current,X=Ta(a,X));var ce=u.getDerivedStateFromProps,ue=typeof ce=="function"||typeof S.getSnapshotBeforeUpdate=="function";ue||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(M!==p||U!==X)&&E0(a,S,p,X),Xi=!1;var le=a.memoizedState;S.state=le,Eh(a,p,S,g),U=a.memoizedState,M!==p||le!==U||wn.current||Xi?(typeof ce=="function"&&(Lp(a,u,ce,p),U=a.memoizedState),(M=Xi||w0(a,u,M,p,le,U,X))?(ue||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(a.flags|=4194308)):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=U),S.props=p,S.state=U,S.context=X,p=M):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{S=a.stateNode,g0(s,a),M=a.memoizedProps,X=a.type===a.elementType?M:yr(a.type,M),S.props=X,ue=a.pendingProps,le=S.context,U=u.contextType,typeof U=="object"&&U!==null?U=Xn(U):(U=xn(u)?io:rn.current,U=Ta(a,U));var ye=u.getDerivedStateFromProps;(ce=typeof ye=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(M!==ue||le!==U)&&E0(a,S,p,U),Xi=!1,le=a.memoizedState,S.state=le,Eh(a,p,S,g);var we=a.memoizedState;M!==ue||le!==we||wn.current||Xi?(typeof ye=="function"&&(Lp(a,u,ye,p),we=a.memoizedState),(X=Xi||w0(a,u,X,p,le,we,U)||!1)?(ce||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(p,we,U),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(p,we,U)),typeof S.componentDidUpdate=="function"&&(a.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof S.componentDidUpdate!="function"||M===s.memoizedProps&&le===s.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&le===s.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=we),S.props=p,S.state=we,S.context=U,p=X):(typeof S.componentDidUpdate!="function"||M===s.memoizedProps&&le===s.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&le===s.memoizedState||(a.flags|=1024),p=!1)}return Zp(s,a,u,p,v,g)}function Zp(s,a,u,p,g,v){rv(s,a);var S=(a.flags&128)!==0;if(!p&&!S)return g&&l0(a,u,!1),wi(s,a,v);p=a.stateNode,mk.current=a;var M=S&&typeof u.getDerivedStateFromError!="function"?null:p.render();return a.flags|=1,s!==null&&S?(a.child=Aa(a,s.child,null,v),a.child=Aa(a,null,M,v)):gn(s,a,M,v),a.memoizedState=p.state,g&&l0(a,u,!0),a.child}function sv(s){var a=s.stateNode;a.pendingContext?o0(s,a.pendingContext,a.pendingContext!==a.context):a.context&&o0(s,a.context,!1),Fp(s,a.containerInfo)}function ov(s,a,u,p,g){return ka(),Cp(g),a.flags|=256,gn(s,a,u,p),a.child}var em={dehydrated:null,treeContext:null,retryLane:0};function tm(s){return{baseLanes:s,cachePool:null,transitions:null}}function av(s,a,u){var p=a.pendingProps,g=ht.current,v=!1,S=(a.flags&128)!==0,M;if((M=S)||(M=s!==null&&s.memoizedState===null?!1:(g&2)!==0),M?(v=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(g|=1),nt(ht,g&1),s===null)return Pp(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(S=p.children,s=p.fallback,v?(p=a.mode,v=a.child,S={mode:"hidden",children:S},(p&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=S):v=$h(S,p,0,null),s=mo(s,p,u,null),v.return=a,s.return=a,v.sibling=s,a.child=v,a.child.memoizedState=tm(u),a.memoizedState=em,s):nm(a,S));if(g=s.memoizedState,g!==null&&(M=g.dehydrated,M!==null))return gk(s,a,S,p,M,g,u);if(v){v=p.fallback,S=a.mode,g=s.child,M=g.sibling;var U={mode:"hidden",children:p.children};return(S&1)===0&&a.child!==g?(p=a.child,p.childLanes=0,p.pendingProps=U,a.deletions=null):(p=is(g,U),p.subtreeFlags=g.subtreeFlags&14680064),M!==null?v=is(M,v):(v=mo(v,S,u,null),v.flags|=2),v.return=a,p.return=a,p.sibling=v,a.child=p,p=v,v=a.child,S=s.child.memoizedState,S=S===null?tm(u):{baseLanes:S.baseLanes|u,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=s.childLanes&~u,a.memoizedState=em,p}return v=s.child,s=v.sibling,p=is(v,{mode:"visible",children:p.children}),(a.mode&1)===0&&(p.lanes=u),p.return=a,p.sibling=null,s!==null&&(u=a.deletions,u===null?(a.deletions=[s],a.flags|=16):u.push(s)),a.child=p,a.memoizedState=null,p}function nm(s,a){return a=$h({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function Rh(s,a,u,p){return p!==null&&Cp(p),Aa(a,s.child,null,u),s=nm(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function gk(s,a,u,p,g,v,S){if(u)return a.flags&256?(a.flags&=-257,p=Qp(Error(t(422))),Rh(s,a,S,p)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(v=p.fallback,g=a.mode,p=$h({mode:"visible",children:p.children},g,0,null),v=mo(v,g,S,null),v.flags|=2,p.return=a,v.return=a,p.sibling=v,a.child=p,(a.mode&1)!==0&&Aa(a,s.child,null,S),a.child.memoizedState=tm(S),a.memoizedState=em,v);if((a.mode&1)===0)return Rh(s,a,S,null);if(g.data==="$!"){if(p=g.nextSibling&&g.nextSibling.dataset,p)var M=p.dgst;return p=M,v=Error(t(419)),p=Qp(v,p,void 0),Rh(s,a,S,p)}if(M=(S&s.childLanes)!==0,En||M){if(p=Bt,p!==null){switch(S&-S){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(p.suspendedLanes|S))!==0?0:g,g!==0&&g!==v.retryLane&&(v.retryLane=g,_i(s,g),wr(p,s,g,-1))}return _m(),p=Qp(Error(t(421))),Rh(s,a,S,p)}return g.data==="$?"?(a.flags|=128,a.child=s.child,a=Ck.bind(null,s),g._reactRetry=a,null):(s=v.treeContext,jn=Yi(g.nextSibling),Fn=a,ut=!0,gr=null,s!==null&&(Kn[Qn++]=gi,Kn[Qn++]=yi,Kn[Qn++]=so,gi=s.id,yi=s.overflow,so=a),a=nm(a,p.children),a.flags|=4096,a)}function lv(s,a,u){s.lanes|=a;var p=s.alternate;p!==null&&(p.lanes|=a),Op(s.return,a,u)}function rm(s,a,u,p,g){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:g}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=p,v.tail=u,v.tailMode=g)}function cv(s,a,u){var p=a.pendingProps,g=p.revealOrder,v=p.tail;if(gn(s,a,p.children,u),p=ht.current,(p&2)!==0)p=p&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&lv(s,u,a);else if(s.tag===19)lv(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}p&=1}if(nt(ht,p),(a.mode&1)===0)a.memoizedState=null;else switch(g){case"forwards":for(u=a.child,g=null;u!==null;)s=u.alternate,s!==null&&Sh(s)===null&&(g=u),u=u.sibling;u=g,u===null?(g=a.child,a.child=null):(g=u.sibling,u.sibling=null),rm(a,!1,g,u,v);break;case"backwards":for(u=null,g=a.child,a.child=null;g!==null;){if(s=g.alternate,s!==null&&Sh(s)===null){a.child=g;break}s=g.sibling,g.sibling=u,u=g,g=s}rm(a,!0,u,null,v);break;case"together":rm(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Dh(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function wi(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),uo|=a.lanes,(u&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(t(153));if(a.child!==null){for(s=a.child,u=is(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=is(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function yk(s,a,u){switch(a.tag){case 3:sv(a),ka();break;case 5:I0(a);break;case 1:xn(a.type)&&ph(a);break;case 4:Fp(a,a.stateNode.containerInfo);break;case 10:var p=a.type._context,g=a.memoizedProps.value;nt(vh,p._currentValue),p._currentValue=g;break;case 13:if(p=a.memoizedState,p!==null)return p.dehydrated!==null?(nt(ht,ht.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?av(s,a,u):(nt(ht,ht.current&1),s=wi(s,a,u),s!==null?s.sibling:null);nt(ht,ht.current&1);break;case 19:if(p=(u&a.childLanes)!==0,(s.flags&128)!==0){if(p)return cv(s,a,u);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),nt(ht,ht.current),p)break;return null;case 22:case 23:return a.lanes=0,nv(s,a,u)}return wi(s,a,u)}var uv,im,hv,dv;uv=function(s,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},im=function(){},hv=function(s,a,u,p){var g=s.memoizedProps;if(g!==p){s=a.stateNode,lo(Fr.current);var v=null;switch(u){case"input":g=zs(s,g),p=zs(s,p),v=[];break;case"select":g=R({},g,{value:void 0}),p=R({},p,{value:void 0}),v=[];break;case"textarea":g=bl(s,g),p=bl(s,p),v=[];break;default:typeof g.onClick!="function"&&typeof p.onClick=="function"&&(s.onclick=hh)}Cl(u,p);var S;u=null;for(X in g)if(!p.hasOwnProperty(X)&&g.hasOwnProperty(X)&&g[X]!=null)if(X==="style"){var M=g[X];for(S in M)M.hasOwnProperty(S)&&(u||(u={}),u[S]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(i.hasOwnProperty(X)?v||(v=[]):(v=v||[]).push(X,null));for(X in p){var U=p[X];if(M=g?.[X],p.hasOwnProperty(X)&&U!==M&&(U!=null||M!=null))if(X==="style")if(M){for(S in M)!M.hasOwnProperty(S)||U&&U.hasOwnProperty(S)||(u||(u={}),u[S]="");for(S in U)U.hasOwnProperty(S)&&M[S]!==U[S]&&(u||(u={}),u[S]=U[S])}else u||(v||(v=[]),v.push(X,u)),u=U;else X==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,M=M?M.__html:void 0,U!=null&&M!==U&&(v=v||[]).push(X,U)):X==="children"?typeof U!="string"&&typeof U!="number"||(v=v||[]).push(X,""+U):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(i.hasOwnProperty(X)?(U!=null&&X==="onScroll"&&it("scroll",s),v||M===U||(v=[])):(v=v||[]).push(X,U))}u&&(v=v||[]).push("style",u);var X=v;(a.updateQueue=X)&&(a.flags|=4)}},dv=function(s,a,u,p){u!==p&&(a.flags|=4)};function cc(s,a){if(!ut)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function on(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,p=0;if(a)for(var g=s.child;g!==null;)u|=g.lanes|g.childLanes,p|=g.subtreeFlags&14680064,p|=g.flags&14680064,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)u|=g.lanes|g.childLanes,p|=g.subtreeFlags,p|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=p,s.childLanes=u,a}function _k(s,a,u){var p=a.pendingProps;switch(Ip(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return on(a),null;case 1:return xn(a.type)&&fh(),on(a),null;case 3:return p=a.stateNode,Ra(),st(wn),st(rn),zp(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(s===null||s.child===null)&&(_h(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,gr!==null&&(mm(gr),gr=null))),im(s,a),on(a),null;case 5:jp(a);var g=lo(ic.current);if(u=a.type,s!==null&&a.stateNode!=null)hv(s,a,u,p,g),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!p){if(a.stateNode===null)throw Error(t(166));return on(a),null}if(s=lo(Fr.current),_h(a)){p=a.stateNode,u=a.type;var v=a.memoizedProps;switch(p[Vr]=a,p[Zl]=v,s=(a.mode&1)!==0,u){case"dialog":it("cancel",p),it("close",p);break;case"iframe":case"object":case"embed":it("load",p);break;case"video":case"audio":for(g=0;g<Ql.length;g++)it(Ql[g],p);break;case"source":it("error",p);break;case"img":case"image":case"link":it("error",p),it("load",p);break;case"details":it("toggle",p);break;case"input":qo(p,v),it("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!v.multiple},it("invalid",p);break;case"textarea":Go(p,v),it("invalid",p)}Cl(u,v),g=null;for(var S in v)if(v.hasOwnProperty(S)){var M=v[S];S==="children"?typeof M=="string"?p.textContent!==M&&(v.suppressHydrationWarning!==!0&&uh(p.textContent,M,s),g=["children",M]):typeof M=="number"&&p.textContent!==""+M&&(v.suppressHydrationWarning!==!0&&uh(p.textContent,M,s),g=["children",""+M]):i.hasOwnProperty(S)&&M!=null&&S==="onScroll"&&it("scroll",p)}switch(u){case"input":tn(p),Lu(p,v,!0);break;case"textarea":tn(p),Tl(p);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(p.onclick=hh)}p=g,a.updateQueue=p,p!==null&&(a.flags|=4)}else{S=g.nodeType===9?g:g.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Ot(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=S.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof p.is=="string"?s=S.createElement(u,{is:p.is}):(s=S.createElement(u),u==="select"&&(S=s,p.multiple?S.multiple=!0:p.size&&(S.size=p.size))):s=S.createElementNS(s,u),s[Vr]=a,s[Zl]=p,uv(s,a,!1,!1),a.stateNode=s;e:{switch(S=Al(u,p),u){case"dialog":it("cancel",s),it("close",s),g=p;break;case"iframe":case"object":case"embed":it("load",s),g=p;break;case"video":case"audio":for(g=0;g<Ql.length;g++)it(Ql[g],s);g=p;break;case"source":it("error",s),g=p;break;case"img":case"image":case"link":it("error",s),it("load",s),g=p;break;case"details":it("toggle",s),g=p;break;case"input":qo(s,p),g=zs(s,p),it("invalid",s);break;case"option":g=p;break;case"select":s._wrapperState={wasMultiple:!!p.multiple},g=R({},p,{value:void 0}),it("invalid",s);break;case"textarea":Go(s,p),g=bl(s,p),it("invalid",s);break;default:g=p}Cl(u,g),M=g;for(v in M)if(M.hasOwnProperty(v)){var U=M[v];v==="style"?kl(s,U):v==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,U!=null&&Sl(s,U)):v==="children"?typeof U=="string"?(u!=="textarea"||U!=="")&&Li(s,U):typeof U=="number"&&Li(s,""+U):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(i.hasOwnProperty(v)?U!=null&&v==="onScroll"&&it("scroll",s):U!=null&&$(s,v,U,S))}switch(u){case"input":tn(s),Lu(s,p,!1);break;case"textarea":tn(s),Tl(s);break;case"option":p.value!=null&&s.setAttribute("value",""+Ne(p.value));break;case"select":s.multiple=!!p.multiple,v=p.value,v!=null?oi(s,!!p.multiple,v,!1):p.defaultValue!=null&&oi(s,!!p.multiple,p.defaultValue,!0);break;default:typeof g.onClick=="function"&&(s.onclick=hh)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return on(a),null;case 6:if(s&&a.stateNode!=null)dv(s,a,s.memoizedProps,p);else{if(typeof p!="string"&&a.stateNode===null)throw Error(t(166));if(u=lo(ic.current),lo(Fr.current),_h(a)){if(p=a.stateNode,u=a.memoizedProps,p[Vr]=a,(v=p.nodeValue!==u)&&(s=Fn,s!==null))switch(s.tag){case 3:uh(p.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&uh(p.nodeValue,u,(s.mode&1)!==0)}v&&(a.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[Vr]=a,a.stateNode=p}return on(a),null;case 13:if(st(ht),p=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(ut&&jn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)p0(),ka(),a.flags|=98560,v=!1;else if(v=_h(a),p!==null&&p.dehydrated!==null){if(s===null){if(!v)throw Error(t(318));if(v=a.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[Vr]=a}else ka(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;on(a),v=!1}else gr!==null&&(mm(gr),gr=null),v=!0;if(!v)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(p=p!==null,p!==(s!==null&&s.memoizedState!==null)&&p&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(ht.current&1)!==0?Vt===0&&(Vt=3):_m())),a.updateQueue!==null&&(a.flags|=4),on(a),null);case 4:return Ra(),im(s,a),s===null&&Xl(a.stateNode.containerInfo),on(a),null;case 10:return Dp(a.type._context),on(a),null;case 17:return xn(a.type)&&fh(),on(a),null;case 19:if(st(ht),v=a.memoizedState,v===null)return on(a),null;if(p=(a.flags&128)!==0,S=v.rendering,S===null)if(p)cc(v,!1);else{if(Vt!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(S=Sh(s),S!==null){for(a.flags|=128,cc(v,!1),p=S.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),a.subtreeFlags=0,p=u,u=a.child;u!==null;)v=u,s=p,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=s,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,s=S.dependencies,v.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return nt(ht,ht.current&1|2),a.child}s=s.sibling}v.tail!==null&&tt()>Na&&(a.flags|=128,p=!0,cc(v,!1),a.lanes=4194304)}else{if(!p)if(s=Sh(S),s!==null){if(a.flags|=128,p=!0,u=s.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),cc(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!ut)return on(a),null}else 2*tt()-v.renderingStartTime>Na&&u!==1073741824&&(a.flags|=128,p=!0,cc(v,!1),a.lanes=4194304);v.isBackwards?(S.sibling=a.child,a.child=S):(u=v.last,u!==null?u.sibling=S:a.child=S,v.last=S)}return v.tail!==null?(a=v.tail,v.rendering=a,v.tail=a.sibling,v.renderingStartTime=tt(),a.sibling=null,u=ht.current,nt(ht,p?u&1|2:u&1),a):(on(a),null);case 22:case 23:return ym(),p=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==p&&(a.flags|=8192),p&&(a.mode&1)!==0?(Un&1073741824)!==0&&(on(a),a.subtreeFlags&6&&(a.flags|=8192)):on(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function vk(s,a){switch(Ip(a),a.tag){case 1:return xn(a.type)&&fh(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Ra(),st(wn),st(rn),zp(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return jp(a),null;case 13:if(st(ht),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(t(340));ka()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return st(ht),null;case 4:return Ra(),null;case 10:return Dp(a.type._context),null;case 22:case 23:return ym(),null;case 24:return null;default:return null}}var Oh=!1,an=!1,wk=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Oa(s,a){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){mt(s,a,p)}else u.current=null}function sm(s,a,u){try{u()}catch(p){mt(s,a,p)}}var fv=!1;function xk(s,a){if(yp=$i,s=$_(),cp(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var g=p.anchorOffset,v=p.focusNode;p=p.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break e}var S=0,M=-1,U=-1,X=0,ce=0,ue=s,le=null;t:for(;;){for(var ye;ue!==u||g!==0&&ue.nodeType!==3||(M=S+g),ue!==v||p!==0&&ue.nodeType!==3||(U=S+p),ue.nodeType===3&&(S+=ue.nodeValue.length),(ye=ue.firstChild)!==null;)le=ue,ue=ye;for(;;){if(ue===s)break t;if(le===u&&++X===g&&(M=S),le===v&&++ce===p&&(U=S),(ye=ue.nextSibling)!==null)break;ue=le,le=ue.parentNode}ue=ye}u=M===-1||U===-1?null:{start:M,end:U}}else u=null}u=u||{start:0,end:0}}else u=null;for(_p={focusedElem:s,selectionRange:u},$i=!1,ve=a;ve!==null;)if(a=ve,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,ve=s;else for(;ve!==null;){a=ve;try{var we=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(we!==null){var xe=we.memoizedProps,vt=we.memoizedState,Y=a.stateNode,B=Y.getSnapshotBeforeUpdate(a.elementType===a.type?xe:yr(a.type,xe),vt);Y.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var G=a.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(de){mt(a,a.return,de)}if(s=a.sibling,s!==null){s.return=a.return,ve=s;break}ve=a.return}return we=fv,fv=!1,we}function uc(s,a,u){var p=a.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var g=p=p.next;do{if((g.tag&s)===s){var v=g.destroy;g.destroy=void 0,v!==void 0&&sm(a,u,v)}g=g.next}while(g!==p)}}function Mh(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&s)===s){var p=u.create;u.destroy=p()}u=u.next}while(u!==a)}}function om(s){var a=s.ref;if(a!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof a=="function"?a(s):a.current=s}}function pv(s){var a=s.alternate;a!==null&&(s.alternate=null,pv(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[Vr],delete a[Zl],delete a[Ep],delete a[rk],delete a[ik])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function mv(s){return s.tag===5||s.tag===3||s.tag===4}function gv(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||mv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function am(s,a,u){var p=s.tag;if(p===5||p===6)s=s.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(s,a):u.insertBefore(s,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(s,u)):(a=u,a.appendChild(s)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=hh));else if(p!==4&&(s=s.child,s!==null))for(am(s,a,u),s=s.sibling;s!==null;)am(s,a,u),s=s.sibling}function lm(s,a,u){var p=s.tag;if(p===5||p===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(p!==4&&(s=s.child,s!==null))for(lm(s,a,u),s=s.sibling;s!==null;)lm(s,a,u),s=s.sibling}var Gt=null,_r=!1;function Zi(s,a,u){for(u=u.child;u!==null;)yv(s,a,u),u=u.sibling}function yv(s,a,u){if(Mn&&typeof Mn.onCommitFiberUnmount=="function")try{Mn.onCommitFiberUnmount(Qs,u)}catch{}switch(u.tag){case 5:an||Oa(u,a);case 6:var p=Gt,g=_r;Gt=null,Zi(s,a,u),Gt=p,_r=g,Gt!==null&&(_r?(s=Gt,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):Gt.removeChild(u.stateNode));break;case 18:Gt!==null&&(_r?(s=Gt,u=u.stateNode,s.nodeType===8?xp(s.parentNode,u):s.nodeType===1&&xp(s,u),fr(s)):xp(Gt,u.stateNode));break;case 4:p=Gt,g=_r,Gt=u.stateNode.containerInfo,_r=!0,Zi(s,a,u),Gt=p,_r=g;break;case 0:case 11:case 14:case 15:if(!an&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){g=p=p.next;do{var v=g,S=v.destroy;v=v.tag,S!==void 0&&((v&2)!==0||(v&4)!==0)&&sm(u,a,S),g=g.next}while(g!==p)}Zi(s,a,u);break;case 1:if(!an&&(Oa(u,a),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(M){mt(u,a,M)}Zi(s,a,u);break;case 21:Zi(s,a,u);break;case 22:u.mode&1?(an=(p=an)||u.memoizedState!==null,Zi(s,a,u),an=p):Zi(s,a,u);break;default:Zi(s,a,u)}}function _v(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new wk),a.forEach(function(p){var g=Ak.bind(null,s,p);u.has(p)||(u.add(p),p.then(g,g))})}}function vr(s,a){var u=a.deletions;if(u!==null)for(var p=0;p<u.length;p++){var g=u[p];try{var v=s,S=a,M=S;e:for(;M!==null;){switch(M.tag){case 5:Gt=M.stateNode,_r=!1;break e;case 3:Gt=M.stateNode.containerInfo,_r=!0;break e;case 4:Gt=M.stateNode.containerInfo,_r=!0;break e}M=M.return}if(Gt===null)throw Error(t(160));yv(v,S,g),Gt=null,_r=!1;var U=g.alternate;U!==null&&(U.return=null),g.return=null}catch(X){mt(g,a,X)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)vv(a,s),a=a.sibling}function vv(s,a){var u=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(vr(a,s),Ur(s),p&4){try{uc(3,s,s.return),Mh(3,s)}catch(xe){mt(s,s.return,xe)}try{uc(5,s,s.return)}catch(xe){mt(s,s.return,xe)}}break;case 1:vr(a,s),Ur(s),p&512&&u!==null&&Oa(u,u.return);break;case 5:if(vr(a,s),Ur(s),p&512&&u!==null&&Oa(u,u.return),s.flags&32){var g=s.stateNode;try{Li(g,"")}catch(xe){mt(s,s.return,xe)}}if(p&4&&(g=s.stateNode,g!=null)){var v=s.memoizedProps,S=u!==null?u.memoizedProps:v,M=s.type,U=s.updateQueue;if(s.updateQueue=null,U!==null)try{M==="input"&&v.type==="radio"&&v.name!=null&&xl(g,v),Al(M,S);var X=Al(M,v);for(S=0;S<U.length;S+=2){var ce=U[S],ue=U[S+1];ce==="style"?kl(g,ue):ce==="dangerouslySetInnerHTML"?Sl(g,ue):ce==="children"?Li(g,ue):$(g,ce,ue,X)}switch(M){case"input":El(g,v);break;case"textarea":Ko(g,v);break;case"select":var le=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var ye=v.value;ye!=null?oi(g,!!v.multiple,ye,!1):le!==!!v.multiple&&(v.defaultValue!=null?oi(g,!!v.multiple,v.defaultValue,!0):oi(g,!!v.multiple,v.multiple?[]:"",!1))}g[Zl]=v}catch(xe){mt(s,s.return,xe)}}break;case 6:if(vr(a,s),Ur(s),p&4){if(s.stateNode===null)throw Error(t(162));g=s.stateNode,v=s.memoizedProps;try{g.nodeValue=v}catch(xe){mt(s,s.return,xe)}}break;case 3:if(vr(a,s),Ur(s),p&4&&u!==null&&u.memoizedState.isDehydrated)try{fr(a.containerInfo)}catch(xe){mt(s,s.return,xe)}break;case 4:vr(a,s),Ur(s);break;case 13:vr(a,s),Ur(s),g=s.child,g.flags&8192&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||(hm=tt())),p&4&&_v(s);break;case 22:if(ce=u!==null&&u.memoizedState!==null,s.mode&1?(an=(X=an)||ce,vr(a,s),an=X):vr(a,s),Ur(s),p&8192){if(X=s.memoizedState!==null,(s.stateNode.isHidden=X)&&!ce&&(s.mode&1)!==0)for(ve=s,ce=s.child;ce!==null;){for(ue=ve=ce;ve!==null;){switch(le=ve,ye=le.child,le.tag){case 0:case 11:case 14:case 15:uc(4,le,le.return);break;case 1:Oa(le,le.return);var we=le.stateNode;if(typeof we.componentWillUnmount=="function"){p=le,u=le.return;try{a=p,we.props=a.memoizedProps,we.state=a.memoizedState,we.componentWillUnmount()}catch(xe){mt(p,u,xe)}}break;case 5:Oa(le,le.return);break;case 22:if(le.memoizedState!==null){Ev(ue);continue}}ye!==null?(ye.return=le,ve=ye):Ev(ue)}ce=ce.sibling}e:for(ce=null,ue=s;;){if(ue.tag===5){if(ce===null){ce=ue;try{g=ue.stateNode,X?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(M=ue.stateNode,U=ue.memoizedProps.style,S=U!=null&&U.hasOwnProperty("display")?U.display:null,M.style.display=Il("display",S))}catch(xe){mt(s,s.return,xe)}}}else if(ue.tag===6){if(ce===null)try{ue.stateNode.nodeValue=X?"":ue.memoizedProps}catch(xe){mt(s,s.return,xe)}}else if((ue.tag!==22&&ue.tag!==23||ue.memoizedState===null||ue===s)&&ue.child!==null){ue.child.return=ue,ue=ue.child;continue}if(ue===s)break e;for(;ue.sibling===null;){if(ue.return===null||ue.return===s)break e;ce===ue&&(ce=null),ue=ue.return}ce===ue&&(ce=null),ue.sibling.return=ue.return,ue=ue.sibling}}break;case 19:vr(a,s),Ur(s),p&4&&_v(s);break;case 21:break;default:vr(a,s),Ur(s)}}function Ur(s){var a=s.flags;if(a&2){try{e:{for(var u=s.return;u!==null;){if(mv(u)){var p=u;break e}u=u.return}throw Error(t(160))}switch(p.tag){case 5:var g=p.stateNode;p.flags&32&&(Li(g,""),p.flags&=-33);var v=gv(s);lm(s,v,g);break;case 3:case 4:var S=p.stateNode.containerInfo,M=gv(s);am(s,M,S);break;default:throw Error(t(161))}}catch(U){mt(s,s.return,U)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function Ek(s,a,u){ve=s,wv(s)}function wv(s,a,u){for(var p=(s.mode&1)!==0;ve!==null;){var g=ve,v=g.child;if(g.tag===22&&p){var S=g.memoizedState!==null||Oh;if(!S){var M=g.alternate,U=M!==null&&M.memoizedState!==null||an;M=Oh;var X=an;if(Oh=S,(an=U)&&!X)for(ve=g;ve!==null;)S=ve,U=S.child,S.tag===22&&S.memoizedState!==null?bv(g):U!==null?(U.return=S,ve=U):bv(g);for(;v!==null;)ve=v,wv(v),v=v.sibling;ve=g,Oh=M,an=X}xv(s)}else(g.subtreeFlags&8772)!==0&&v!==null?(v.return=g,ve=v):xv(s)}}function xv(s){for(;ve!==null;){var a=ve;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:an||Mh(5,a);break;case 1:var p=a.stateNode;if(a.flags&4&&!an)if(u===null)p.componentDidMount();else{var g=a.elementType===a.type?u.memoizedProps:yr(a.type,u.memoizedProps);p.componentDidUpdate(g,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var v=a.updateQueue;v!==null&&_0(a,v,p);break;case 3:var S=a.updateQueue;if(S!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}_0(a,S,u)}break;case 5:var M=a.stateNode;if(u===null&&a.flags&4){u=M;var U=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":U.autoFocus&&u.focus();break;case"img":U.src&&(u.src=U.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var X=a.alternate;if(X!==null){var ce=X.memoizedState;if(ce!==null){var ue=ce.dehydrated;ue!==null&&fr(ue)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}an||a.flags&512&&om(a)}catch(le){mt(a,a.return,le)}}if(a===s){ve=null;break}if(u=a.sibling,u!==null){u.return=a.return,ve=u;break}ve=a.return}}function Ev(s){for(;ve!==null;){var a=ve;if(a===s){ve=null;break}var u=a.sibling;if(u!==null){u.return=a.return,ve=u;break}ve=a.return}}function bv(s){for(;ve!==null;){var a=ve;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{Mh(4,a)}catch(U){mt(a,u,U)}break;case 1:var p=a.stateNode;if(typeof p.componentDidMount=="function"){var g=a.return;try{p.componentDidMount()}catch(U){mt(a,g,U)}}var v=a.return;try{om(a)}catch(U){mt(a,v,U)}break;case 5:var S=a.return;try{om(a)}catch(U){mt(a,S,U)}}}catch(U){mt(a,a.return,U)}if(a===s){ve=null;break}var M=a.sibling;if(M!==null){M.return=a.return,ve=M;break}ve=a.return}}var bk=Math.ceil,Nh=te.ReactCurrentDispatcher,cm=te.ReactCurrentOwner,Zn=te.ReactCurrentBatchConfig,$e=0,Bt=null,Pt=null,Kt=0,Un=0,Ma=Gi(0),Vt=0,hc=null,uo=0,Lh=0,um=0,dc=null,bn=null,hm=0,Na=1/0,xi=null,Vh=!1,dm=null,es=null,Fh=!1,ts=null,jh=0,fc=0,fm=null,Uh=-1,zh=0;function yn(){return($e&6)!==0?tt():Uh!==-1?Uh:Uh=tt()}function ns(s){return(s.mode&1)===0?1:($e&2)!==0&&Kt!==0?Kt&-Kt:ok.transition!==null?(zh===0&&(zh=Js()),zh):(s=ze,s!==0||(s=window.event,s=s===void 0?16:zl(s.type)),s)}function wr(s,a,u,p){if(50<fc)throw fc=0,fm=null,Error(t(185));Ui(s,u,p),(($e&2)===0||s!==Bt)&&(s===Bt&&(($e&2)===0&&(Lh|=u),Vt===4&&rs(s,Kt)),Tn(s,p),u===1&&$e===0&&(a.mode&1)===0&&(Na=tt()+500,mh&&Qi()))}function Tn(s,a){var u=s.callbackNode;ci(s,a);var p=Xs(s,s===Bt?Kt:0);if(p===0)u!==null&&Ll(u),s.callbackNode=null,s.callbackPriority=0;else if(a=p&-p,s.callbackPriority!==a){if(u!=null&&Ll(u),a===1)s.tag===0?sk(Sv.bind(null,s)):c0(Sv.bind(null,s)),tk(function(){($e&6)===0&&Qi()}),u=null;else{switch(Bi(p)){case 1:u=Ks;break;case 4:u=Vi;break;case 16:u=qn;break;case 536870912:u=zu;break;default:u=qn}u=Ov(u,Tv.bind(null,s))}s.callbackPriority=a,s.callbackNode=u}}function Tv(s,a){if(Uh=-1,zh=0,($e&6)!==0)throw Error(t(327));var u=s.callbackNode;if(La()&&s.callbackNode!==u)return null;var p=Xs(s,s===Bt?Kt:0);if(p===0)return null;if((p&30)!==0||(p&s.expiredLanes)!==0||a)a=Bh(s,p);else{a=p;var g=$e;$e|=2;var v=kv();(Bt!==s||Kt!==a)&&(xi=null,Na=tt()+500,fo(s,a));do try{Ik();break}catch(M){Iv(s,M)}while(!0);Rp(),Nh.current=v,$e=g,Pt!==null?a=0:(Bt=null,Kt=0,a=Vt)}if(a!==0){if(a===2&&(g=Nn(s),g!==0&&(p=g,a=pm(s,g))),a===1)throw u=hc,fo(s,0),rs(s,p),Tn(s,tt()),u;if(a===6)rs(s,p);else{if(g=s.current.alternate,(p&30)===0&&!Tk(g)&&(a=Bh(s,p),a===2&&(v=Nn(s),v!==0&&(p=v,a=pm(s,v))),a===1))throw u=hc,fo(s,0),rs(s,p),Tn(s,tt()),u;switch(s.finishedWork=g,s.finishedLanes=p,a){case 0:case 1:throw Error(t(345));case 2:po(s,bn,xi);break;case 3:if(rs(s,p),(p&130023424)===p&&(a=hm+500-tt(),10<a)){if(Xs(s,0)!==0)break;if(g=s.suspendedLanes,(g&p)!==p){yn(),s.pingedLanes|=s.suspendedLanes&g;break}s.timeoutHandle=wp(po.bind(null,s,bn,xi),a);break}po(s,bn,xi);break;case 4:if(rs(s,p),(p&4194240)===p)break;for(a=s.eventTimes,g=-1;0<p;){var S=31-pn(p);v=1<<S,S=a[S],S>g&&(g=S),p&=~v}if(p=g,p=tt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*bk(p/1960))-p,10<p){s.timeoutHandle=wp(po.bind(null,s,bn,xi),p);break}po(s,bn,xi);break;case 5:po(s,bn,xi);break;default:throw Error(t(329))}}}return Tn(s,tt()),s.callbackNode===u?Tv.bind(null,s):null}function pm(s,a){var u=dc;return s.current.memoizedState.isDehydrated&&(fo(s,a).flags|=256),s=Bh(s,a),s!==2&&(a=bn,bn=u,a!==null&&mm(a)),s}function mm(s){bn===null?bn=s:bn.push.apply(bn,s)}function Tk(s){for(var a=s;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var g=u[p],v=g.getSnapshot;g=g.value;try{if(!mr(v(),g))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function rs(s,a){for(a&=~um,a&=~Lh,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var u=31-pn(a),p=1<<u;s[u]=-1,a&=~p}}function Sv(s){if(($e&6)!==0)throw Error(t(327));La();var a=Xs(s,0);if((a&1)===0)return Tn(s,tt()),null;var u=Bh(s,a);if(s.tag!==0&&u===2){var p=Nn(s);p!==0&&(a=p,u=pm(s,p))}if(u===1)throw u=hc,fo(s,0),rs(s,a),Tn(s,tt()),u;if(u===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,po(s,bn,xi),Tn(s,tt()),null}function gm(s,a){var u=$e;$e|=1;try{return s(a)}finally{$e=u,$e===0&&(Na=tt()+500,mh&&Qi())}}function ho(s){ts!==null&&ts.tag===0&&($e&6)===0&&La();var a=$e;$e|=1;var u=Zn.transition,p=ze;try{if(Zn.transition=null,ze=1,s)return s()}finally{ze=p,Zn.transition=u,$e=a,($e&6)===0&&Qi()}}function ym(){Un=Ma.current,st(Ma)}function fo(s,a){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,ek(u)),Pt!==null)for(u=Pt.return;u!==null;){var p=u;switch(Ip(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&fh();break;case 3:Ra(),st(wn),st(rn),zp();break;case 5:jp(p);break;case 4:Ra();break;case 13:st(ht);break;case 19:st(ht);break;case 10:Dp(p.type._context);break;case 22:case 23:ym()}u=u.return}if(Bt=s,Pt=s=is(s.current,null),Kt=Un=a,Vt=0,hc=null,um=Lh=uo=0,bn=dc=null,ao!==null){for(a=0;a<ao.length;a++)if(u=ao[a],p=u.interleaved,p!==null){u.interleaved=null;var g=p.next,v=u.pending;if(v!==null){var S=v.next;v.next=g,p.next=S}u.pending=p}ao=null}return s}function Iv(s,a){do{var u=Pt;try{if(Rp(),Ih.current=Ah,kh){for(var p=dt.memoizedState;p!==null;){var g=p.queue;g!==null&&(g.pending=null),p=p.next}kh=!1}if(co=0,zt=Lt=dt=null,sc=!1,oc=0,cm.current=null,u===null||u.return===null){Vt=1,hc=a,Pt=null;break}e:{var v=s,S=u.return,M=u,U=a;if(a=Kt,M.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){var X=U,ce=M,ue=ce.tag;if((ce.mode&1)===0&&(ue===0||ue===11||ue===15)){var le=ce.alternate;le?(ce.updateQueue=le.updateQueue,ce.memoizedState=le.memoizedState,ce.lanes=le.lanes):(ce.updateQueue=null,ce.memoizedState=null)}var ye=X0(S);if(ye!==null){ye.flags&=-257,J0(ye,S,M,v,a),ye.mode&1&&Q0(v,X,a),a=ye,U=X;var we=a.updateQueue;if(we===null){var xe=new Set;xe.add(U),a.updateQueue=xe}else we.add(U);break e}else{if((a&1)===0){Q0(v,X,a),_m();break e}U=Error(t(426))}}else if(ut&&M.mode&1){var vt=X0(S);if(vt!==null){(vt.flags&65536)===0&&(vt.flags|=256),J0(vt,S,M,v,a),Cp(Da(U,M));break e}}v=U=Da(U,M),Vt!==4&&(Vt=2),dc===null?dc=[v]:dc.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,a&=-a,v.lanes|=a;var Y=G0(v,U,a);y0(v,Y);break e;case 1:M=U;var B=v.type,G=v.stateNode;if((v.flags&128)===0&&(typeof B.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(es===null||!es.has(G)))){v.flags|=65536,a&=-a,v.lanes|=a;var de=K0(v,M,a);y0(v,de);break e}}v=v.return}while(v!==null)}Cv(u)}catch(be){a=be,Pt===u&&u!==null&&(Pt=u=u.return);continue}break}while(!0)}function kv(){var s=Nh.current;return Nh.current=Ah,s===null?Ah:s}function _m(){(Vt===0||Vt===3||Vt===2)&&(Vt=4),Bt===null||(uo&268435455)===0&&(Lh&268435455)===0||rs(Bt,Kt)}function Bh(s,a){var u=$e;$e|=2;var p=kv();(Bt!==s||Kt!==a)&&(xi=null,fo(s,a));do try{Sk();break}catch(g){Iv(s,g)}while(!0);if(Rp(),$e=u,Nh.current=p,Pt!==null)throw Error(t(261));return Bt=null,Kt=0,Vt}function Sk(){for(;Pt!==null;)Pv(Pt)}function Ik(){for(;Pt!==null&&!ju();)Pv(Pt)}function Pv(s){var a=Dv(s.alternate,s,Un);s.memoizedProps=s.pendingProps,a===null?Cv(s):Pt=a,cm.current=null}function Cv(s){var a=s;do{var u=a.alternate;if(s=a.return,(a.flags&32768)===0){if(u=_k(u,a,Un),u!==null){Pt=u;return}}else{if(u=vk(u,a),u!==null){u.flags&=32767,Pt=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Vt=6,Pt=null;return}}if(a=a.sibling,a!==null){Pt=a;return}Pt=a=s}while(a!==null);Vt===0&&(Vt=5)}function po(s,a,u){var p=ze,g=Zn.transition;try{Zn.transition=null,ze=1,kk(s,a,u,p)}finally{Zn.transition=g,ze=p}return null}function kk(s,a,u,p){do La();while(ts!==null);if(($e&6)!==0)throw Error(t(327));u=s.finishedWork;var g=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var v=u.lanes|u.childLanes;if(Ze(s,v),s===Bt&&(Pt=Bt=null,Kt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Fh||(Fh=!0,Ov(qn,function(){return La(),null})),v=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||v){v=Zn.transition,Zn.transition=null;var S=ze;ze=1;var M=$e;$e|=4,cm.current=null,xk(s,u),vv(u,s),YI(_p),$i=!!yp,_p=yp=null,s.current=u,Ek(u),tp(),$e=M,ze=S,Zn.transition=v}else s.current=u;if(Fh&&(Fh=!1,ts=s,jh=g),v=s.pendingLanes,v===0&&(es=null),Bu(u.stateNode),Tn(s,tt()),a!==null)for(p=s.onRecoverableError,u=0;u<a.length;u++)g=a[u],p(g.value,{componentStack:g.stack,digest:g.digest});if(Vh)throw Vh=!1,s=dm,dm=null,s;return(jh&1)!==0&&s.tag!==0&&La(),v=s.pendingLanes,(v&1)!==0?s===fm?fc++:(fc=0,fm=s):fc=0,Qi(),null}function La(){if(ts!==null){var s=Bi(jh),a=Zn.transition,u=ze;try{if(Zn.transition=null,ze=16>s?16:s,ts===null)var p=!1;else{if(s=ts,ts=null,jh=0,($e&6)!==0)throw Error(t(331));var g=$e;for($e|=4,ve=s.current;ve!==null;){var v=ve,S=v.child;if((ve.flags&16)!==0){var M=v.deletions;if(M!==null){for(var U=0;U<M.length;U++){var X=M[U];for(ve=X;ve!==null;){var ce=ve;switch(ce.tag){case 0:case 11:case 15:uc(8,ce,v)}var ue=ce.child;if(ue!==null)ue.return=ce,ve=ue;else for(;ve!==null;){ce=ve;var le=ce.sibling,ye=ce.return;if(pv(ce),ce===X){ve=null;break}if(le!==null){le.return=ye,ve=le;break}ve=ye}}}var we=v.alternate;if(we!==null){var xe=we.child;if(xe!==null){we.child=null;do{var vt=xe.sibling;xe.sibling=null,xe=vt}while(xe!==null)}}ve=v}}if((v.subtreeFlags&2064)!==0&&S!==null)S.return=v,ve=S;else e:for(;ve!==null;){if(v=ve,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:uc(9,v,v.return)}var Y=v.sibling;if(Y!==null){Y.return=v.return,ve=Y;break e}ve=v.return}}var B=s.current;for(ve=B;ve!==null;){S=ve;var G=S.child;if((S.subtreeFlags&2064)!==0&&G!==null)G.return=S,ve=G;else e:for(S=B;ve!==null;){if(M=ve,(M.flags&2048)!==0)try{switch(M.tag){case 0:case 11:case 15:Mh(9,M)}}catch(be){mt(M,M.return,be)}if(M===S){ve=null;break e}var de=M.sibling;if(de!==null){de.return=M.return,ve=de;break e}ve=M.return}}if($e=g,Qi(),Mn&&typeof Mn.onPostCommitFiberRoot=="function")try{Mn.onPostCommitFiberRoot(Qs,s)}catch{}p=!0}return p}finally{ze=u,Zn.transition=a}}return!1}function Av(s,a,u){a=Da(u,a),a=G0(s,a,1),s=Ji(s,a,1),a=yn(),s!==null&&(Ui(s,1,a),Tn(s,a))}function mt(s,a,u){if(s.tag===3)Av(s,s,u);else for(;a!==null;){if(a.tag===3){Av(a,s,u);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(es===null||!es.has(p))){s=Da(u,s),s=K0(a,s,1),a=Ji(a,s,1),s=yn(),a!==null&&(Ui(a,1,s),Tn(a,s));break}}a=a.return}}function Pk(s,a,u){var p=s.pingCache;p!==null&&p.delete(a),a=yn(),s.pingedLanes|=s.suspendedLanes&u,Bt===s&&(Kt&u)===u&&(Vt===4||Vt===3&&(Kt&130023424)===Kt&&500>tt()-hm?fo(s,0):um|=u),Tn(s,a)}function Rv(s,a){a===0&&((s.mode&1)===0?a=1:(a=sa,sa<<=1,(sa&130023424)===0&&(sa=4194304)));var u=yn();s=_i(s,a),s!==null&&(Ui(s,a,u),Tn(s,u))}function Ck(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),Rv(s,u)}function Ak(s,a){var u=0;switch(s.tag){case 13:var p=s.stateNode,g=s.memoizedState;g!==null&&(u=g.retryLane);break;case 19:p=s.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(a),Rv(s,u)}var Dv;Dv=function(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps||wn.current)En=!0;else{if((s.lanes&u)===0&&(a.flags&128)===0)return En=!1,yk(s,a,u);En=(s.flags&131072)!==0}else En=!1,ut&&(a.flags&1048576)!==0&&u0(a,yh,a.index);switch(a.lanes=0,a.tag){case 2:var p=a.type;Dh(s,a),s=a.pendingProps;var g=Ta(a,rn.current);Ca(a,u),g=$p(null,a,p,s,g,u);var v=Hp();return a.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,xn(p)?(v=!0,ph(a)):v=!1,a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Np(a),g.updater=bh,a.stateNode=g,g._reactInternals=a,Vp(a,p,s,u),a=Zp(null,a,p,!0,v,u)):(a.tag=0,ut&&v&&Sp(a),gn(null,a,g,u),a=a.child),a;case 16:p=a.elementType;e:{switch(Dh(s,a),s=a.pendingProps,g=p._init,p=g(p._payload),a.type=p,g=a.tag=Dk(p),s=yr(p,s),g){case 0:a=Jp(null,a,p,s,u);break e;case 1:a=iv(null,a,p,s,u);break e;case 11:a=Z0(null,a,p,s,u);break e;case 14:a=ev(null,a,p,yr(p.type,s),u);break e}throw Error(t(306,p,""))}return a;case 0:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:yr(p,g),Jp(s,a,p,g,u);case 1:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:yr(p,g),iv(s,a,p,g,u);case 3:e:{if(sv(a),s===null)throw Error(t(387));p=a.pendingProps,v=a.memoizedState,g=v.element,g0(s,a),Eh(a,p,null,u);var S=a.memoizedState;if(p=S.element,v.isDehydrated)if(v={element:p,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){g=Da(Error(t(423)),a),a=ov(s,a,p,u,g);break e}else if(p!==g){g=Da(Error(t(424)),a),a=ov(s,a,p,u,g);break e}else for(jn=Yi(a.stateNode.containerInfo.firstChild),Fn=a,ut=!0,gr=null,u=S0(a,null,p,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ka(),p===g){a=wi(s,a,u);break e}gn(s,a,p,u)}a=a.child}return a;case 5:return I0(a),s===null&&Pp(a),p=a.type,g=a.pendingProps,v=s!==null?s.memoizedProps:null,S=g.children,vp(p,g)?S=null:v!==null&&vp(p,v)&&(a.flags|=32),rv(s,a),gn(s,a,S,u),a.child;case 6:return s===null&&Pp(a),null;case 13:return av(s,a,u);case 4:return Fp(a,a.stateNode.containerInfo),p=a.pendingProps,s===null?a.child=Aa(a,null,p,u):gn(s,a,p,u),a.child;case 11:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:yr(p,g),Z0(s,a,p,g,u);case 7:return gn(s,a,a.pendingProps,u),a.child;case 8:return gn(s,a,a.pendingProps.children,u),a.child;case 12:return gn(s,a,a.pendingProps.children,u),a.child;case 10:e:{if(p=a.type._context,g=a.pendingProps,v=a.memoizedProps,S=g.value,nt(vh,p._currentValue),p._currentValue=S,v!==null)if(mr(v.value,S)){if(v.children===g.children&&!wn.current){a=wi(s,a,u);break e}}else for(v=a.child,v!==null&&(v.return=a);v!==null;){var M=v.dependencies;if(M!==null){S=v.child;for(var U=M.firstContext;U!==null;){if(U.context===p){if(v.tag===1){U=vi(-1,u&-u),U.tag=2;var X=v.updateQueue;if(X!==null){X=X.shared;var ce=X.pending;ce===null?U.next=U:(U.next=ce.next,ce.next=U),X.pending=U}}v.lanes|=u,U=v.alternate,U!==null&&(U.lanes|=u),Op(v.return,u,a),M.lanes|=u;break}U=U.next}}else if(v.tag===10)S=v.type===a.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(t(341));S.lanes|=u,M=S.alternate,M!==null&&(M.lanes|=u),Op(S,u,a),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===a){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}gn(s,a,g.children,u),a=a.child}return a;case 9:return g=a.type,p=a.pendingProps.children,Ca(a,u),g=Xn(g),p=p(g),a.flags|=1,gn(s,a,p,u),a.child;case 14:return p=a.type,g=yr(p,a.pendingProps),g=yr(p.type,g),ev(s,a,p,g,u);case 15:return tv(s,a,a.type,a.pendingProps,u);case 17:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:yr(p,g),Dh(s,a),a.tag=1,xn(p)?(s=!0,ph(a)):s=!1,Ca(a,u),x0(a,p,g),Vp(a,p,g,u),Zp(null,a,p,!0,s,u);case 19:return cv(s,a,u);case 22:return nv(s,a,u)}throw Error(t(156,a.tag))};function Ov(s,a){return ra(s,a)}function Rk(s,a,u,p){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function er(s,a,u,p){return new Rk(s,a,u,p)}function vm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Dk(s){if(typeof s=="function")return vm(s)?1:0;if(s!=null){if(s=s.$$typeof,s===j)return 11;if(s===fe)return 14}return 2}function is(s,a){var u=s.alternate;return u===null?(u=er(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function Wh(s,a,u,p,g,v){var S=2;if(p=s,typeof s=="function")vm(s)&&(S=1);else if(typeof s=="string")S=5;else e:switch(s){case D:return mo(u.children,g,v,a);case P:S=8,g|=8;break;case A:return s=er(12,u,a,g|2),s.elementType=A,s.lanes=v,s;case O:return s=er(13,u,a,g),s.elementType=O,s.lanes=v,s;case se:return s=er(19,u,a,g),s.elementType=se,s.lanes=v,s;case re:return $h(u,g,v,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case V:S=10;break e;case L:S=9;break e;case j:S=11;break e;case fe:S=14;break e;case Se:S=16,p=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return a=er(S,u,a,g),a.elementType=s,a.type=p,a.lanes=v,a}function mo(s,a,u,p){return s=er(7,s,p,a),s.lanes=u,s}function $h(s,a,u,p){return s=er(22,s,p,a),s.elementType=re,s.lanes=u,s.stateNode={isHidden:!1},s}function wm(s,a,u){return s=er(6,s,null,a),s.lanes=u,s}function xm(s,a,u){return a=er(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function Ok(s,a,u,p,g){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ji(0),this.expirationTimes=ji(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ji(0),this.identifierPrefix=p,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Em(s,a,u,p,g,v,S,M,U){return s=new Ok(s,a,u,M,U),a===1?(a=1,v===!0&&(a|=8)):a=0,v=er(3,null,null,a),s.current=v,v.stateNode=s,v.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Np(v),s}function Mk(s,a,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ie,key:p==null?null:""+p,children:s,containerInfo:a,implementation:u}}function Mv(s){if(!s)return Ki;s=s._reactInternals;e:{if(lr(s)!==s||s.tag!==1)throw Error(t(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(xn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(s.tag===1){var u=s.type;if(xn(u))return a0(s,u,a)}return a}function Nv(s,a,u,p,g,v,S,M,U){return s=Em(u,p,!0,s,g,v,S,M,U),s.context=Mv(null),u=s.current,p=yn(),g=ns(u),v=vi(p,g),v.callback=a??null,Ji(u,v,g),s.current.lanes=g,Ui(s,g,p),Tn(s,p),s}function Hh(s,a,u,p){var g=a.current,v=yn(),S=ns(g);return u=Mv(u),a.context===null?a.context=u:a.pendingContext=u,a=vi(v,S),a.payload={element:s},p=p===void 0?null:p,p!==null&&(a.callback=p),s=Ji(g,a,S),s!==null&&(wr(s,g,S,v),xh(s,g,S)),S}function qh(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Lv(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function bm(s,a){Lv(s,a),(s=s.alternate)&&Lv(s,a)}function Nk(){return null}var Vv=typeof reportError=="function"?reportError:function(s){console.error(s)};function Tm(s){this._internalRoot=s}Yh.prototype.render=Tm.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(t(409));Hh(s,a,null,null)},Yh.prototype.unmount=Tm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;ho(function(){Hh(null,s,null,null)}),a[pi]=null}};function Yh(s){this._internalRoot=s}Yh.prototype.unstable_scheduleHydration=function(s){if(s){var a=Yu();s={blockedOn:null,target:s,priority:a};for(var u=0;u<Or.length&&a!==0&&a<Or[u].priority;u++);Or.splice(u,0,s),u===0&&Qu(s)}};function Sm(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Gh(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Fv(){}function Lk(s,a,u,p,g){if(g){if(typeof p=="function"){var v=p;p=function(){var X=qh(S);v.call(X)}}var S=Nv(a,p,s,0,null,!1,!1,"",Fv);return s._reactRootContainer=S,s[pi]=S.current,Xl(s.nodeType===8?s.parentNode:s),ho(),S}for(;g=s.lastChild;)s.removeChild(g);if(typeof p=="function"){var M=p;p=function(){var X=qh(U);M.call(X)}}var U=Em(s,0,!1,null,null,!1,!1,"",Fv);return s._reactRootContainer=U,s[pi]=U.current,Xl(s.nodeType===8?s.parentNode:s),ho(function(){Hh(a,U,u,p)}),U}function Kh(s,a,u,p,g){var v=u._reactRootContainer;if(v){var S=v;if(typeof g=="function"){var M=g;g=function(){var U=qh(S);M.call(U)}}Hh(a,S,s,g)}else S=Lk(u,a,s,g,p);return qh(S)}Hu=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var u=Fi(a.pendingLanes);u!==0&&(zi(a,u|1),Tn(a,tt()),($e&6)===0&&(Na=tt()+500,Qi()))}break;case 13:ho(function(){var p=_i(s,1);if(p!==null){var g=yn();wr(p,s,1,g)}}),bm(s,1)}},oa=function(s){if(s.tag===13){var a=_i(s,134217728);if(a!==null){var u=yn();wr(a,s,134217728,u)}bm(s,134217728)}},qu=function(s){if(s.tag===13){var a=ns(s),u=_i(s,a);if(u!==null){var p=yn();wr(u,s,a,p)}bm(s,a)}},Yu=function(){return ze},Gu=function(s,a){var u=ze;try{return ze=s,a()}finally{ze=u}},Xo=function(s,a,u){switch(a){case"input":if(El(s,u),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var p=u[a];if(p!==s&&p.form===s.form){var g=dh(p);if(!g)throw Error(t(90));nn(p),El(p,g)}}}break;case"textarea":Ko(s,u);break;case"select":a=u.value,a!=null&&oi(s,!!u.multiple,a,!1)}},Hs=gm,Dl=ho;var Vk={usingClientEntryPoint:!1,Events:[ec,Ea,dh,Rr,Rl,gm]},pc={findFiberByHostInstance:ro,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Fk={bundleType:pc.bundleType,version:pc.version,rendererPackageName:pc.rendererPackageName,rendererConfig:pc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:te.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Nl(s),s===null?null:s.stateNode},findFiberByHostInstance:pc.findFiberByHostInstance||Nk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qh.isDisabled&&Qh.supportsFiber)try{Qs=Qh.inject(Fk),Mn=Qh}catch{}}return Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vk,Sn.createPortal=function(s,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sm(a))throw Error(t(200));return Mk(s,a,null,u)},Sn.createRoot=function(s,a){if(!Sm(s))throw Error(t(299));var u=!1,p="",g=Vv;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(g=a.onRecoverableError)),a=Em(s,1,!1,null,null,u,!1,p,g),s[pi]=a.current,Xl(s.nodeType===8?s.parentNode:s),new Tm(a)},Sn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=Nl(a),s=s===null?null:s.stateNode,s},Sn.flushSync=function(s){return ho(s)},Sn.hydrate=function(s,a,u){if(!Gh(a))throw Error(t(200));return Kh(null,s,a,!0,u)},Sn.hydrateRoot=function(s,a,u){if(!Sm(s))throw Error(t(405));var p=u!=null&&u.hydratedSources||null,g=!1,v="",S=Vv;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onRecoverableError!==void 0&&(S=u.onRecoverableError)),a=Nv(a,null,s,1,u??null,g,!1,v,S),s[pi]=a.current,Xl(s),p)for(s=0;s<p.length;s++)u=p[s],g=u._getVersion,g=g(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,g]:a.mutableSourceEagerHydrationData.push(u,g);return new Yh(a)},Sn.render=function(s,a,u){if(!Gh(a))throw Error(t(200));return Kh(null,s,a,!1,u)},Sn.unmountComponentAtNode=function(s){if(!Gh(s))throw Error(t(40));return s._reactRootContainer?(ho(function(){Kh(null,null,s,!1,function(){s._reactRootContainer=null,s[pi]=null})}),!0):!1},Sn.unstable_batchedUpdates=gm,Sn.unstable_renderSubtreeIntoContainer=function(s,a,u,p){if(!Gh(u))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Kh(s,a,u,!1,p)},Sn.version="18.2.0-next-9e3b772b8-20220608",Sn}var xx;function U1(){if(xx)return zm.exports;xx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),zm.exports=uM(),zm.exports}var Ex;function hM(){if(Ex)return rd;Ex=1;var n=U1();return rd.createRoot=n.createRoot,rd.hydrateRoot=n.hydrateRoot,rd}var dM=hM();const fM=db(dM);U1();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function su(){return su=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},su.apply(this,arguments)}var gs;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(gs||(gs={}));const bx="popstate";function pM(n){n===void 0&&(n={});function e(r,i){let{pathname:o,search:l,hash:c}=r.location;return Lg("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:of(i)}return gM(e,t,null,n)}function St(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function z1(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mM(){return Math.random().toString(36).substr(2,8)}function Tx(n,e){return{usr:n.state,key:n.key,idx:e}}function Lg(n,e,t,r){return t===void 0&&(t=null),su({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?ml(e):e,{state:t,key:e&&e.key||r||mM()})}function of(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ml(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function gM(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,c=gs.Pop,h=null,f=m();f==null&&(f=0,l.replaceState(su({},l.state,{idx:f}),""));function m(){return(l.state||{idx:null}).idx}function y(){c=gs.Pop;let b=m(),N=b==null?null:b-f;f=b,h&&h({action:c,location:k.location,delta:N})}function w(b,N){c=gs.Push;let z=Lg(k.location,b,N);f=m()+1;let $=Tx(z,f),te=k.createHref(z);try{l.pushState($,"",te)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;i.location.assign(te)}o&&h&&h({action:c,location:k.location,delta:1})}function T(b,N){c=gs.Replace;let z=Lg(k.location,b,N);f=m();let $=Tx(z,f),te=k.createHref(z);l.replaceState($,"",te),o&&h&&h({action:c,location:k.location,delta:0})}function I(b){let N=i.location.origin!=="null"?i.location.origin:i.location.href,z=typeof b=="string"?b:of(b);return z=z.replace(/ $/,"%20"),St(N,"No window.location.(origin|href) available to create URL for href: "+z),new URL(z,N)}let k={get action(){return c},get location(){return n(i,l)},listen(b){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(bx,y),h=b,()=>{i.removeEventListener(bx,y),h=null}},createHref(b){return e(i,b)},createURL:I,encodeLocation(b){let N=I(b);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:w,replace:T,go(b){return l.go(b)}};return k}var Sx;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Sx||(Sx={}));function yM(n,e,t){return t===void 0&&(t="/"),_M(n,e,t)}function _M(n,e,t,r){let i=typeof e=="string"?ml(e):e,o=n_(i.pathname||"/",t);if(o==null)return null;let l=B1(n);vM(l);let c=null;for(let h=0;c==null&&h<l.length;++h){let f=RM(o);c=PM(l[h],f)}return c}function B1(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(o,l,c)=>{let h={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};h.relativePath.startsWith("/")&&(St(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let f=Ts([r,h.relativePath]),m=t.concat(h);o.children&&o.children.length>0&&(St(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),B1(o.children,e,m,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:IM(f,o.index),routesMeta:m})};return n.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,l);else for(let h of W1(o.path))i(o,l,h)}),e}function W1(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=W1(r.join("/")),c=[];return c.push(...l.map(h=>h===""?o:[o,h].join("/"))),i&&c.push(...l),c.map(h=>n.startsWith("/")&&h===""?"/":h)}function vM(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:kM(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const wM=/^:[\w-]+$/,xM=3,EM=2,bM=1,TM=10,SM=-2,Ix=n=>n==="*";function IM(n,e){let t=n.split("/"),r=t.length;return t.some(Ix)&&(r+=SM),e&&(r+=EM),t.filter(i=>!Ix(i)).reduce((i,o)=>i+(wM.test(o)?xM:o===""?bM:TM),r)}function kM(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function PM(n,e,t){let{routesMeta:r}=n,i={},o="/",l=[];for(let c=0;c<r.length;++c){let h=r[c],f=c===r.length-1,m=o==="/"?e:e.slice(o.length)||"/",y=CM({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},m),w=h.route;if(!y)return null;Object.assign(i,y.params),l.push({params:i,pathname:Ts([o,y.pathname]),pathnameBase:NM(Ts([o,y.pathnameBase])),route:w}),y.pathnameBase!=="/"&&(o=Ts([o,y.pathnameBase]))}return l}function CM(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=AM(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((f,m,y)=>{let{paramName:w,isOptional:T}=m;if(w==="*"){let k=c[y]||"";l=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const I=c[y];return T&&!I?f[w]=void 0:f[w]=(I||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:n}}function AM(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),z1(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,h)=>(r.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function RM(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return z1(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function n_(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function DM(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?ml(n):n;return{pathname:t?t.startsWith("/")?t:OM(t,e):e,search:LM(r),hash:VM(i)}}function OM(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function $m(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function MM(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function r_(n,e){let t=MM(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function i_(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=ml(n):(i=su({},n),St(!i.pathname||!i.pathname.includes("?"),$m("?","pathname","search",i)),St(!i.pathname||!i.pathname.includes("#"),$m("#","pathname","hash",i)),St(!i.search||!i.search.includes("#"),$m("#","search","hash",i)));let o=n===""||i.pathname==="",l=o?"/":i.pathname,c;if(l==null)c=t;else{let y=e.length-1;if(!r&&l.startsWith("..")){let w=l.split("/");for(;w[0]==="..";)w.shift(),y-=1;i.pathname=w.join("/")}c=y>=0?e[y]:"/"}let h=DM(i,c),f=l&&l!=="/"&&l.endsWith("/"),m=(o||l===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(f||m)&&(h.pathname+="/"),h}const Ts=n=>n.join("/").replace(/\/\/+/g,"/"),NM=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),LM=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,VM=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function FM(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const $1=["post","put","patch","delete"];new Set($1);const jM=["get",...$1];new Set(jM);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ou(){return ou=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ou.apply(this,arguments)}const s_=W.createContext(null),UM=W.createContext(null),js=W.createContext(null),Uf=W.createContext(null),Us=W.createContext({outlet:null,matches:[],isDataRoute:!1}),H1=W.createContext(null);function zM(n,e){let{relative:t}=e===void 0?{}:e;gl()||St(!1);let{basename:r,navigator:i}=W.useContext(js),{hash:o,pathname:l,search:c}=Y1(n,{relative:t}),h=l;return r!=="/"&&(h=l==="/"?r:Ts([r,l])),i.createHref({pathname:h,search:c,hash:o})}function gl(){return W.useContext(Uf)!=null}function Iu(){return gl()||St(!1),W.useContext(Uf).location}function q1(n){W.useContext(js).static||W.useLayoutEffect(n)}function zf(){let{isDataRoute:n}=W.useContext(Us);return n?eN():BM()}function BM(){gl()||St(!1);let n=W.useContext(s_),{basename:e,future:t,navigator:r}=W.useContext(js),{matches:i}=W.useContext(Us),{pathname:o}=Iu(),l=JSON.stringify(r_(i,t.v7_relativeSplatPath)),c=W.useRef(!1);return q1(()=>{c.current=!0}),W.useCallback(function(f,m){if(m===void 0&&(m={}),!c.current)return;if(typeof f=="number"){r.go(f);return}let y=i_(f,JSON.parse(l),o,m.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Ts([e,y.pathname])),(m.replace?r.replace:r.push)(y,m.state,m)},[e,r,l,o,n])}function Y1(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=W.useContext(js),{matches:i}=W.useContext(Us),{pathname:o}=Iu(),l=JSON.stringify(r_(i,r.v7_relativeSplatPath));return W.useMemo(()=>i_(n,JSON.parse(l),o,t==="path"),[n,l,o,t])}function WM(n,e){return $M(n,e)}function $M(n,e,t,r){gl()||St(!1);let{navigator:i}=W.useContext(js),{matches:o}=W.useContext(Us),l=o[o.length-1],c=l?l.params:{};l&&l.pathname;let h=l?l.pathnameBase:"/";l&&l.route;let f=Iu(),m;if(e){var y;let b=typeof e=="string"?ml(e):e;h==="/"||(y=b.pathname)!=null&&y.startsWith(h)||St(!1),m=b}else m=f;let w=m.pathname||"/",T=w;if(h!=="/"){let b=h.replace(/^\//,"").split("/");T="/"+w.replace(/^\//,"").split("/").slice(b.length).join("/")}let I=yM(n,{pathname:T}),k=KM(I&&I.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:Ts([h,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?h:Ts([h,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),o,t,r);return e&&k?W.createElement(Uf.Provider,{value:{location:ou({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:gs.Pop}},k):k}function HM(){let n=ZM(),e=FM(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),t?W.createElement("pre",{style:i},t):null,null)}const qM=W.createElement(HM,null);class YM extends W.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?W.createElement(Us.Provider,{value:this.props.routeContext},W.createElement(H1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function GM(n){let{routeContext:e,match:t,children:r}=n,i=W.useContext(s_);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),W.createElement(Us.Provider,{value:e},r)}function KM(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var o;if(!t)return null;if(t.errors)n=t.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=(i=t)==null?void 0:i.errors;if(c!=null){let m=l.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);m>=0||St(!1),l=l.slice(0,Math.min(l.length,m+1))}let h=!1,f=-1;if(t&&r&&r.v7_partialHydration)for(let m=0;m<l.length;m++){let y=l[m];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=m),y.route.id){let{loaderData:w,errors:T}=t,I=y.route.loader&&w[y.route.id]===void 0&&(!T||T[y.route.id]===void 0);if(y.route.lazy||I){h=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}return l.reduceRight((m,y,w)=>{let T,I=!1,k=null,b=null;t&&(T=c&&y.route.id?c[y.route.id]:void 0,k=y.route.errorElement||qM,h&&(f<0&&w===0?(tN("route-fallback"),I=!0,b=null):f===w&&(I=!0,b=y.route.hydrateFallbackElement||null)));let N=e.concat(l.slice(0,w+1)),z=()=>{let $;return T?$=k:I?$=b:y.route.Component?$=W.createElement(y.route.Component,null):y.route.element?$=y.route.element:$=m,W.createElement(GM,{match:y,routeContext:{outlet:m,matches:N,isDataRoute:t!=null},children:$})};return t&&(y.route.ErrorBoundary||y.route.errorElement||w===0)?W.createElement(YM,{location:t.location,revalidation:t.revalidation,component:k,error:T,children:z(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):z()},null)}var G1=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(G1||{}),K1=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(K1||{});function QM(n){let e=W.useContext(s_);return e||St(!1),e}function XM(n){let e=W.useContext(UM);return e||St(!1),e}function JM(n){let e=W.useContext(Us);return e||St(!1),e}function Q1(n){let e=JM(),t=e.matches[e.matches.length-1];return t.route.id||St(!1),t.route.id}function ZM(){var n;let e=W.useContext(H1),t=XM(),r=Q1();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function eN(){let{router:n}=QM(G1.UseNavigateStable),e=Q1(K1.UseNavigateStable),t=W.useRef(!1);return q1(()=>{t.current=!0}),W.useCallback(function(i,o){o===void 0&&(o={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,ou({fromRouteId:e},o)))},[n,e])}const kx={};function tN(n,e,t){kx[n]||(kx[n]=!0)}function nN(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function X1(n){let{to:e,replace:t,state:r,relative:i}=n;gl()||St(!1);let{future:o,static:l}=W.useContext(js),{matches:c}=W.useContext(Us),{pathname:h}=Iu(),f=zf(),m=i_(e,r_(c,o.v7_relativeSplatPath),h,i==="path"),y=JSON.stringify(m);return W.useEffect(()=>f(JSON.parse(y),{replace:t,state:r,relative:i}),[f,y,i,t,r]),null}function Wr(n){St(!1)}function rN(n){let{basename:e="/",children:t=null,location:r,navigationType:i=gs.Pop,navigator:o,static:l=!1,future:c}=n;gl()&&St(!1);let h=e.replace(/^\/*/,"/"),f=W.useMemo(()=>({basename:h,navigator:o,static:l,future:ou({v7_relativeSplatPath:!1},c)}),[h,c,o,l]);typeof r=="string"&&(r=ml(r));let{pathname:m="/",search:y="",hash:w="",state:T=null,key:I="default"}=r,k=W.useMemo(()=>{let b=n_(m,h);return b==null?null:{location:{pathname:b,search:y,hash:w,state:T,key:I},navigationType:i}},[h,m,y,w,T,I,i]);return k==null?null:W.createElement(js.Provider,{value:f},W.createElement(Uf.Provider,{children:t,value:k}))}function iN(n){let{children:e,location:t}=n;return WM(Vg(e),t)}new Promise(()=>{});function Vg(n,e){e===void 0&&(e=[]);let t=[];return W.Children.forEach(n,(r,i)=>{if(!W.isValidElement(r))return;let o=[...e,i];if(r.type===W.Fragment){t.push.apply(t,Vg(r.props.children,o));return}r.type!==Wr&&St(!1),!r.props.index||!r.props.children||St(!1);let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Vg(r.props.children,o)),t.push(l)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fg(){return Fg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Fg.apply(this,arguments)}function sN(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function oN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function aN(n,e){return n.button===0&&(!e||e==="_self")&&!oN(n)}const lN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],cN="6";try{window.__reactRouterVersion=cN}catch{}const uN="startTransition",Px=$k[uN];function hN(n){let{basename:e,children:t,future:r,window:i}=n,o=W.useRef();o.current==null&&(o.current=pM({window:i,v5Compat:!0}));let l=o.current,[c,h]=W.useState({action:l.action,location:l.location}),{v7_startTransition:f}=r||{},m=W.useCallback(y=>{f&&Px?Px(()=>h(y)):h(y)},[h,f]);return W.useLayoutEffect(()=>l.listen(m),[l,m]),W.useEffect(()=>nN(r),[r]),W.createElement(rN,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:l,future:r})}const dN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Wn=W.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:o,replace:l,state:c,target:h,to:f,preventScrollReset:m,viewTransition:y}=e,w=sN(e,lN),{basename:T}=W.useContext(js),I,k=!1;if(typeof f=="string"&&fN.test(f)&&(I=f,dN))try{let $=new URL(window.location.href),te=f.startsWith("//")?new URL($.protocol+f):new URL(f),Q=n_(te.pathname,T);te.origin===$.origin&&Q!=null?f=Q+te.search+te.hash:k=!0}catch{}let b=zM(f,{relative:i}),N=pN(f,{replace:l,state:c,target:h,preventScrollReset:m,relative:i,viewTransition:y});function z($){r&&r($),$.defaultPrevented||N($)}return W.createElement("a",Fg({},w,{href:I||b,onClick:k||o?r:z,ref:t,target:h}))});var Cx;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Cx||(Cx={}));var Ax;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Ax||(Ax={}));function pN(n,e){let{target:t,replace:r,state:i,preventScrollReset:o,relative:l,viewTransition:c}=e===void 0?{}:e,h=zf(),f=Iu(),m=Y1(n,{relative:l});return W.useCallback(y=>{if(aN(y,t)){y.preventDefault();let w=r!==void 0?r:of(f)===of(m);h(n,{replace:w,state:i,preventScrollReset:o,relative:l,viewTransition:c})}},[f,h,m,r,i,t,n,o,l,c])}const J1=W.createContext(null),yl=()=>W.useContext(J1),mN=({children:n})=>{const[e,t]=W.useState(null),[r,i]=W.useState(!0);W.useEffect(()=>{const h=Qb(Dd,f=>{t(f||null),i(!1)});return()=>h()},[]);const c={user:e,initializing:r,login:async(h,f)=>{const m=await Kb(Dd,h,f);return t(m.user),m.user},logout:async()=>{await CA(Dd),t(null)}};return x.jsx(J1.Provider,{value:c,children:!r&&n})},Z1=W.createContext({pendingUsers:0}),eS=()=>W.useContext(Z1),gN=({children:n})=>{const[e,t]=W.useState(0);return W.useEffect(()=>{let r=!1;const i=async()=>{try{let l=0;try{const c=L1(nf(kr,"users"),XO("approved","==",!1));l=(await sf(c)).size}catch{}if(l===0)try{l=(await sf(nf(kr,"pendingUsers"))).size}catch{}r||t(l)}catch{r||t(0)}};i();const o=setInterval(i,3e4);return()=>{r=!0,clearInterval(o)}},[]),x.jsx(Z1.Provider,{value:{pendingUsers:e},children:n})},yN=()=>{const{user:n,logout:e}=yl(),{pendingUsers:t}=eS(),[r,i]=W.useState(!1),o=W.useRef(null);W.useEffect(()=>{const h=f=>{r&&o.current&&!o.current.contains(f.target)&&i(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[r]);const l=()=>i(!1),c={display:"block",padding:"1rem",color:"#fff",fontSize:"1.2rem",textDecoration:"none"};return x.jsxs(x.Fragment,{children:[x.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100%",padding:"1rem 1rem 1rem 1.5rem",display:"flex",alignItems:"center",gap:"1rem",backgroundColor:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(8px)",zIndex:1e3},children:[x.jsx("button",{onClick:()=>i(!r),style:{fontSize:"2rem",background:"transparent",color:"#fff",border:"none",cursor:"pointer"},children:""}),x.jsx("h1",{style:{color:"#4ea8de",fontFamily:"sans-serif",fontSize:"1.5rem",animation:"slideTitle 2s ease-in-out infinite alternate"},children:"Ultimate Trading Champions"})]}),x.jsxs("div",{ref:o,style:{position:"fixed",top:0,left:r?0:"-260px",width:"260px",height:"100%",backgroundImage:'url("/backgrounds/menubackground.png")',backgroundSize:"cover",backgroundPosition:"center",transition:"left 0.3s ease-in-out",zIndex:999,paddingTop:"5rem",fontFamily:"sans-serif",borderRight:"1px solid #333",overflow:"hidden"},children:[x.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(8px)",zIndex:0}}),x.jsxs("div",{style:{position:"relative",zIndex:1},children:[x.jsx(Wn,{to:"/",onClick:l,style:c,children:" Accueil"}),n&&x.jsxs(x.Fragment,{children:[x.jsx(Wn,{to:"/trading",onClick:l,style:c,children:" Trading"}),x.jsx(Wn,{to:"/ia-trader",onClick:l,style:c,children:" IA Trader"}),x.jsx(Wn,{to:"/analysis",onClick:l,style:c,children:" Analyse"}),x.jsx(Wn,{to:"/signals",onClick:l,style:c,children:" Signaux"}),x.jsx(Wn,{to:"/profile",onClick:l,style:c,children:" Profil"})]}),n?.email==="xzno4rzx@gmail.com"&&x.jsxs(Wn,{to:"/admin",onClick:l,style:{...c,color:"#4ea8de",position:"relative"},children:[" Admin",t>0&&x.jsx("span",{style:{position:"absolute",top:"8px",right:"20px",background:"red",color:"#fff",borderRadius:"50%",padding:"2px 6px",fontSize:"0.7rem"},children:t})]}),x.jsx("div",{style:{marginTop:"2rem"},children:n?x.jsx("button",{onClick:()=>{e(),i(!1)},style:{...c,background:"transparent",border:"none",cursor:"pointer",textAlign:"left"},children:" Dconnexion"}):x.jsx(Wn,{to:"/login",onClick:l,style:c,children:" Connexion"})})]})]}),x.jsx("style",{children:`
        @keyframes slideTitle {
          0% { transform: translateX(0px); opacity: 0.8; }
          100% { transform: translateX(4px); opacity: 1; }
        }
      `})]})},_N=async n=>{const e=Bo(kr,"portfolios",n),t=await Zy(e);return t.exists()?t.data():null},vN=async(n,e)=>{const t=Bo(kr,"portfolios",n);await e_(t,e,{merge:!0})},o_="https://utc-api.onrender.com".replace(/\/+$/,""),a_=async n=>{const e=n.headers.get("content-type")||"";if(!n.ok){const t=await n.text().catch(()=>"");throw new Error(`HTTP ${n.status} ${n.statusText} ${t.slice(0,180)}`)}if(!e.toLowerCase().includes("application/json")){const t=await n.text().catch(()=>"");throw new Error(`Rponse non-JSON depuis ${n.url}: ${t.slice(0,180)}`)}return n.json()};async function tS(n){const e=String(n||"").toUpperCase();return a_(await fetch(`${o_}/price/${encodeURIComponent(e)}`))}async function nS(n=[]){const e=n.map(r=>String(r).toUpperCase()).join(","),t=`${o_}/prices?symbols=${encodeURIComponent(e)}`;return console.log("[API] GET",t),a_(await fetch(t))}async function wN(){return a_(await fetch(`${o_}/utcapp/signals`))}const Bf=W.createContext(),Hm=1e4,qm=["BTC","ETH","SOL","XRP","ADA","DOGE","SHIB","AVAX","TRX","DOT","MATIC","LTC","BCH","UNI","LINK","XLM","ATOM","ETC","FIL","APT","ARB","OP","NEAR","SUI","INJ","TWT","RUNE","PEPE","GMT","LDO","RNDR","FTM","EGLD","FLOW","GRT","IMX","STX","ENS","CRV","HBAR","CRO"],Rx=async n=>{const e=String(n||"").toUpperCase(),{price:t}=await tS(e),r=Number(t);return Number.isFinite(r)?r:NaN},xN=async n=>{if(!n||n.length===0)return{};const e=Array.from(new Set(n.map(i=>(i||"").toUpperCase()))),{prices:t={}}=await nS(e);console.log("[PRICES] symbols=",e,"map=",t);const r={};for(const i of e){const o=Number(t?.[i]);Number.isFinite(o)&&(r[i]=o)}return r},Dx=()=>new Date().toISOString(),EN=n=>n*60*1e3,Qt=n=>Math.round(n*100)/100,Ft=(n,e=0)=>typeof n=="number"&&Number.isFinite(n)?n:e,bN=({children:n})=>{const{user:e}=yl(),[t,r]=W.useState(()=>{const J=new Date,R=`PT${J.getFullYear()}${String(J.getMonth()+1).padStart(2,"0")}`,F=Number(localStorage.getItem("ptCounter")||"1"),q=`${R}-${String(F).padStart(3,"0")}`;return localStorage.getItem("portfolioName")||(localStorage.setItem("portfolioName",q),localStorage.setItem("ptCounter",String(F+1))),localStorage.getItem("portfolioName")||q}),[i,o]=W.useState(()=>{const J=Number(localStorage.getItem("pt_cash"));return Number.isFinite(J)&&J>=0?J:Hm}),[l,c]=W.useState(()=>{try{const J=localStorage.getItem("pt_positions");return J?JSON.parse(J):[]}catch{return[]}}),[h,f]=W.useState(()=>{try{const J=localStorage.getItem("pt_history");return J?JSON.parse(J):[]}catch{return[]}}),[m,y]=W.useState(()=>{try{const J=localStorage.getItem("pt_watchlist"),R=J?JSON.parse(J):qm;return Array.isArray(R)&&R.length?R:qm}catch{return qm}}),[w,T]=W.useState({}),[I,k]=W.useState(null),[b,N]=W.useState({ts:Date.now(),prices:{}});W.useEffect(()=>localStorage.setItem("pt_cash",String(i)),[i]),W.useEffect(()=>localStorage.setItem("pt_positions",JSON.stringify(l)),[l]),W.useEffect(()=>localStorage.setItem("pt_history",JSON.stringify(h)),[h]),W.useEffect(()=>localStorage.setItem("pt_watchlist",JSON.stringify(m)),[m]),W.useEffect(()=>{let J=!0;return(async()=>{if(e)try{const F=await _N(e.uid);F&&J&&(F.portfolioName&&r(F.portfolioName),Number.isFinite(F.cash)&&o(F.cash),Array.isArray(F.positions)&&c(F.positions),Array.isArray(F.history)&&f(F.history),Array.isArray(F.watchlist)&&F.watchlist.length&&y(F.watchlist))}catch{}})(),()=>J=!1},[e]),W.useEffect(()=>{(async()=>{if(e)try{await vN(e.uid,{portfolioName:t,cash:i,positions:l,history:h,watchlist:m,lastUpdated:I})}catch{}})()},[e,t,i,l,h,m,I]);const z=W.useMemo(()=>{const J={};for(const R of l){const F=(R.symbol||"").toUpperCase();J[F]||(J[F]=[]),J[F].push(R)}return J},[l]),$=W.useMemo(()=>{let J=0;for(const R of l){const F=(R.symbol||"").toUpperCase(),q=Ft(w[F],R.buyPrice);J+=Ft(R.qty,0)*Ft(q,0)}return Qt(J)},[l,w]),te=W.useMemo(()=>{let J=0;for(const R of l)J+=Ft(R.qty,0)*Ft(R.buyPrice,0);return Qt(J)},[l]),Q=W.useMemo(()=>{let J=0;for(const R of h)R.type==="SELL"&&(typeof R.pnlUSD=="number"?J+=R.pnlUSD:typeof R.price=="number"&&typeof R.qty=="number"&&typeof R.buyPrice=="number"&&(J+=(R.price-R.buyPrice)*R.qty));return Qt(J)},[h]),ie=W.useMemo(()=>{let J=0;for(const R of l){const F=(R.symbol||"").toUpperCase(),q=Ft(w[F],R.buyPrice);J+=(Ft(q,0)-Ft(R.buyPrice,0))*Ft(R.qty,0)}return Qt(J)},[l,w]),D=W.useMemo(()=>Qt(Q+ie),[Q,ie]),P=W.useMemo(()=>{const J=Hm,F=(i+$-J)/J*100;return Qt(F)},[i,$]),A=W.useMemo(()=>Qt(i+$),[i,$]),V=W.useMemo(()=>l.length,[l]),L=W.useMemo(()=>{const J=h.filter(F=>F.type==="BUY").length,R=h.filter(F=>F.type==="SELL").length;return Math.min(J,R)},[h]),j=W.useMemo(()=>h.filter(J=>J.type==="SELL"&&Ft(J.pnlUSD,0)>0).length,[h]),O=W.useMemo(()=>{const J={},R=b.prices||{};for(const F of Object.keys(w)){const q=Ft(w[F],NaN),K=Ft(R[F],NaN);Number.isFinite(q)&&Number.isFinite(K)&&K>0&&(J[F]=Qt((q-K)/K*100))}return J},[w,b]),se=async()=>{const J=Array.from(new Set([...m.map(F=>(F||"").toUpperCase()),...l.map(F=>(F.symbol||"").toUpperCase())])).filter(Boolean);if(J.length===0)return;const R=await xN(J);T(F=>({...F,...R})),k(new Date().toISOString()),(!b.ts||Date.now()-b.ts>=EN(5))&&N({ts:Date.now(),prices:{...R}})},fe=async(J,R)=>{J=(J||"").toUpperCase();const F=Qt(Ft(R,0));if(F<=0||F>i)return;const q=await Rx(J);if(!Number.isFinite(q)||q<=0)return;const K=Qt(F/q);if(K<=0)return;const he={id:`BUY-${Date.now()}`,type:"BUY",symbol:J,qty:K,price:q,at:Dx()};o(ge=>Qt(ge-F)),c(ge=>[{id:`POS-${Date.now()}`,symbol:J,qty:K,buyPrice:q,buyAt:he.at},...ge]),f(ge=>[he,...ge]),T(ge=>({...ge,[J]:q}))},Se=async(J,R=100,F=null)=>{if(J=(J||"").toUpperCase(),R=Math.min(100,Math.max(0,Ft(R,100))),l.length===0)return;const q=l.findIndex(Dt=>(Dt.symbol||"").toUpperCase()===J);if(q<0)return;const K=l[q],he=Number.isFinite(F)?F:await Rx(J),ge=Ft(he,K.buyPrice),Ee=R>=100?K.qty:Qt(Ft(K.qty,0)*R/100);if(Ee<=0)return;const Ae=Qt(Ee*ge),Ne=Qt((ge-Ft(K.buyPrice,0))*Ee),et={id:`SELL-${Date.now()}`,type:"SELL",symbol:J,qty:Ee,price:ge,at:Dx(),pnlUSD:Ne,pnlPct:Ft(K.buyPrice,0)>0?Qt((ge-K.buyPrice)/K.buyPrice*100):0,buyPrice:K.buyPrice};o(Dt=>Qt(Dt+Ae)),c(Dt=>{const tn=Qt(Ft(K.qty,0)-Ee),nn=[...Dt];return tn<=0?nn.splice(q,1):nn[q]={...K,qty:tn},nn}),f(Dt=>[et,...Dt]),T(Dt=>({...Dt,[J]:ge}))},re=()=>{o(Hm),c([])},ae=W.useMemo(()=>({portfolioName:t,cash:i,positions:l,history:h,watchlist:m,currentPrices:w,lastUpdated:I,positionsMap:z,investedAmount:te,openPositionsValue:$,totalValue:A,totalProfit:D,totalProfitPercent:P,activePositionsCount:V,totalTrades:L,positiveTrades:j,priceChange5m:O,setWatchlist:y,updatePrices:se,buyPosition:fe,sellPosition:Se,resetPortfolio:re,setPortfolioName:r}),[t,i,l,h,m,w,I,z,te,$,A,D,P,V,L,j,O]);return x.jsx(Bf.Provider,{value:ae,children:n})},TN=async n=>{try{const e=Bo(kr,"iatraders",n),t=await Zy(e);return t.exists()?t.data():null}catch(e){return console.error(" Firestore loadIATrader:",e),null}},SN=async(n,e)=>{try{const t=Bo(kr,"iatraders",n);await e_(t,e,{merge:!0})}catch(t){console.error(" Firestore saveIATrader:",t)}},l_=W.createContext(),Va=Object.freeze({buyFraction:1/3,takeProfit:.03,stopLoss:.05,checkIntervalSec:60,minScore:{conservateur:16,equilibre:12,aggressif:8}}),go=()=>new Date().toISOString(),tr=n=>Math.round(n*100)/100,zn=(n,e=0)=>typeof n=="number"&&Number.isFinite(n)?n:e,Ox=async n=>{const e=String(n||"").toUpperCase(),{price:t}=await tS(e),r=Number(t);return Number.isFinite(r)?r:NaN},Mx=async n=>{if(!n||n.length===0)return{};const e=Array.from(new Set(n.map(i=>String(i||"").toUpperCase()))),{prices:t={}}=await nS(e),r={};for(const i of e){const o=Number(t?.[i]??t?.[`${i}USDT`]);Number.isFinite(o)&&(r[i]=o)}return r},IN=({children:n})=>{const{user:e}=yl(),[t]=W.useState("IA Trader"),[r,i]=W.useState(()=>go()),[o,l]=W.useState(1e4),[c,h]=W.useState([]),[f,m]=W.useState([]),[y,w]=W.useState({}),[T,I]=W.useState(!1),[k,b]=W.useState("equilibre"),[N,z]=W.useState(null),[$,te]=W.useState([]),[Q,ie]=W.useState(Va.checkIntervalSec),D=W.useMemo(()=>c.reduce((F,q)=>{const K=(q.symbol||"").toUpperCase(),he=zn(y[K],q.buyPrice);return F+zn(q.qty,0)*he},0),[c,y]),P=W.useMemo(()=>tr(o+D),[o,D]),A=F=>{te(q=>[`[${new Date().toLocaleTimeString()}] ${F}`,...q].slice(0,500))};W.useEffect(()=>{let F=!0;return(async()=>{if(e)try{const K=await TN(e.uid);K&&F&&(i(K.iaStart||go()),l(zn(K.iaCash,1e4)),h(Array.isArray(K.iaPositions)?K.iaPositions:[]),m(Array.isArray(K.iaHistory)?K.iaHistory:[]),b(K.riskMode||"equilibre"),A("Donnes IA Trader charges depuis Firestore."))}catch{A(" chec chargement Firestore (IA Trader).")}})(),()=>F=!1},[e]),W.useEffect(()=>{(async()=>{if(e)try{await SN(e.uid,{iaName:t,iaStart:r,iaCash:o,iaPositions:c,iaHistory:f,riskMode:k,lastTickAt:N})}catch{}})()},[e,t,r,o,c,f,k,N]);const V=async()=>{const F=c.map(K=>(K.symbol||"").toUpperCase());if(F.length===0)return;const q=await Mx(F);w(K=>({...K,...q}))},L=(F,q=100,K=null)=>{F=(F||"").toUpperCase(),h(he=>{const ge=he.findIndex(nn=>(nn.symbol||"").toUpperCase()===F);if(ge<0)return he;const Ee=he[ge],Ae=zn(K??y[F]??NaN,Ee.buyPrice),Ne=q>=100?Ee.qty:tr(zn(Ee.qty,0)*zn(q,100)/100),et=tr(zn(Ae,0)*Ne),Dt=tr(zn(Ee.qty,0)-Ne);l(nn=>tr(nn+et)),m(nn=>[{id:`SELL-${Date.now()}`,type:"SELL",symbol:F,qty:Ne,price:Ae,at:go(),pnlUSD:tr((Ae-Ee.buyPrice)*Ne),pnlPct:tr((Ae-Ee.buyPrice)/Ee.buyPrice*100)},...nn]);const tn=[...he];return Dt<=0?tn.splice(ge,1):tn[ge]={...Ee,qty:Dt},A(`Vente ${q}% ${F} @ ${Ae}`),tn})},j=async(F,q=null)=>{F=(F||"").toUpperCase();const K=zn(q??await Ox(F),NaN);if(!Number.isFinite(K)||K<=0){A(` Prix invalide pour ${F}, achat annul.`);return}const he=tr(o*Va.buyFraction);if(he<=0){A(" Cash insuffisant.");return}const ge=tr(he/K);if(ge<=0){A(" Quantit nulle (prix trop lev ou cash trop faible).");return}const Ee=tr(o-he),Ae=tr(K*(1+Va.takeProfit)),Ne=tr(K*(1-Va.stopLoss));l(Ee),h(et=>[{id:`BUY-${Date.now()}`,symbol:F,qty:ge,buyPrice:K,buyAt:go(),tp:Ae,sl:Ne},...et]),m(et=>[{id:`BUY-${Date.now()}`,type:"BUY",symbol:F,qty:ge,price:K,at:go()},...et]),w(et=>({...et,[F]:K})),A(`Achat ${F} qty ${ge} @ ${K} | TP ${Ae} / SL ${Ne}`)},O=async()=>{if(c.length===0)return;const F=await Mx(c.map(q=>q.symbol));if(Object.keys(F).length!==0){w(q=>({...q,...F}));for(const q of c){const K=(q.symbol||"").toUpperCase(),he=zn(F[K],NaN);if(Number.isFinite(he)){if(he>=zn(q.tp,1/0)){L(K,100,he),A(` TP touch sur ${K} @ ${he}`);continue}if(he<=zn(q.sl,0)){L(K,100,he),A(` SL touch sur ${K} @ ${he}`);continue}}}}},se=W.useMemo(()=>Va.minScore[k]??Va.minScore.equilibre,[k]),fe=async()=>{const F=await wN();return Array.isArray(F)?F:[]},Se=async()=>{try{const F=await fe();if(!F.length)return;for(const q of F.slice(0,10)){const K=(q.action||q.type||"").toUpperCase(),he=(q.symbol||q.pair||"").replace("/USDT","").toUpperCase(),ge=zn(q.score,0);if(!(!he||!K)&&(K==="BUY"&&ge>=se&&await j(he),K==="SELL"&&c.find(Ae=>(Ae.symbol||"").toUpperCase()===he))){const Ae=await Ox(he);L(he,100,Ae)}}}catch{}};W.useEffect(()=>{if(!T)return;let F=!1;const q=async()=>{try{await V(),await O(),await Se(),z(go())}catch{}F||(K=setTimeout(q,Math.max(5,Q)*1e3))};let K=setTimeout(q,100);return()=>{F=!0,clearTimeout(K)}},[T,Q,c,k]);const re=()=>{T||(I(!0),A(" IA Trader dmarr."))},ae=()=>{T&&(I(!1),A(" IA Trader arrt."))},J=()=>{i(go()),l(1e4),h([]),m([]),w({}),A(" IA Trader rinitialis (cash 10 000$).")},R=W.useMemo(()=>({iaName:t,iaStart:r,iaCash:o,iaPositions:c,iaHistory:f,currentPrices:y,isRunning:T,riskMode:k,lastTickAt:N,tickSec:Q,totalValue:P,setRiskMode:b,setTickSec:ie,start:re,stop:ae,resetIATrader:J,buyPosition:j,sellPosition:L,updateIaPrices:V}),[t,r,o,c,f,y,T,k,N,Q,P]);return x.jsx(l_.Provider,{value:R,children:n})},kN=(n,e=null)=>{const{user:t}=yl(),r=t?.uid;if(!r)return[e,()=>{}];const i=`${n}-${r}`,o=()=>{try{const c=localStorage.getItem(i);return c?JSON.parse(c):e}catch{return e}},l=c=>{try{localStorage.setItem(i,JSON.stringify(c))}catch(h){console.error("Erreur storage:",h)}};return[o(),l]},PN=()=>{const{portfolioName:n,cash:e,positions:t,history:r,currentPrices:i}=W.useContext(Bf),{iaName:o,iaStart:l,iaCash:c,iaPositions:h,iaHistory:f,iaCurrentPrices:m}=W.useContext(l_),[y]=kN("ptStartDate",null),w=(b,N=2)=>b?Number(b).toFixed(N):"0.00",T=b=>new Date(b||new Date).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),I=(b=[])=>b.filter(N=>N.profit>0).length,k=({title:b,name:N,start:z,cash:$,positions:te=[],history:Q=[],currentPrices:ie,to:D})=>{const P=I(Q),A=Q.length,V=te.reduce((se,fe)=>se+fe.quantity*fe.buyPrice,0),L=te.reduce((se,fe)=>{const Se=(fe?.symbol&&ie?.[fe.symbol])??fe.buyPrice;return se+fe.quantity*Se},0),j=$+L-1e4,O=($+L-1e4)/1e4*100;return x.jsxs("section",{className:"slide-up-box",style:RN,children:[x.jsx("h2",{children:b}),x.jsxs("p",{style:{color:"#aaa",fontSize:"0.9rem"},children:["Nom : ",x.jsx("strong",{children:N}),x.jsx("br",{}),"Dmarr le : ",z?T(z):"",x.jsx("br",{}),"Cash disponible : $",w($),x.jsx("br",{}),"Positions en cours : ",te.length,x.jsx("br",{}),"Valeur actuelle : $",w(L),x.jsx("br",{}),"Total investi : $",w(V),x.jsx("br",{}),"Trades gagnants : ",P," / ",A]}),x.jsxs("div",{style:{marginTop:"1rem",padding:"0.5rem",backgroundColor:j>=0?"#153d27":"#3d1d1d",color:j>=0?"lightgreen":"salmon",borderRadius:"6px",textAlign:"center",fontSize:"0.9rem",maxWidth:"90px"},children:[x.jsx("div",{style:{fontWeight:"bold"},children:"Rendement total"}),x.jsxs("div",{children:["$",w(j),x.jsx("br",{}),"(",w(O),"%)"]})]}),x.jsx(Wn,{to:D,style:DN,children:" Accder"})]})};return x.jsxs("div",{style:CN,children:[x.jsxs("div",{style:AN,children:[k({title:" Portefeuille virtuel",name:n,start:y,cash:e,positions:t,history:r,currentPrices:i,to:"/trading"}),k({title:" IA Trader",name:o,start:l,cash:c,positions:h,history:f,currentPrices:m,to:"/ia-trader"})]}),x.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",marginTop:"3rem"},children:[x.jsxs(Wn,{to:"/analysis",style:Ym,children:[" Analyse",x.jsx("br",{}),"Voir les tendances"]}),x.jsxs(Wn,{to:"/signals",style:Ym,children:[" Signaux",x.jsx("br",{}),"Opportunits IA"]}),x.jsxs(Wn,{to:"/profile",style:Ym,children:[" Profil",x.jsx("br",{}),"Historique & stats"]})]}),x.jsx("style",{children:`
        .slide-up-box {
          opacity: 0;
          transform: translateY(20px);
          animation: slideUp 0.6s ease-out forwards;
        }
        @keyframes slideUp {
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})},CN={padding:"6rem 2rem 2rem",backgroundImage:'url("/backgrounds/homebackground.png")',backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed",minHeight:"100vh",color:"#eee"},AN={display:"flex",justifyContent:"center",gap:"2rem",flexWrap:"wrap"},RN={width:"250px",padding:"1.5rem",backgroundColor:"rgba(30,30,30,0.6)",borderRadius:"8px",fontFamily:"sans-serif",backdropFilter:"blur(10px)",flexShrink:0},Ym={flex:"1",minWidth:"250px",backgroundColor:"rgba(30,30,30,0.6)",color:"#eee",textDecoration:"none",borderRadius:"6px",padding:"1rem",border:"1px solid #333",backdropFilter:"blur(6px)",fontWeight:"bold"},DN={display:"inline-block",marginTop:"1rem",padding:"4px 8px",backgroundColor:"#4ea8de",color:"#fff",textDecoration:"none",borderRadius:"4px",fontWeight:"bold",fontSize:"0.85rem"},Nx=n=>typeof n!="number"||!Number.isFinite(n)?"":n>=1?n.toFixed(2):n>=.01?n.toFixed(4):n.toFixed(6),rS=({show:n,symbol:e,price:t,percent:r,positions:i,onClose:o,onConfirm:l,onChangePercent:c,onSetMax:h})=>{if(!n)return null;const f=(e||"").toUpperCase(),m=Array.isArray(i)?i.find(b=>(b.symbol||"").toUpperCase()===f):null,y=typeof m?.quantity=="number"?m.quantity:m?.qty||0,w=(typeof m?.buyPrice=="number"?m.buyPrice:0)*(typeof y=="number"?y:0),T=(typeof t=="number"?t:0)*(typeof y=="number"?r/100*y:0),I=typeof t=="number"&&typeof m?.buyPrice=="number"&&typeof y=="number"?(t-m.buyPrice)*(y*(r/100)):0,k=I>=0?"lightgreen":"salmon";return x.jsx("div",{style:{position:"fixed",inset:0,background:"#0009",zIndex:1e3},children:x.jsxs("div",{style:{width:"min(560px, 92vw)",margin:"8% auto",background:"#1f1f1f",borderRadius:10,color:"#fff",padding:"1.25rem 1.25rem 1rem",border:"1px solid #2a2a2a",boxShadow:"0 8px 30px rgba(0,0,0,0.45)"},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[x.jsxs("h3",{style:{margin:0},children:["VENTE  ",f]}),x.jsx("button",{onClick:o,style:{padding:"6px 10px",border:"1px solid #3a3a3a",borderRadius:6,background:"#2b2b2b",color:"#ddd",cursor:"pointer"},children:"Fermer"})]}),x.jsx("div",{style:{marginTop:12,padding:12,borderRadius:8,background:"#181818",border:"1px solid #2a2a2a"},children:m?x.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[x.jsxs("div",{children:[x.jsx("div",{style:{fontSize:12,color:"#9aa0a6"},children:"ID position"}),x.jsx("div",{style:{fontWeight:600,overflow:"hidden",textOverflow:"ellipsis"},children:m.id})]}),x.jsxs("div",{children:[x.jsx("div",{style:{fontSize:12,color:"#9aa0a6"},children:"Date & heure d'achat"}),x.jsx("div",{children:m.buyAt?new Date(m.buyAt).toLocaleString():""})]}),x.jsxs("div",{children:[x.jsx("div",{style:{fontSize:12,color:"#9aa0a6"},children:"Quantit"}),x.jsx("div",{style:{fontWeight:600},children:y??0})]}),x.jsxs("div",{children:[x.jsx("div",{style:{fontSize:12,color:"#9aa0a6"},children:"Investi ($)"}),x.jsx("div",{style:{fontWeight:600},children:w?`$${w.toFixed(2)}`:""})]}),x.jsxs("div",{children:[x.jsx("div",{style:{fontSize:12,color:"#9aa0a6"},children:"Prix d'achat"}),x.jsx("div",{children:Nx(m.buyPrice)})]}),x.jsxs("div",{children:[x.jsx("div",{style:{fontSize:12,color:"#9aa0a6"},children:"Prix actuel"}),x.jsx("div",{children:Nx(t)})]})]}):x.jsxs("div",{style:{color:"#bbb"},children:["Aucune position ouverte trouve pour ",x.jsx("b",{children:f}),"."]})}),x.jsxs("div",{style:{marginTop:16},children:[x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[x.jsx("label",{style:{display:"block"},children:"Pourcentage  vendre"}),x.jsx("button",{onClick:h,style:{marginLeft:"auto",padding:"6px 10px",border:"none",borderRadius:6,background:"#3a3a3a",color:"#fff",cursor:"pointer",fontWeight:600},children:"MAX"})]}),x.jsx("input",{type:"range",min:0,max:100,step:1,value:typeof r=="number"?r:100,onChange:c,style:{width:"100%"}}),x.jsxs("div",{style:{marginTop:8,display:"flex",gap:12,alignItems:"center",flexWrap:"wrap"},children:[x.jsxs("div",{style:{fontSize:14,color:"#9aa0a6"},children:["Pourcentage slectionn:",x.jsxs("b",{style:{color:"#fff"},children:[typeof r=="number"?r:100,"%"]})]}),x.jsxs("div",{style:{fontSize:14,color:"#9aa0a6"},children:["Produit de vente estim:",x.jsx("b",{style:{color:"#fff"},children:T?`$${T.toFixed(2)}`:""})]}),x.jsxs("div",{style:{fontSize:14,color:"#9aa0a6"},children:["Rsultat estim:",x.jsx("b",{style:{color:k},children:I?`$${I.toFixed(2)}`:""})]})]})]}),x.jsxs("div",{style:{display:"flex",gap:8,marginTop:16,justifyContent:"flex-end"},children:[x.jsx("button",{onClick:o,style:{padding:"10px 14px",border:"none",borderRadius:6,background:"#555",color:"#fff",cursor:"pointer"},children:"Annuler"}),x.jsx("button",{onClick:l,disabled:!m||!y||r<=0,style:{padding:"10px 14px",border:"none",borderRadius:6,background:!m||!y||r<=0?"#2f4f2f":"#dc3545",color:"#fff",cursor:!m||!y||r<=0?"not-allowed":"pointer",fontWeight:700},children:"Confirmer la vente"})]})]})})},id=n=>typeof n!="number"||!Number.isFinite(n)?"":n>=1e3?`$${n.toLocaleString(void 0,{maximumFractionDigits:2})}`:`$${n.toFixed(2)}`,sd=n=>typeof n=="number"&&Number.isFinite(n)?`${n.toFixed(2)}%`:"",Gm=n=>typeof n!="number"||!Number.isFinite(n)?"":n>=1?n.toFixed(2):n>=.01?n.toFixed(4):n.toFixed(6),ON=({show:n,symbol:e,amount:t,onChangeAmount:r,onClose:i,onConfirm:o})=>n?x.jsx("div",{style:{position:"fixed",inset:0,background:"#0009",zIndex:1e3},children:x.jsxs("div",{style:{width:"min(520px, 92vw)",margin:"10% auto",background:"#1f1f1f",borderRadius:8,color:"#fff",padding:"1.25rem 1.25rem 1rem"},children:[x.jsxs("h3",{style:{marginTop:0},children:["ACHAT  ",e]}),x.jsx("label",{style:{display:"block",marginBottom:8},children:"Montant en USD"}),x.jsx("input",{type:"number",min:"1",step:"1",value:t,onChange:l=>r(l.target.value),style:{width:"100%",padding:"10px 12px",borderRadius:6,border:"1px solid #333",background:"#121212",color:"#fff"},placeholder:"Ex: 1000"}),x.jsxs("div",{style:{display:"flex",gap:8,marginTop:16,justifyContent:"flex-end"},children:[x.jsx("button",{onClick:i,style:{padding:"10px 14px",border:"none",borderRadius:6,background:"#555",color:"#fff",cursor:"pointer"},children:"Annuler"}),x.jsx("button",{onClick:o,style:{padding:"10px 14px",border:"none",borderRadius:6,background:"#198754",color:"#fff",cursor:"pointer",fontWeight:600},children:"Confirmer lachat"})]})]})}):null,MN=()=>{const{portfolioName:n,cash:e,positions:t,currentPrices:r,buyPosition:i,sellPosition:o,updatePrices:l,investedAmount:c,totalProfit:h,totalProfitPercent:f,watchlist:m,priceChange5m:y,positionsMap:w,totalValue:T}=W.useContext(Bf),[I,k]=W.useState(!1),[b,N]=W.useState(""),[z,$]=W.useState(""),[te,Q]=W.useState(!1),[ie,D]=W.useState(""),[P,A]=W.useState(100),V=W.useMemo(()=>t.map(q=>({...q,quantity:q.qty})),[t]),L=W.useMemo(()=>{const q=[];for(const ge of Object.keys(y))q.push({symbol:ge,change:y[ge],price:r[ge]??NaN});q.sort((ge,Ee)=>Ee.change-ge.change);const K=q.slice(0,5),he=q.slice(-5).reverse();return{topGainers:K,topLosers:he}},[y,r]),j=q=>{N(q.toUpperCase()),$(""),k(!0)},O=async()=>{const q=Number(z);!Number.isFinite(q)||q<=0||(await i(b,q),k(!1))},se=q=>{D(q.toUpperCase()),A(100),Q(!0)},fe=async()=>{await o(ie,P),Q(!1)};W.useEffect(()=>{let q=!1;const K=async()=>{await l(),q||(he=setTimeout(K,60*1e3))};let he=setTimeout(K,250);return()=>{q=!0,clearTimeout(he)}},[l]);const Se=q=>!!w[(q||"").toUpperCase()],re=q=>{const K=(q||"").toUpperCase();return x.jsxs("div",{style:{display:"flex",gap:8},children:[x.jsx("button",{onClick:()=>j(K),style:{padding:"6px 10px",border:"none",borderRadius:4,background:"#198754",color:"#fff",cursor:"pointer",fontWeight:600},children:"ACHAT"}),Se(K)&&x.jsx("button",{onClick:()=>se(K),style:{padding:"6px 10px",border:"none",borderRadius:4,background:"#dc3545",color:"#fff",cursor:"pointer",fontWeight:600},children:"VENTE"})]})},ae={overflowX:"auto",borderRadius:8,border:"1px solid #2a2a2a"},J={width:"100%",borderCollapse:"collapse",minWidth:720,color:"#fff"},R={textAlign:"left",padding:"10px 12px",background:"#232323",position:"sticky",top:0},F={padding:"10px 12px",borderTop:"1px solid #2a2a2a"};return x.jsxs("div",{style:{backgroundImage:'url("/backgrounds/homebackground.png")',backgroundSize:"cover",backgroundAttachment:"fixed",backgroundPosition:"center",minHeight:"100vh",padding:"6rem 1rem 2rem",color:"#fff",fontFamily:"Inter, system-ui, Avenir, Helvetica, Arial, sans-serif"},children:[x.jsxs("div",{style:{display:"flex",gap:16,flexWrap:"wrap",alignItems:"center",marginBottom:16},children:[x.jsxs("h2",{style:{margin:0},children:["Trading  ",x.jsx("span",{style:{color:"#9ecbff"},children:n})]}),x.jsx("button",{onClick:l,style:{padding:"8px 12px",borderRadius:6,background:"#0d6efd",border:"none",color:"#fff",cursor:"pointer"},children:"UPDATE PRICES NOW"})]}),x.jsxs("div",{style:{display:"grid",gap:12,gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",marginBottom:16},children:[x.jsxs("div",{style:{background:"#1b1b1b",padding:12,borderRadius:8,border:"1px solid #2a2a2a"},children:[x.jsx("div",{style:{color:"#999",fontSize:12},children:"Solde total"}),x.jsx("div",{style:{fontSize:20,fontWeight:700},children:id(T)})]}),x.jsxs("div",{style:{background:"#1b1b1b",padding:12,borderRadius:8,border:"1px solid #2a2a2a"},children:[x.jsx("div",{style:{color:"#999",fontSize:12},children:"Cash disponible"}),x.jsx("div",{style:{fontSize:20,fontWeight:700},children:id(e)})]}),x.jsxs("div",{style:{background:"#1b1b1b",padding:12,borderRadius:8,border:"1px solid #2a2a2a"},children:[x.jsx("div",{style:{color:"#999",fontSize:12},children:"Investi (positions ouvertes)"}),x.jsx("div",{style:{fontSize:20,fontWeight:700},children:id(c)})]}),x.jsxs("div",{style:{background:"#1b1b1b",padding:12,borderRadius:8,border:"1px solid #2a2a2a"},children:[x.jsx("div",{style:{color:"#999",fontSize:12},children:"P&L global"}),x.jsxs("div",{style:{fontSize:20,fontWeight:700,color:h>=0?"lightgreen":"salmon"},children:[id(h)," (",sd(f),")"]})]})]}),x.jsxs("section",{style:{marginTop:12},children:[x.jsx("h3",{style:{marginTop:0},children:"Top 5  5 min"}),x.jsxs("div",{style:{display:"grid",gap:16,gridTemplateColumns:"1fr 1fr"},children:[x.jsxs("div",{style:{background:"#1b1b1b",padding:12,borderRadius:8,border:"1px solid #2a2a2a"},children:[x.jsx("h4",{style:{margin:"0 0 8px 0",color:"#7ee787"},children:"Hausses"}),x.jsx("div",{style:ae,children:x.jsxs("table",{style:J,children:[x.jsx("thead",{children:x.jsxs("tr",{children:[x.jsx("th",{style:R,children:"Crypto"}),x.jsx("th",{style:R,children:"Prix (USD)"}),x.jsx("th",{style:R,children:"Var 5m"}),x.jsx("th",{style:R}),x.jsx("th",{style:R}),x.jsx("th",{style:R,children:"TD"})]})}),x.jsx("tbody",{children:L.topGainers.map(q=>{const K=q.symbol.toUpperCase(),he=r[K]??NaN;return x.jsxs("tr",{children:[x.jsx("td",{style:F,children:x.jsx("b",{children:K})}),x.jsx("td",{style:F,children:Gm(he)}),x.jsx("td",{style:{...F,color:q.change>=0?"lightgreen":"salmon"},children:sd(q.change)}),x.jsx("td",{style:F,children:re(K)}),x.jsx("td",{style:F,children:Se(K)?x.jsx("span",{style:{color:"#dc3545"},children:""}):x.jsx("span",{style:{color:"#888"},children:""})}),x.jsx("td",{style:F,children:x.jsx("a",{href:`https://www.tradingview.com/symbols/${K}USD`,target:"_blank",rel:"noreferrer",style:{color:"#4ea8de",fontWeight:700,textDecoration:"none"},children:""})})]},`g_${K}`)})})]})})]}),x.jsxs("div",{style:{background:"#1b1b1b",padding:12,borderRadius:8,border:"1px solid #2a2a2a"},children:[x.jsx("h4",{style:{margin:"0 0 8px 0",color:"#ff7b72"},children:"Baisses"}),x.jsx("div",{style:ae,children:x.jsxs("table",{style:J,children:[x.jsx("thead",{children:x.jsxs("tr",{children:[x.jsx("th",{style:R,children:"Crypto"}),x.jsx("th",{style:R,children:"Prix (USD)"}),x.jsx("th",{style:R,children:"Var 5m"}),x.jsx("th",{style:R}),x.jsx("th",{style:R}),x.jsx("th",{style:R,children:"TD"})]})}),x.jsx("tbody",{children:L.topLosers.map(q=>{const K=q.symbol.toUpperCase(),he=r[K]??NaN;return x.jsxs("tr",{children:[x.jsx("td",{style:F,children:x.jsx("b",{children:K})}),x.jsx("td",{style:F,children:Gm(he)}),x.jsx("td",{style:{...F,color:q.change>=0?"lightgreen":"salmon"},children:sd(q.change)}),x.jsx("td",{style:F,children:re(K)}),x.jsx("td",{style:F,children:Se(K)?x.jsx("span",{style:{color:"#dc3545"},children:""}):x.jsx("span",{style:{color:"#888"},children:""})}),x.jsx("td",{style:F,children:x.jsx("a",{href:`https://www.tradingview.com/symbols/${K}USD`,target:"_blank",rel:"noreferrer",style:{color:"#4ea8de",fontWeight:700,textDecoration:"none"},children:""})})]},`l_${K}`)})})]})})]})]})]}),x.jsxs("section",{style:{marginTop:20},children:[x.jsx("h3",{style:{marginTop:0},children:"Watchlist"}),x.jsxs("div",{style:{background:"#1b1b1b",padding:12,borderRadius:8,border:"1px solid #2a2a2a"},children:[x.jsx("div",{style:ae,children:x.jsxs("table",{style:J,children:[x.jsx("thead",{children:x.jsxs("tr",{children:[x.jsx("th",{style:R,children:"Crypto"}),x.jsx("th",{style:R,children:"Prix (USD)"}),x.jsx("th",{style:R,children:"Var 5m"}),x.jsx("th",{style:R}),x.jsx("th",{style:R}),x.jsx("th",{style:R,children:"TD"})]})}),x.jsx("tbody",{children:m.map(q=>{const K=(q||"").toUpperCase(),he=r[K]??NaN,ge=y[K];return x.jsxs("tr",{children:[x.jsx("td",{style:F,children:x.jsx("b",{children:K})}),x.jsx("td",{style:F,children:Gm(he)}),x.jsx("td",{style:{...F,color:typeof ge=="number"?ge>=0?"lightgreen":"salmon":"#ddd"},children:typeof ge=="number"?sd(ge):""}),x.jsx("td",{style:F,children:re(K)}),x.jsx("td",{style:F,children:Se(K)?x.jsx("span",{style:{color:"#dc3545"},children:""}):x.jsx("span",{style:{color:"#888"},children:""})}),x.jsx("td",{style:F,children:x.jsx("a",{href:`https://www.tradingview.com/symbols/${K}USD`,target:"_blank",rel:"noreferrer",style:{color:"#4ea8de",fontWeight:700,textDecoration:"none"},children:""})})]},`w_${K}`)})})]})}),x.jsxs("p",{style:{color:"#9aa0a6",marginTop:8,fontSize:13},children:["Astuce: le calcul des variations 5 minutes se base sur un snapshot interne actualis automatiquement. Bouton ",x.jsx("b",{children:"UPDATE PRICES NOW"})," pour rafrachir immdiatement."]})]})]}),x.jsx(ON,{show:I,symbol:b,amount:z,onChangeAmount:$,onClose:()=>k(!1),onConfirm:O}),x.jsx(rS,{show:te,symbol:ie,price:r[(ie||"").toUpperCase()]??0,percent:P,positions:V,onClose:()=>Q(!1),onConfirm:fe,onChangePercent:q=>A(Number(q.target.value)),onSetMax:()=>A(100)})]})};function iS(n,e){return function(){return n.apply(e,arguments)}}const{toString:NN}=Object.prototype,{getPrototypeOf:c_}=Object,{iterator:Wf,toStringTag:sS}=Symbol,$f=(n=>e=>{const t=NN.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Cr=n=>(n=n.toLowerCase(),e=>$f(e)===n),Hf=n=>e=>typeof e===n,{isArray:_l}=Array,au=Hf("undefined");function ku(n){return n!==null&&!au(n)&&n.constructor!==null&&!au(n.constructor)&&Dn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const oS=Cr("ArrayBuffer");function LN(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&oS(n.buffer),e}const VN=Hf("string"),Dn=Hf("function"),aS=Hf("number"),Pu=n=>n!==null&&typeof n=="object",FN=n=>n===!0||n===!1,Od=n=>{if($f(n)!=="object")return!1;const e=c_(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(sS in n)&&!(Wf in n)},jN=n=>{if(!Pu(n)||ku(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},UN=Cr("Date"),zN=Cr("File"),BN=Cr("Blob"),WN=Cr("FileList"),$N=n=>Pu(n)&&Dn(n.pipe),HN=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Dn(n.append)&&((e=$f(n))==="formdata"||e==="object"&&Dn(n.toString)&&n.toString()==="[object FormData]"))},qN=Cr("URLSearchParams"),[YN,GN,KN,QN]=["ReadableStream","Request","Response","Headers"].map(Cr),XN=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Cu(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),_l(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{if(ku(n))return;const o=t?Object.getOwnPropertyNames(n):Object.keys(n),l=o.length;let c;for(r=0;r<l;r++)c=o[r],e.call(null,n[c],c,n)}}function lS(n,e){if(ku(n))return null;e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const So=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,cS=n=>!au(n)&&n!==So;function jg(){const{caseless:n}=cS(this)&&this||{},e={},t=(r,i)=>{const o=n&&lS(e,i)||i;Od(e[o])&&Od(r)?e[o]=jg(e[o],r):Od(r)?e[o]=jg({},r):_l(r)?e[o]=r.slice():e[o]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Cu(arguments[r],t);return e}const JN=(n,e,t,{allOwnKeys:r}={})=>(Cu(e,(i,o)=>{t&&Dn(i)?n[o]=iS(i,t):n[o]=i},{allOwnKeys:r}),n),ZN=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),eL=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},tL=(n,e,t,r)=>{let i,o,l;const c={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),o=i.length;o-- >0;)l=i[o],(!r||r(l,n,e))&&!c[l]&&(e[l]=n[l],c[l]=!0);n=t!==!1&&c_(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},nL=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},rL=n=>{if(!n)return null;if(_l(n))return n;let e=n.length;if(!aS(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},iL=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&c_(Uint8Array)),sL=(n,e)=>{const r=(n&&n[Wf]).call(n);let i;for(;(i=r.next())&&!i.done;){const o=i.value;e.call(n,o[0],o[1])}},oL=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},aL=Cr("HTMLFormElement"),lL=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),Lx=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),cL=Cr("RegExp"),uS=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};Cu(t,(i,o)=>{let l;(l=e(i,o,n))!==!1&&(r[o]=l||i)}),Object.defineProperties(n,r)},uL=n=>{uS(n,(e,t)=>{if(Dn(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(Dn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},hL=(n,e)=>{const t={},r=i=>{i.forEach(o=>{t[o]=!0})};return _l(n)?r(n):r(String(n).split(e)),t},dL=()=>{},fL=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function pL(n){return!!(n&&Dn(n.append)&&n[sS]==="FormData"&&n[Wf])}const mL=n=>{const e=new Array(10),t=(r,i)=>{if(Pu(r)){if(e.indexOf(r)>=0)return;if(ku(r))return r;if(!("toJSON"in r)){e[i]=r;const o=_l(r)?[]:{};return Cu(r,(l,c)=>{const h=t(l,i+1);!au(h)&&(o[c]=h)}),e[i]=void 0,o}}return r};return t(n,0)},gL=Cr("AsyncFunction"),yL=n=>n&&(Pu(n)||Dn(n))&&Dn(n.then)&&Dn(n.catch),hS=((n,e)=>n?setImmediate:e?((t,r)=>(So.addEventListener("message",({source:i,data:o})=>{i===So&&o===t&&r.length&&r.shift()()},!1),i=>{r.push(i),So.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Dn(So.postMessage)),_L=typeof queueMicrotask<"u"?queueMicrotask.bind(So):typeof process<"u"&&process.nextTick||hS,vL=n=>n!=null&&Dn(n[Wf]),ee={isArray:_l,isArrayBuffer:oS,isBuffer:ku,isFormData:HN,isArrayBufferView:LN,isString:VN,isNumber:aS,isBoolean:FN,isObject:Pu,isPlainObject:Od,isEmptyObject:jN,isReadableStream:YN,isRequest:GN,isResponse:KN,isHeaders:QN,isUndefined:au,isDate:UN,isFile:zN,isBlob:BN,isRegExp:cL,isFunction:Dn,isStream:$N,isURLSearchParams:qN,isTypedArray:iL,isFileList:WN,forEach:Cu,merge:jg,extend:JN,trim:XN,stripBOM:ZN,inherits:eL,toFlatObject:tL,kindOf:$f,kindOfTest:Cr,endsWith:nL,toArray:rL,forEachEntry:sL,matchAll:oL,isHTMLForm:aL,hasOwnProperty:Lx,hasOwnProp:Lx,reduceDescriptors:uS,freezeMethods:uL,toObjectSet:hL,toCamelCase:lL,noop:dL,toFiniteNumber:fL,findKey:lS,global:So,isContextDefined:cS,isSpecCompliantForm:pL,toJSONObject:mL,isAsyncFn:gL,isThenable:yL,setImmediate:hS,asap:_L,isIterable:vL};function Le(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}ee.inherits(Le,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ee.toJSONObject(this.config),code:this.code,status:this.status}}});const dS=Le.prototype,fS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{fS[n]={value:n}});Object.defineProperties(Le,fS);Object.defineProperty(dS,"isAxiosError",{value:!0});Le.from=(n,e,t,r,i,o)=>{const l=Object.create(dS);return ee.toFlatObject(n,l,function(h){return h!==Error.prototype},c=>c!=="isAxiosError"),Le.call(l,n.message,e,t,r,i),l.cause=n,l.name=n.name,o&&Object.assign(l,o),l};const wL=null;function Ug(n){return ee.isPlainObject(n)||ee.isArray(n)}function pS(n){return ee.endsWith(n,"[]")?n.slice(0,-2):n}function Vx(n,e,t){return n?n.concat(e).map(function(i,o){return i=pS(i),!t&&o?"["+i+"]":i}).join(t?".":""):e}function xL(n){return ee.isArray(n)&&!n.some(Ug)}const EL=ee.toFlatObject(ee,{},null,function(e){return/^is[A-Z]/.test(e)});function qf(n,e,t){if(!ee.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=ee.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,b){return!ee.isUndefined(b[k])});const r=t.metaTokens,i=t.visitor||m,o=t.dots,l=t.indexes,h=(t.Blob||typeof Blob<"u"&&Blob)&&ee.isSpecCompliantForm(e);if(!ee.isFunction(i))throw new TypeError("visitor must be a function");function f(I){if(I===null)return"";if(ee.isDate(I))return I.toISOString();if(ee.isBoolean(I))return I.toString();if(!h&&ee.isBlob(I))throw new Le("Blob is not supported. Use a Buffer instead.");return ee.isArrayBuffer(I)||ee.isTypedArray(I)?h&&typeof Blob=="function"?new Blob([I]):Buffer.from(I):I}function m(I,k,b){let N=I;if(I&&!b&&typeof I=="object"){if(ee.endsWith(k,"{}"))k=r?k:k.slice(0,-2),I=JSON.stringify(I);else if(ee.isArray(I)&&xL(I)||(ee.isFileList(I)||ee.endsWith(k,"[]"))&&(N=ee.toArray(I)))return k=pS(k),N.forEach(function($,te){!(ee.isUndefined($)||$===null)&&e.append(l===!0?Vx([k],te,o):l===null?k:k+"[]",f($))}),!1}return Ug(I)?!0:(e.append(Vx(b,k,o),f(I)),!1)}const y=[],w=Object.assign(EL,{defaultVisitor:m,convertValue:f,isVisitable:Ug});function T(I,k){if(!ee.isUndefined(I)){if(y.indexOf(I)!==-1)throw Error("Circular reference detected in "+k.join("."));y.push(I),ee.forEach(I,function(N,z){(!(ee.isUndefined(N)||N===null)&&i.call(e,N,ee.isString(z)?z.trim():z,k,w))===!0&&T(N,k?k.concat(z):[z])}),y.pop()}}if(!ee.isObject(n))throw new TypeError("data must be an object");return T(n),e}function Fx(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function u_(n,e){this._pairs=[],n&&qf(n,this,e)}const mS=u_.prototype;mS.append=function(e,t){this._pairs.push([e,t])};mS.toString=function(e){const t=e?function(r){return e.call(this,r,Fx)}:Fx;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function bL(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function gS(n,e,t){if(!e)return n;const r=t&&t.encode||bL;ee.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let o;if(i?o=i(e,t):o=ee.isURLSearchParams(e)?e.toString():new u_(e,t).toString(r),o){const l=n.indexOf("#");l!==-1&&(n=n.slice(0,l)),n+=(n.indexOf("?")===-1?"?":"&")+o}return n}class jx{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ee.forEach(this.handlers,function(r){r!==null&&e(r)})}}const yS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},TL=typeof URLSearchParams<"u"?URLSearchParams:u_,SL=typeof FormData<"u"?FormData:null,IL=typeof Blob<"u"?Blob:null,kL={isBrowser:!0,classes:{URLSearchParams:TL,FormData:SL,Blob:IL},protocols:["http","https","file","blob","url","data"]},h_=typeof window<"u"&&typeof document<"u",zg=typeof navigator=="object"&&navigator||void 0,PL=h_&&(!zg||["ReactNative","NativeScript","NS"].indexOf(zg.product)<0),CL=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",AL=h_&&window.location.href||"http://localhost",RL=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:h_,hasStandardBrowserEnv:PL,hasStandardBrowserWebWorkerEnv:CL,navigator:zg,origin:AL},Symbol.toStringTag,{value:"Module"})),hn={...RL,...kL};function DL(n,e){return qf(n,new hn.classes.URLSearchParams,{visitor:function(t,r,i,o){return hn.isNode&&ee.isBuffer(t)?(this.append(r,t.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...e})}function OL(n){return ee.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function ML(n){const e={},t=Object.keys(n);let r;const i=t.length;let o;for(r=0;r<i;r++)o=t[r],e[o]=n[o];return e}function _S(n){function e(t,r,i,o){let l=t[o++];if(l==="__proto__")return!0;const c=Number.isFinite(+l),h=o>=t.length;return l=!l&&ee.isArray(i)?i.length:l,h?(ee.hasOwnProp(i,l)?i[l]=[i[l],r]:i[l]=r,!c):((!i[l]||!ee.isObject(i[l]))&&(i[l]=[]),e(t,r,i[l],o)&&ee.isArray(i[l])&&(i[l]=ML(i[l])),!c)}if(ee.isFormData(n)&&ee.isFunction(n.entries)){const t={};return ee.forEachEntry(n,(r,i)=>{e(OL(r),i,t,0)}),t}return null}function NL(n,e,t){if(ee.isString(n))try{return(e||JSON.parse)(n),ee.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const Au={transitional:yS,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,o=ee.isObject(e);if(o&&ee.isHTMLForm(e)&&(e=new FormData(e)),ee.isFormData(e))return i?JSON.stringify(_S(e)):e;if(ee.isArrayBuffer(e)||ee.isBuffer(e)||ee.isStream(e)||ee.isFile(e)||ee.isBlob(e)||ee.isReadableStream(e))return e;if(ee.isArrayBufferView(e))return e.buffer;if(ee.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return DL(e,this.formSerializer).toString();if((c=ee.isFileList(e))||r.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return qf(c?{"files[]":e}:e,h&&new h,this.formSerializer)}}return o||i?(t.setContentType("application/json",!1),NL(e)):e}],transformResponse:[function(e){const t=this.transitional||Au.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(ee.isResponse(e)||ee.isReadableStream(e))return e;if(e&&ee.isString(e)&&(r&&!this.responseType||i)){const l=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(c){if(l)throw c.name==="SyntaxError"?Le.from(c,Le.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:hn.classes.FormData,Blob:hn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ee.forEach(["delete","get","head","post","put","patch"],n=>{Au.headers[n]={}});const LL=ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),VL=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(l){i=l.indexOf(":"),t=l.substring(0,i).trim().toLowerCase(),r=l.substring(i+1).trim(),!(!t||e[t]&&LL[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},Ux=Symbol("internals");function gc(n){return n&&String(n).trim().toLowerCase()}function Md(n){return n===!1||n==null?n:ee.isArray(n)?n.map(Md):String(n)}function FL(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const jL=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Km(n,e,t,r,i){if(ee.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!ee.isString(e)){if(ee.isString(r))return e.indexOf(r)!==-1;if(ee.isRegExp(r))return r.test(e)}}function UL(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function zL(n,e){const t=ee.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,o,l){return this[r].call(this,e,i,o,l)},configurable:!0})})}let On=class{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function o(c,h,f){const m=gc(h);if(!m)throw new Error("header name must be a non-empty string");const y=ee.findKey(i,m);(!y||i[y]===void 0||f===!0||f===void 0&&i[y]!==!1)&&(i[y||h]=Md(c))}const l=(c,h)=>ee.forEach(c,(f,m)=>o(f,m,h));if(ee.isPlainObject(e)||e instanceof this.constructor)l(e,t);else if(ee.isString(e)&&(e=e.trim())&&!jL(e))l(VL(e),t);else if(ee.isObject(e)&&ee.isIterable(e)){let c={},h,f;for(const m of e){if(!ee.isArray(m))throw TypeError("Object iterator must return a key-value pair");c[f=m[0]]=(h=c[f])?ee.isArray(h)?[...h,m[1]]:[h,m[1]]:m[1]}l(c,t)}else e!=null&&o(t,e,r);return this}get(e,t){if(e=gc(e),e){const r=ee.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return FL(i);if(ee.isFunction(t))return t.call(this,i,r);if(ee.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=gc(e),e){const r=ee.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||Km(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function o(l){if(l=gc(l),l){const c=ee.findKey(r,l);c&&(!t||Km(r,r[c],c,t))&&(delete r[c],i=!0)}}return ee.isArray(e)?e.forEach(o):o(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const o=t[r];(!e||Km(this,this[o],o,e,!0))&&(delete this[o],i=!0)}return i}normalize(e){const t=this,r={};return ee.forEach(this,(i,o)=>{const l=ee.findKey(r,o);if(l){t[l]=Md(i),delete t[o];return}const c=e?UL(o):String(o).trim();c!==o&&delete t[o],t[c]=Md(i),r[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ee.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&ee.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[Ux]=this[Ux]={accessors:{}}).accessors,i=this.prototype;function o(l){const c=gc(l);r[c]||(zL(i,l),r[c]=!0)}return ee.isArray(e)?e.forEach(o):o(e),this}};On.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ee.reduceDescriptors(On.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});ee.freezeMethods(On);function Qm(n,e){const t=this||Au,r=e||t,i=On.from(r.headers);let o=r.data;return ee.forEach(n,function(c){o=c.call(t,o,i.normalize(),e?e.status:void 0)}),i.normalize(),o}function vS(n){return!!(n&&n.__CANCEL__)}function vl(n,e,t){Le.call(this,n??"canceled",Le.ERR_CANCELED,e,t),this.name="CanceledError"}ee.inherits(vl,Le,{__CANCEL__:!0});function wS(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new Le("Request failed with status code "+t.status,[Le.ERR_BAD_REQUEST,Le.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function BL(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function WL(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,o=0,l;return e=e!==void 0?e:1e3,function(h){const f=Date.now(),m=r[o];l||(l=f),t[i]=h,r[i]=f;let y=o,w=0;for(;y!==i;)w+=t[y++],y=y%n;if(i=(i+1)%n,i===o&&(o=(o+1)%n),f-l<e)return;const T=m&&f-m;return T?Math.round(w*1e3/T):void 0}}function $L(n,e){let t=0,r=1e3/e,i,o;const l=(f,m=Date.now())=>{t=m,i=null,o&&(clearTimeout(o),o=null),n(...f)};return[(...f)=>{const m=Date.now(),y=m-t;y>=r?l(f,m):(i=f,o||(o=setTimeout(()=>{o=null,l(i)},r-y)))},()=>i&&l(i)]}const af=(n,e,t=3)=>{let r=0;const i=WL(50,250);return $L(o=>{const l=o.loaded,c=o.lengthComputable?o.total:void 0,h=l-r,f=i(h),m=l<=c;r=l;const y={loaded:l,total:c,progress:c?l/c:void 0,bytes:h,rate:f||void 0,estimated:f&&c&&m?(c-l)/f:void 0,event:o,lengthComputable:c!=null,[e?"download":"upload"]:!0};n(y)},t)},zx=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},Bx=n=>(...e)=>ee.asap(()=>n(...e)),HL=hn.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,hn.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(hn.origin),hn.navigator&&/(msie|trident)/i.test(hn.navigator.userAgent)):()=>!0,qL=hn.hasStandardBrowserEnv?{write(n,e,t,r,i,o){const l=[n+"="+encodeURIComponent(e)];ee.isNumber(t)&&l.push("expires="+new Date(t).toGMTString()),ee.isString(r)&&l.push("path="+r),ee.isString(i)&&l.push("domain="+i),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function YL(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function GL(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function xS(n,e,t){let r=!YL(e);return n&&(r||t==!1)?GL(n,e):e}const Wx=n=>n instanceof On?{...n}:n;function Vo(n,e){e=e||{};const t={};function r(f,m,y,w){return ee.isPlainObject(f)&&ee.isPlainObject(m)?ee.merge.call({caseless:w},f,m):ee.isPlainObject(m)?ee.merge({},m):ee.isArray(m)?m.slice():m}function i(f,m,y,w){if(ee.isUndefined(m)){if(!ee.isUndefined(f))return r(void 0,f,y,w)}else return r(f,m,y,w)}function o(f,m){if(!ee.isUndefined(m))return r(void 0,m)}function l(f,m){if(ee.isUndefined(m)){if(!ee.isUndefined(f))return r(void 0,f)}else return r(void 0,m)}function c(f,m,y){if(y in e)return r(f,m);if(y in n)return r(void 0,f)}const h={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:c,headers:(f,m,y)=>i(Wx(f),Wx(m),y,!0)};return ee.forEach(Object.keys({...n,...e}),function(m){const y=h[m]||i,w=y(n[m],e[m],m);ee.isUndefined(w)&&y!==c||(t[m]=w)}),t}const ES=n=>{const e=Vo({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:o,headers:l,auth:c}=e;e.headers=l=On.from(l),e.url=gS(xS(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),c&&l.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let h;if(ee.isFormData(t)){if(hn.hasStandardBrowserEnv||hn.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((h=l.getContentType())!==!1){const[f,...m]=h?h.split(";").map(y=>y.trim()).filter(Boolean):[];l.setContentType([f||"multipart/form-data",...m].join("; "))}}if(hn.hasStandardBrowserEnv&&(r&&ee.isFunction(r)&&(r=r(e)),r||r!==!1&&HL(e.url))){const f=i&&o&&qL.read(o);f&&l.set(i,f)}return e},KL=typeof XMLHttpRequest<"u",QL=KL&&function(n){return new Promise(function(t,r){const i=ES(n);let o=i.data;const l=On.from(i.headers).normalize();let{responseType:c,onUploadProgress:h,onDownloadProgress:f}=i,m,y,w,T,I;function k(){T&&T(),I&&I(),i.cancelToken&&i.cancelToken.unsubscribe(m),i.signal&&i.signal.removeEventListener("abort",m)}let b=new XMLHttpRequest;b.open(i.method.toUpperCase(),i.url,!0),b.timeout=i.timeout;function N(){if(!b)return;const $=On.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),Q={data:!c||c==="text"||c==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:$,config:n,request:b};wS(function(D){t(D),k()},function(D){r(D),k()},Q),b=null}"onloadend"in b?b.onloadend=N:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(N)},b.onabort=function(){b&&(r(new Le("Request aborted",Le.ECONNABORTED,n,b)),b=null)},b.onerror=function(){r(new Le("Network Error",Le.ERR_NETWORK,n,b)),b=null},b.ontimeout=function(){let te=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const Q=i.transitional||yS;i.timeoutErrorMessage&&(te=i.timeoutErrorMessage),r(new Le(te,Q.clarifyTimeoutError?Le.ETIMEDOUT:Le.ECONNABORTED,n,b)),b=null},o===void 0&&l.setContentType(null),"setRequestHeader"in b&&ee.forEach(l.toJSON(),function(te,Q){b.setRequestHeader(Q,te)}),ee.isUndefined(i.withCredentials)||(b.withCredentials=!!i.withCredentials),c&&c!=="json"&&(b.responseType=i.responseType),f&&([w,I]=af(f,!0),b.addEventListener("progress",w)),h&&b.upload&&([y,T]=af(h),b.upload.addEventListener("progress",y),b.upload.addEventListener("loadend",T)),(i.cancelToken||i.signal)&&(m=$=>{b&&(r(!$||$.type?new vl(null,n,b):$),b.abort(),b=null)},i.cancelToken&&i.cancelToken.subscribe(m),i.signal&&(i.signal.aborted?m():i.signal.addEventListener("abort",m)));const z=BL(i.url);if(z&&hn.protocols.indexOf(z)===-1){r(new Le("Unsupported protocol "+z+":",Le.ERR_BAD_REQUEST,n));return}b.send(o||null)})},XL=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,i;const o=function(f){if(!i){i=!0,c();const m=f instanceof Error?f:this.reason;r.abort(m instanceof Le?m:new vl(m instanceof Error?m.message:m))}};let l=e&&setTimeout(()=>{l=null,o(new Le(`timeout ${e} of ms exceeded`,Le.ETIMEDOUT))},e);const c=()=>{n&&(l&&clearTimeout(l),l=null,n.forEach(f=>{f.unsubscribe?f.unsubscribe(o):f.removeEventListener("abort",o)}),n=null)};n.forEach(f=>f.addEventListener("abort",o));const{signal:h}=r;return h.unsubscribe=()=>ee.asap(c),h}},JL=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},ZL=async function*(n,e){for await(const t of eV(n))yield*JL(t,e)},eV=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},$x=(n,e,t,r)=>{const i=ZL(n,e);let o=0,l,c=h=>{l||(l=!0,r&&r(h))};return new ReadableStream({async pull(h){try{const{done:f,value:m}=await i.next();if(f){c(),h.close();return}let y=m.byteLength;if(t){let w=o+=y;t(w)}h.enqueue(new Uint8Array(m))}catch(f){throw c(f),f}},cancel(h){return c(h),i.return()}},{highWaterMark:2})},Yf=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",bS=Yf&&typeof ReadableStream=="function",tV=Yf&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),TS=(n,...e)=>{try{return!!n(...e)}catch{return!1}},nV=bS&&TS(()=>{let n=!1;const e=new Request(hn.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),Hx=64*1024,Bg=bS&&TS(()=>ee.isReadableStream(new Response("").body)),lf={stream:Bg&&(n=>n.body)};Yf&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!lf[e]&&(lf[e]=ee.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new Le(`Response type '${e}' is not supported`,Le.ERR_NOT_SUPPORT,r)})})})(new Response);const rV=async n=>{if(n==null)return 0;if(ee.isBlob(n))return n.size;if(ee.isSpecCompliantForm(n))return(await new Request(hn.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(ee.isArrayBufferView(n)||ee.isArrayBuffer(n))return n.byteLength;if(ee.isURLSearchParams(n)&&(n=n+""),ee.isString(n))return(await tV(n)).byteLength},iV=async(n,e)=>{const t=ee.toFiniteNumber(n.getContentLength());return t??rV(e)},sV=Yf&&(async n=>{let{url:e,method:t,data:r,signal:i,cancelToken:o,timeout:l,onDownloadProgress:c,onUploadProgress:h,responseType:f,headers:m,withCredentials:y="same-origin",fetchOptions:w}=ES(n);f=f?(f+"").toLowerCase():"text";let T=XL([i,o&&o.toAbortSignal()],l),I;const k=T&&T.unsubscribe&&(()=>{T.unsubscribe()});let b;try{if(h&&nV&&t!=="get"&&t!=="head"&&(b=await iV(m,r))!==0){let Q=new Request(e,{method:"POST",body:r,duplex:"half"}),ie;if(ee.isFormData(r)&&(ie=Q.headers.get("content-type"))&&m.setContentType(ie),Q.body){const[D,P]=zx(b,af(Bx(h)));r=$x(Q.body,Hx,D,P)}}ee.isString(y)||(y=y?"include":"omit");const N="credentials"in Request.prototype;I=new Request(e,{...w,signal:T,method:t.toUpperCase(),headers:m.normalize().toJSON(),body:r,duplex:"half",credentials:N?y:void 0});let z=await fetch(I,w);const $=Bg&&(f==="stream"||f==="response");if(Bg&&(c||$&&k)){const Q={};["status","statusText","headers"].forEach(A=>{Q[A]=z[A]});const ie=ee.toFiniteNumber(z.headers.get("content-length")),[D,P]=c&&zx(ie,af(Bx(c),!0))||[];z=new Response($x(z.body,Hx,D,()=>{P&&P(),k&&k()}),Q)}f=f||"text";let te=await lf[ee.findKey(lf,f)||"text"](z,n);return!$&&k&&k(),await new Promise((Q,ie)=>{wS(Q,ie,{data:te,headers:On.from(z.headers),status:z.status,statusText:z.statusText,config:n,request:I})})}catch(N){throw k&&k(),N&&N.name==="TypeError"&&/Load failed|fetch/i.test(N.message)?Object.assign(new Le("Network Error",Le.ERR_NETWORK,n,I),{cause:N.cause||N}):Le.from(N,N&&N.code,n,I)}}),Wg={http:wL,xhr:QL,fetch:sV};ee.forEach(Wg,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const qx=n=>`- ${n}`,oV=n=>ee.isFunction(n)||n===null||n===!1,SS={getAdapter:n=>{n=ee.isArray(n)?n:[n];const{length:e}=n;let t,r;const i={};for(let o=0;o<e;o++){t=n[o];let l;if(r=t,!oV(t)&&(r=Wg[(l=String(t)).toLowerCase()],r===void 0))throw new Le(`Unknown adapter '${l}'`);if(r)break;i[l||"#"+o]=r}if(!r){const o=Object.entries(i).map(([c,h])=>`adapter ${c} `+(h===!1?"is not supported by the environment":"is not available in the build"));let l=e?o.length>1?`since :
`+o.map(qx).join(`
`):" "+qx(o[0]):"as no adapter specified";throw new Le("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return r},adapters:Wg};function Xm(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new vl(null,n)}function Yx(n){return Xm(n),n.headers=On.from(n.headers),n.data=Qm.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),SS.getAdapter(n.adapter||Au.adapter)(n).then(function(r){return Xm(n),r.data=Qm.call(n,n.transformResponse,r),r.headers=On.from(r.headers),r},function(r){return vS(r)||(Xm(n),r&&r.response&&(r.response.data=Qm.call(n,n.transformResponse,r.response),r.response.headers=On.from(r.response.headers))),Promise.reject(r)})}const IS="1.11.0",Gf={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Gf[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const Gx={};Gf.transitional=function(e,t,r){function i(o,l){return"[Axios v"+IS+"] Transitional option '"+o+"'"+l+(r?". "+r:"")}return(o,l,c)=>{if(e===!1)throw new Le(i(l," has been removed"+(t?" in "+t:"")),Le.ERR_DEPRECATED);return t&&!Gx[l]&&(Gx[l]=!0,console.warn(i(l," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,l,c):!0}};Gf.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function aV(n,e,t){if(typeof n!="object")throw new Le("options must be an object",Le.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const o=r[i],l=e[o];if(l){const c=n[o],h=c===void 0||l(c,o,n);if(h!==!0)throw new Le("option "+o+" must be "+h,Le.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Le("Unknown option "+o,Le.ERR_BAD_OPTION)}}const Nd={assertOptions:aV,validators:Gf},zr=Nd.validators;let Co=class{constructor(e){this.defaults=e||{},this.interceptors={request:new jx,response:new jx}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Vo(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:o}=t;r!==void 0&&Nd.assertOptions(r,{silentJSONParsing:zr.transitional(zr.boolean),forcedJSONParsing:zr.transitional(zr.boolean),clarifyTimeoutError:zr.transitional(zr.boolean)},!1),i!=null&&(ee.isFunction(i)?t.paramsSerializer={serialize:i}:Nd.assertOptions(i,{encode:zr.function,serialize:zr.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Nd.assertOptions(t,{baseUrl:zr.spelling("baseURL"),withXsrfToken:zr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let l=o&&ee.merge(o.common,o[t.method]);o&&ee.forEach(["delete","get","head","post","put","patch","common"],I=>{delete o[I]}),t.headers=On.concat(l,o);const c=[];let h=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(t)===!1||(h=h&&k.synchronous,c.unshift(k.fulfilled,k.rejected))});const f=[];this.interceptors.response.forEach(function(k){f.push(k.fulfilled,k.rejected)});let m,y=0,w;if(!h){const I=[Yx.bind(this),void 0];for(I.unshift(...c),I.push(...f),w=I.length,m=Promise.resolve(t);y<w;)m=m.then(I[y++],I[y++]);return m}w=c.length;let T=t;for(y=0;y<w;){const I=c[y++],k=c[y++];try{T=I(T)}catch(b){k.call(this,b);break}}try{m=Yx.call(this,T)}catch(I){return Promise.reject(I)}for(y=0,w=f.length;y<w;)m=m.then(f[y++],f[y++]);return m}getUri(e){e=Vo(this.defaults,e);const t=xS(e.baseURL,e.url,e.allowAbsoluteUrls);return gS(t,e.params,e.paramsSerializer)}};ee.forEach(["delete","get","head","options"],function(e){Co.prototype[e]=function(t,r){return this.request(Vo(r||{},{method:e,url:t,data:(r||{}).data}))}});ee.forEach(["post","put","patch"],function(e){function t(r){return function(o,l,c){return this.request(Vo(c||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}Co.prototype[e]=t(),Co.prototype[e+"Form"]=t(!0)});let lV=class kS{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(o){t=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const l=new Promise(c=>{r.subscribe(c),o=c}).then(i);return l.cancel=function(){r.unsubscribe(o)},l},e(function(o,l,c){r.reason||(r.reason=new vl(o,l,c),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new kS(function(i){e=i}),cancel:e}}};function cV(n){return function(t){return n.apply(null,t)}}function uV(n){return ee.isObject(n)&&n.isAxiosError===!0}const $g={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries($g).forEach(([n,e])=>{$g[e]=n});function PS(n){const e=new Co(n),t=iS(Co.prototype.request,e);return ee.extend(t,Co.prototype,e,{allOwnKeys:!0}),ee.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return PS(Vo(n,i))},t}const It=PS(Au);It.Axios=Co;It.CanceledError=vl;It.CancelToken=lV;It.isCancel=vS;It.VERSION=IS;It.toFormData=qf;It.AxiosError=Le;It.Cancel=It.CanceledError;It.all=function(e){return Promise.all(e)};It.spread=cV;It.isAxiosError=uV;It.mergeConfig=Vo;It.AxiosHeaders=On;It.formToJSON=n=>_S(ee.isHTMLForm(n)?new FormData(n):n);It.getAdapter=SS.getAdapter;It.HttpStatusCode=$g;It.default=It;const{Axios:g5,AxiosError:y5,CanceledError:_5,isCancel:v5,CancelToken:w5,VERSION:x5,all:E5,Cancel:b5,isAxiosError:T5,spread:S5,toFormData:I5,AxiosHeaders:k5,HttpStatusCode:P5,formToJSON:C5,getAdapter:A5,mergeConfig:R5}=It;/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ru(n){return n+.5|0}const ys=(n,e,t)=>Math.max(Math.min(n,t),e);function Dc(n){return ys(Ru(n*2.55),0,255)}function Ss(n){return ys(Ru(n*255),0,255)}function Si(n){return ys(Ru(n/2.55)/100,0,1)}function Kx(n){return ys(Ru(n*100),0,100)}const nr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Hg=[..."0123456789ABCDEF"],hV=n=>Hg[n&15],dV=n=>Hg[(n&240)>>4]+Hg[n&15],od=n=>(n&240)>>4===(n&15),fV=n=>od(n.r)&&od(n.g)&&od(n.b)&&od(n.a);function pV(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&nr[n[1]]*17,g:255&nr[n[2]]*17,b:255&nr[n[3]]*17,a:e===5?nr[n[4]]*17:255}:(e===7||e===9)&&(t={r:nr[n[1]]<<4|nr[n[2]],g:nr[n[3]]<<4|nr[n[4]],b:nr[n[5]]<<4|nr[n[6]],a:e===9?nr[n[7]]<<4|nr[n[8]]:255})),t}const mV=(n,e)=>n<255?e(n):"";function gV(n){var e=fV(n)?hV:dV;return n?"#"+e(n.r)+e(n.g)+e(n.b)+mV(n.a,e):void 0}const yV=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function CS(n,e,t){const r=e*Math.min(t,1-t),i=(o,l=(o+n/30)%12)=>t-r*Math.max(Math.min(l-3,9-l,1),-1);return[i(0),i(8),i(4)]}function _V(n,e,t){const r=(i,o=(i+n/60)%6)=>t-t*e*Math.max(Math.min(o,4-o,1),0);return[r(5),r(3),r(1)]}function vV(n,e,t){const r=CS(n,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)r[i]*=1-e-t,r[i]+=e;return r}function wV(n,e,t,r,i){return n===i?(e-t)/r+(e<t?6:0):e===i?(t-n)/r+2:(n-e)/r+4}function d_(n){const t=n.r/255,r=n.g/255,i=n.b/255,o=Math.max(t,r,i),l=Math.min(t,r,i),c=(o+l)/2;let h,f,m;return o!==l&&(m=o-l,f=c>.5?m/(2-o-l):m/(o+l),h=wV(t,r,i,m,o),h=h*60+.5),[h|0,f||0,c]}function f_(n,e,t,r){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,r)).map(Ss)}function p_(n,e,t){return f_(CS,n,e,t)}function xV(n,e,t){return f_(vV,n,e,t)}function EV(n,e,t){return f_(_V,n,e,t)}function AS(n){return(n%360+360)%360}function bV(n){const e=yV.exec(n);let t=255,r;if(!e)return;e[5]!==r&&(t=e[6]?Dc(+e[5]):Ss(+e[5]));const i=AS(+e[2]),o=+e[3]/100,l=+e[4]/100;return e[1]==="hwb"?r=xV(i,o,l):e[1]==="hsv"?r=EV(i,o,l):r=p_(i,o,l),{r:r[0],g:r[1],b:r[2],a:t}}function TV(n,e){var t=d_(n);t[0]=AS(t[0]+e),t=p_(t),n.r=t[0],n.g=t[1],n.b=t[2]}function SV(n){if(!n)return;const e=d_(n),t=e[0],r=Kx(e[1]),i=Kx(e[2]);return n.a<255?`hsla(${t}, ${r}%, ${i}%, ${Si(n.a)})`:`hsl(${t}, ${r}%, ${i}%)`}const Qx={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Xx={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function IV(){const n={},e=Object.keys(Xx),t=Object.keys(Qx);let r,i,o,l,c;for(r=0;r<e.length;r++){for(l=c=e[r],i=0;i<t.length;i++)o=t[i],c=c.replace(o,Qx[o]);o=parseInt(Xx[l],16),n[c]=[o>>16&255,o>>8&255,o&255]}return n}let ad;function kV(n){ad||(ad=IV(),ad.transparent=[0,0,0,0]);const e=ad[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const PV=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function CV(n){const e=PV.exec(n);let t=255,r,i,o;if(e){if(e[7]!==r){const l=+e[7];t=e[8]?Dc(l):ys(l*255,0,255)}return r=+e[1],i=+e[3],o=+e[5],r=255&(e[2]?Dc(r):ys(r,0,255)),i=255&(e[4]?Dc(i):ys(i,0,255)),o=255&(e[6]?Dc(o):ys(o,0,255)),{r,g:i,b:o,a:t}}}function AV(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Si(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Jm=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Fa=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function RV(n,e,t){const r=Fa(Si(n.r)),i=Fa(Si(n.g)),o=Fa(Si(n.b));return{r:Ss(Jm(r+t*(Fa(Si(e.r))-r))),g:Ss(Jm(i+t*(Fa(Si(e.g))-i))),b:Ss(Jm(o+t*(Fa(Si(e.b))-o))),a:n.a+t*(e.a-n.a)}}function ld(n,e,t){if(n){let r=d_(n);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,e===0?360:1)),r=p_(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function RS(n,e){return n&&Object.assign(e||{},n)}function Jx(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Ss(n[3]))):(e=RS(n,{r:0,g:0,b:0,a:1}),e.a=Ss(e.a)),e}function DV(n){return n.charAt(0)==="r"?CV(n):bV(n)}class lu{constructor(e){if(e instanceof lu)return e;const t=typeof e;let r;t==="object"?r=Jx(e):t==="string"&&(r=pV(e)||kV(e)||DV(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=RS(this._rgb);return e&&(e.a=Si(e.a)),e}set rgb(e){this._rgb=Jx(e)}rgbString(){return this._valid?AV(this._rgb):void 0}hexString(){return this._valid?gV(this._rgb):void 0}hslString(){return this._valid?SV(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,i=e.rgb;let o;const l=t===o?.5:t,c=2*l-1,h=r.a-i.a,f=((c*h===-1?c:(c+h)/(1+c*h))+1)/2;o=1-f,r.r=255&f*r.r+o*i.r+.5,r.g=255&f*r.g+o*i.g+.5,r.b=255&f*r.b+o*i.b+.5,r.a=l*r.a+(1-l)*i.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=RV(this._rgb,e._rgb,t)),this}clone(){return new lu(this.rgb)}alpha(e){return this._rgb.a=Ss(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Ru(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return ld(this._rgb,2,e),this}darken(e){return ld(this._rgb,2,-e),this}saturate(e){return ld(this._rgb,1,e),this}desaturate(e){return ld(this._rgb,1,-e),this}rotate(e){return TV(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ei(){}const OV=(()=>{let n=0;return()=>n++})();function lt(n){return n==null}function Zt(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ye(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function sr(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Br(n,e){return sr(n)?n:e}function He(n,e){return typeof n>"u"?e:n}const MV=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function ot(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Je(n,e,t,r){let i,o,l;if(Zt(n))for(o=n.length,i=0;i<o;i++)e.call(t,n[i],i);else if(Ye(n))for(l=Object.keys(n),o=l.length,i=0;i<o;i++)e.call(t,n[l[i]],l[i])}function cf(n,e){let t,r,i,o;if(!n||!e||n.length!==e.length)return!1;for(t=0,r=n.length;t<r;++t)if(i=n[t],o=e[t],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function uf(n){if(Zt(n))return n.map(uf);if(Ye(n)){const e=Object.create(null),t=Object.keys(n),r=t.length;let i=0;for(;i<r;++i)e[t[i]]=uf(n[t[i]]);return e}return n}function DS(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function NV(n,e,t,r){if(!DS(n))return;const i=e[n],o=t[n];Ye(i)&&Ye(o)?cu(i,o,r):e[n]=uf(o)}function cu(n,e,t){const r=Zt(e)?e:[e],i=r.length;if(!Ye(n))return n;t=t||{};const o=t.merger||NV;let l;for(let c=0;c<i;++c){if(l=r[c],!Ye(l))continue;const h=Object.keys(l);for(let f=0,m=h.length;f<m;++f)o(h[f],n,l,t)}return n}function Bc(n,e){return cu(n,e,{merger:LV})}function LV(n,e,t){if(!DS(n))return;const r=e[n],i=t[n];Ye(r)&&Ye(i)?Bc(r,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=uf(i))}const Zx={"":n=>n,x:n=>n.x,y:n=>n.y};function VV(n){const e=n.split("."),t=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}function FV(n){const e=VV(n);return t=>{for(const r of e){if(r==="")break;t=t&&t[r]}return t}}function hf(n,e){return(Zx[e]||(Zx[e]=FV(e)))(n)}function m_(n){return n.charAt(0).toUpperCase()+n.slice(1)}const df=n=>typeof n<"u",Os=n=>typeof n=="function",eE=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function jV(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const dn=Math.PI,ni=2*dn,UV=ni+dn,ff=Number.POSITIVE_INFINITY,zV=dn/180,br=dn/2,yo=dn/4,tE=dn*2/3,OS=Math.log10,rl=Math.sign;function Wc(n,e,t){return Math.abs(n-e)<t}function nE(n){const e=Math.round(n);n=Wc(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(OS(n))),r=n/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function BV(n){const e=[],t=Math.sqrt(n);let r;for(r=1;r<t;r++)n%r===0&&(e.push(r),e.push(n/r));return t===(t|0)&&e.push(t),e.sort((i,o)=>i-o).pop(),e}function WV(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function uu(n){return!WV(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function $V(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function HV(n,e,t){let r,i,o;for(r=0,i=n.length;r<i;r++)o=n[r][t],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function Io(n){return n*(dn/180)}function qV(n){return n*(180/dn)}function rE(n){if(!sr(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function YV(n,e){const t=e.x-n.x,r=e.y-n.y,i=Math.sqrt(t*t+r*r);let o=Math.atan2(r,t);return o<-.5*dn&&(o+=ni),{angle:o,distance:i}}function qg(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function GV(n,e){return(n-e+UV)%ni-dn}function us(n){return(n%ni+ni)%ni}function MS(n,e,t,r){const i=us(n),o=us(e),l=us(t),c=us(o-i),h=us(l-i),f=us(i-o),m=us(i-l);return i===o||i===l||r&&o===l||c>h&&f<m}function Tr(n,e,t){return Math.max(e,Math.min(t,n))}function KV(n){return Tr(n,-32768,32767)}function Oc(n,e,t,r=1e-6){return n>=Math.min(e,t)-r&&n<=Math.max(e,t)+r}function g_(n,e,t){t=t||(l=>n[l]<e);let r=n.length-1,i=0,o;for(;r-i>1;)o=i+r>>1,t(o)?i=o:r=o;return{lo:i,hi:r}}const ko=(n,e,t,r)=>g_(n,t,r?i=>{const o=n[i][e];return o<t||o===t&&n[i+1][e]===t}:i=>n[i][e]<t),QV=(n,e,t)=>g_(n,t,r=>n[r][e]>=t);function XV(n,e,t){let r=0,i=n.length;for(;r<i&&n[r]<e;)r++;for(;i>r&&n[i-1]>t;)i--;return r>0||i<n.length?n.slice(r,i):n}const NS=["push","pop","shift","splice","unshift"];function JV(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),NS.forEach(t=>{const r="_onData"+m_(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...o){const l=i.apply(this,o);return n._chartjs.listeners.forEach(c=>{typeof c[r]=="function"&&c[r](...o)}),l}})})}function iE(n,e){const t=n._chartjs;if(!t)return;const r=t.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(NS.forEach(o=>{delete n[o]}),delete n._chartjs)}function ZV(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const LS=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function VS(n,e){let t=[],r=!1;return function(...i){t=i,r||(r=!0,LS.call(window,()=>{r=!1,n.apply(e,t)}))}}function eF(n,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(n,e,r)):n.apply(this,r),e}}const FS=n=>n==="start"?"left":n==="end"?"right":"center",Bn=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,tF=(n,e,t,r)=>n===(r?"left":"right")?t:n==="center"?(e+t)/2:e;function nF(n,e,t){const r=e.length;let i=0,o=r;if(n._sorted){const{iScale:l,vScale:c,_parsed:h}=n,f=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,m=l.axis,{min:y,max:w,minDefined:T,maxDefined:I}=l.getUserBounds();if(T){if(i=Math.min(ko(h,m,y).lo,t?r:ko(e,m,l.getPixelForValue(y)).lo),f){const k=h.slice(0,i+1).reverse().findIndex(b=>!lt(b[c.axis]));i-=Math.max(0,k)}i=Tr(i,0,r-1)}if(I){let k=Math.max(ko(h,l.axis,w,!0).hi+1,t?0:ko(e,m,l.getPixelForValue(w),!0).hi+1);if(f){const b=h.slice(k-1).findIndex(N=>!lt(N[c.axis]));k+=Math.max(0,b)}o=Tr(k,i,r)-i}else o=r-i}return{start:i,count:o}}function rF(n){const{xScale:e,yScale:t,_scaleRanges:r}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return n._scaleRanges=i,!0;const o=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,i),o}const cd=n=>n===0||n===1,sE=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*ni/t)),oE=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*ni/t)+1,$c={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*br)+1,easeOutSine:n=>Math.sin(n*br),easeInOutSine:n=>-.5*(Math.cos(dn*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>cd(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>cd(n)?n:sE(n,.075,.3),easeOutElastic:n=>cd(n)?n:oE(n,.075,.3),easeInOutElastic(n){return cd(n)?n:n<.5?.5*sE(n*2,.1125,.45):.5+.5*oE(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-$c.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?$c.easeInBounce(n*2)*.5:$c.easeOutBounce(n*2-1)*.5+.5};function y_(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function aE(n){return y_(n)?n:new lu(n)}function Zm(n){return y_(n)?n:new lu(n).saturate(.5).darken(.1).hexString()}const iF=["x","y","borderWidth","radius","tension"],sF=["color","borderColor","backgroundColor"];function oF(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:sF},numbers:{type:"number",properties:iF}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function aF(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const lE=new Map;function lF(n,e){e=e||{};const t=n+JSON.stringify(e);let r=lE.get(t);return r||(r=new Intl.NumberFormat(n,e),lE.set(t,r)),r}function jS(n,e,t){return lF(e,t).format(n)}const cF={values(n){return Zt(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const r=this.chart.options.locale;let i,o=n;if(t.length>1){const f=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(f<1e-4||f>1e15)&&(i="scientific"),o=uF(n,t)}const l=OS(Math.abs(o)),c=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),h={notation:i,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(h,this.options.ticks.format),jS(n,r,h)}};function uF(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var US={formatters:cF};function hF(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:US.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Fo=Object.create(null),Yg=Object.create(null);function Hc(n,e){if(!e)return n;const t=e.split(".");for(let r=0,i=t.length;r<i;++r){const o=t[r];n=n[o]||(n[o]=Object.create(null))}return n}function eg(n,e,t){return typeof e=="string"?cu(Hc(n,e),t):cu(Hc(n,""),e)}class dF{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>Zm(i.backgroundColor),this.hoverBorderColor=(r,i)=>Zm(i.borderColor),this.hoverColor=(r,i)=>Zm(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return eg(this,e,t)}get(e){return Hc(this,e)}describe(e,t){return eg(Yg,e,t)}override(e,t){return eg(Fo,e,t)}route(e,t,r,i){const o=Hc(this,e),l=Hc(this,r),c="_"+t;Object.defineProperties(o,{[c]:{value:o[t],writable:!0},[t]:{enumerable:!0,get(){const h=this[c],f=l[i];return Ye(h)?Object.assign({},f,h):He(h,f)},set(h){this[c]=h}}})}apply(e){e.forEach(t=>t(this))}}var Et=new dF({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[oF,aF,hF]);function fF(n){return!n||lt(n.size)||lt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function cE(n,e,t,r,i){let o=e[i];return o||(o=e[i]=n.measureText(i).width,t.push(i)),o>r&&(r=o),r}function _o(n,e,t){const r=n.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*r)/r+i}function uE(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function Gg(n,e,t,r){zS(n,e,t,r,null)}function zS(n,e,t,r,i){let o,l,c,h,f,m,y,w;const T=e.pointStyle,I=e.rotation,k=e.radius;let b=(I||0)*zV;if(T&&typeof T=="object"&&(o=T.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(t,r),n.rotate(b),n.drawImage(T,-T.width/2,-T.height/2,T.width,T.height),n.restore();return}if(!(isNaN(k)||k<=0)){switch(n.beginPath(),T){default:i?n.ellipse(t,r,i/2,k,0,0,ni):n.arc(t,r,k,0,ni),n.closePath();break;case"triangle":m=i?i/2:k,n.moveTo(t+Math.sin(b)*m,r-Math.cos(b)*k),b+=tE,n.lineTo(t+Math.sin(b)*m,r-Math.cos(b)*k),b+=tE,n.lineTo(t+Math.sin(b)*m,r-Math.cos(b)*k),n.closePath();break;case"rectRounded":f=k*.516,h=k-f,l=Math.cos(b+yo)*h,y=Math.cos(b+yo)*(i?i/2-f:h),c=Math.sin(b+yo)*h,w=Math.sin(b+yo)*(i?i/2-f:h),n.arc(t-y,r-c,f,b-dn,b-br),n.arc(t+w,r-l,f,b-br,b),n.arc(t+y,r+c,f,b,b+br),n.arc(t-w,r+l,f,b+br,b+dn),n.closePath();break;case"rect":if(!I){h=Math.SQRT1_2*k,m=i?i/2:h,n.rect(t-m,r-h,2*m,2*h);break}b+=yo;case"rectRot":y=Math.cos(b)*(i?i/2:k),l=Math.cos(b)*k,c=Math.sin(b)*k,w=Math.sin(b)*(i?i/2:k),n.moveTo(t-y,r-c),n.lineTo(t+w,r-l),n.lineTo(t+y,r+c),n.lineTo(t-w,r+l),n.closePath();break;case"crossRot":b+=yo;case"cross":y=Math.cos(b)*(i?i/2:k),l=Math.cos(b)*k,c=Math.sin(b)*k,w=Math.sin(b)*(i?i/2:k),n.moveTo(t-y,r-c),n.lineTo(t+y,r+c),n.moveTo(t+w,r-l),n.lineTo(t-w,r+l);break;case"star":y=Math.cos(b)*(i?i/2:k),l=Math.cos(b)*k,c=Math.sin(b)*k,w=Math.sin(b)*(i?i/2:k),n.moveTo(t-y,r-c),n.lineTo(t+y,r+c),n.moveTo(t+w,r-l),n.lineTo(t-w,r+l),b+=yo,y=Math.cos(b)*(i?i/2:k),l=Math.cos(b)*k,c=Math.sin(b)*k,w=Math.sin(b)*(i?i/2:k),n.moveTo(t-y,r-c),n.lineTo(t+y,r+c),n.moveTo(t+w,r-l),n.lineTo(t-w,r+l);break;case"line":l=i?i/2:Math.cos(b)*k,c=Math.sin(b)*k,n.moveTo(t-l,r-c),n.lineTo(t+l,r+c);break;case"dash":n.moveTo(t,r),n.lineTo(t+Math.cos(b)*(i?i/2:k),r+Math.sin(b)*k);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function hu(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function __(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function v_(n){n.restore()}function pF(n,e,t,r,i){if(!e)return n.lineTo(t.x,t.y);if(i==="middle"){const o=(e.x+t.x)/2;n.lineTo(o,e.y),n.lineTo(o,t.y)}else i==="after"!=!!r?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function mF(n,e,t,r){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function gF(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),lt(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function yF(n,e,t,r,i){if(i.strikethrough||i.underline){const o=n.measureText(r),l=e-o.actualBoundingBoxLeft,c=e+o.actualBoundingBoxRight,h=t-o.actualBoundingBoxAscent,f=t+o.actualBoundingBoxDescent,m=i.strikethrough?(h+f)/2:f;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(l,m),n.lineTo(c,m),n.stroke()}}function _F(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function pf(n,e,t,r,i,o={}){const l=Zt(e)?e:[e],c=o.strokeWidth>0&&o.strokeColor!=="";let h,f;for(n.save(),n.font=i.string,gF(n,o),h=0;h<l.length;++h)f=l[h],o.backdrop&&_F(n,o.backdrop),c&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),lt(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(f,t,r,o.maxWidth)),n.fillText(f,t,r,o.maxWidth),yF(n,t,r,f,o),r+=Number(i.lineHeight);n.restore()}function Kg(n,e){const{x:t,y:r,w:i,h:o,radius:l}=e;n.arc(t+l.topLeft,r+l.topLeft,l.topLeft,1.5*dn,dn,!0),n.lineTo(t,r+o-l.bottomLeft),n.arc(t+l.bottomLeft,r+o-l.bottomLeft,l.bottomLeft,dn,br,!0),n.lineTo(t+i-l.bottomRight,r+o),n.arc(t+i-l.bottomRight,r+o-l.bottomRight,l.bottomRight,br,0,!0),n.lineTo(t+i,r+l.topRight),n.arc(t+i-l.topRight,r+l.topRight,l.topRight,0,-br,!0),n.lineTo(t+l.topLeft,r)}const vF=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,wF=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function xF(n,e){const t=(""+n).match(vF);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const EF=n=>+n||0;function BS(n,e){const t={},r=Ye(e),i=r?Object.keys(e):e,o=Ye(n)?r?l=>He(n[l],n[e[l]]):l=>n[l]:()=>n;for(const l of i)t[l]=EF(o(l));return t}function bF(n){return BS(n,{top:"y",right:"x",bottom:"y",left:"x"})}function qc(n){return BS(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Pr(n){const e=bF(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Rn(n,e){n=n||{},e=e||Et.font;let t=He(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let r=He(n.style,e.style);r&&!(""+r).match(wF)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:He(n.family,e.family),lineHeight:xF(He(n.lineHeight,e.lineHeight),t),size:t,style:r,weight:He(n.weight,e.weight),string:""};return i.string=fF(i),i}function ud(n,e,t,r){let i,o,l;for(i=0,o=n.length;i<o;++i)if(l=n[i],l!==void 0&&l!==void 0)return l}function TF(n,e,t){const{min:r,max:i}=n,o=MV(e,(i-r)/2),l=(c,h)=>t&&c===0?0:c+h;return{min:l(r,-Math.abs(o)),max:l(i,o)}}function Wo(n,e){return Object.assign(Object.create(n),e)}function w_(n,e=[""],t,r,i=()=>n[0]){const o=t||n;typeof r>"u"&&(r=qS("_fallback",n));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:r,_getTarget:i,override:c=>w_([c,...n],e,o,r)};return new Proxy(l,{deleteProperty(c,h){return delete c[h],delete c._keys,delete n[0][h],!0},get(c,h){return $S(c,h,()=>DF(h,e,n,c))},getOwnPropertyDescriptor(c,h){return Reflect.getOwnPropertyDescriptor(c._scopes[0],h)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(c,h){return dE(c).includes(h)},ownKeys(c){return dE(c)},set(c,h,f){const m=c._storage||(c._storage=i());return c[h]=m[h]=f,delete c._keys,!0}})}function il(n,e,t,r){const i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:WS(n,r),setContext:o=>il(n,o,t,r),override:o=>il(n.override(o),e,t,r)};return new Proxy(i,{deleteProperty(o,l){return delete o[l],delete n[l],!0},get(o,l,c){return $S(o,l,()=>IF(o,l,c))},getOwnPropertyDescriptor(o,l){return o._descriptors.allKeys?Reflect.has(n,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,l)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,l){return Reflect.has(n,l)},ownKeys(){return Reflect.ownKeys(n)},set(o,l,c){return n[l]=c,delete o[l],!0}})}function WS(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:r,isScriptable:Os(t)?t:()=>t,isIndexable:Os(r)?r:()=>r}}const SF=(n,e)=>n?n+m_(e):e,x_=(n,e)=>Ye(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function $S(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const r=t();return n[e]=r,r}function IF(n,e,t){const{_proxy:r,_context:i,_subProxy:o,_descriptors:l}=n;let c=r[e];return Os(c)&&l.isScriptable(e)&&(c=kF(e,c,n,t)),Zt(c)&&c.length&&(c=PF(e,c,n,l.isIndexable)),x_(e,c)&&(c=il(c,i,o&&o[e],l)),c}function kF(n,e,t,r){const{_proxy:i,_context:o,_subProxy:l,_stack:c}=t;if(c.has(n))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+n);c.add(n);let h=e(o,l||r);return c.delete(n),x_(n,h)&&(h=E_(i._scopes,i,n,h)),h}function PF(n,e,t,r){const{_proxy:i,_context:o,_subProxy:l,_descriptors:c}=t;if(typeof o.index<"u"&&r(n))return e[o.index%e.length];if(Ye(e[0])){const h=e,f=i._scopes.filter(m=>m!==h);e=[];for(const m of h){const y=E_(f,i,n,m);e.push(il(y,o,l&&l[n],c))}}return e}function HS(n,e,t){return Os(n)?n(e,t):n}const CF=(n,e)=>n===!0?e:typeof n=="string"?hf(e,n):void 0;function AF(n,e,t,r,i){for(const o of e){const l=CF(t,o);if(l){n.add(l);const c=HS(l._fallback,t,i);if(typeof c<"u"&&c!==t&&c!==r)return c}else if(l===!1&&typeof r<"u"&&t!==r)return null}return!1}function E_(n,e,t,r){const i=e._rootScopes,o=HS(e._fallback,t,r),l=[...n,...i],c=new Set;c.add(r);let h=hE(c,l,t,o||t,r);return h===null||typeof o<"u"&&o!==t&&(h=hE(c,l,o,h,r),h===null)?!1:w_(Array.from(c),[""],i,o,()=>RF(e,t,r))}function hE(n,e,t,r,i){for(;t;)t=AF(n,e,t,r,i);return t}function RF(n,e,t){const r=n._getTarget();e in r||(r[e]={});const i=r[e];return Zt(i)&&Ye(t)?t:i||{}}function DF(n,e,t,r){let i;for(const o of e)if(i=qS(SF(o,n),t),typeof i<"u")return x_(n,i)?E_(t,r,n,i):i}function qS(n,e){for(const t of e){if(!t)continue;const r=t[n];if(typeof r<"u")return r}}function dE(n){let e=n._keys;return e||(e=n._keys=OF(n._scopes)),e}function OF(n){const e=new Set;for(const t of n)for(const r of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const MF=Number.EPSILON||1e-14,sl=(n,e)=>e<n.length&&!n[e].skip&&n[e],YS=n=>n==="x"?"y":"x";function NF(n,e,t,r){const i=n.skip?e:n,o=e,l=t.skip?e:t,c=qg(o,i),h=qg(l,o);let f=c/(c+h),m=h/(c+h);f=isNaN(f)?0:f,m=isNaN(m)?0:m;const y=r*f,w=r*m;return{previous:{x:o.x-y*(l.x-i.x),y:o.y-y*(l.y-i.y)},next:{x:o.x+w*(l.x-i.x),y:o.y+w*(l.y-i.y)}}}function LF(n,e,t){const r=n.length;let i,o,l,c,h,f=sl(n,0);for(let m=0;m<r-1;++m)if(h=f,f=sl(n,m+1),!(!h||!f)){if(Wc(e[m],0,MF)){t[m]=t[m+1]=0;continue}i=t[m]/e[m],o=t[m+1]/e[m],c=Math.pow(i,2)+Math.pow(o,2),!(c<=9)&&(l=3/Math.sqrt(c),t[m]=i*l*e[m],t[m+1]=o*l*e[m])}}function VF(n,e,t="x"){const r=YS(t),i=n.length;let o,l,c,h=sl(n,0);for(let f=0;f<i;++f){if(l=c,c=h,h=sl(n,f+1),!c)continue;const m=c[t],y=c[r];l&&(o=(m-l[t])/3,c[`cp1${t}`]=m-o,c[`cp1${r}`]=y-o*e[f]),h&&(o=(h[t]-m)/3,c[`cp2${t}`]=m+o,c[`cp2${r}`]=y+o*e[f])}}function FF(n,e="x"){const t=YS(e),r=n.length,i=Array(r).fill(0),o=Array(r);let l,c,h,f=sl(n,0);for(l=0;l<r;++l)if(c=h,h=f,f=sl(n,l+1),!!h){if(f){const m=f[e]-h[e];i[l]=m!==0?(f[t]-h[t])/m:0}o[l]=c?f?rl(i[l-1])!==rl(i[l])?0:(i[l-1]+i[l])/2:i[l-1]:i[l]}LF(n,i,o),VF(n,o,e)}function hd(n,e,t){return Math.max(Math.min(n,t),e)}function jF(n,e){let t,r,i,o,l,c=hu(n[0],e);for(t=0,r=n.length;t<r;++t)l=o,o=c,c=t<r-1&&hu(n[t+1],e),o&&(i=n[t],l&&(i.cp1x=hd(i.cp1x,e.left,e.right),i.cp1y=hd(i.cp1y,e.top,e.bottom)),c&&(i.cp2x=hd(i.cp2x,e.left,e.right),i.cp2y=hd(i.cp2y,e.top,e.bottom)))}function UF(n,e,t,r,i){let o,l,c,h;if(e.spanGaps&&(n=n.filter(f=>!f.skip)),e.cubicInterpolationMode==="monotone")FF(n,i);else{let f=r?n[n.length-1]:n[0];for(o=0,l=n.length;o<l;++o)c=n[o],h=NF(f,c,n[Math.min(o+1,l-(r?0:1))%l],e.tension),c.cp1x=h.previous.x,c.cp1y=h.previous.y,c.cp2x=h.next.x,c.cp2y=h.next.y,f=c}e.capBezierPoints&&jF(n,t)}function b_(){return typeof window<"u"&&typeof document<"u"}function T_(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function mf(n,e,t){let r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!==-1&&(r=r/100*e.parentNode[t])):r=n,r}const Kf=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function zF(n,e){return Kf(n).getPropertyValue(e)}const BF=["top","right","bottom","left"];function Ao(n,e,t){const r={};t=t?"-"+t:"";for(let i=0;i<4;i++){const o=BF[i];r[o]=parseFloat(n[e+"-"+o+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const WF=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function $F(n,e){const t=n.touches,r=t&&t.length?t[0]:n,{offsetX:i,offsetY:o}=r;let l=!1,c,h;if(WF(i,o,n.target))c=i,h=o;else{const f=e.getBoundingClientRect();c=r.clientX-f.left,h=r.clientY-f.top,l=!0}return{x:c,y:h,box:l}}function xo(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:r}=e,i=Kf(t),o=i.boxSizing==="border-box",l=Ao(i,"padding"),c=Ao(i,"border","width"),{x:h,y:f,box:m}=$F(n,t),y=l.left+(m&&c.left),w=l.top+(m&&c.top);let{width:T,height:I}=e;return o&&(T-=l.width+c.width,I-=l.height+c.height),{x:Math.round((h-y)/T*t.width/r),y:Math.round((f-w)/I*t.height/r)}}function HF(n,e,t){let r,i;if(e===void 0||t===void 0){const o=n&&T_(n);if(!o)e=n.clientWidth,t=n.clientHeight;else{const l=o.getBoundingClientRect(),c=Kf(o),h=Ao(c,"border","width"),f=Ao(c,"padding");e=l.width-f.width-h.width,t=l.height-f.height-h.height,r=mf(c.maxWidth,o,"clientWidth"),i=mf(c.maxHeight,o,"clientHeight")}}return{width:e,height:t,maxWidth:r||ff,maxHeight:i||ff}}const dd=n=>Math.round(n*10)/10;function qF(n,e,t,r){const i=Kf(n),o=Ao(i,"margin"),l=mf(i.maxWidth,n,"clientWidth")||ff,c=mf(i.maxHeight,n,"clientHeight")||ff,h=HF(n,e,t);let{width:f,height:m}=h;if(i.boxSizing==="content-box"){const w=Ao(i,"border","width"),T=Ao(i,"padding");f-=T.width+w.width,m-=T.height+w.height}return f=Math.max(0,f-o.width),m=Math.max(0,r?f/r:m-o.height),f=dd(Math.min(f,l,h.maxWidth)),m=dd(Math.min(m,c,h.maxHeight)),f&&!m&&(m=dd(f/2)),(e!==void 0||t!==void 0)&&r&&h.height&&m>h.height&&(m=h.height,f=dd(Math.floor(m*r))),{width:f,height:m}}function fE(n,e,t){const r=e||1,i=Math.floor(n.height*r),o=Math.floor(n.width*r);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const l=n.canvas;return l.style&&(t||!l.style.height&&!l.style.width)&&(l.style.height=`${n.height}px`,l.style.width=`${n.width}px`),n.currentDevicePixelRatio!==r||l.height!==i||l.width!==o?(n.currentDevicePixelRatio=r,l.height=i,l.width=o,n.ctx.setTransform(r,0,0,r,0,0),!0):!1}const YF=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};b_()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function pE(n,e){const t=zF(n,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Eo(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function GF(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:r==="middle"?t<.5?n.y:e.y:r==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function KF(n,e,t,r){const i={x:n.cp2x,y:n.cp2y},o={x:e.cp1x,y:e.cp1y},l=Eo(n,i,t),c=Eo(i,o,t),h=Eo(o,e,t),f=Eo(l,c,t),m=Eo(c,h,t);return Eo(f,m,t)}const QF=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,r){return t-r},leftForLtr(t,r){return t-r}}},XF=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Qa(n,e,t){return n?QF(e,t):XF()}function GS(n,e){let t,r;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=r)}function KS(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function QS(n){return n==="angle"?{between:MS,compare:GV,normalize:us}:{between:Oc,compare:(e,t)=>e-t,normalize:e=>e}}function mE({start:n,end:e,count:t,loop:r,style:i}){return{start:n%t,end:e%t,loop:r&&(e-n+1)%t===0,style:i}}function JF(n,e,t){const{property:r,start:i,end:o}=t,{between:l,normalize:c}=QS(r),h=e.length;let{start:f,end:m,loop:y}=n,w,T;if(y){for(f+=h,m+=h,w=0,T=h;w<T&&l(c(e[f%h][r]),i,o);++w)f--,m--;f%=h,m%=h}return m<f&&(m+=h),{start:f,end:m,loop:y,style:n.style}}function ZF(n,e,t){if(!t)return[n];const{property:r,start:i,end:o}=t,l=e.length,{compare:c,between:h,normalize:f}=QS(r),{start:m,end:y,loop:w,style:T}=JF(n,e,t),I=[];let k=!1,b=null,N,z,$;const te=()=>h(i,$,N)&&c(i,$)!==0,Q=()=>c(o,N)===0||h(o,$,N),ie=()=>k||te(),D=()=>!k||Q();for(let P=m,A=m;P<=y;++P)z=e[P%l],!z.skip&&(N=f(z[r]),N!==$&&(k=h(N,i,o),b===null&&ie()&&(b=c(N,i)===0?P:A),b!==null&&D()&&(I.push(mE({start:b,end:P,loop:w,count:l,style:T})),b=null),A=P,$=N));return b!==null&&I.push(mE({start:b,end:y,loop:w,count:l,style:T})),I}function ej(n,e){const t=[],r=n.segments;for(let i=0;i<r.length;i++){const o=ZF(r[i],n.points,e);o.length&&t.push(...o)}return t}function tj(n,e,t,r){let i=0,o=e-1;if(t&&!r)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(o+=i);o>i&&n[o%e].skip;)o--;return o%=e,{start:i,end:o}}function nj(n,e,t,r){const i=n.length,o=[];let l=e,c=n[e],h;for(h=e+1;h<=t;++h){const f=n[h%i];f.skip||f.stop?c.skip||(r=!1,o.push({start:e%i,end:(h-1)%i,loop:r}),e=l=f.stop?h:null):(l=h,c.skip&&(e=h)),c=f}return l!==null&&o.push({start:e%i,end:l%i,loop:r}),o}function rj(n,e){const t=n.points,r=n.options.spanGaps,i=t.length;if(!i)return[];const o=!!n._loop,{start:l,end:c}=tj(t,i,o,r);if(r===!0)return gE(n,[{start:l,end:c,loop:o}],t,e);const h=c<l?c+i:c,f=!!n._fullLoop&&l===0&&c===i-1;return gE(n,nj(t,l,h,f),t,e)}function gE(n,e,t,r){return!r||!r.setContext||!t?e:ij(n,e,t,r)}function ij(n,e,t,r){const i=n._chart.getContext(),o=yE(n.options),{_datasetIndex:l,options:{spanGaps:c}}=n,h=t.length,f=[];let m=o,y=e[0].start,w=y;function T(I,k,b,N){const z=c?-1:1;if(I!==k){for(I+=h;t[I%h].skip;)I-=z;for(;t[k%h].skip;)k+=z;I%h!==k%h&&(f.push({start:I%h,end:k%h,loop:b,style:N}),m=N,y=k%h)}}for(const I of e){y=c?y:I.start;let k=t[y%h],b;for(w=y+1;w<=I.end;w++){const N=t[w%h];b=yE(r.setContext(Wo(i,{type:"segment",p0:k,p1:N,p0DataIndex:(w-1)%h,p1DataIndex:w%h,datasetIndex:l}))),sj(b,m)&&T(y,w-1,I.loop,m),k=N,m=b}y<w-1&&T(y,w-1,I.loop,m)}return f}function yE(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function sj(n,e){if(!e)return!1;const t=[],r=function(i,o){return y_(o)?(t.includes(o)||t.push(o),t.indexOf(o)):o};return JSON.stringify(n,r)!==JSON.stringify(e,r)}function fd(n,e,t){return n.options.clip?n[t]:e[t]}function oj(n,e){const{xScale:t,yScale:r}=n;return t&&r?{left:fd(t,e,"left"),right:fd(t,e,"right"),top:fd(r,e,"top"),bottom:fd(r,e,"bottom")}:e}function aj(n,e){const t=e._clip;if(t.disabled)return!1;const r=oj(e,n.chartArea);return{left:t.left===!1?0:r.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:r.right+(t.right===!0?0:t.right),top:t.top===!1?0:r.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:r.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class lj{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,i){const o=t.listeners[i],l=t.duration;o.forEach(c=>c({chart:e,initial:t.initial,numSteps:l,currentStep:Math.min(r-t.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=LS.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const o=r.items;let l=o.length-1,c=!1,h;for(;l>=0;--l)h=o[l],h._active?(h._total>r.duration&&(r.duration=h._total),h.tick(e),c=!0):(o[l]=o[o.length-1],o.pop());c&&(i.draw(),this._notify(i,r,e,"progress")),o.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),t+=o.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var bi=new lj;const _E="transparent",cj={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const r=aE(n||_E),i=r.valid&&aE(e||_E);return i&&i.valid?i.mix(r,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class uj{constructor(e,t,r,i){const o=t[r];i=ud([e.to,i,o,e.from]);const l=ud([e.from,o,i]);this._active=!0,this._fn=e.fn||cj[e.type||typeof l],this._easing=$c[e.easing]||$c.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=l,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const i=this._target[this._prop],o=r-this._start,l=this._duration-o;this._start=r,this._duration=Math.floor(Math.max(l,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=ud([e.to,t,i,e.from]),this._from=ud([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,i=this._prop,o=this._from,l=this._loop,c=this._to;let h;if(this._active=o!==c&&(l||t<r),!this._active){this._target[i]=c,this._notify(!0);return}if(t<0){this._target[i]=o;return}h=t/r%2,h=l&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[i]=this._fn(o,c,h)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}}class XS{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Ye(e))return;const t=Object.keys(Et.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const o=e[i];if(!Ye(o))return;const l={};for(const c of t)l[c]=o[c];(Zt(o.properties)&&o.properties||[i]).forEach(c=>{(c===i||!r.has(c))&&r.set(c,l)})})}_animateOptions(e,t){const r=t.options,i=dj(e,r);if(!i)return[];const o=this._createAnimations(i,r);return r.$shared&&hj(e.options.$animations,r).then(()=>{e.options=r},()=>{}),o}_createAnimations(e,t){const r=this._properties,i=[],o=e.$animations||(e.$animations={}),l=Object.keys(t),c=Date.now();let h;for(h=l.length-1;h>=0;--h){const f=l[h];if(f.charAt(0)==="$")continue;if(f==="options"){i.push(...this._animateOptions(e,t));continue}const m=t[f];let y=o[f];const w=r.get(f);if(y)if(w&&y.active()){y.update(w,m,c);continue}else y.cancel();if(!w||!w.duration){e[f]=m;continue}o[f]=y=new uj(w,e,f,m),i.push(y)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const r=this._createAnimations(e,t);if(r.length)return bi.add(this._chart,r),!0}}function hj(n,e){const t=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const o=n[r[i]];o&&o.active()&&t.push(o.wait())}return Promise.all(t)}function dj(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function vE(n,e){const t=n&&n.options||{},r=t.reverse,i=t.min===void 0?e:0,o=t.max===void 0?e:0;return{start:r?o:i,end:r?i:o}}function fj(n,e,t){if(t===!1)return!1;const r=vE(n,t),i=vE(e,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function pj(n){let e,t,r,i;return Ye(n)?(e=n.top,t=n.right,r=n.bottom,i=n.left):e=t=r=i=n,{top:e,right:t,bottom:r,left:i,disabled:n===!1}}function JS(n,e){const t=[],r=n._getSortedDatasetMetas(e);let i,o;for(i=0,o=r.length;i<o;++i)t.push(r[i].index);return t}function wE(n,e,t,r={}){const i=n.keys,o=r.mode==="single";let l,c,h,f;if(e===null)return;let m=!1;for(l=0,c=i.length;l<c;++l){if(h=+i[l],h===t){if(m=!0,r.all)continue;break}f=n.values[h],sr(f)&&(o||e===0||rl(e)===rl(f))&&(e+=f)}return!m&&!r.all?0:e}function mj(n,e){const{iScale:t,vScale:r}=e,i=t.axis==="x"?"x":"y",o=r.axis==="x"?"x":"y",l=Object.keys(n),c=new Array(l.length);let h,f,m;for(h=0,f=l.length;h<f;++h)m=l[h],c[h]={[i]:m,[o]:n[m]};return c}function tg(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function gj(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function yj(n){const{min:e,max:t,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function _j(n,e,t){const r=n[e]||(n[e]={});return r[t]||(r[t]={})}function xE(n,e,t,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const o=n[i.index];if(t&&o>0||!t&&o<0)return i.index}return null}function EE(n,e){const{chart:t,_cachedMeta:r}=n,i=t._stacks||(t._stacks={}),{iScale:o,vScale:l,index:c}=r,h=o.axis,f=l.axis,m=gj(o,l,r),y=e.length;let w;for(let T=0;T<y;++T){const I=e[T],{[h]:k,[f]:b}=I,N=I._stacks||(I._stacks={});w=N[f]=_j(i,m,k),w[c]=b,w._top=xE(w,l,!0,r.type),w._bottom=xE(w,l,!1,r.type);const z=w._visualValues||(w._visualValues={});z[c]=b}}function ng(n,e){const t=n.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function vj(n,e){return Wo(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function wj(n,e,t){return Wo(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function yc(n,e){const t=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){e=e||n._parsed;for(const i of e){const o=i._stacks;if(!o||o[r]===void 0||o[r][t]===void 0)return;delete o[r][t],o[r]._visualValues!==void 0&&o[r]._visualValues[t]!==void 0&&delete o[r]._visualValues[t]}}}const rg=n=>n==="reset"||n==="none",bE=(n,e)=>e?n:Object.assign({},n),xj=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:JS(t,!0),values:null};class ZS{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=tg(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&yc(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,r=this.getDataset(),i=(y,w,T,I)=>y==="x"?w:y==="r"?I:T,o=t.xAxisID=He(r.xAxisID,ng(e,"x")),l=t.yAxisID=He(r.yAxisID,ng(e,"y")),c=t.rAxisID=He(r.rAxisID,ng(e,"r")),h=t.indexAxis,f=t.iAxisID=i(h,o,l,c),m=t.vAxisID=i(h,l,o,c);t.xScale=this.getScaleForId(o),t.yScale=this.getScaleForId(l),t.rScale=this.getScaleForId(c),t.iScale=this.getScaleForId(f),t.vScale=this.getScaleForId(m)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&iE(this._data,this),e._stacked&&yc(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),r=this._data;if(Ye(t)){const i=this._cachedMeta;this._data=mj(t,i)}else if(r!==t){if(r){iE(r,this);const i=this._cachedMeta;yc(i),i._parsed=[]}t&&Object.isExtensible(t)&&JV(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const o=t._stacked;t._stacked=tg(t.vScale,t),t.stack!==r.stack&&(i=!0,yc(t),t.stack=r.stack),this._resyncElements(e),(i||o!==t._stacked)&&(EE(this,t._parsed),t._stacked=tg(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:r,_data:i}=this,{iScale:o,_stacked:l}=r,c=o.axis;let h=e===0&&t===i.length?!0:r._sorted,f=e>0&&r._parsed[e-1],m,y,w;if(this._parsing===!1)r._parsed=i,r._sorted=!0,w=i;else{Zt(i[e])?w=this.parseArrayData(r,i,e,t):Ye(i[e])?w=this.parseObjectData(r,i,e,t):w=this.parsePrimitiveData(r,i,e,t);const T=()=>y[c]===null||f&&y[c]<f[c];for(m=0;m<t;++m)r._parsed[m+e]=y=w[m],h&&(T()&&(h=!1),f=y);r._sorted=h}l&&EE(this,w)}parsePrimitiveData(e,t,r,i){const{iScale:o,vScale:l}=e,c=o.axis,h=l.axis,f=o.getLabels(),m=o===l,y=new Array(i);let w,T,I;for(w=0,T=i;w<T;++w)I=w+r,y[w]={[c]:m||o.parse(f[I],I),[h]:l.parse(t[I],I)};return y}parseArrayData(e,t,r,i){const{xScale:o,yScale:l}=e,c=new Array(i);let h,f,m,y;for(h=0,f=i;h<f;++h)m=h+r,y=t[m],c[h]={x:o.parse(y[0],m),y:l.parse(y[1],m)};return c}parseObjectData(e,t,r,i){const{xScale:o,yScale:l}=e,{xAxisKey:c="x",yAxisKey:h="y"}=this._parsing,f=new Array(i);let m,y,w,T;for(m=0,y=i;m<y;++m)w=m+r,T=t[w],f[m]={x:o.parse(hf(T,c),w),y:l.parse(hf(T,h),w)};return f}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,r){const i=this.chart,o=this._cachedMeta,l=t[e.axis],c={keys:JS(i,!0),values:t._stacks[e.axis]._visualValues};return wE(c,l,o.index,{mode:r})}updateRangeFromParsed(e,t,r,i){const o=r[t.axis];let l=o===null?NaN:o;const c=i&&r._stacks[t.axis];i&&c&&(i.values=c,l=wE(i,o,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,t){const r=this._cachedMeta,i=r._parsed,o=r._sorted&&e===r.iScale,l=i.length,c=this._getOtherScale(e),h=xj(t,r,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:m,max:y}=yj(c);let w,T;function I(){T=i[w];const k=T[c.axis];return!sr(T[e.axis])||m>k||y<k}for(w=0;w<l&&!(!I()&&(this.updateRangeFromParsed(f,e,T,h),o));++w);if(o){for(w=l-1;w>=0;--w)if(!I()){this.updateRangeFromParsed(f,e,T,h);break}}return f}getAllParsedValues(e){const t=this._cachedMeta._parsed,r=[];let i,o,l;for(i=0,o=t.length;i<o;++i)l=t[i][e.axis],sr(l)&&r.push(l);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,r=t.iScale,i=t.vScale,o=this.getParsed(e);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:i?""+i.getLabelForValue(o[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=pj(He(this.options.clip,fj(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,r=this._cachedMeta,i=r.data||[],o=t.chartArea,l=[],c=this._drawStart||0,h=this._drawCount||i.length-c,f=this.options.drawActiveElementsOnTop;let m;for(r.dataset&&r.dataset.draw(e,o,c,h),m=c;m<c+h;++m){const y=i[m];y.hidden||(y.active&&f?l.push(y):y.draw(e,o))}for(m=0;m<l.length;++m)l[m].draw(e,o)}getStyle(e,t){const r=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,t,r){const i=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const l=this._cachedMeta.data[e];o=l.$context||(l.$context=wj(this.getContext(),e,l)),o.parsed=this.getParsed(e),o.raw=i.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=vj(this.chart.getContext(),this.index)),o.dataset=i,o.index=o.datasetIndex=this.index;return o.active=!!t,o.mode=r,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",r){const i=t==="active",o=this._cachedDataOpts,l=e+"-"+t,c=o[l],h=this.enableOptionSharing&&df(r);if(c)return bE(c,h);const f=this.chart.config,m=f.datasetElementScopeKeys(this._type,e),y=i?[`${e}Hover`,"hover",e,""]:[e,""],w=f.getOptionScopes(this.getDataset(),m),T=Object.keys(Et.elements[e]),I=()=>this.getContext(r,i,t),k=f.resolveNamedOptions(w,T,I,y);return k.$shared&&(k.$shared=h,o[l]=Object.freeze(bE(k,h))),k}_resolveAnimations(e,t,r){const i=this.chart,o=this._cachedDataOpts,l=`animation-${t}`,c=o[l];if(c)return c;let h;if(i.options.animation!==!1){const m=this.chart.config,y=m.datasetAnimationScopeKeys(this._type,t),w=m.getOptionScopes(this.getDataset(),y);h=m.createResolver(w,this.getContext(e,r,t))}const f=new XS(i,h&&h.animations);return h&&h._cacheable&&(o[l]=Object.freeze(f)),f}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||rg(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const r=this.resolveDataElementOptions(e,t),i=this._sharedOptions,o=this.getSharedOptions(r),l=this.includeOptions(t,o)||o!==i;return this.updateSharedOptions(o,t,r),{sharedOptions:o,includeOptions:l}}updateElement(e,t,r,i){rg(i)?Object.assign(e,r):this._resolveAnimations(t,i).update(e,r)}updateSharedOptions(e,t,r){e&&!rg(t)&&this._resolveAnimations(void 0,t).update(e,r)}_setStyle(e,t,r,i){e.active=i;const o=this.getStyle(t,i);this._resolveAnimations(t,r,i).update(e,{options:!i&&this.getSharedOptions(o)||o})}removeHoverStyle(e,t,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,t,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,r=this._cachedMeta.data;for(const[c,h,f]of this._syncList)this[c](h,f);this._syncList=[];const i=r.length,o=t.length,l=Math.min(o,i);l&&this.parse(0,l),o>i?this._insertElements(i,o-i,e):o<i&&this._removeElements(o,i-o)}_insertElements(e,t,r=!0){const i=this._cachedMeta,o=i.data,l=e+t;let c;const h=f=>{for(f.length+=t,c=f.length-1;c>=l;c--)f[c]=f[c-t]};for(h(o),c=e;c<l;++c)o[c]=new this.dataElementType;this._parsing&&h(i._parsed),this.parse(e,t),r&&this.updateElements(o,e,t,"reset")}updateElements(e,t,r,i){}_removeElements(e,t){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,t);r._stacked&&yc(r,i)}r.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,r,i]=e;this[t](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class Ej extends ZS{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:r,data:i=[],_dataset:o}=t,l=this.chart._animationsDisabled;let{start:c,count:h}=nF(t,i,l);this._drawStart=c,this._drawCount=h,rF(t)&&(c=0,h=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=i;const f=this.resolveDatasetElementOptions(e);this.options.showLine||(f.borderWidth=0),f.segment=this.options.segment,this.updateElement(r,void 0,{animated:!l,options:f},e),this.updateElements(i,c,h,e)}updateElements(e,t,r,i){const o=i==="reset",{iScale:l,vScale:c,_stacked:h,_dataset:f}=this._cachedMeta,{sharedOptions:m,includeOptions:y}=this._getSharedOptions(t,i),w=l.axis,T=c.axis,{spanGaps:I,segment:k}=this.options,b=uu(I)?I:Number.POSITIVE_INFINITY,N=this.chart._animationsDisabled||o||i==="none",z=t+r,$=e.length;let te=t>0&&this.getParsed(t-1);for(let Q=0;Q<$;++Q){const ie=e[Q],D=N?ie:{};if(Q<t||Q>=z){D.skip=!0;continue}const P=this.getParsed(Q),A=lt(P[T]),V=D[w]=l.getPixelForValue(P[w],Q),L=D[T]=o||A?c.getBasePixel():c.getPixelForValue(h?this.applyStack(c,P,h):P[T],Q);D.skip=isNaN(V)||isNaN(L)||A,D.stop=Q>0&&Math.abs(P[w]-te[w])>b,k&&(D.parsed=P,D.raw=f.data[Q]),y&&(D.options=m||this.resolveDataElementOptions(Q,ie.active?"active":i)),N||this.updateElement(ie,Q,D,i),te=P}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,r=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const o=i[0].size(this.resolveDataElementOptions(0)),l=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,o,l)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function vo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class S_{static override(e){Object.assign(S_.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return vo()}parse(){return vo()}format(){return vo()}add(){return vo()}diff(){return vo()}startOf(){return vo()}endOf(){return vo()}}var eI={_date:S_};function bj(n,e,t,r){const{controller:i,data:o,_sorted:l}=n,c=i._cachedMeta.iScale,h=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(c&&e===c.axis&&e!=="r"&&l&&o.length){const f=c._reversePixels?QV:ko;if(r){if(i._sharedOptions){const m=o[0],y=typeof m.getRange=="function"&&m.getRange(e);if(y){const w=f(o,e,t-y),T=f(o,e,t+y);return{lo:w.lo,hi:T.hi}}}}else{const m=f(o,e,t);if(h){const{vScale:y}=i._cachedMeta,{_parsed:w}=n,T=w.slice(0,m.lo+1).reverse().findIndex(k=>!lt(k[y.axis]));m.lo-=Math.max(0,T);const I=w.slice(m.hi).findIndex(k=>!lt(k[y.axis]));m.hi+=Math.max(0,I)}return m}}return{lo:0,hi:o.length-1}}function Qf(n,e,t,r,i){const o=n.getSortedVisibleDatasetMetas(),l=t[e];for(let c=0,h=o.length;c<h;++c){const{index:f,data:m}=o[c],{lo:y,hi:w}=bj(o[c],e,l,i);for(let T=y;T<=w;++T){const I=m[T];I.skip||r(I,f,T)}}}function Tj(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(r,i){const o=e?Math.abs(r.x-i.x):0,l=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(l,2))}}function ig(n,e,t,r,i){const o=[];return!i&&!n.isPointInArea(e)||Qf(n,t,e,function(c,h,f){!i&&!hu(c,n.chartArea,0)||c.inRange(e.x,e.y,r)&&o.push({element:c,datasetIndex:h,index:f})},!0),o}function Sj(n,e,t,r){let i=[];function o(l,c,h){const{startAngle:f,endAngle:m}=l.getProps(["startAngle","endAngle"],r),{angle:y}=YV(l,{x:e.x,y:e.y});MS(y,f,m)&&i.push({element:l,datasetIndex:c,index:h})}return Qf(n,t,e,o),i}function Ij(n,e,t,r,i,o){let l=[];const c=Tj(t);let h=Number.POSITIVE_INFINITY;function f(m,y,w){const T=m.inRange(e.x,e.y,i);if(r&&!T)return;const I=m.getCenterPoint(i);if(!(!!o||n.isPointInArea(I))&&!T)return;const b=c(e,I);b<h?(l=[{element:m,datasetIndex:y,index:w}],h=b):b===h&&l.push({element:m,datasetIndex:y,index:w})}return Qf(n,t,e,f),l}function sg(n,e,t,r,i,o){return!o&&!n.isPointInArea(e)?[]:t==="r"&&!r?Sj(n,e,t,i):Ij(n,e,t,r,i,o)}function TE(n,e,t,r,i){const o=[],l=t==="x"?"inXRange":"inYRange";let c=!1;return Qf(n,t,e,(h,f,m)=>{h[l]&&h[l](e[t],i)&&(o.push({element:h,datasetIndex:f,index:m}),c=c||h.inRange(e.x,e.y,i))}),r&&!c?[]:o}var kj={modes:{index(n,e,t,r){const i=xo(e,n),o=t.axis||"x",l=t.includeInvisible||!1,c=t.intersect?ig(n,i,o,r,l):sg(n,i,o,!1,r,l),h=[];return c.length?(n.getSortedVisibleDatasetMetas().forEach(f=>{const m=c[0].index,y=f.data[m];y&&!y.skip&&h.push({element:y,datasetIndex:f.index,index:m})}),h):[]},dataset(n,e,t,r){const i=xo(e,n),o=t.axis||"xy",l=t.includeInvisible||!1;let c=t.intersect?ig(n,i,o,r,l):sg(n,i,o,!1,r,l);if(c.length>0){const h=c[0].datasetIndex,f=n.getDatasetMeta(h).data;c=[];for(let m=0;m<f.length;++m)c.push({element:f[m],datasetIndex:h,index:m})}return c},point(n,e,t,r){const i=xo(e,n),o=t.axis||"xy",l=t.includeInvisible||!1;return ig(n,i,o,r,l)},nearest(n,e,t,r){const i=xo(e,n),o=t.axis||"xy",l=t.includeInvisible||!1;return sg(n,i,o,t.intersect,r,l)},x(n,e,t,r){const i=xo(e,n);return TE(n,i,"x",t.intersect,r)},y(n,e,t,r){const i=xo(e,n);return TE(n,i,"y",t.intersect,r)}}};const tI=["left","top","right","bottom"];function _c(n,e){return n.filter(t=>t.pos===e)}function SE(n,e){return n.filter(t=>tI.indexOf(t.pos)===-1&&t.box.axis===e)}function vc(n,e){return n.sort((t,r)=>{const i=e?r:t,o=e?t:r;return i.weight===o.weight?i.index-o.index:i.weight-o.weight})}function Pj(n){const e=[];let t,r,i,o,l,c;for(t=0,r=(n||[]).length;t<r;++t)i=n[t],{position:o,options:{stack:l,stackWeight:c=1}}=i,e.push({index:t,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:l&&o+l,stackWeight:c});return e}function Cj(n){const e={};for(const t of n){const{stack:r,pos:i,stackWeight:o}=t;if(!r||!tI.includes(i))continue;const l=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=o}return e}function Aj(n,e){const t=Cj(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let o,l,c;for(o=0,l=n.length;o<l;++o){c=n[o];const{fullSize:h}=c.box,f=t[c.stack],m=f&&c.stackWeight/f.weight;c.horizontal?(c.width=m?m*r:h&&e.availableWidth,c.height=i):(c.width=r,c.height=m?m*i:h&&e.availableHeight)}return t}function Rj(n){const e=Pj(n),t=vc(e.filter(f=>f.box.fullSize),!0),r=vc(_c(e,"left"),!0),i=vc(_c(e,"right")),o=vc(_c(e,"top"),!0),l=vc(_c(e,"bottom")),c=SE(e,"x"),h=SE(e,"y");return{fullSize:t,leftAndTop:r.concat(o),rightAndBottom:i.concat(h).concat(l).concat(c),chartArea:_c(e,"chartArea"),vertical:r.concat(i).concat(h),horizontal:o.concat(l).concat(c)}}function IE(n,e,t,r){return Math.max(n[t],e[t])+Math.max(n[r],e[r])}function nI(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function Dj(n,e,t,r){const{pos:i,box:o}=t,l=n.maxPadding;if(!Ye(i)){t.size&&(n[i]-=t.size);const y=r[t.stack]||{size:0,count:1};y.size=Math.max(y.size,t.horizontal?o.height:o.width),t.size=y.size/y.count,n[i]+=t.size}o.getPadding&&nI(l,o.getPadding());const c=Math.max(0,e.outerWidth-IE(l,n,"left","right")),h=Math.max(0,e.outerHeight-IE(l,n,"top","bottom")),f=c!==n.w,m=h!==n.h;return n.w=c,n.h=h,t.horizontal?{same:f,other:m}:{same:m,other:f}}function Oj(n){const e=n.maxPadding;function t(r){const i=Math.max(e[r]-n[r],0);return n[r]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function Mj(n,e){const t=e.maxPadding;function r(i){const o={left:0,top:0,right:0,bottom:0};return i.forEach(l=>{o[l]=Math.max(e[l],t[l])}),o}return r(n?["left","right"]:["top","bottom"])}function Mc(n,e,t,r){const i=[];let o,l,c,h,f,m;for(o=0,l=n.length,f=0;o<l;++o){c=n[o],h=c.box,h.update(c.width||e.w,c.height||e.h,Mj(c.horizontal,e));const{same:y,other:w}=Dj(e,t,c,r);f|=y&&i.length,m=m||w,h.fullSize||i.push(c)}return f&&Mc(i,e,t,r)||m}function pd(n,e,t,r,i){n.top=t,n.left=e,n.right=e+r,n.bottom=t+i,n.width=r,n.height=i}function kE(n,e,t,r){const i=t.padding;let{x:o,y:l}=e;for(const c of n){const h=c.box,f=r[c.stack]||{placed:0,weight:1},m=c.stackWeight/f.weight||1;if(c.horizontal){const y=e.w*m,w=f.size||h.height;df(f.start)&&(l=f.start),h.fullSize?pd(h,i.left,l,t.outerWidth-i.right-i.left,w):pd(h,e.left+f.placed,l,y,w),f.start=l,f.placed+=y,l=h.bottom}else{const y=e.h*m,w=f.size||h.width;df(f.start)&&(o=f.start),h.fullSize?pd(h,o,i.top,w,t.outerHeight-i.bottom-i.top):pd(h,o,e.top+f.placed,w,y),f.start=o,f.placed+=y,o=h.right}}e.x=o,e.y=l}var _s={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,r){if(!n)return;const i=Pr(n.options.layout.padding),o=Math.max(e-i.width,0),l=Math.max(t-i.height,0),c=Rj(n.boxes),h=c.vertical,f=c.horizontal;Je(n.boxes,k=>{typeof k.beforeLayout=="function"&&k.beforeLayout()});const m=h.reduce((k,b)=>b.box.options&&b.box.options.display===!1?k:k+1,0)||1,y=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:o,availableHeight:l,vBoxMaxWidth:o/2/m,hBoxMaxHeight:l/2}),w=Object.assign({},i);nI(w,Pr(r));const T=Object.assign({maxPadding:w,w:o,h:l,x:i.left,y:i.top},i),I=Aj(h.concat(f),y);Mc(c.fullSize,T,y,I),Mc(h,T,y,I),Mc(f,T,y,I)&&Mc(h,T,y,I),Oj(T),kE(c.leftAndTop,T,y,I),T.x+=T.w,T.y+=T.h,kE(c.rightAndBottom,T,y,I),n.chartArea={left:T.left,top:T.top,right:T.left+T.w,bottom:T.top+T.h,height:T.h,width:T.w},Je(c.chartArea,k=>{const b=k.box;Object.assign(b,n.chartArea),b.update(T.w,T.h,{left:0,top:0,right:0,bottom:0})})}};class rI{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,i){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(e){return!0}updateConfig(e){}}class Nj extends rI{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Ld="$chartjs",Lj={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},PE=n=>n===null||n==="";function Vj(n,e){const t=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[Ld]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",PE(i)){const o=pE(n,"width");o!==void 0&&(n.width=o)}if(PE(r))if(n.style.height==="")n.height=n.width/(e||2);else{const o=pE(n,"height");o!==void 0&&(n.height=o)}return n}const iI=YF?{passive:!0}:!1;function Fj(n,e,t){n&&n.addEventListener(e,t,iI)}function jj(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,iI)}function Uj(n,e){const t=Lj[n.type]||n.type,{x:r,y:i}=xo(n,e);return{type:t,chart:e,native:n,x:r!==void 0?r:null,y:i!==void 0?i:null}}function gf(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function zj(n,e,t){const r=n.canvas,i=new MutationObserver(o=>{let l=!1;for(const c of o)l=l||gf(c.addedNodes,r),l=l&&!gf(c.removedNodes,r);l&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function Bj(n,e,t){const r=n.canvas,i=new MutationObserver(o=>{let l=!1;for(const c of o)l=l||gf(c.removedNodes,r),l=l&&!gf(c.addedNodes,r);l&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const du=new Map;let CE=0;function sI(){const n=window.devicePixelRatio;n!==CE&&(CE=n,du.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function Wj(n,e){du.size||window.addEventListener("resize",sI),du.set(n,e)}function $j(n){du.delete(n),du.size||window.removeEventListener("resize",sI)}function Hj(n,e,t){const r=n.canvas,i=r&&T_(r);if(!i)return;const o=VS((c,h)=>{const f=i.clientWidth;t(c,h),f<i.clientWidth&&t()},window),l=new ResizeObserver(c=>{const h=c[0],f=h.contentRect.width,m=h.contentRect.height;f===0&&m===0||o(f,m)});return l.observe(i),Wj(n,o),l}function og(n,e,t){t&&t.disconnect(),e==="resize"&&$j(n)}function qj(n,e,t){const r=n.canvas,i=VS(o=>{n.ctx!==null&&t(Uj(o,n))},n);return Fj(r,e,i),i}class Yj extends rI{acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(Vj(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[Ld])return!1;const r=t[Ld].initial;["height","width"].forEach(o=>{const l=r[o];lt(l)?t.removeAttribute(o):t.setAttribute(o,l)});const i=r.style||{};return Object.keys(i).forEach(o=>{t.style[o]=i[o]}),t.width=t.width,delete t[Ld],!0}addEventListener(e,t,r){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),l={attach:zj,detach:Bj,resize:Hj}[t]||qj;i[t]=l(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),i=r[t];if(!i)return;({attach:og,detach:og,resize:og}[t]||jj)(e,t,i),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,i){return qF(e,t,r,i)}isAttached(e){const t=e&&T_(e);return!!(t&&t.isConnected)}}function Gj(n){return!b_()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?Nj:Yj}class wl{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return uu(this.x)&&uu(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const i={};return e.forEach(o=>{i[o]=r[o]&&r[o].active()?r[o]._to:this[o]}),i}}function Kj(n,e){const t=n.options.ticks,r=Qj(n),i=Math.min(t.maxTicksLimit||r,r),o=t.major.enabled?Jj(e):[],l=o.length,c=o[0],h=o[l-1],f=[];if(l>i)return Zj(e,f,o,l/i),f;const m=Xj(o,e,i);if(l>0){let y,w;const T=l>1?Math.round((h-c)/(l-1)):null;for(md(e,f,m,lt(T)?0:c-T,c),y=0,w=l-1;y<w;y++)md(e,f,m,o[y],o[y+1]);return md(e,f,m,h,lt(T)?e.length:h+T),f}return md(e,f,m),f}function Qj(n){const e=n.options.offset,t=n._tickSize(),r=n._length/t+(e?0:1),i=n._maxLength/t;return Math.floor(Math.min(r,i))}function Xj(n,e,t){const r=e4(n),i=e.length/t;if(!r)return Math.max(i,1);const o=BV(r);for(let l=0,c=o.length-1;l<c;l++){const h=o[l];if(h>i)return h}return Math.max(i,1)}function Jj(n){const e=[];let t,r;for(t=0,r=n.length;t<r;t++)n[t].major&&e.push(t);return e}function Zj(n,e,t,r){let i=0,o=t[0],l;for(r=Math.ceil(r),l=0;l<n.length;l++)l===o&&(e.push(n[l]),i++,o=t[i*r])}function md(n,e,t,r,i){const o=He(r,0),l=Math.min(He(i,n.length),n.length);let c=0,h,f,m;for(t=Math.ceil(t),i&&(h=i-r,t=h/Math.floor(h/t)),m=o;m<0;)c++,m=Math.round(o+c*t);for(f=Math.max(o,0);f<l;f++)f===m&&(e.push(n[f]),c++,m=Math.round(o+c*t))}function e4(n){const e=n.length;let t,r;if(e<2)return!1;for(r=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==r)return!1;return r}const t4=n=>n==="left"?"right":n==="right"?"left":n,AE=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,RE=(n,e)=>Math.min(e||n,n);function DE(n,e){const t=[],r=n.length/e,i=n.length;let o=0;for(;o<i;o+=r)t.push(n[Math.floor(o)]);return t}function n4(n,e,t){const r=n.ticks.length,i=Math.min(e,r-1),o=n._startPixel,l=n._endPixel,c=1e-6;let h=n.getPixelForTick(i),f;if(!(t&&(r===1?f=Math.max(h-o,l-h):e===0?f=(n.getPixelForTick(1)-h)/2:f=(h-n.getPixelForTick(i-1))/2,h+=i<e?f:-f,h<o-c||h>l+c)))return h}function r4(n,e){Je(n,t=>{const r=t.gc,i=r.length/2;let o;if(i>e){for(o=0;o<i;++o)delete t.data[r[o]];r.splice(0,i)}})}function wc(n){return n.drawTicks?n.tickLength:0}function OE(n,e){if(!n.display)return 0;const t=Rn(n.font,e),r=Pr(n.padding);return(Zt(n.text)?n.text.length:1)*t.lineHeight+r.height}function i4(n,e){return Wo(n,{scale:e,type:"scale"})}function s4(n,e,t){return Wo(n,{tick:t,index:e,type:"tick"})}function o4(n,e,t){let r=FS(n);return(t&&e!=="right"||!t&&e==="right")&&(r=t4(r)),r}function a4(n,e,t,r){const{top:i,left:o,bottom:l,right:c,chart:h}=n,{chartArea:f,scales:m}=h;let y=0,w,T,I;const k=l-i,b=c-o;if(n.isHorizontal()){if(T=Bn(r,o,c),Ye(t)){const N=Object.keys(t)[0],z=t[N];I=m[N].getPixelForValue(z)+k-e}else t==="center"?I=(f.bottom+f.top)/2+k-e:I=AE(n,t,e);w=c-o}else{if(Ye(t)){const N=Object.keys(t)[0],z=t[N];T=m[N].getPixelForValue(z)-b+e}else t==="center"?T=(f.left+f.right)/2-b+e:T=AE(n,t,e);I=Bn(r,l,i),y=t==="left"?-br:br}return{titleX:T,titleY:I,maxWidth:w,rotation:y}}class Du extends wl{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return e=Br(e,Number.POSITIVE_INFINITY),t=Br(t,Number.NEGATIVE_INFINITY),r=Br(r,Number.POSITIVE_INFINITY),i=Br(i,Number.NEGATIVE_INFINITY),{min:Br(e,r),max:Br(t,i),minDefined:sr(e),maxDefined:sr(t)}}getMinMax(e){let{min:t,max:r,minDefined:i,maxDefined:o}=this.getUserBounds(),l;if(i&&o)return{min:t,max:r};const c=this.getMatchingVisibleMetas();for(let h=0,f=c.length;h<f;++h)l=c[h].controller.getMinMax(this,e),i||(t=Math.min(t,l.min)),o||(r=Math.max(r,l.max));return t=o&&t>r?r:t,r=i&&t>r?t:r,{min:Br(t,Br(r,t)),max:Br(r,Br(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ot(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:i,grace:o,ticks:l}=this.options,c=l.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=TF(this,o,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=c<this.ticks.length;this._convertTicksToLabels(h?DE(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=Kj(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,r;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ot(this.options.afterUpdate,[this])}beforeSetDimensions(){ot(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ot(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ot(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ot(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,i,o;for(r=0,i=e.length;r<i;r++)o=e[r],o.label=ot(t.callback,[o.value,r,e],this)}afterTickToLabelConversion(){ot(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ot(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=RE(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,o=t.maxRotation;let l=i,c,h,f;if(!this._isVisible()||!t.display||i>=o||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const m=this._getLabelSizes(),y=m.widest.width,w=m.highest.height,T=Tr(this.chart.width-y,0,this.maxWidth);c=e.offset?this.maxWidth/r:T/(r-1),y+6>c&&(c=T/(r-(e.offset?.5:1)),h=this.maxHeight-wc(e.grid)-t.padding-OE(e.title,this.chart.options.font),f=Math.sqrt(y*y+w*w),l=qV(Math.min(Math.asin(Tr((m.highest.height+6)/c,-1,1)),Math.asin(Tr(h/f,-1,1))-Math.asin(Tr(w/f,-1,1)))),l=Math.max(i,Math.min(o,l))),this.labelRotation=l}afterCalculateLabelRotation(){ot(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ot(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:o}}=this,l=this._isVisible(),c=this.isHorizontal();if(l){const h=OE(i,t.options.font);if(c?(e.width=this.maxWidth,e.height=wc(o)+h):(e.height=this.maxHeight,e.width=wc(o)+h),r.display&&this.ticks.length){const{first:f,last:m,widest:y,highest:w}=this._getLabelSizes(),T=r.padding*2,I=Io(this.labelRotation),k=Math.cos(I),b=Math.sin(I);if(c){const N=r.mirror?0:b*y.width+k*w.height;e.height=Math.min(this.maxHeight,e.height+N+T)}else{const N=r.mirror?0:k*y.width+b*w.height;e.width=Math.min(this.maxWidth,e.width+N+T)}this._calculatePadding(f,m,b,k)}}this._handleMargins(),c?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,i){const{ticks:{align:o,padding:l},position:c}=this.options,h=this.labelRotation!==0,f=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const m=this.getPixelForTick(0)-this.left,y=this.right-this.getPixelForTick(this.ticks.length-1);let w=0,T=0;h?f?(w=i*e.width,T=r*t.height):(w=r*e.height,T=i*t.width):o==="start"?T=t.width:o==="end"?w=e.width:o!=="inner"&&(w=e.width/2,T=t.width/2),this.paddingLeft=Math.max((w-m+l)*this.width/(this.width-m),0),this.paddingRight=Math.max((T-y+l)*this.width/(this.width-y),0)}else{let m=t.height/2,y=e.height/2;o==="start"?(m=0,y=e.height):o==="end"&&(m=t.height,y=0),this.paddingTop=m+l,this.paddingBottom=y+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ot(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,r;for(t=0,r=e.length;t<r;t++)lt(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=DE(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){const{ctx:i,_longestTextCache:o}=this,l=[],c=[],h=Math.floor(t/RE(t,r));let f=0,m=0,y,w,T,I,k,b,N,z,$,te,Q;for(y=0;y<t;y+=h){if(I=e[y].label,k=this._resolveTickFontOptions(y),i.font=b=k.string,N=o[b]=o[b]||{data:{},gc:[]},z=k.lineHeight,$=te=0,!lt(I)&&!Zt(I))$=cE(i,N.data,N.gc,$,I),te=z;else if(Zt(I))for(w=0,T=I.length;w<T;++w)Q=I[w],!lt(Q)&&!Zt(Q)&&($=cE(i,N.data,N.gc,$,Q),te+=z);l.push($),c.push(te),f=Math.max($,f),m=Math.max(te,m)}r4(o,t);const ie=l.indexOf(f),D=c.indexOf(m),P=A=>({width:l[A]||0,height:c[A]||0});return{first:P(0),last:P(t-1),widest:P(ie),highest:P(D),widths:l,heights:c}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return KV(this._alignToPixels?_o(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=s4(this.getContext(),e,r))}return this.$context||(this.$context=i4(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Io(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),o=this._getLabelSizes(),l=e.autoSkipPadding||0,c=o?o.widest.width+l:0,h=o?o.highest.height+l:0;return this.isHorizontal()?h*r>c*i?c/r:h/i:h*i<c*r?h/r:c/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,i=this.options,{grid:o,position:l,border:c}=i,h=o.offset,f=this.isHorizontal(),y=this.ticks.length+(h?1:0),w=wc(o),T=[],I=c.setContext(this.getContext()),k=I.display?I.width:0,b=k/2,N=function(Se){return _o(r,Se,k)};let z,$,te,Q,ie,D,P,A,V,L,j,O;if(l==="top")z=N(this.bottom),D=this.bottom-w,A=z-b,L=N(e.top)+b,O=e.bottom;else if(l==="bottom")z=N(this.top),L=e.top,O=N(e.bottom)-b,D=z+b,A=this.top+w;else if(l==="left")z=N(this.right),ie=this.right-w,P=z-b,V=N(e.left)+b,j=e.right;else if(l==="right")z=N(this.left),V=e.left,j=N(e.right)-b,ie=z+b,P=this.left+w;else if(t==="x"){if(l==="center")z=N((e.top+e.bottom)/2+.5);else if(Ye(l)){const Se=Object.keys(l)[0],re=l[Se];z=N(this.chart.scales[Se].getPixelForValue(re))}L=e.top,O=e.bottom,D=z+b,A=D+w}else if(t==="y"){if(l==="center")z=N((e.left+e.right)/2);else if(Ye(l)){const Se=Object.keys(l)[0],re=l[Se];z=N(this.chart.scales[Se].getPixelForValue(re))}ie=z-b,P=ie-w,V=e.left,j=e.right}const se=He(i.ticks.maxTicksLimit,y),fe=Math.max(1,Math.ceil(y/se));for($=0;$<y;$+=fe){const Se=this.getContext($),re=o.setContext(Se),ae=c.setContext(Se),J=re.lineWidth,R=re.color,F=ae.dash||[],q=ae.dashOffset,K=re.tickWidth,he=re.tickColor,ge=re.tickBorderDash||[],Ee=re.tickBorderDashOffset;te=n4(this,$,h),te!==void 0&&(Q=_o(r,te,J),f?ie=P=V=j=Q:D=A=L=O=Q,T.push({tx1:ie,ty1:D,tx2:P,ty2:A,x1:V,y1:L,x2:j,y2:O,width:J,color:R,borderDash:F,borderDashOffset:q,tickWidth:K,tickColor:he,tickBorderDash:ge,tickBorderDashOffset:Ee}))}return this._ticksLength=y,this._borderValue=z,T}_computeLabelItems(e){const t=this.axis,r=this.options,{position:i,ticks:o}=r,l=this.isHorizontal(),c=this.ticks,{align:h,crossAlign:f,padding:m,mirror:y}=o,w=wc(r.grid),T=w+m,I=y?-m:T,k=-Io(this.labelRotation),b=[];let N,z,$,te,Q,ie,D,P,A,V,L,j,O="middle";if(i==="top")ie=this.bottom-I,D=this._getXAxisLabelAlignment();else if(i==="bottom")ie=this.top+I,D=this._getXAxisLabelAlignment();else if(i==="left"){const fe=this._getYAxisLabelAlignment(w);D=fe.textAlign,Q=fe.x}else if(i==="right"){const fe=this._getYAxisLabelAlignment(w);D=fe.textAlign,Q=fe.x}else if(t==="x"){if(i==="center")ie=(e.top+e.bottom)/2+T;else if(Ye(i)){const fe=Object.keys(i)[0],Se=i[fe];ie=this.chart.scales[fe].getPixelForValue(Se)+T}D=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")Q=(e.left+e.right)/2-T;else if(Ye(i)){const fe=Object.keys(i)[0],Se=i[fe];Q=this.chart.scales[fe].getPixelForValue(Se)}D=this._getYAxisLabelAlignment(w).textAlign}t==="y"&&(h==="start"?O="top":h==="end"&&(O="bottom"));const se=this._getLabelSizes();for(N=0,z=c.length;N<z;++N){$=c[N],te=$.label;const fe=o.setContext(this.getContext(N));P=this.getPixelForTick(N)+o.labelOffset,A=this._resolveTickFontOptions(N),V=A.lineHeight,L=Zt(te)?te.length:1;const Se=L/2,re=fe.color,ae=fe.textStrokeColor,J=fe.textStrokeWidth;let R=D;l?(Q=P,D==="inner"&&(N===z-1?R=this.options.reverse?"left":"right":N===0?R=this.options.reverse?"right":"left":R="center"),i==="top"?f==="near"||k!==0?j=-L*V+V/2:f==="center"?j=-se.highest.height/2-Se*V+V:j=-se.highest.height+V/2:f==="near"||k!==0?j=V/2:f==="center"?j=se.highest.height/2-Se*V:j=se.highest.height-L*V,y&&(j*=-1),k!==0&&!fe.showLabelBackdrop&&(Q+=V/2*Math.sin(k))):(ie=P,j=(1-L)*V/2);let F;if(fe.showLabelBackdrop){const q=Pr(fe.backdropPadding),K=se.heights[N],he=se.widths[N];let ge=j-q.top,Ee=0-q.left;switch(O){case"middle":ge-=K/2;break;case"bottom":ge-=K;break}switch(D){case"center":Ee-=he/2;break;case"right":Ee-=he;break;case"inner":N===z-1?Ee-=he:N>0&&(Ee-=he/2);break}F={left:Ee,top:ge,width:he+q.width,height:K+q.height,color:fe.backdropColor}}b.push({label:te,font:A,textOffset:j,options:{rotation:k,color:re,strokeColor:ae,strokeWidth:J,textAlign:R,textBaseline:O,translation:[Q,ie],backdrop:F}})}return b}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Io(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:i,padding:o}}=this.options,l=this._getLabelSizes(),c=e+o,h=l.widest.width;let f,m;return t==="left"?i?(m=this.right+o,r==="near"?f="left":r==="center"?(f="center",m+=h/2):(f="right",m+=h)):(m=this.right-c,r==="near"?f="right":r==="center"?(f="center",m-=h/2):(f="left",m=this.left)):t==="right"?i?(m=this.left+o,r==="near"?f="right":r==="center"?(f="center",m-=h/2):(f="left",m-=h)):(m=this.left+c,r==="near"?f="left":r==="center"?(f="center",m+=h/2):(f="right",m=this.right)):f="right",{textAlign:f,x:m}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:i,width:o,height:l}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,i,o,l),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(o=>o.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,l;const c=(h,f,m)=>{!m.width||!m.color||(r.save(),r.lineWidth=m.width,r.strokeStyle=m.color,r.setLineDash(m.borderDash||[]),r.lineDashOffset=m.borderDashOffset,r.beginPath(),r.moveTo(h.x,h.y),r.lineTo(f.x,f.y),r.stroke(),r.restore())};if(t.display)for(o=0,l=i.length;o<l;++o){const h=i[o];t.drawOnChartArea&&c({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),t.drawTicks&&c({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:r,grid:i}}=this,o=r.setContext(this.getContext()),l=r.display?o.width:0;if(!l)return;const c=i.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let f,m,y,w;this.isHorizontal()?(f=_o(e,this.left,l)-l/2,m=_o(e,this.right,c)+c/2,y=w=h):(y=_o(e,this.top,l)-l/2,w=_o(e,this.bottom,c)+c/2,f=m=h),t.save(),t.lineWidth=o.width,t.strokeStyle=o.color,t.beginPath(),t.moveTo(f,y),t.lineTo(m,w),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&__(r,i);const o=this.getLabelItems(e);for(const l of o){const c=l.options,h=l.font,f=l.label,m=l.textOffset;pf(r,f,0,m,h,c)}i&&v_(r)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;const o=Rn(r.font),l=Pr(r.padding),c=r.align;let h=o.lineHeight/2;t==="bottom"||t==="center"||Ye(t)?(h+=l.bottom,Zt(r.text)&&(h+=o.lineHeight*(r.text.length-1))):h+=l.top;const{titleX:f,titleY:m,maxWidth:y,rotation:w}=a4(this,h,t,c);pf(e,r.text,0,0,o,{color:r.color,maxWidth:y,rotation:w,textAlign:o4(c,t,i),textBaseline:"middle",translation:[f,m]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=He(e.grid&&e.grid.z,-1),i=He(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Du.prototype.draw?[{z:t,draw:o=>{this.draw(o)}}]:[{z:r,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let o,l;for(o=0,l=t.length;o<l;++o){const c=t[o];c[r]===this.id&&(!e||c.type===e)&&i.push(c)}return i}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return Rn(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class gd{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;u4(t)&&(r=this.register(t));const i=this.items,o=e.id,l=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in i||(i[o]=e,l4(e,l,r),this.override&&Et.override(e.id,e.overrides)),l}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,i=this.scope;r in t&&delete t[r],i&&r in Et[i]&&(delete Et[i][r],this.override&&delete Fo[r])}}function l4(n,e,t){const r=cu(Object.create(null),[t?Et.get(t):{},Et.get(e),n.defaults]);Et.set(e,r),n.defaultRoutes&&c4(e,n.defaultRoutes),n.descriptors&&Et.describe(e,n.descriptors)}function c4(n,e){Object.keys(e).forEach(t=>{const r=t.split("."),i=r.pop(),o=[n].concat(r).join("."),l=e[t].split("."),c=l.pop(),h=l.join(".");Et.route(o,i,h,c)})}function u4(n){return"id"in n&&"defaults"in n}class h4{constructor(){this.controllers=new gd(ZS,"datasets",!0),this.elements=new gd(wl,"elements"),this.plugins=new gd(Object,"plugins"),this.scales=new gd(Du,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(i=>{const o=r||this._getRegistryForType(i);r||o.isForType(i)||o===this.plugins&&i.id?this._exec(e,o,i):Je(i,l=>{const c=r||this._getRegistryForType(l);this._exec(e,c,l)})})}_exec(e,t,r){const i=m_(e);ot(r["before"+i],[],r),t[e](r),ot(r["after"+i],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Hr=new h4;class d4{constructor(){this._init=[]}notify(e,t,r,i){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const o=i?this._descriptors(e).filter(i):this._descriptors(e),l=this._notify(o,e,t,r);return t==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),l}_notify(e,t,r,i){i=i||{};for(const o of e){const l=o.plugin,c=l[r],h=[t,i,o.options];if(ot(c,h,l)===!1&&i.cancelable)return!1}return!0}invalidate(){lt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,i=He(r.options&&r.options.plugins,{}),o=f4(r);return i===!1&&!t?[]:m4(e,o,i,t)}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,i=(o,l)=>o.filter(c=>!l.some(h=>c.plugin.id===h.plugin.id));this._notify(i(t,r),e,"stop"),this._notify(i(r,t),e,"start")}}function f4(n){const e={},t=[],r=Object.keys(Hr.plugins.items);for(let o=0;o<r.length;o++)t.push(Hr.getPlugin(r[o]));const i=n.plugins||[];for(let o=0;o<i.length;o++){const l=i[o];t.indexOf(l)===-1&&(t.push(l),e[l.id]=!0)}return{plugins:t,localIds:e}}function p4(n,e){return!e&&n===!1?null:n===!0?{}:n}function m4(n,{plugins:e,localIds:t},r,i){const o=[],l=n.getContext();for(const c of e){const h=c.id,f=p4(r[h],i);f!==null&&o.push({plugin:c,options:g4(n.config,{plugin:c,local:t[h]},f,l)})}return o}function g4(n,{plugin:e,local:t},r,i){const o=n.pluginScopeKeys(e),l=n.getOptionScopes(r,o);return t&&e.defaults&&l.push(e.defaults),n.createResolver(l,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Qg(n,e){const t=Et.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function y4(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function _4(n,e){return n===e?"_index_":"_value_"}function ME(n){if(n==="x"||n==="y"||n==="r")return n}function v4(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Xg(n,...e){if(ME(n))return n;for(const t of e){const r=t.axis||v4(t.position)||n.length>1&&ME(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function NE(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function w4(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(t.length)return NE(n,"x",t[0])||NE(n,"y",t[0])}return{}}function x4(n,e){const t=Fo[n.type]||{scales:{}},r=e.scales||{},i=Qg(n.type,e),o=Object.create(null);return Object.keys(r).forEach(l=>{const c=r[l];if(!Ye(c))return console.error(`Invalid scale configuration for scale: ${l}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const h=Xg(l,c,w4(l,n),Et.scales[c.type]),f=_4(h,i),m=t.scales||{};o[l]=Bc(Object.create(null),[{axis:h},c,m[h],m[f]])}),n.data.datasets.forEach(l=>{const c=l.type||n.type,h=l.indexAxis||Qg(c,e),m=(Fo[c]||{}).scales||{};Object.keys(m).forEach(y=>{const w=y4(y,h),T=l[w+"AxisID"]||w;o[T]=o[T]||Object.create(null),Bc(o[T],[{axis:w},r[T],m[y]])})}),Object.keys(o).forEach(l=>{const c=o[l];Bc(c,[Et.scales[c.type],Et.scale])}),o}function oI(n){const e=n.options||(n.options={});e.plugins=He(e.plugins,{}),e.scales=x4(n,e)}function aI(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function E4(n){return n=n||{},n.data=aI(n.data),oI(n),n}const LE=new Map,lI=new Set;function yd(n,e){let t=LE.get(n);return t||(t=e(),LE.set(n,t),lI.add(t)),t}const xc=(n,e,t)=>{const r=hf(e,t);r!==void 0&&n.add(r)};class b4{constructor(e){this._config=E4(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=aI(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),oI(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return yd(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return yd(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return yd(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,r=this.type;return yd(`${r}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const r=this._scopeCache;let i=r.get(e);return(!i||t)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,t,r){const{options:i,type:o}=this,l=this._cachedScopes(e,r),c=l.get(t);if(c)return c;const h=new Set;t.forEach(m=>{e&&(h.add(e),m.forEach(y=>xc(h,e,y))),m.forEach(y=>xc(h,i,y)),m.forEach(y=>xc(h,Fo[o]||{},y)),m.forEach(y=>xc(h,Et,y)),m.forEach(y=>xc(h,Yg,y))});const f=Array.from(h);return f.length===0&&f.push(Object.create(null)),lI.has(t)&&l.set(t,f),f}chartOptionScopes(){const{options:e,type:t}=this;return[e,Fo[t]||{},Et.datasets[t]||{},{type:t},Et,Yg]}resolveNamedOptions(e,t,r,i=[""]){const o={$shared:!0},{resolver:l,subPrefixes:c}=VE(this._resolverCache,e,i);let h=l;if(S4(l,t)){o.$shared=!1,r=Os(r)?r():r;const f=this.createResolver(e,r,c);h=il(l,r,f)}for(const f of t)o[f]=h[f];return o}createResolver(e,t,r=[""],i){const{resolver:o}=VE(this._resolverCache,e,r);return Ye(t)?il(o,t,void 0,i):o}}function VE(n,e,t){let r=n.get(e);r||(r=new Map,n.set(e,r));const i=t.join();let o=r.get(i);return o||(o={resolver:w_(e,t),subPrefixes:t.filter(c=>!c.toLowerCase().includes("hover"))},r.set(i,o)),o}const T4=n=>Ye(n)&&Object.getOwnPropertyNames(n).some(e=>Os(n[e]));function S4(n,e){const{isScriptable:t,isIndexable:r}=WS(n);for(const i of e){const o=t(i),l=r(i),c=(l||o)&&n[i];if(o&&(Os(c)||T4(c))||l&&Zt(c))return!0}return!1}var I4="4.5.0";const k4=["top","bottom","left","right","chartArea"];function FE(n,e){return n==="top"||n==="bottom"||k4.indexOf(n)===-1&&e==="x"}function jE(n,e){return function(t,r){return t[n]===r[n]?t[e]-r[e]:t[n]-r[n]}}function UE(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),ot(t&&t.onComplete,[n],e)}function P4(n){const e=n.chart,t=e.options.animation;ot(t&&t.onProgress,[n],e)}function cI(n){return b_()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Vd={},zE=n=>{const e=cI(n);return Object.values(Vd).filter(t=>t.canvas===e).pop()};function C4(n,e,t){const r=Object.keys(n);for(const i of r){const o=+i;if(o>=e){const l=n[i];delete n[i],(t>0||o>e)&&(n[o+t]=l)}}}function A4(n,e,t,r){return!t||n.type==="mouseout"?null:r?e:n}let Xf=class{static defaults=Et;static instances=Vd;static overrides=Fo;static registry=Hr;static version=I4;static getChart=zE;static register(...e){Hr.add(...e),BE()}static unregister(...e){Hr.remove(...e),BE()}constructor(e,t){const r=this.config=new b4(t),i=cI(e),o=zE(i);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const l=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||Gj(i)),this.platform.updateConfig(r);const c=this.platform.acquireContext(i,l.aspectRatio),h=c&&c.canvas,f=h&&h.height,m=h&&h.width;if(this.id=OV(),this.ctx=c,this.canvas=h,this.width=m,this.height=f,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new d4,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=eF(y=>this.update(y),l.resizeDelay||0),this._dataChanges=[],Vd[this.id]=this,!c||!h){console.error("Failed to create chart: can't acquire context from the given item");return}bi.listen(this,"complete",UE),bi.listen(this,"progress",P4),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:r,height:i,_aspectRatio:o}=this;return lt(e)?t&&o?o:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Hr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():fE(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return uE(this.canvas,this.ctx),this}stop(){return bi.stop(this),this}resize(e,t){bi.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const r=this.options,i=this.canvas,o=r.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(i,e,t,o),c=r.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,fE(this,c,!0)&&(this.notifyPlugins("resize",{size:l}),ot(r.onResize,[this,l],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};Je(t,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,t=e.scales,r=this.scales,i=Object.keys(r).reduce((l,c)=>(l[c]=!1,l),{});let o=[];t&&(o=o.concat(Object.keys(t).map(l=>{const c=t[l],h=Xg(l,c),f=h==="r",m=h==="x";return{options:c,dposition:f?"chartArea":m?"bottom":"left",dtype:f?"radialLinear":m?"category":"linear"}}))),Je(o,l=>{const c=l.options,h=c.id,f=Xg(h,c),m=He(c.type,l.dtype);(c.position===void 0||FE(c.position,f)!==FE(l.dposition))&&(c.position=l.dposition),i[h]=!0;let y=null;if(h in r&&r[h].type===m)y=r[h];else{const w=Hr.getScale(m);y=new w({id:h,type:m,ctx:this.ctx,chart:this}),r[y.id]=y}y.init(c,e)}),Je(i,(l,c)=>{l||delete r[c]}),Je(r,l=>{_s.configure(this,l,l.options),_s.addBox(this,l)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,r=e.length;if(e.sort((i,o)=>i.index-o.index),r>t){for(let i=t;i<r;++i)this._destroyDatasetMeta(i);e.splice(t,r-t)}this._sortedMetasets=e.slice(0).sort(jE("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((r,i)=>{t.filter(o=>o===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=t.length;r<i;r++){const o=t[r];let l=this.getDatasetMeta(r);const c=o.type||this.config.type;if(l.type&&l.type!==c&&(this._destroyDatasetMeta(r),l=this.getDatasetMeta(r)),l.type=c,l.indexAxis=o.indexAxis||Qg(c,this.options),l.order=o.order||0,l.index=r,l.label=""+o.label,l.visible=this.isDatasetVisible(r),l.controller)l.controller.updateIndex(r),l.controller.linkScales();else{const h=Hr.getController(c),{datasetElementType:f,dataElementType:m}=Et.datasets[c];Object.assign(h,{dataElementType:Hr.getElement(m),datasetElementType:f&&Hr.getElement(f)}),l.controller=new h(this,r),e.push(l.controller)}}return this._updateMetasets(),e}_resetElements(){Je(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const r=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let f=0,m=this.data.datasets.length;f<m;f++){const{controller:y}=this.getDatasetMeta(f),w=!i&&o.indexOf(y)===-1;y.buildOrUpdateElements(w),l=Math.max(+y.getMaxOverflow(),l)}l=this._minPadding=r.layout.autoPadding?l:0,this._updateLayout(l),i||Je(o,f=>{f.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(jE("z","_idx"));const{_active:c,_lastEvent:h}=this;h?this._eventHandler(h,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){Je(this.scales,e=>{_s.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!eE(t,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:o}of t){const l=r==="_removeElements"?-o:o;C4(e,i,l)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,r=o=>new Set(e.filter(l=>l[0]===o).map((l,c)=>c+","+l.splice(1).join(","))),i=r(0);for(let o=1;o<t;o++)if(!eE(i,r(o)))return;return Array.from(i).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;_s.update(this,this.width,this.height,e);const t=this.chartArea,r=t.width<=0||t.height<=0;this._layers=[],Je(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,o)=>{i._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,r=this.data.datasets.length;t<r;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,r=this.data.datasets.length;t<r;++t)this._updateDataset(t,Os(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(bi.has(this)?this.attached&&!bi.running(this)&&bi.start(this):(this.draw(),UE({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,r=[];let i,o;for(i=0,o=t.length;i<o;++i){const l=t[i];(!e||l.visible)&&r.push(l)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=aj(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&__(t,i),e.controller.draw(),i&&v_(t),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return hu(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,r,i){const o=kj.modes[t];return typeof o=="function"?o(this,e,r,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],r=this._metasets;let i=r.filter(o=>o&&o._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Wo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!t.hidden}setDatasetVisibility(e,t){const r=this.getDatasetMeta(e);r.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,r){const i=r?"show":"hide",o=this.getDatasetMeta(e),l=o.controller._resolveAnimations(void 0,i);df(t)?(o.data[t].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),l.update(o,{visible:r}),this.update(c=>c.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),bi.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),uE(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Vd[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,r=(o,l)=>{t.addEventListener(this,o,l),e[o]=l},i=(o,l,c)=>{o.offsetX=l,o.offsetY=c,this._eventHandler(o)};Je(this.options.events,o=>r(o,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,r=(h,f)=>{t.addEventListener(this,h,f),e[h]=f},i=(h,f)=>{e[h]&&(t.removeEventListener(this,h,f),delete e[h])},o=(h,f)=>{this.canvas&&this.resize(h,f)};let l;const c=()=>{i("attach",c),this.attached=!0,this.resize(),r("resize",o),r("detach",l)};l=()=>{this.attached=!1,i("resize",o),this._stop(),this._resize(0,0),r("attach",c)},t.isAttached(this.canvas)?c():l()}unbindEvents(){Je(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Je(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,r){const i=r?"set":"remove";let o,l,c,h;for(t==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+i+"DatasetHoverStyle"]()),c=0,h=e.length;c<h;++c){l=e[c];const f=l&&this.getDatasetMeta(l.datasetIndex).controller;f&&f[i+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],r=e.map(({datasetIndex:o,index:l})=>{const c=this.getDatasetMeta(o);if(!c)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:c.data[l],index:l}});!cf(r,t)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,t))}notifyPlugins(e,t,r){return this._plugins.notify(this,e,t,r)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,r){const i=this.options.hover,o=(h,f)=>h.filter(m=>!f.some(y=>m.datasetIndex===y.datasetIndex&&m.index===y.index)),l=o(t,e),c=r?e:o(e,t);l.length&&this.updateHoverStyle(l,i.mode,!1),c.length&&i.mode&&this.updateHoverStyle(c,i.mode,!0)}_eventHandler(e,t){const r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=l=>(l.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const o=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(o||r.changed)&&this.render(),this}_handleEvent(e,t,r){const{_active:i=[],options:o}=this,l=t,c=this._getActiveElements(e,i,r,l),h=jV(e),f=A4(e,this._lastEvent,r,h);r&&(this._lastEvent=null,ot(o.onHover,[e,c,this],this),h&&ot(o.onClick,[e,c,this],this));const m=!cf(c,i);return(m||t)&&(this._active=c,this._updateHoverStyles(c,i,t)),this._lastEvent=f,m}_getActiveElements(e,t,r,i){if(e.type==="mouseout")return[];if(!r)return t;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,i)}};function BE(){return Je(Xf.instances,n=>n._plugins.invalidate())}function uI(n,e,t=e){n.lineCap=He(t.borderCapStyle,e.borderCapStyle),n.setLineDash(He(t.borderDash,e.borderDash)),n.lineDashOffset=He(t.borderDashOffset,e.borderDashOffset),n.lineJoin=He(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=He(t.borderWidth,e.borderWidth),n.strokeStyle=He(t.borderColor,e.borderColor)}function R4(n,e,t){n.lineTo(t.x,t.y)}function D4(n){return n.stepped?pF:n.tension||n.cubicInterpolationMode==="monotone"?mF:R4}function hI(n,e,t={}){const r=n.length,{start:i=0,end:o=r-1}=t,{start:l,end:c}=e,h=Math.max(i,l),f=Math.min(o,c),m=i<l&&o<l||i>c&&o>c;return{count:r,start:h,loop:e.loop,ilen:f<h&&!m?r+f-h:f-h}}function O4(n,e,t,r){const{points:i,options:o}=e,{count:l,start:c,loop:h,ilen:f}=hI(i,t,r),m=D4(o);let{move:y=!0,reverse:w}=r||{},T,I,k;for(T=0;T<=f;++T)I=i[(c+(w?f-T:T))%l],!I.skip&&(y?(n.moveTo(I.x,I.y),y=!1):m(n,k,I,w,o.stepped),k=I);return h&&(I=i[(c+(w?f:0))%l],m(n,k,I,w,o.stepped)),!!h}function M4(n,e,t,r){const i=e.points,{count:o,start:l,ilen:c}=hI(i,t,r),{move:h=!0,reverse:f}=r||{};let m=0,y=0,w,T,I,k,b,N;const z=te=>(l+(f?c-te:te))%o,$=()=>{k!==b&&(n.lineTo(m,b),n.lineTo(m,k),n.lineTo(m,N))};for(h&&(T=i[z(0)],n.moveTo(T.x,T.y)),w=0;w<=c;++w){if(T=i[z(w)],T.skip)continue;const te=T.x,Q=T.y,ie=te|0;ie===I?(Q<k?k=Q:Q>b&&(b=Q),m=(y*m+te)/++y):($(),n.lineTo(te,Q),I=ie,y=0,k=b=Q),N=Q}$()}function Jg(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?M4:O4}function N4(n){return n.stepped?GF:n.tension||n.cubicInterpolationMode==="monotone"?KF:Eo}function L4(n,e,t,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,r)&&i.closePath()),uI(n,e.options),n.stroke(i)}function V4(n,e,t,r){const{segments:i,options:o}=e,l=Jg(e);for(const c of i)uI(n,o,c.style),n.beginPath(),l(n,e,c,{start:t,end:t+r-1})&&n.closePath(),n.stroke()}const F4=typeof Path2D=="function";function j4(n,e,t,r){F4&&!e.options.segment?L4(n,e,t,r):V4(n,e,t,r)}class U4 extends wl{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;UF(this._points,r,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=rj(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,r=e.length;return r&&t[e[r-1].end]}interpolate(e,t){const r=this.options,i=e[t],o=this.points,l=ej(this,{property:t,start:i,end:i});if(!l.length)return;const c=[],h=N4(r);let f,m;for(f=0,m=l.length;f<m;++f){const{start:y,end:w}=l[f],T=o[y],I=o[w];if(T===I){c.push(T);continue}const k=Math.abs((i-T[t])/(I[t]-T[t])),b=h(T,I,k,r.stepped);b[t]=e[t],c.push(b)}return c.length===1?c[0]:c}pathSegment(e,t,r){return Jg(this)(e,this,t,r)}path(e,t,r){const i=this.segments,o=Jg(this);let l=this._loop;t=t||0,r=r||this.points.length-t;for(const c of i)l&=o(e,this,c,{start:t,end:t+r-1});return!!l}draw(e,t,r,i){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),j4(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function WE(n,e,t,r){const i=n.options,{[t]:o}=n.getProps([t],r);return Math.abs(e-o)<i.radius+i.hitRadius}class z4 extends wl{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,r){const i=this.options,{x:o,y:l}=this.getProps(["x","y"],r);return Math.pow(e-o,2)+Math.pow(t-l,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,t){return WE(this,e,"x",t)}inYRange(e,t){return WE(this,e,"y",t)}getCenterPoint(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const r=t&&e.borderWidth||0;return(t+r)*2}draw(e,t){const r=this.options;this.skip||r.radius<.1||!hu(this,t,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,Gg(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}const $E=(n,e)=>{let{boxHeight:t=e,boxWidth:r=e}=n;return n.usePointStyle&&(t=Math.min(t,e),r=n.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}},B4=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class HE extends wl{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=ot(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=Rn(r.font),o=i.size,l=this._computeTitleHeight(),{boxWidth:c,itemHeight:h}=$E(r,o);let f,m;t.font=i.string,this.isHorizontal()?(f=this.maxWidth,m=this._fitRows(l,o,c,h)+10):(m=this.maxHeight,f=this._fitCols(l,i,c,h)+10),this.width=Math.min(f,e.maxWidth||this.maxWidth),this.height=Math.min(m,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,i){const{ctx:o,maxWidth:l,options:{labels:{padding:c}}}=this,h=this.legendHitBoxes=[],f=this.lineWidths=[0],m=i+c;let y=e;o.textAlign="left",o.textBaseline="middle";let w=-1,T=-m;return this.legendItems.forEach((I,k)=>{const b=r+t/2+o.measureText(I.text).width;(k===0||f[f.length-1]+b+2*c>l)&&(y+=m,f[f.length-(k>0?0:1)]=0,T+=m,w++),h[k]={left:0,top:T,row:w,width:b,height:i},f[f.length-1]+=b+c}),y}_fitCols(e,t,r,i){const{ctx:o,maxHeight:l,options:{labels:{padding:c}}}=this,h=this.legendHitBoxes=[],f=this.columnSizes=[],m=l-e;let y=c,w=0,T=0,I=0,k=0;return this.legendItems.forEach((b,N)=>{const{itemWidth:z,itemHeight:$}=W4(r,t,o,b,i);N>0&&T+$+2*c>m&&(y+=w+c,f.push({width:w,height:T}),I+=w+c,k++,w=T=0),h[N]={left:I,top:T,col:k,width:z,height:$},w=Math.max(w,z),T+=$+c}),y+=w,f.push({width:w,height:T}),y}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:o}}=this,l=Qa(o,this.left,this.width);if(this.isHorizontal()){let c=0,h=Bn(r,this.left+i,this.right-this.lineWidths[c]);for(const f of t)c!==f.row&&(c=f.row,h=Bn(r,this.left+i,this.right-this.lineWidths[c])),f.top+=this.top+e+i,f.left=l.leftForLtr(l.x(h),f.width),h+=f.width+i}else{let c=0,h=Bn(r,this.top+e+i,this.bottom-this.columnSizes[c].height);for(const f of t)f.col!==c&&(c=f.col,h=Bn(r,this.top+e+i,this.bottom-this.columnSizes[c].height)),f.top=h,f.left+=this.left+i,f.left=l.leftForLtr(l.x(f.left),f.width),h+=f.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;__(e,this),this._draw(),v_(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:r,ctx:i}=this,{align:o,labels:l}=e,c=Et.color,h=Qa(e.rtl,this.left,this.width),f=Rn(l.font),{padding:m}=l,y=f.size,w=y/2;let T;this.drawTitle(),i.textAlign=h.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=f.string;const{boxWidth:I,boxHeight:k,itemHeight:b}=$E(l,y),N=function(ie,D,P){if(isNaN(I)||I<=0||isNaN(k)||k<0)return;i.save();const A=He(P.lineWidth,1);if(i.fillStyle=He(P.fillStyle,c),i.lineCap=He(P.lineCap,"butt"),i.lineDashOffset=He(P.lineDashOffset,0),i.lineJoin=He(P.lineJoin,"miter"),i.lineWidth=A,i.strokeStyle=He(P.strokeStyle,c),i.setLineDash(He(P.lineDash,[])),l.usePointStyle){const V={radius:k*Math.SQRT2/2,pointStyle:P.pointStyle,rotation:P.rotation,borderWidth:A},L=h.xPlus(ie,I/2),j=D+w;zS(i,V,L,j,l.pointStyleWidth&&I)}else{const V=D+Math.max((y-k)/2,0),L=h.leftForLtr(ie,I),j=qc(P.borderRadius);i.beginPath(),Object.values(j).some(O=>O!==0)?Kg(i,{x:L,y:V,w:I,h:k,radius:j}):i.rect(L,V,I,k),i.fill(),A!==0&&i.stroke()}i.restore()},z=function(ie,D,P){pf(i,P.text,ie,D+b/2,f,{strikethrough:P.hidden,textAlign:h.textAlign(P.textAlign)})},$=this.isHorizontal(),te=this._computeTitleHeight();$?T={x:Bn(o,this.left+m,this.right-r[0]),y:this.top+m+te,line:0}:T={x:this.left+m,y:Bn(o,this.top+te+m,this.bottom-t[0].height),line:0},GS(this.ctx,e.textDirection);const Q=b+m;this.legendItems.forEach((ie,D)=>{i.strokeStyle=ie.fontColor,i.fillStyle=ie.fontColor;const P=i.measureText(ie.text).width,A=h.textAlign(ie.textAlign||(ie.textAlign=l.textAlign)),V=I+w+P;let L=T.x,j=T.y;h.setWidth(this.width),$?D>0&&L+V+m>this.right&&(j=T.y+=Q,T.line++,L=T.x=Bn(o,this.left+m,this.right-r[T.line])):D>0&&j+Q>this.bottom&&(L=T.x=L+t[T.line].width+m,T.line++,j=T.y=Bn(o,this.top+te+m,this.bottom-t[T.line].height));const O=h.x(L);if(N(O,j,ie),L=tF(A,L+I+w,$?L+V:this.right,e.rtl),z(h.x(L),j,ie),$)T.x+=V+m;else if(typeof ie.text!="string"){const se=f.lineHeight;T.y+=dI(ie,se)+m}else T.y+=Q}),KS(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,r=Rn(t.font),i=Pr(t.padding);if(!t.display)return;const o=Qa(e.rtl,this.left,this.width),l=this.ctx,c=t.position,h=r.size/2,f=i.top+h;let m,y=this.left,w=this.width;if(this.isHorizontal())w=Math.max(...this.lineWidths),m=this.top+f,y=Bn(e.align,y,this.right-w);else{const I=this.columnSizes.reduce((k,b)=>Math.max(k,b.height),0);m=f+Bn(e.align,this.top,this.bottom-I-e.labels.padding-this._computeTitleHeight())}const T=Bn(c,y,y+w);l.textAlign=o.textAlign(FS(c)),l.textBaseline="middle",l.strokeStyle=t.color,l.fillStyle=t.color,l.font=r.string,pf(l,t.text,T,m,r)}_computeTitleHeight(){const e=this.options.title,t=Rn(e.font),r=Pr(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,i,o;if(Oc(e,this.left,this.right)&&Oc(t,this.top,this.bottom)){for(o=this.legendHitBoxes,r=0;r<o.length;++r)if(i=o[r],Oc(e,i.left,i.left+i.width)&&Oc(t,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const t=this.options;if(!q4(e.type,t))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,o=B4(i,r);i&&!o&&ot(t.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!o&&ot(t.onHover,[e,r,this],this)}else r&&ot(t.onClick,[e,r,this],this)}}function W4(n,e,t,r,i){const o=$4(r,n,e,t),l=H4(i,r,e.lineHeight);return{itemWidth:o,itemHeight:l}}function $4(n,e,t,r){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((o,l)=>o.length>l.length?o:l)),e+t.size/2+r.measureText(i).width}function H4(n,e,t){let r=n;return typeof e.text!="string"&&(r=dI(e,t)),r}function dI(n,e){const t=n.text?n.text.length:0;return e*t}function q4(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var Y4={id:"legend",_element:HE,start(n,e,t){const r=n.legend=new HE({ctx:n.ctx,options:t,chart:n});_s.configure(n,r,t),_s.addBox(n,r)},stop(n){_s.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const r=n.legend;_s.configure(n,r,t),r.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const r=e.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:o,useBorderRadius:l,borderRadius:c}}=n.legend.options;return n._getSortedDatasetMetas().map(h=>{const f=h.controller.getStyle(t?0:void 0),m=Pr(f.borderWidth);return{text:e[h.index].label,fillStyle:f.backgroundColor,fontColor:o,hidden:!h.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(m.width+m.height)/4,strokeStyle:f.borderColor,pointStyle:r||f.pointStyle,rotation:f.rotation,textAlign:i||f.textAlign,borderRadius:l&&(c||f.borderRadius),datasetIndex:h.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};const Nc={average(n){if(!n.length)return!1;let e,t,r=new Set,i=0,o=0;for(e=0,t=n.length;e<t;++e){const c=n[e].element;if(c&&c.hasValue()){const h=c.tooltipPosition();r.add(h.x),i+=h.y,++o}}return o===0||r.size===0?!1:{x:[...r].reduce((c,h)=>c+h)/r.size,y:i/o}},nearest(n,e){if(!n.length)return!1;let t=e.x,r=e.y,i=Number.POSITIVE_INFINITY,o,l,c;for(o=0,l=n.length;o<l;++o){const h=n[o].element;if(h&&h.hasValue()){const f=h.getCenterPoint(),m=qg(e,f);m<i&&(i=m,c=h)}}if(c){const h=c.tooltipPosition();t=h.x,r=h.y}return{x:t,y:r}}};function $r(n,e){return e&&(Zt(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Ti(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function G4(n,e){const{element:t,datasetIndex:r,index:i}=e,o=n.getDatasetMeta(r).controller,{label:l,value:c}=o.getLabelAndValue(i);return{chart:n,label:l,parsed:o.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:c,dataset:o.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function qE(n,e){const t=n.chart.ctx,{body:r,footer:i,title:o}=n,{boxWidth:l,boxHeight:c}=e,h=Rn(e.bodyFont),f=Rn(e.titleFont),m=Rn(e.footerFont),y=o.length,w=i.length,T=r.length,I=Pr(e.padding);let k=I.height,b=0,N=r.reduce((te,Q)=>te+Q.before.length+Q.lines.length+Q.after.length,0);if(N+=n.beforeBody.length+n.afterBody.length,y&&(k+=y*f.lineHeight+(y-1)*e.titleSpacing+e.titleMarginBottom),N){const te=e.displayColors?Math.max(c,h.lineHeight):h.lineHeight;k+=T*te+(N-T)*h.lineHeight+(N-1)*e.bodySpacing}w&&(k+=e.footerMarginTop+w*m.lineHeight+(w-1)*e.footerSpacing);let z=0;const $=function(te){b=Math.max(b,t.measureText(te).width+z)};return t.save(),t.font=f.string,Je(n.title,$),t.font=h.string,Je(n.beforeBody.concat(n.afterBody),$),z=e.displayColors?l+2+e.boxPadding:0,Je(r,te=>{Je(te.before,$),Je(te.lines,$),Je(te.after,$)}),z=0,t.font=m.string,Je(n.footer,$),t.restore(),b+=I.width,{width:b,height:k}}function K4(n,e){const{y:t,height:r}=e;return t<r/2?"top":t>n.height-r/2?"bottom":"center"}function Q4(n,e,t,r){const{x:i,width:o}=r,l=t.caretSize+t.caretPadding;if(n==="left"&&i+o+l>e.width||n==="right"&&i-o-l<0)return!0}function X4(n,e,t,r){const{x:i,width:o}=t,{width:l,chartArea:{left:c,right:h}}=n;let f="center";return r==="center"?f=i<=(c+h)/2?"left":"right":i<=o/2?f="left":i>=l-o/2&&(f="right"),Q4(f,n,e,t)&&(f="center"),f}function YE(n,e,t){const r=t.yAlign||e.yAlign||K4(n,t);return{xAlign:t.xAlign||e.xAlign||X4(n,e,t,r),yAlign:r}}function J4(n,e){let{x:t,width:r}=n;return e==="right"?t-=r:e==="center"&&(t-=r/2),t}function Z4(n,e,t){let{y:r,height:i}=n;return e==="top"?r+=t:e==="bottom"?r-=i+t:r-=i/2,r}function GE(n,e,t,r){const{caretSize:i,caretPadding:o,cornerRadius:l}=n,{xAlign:c,yAlign:h}=t,f=i+o,{topLeft:m,topRight:y,bottomLeft:w,bottomRight:T}=qc(l);let I=J4(e,c);const k=Z4(e,h,f);return h==="center"?c==="left"?I+=f:c==="right"&&(I-=f):c==="left"?I-=Math.max(m,w)+i:c==="right"&&(I+=Math.max(y,T)+i),{x:Tr(I,0,r.width-e.width),y:Tr(k,0,r.height-e.height)}}function _d(n,e,t){const r=Pr(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-r.right:n.x+r.left}function KE(n){return $r([],Ti(n))}function eU(n,e,t){return Wo(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function QE(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const fI={beforeTitle:Ei,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:Ei,beforeBody:Ei,beforeLabel:Ei,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return lt(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Ei,afterBody:Ei,beforeFooter:Ei,footer:Ei,afterFooter:Ei};function In(n,e,t,r){const i=n[e].call(t,r);return typeof i>"u"?fI[e].call(t,r):i}class XE extends wl{static positioners=Nc;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&t.options.animation&&r.animations,o=new XS(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=eU(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:r}=t,i=In(r,"beforeTitle",this,e),o=In(r,"title",this,e),l=In(r,"afterTitle",this,e);let c=[];return c=$r(c,Ti(i)),c=$r(c,Ti(o)),c=$r(c,Ti(l)),c}getBeforeBody(e,t){return KE(In(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:r}=t,i=[];return Je(e,o=>{const l={before:[],lines:[],after:[]},c=QE(r,o);$r(l.before,Ti(In(c,"beforeLabel",this,o))),$r(l.lines,In(c,"label",this,o)),$r(l.after,Ti(In(c,"afterLabel",this,o))),i.push(l)}),i}getAfterBody(e,t){return KE(In(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:r}=t,i=In(r,"beforeFooter",this,e),o=In(r,"footer",this,e),l=In(r,"afterFooter",this,e);let c=[];return c=$r(c,Ti(i)),c=$r(c,Ti(o)),c=$r(c,Ti(l)),c}_createItems(e){const t=this._active,r=this.chart.data,i=[],o=[],l=[];let c=[],h,f;for(h=0,f=t.length;h<f;++h)c.push(G4(this.chart,t[h]));return e.filter&&(c=c.filter((m,y,w)=>e.filter(m,y,w,r))),e.itemSort&&(c=c.sort((m,y)=>e.itemSort(m,y,r))),Je(c,m=>{const y=QE(e.callbacks,m);i.push(In(y,"labelColor",this,m)),o.push(In(y,"labelPointStyle",this,m)),l.push(In(y,"labelTextColor",this,m))}),this.labelColors=i,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=c,c}update(e,t){const r=this.options.setContext(this.getContext()),i=this._active;let o,l=[];if(!i.length)this.opacity!==0&&(o={opacity:0});else{const c=Nc[r.position].call(this,i,this._eventPosition);l=this._createItems(r),this.title=this.getTitle(l,r),this.beforeBody=this.getBeforeBody(l,r),this.body=this.getBody(l,r),this.afterBody=this.getAfterBody(l,r),this.footer=this.getFooter(l,r);const h=this._size=qE(this,r),f=Object.assign({},c,h),m=YE(this.chart,r,f),y=GE(r,f,m,this.chart);this.xAlign=m.xAlign,this.yAlign=m.yAlign,o={opacity:1,x:y.x,y:y.y,width:h.width,height:h.height,caretX:c.x,caretY:c.y}}this._tooltipItems=l,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,r,i){const o=this.getCaretPosition(e,r,i);t.lineTo(o.x1,o.y1),t.lineTo(o.x2,o.y2),t.lineTo(o.x3,o.y3)}getCaretPosition(e,t,r){const{xAlign:i,yAlign:o}=this,{caretSize:l,cornerRadius:c}=r,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:y}=qc(c),{x:w,y:T}=e,{width:I,height:k}=t;let b,N,z,$,te,Q;return o==="center"?(te=T+k/2,i==="left"?(b=w,N=b-l,$=te+l,Q=te-l):(b=w+I,N=b+l,$=te-l,Q=te+l),z=b):(i==="left"?N=w+Math.max(h,m)+l:i==="right"?N=w+I-Math.max(f,y)-l:N=this.caretX,o==="top"?($=T,te=$-l,b=N-l,z=N+l):($=T+k,te=$+l,b=N+l,z=N-l),Q=$),{x1:b,x2:N,x3:z,y1:$,y2:te,y3:Q}}drawTitle(e,t,r){const i=this.title,o=i.length;let l,c,h;if(o){const f=Qa(r.rtl,this.x,this.width);for(e.x=_d(this,r.titleAlign,r),t.textAlign=f.textAlign(r.titleAlign),t.textBaseline="middle",l=Rn(r.titleFont),c=r.titleSpacing,t.fillStyle=r.titleColor,t.font=l.string,h=0;h<o;++h)t.fillText(i[h],f.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+c,h+1===o&&(e.y+=r.titleMarginBottom-c)}}_drawColorBox(e,t,r,i,o){const l=this.labelColors[r],c=this.labelPointStyles[r],{boxHeight:h,boxWidth:f}=o,m=Rn(o.bodyFont),y=_d(this,"left",o),w=i.x(y),T=h<m.lineHeight?(m.lineHeight-h)/2:0,I=t.y+T;if(o.usePointStyle){const k={radius:Math.min(f,h)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},b=i.leftForLtr(w,f)+f/2,N=I+h/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,Gg(e,k,b,N),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,Gg(e,k,b,N)}else{e.lineWidth=Ye(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;const k=i.leftForLtr(w,f),b=i.leftForLtr(i.xPlus(w,1),f-2),N=qc(l.borderRadius);Object.values(N).some(z=>z!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,Kg(e,{x:k,y:I,w:f,h,radius:N}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),Kg(e,{x:b,y:I+1,w:f-2,h:h-2,radius:N}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(k,I,f,h),e.strokeRect(k,I,f,h),e.fillStyle=l.backgroundColor,e.fillRect(b,I+1,f-2,h-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,t,r){const{body:i}=this,{bodySpacing:o,bodyAlign:l,displayColors:c,boxHeight:h,boxWidth:f,boxPadding:m}=r,y=Rn(r.bodyFont);let w=y.lineHeight,T=0;const I=Qa(r.rtl,this.x,this.width),k=function(P){t.fillText(P,I.x(e.x+T),e.y+w/2),e.y+=w+o},b=I.textAlign(l);let N,z,$,te,Q,ie,D;for(t.textAlign=l,t.textBaseline="middle",t.font=y.string,e.x=_d(this,b,r),t.fillStyle=r.bodyColor,Je(this.beforeBody,k),T=c&&b!=="right"?l==="center"?f/2+m:f+2+m:0,te=0,ie=i.length;te<ie;++te){for(N=i[te],z=this.labelTextColors[te],t.fillStyle=z,Je(N.before,k),$=N.lines,c&&$.length&&(this._drawColorBox(t,e,te,I,r),w=Math.max(y.lineHeight,h)),Q=0,D=$.length;Q<D;++Q)k($[Q]),w=y.lineHeight;Je(N.after,k)}T=0,w=y.lineHeight,Je(this.afterBody,k),e.y-=o}drawFooter(e,t,r){const i=this.footer,o=i.length;let l,c;if(o){const h=Qa(r.rtl,this.x,this.width);for(e.x=_d(this,r.footerAlign,r),e.y+=r.footerMarginTop,t.textAlign=h.textAlign(r.footerAlign),t.textBaseline="middle",l=Rn(r.footerFont),t.fillStyle=r.footerColor,t.font=l.string,c=0;c<o;++c)t.fillText(i[c],h.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+r.footerSpacing}}drawBackground(e,t,r,i){const{xAlign:o,yAlign:l}=this,{x:c,y:h}=e,{width:f,height:m}=r,{topLeft:y,topRight:w,bottomLeft:T,bottomRight:I}=qc(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(c+y,h),l==="top"&&this.drawCaret(e,t,r,i),t.lineTo(c+f-w,h),t.quadraticCurveTo(c+f,h,c+f,h+w),l==="center"&&o==="right"&&this.drawCaret(e,t,r,i),t.lineTo(c+f,h+m-I),t.quadraticCurveTo(c+f,h+m,c+f-I,h+m),l==="bottom"&&this.drawCaret(e,t,r,i),t.lineTo(c+T,h+m),t.quadraticCurveTo(c,h+m,c,h+m-T),l==="center"&&o==="left"&&this.drawCaret(e,t,r,i),t.lineTo(c,h+y),t.quadraticCurveTo(c,h,c+y,h),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,r=this.$animations,i=r&&r.x,o=r&&r.y;if(i||o){const l=Nc[e.position].call(this,this._active,this._eventPosition);if(!l)return;const c=this._size=qE(this,e),h=Object.assign({},l,this._size),f=YE(t,e,h),m=GE(e,h,f,t);(i._to!==m.x||o._to!==m.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=c.width,this.height=c.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,m))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const l=Pr(t.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&c&&(e.save(),e.globalAlpha=r,this.drawBackground(o,e,i,t),GS(e,t.textDirection),o.y+=l.top,this.drawTitle(o,e,t),this.drawBody(o,e,t),this.drawFooter(o,e,t),KS(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const r=this._active,i=e.map(({datasetIndex:c,index:h})=>{const f=this.chart.getDatasetMeta(c);if(!f)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:f.data[h],index:h}}),o=!cf(r,i),l=this._positionChanged(i,t);(o||l)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,r=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,o=this._active||[],l=this._getActiveElements(e,o,t,r),c=this._positionChanged(l,e),h=t||!cf(l,o)||c;return h&&(this._active=l,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),h}_getActiveElements(e,t,r,i){const o=this.options;if(e.type==="mouseout")return[];if(!i)return t.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const l=this.chart.getElementsAtEventForMode(e,o.mode,o,r);return o.reverse&&l.reverse(),l}_positionChanged(e,t){const{caretX:r,caretY:i,options:o}=this,l=Nc[o.position].call(this,e,t);return l!==!1&&(r!==l.x||i!==l.y)}}var tU={id:"tooltip",_element:XE,positioners:Nc,afterInit(n,e,t){t&&(n.tooltip=new XE({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:fI},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function nU(n,e){const t=[],{bounds:i,step:o,min:l,max:c,precision:h,count:f,maxTicks:m,maxDigits:y,includeBounds:w}=n,T=o||1,I=m-1,{min:k,max:b}=e,N=!lt(l),z=!lt(c),$=!lt(f),te=(b-k)/(y+1);let Q=nE((b-k)/I/T)*T,ie,D,P,A;if(Q<1e-14&&!N&&!z)return[{value:k},{value:b}];A=Math.ceil(b/Q)-Math.floor(k/Q),A>I&&(Q=nE(A*Q/I/T)*T),lt(h)||(ie=Math.pow(10,h),Q=Math.ceil(Q*ie)/ie),i==="ticks"?(D=Math.floor(k/Q)*Q,P=Math.ceil(b/Q)*Q):(D=k,P=b),N&&z&&o&&$V((c-l)/o,Q/1e3)?(A=Math.round(Math.min((c-l)/Q,m)),Q=(c-l)/A,D=l,P=c):$?(D=N?l:D,P=z?c:P,A=f-1,Q=(P-D)/A):(A=(P-D)/Q,Wc(A,Math.round(A),Q/1e3)?A=Math.round(A):A=Math.ceil(A));const V=Math.max(rE(Q),rE(D));ie=Math.pow(10,lt(h)?V:h),D=Math.round(D*ie)/ie,P=Math.round(P*ie)/ie;let L=0;for(N&&(w&&D!==l?(t.push({value:l}),D<l&&L++,Wc(Math.round((D+L*Q)*ie)/ie,l,JE(l,te,n))&&L++):D<l&&L++);L<A;++L){const j=Math.round((D+L*Q)*ie)/ie;if(z&&j>c)break;t.push({value:j})}return z&&w&&P!==c?t.length&&Wc(t[t.length-1].value,c,JE(c,te,n))?t[t.length-1].value=c:t.push({value:c}):(!z||P===c)&&t.push({value:P}),t}function JE(n,e,{horizontal:t,minRotation:r}){const i=Io(r),o=(t?Math.sin(i):Math.cos(i))||.001,l=.75*e*(""+n).length;return Math.min(e/o,l)}class rU extends Du{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return lt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:i,max:o}=this;const l=h=>i=t?i:h,c=h=>o=r?o:h;if(e){const h=rl(i),f=rl(o);h<0&&f<0?c(0):h>0&&f>0&&l(0)}if(i===o){let h=o===0?1:Math.abs(o*.05);c(o+h),e||l(i-h)}this.min=i,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},o=this._range||this,l=nU(i,o);return e.bounds==="ticks"&&HV(l,this,"value"),e.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-t)/Math.max(e.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return jS(e,this.chart.options.locale,this.options.ticks.format)}}class iU extends rU{static id="linear";static defaults={ticks:{callback:US.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=sr(e)?e:0,this.max=sr(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=Io(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,o.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Jf={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},An=Object.keys(Jf);function ZE(n,e){return n-e}function eb(n,e){if(lt(e))return null;const t=n._adapter,{parser:r,round:i,isoWeekday:o}=n._parseOpts;let l=e;return typeof r=="function"&&(l=r(l)),sr(l)||(l=typeof r=="string"?t.parse(l,r):t.parse(l)),l===null?null:(i&&(l=i==="week"&&(uu(o)||o===!0)?t.startOf(l,"isoWeek",o):t.startOf(l,i)),+l)}function tb(n,e,t,r){const i=An.length;for(let o=An.indexOf(n);o<i-1;++o){const l=Jf[An[o]],c=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((t-e)/(c*l.size))<=r)return An[o]}return An[i-1]}function sU(n,e,t,r,i){for(let o=An.length-1;o>=An.indexOf(t);o--){const l=An[o];if(Jf[l].common&&n._adapter.diff(i,r,l)>=e-1)return l}return An[t?An.indexOf(t):0]}function oU(n){for(let e=An.indexOf(n)+1,t=An.length;e<t;++e)if(Jf[An[e]].common)return An[e]}function nb(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:r,hi:i}=g_(t,e),o=t[r]>=e?t[r]:t[i];n[o]=!0}}function aU(n,e,t,r){const i=n._adapter,o=+i.startOf(e[0].value,r),l=e[e.length-1].value;let c,h;for(c=o;c<=l;c=+i.add(c,1,r))h=t[c],h>=0&&(e[h].major=!0);return e}function rb(n,e,t){const r=[],i={},o=e.length;let l,c;for(l=0;l<o;++l)c=e[l],i[c]=l,r.push({value:c,major:!1});return o===0||!t?r:aU(n,r,i,t)}class Zg extends Du{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const r=e.time||(e.time={}),i=this._adapter=new eI._date(e.adapters.date);i.init(t),Bc(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:eb(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,r=e.time.unit||"day";let{min:i,max:o,minDefined:l,maxDefined:c}=this.getUserBounds();function h(f){!l&&!isNaN(f.min)&&(i=Math.min(i,f.min)),!c&&!isNaN(f.max)&&(o=Math.max(o,f.max))}(!l||!c)&&(h(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&h(this.getMinMax(!1))),i=sr(i)&&!isNaN(i)?i:+t.startOf(Date.now(),r),o=sr(o)&&!isNaN(o)?o:+t.endOf(Date.now(),r)+1,this.min=Math.min(i,o-1),this.max=Math.max(i+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],r=e[e.length-1]),{min:t,max:r}}buildTicks(){const e=this.options,t=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const o=this.min,l=this.max,c=XV(i,o,l);return this._unit=t.unit||(r.autoSkip?tb(t.minUnit,this.min,this.max,this._getLabelCapacity(o)):sU(this,c.length,t.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:oU(this._unit),this.initOffsets(i),e.reverse&&c.reverse(),rb(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,r=0,i,o;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?t=1-i:t=(this.getDecimalForValue(e[1])-i)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?r=o:r=(o-this.getDecimalForValue(e[e.length-2]))/2);const l=e.length<3?.5:.25;t=Tr(t,0,l),r=Tr(r,0,l),this._offsets={start:t,end:r,factor:1/(t+1+r)}}_generate(){const e=this._adapter,t=this.min,r=this.max,i=this.options,o=i.time,l=o.unit||tb(o.minUnit,t,r,this._getLabelCapacity(t)),c=He(i.ticks.stepSize,1),h=l==="week"?o.isoWeekday:!1,f=uu(h)||h===!0,m={};let y=t,w,T;if(f&&(y=+e.startOf(y,"isoWeek",h)),y=+e.startOf(y,f?"day":l),e.diff(r,t,l)>1e5*c)throw new Error(t+" and "+r+" are too far apart with stepSize of "+c+" "+l);const I=i.ticks.source==="data"&&this.getDataTimestamps();for(w=y,T=0;w<r;w=+e.add(w,c,l),T++)nb(m,w,I);return(w===r||i.bounds==="ticks"||T===1)&&nb(m,w,I),Object.keys(m).sort(ZE).map(k=>+k)}getLabelForValue(e){const t=this._adapter,r=this.options.time;return r.tooltipFormat?t.format(e,r.tooltipFormat):t.format(e,r.displayFormats.datetime)}format(e,t){const i=this.options.time.displayFormats,o=this._unit,l=t||i[o];return this._adapter.format(e,l)}_tickFormatFunction(e,t,r,i){const o=this.options,l=o.ticks.callback;if(l)return ot(l,[e,t,r],this);const c=o.time.displayFormats,h=this._unit,f=this._majorUnit,m=h&&c[h],y=f&&c[f],w=r[t],T=f&&y&&w&&w.major;return this._adapter.format(e,i||(T?y:m))}generateTickLabels(e){let t,r,i;for(t=0,r=e.length;t<r;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+r)*t.factor)}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,r=this.ctx.measureText(e).width,i=Io(this.isHorizontal()?t.maxRotation:t.minRotation),o=Math.cos(i),l=Math.sin(i),c=this._resolveTickFontOptions(0).size;return{w:r*o+c*l,h:r*l+c*o}}_getLabelCapacity(e){const t=this.options.time,r=t.displayFormats,i=r[t.unit]||r.millisecond,o=this._tickFormatFunction(e,0,rb(this,[e],this._majorUnit),i),l=this._getLabelSize(o),c=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return c>0?c:1}getDataTimestamps(){let e=this._cache.data||[],t,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,r=i.length;t<r;++t)e=e.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,r;if(e.length)return e;const i=this.getLabels();for(t=0,r=i.length;t<r;++t)e.push(eb(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return ZV(e.sort(ZE))}}function vd(n,e,t){let r=0,i=n.length-1,o,l,c,h;t?(e>=n[r].pos&&e<=n[i].pos&&({lo:r,hi:i}=ko(n,"pos",e)),{pos:o,time:c}=n[r],{pos:l,time:h}=n[i]):(e>=n[r].time&&e<=n[i].time&&({lo:r,hi:i}=ko(n,"time",e)),{time:o,pos:c}=n[r],{time:l,pos:h}=n[i]);const f=l-o;return f?c+(h-c)*(e-o)/f:c}class O5 extends Zg{static id="timeseries";static defaults=Zg.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=vd(t,this.min),this._tableRange=vd(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:r}=this,i=[],o=[];let l,c,h,f,m;for(l=0,c=e.length;l<c;++l)f=e[l],f>=t&&f<=r&&i.push(f);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(l=0,c=i.length;l<c;++l)m=i[l+1],h=i[l-1],f=i[l],Math.round((m+h)/2)!==f&&o.push({time:f,pos:l/(c-1)});return o}_generate(){const e=this.min,t=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||r.length===1)&&r.push(t),r.sort((i,o)=>i-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return t.length&&r.length?e=this.normalize(t.concat(r)):e=t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(vd(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return vd(this._table,r*this._tableRange+this._minPos,!0)}}const pI="label";function ib(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function lU(n,e){const t=n.options;t&&e&&Object.assign(t,e)}function mI(n,e){n.labels=e}function gI(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:pI;const r=[];n.datasets=e.map(i=>{const o=n.datasets.find(l=>l[t]===i[t]);return!o||!i.data||r.includes(o)?{...i}:(r.push(o),Object.assign(o,i),o)})}function cU(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pI;const t={labels:[],datasets:[]};return mI(t,n.labels),gI(t,n.datasets,e),t}function uU(n,e){const{height:t=150,width:r=300,redraw:i=!1,datasetIdKey:o,type:l,data:c,options:h,plugins:f=[],fallbackContent:m,updateMode:y,...w}=n,T=W.useRef(null),I=W.useRef(null),k=()=>{T.current&&(I.current=new Xf(T.current,{type:l,data:cU(c,o),options:h&&{...h},plugins:f}),ib(e,I.current))},b=()=>{ib(e,null),I.current&&(I.current.destroy(),I.current=null)};return W.useEffect(()=>{!i&&I.current&&h&&lU(I.current,h)},[i,h]),W.useEffect(()=>{!i&&I.current&&mI(I.current.config.data,c.labels)},[i,c.labels]),W.useEffect(()=>{!i&&I.current&&c.datasets&&gI(I.current.config.data,c.datasets,o)},[i,c.datasets]),W.useEffect(()=>{I.current&&(i?(b(),setTimeout(k)):I.current.update(y))},[i,h,c.labels,c.datasets,y]),W.useEffect(()=>{I.current&&(b(),setTimeout(k))},[l]),W.useEffect(()=>(k(),()=>b()),[]),vf.createElement("canvas",{ref:T,role:"img",height:t,width:r,...w},m)}const hU=W.forwardRef(uU);function dU(n,e){return Xf.register(e),W.forwardRef((t,r)=>vf.createElement(hU,{...t,ref:r,type:n}))}const fU=dU("line",Ej),yI=6048e5,pU=864e5,Ou=6e4,Mu=36e5,mU=1e3,sb=Symbol.for("constructDateFrom");function gt(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&sb in n?n[sb](e):n instanceof Date?new n.constructor(e):new Date(e)}function Me(n,e){return gt(e||n,n)}function Zf(n,e,t){const r=Me(n,t?.in);return isNaN(e)?gt(t?.in||n,NaN):(e&&r.setDate(r.getDate()+e),r)}function I_(n,e,t){const r=Me(n,t?.in);if(isNaN(e))return gt(n,NaN);if(!e)return r;const i=r.getDate(),o=gt(n,r.getTime());o.setMonth(r.getMonth()+e+1,0);const l=o.getDate();return i>=l?o:(r.setFullYear(o.getFullYear(),o.getMonth(),i),r)}function k_(n,e,t){return gt(n,+Me(n)+e)}function gU(n,e,t){return k_(n,e*Mu)}let yU={};function $o(){return yU}function ii(n,e){const t=$o(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=Me(n,e?.in),o=i.getDay(),l=(o<r?7:0)+o-r;return i.setDate(i.getDate()-l),i.setHours(0,0,0,0),i}function ol(n,e){return ii(n,{...e,weekStartsOn:1})}function _I(n,e){const t=Me(n,e?.in),r=t.getFullYear(),i=gt(t,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const o=ol(i),l=gt(t,0);l.setFullYear(r,0,4),l.setHours(0,0,0,0);const c=ol(l);return t.getTime()>=o.getTime()?r+1:t.getTime()>=c.getTime()?r:r-1}function yf(n){const e=Me(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function Ho(n,...e){const t=gt.bind(null,e.find(r=>typeof r=="object"));return e.map(t)}function ey(n,e){const t=Me(n,e?.in);return t.setHours(0,0,0,0),t}function vI(n,e,t){const[r,i]=Ho(t?.in,n,e),o=ey(r),l=ey(i),c=+o-yf(o),h=+l-yf(l);return Math.round((c-h)/pU)}function _U(n,e){const t=_I(n,e),r=gt(n,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),ol(r)}function vU(n,e,t){const r=Me(n,t?.in);return r.setTime(r.getTime()+e*Ou),r}function wU(n,e,t){return I_(n,e*3,t)}function xU(n,e,t){return k_(n,e*1e3)}function EU(n,e,t){return Zf(n,e*7,t)}function bU(n,e,t){return I_(n,e*12,t)}function Yc(n,e){const t=+Me(n)-+Me(e);return t<0?-1:t>0?1:t}function TU(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function wI(n){return!(!TU(n)&&typeof n!="number"||isNaN(+Me(n)))}function SU(n,e,t){const[r,i]=Ho(t?.in,n,e),o=r.getFullYear()-i.getFullYear(),l=r.getMonth()-i.getMonth();return o*12+l}function IU(n,e,t){const[r,i]=Ho(t?.in,n,e);return r.getFullYear()-i.getFullYear()}function xI(n,e,t){const[r,i]=Ho(t?.in,n,e),o=ob(r,i),l=Math.abs(vI(r,i));r.setDate(r.getDate()-o*l);const c=+(ob(r,i)===-o),h=o*(l-c);return h===0?0:h}function ob(n,e){const t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function Nu(n){return e=>{const r=(n?Math[n]:Math.trunc)(e);return r===0?0:r}}function kU(n,e,t){const[r,i]=Ho(t?.in,n,e),o=(+r-+i)/Mu;return Nu(t?.roundingMethod)(o)}function P_(n,e){return+Me(n)-+Me(e)}function PU(n,e,t){const r=P_(n,e)/Ou;return Nu(t?.roundingMethod)(r)}function EI(n,e){const t=Me(n,e?.in);return t.setHours(23,59,59,999),t}function bI(n,e){const t=Me(n,e?.in),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function CU(n,e){const t=Me(n,e?.in);return+EI(t,e)==+bI(t,e)}function TI(n,e,t){const[r,i,o]=Ho(t?.in,n,n,e),l=Yc(i,o),c=Math.abs(SU(i,o));if(c<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-l*c);let h=Yc(i,o)===-l;CU(r)&&c===1&&Yc(r,o)===1&&(h=!1);const f=l*(c-+h);return f===0?0:f}function AU(n,e,t){const r=TI(n,e,t)/3;return Nu(t?.roundingMethod)(r)}function RU(n,e,t){const r=P_(n,e)/1e3;return Nu(t?.roundingMethod)(r)}function DU(n,e,t){const r=xI(n,e,t)/7;return Nu(t?.roundingMethod)(r)}function OU(n,e,t){const[r,i]=Ho(t?.in,n,e),o=Yc(r,i),l=Math.abs(IU(r,i));r.setFullYear(1584),i.setFullYear(1584);const c=Yc(r,i)===-o,h=o*(l-+c);return h===0?0:h}function MU(n,e){const t=Me(n,e?.in),r=t.getMonth(),i=r-r%3;return t.setMonth(i,1),t.setHours(0,0,0,0),t}function NU(n,e){const t=Me(n,e?.in);return t.setDate(1),t.setHours(0,0,0,0),t}function LU(n,e){const t=Me(n,e?.in),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(23,59,59,999),t}function SI(n,e){const t=Me(n,e?.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function VU(n,e){const t=Me(n,e?.in);return t.setMinutes(59,59,999),t}function FU(n,e){const t=$o(),r=t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=Me(n,e?.in),o=i.getDay(),l=(o<r?-7:0)+6-(o-r);return i.setDate(i.getDate()+l),i.setHours(23,59,59,999),i}function jU(n,e){const t=Me(n,e?.in);return t.setSeconds(59,999),t}function UU(n,e){const t=Me(n,e?.in),r=t.getMonth(),i=r-r%3+3;return t.setMonth(i,0),t.setHours(23,59,59,999),t}function zU(n,e){const t=Me(n,e?.in);return t.setMilliseconds(999),t}const BU={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},WU=(n,e,t)=>{let r;const i=BU[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function ag(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const $U={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},HU={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},qU={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},YU={date:ag({formats:$U,defaultWidth:"full"}),time:ag({formats:HU,defaultWidth:"full"}),dateTime:ag({formats:qU,defaultWidth:"full"})},GU={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},KU=(n,e,t,r)=>GU[n];function Ec(n){return(e,t)=>{const r=t?.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const l=n.defaultFormattingWidth||n.defaultWidth,c=t?.width?String(t.width):l;i=n.formattingValues[c]||n.formattingValues[l]}else{const l=n.defaultWidth,c=t?.width?String(t.width):n.defaultWidth;i=n.values[c]||n.values[l]}const o=n.argumentCallback?n.argumentCallback(e):e;return i[o]}}const QU={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},XU={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},JU={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ZU={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},e3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},t3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},n3=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},r3={ordinalNumber:n3,era:Ec({values:QU,defaultWidth:"wide"}),quarter:Ec({values:XU,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Ec({values:JU,defaultWidth:"wide"}),day:Ec({values:ZU,defaultWidth:"wide"}),dayPeriod:Ec({values:e3,defaultWidth:"wide",formattingValues:t3,defaultFormattingWidth:"wide"})};function bc(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],o=e.match(i);if(!o)return null;const l=o[0],c=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],h=Array.isArray(c)?s3(c,y=>y.test(l)):i3(c,y=>y.test(l));let f;f=n.valueCallback?n.valueCallback(h):h,f=t.valueCallback?t.valueCallback(f):f;const m=e.slice(l.length);return{value:f,rest:m}}}function i3(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function s3(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function o3(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],o=e.match(n.parsePattern);if(!o)return null;let l=n.valueCallback?n.valueCallback(o[0]):o[0];l=t.valueCallback?t.valueCallback(l):l;const c=e.slice(i.length);return{value:l,rest:c}}}const a3=/^(\d+)(th|st|nd|rd)?/i,l3=/\d+/i,c3={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},u3={any:[/^b/i,/^(a|c)/i]},h3={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},d3={any:[/1/i,/2/i,/3/i,/4/i]},f3={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},p3={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},m3={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},g3={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},y3={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},_3={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},v3={ordinalNumber:o3({matchPattern:a3,parsePattern:l3,valueCallback:n=>parseInt(n,10)}),era:bc({matchPatterns:c3,defaultMatchWidth:"wide",parsePatterns:u3,defaultParseWidth:"any"}),quarter:bc({matchPatterns:h3,defaultMatchWidth:"wide",parsePatterns:d3,defaultParseWidth:"any",valueCallback:n=>n+1}),month:bc({matchPatterns:f3,defaultMatchWidth:"wide",parsePatterns:p3,defaultParseWidth:"any"}),day:bc({matchPatterns:m3,defaultMatchWidth:"wide",parsePatterns:g3,defaultParseWidth:"any"}),dayPeriod:bc({matchPatterns:y3,defaultMatchWidth:"any",parsePatterns:_3,defaultParseWidth:"any"})},II={code:"en-US",formatDistance:WU,formatLong:YU,formatRelative:KU,localize:r3,match:v3,options:{weekStartsOn:0,firstWeekContainsDate:1}};function w3(n,e){const t=Me(n,e?.in);return vI(t,SI(t))+1}function kI(n,e){const t=Me(n,e?.in),r=+ol(t)-+_U(t);return Math.round(r/yI)+1}function C_(n,e){const t=Me(n,e?.in),r=t.getFullYear(),i=$o(),o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,l=gt(e?.in||n,0);l.setFullYear(r+1,0,o),l.setHours(0,0,0,0);const c=ii(l,e),h=gt(e?.in||n,0);h.setFullYear(r,0,o),h.setHours(0,0,0,0);const f=ii(h,e);return+t>=+c?r+1:+t>=+f?r:r-1}function x3(n,e){const t=$o(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,i=C_(n,e),o=gt(e?.in||n,0);return o.setFullYear(i,0,r),o.setHours(0,0,0,0),ii(o,e)}function PI(n,e){const t=Me(n,e?.in),r=+ii(t,e)-+x3(t,e);return Math.round(r/yI)+1}function Xe(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const as={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return Xe(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Xe(t+1,2)},d(n,e){return Xe(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Xe(n.getHours()%12||12,e.length)},H(n,e){return Xe(n.getHours(),e.length)},m(n,e){return Xe(n.getMinutes(),e.length)},s(n,e){return Xe(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return Xe(i,e.length)}},ja={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ab={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return as.y(n,e)},Y:function(n,e,t,r){const i=C_(n,r),o=i>0?i:1-i;if(e==="YY"){const l=o%100;return Xe(l,2)}return e==="Yo"?t.ordinalNumber(o,{unit:"year"}):Xe(o,e.length)},R:function(n,e){const t=_I(n);return Xe(t,e.length)},u:function(n,e){const t=n.getFullYear();return Xe(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Xe(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Xe(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return as.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return Xe(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=PI(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):Xe(i,e.length)},I:function(n,e,t){const r=kI(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):Xe(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):as.d(n,e)},D:function(n,e,t){const r=w3(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):Xe(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Xe(o,2);case"eo":return t.ordinalNumber(o,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Xe(o,e.length);case"co":return t.ordinalNumber(o,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Xe(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=ja.noon:r===0?i=ja.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=ja.evening:r>=12?i=ja.afternoon:r>=4?i=ja.morning:i=ja.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return as.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):as.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):Xe(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):Xe(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):as.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):as.s(n,e)},S:function(n,e){return as.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return cb(r);case"XXXX":case"XX":return bo(r);case"XXXXX":case"XXX":default:return bo(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return cb(r);case"xxxx":case"xx":return bo(r);case"xxxxx":case"xxx":default:return bo(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+lb(r,":");case"OOOO":default:return"GMT"+bo(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+lb(r,":");case"zzzz":default:return"GMT"+bo(r,":")}},t:function(n,e,t){const r=Math.trunc(+n/1e3);return Xe(r,e.length)},T:function(n,e,t){return Xe(+n,e.length)}};function lb(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),o=r%60;return o===0?t+String(i):t+String(i)+e+Xe(o,2)}function cb(n,e){return n%60===0?(n>0?"-":"+")+Xe(Math.abs(n)/60,2):bo(n,e)}function bo(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Xe(Math.trunc(r/60),2),o=Xe(r%60,2);return t+i+e+o}const ub=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},CI=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},E3=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return ub(n,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",ub(r,e)).replace("{{time}}",CI(i,e))},ty={p:CI,P:E3},b3=/^D+$/,T3=/^Y+$/,S3=["D","DD","YY","YYYY"];function AI(n){return b3.test(n)}function RI(n){return T3.test(n)}function ny(n,e,t){const r=I3(n,e,t);if(console.warn(r),S3.includes(n))throw new RangeError(r)}function I3(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const k3=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,P3=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,C3=/^'([^]*?)'?$/,A3=/''/g,R3=/[a-zA-Z]/;function D3(n,e,t){const r=$o(),i=t?.locale??r.locale??II,o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,l=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,c=Me(n,t?.in);if(!wI(c))throw new RangeError("Invalid time value");let h=e.match(P3).map(m=>{const y=m[0];if(y==="p"||y==="P"){const w=ty[y];return w(m,i.formatLong)}return m}).join("").match(k3).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const y=m[0];if(y==="'")return{isToken:!1,value:O3(m)};if(ab[y])return{isToken:!0,value:m};if(y.match(R3))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:m}});i.localize.preprocessor&&(h=i.localize.preprocessor(c,h));const f={firstWeekContainsDate:o,weekStartsOn:l,locale:i};return h.map(m=>{if(!m.isToken)return m.value;const y=m.value;(!t?.useAdditionalWeekYearTokens&&RI(y)||!t?.useAdditionalDayOfYearTokens&&AI(y))&&ny(y,e,String(n));const w=ab[y[0]];return w(c,y,i.localize,f)}).join("")}function O3(n){const e=n.match(C3);return e?e[1].replace(A3,"'"):n}function M3(){return Object.assign({},$o())}function N3(n,e){const t=Me(n,e?.in).getDay();return t===0?7:t}function L3(n,e){const t=V3(e)?new e(0):gt(e,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),t}function V3(n){return typeof n=="function"&&n.prototype?.constructor===n}const F3=10;class DI{subPriority=0;validate(e,t){return!0}}class j3 extends DI{constructor(e,t,r,i,o){super(),this.value=e,this.validateValue=t,this.setValue=r,this.priority=i,o&&(this.subPriority=o)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,r){return this.setValue(e,t,this.value,r)}}class U3 extends DI{priority=F3;subPriority=-1;constructor(e,t){super(),this.context=e||(r=>gt(t,r))}set(e,t){return t.timestampIsSet?e:gt(e,L3(e,this.context))}}class Ge{run(e,t,r,i){const o=this.parse(e,t,r,i);return o?{setter:new j3(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(e,t,r){return!0}}class z3 extends Ge{priority=140;parse(e,t,r){switch(t){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});case"GGGG":default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,t,r){return t.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const bt={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Yr={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Tt(n,e){return n&&{value:e(n.value),rest:n.rest}}function ft(n,e){const t=e.match(n);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function Gr(n,e){const t=e.match(n);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const r=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,o=t[3]?parseInt(t[3],10):0,l=t[5]?parseInt(t[5],10):0;return{value:r*(i*Mu+o*Ou+l*mU),rest:e.slice(t[0].length)}}function OI(n){return ft(bt.anyDigitsSigned,n)}function yt(n,e){switch(n){case 1:return ft(bt.singleDigit,e);case 2:return ft(bt.twoDigits,e);case 3:return ft(bt.threeDigits,e);case 4:return ft(bt.fourDigits,e);default:return ft(new RegExp("^\\d{1,"+n+"}"),e)}}function _f(n,e){switch(n){case 1:return ft(bt.singleDigitSigned,e);case 2:return ft(bt.twoDigitsSigned,e);case 3:return ft(bt.threeDigitsSigned,e);case 4:return ft(bt.fourDigitsSigned,e);default:return ft(new RegExp("^-?\\d{1,"+n+"}"),e)}}function A_(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function MI(n,e){const t=e>0,r=t?e:1-e;let i;if(r<=50)i=n||100;else{const o=r+50,l=Math.trunc(o/100)*100,c=n>=o%100;i=n+l-(c?100:0)}return t?i:1-i}function NI(n){return n%400===0||n%4===0&&n%100!==0}class B3 extends Ge{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,t,r){const i=o=>({year:o,isTwoDigitYear:t==="yy"});switch(t){case"y":return Tt(yt(4,e),i);case"yo":return Tt(r.ordinalNumber(e,{unit:"year"}),i);default:return Tt(yt(t.length,e),i)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r){const i=e.getFullYear();if(r.isTwoDigitYear){const l=MI(r.year,i);return e.setFullYear(l,0,1),e.setHours(0,0,0,0),e}const o=!("era"in t)||t.era===1?r.year:1-r.year;return e.setFullYear(o,0,1),e.setHours(0,0,0,0),e}}class W3 extends Ge{priority=130;parse(e,t,r){const i=o=>({year:o,isTwoDigitYear:t==="YY"});switch(t){case"Y":return Tt(yt(4,e),i);case"Yo":return Tt(r.ordinalNumber(e,{unit:"year"}),i);default:return Tt(yt(t.length,e),i)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r,i){const o=C_(e,i);if(r.isTwoDigitYear){const c=MI(r.year,o);return e.setFullYear(c,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),ii(e,i)}const l=!("era"in t)||t.era===1?r.year:1-r.year;return e.setFullYear(l,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),ii(e,i)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class $3 extends Ge{priority=130;parse(e,t){return _f(t==="R"?4:t.length,e)}set(e,t,r){const i=gt(e,0);return i.setFullYear(r,0,4),i.setHours(0,0,0,0),ol(i)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class H3 extends Ge{priority=130;parse(e,t){return _f(t==="u"?4:t.length,e)}set(e,t,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class q3 extends Ge{priority=120;parse(e,t,r){switch(t){case"Q":case"QQ":return yt(t.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class Y3 extends Ge{priority=120;parse(e,t,r){switch(t){case"q":case"qq":return yt(t.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class G3 extends Ge{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,t,r){const i=o=>o-1;switch(t){case"M":return Tt(ft(bt.month,e),i);case"MM":return Tt(yt(2,e),i);case"Mo":return Tt(r.ordinalNumber(e,{unit:"month"}),i);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}class K3 extends Ge{priority=110;parse(e,t,r){const i=o=>o-1;switch(t){case"L":return Tt(ft(bt.month,e),i);case"LL":return Tt(yt(2,e),i);case"Lo":return Tt(r.ordinalNumber(e,{unit:"month"}),i);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function Q3(n,e,t){const r=Me(n,t?.in),i=PI(r,t)-e;return r.setDate(r.getDate()-i*7),Me(r,t?.in)}class X3 extends Ge{priority=100;parse(e,t,r){switch(t){case"w":return ft(bt.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return yt(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r,i){return ii(Q3(e,r,i),i)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function J3(n,e,t){const r=Me(n,t?.in),i=kI(r,t)-e;return r.setDate(r.getDate()-i*7),r}class Z3 extends Ge{priority=100;parse(e,t,r){switch(t){case"I":return ft(bt.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return yt(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r){return ol(J3(e,r))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const e6=[31,28,31,30,31,30,31,31,30,31,30,31],t6=[31,29,31,30,31,30,31,31,30,31,30,31];class n6 extends Ge{priority=90;subPriority=1;parse(e,t,r){switch(t){case"d":return ft(bt.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return yt(t.length,e)}}validate(e,t){const r=e.getFullYear(),i=NI(r),o=e.getMonth();return i?t>=1&&t<=t6[o]:t>=1&&t<=e6[o]}set(e,t,r){return e.setDate(r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class r6 extends Ge{priority=90;subpriority=1;parse(e,t,r){switch(t){case"D":case"DD":return ft(bt.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return yt(t.length,e)}}validate(e,t){const r=e.getFullYear();return NI(r)?t>=1&&t<=366:t>=1&&t<=365}set(e,t,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function R_(n,e,t){const r=$o(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,o=Me(n,t?.in),l=o.getDay(),h=(e%7+7)%7,f=7-i,m=e<0||e>6?e-(l+f)%7:(h+f)%7-(l+f)%7;return Zf(o,m,t)}class i6 extends Ge{priority=90;parse(e,t,r){switch(t){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,i){return e=R_(e,r,i),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class s6 extends Ge{priority=90;parse(e,t,r,i){const o=l=>{const c=Math.floor((l-1)/7)*7;return(l+i.weekStartsOn+6)%7+c};switch(t){case"e":case"ee":return Tt(yt(t.length,e),o);case"eo":return Tt(r.ordinalNumber(e,{unit:"day"}),o);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,i){return e=R_(e,r,i),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class o6 extends Ge{priority=90;parse(e,t,r,i){const o=l=>{const c=Math.floor((l-1)/7)*7;return(l+i.weekStartsOn+6)%7+c};switch(t){case"c":case"cc":return Tt(yt(t.length,e),o);case"co":return Tt(r.ordinalNumber(e,{unit:"day"}),o);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,i){return e=R_(e,r,i),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function a6(n,e,t){const r=Me(n,t?.in),i=N3(r,t),o=e-i;return Zf(r,o,t)}class l6 extends Ge{priority=90;parse(e,t,r){const i=o=>o===0?7:o;switch(t){case"i":case"ii":return yt(t.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return Tt(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),i);case"iiiii":return Tt(r.day(e,{width:"narrow",context:"formatting"}),i);case"iiiiii":return Tt(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),i);case"iiii":default:return Tt(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),i)}}validate(e,t){return t>=1&&t<=7}set(e,t,r){return e=a6(e,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class c6 extends Ge{priority=80;parse(e,t,r){switch(t){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(A_(r),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class u6 extends Ge{priority=80;parse(e,t,r){switch(t){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(A_(r),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class h6 extends Ge{priority=80;parse(e,t,r){switch(t){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(A_(r),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class d6 extends Ge{priority=70;parse(e,t,r){switch(t){case"h":return ft(bt.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return yt(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,r){const i=e.getHours()>=12;return i&&r<12?e.setHours(r+12,0,0,0):!i&&r===12?e.setHours(0,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class f6 extends Ge{priority=70;parse(e,t,r){switch(t){case"H":return ft(bt.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return yt(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,r){return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class p6 extends Ge{priority=70;parse(e,t,r){switch(t){case"K":return ft(bt.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return yt(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class m6 extends Ge{priority=70;parse(e,t,r){switch(t){case"k":return ft(bt.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return yt(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,r){const i=r<=24?r%24:r;return e.setHours(i,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class g6 extends Ge{priority=60;parse(e,t,r){switch(t){case"m":return ft(bt.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return yt(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setMinutes(r,0,0),e}incompatibleTokens=["t","T"]}class y6 extends Ge{priority=50;parse(e,t,r){switch(t){case"s":return ft(bt.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return yt(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setSeconds(r,0),e}incompatibleTokens=["t","T"]}class _6 extends Ge{priority=30;parse(e,t){const r=i=>Math.trunc(i*Math.pow(10,-t.length+3));return Tt(yt(t.length,e),r)}set(e,t,r){return e.setMilliseconds(r),e}incompatibleTokens=["t","T"]}class v6 extends Ge{priority=10;parse(e,t){switch(t){case"X":return Gr(Yr.basicOptionalMinutes,e);case"XX":return Gr(Yr.basic,e);case"XXXX":return Gr(Yr.basicOptionalSeconds,e);case"XXXXX":return Gr(Yr.extendedOptionalSeconds,e);case"XXX":default:return Gr(Yr.extended,e)}}set(e,t,r){return t.timestampIsSet?e:gt(e,e.getTime()-yf(e)-r)}incompatibleTokens=["t","T","x"]}class w6 extends Ge{priority=10;parse(e,t){switch(t){case"x":return Gr(Yr.basicOptionalMinutes,e);case"xx":return Gr(Yr.basic,e);case"xxxx":return Gr(Yr.basicOptionalSeconds,e);case"xxxxx":return Gr(Yr.extendedOptionalSeconds,e);case"xxx":default:return Gr(Yr.extended,e)}}set(e,t,r){return t.timestampIsSet?e:gt(e,e.getTime()-yf(e)-r)}incompatibleTokens=["t","T","X"]}class x6 extends Ge{priority=40;parse(e){return OI(e)}set(e,t,r){return[gt(e,r*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class E6 extends Ge{priority=20;parse(e){return OI(e)}set(e,t,r){return[gt(e,r),{timestampIsSet:!0}]}incompatibleTokens="*"}const b6={G:new z3,y:new B3,Y:new W3,R:new $3,u:new H3,Q:new q3,q:new Y3,M:new G3,L:new K3,w:new X3,I:new Z3,d:new n6,D:new r6,E:new i6,e:new s6,c:new o6,i:new l6,a:new c6,b:new u6,B:new h6,h:new d6,H:new f6,K:new p6,k:new m6,m:new g6,s:new y6,S:new _6,X:new v6,x:new w6,t:new x6,T:new E6},T6=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,S6=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,I6=/^'([^]*?)'?$/,k6=/''/g,P6=/\S/,C6=/[a-zA-Z]/;function A6(n,e,t,r){const i=()=>gt(r?.in||t,NaN),o=M3(),l=r?.locale??o.locale??II,c=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,h=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??o.weekStartsOn??o.locale?.options?.weekStartsOn??0;if(!e)return n?i():Me(t,r?.in);const f={firstWeekContainsDate:c,weekStartsOn:h,locale:l},m=[new U3(r?.in,t)],y=e.match(S6).map(b=>{const N=b[0];if(N in ty){const z=ty[N];return z(b,l.formatLong)}return b}).join("").match(T6),w=[];for(let b of y){!r?.useAdditionalWeekYearTokens&&RI(b)&&ny(b,e,n),!r?.useAdditionalDayOfYearTokens&&AI(b)&&ny(b,e,n);const N=b[0],z=b6[N];if(z){const{incompatibleTokens:$}=z;if(Array.isArray($)){const Q=w.find(ie=>$.includes(ie.token)||ie.token===N);if(Q)throw new RangeError(`The format string mustn't contain \`${Q.fullToken}\` and \`${b}\` at the same time`)}else if(z.incompatibleTokens==="*"&&w.length>0)throw new RangeError(`The format string mustn't contain \`${b}\` and any other token at the same time`);w.push({token:N,fullToken:b});const te=z.run(n,b,l.match,f);if(!te)return i();m.push(te.setter),n=te.rest}else{if(N.match(C6))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");if(b==="''"?b="'":N==="'"&&(b=R6(b)),n.indexOf(b)===0)n=n.slice(b.length);else return i()}}if(n.length>0&&P6.test(n))return i();const T=m.map(b=>b.priority).sort((b,N)=>N-b).filter((b,N,z)=>z.indexOf(b)===N).map(b=>m.filter(N=>N.priority===b).sort((N,z)=>z.subPriority-N.subPriority)).map(b=>b[0]);let I=Me(t,r?.in);if(isNaN(+I))return i();const k={};for(const b of T){if(!b.validate(I,f))return i();const N=b.set(I,k,f);Array.isArray(N)?(I=N[0],Object.assign(k,N[1])):I=N}return I}function R6(n){return n.match(I6)[1].replace(k6,"'")}function D6(n,e){const t=Me(n,e?.in);return t.setMinutes(0,0,0),t}function O6(n,e){const t=Me(n,e?.in);return t.setSeconds(0,0),t}function M6(n,e){const t=Me(n,e?.in);return t.setMilliseconds(0),t}function N6(n,e){const t=()=>gt(e?.in,NaN),r=e?.additionalDigits??2,i=j6(n);let o;if(i.date){const f=U6(i.date,r);o=z6(f.restDateString,f.year)}if(!o||isNaN(+o))return t();const l=+o;let c=0,h;if(i.time&&(c=B6(i.time),isNaN(c)))return t();if(i.timezone){if(h=W6(i.timezone),isNaN(h))return t()}else{const f=new Date(l+c),m=Me(0,e?.in);return m.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),m.setHours(f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()),m}return Me(l+c+h,e?.in)}const wd={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},L6=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,V6=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,F6=/^([+-])(\d{2})(?::?(\d{2}))?$/;function j6(n){const e={},t=n.split(wd.dateTimeDelimiter);let r;if(t.length>2)return e;if(/:/.test(t[0])?r=t[0]:(e.date=t[0],r=t[1],wd.timeZoneDelimiter.test(e.date)&&(e.date=n.split(wd.timeZoneDelimiter)[0],r=n.substr(e.date.length,n.length))),r){const i=wd.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function U6(n,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=n.match(t);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:o===null?i:o*100,restDateString:n.slice((r[1]||r[2]).length)}}function z6(n,e){if(e===null)return new Date(NaN);const t=n.match(L6);if(!t)return new Date(NaN);const r=!!t[4],i=Tc(t[1]),o=Tc(t[2])-1,l=Tc(t[3]),c=Tc(t[4]),h=Tc(t[5])-1;if(r)return G6(e,c,h)?$6(e,c,h):new Date(NaN);{const f=new Date(0);return!q6(e,o,l)||!Y6(e,i)?new Date(NaN):(f.setUTCFullYear(e,o,Math.max(i,l)),f)}}function Tc(n){return n?parseInt(n):1}function B6(n){const e=n.match(V6);if(!e)return NaN;const t=lg(e[1]),r=lg(e[2]),i=lg(e[3]);return K6(t,r,i)?t*Mu+r*Ou+i*1e3:NaN}function lg(n){return n&&parseFloat(n.replace(",","."))||0}function W6(n){if(n==="Z")return 0;const e=n.match(F6);if(!e)return 0;const t=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return Q6(r,i)?t*(r*Mu+i*Ou):NaN}function $6(n,e,t){const r=new Date(0);r.setUTCFullYear(n,0,4);const i=r.getUTCDay()||7,o=(e-1)*7+t+1-i;return r.setUTCDate(r.getUTCDate()+o),r}const H6=[31,null,31,30,31,30,31,31,30,31,30,31];function LI(n){return n%400===0||n%4===0&&n%100!==0}function q6(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(H6[e]||(LI(n)?29:28))}function Y6(n,e){return e>=1&&e<=(LI(n)?366:365)}function G6(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function K6(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function Q6(n,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const X6={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};eI._date.override({_id:"date-fns",formats:function(){return X6},parse:function(n,e){if(n===null||typeof n>"u")return null;const t=typeof n;return t==="number"||n instanceof Date?n=Me(n):t==="string"&&(typeof e=="string"?n=A6(n,e,new Date,this.options):n=N6(n,this.options)),wI(n)?n.getTime():null},format:function(n,e){return D3(n,e,this.options)},add:function(n,e,t){switch(t){case"millisecond":return k_(n,e);case"second":return xU(n,e);case"minute":return vU(n,e);case"hour":return gU(n,e);case"day":return Zf(n,e);case"week":return EU(n,e);case"month":return I_(n,e);case"quarter":return wU(n,e);case"year":return bU(n,e);default:return n}},diff:function(n,e,t){switch(t){case"millisecond":return P_(n,e);case"second":return RU(n,e);case"minute":return PU(n,e);case"hour":return kU(n,e);case"day":return xI(n,e);case"week":return DU(n,e);case"month":return TI(n,e);case"quarter":return AU(n,e);case"year":return OU(n,e);default:return 0}},startOf:function(n,e,t){switch(e){case"second":return M6(n);case"minute":return O6(n);case"hour":return D6(n);case"day":return ey(n);case"week":return ii(n);case"isoWeek":return ii(n,{weekStartsOn:+t});case"month":return NU(n);case"quarter":return MU(n);case"year":return SI(n);default:return n}},endOf:function(n,e){switch(e){case"second":return zU(n);case"minute":return jU(n);case"hour":return VU(n);case"day":return EI(n);case"week":return FU(n);case"month":return bI(n);case"quarter":return UU(n);case"year":return LU(n);default:return n}}});const J6=typeof window<"u"&&window.innerWidth>=768;Xf.register(Zg,iU,z4,U4,tU,Y4);const Z6={"1h":{limit:60,aggregate:1,unit:"minute"},"1d":{limit:24,aggregate:1,unit:"hour"},"7d":{limit:7,aggregate:1,unit:"day"},"1m":{limit:30,aggregate:1,unit:"day"},"6m":{limit:180,aggregate:1,unit:"day"}},e5=["BTC","ETH","SOL","ADA","MATIC"],t5=()=>{const[n,e]=W.useState("BTC"),[t,r]=W.useState("1h"),[i,o]=W.useState([]),[l,c]=W.useState("");W.useEffect(()=>{(async()=>{try{const w=Z6[t],k=(await It.get(`https://min-api.cryptocompare.com/data/v2/histo${w.unit}`,{params:{fsym:n,tsym:"USD",...w}})).data.Data.Data.map(b=>({time:b.time*1e3,close:b.close}));if(o(k),k.length>1){const b=k[0].close,z=(k[k.length-1].close-b)/b*100;c(`Sur la priode ${t}, ${n} a ${z>=0?"gagn":"perdu"} ${Math.abs(z).toFixed(2)}%.`)}}catch(w){console.error("Erreur fetch historique :",w.message),o([]),c("")}})()},[n,t]);const h=useMemo(()=>{if(i.length<20)return[];const T=i.map(z=>z.close),I=(z,$)=>z.map((te,Q)=>Q<$-1?null:z.slice(Q-$+1,Q+1).reduce((ie,D)=>ie+D,0)/$),k=I(T,5),b=I(T,20),N=[];for(let z=1;z<i.length;z++)k[z-1]!=null&&b[z-1]!=null&&(k[z]>b[z]&&k[z-1]<=b[z-1]&&N.push({time:i[z].time,type:"buy"}),k[z]<b[z]&&k[z-1]>=b[z-1]&&N.push({time:i[z].time,type:"sell"}));return N},[i]),f=useMemo(()=>({datasets:[{label:`${n} prix`,data:i.map(y=>({x:y.time,y:y.close})),borderColor:"#eee",pointRadius:0},{label:"Signaux achat",data:h.filter(y=>y.type==="buy").map(y=>({x:y.time,y:null})),borderColor:"#10b981",backgroundColor:"#10b981",showLine:!1,pointStyle:"triangle",pointRadius:8},{label:"Signaux vente",data:h.filter(y=>y.type==="sell").map(y=>({x:y.time,y:null})),borderColor:"#ef4444",backgroundColor:"#ef4444",showLine:!1,pointStyle:"rectRot",pointRadius:8}]}),[n,i,h]),m={responsive:!0,scales:{x:{type:"time",grid:{color:"#333"},ticks:{color:"#ccc"}},y:{grid:{color:"#333"},ticks:{color:"#ccc"}}},plugins:{legend:{labels:{color:"#ccc"}},tooltip:{bodyColor:"#000",backgroundColor:"#fff"}}};return x.jsxs("div",{style:{padding:"6rem 2rem 2rem",marginTop:"4rem",backgroundImage:'url("/backgrounds/homebackground.png")',backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:J6?"fixed":"scroll",color:"#eee",fontFamily:"sans-serif",minHeight:"100vh"},children:[x.jsxs("h1",{children:[" Analyse ",n,"/USD  ",t]}),x.jsxs("div",{style:{marginBottom:"1rem",backgroundColor:"rgba(0,0,0,0.5)",padding:"1rem",borderRadius:"8px",backdropFilter:"blur(8px)"},children:[x.jsx("select",{value:n,onChange:y=>e(y.target.value),style:{padding:"0.5rem",marginRight:"1rem",background:"#222",color:"#eee",border:"1px solid #444"},children:e5.map(y=>x.jsx("option",{value:y,children:y},y))}),["1h","1d","7d","1m","6m"].map(y=>x.jsx("button",{onClick:()=>r(y),style:{marginRight:"0.5rem",padding:"0.5rem 1rem",background:y===t?"#10b981":"#222",color:y===t?"#000":"#ccc",border:"1px solid #444",cursor:"pointer"},children:y},y))]}),x.jsx("div",{style:{padding:"1rem",backgroundColor:"rgba(0,0,0,0.5)",borderRadius:"8px",backdropFilter:"blur(8px)",boxShadow:"0 2px 8px rgba(0,0,0,0.6)"},children:x.jsx(fU,{data:f,options:m})}),x.jsxs("div",{style:{marginTop:"1.5rem",color:"#ccc",backgroundColor:"rgba(0,0,0,0.5)",padding:"1rem",borderRadius:"8px",backdropFilter:"blur(8px)"},children:[x.jsx("strong",{children:"Lgende :"}),x.jsxs("ul",{style:{marginTop:"0.5rem",lineHeight:1.6},children:[x.jsxs("li",{children:[x.jsx("span",{style:{color:"#10b981"},children:""})," : signal dachat"]}),x.jsxs("li",{children:[x.jsx("span",{style:{color:"#ef4444"},children:""})," : signal de vente"]})]})]}),l&&x.jsx("p",{style:{marginTop:"1rem",color:"#aaa",backgroundColor:"rgba(0,0,0,0.5)",padding:"1rem",borderRadius:"8px",backdropFilter:"blur(8px)"},children:l})]})};async function n5(n=25){const e=nf(kr,"signals"),t=L1(e,JO("timestamp","desc"),ZO(n));return(await sf(t)).docs.map(i=>i.data())}const r5=typeof window<"u"&&window.innerWidth>=768,i5=()=>{const[n,e]=W.useState([]),[t,r]=W.useState([]),i=f=>Number(f||0).toFixed(2),o=f=>f==="BUY"?"#0f0":f==="SELL"?"#f00":f==="CONTEXT"?"#4ea8de":"#aaa",l=(f="")=>f.includes("Faible")?"lightgreen":f.includes("Moyen")?"orange":f.includes("lev")?"salmon":"#ccc",c=async()=>{try{const m=await(await fetch("https://utc-api.onrender.com".replace(/\/+$/,"")+"/get-latest-signals")).json();Array.isArray(m.log)?r(m.log.slice(-25).reverse()):r([" Format de logs inattendu."])}catch(f){console.error(" Erreur chargement logs:",f),r(m=>[...m," Erreur lecture logs serveur."])}},h=async()=>{try{const f=await n5();if(!Array.isArray(f))throw new Error("Donnes invalides");const m=[...f].sort((y,w)=>{const T=new Date(y.timestamp||0);return new Date(w.timestamp||0)-T});e(m)}catch(f){console.error(" Erreur chargement Firestore :",f),e([])}};return W.useEffect(()=>{h(),c();const f=setInterval(()=>{h(),c()},3e4);return()=>clearInterval(f)},[]),x.jsxs("div",{style:{backgroundImage:'url("/backgrounds/homebackground.png")',backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:r5?"fixed":"scroll",padding:"6rem 2rem 2rem",minHeight:"100vh",color:"#fff",fontFamily:"sans-serif"},children:[x.jsx("div",{style:{position:"sticky",top:0,zIndex:100,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(8px)",padding:"1rem",borderRadius:"6px",marginBottom:"1.5rem"},children:x.jsx("h1",{children:" Signaux IA"})}),x.jsx("div",{style:{backgroundColor:"rgba(0,0,0,0.5)",borderRadius:"6px",padding:"1rem",marginBottom:"2rem",fontFamily:"monospace",fontSize:"0.9rem",maxHeight:"180px",overflowY:"auto",boxShadow:"inset 0 0 4px #000"},children:t.length===0?x.jsx("div",{style:{color:"#888"},children:"Aucun log pour le moment"}):t.map((f,m)=>x.jsx("div",{style:{color:"#4ea8de"},children:f},m))}),x.jsx("div",{style:{backgroundColor:"rgba(0,0,0,0.5)",padding:"1rem",borderRadius:"8px",maxHeight:"65vh",overflowY:"auto"},children:n.length===0?x.jsx("p",{style:{color:"#888"},children:"Aucun signal pour linstant."}):x.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:n.map((f,m)=>x.jsxs("div",{style:{borderLeft:`6px solid ${o(f.type)}`,backgroundColor:"rgba(30, 30, 30, 0.6)",backdropFilter:"blur(8px)",borderRadius:"8px",padding:"1rem",width:"100%",boxSizing:"border-box"},children:[x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",alignItems:"center"},children:[x.jsx("div",{style:{fontWeight:"bold",fontSize:"1.2rem"},children:f.crypto||""}),x.jsxs("div",{style:{color:"#ccc",fontSize:"1rem"},children:[" ",f.type_ia||f.type||"inconnu"]}),x.jsxs("div",{style:{color:l(f.risk),fontSize:"1rem"},children:["Risque : ",f.risk||""]})]}),x.jsxs("div",{style:{fontSize:"0.9rem",color:"#aaa",marginTop:"0.3rem"},children:[" Score IA : ",i(f.score)," / 5",f.score20!==void 0&&` | Score global : ${i(f.score20)} / 20`,x.jsx("br",{})," ",new Date(f.timestamp).toLocaleString()]}),Array.isArray(f.explanation)&&x.jsx("ul",{style:{marginTop:"0.5rem",color:"#ddd",fontSize:"0.95rem",lineHeight:"1.4",paddingLeft:"1.2rem"},children:f.explanation.map((y,w)=>x.jsx("li",{children:y},w))}),x.jsx("div",{style:{marginTop:"0.5rem"},children:x.jsx("a",{href:`https://www.tradingview.com/symbols/${f.crypto?.replace("/","")}USD`,target:"_blank",rel:"noreferrer",style:{color:"#4ea8de",fontWeight:"bold",textDecoration:"none"},children:" Voir sur TradingView"})})]},m))})})]})},s5=({show:n,symbol:e,price:t,percent:r,onChangePercent:i,onSetMax:o,onClose:l,onConfirm:c})=>n?x.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"sans-serif"},children:x.jsxs("div",{style:{backgroundColor:"#222",padding:"2rem",borderRadius:"8px",maxWidth:"400px",width:"90%",color:"#fff"},children:[x.jsxs("h2",{children:[" Vente IA : ",e]}),x.jsxs("p",{children:[" Prix actuel : $",t.toFixed(4)]}),x.jsx("label",{htmlFor:"percent",children:" Pourcentage  vendre :"}),x.jsx("input",{id:"percent",type:"range",min:"1",max:"100",value:r,onChange:i,style:{width:"100%",margin:"0.5rem 0"}}),x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.9rem"},children:[x.jsxs("span",{children:[r,"%"]}),x.jsx("button",{onClick:o,style:{backgroundColor:"#4ea8de",border:"none",padding:"4px 8px",borderRadius:"4px",cursor:"pointer",color:"#fff"},children:"MAX"})]}),x.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"1rem",marginTop:"1.5rem"},children:[x.jsx("button",{onClick:l,style:{padding:"6px 12px",backgroundColor:"#888",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Annuler"}),x.jsx("button",{onClick:c,style:{padding:"6px 12px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"VENDRE"})]})]})}):null,o5=()=>{const{iaName:n,iaStart:e,iaCash:t,iaPositions:r=[],iaHistory:i=[],iaCurrentPrices:o={},iaTotalProfit:l,iaTotalProfitPercent:c,updateIaPrices:h,resetIATrader:f}=W.useContext(l_),[m]=W.useState(()=>new Date(e)),[y,w]=W.useState([]),[T,I]=W.useState(!0),[k,b]=W.useState([]),[N,z]=W.useState(!1),[$,te]=W.useState(""),[Q,ie]=W.useState(0),[D,P]=W.useState(100);W.useEffect(()=>{const se=JSON.parse(localStorage.getItem("ia-pt-history")||"[]");w(se)},[]),W.useEffect(()=>{const se=async()=>{try{const ae=(await(await fetch("https://utc-api.onrender.com".replace(/\/+$/,"")+"/trader-log")).text()).split(`
`).filter(Boolean).slice(-50).reverse();b(ae)}catch{b([" Erreur lors du chargement des logs du Trader."])}};se();const fe=setInterval(se,15e3);return()=>clearInterval(fe)},[]);const A=se=>Number(se).toFixed(2),V=r.reduce((se,fe)=>se+fe.quantity*fe.buyPrice,0),L=r.length,j=i.filter(se=>se.type==="buy").length,O=i.filter(se=>se.type==="sell"&&se.profit>0).length;return x.jsxs("div",{style:{padding:"6rem 2rem 2rem",backgroundImage:'url("/backgrounds/iatraderbackground.png")',backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed",color:"#fff",fontFamily:"sans-serif",minHeight:"100vh"},children:[x.jsxs("div",{style:{position:"sticky",top:"5rem",zIndex:100,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(8px)",padding:"1rem",borderRadius:"6px",marginBottom:"2rem"},children:[x.jsx("h1",{children:" IA Trader"}),x.jsxs("div",{style:{marginBottom:"1rem"},children:[x.jsx("button",{onClick:()=>I(!T),style:{padding:"8px 12px",backgroundColor:"#4ea8de",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:T?" Masquer Console IA":" Afficher Console IA"}),T&&x.jsx("div",{style:{marginTop:"1rem",backgroundColor:"rgba(0,0,0,0.6)",borderRadius:"6px",padding:"1rem",fontFamily:"monospace",fontSize:"0.85rem",maxHeight:"240px",overflowY:"scroll",boxShadow:"inset 0 0 4px #000"},children:k.map((se,fe)=>x.jsx("div",{style:{color:"#ccc",marginBottom:"2px"},children:se},fe))})]}),x.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[x.jsxs("h2",{style:{color:"#aaa"},children:[n," |  Dbut du PT : ",m.toLocaleString()]}),x.jsx("button",{onClick:h,style:{padding:"6px 12px",backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",animation:"shake 0.4s"},children:" UPDATE PRICES NOW"}),x.jsx("button",{onClick:()=>{window.confirm("Confirmer la rinitialisation de l'IA Trader  10 000 $ ?")&&f()},style:{padding:"6px 12px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:" RESET IA TRADER TO 10000$"})]})]}),x.jsxs("section",{style:{backgroundColor:"rgba(30,30,30,0.6)",backdropFilter:"blur(8px)",padding:"1rem",borderRadius:"8px",marginBottom:"2rem"},children:[x.jsx("h3",{style:{marginTop:0},children:" Bilan"}),x.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem"},children:[x.jsxs("div",{children:[" Solde total : $",A(t+V)]}),x.jsxs("div",{children:[" Cash disponible : $",A(t)]}),x.jsxs("div",{children:[" Investi : $",A(V)]}),x.jsxs("div",{children:[" Positions ouvertes : ",L]}),x.jsxs("div",{children:[" Nombre de trades : ",j]}),x.jsxs("div",{children:[" Trades positifs : ",O," / ",j]}),x.jsxs("div",{style:{marginLeft:"auto",fontWeight:"bold",fontSize:"1.1rem",padding:"0.5rem 1rem",backgroundColor:"#222",borderRadius:"6px",color:l>=0?"lightgreen":"salmon"},children:[" Rendement total : $",A(l)," (",A(c),"%)"]})]})]}),x.jsxs("section",{style:{marginBottom:"2rem"},children:[x.jsx("h3",{children:" Positions en cours"}),r.length===0?x.jsx("p",{children:"Aucune position ouverte."}):x.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:r.map(se=>{const fe=o[se.symbol]??0,Se=se.quantity*se.buyPrice,re=se.quantity*fe,ae=re-Se,J=(re/Se-1)*100;return x.jsxs("div",{style:{borderLeft:`6px solid ${ae>=0?"#0f0":"#f00"}`,backgroundColor:"rgba(30,30,30,0.6)",backdropFilter:"blur(8px)",borderRadius:"8px",padding:"1rem",width:"100%",boxSizing:"border-box"},children:[x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[x.jsx("div",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:se.symbol}),x.jsxs("div",{style:{color:fe>=se.buyPrice?"lightgreen":"salmon"},children:["$",A(fe)]}),x.jsxs("div",{style:{color:ae>=0?"lightgreen":"salmon"},children:["$",A(ae)," / ",A(J),"%"]})]}),x.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.9rem",color:"#ccc"},children:[" ",new Date(se.date).toLocaleString()," | ID : ",se.id," | Investi : $",A(Se)," | Prix d'achat : $",A(se.buyPrice)]})]},se.id)})})]}),x.jsxs("section",{style:{marginBottom:"2rem"},children:[x.jsx("h3",{children:" Historique"}),i.length===0?x.jsx("p",{children:"Aucun trade enregistr."}):x.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",maxHeight:"500px",overflowY:"auto"},children:i.map(se=>x.jsxs("div",{style:{borderLeft:`6px solid ${se.type==="sell"?se.profit>=0?"#0f0":"#f00":"#888"}`,backgroundColor:"rgba(30,30,30,0.6)",backdropFilter:"blur(8px)",borderRadius:"8px",padding:"1rem",width:"100%",boxSizing:"border-box"},children:[x.jsxs("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[x.jsx("div",{style:{fontWeight:"bold"},children:se.symbol}),x.jsx("div",{style:{color:"#ccc"},children:se.type.toUpperCase()}),x.jsx("div",{style:{color:se.type==="sell"?se.profit>=0?"lightgreen":"salmon":"#ccc"},children:se.type==="sell"?`$${A(se.profit)} (${A(se.profit/(se.buyPrice*se.quantity)*100)}%)`:""})]}),x.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.9rem",color:"#ccc"},children:[" ",new Date(se.date).toLocaleString()," | ID : ",se.id," | Investi : $",A(se.quantity*se.buyPrice)," | Achat : $",A(se.buyPrice)," | Vente : ",se.type==="sell"?`$${A(se.sellPrice)}`:""]})]},se.id))})]}),x.jsxs("section",{children:[x.jsx("h3",{children:" Historique des anciens IA Trader"}),y.length===0?x.jsx("p",{children:"Aucun PT prcdent."}):x.jsxs(x.Fragment,{children:[x.jsxs("p",{style:{color:"#aaa"},children:["Moyenne des rendements :"," ",x.jsxs("strong",{style:{color:"lightgreen"},children:[(y.reduce((se,fe)=>se+parseFloat(fe.percent),0)/y.length).toFixed(2),"%"]})]}),x.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:y.map((se,fe)=>x.jsxs("div",{style:{borderLeft:`6px solid ${se.percent>=0?"#0f0":"#f00"}`,backgroundColor:"rgba(30,30,30,0.6)",backdropFilter:"blur(8px)",borderRadius:"8px",padding:"1rem"},children:[x.jsx("div",{style:{fontWeight:"bold"},children:se.name}),x.jsxs("div",{children:["Dbut : ",new Date(se.start).toLocaleString()]}),x.jsxs("div",{children:["Fin : ",new Date(se.end).toLocaleString()]}),x.jsxs("div",{children:["Rsultat : $",se.result]}),x.jsxs("div",{style:{color:se.percent>=0?"lightgreen":"salmon"},children:["Rendement : ",se.percent,"%"]})]},fe))})]})]}),x.jsx(s5,{show:N,symbol:$,price:Q,percent:D,onChangePercent:se=>P(Number(se.target.value)),onSetMax:()=>P(100),onClose:()=>z(!1),onConfirm:()=>{}})]})},ls=n=>typeof n!="number"||!Number.isFinite(n)?"":Math.abs(n)>=1e3?`$${n.toLocaleString(void 0,{maximumFractionDigits:2})}`:`$${n.toFixed(2)}`,cg=n=>typeof n=="number"&&Number.isFinite(n)?`${n.toFixed(2)}%`:"",xd=n=>typeof n!="number"||!Number.isFinite(n)?"":n>=1?n.toFixed(2):n>=.01?n.toFixed(4):n.toFixed(6),cn=(n,e=0)=>typeof n=="number"&&Number.isFinite(n)?n:e,a5=()=>{const{portfolioName:n,cash:e,positions:t,history:r,currentPrices:i,investedAmount:o,activePositionsCount:l,totalTrades:c,positiveTrades:h,totalProfit:f,totalProfitPercent:m,updatePrices:y,resetPortfolio:w,sellPosition:T,totalValue:I}=W.useContext(Bf),[k,b]=W.useState(()=>{const re=localStorage.getItem("pt_start");if(re)return re;const ae=new Date().toISOString();return localStorage.setItem("pt_start",ae),ae}),[N,z]=W.useState(!1),[$,te]=W.useState(""),[Q,ie]=W.useState(100),D=W.useMemo(()=>t.map(re=>({...re,quantity:re.qty})),[t]),P=async()=>{await y()},A=()=>{w();const re=new Date().toISOString();localStorage.setItem("pt_start",re),b(re)},V=re=>{te(re.toUpperCase()),ie(100),z(!0)},L=async()=>{await T($,Q),z(!1)},j={overflowX:"auto",border:"1px solid #2a2a2a",borderRadius:8},O={width:"100%",minWidth:980,borderCollapse:"collapse",color:"#fff"},se={textAlign:"left",padding:"10px 12px",background:"#232323",position:"sticky",top:0},fe={padding:"10px 12px",borderTop:"1px solid #2a2a2a",verticalAlign:"middle"},Se=W.useMemo(()=>t.map(re=>{const ae=(re.symbol||"").toUpperCase(),J=i[ae],R=typeof J=="number"?J:re.buyPrice,F=cn(re.qty,0)*cn(re.buyPrice,0),q=cn(re.qty,0)*(cn(R,0)-cn(re.buyPrice,0)),K=cn(re.buyPrice,0)>0?(cn(R,0)-re.buyPrice)/re.buyPrice*100:0;return{...re,sym:ae,curPrice:R,investedUSD:F,resultUSD:q,resultPct:K}}),[t,i]);return x.jsxs("div",{style:{backgroundImage:'url("/backgrounds/homebackground.png")',backgroundSize:"cover",backgroundAttachment:"fixed",backgroundPosition:"center",minHeight:"100vh",padding:"6rem 1rem 2rem",fontFamily:"Inter, system-ui, Avenir, Helvetica, Arial, sans-serif",color:"#fff"},children:[x.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",alignItems:"center",marginBottom:10},children:[x.jsxs("h2",{style:{margin:0},children:["Profile  ",x.jsx("span",{style:{color:"#9ecbff"},children:n})]}),x.jsxs("div",{style:{color:"#9aa0a6"},children:[x.jsx("b",{children:"Dbut du PT:"})," ",new Date(k).toLocaleString()]}),x.jsx("button",{onClick:A,style:{padding:"8px 12px",borderRadius:6,background:"#6c757d",border:"none",color:"#fff",cursor:"pointer"},children:"RESET PT TO 10000$"})]}),x.jsxs("section",{style:{marginTop:6},children:[x.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",alignItems:"center",marginBottom:12},children:[x.jsx("h3",{style:{margin:0},children:"Bilan"}),x.jsx("button",{onClick:P,style:{padding:"8px 12px",borderRadius:6,background:"#0d6efd",border:"none",color:"#fff",cursor:"pointer"},children:"UPDATE PRICES NOW"})]}),x.jsxs("div",{style:{display:"grid",gap:12,gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))"},children:[x.jsxs("div",{style:{background:"#1b1b1b",padding:12,borderRadius:8,border:"1px solid #2a2a2a"},children:[x.jsx("div",{style:{color:"#999",fontSize:12},children:"Solde total (cash + investissement valoris)"}),x.jsx("div",{style:{fontSize:20,fontWeight:700},children:ls(I)})]}),x.jsxs("div",{style:{background:"#1b1b1b",padding:12,borderRadius:8,border:"1px solid #2a2a2a"},children:[x.jsx("div",{style:{color:"#999",fontSize:12},children:"Cash disponible"}),x.jsx("div",{style:{fontSize:20,fontWeight:700},children:ls(e)})]}),x.jsxs("div",{style:{background:"#1b1b1b",padding:12,borderRadius:8,border:"1px solid #2a2a2a"},children:[x.jsx("div",{style:{color:"#999",fontSize:12},children:"Investi"}),x.jsx("div",{style:{fontSize:20,fontWeight:700},children:ls(o)})]}),x.jsxs("div",{style:{background:"#1b1b1b",padding:12,borderRadius:8,border:"1px solid #2a2a2a"},children:[x.jsx("div",{style:{color:"#999",fontSize:12},children:"Nombre de positions ouvertes"}),x.jsx("div",{style:{fontSize:20,fontWeight:700},children:l})]}),x.jsxs("div",{style:{background:"#1b1b1b",padding:12,borderRadius:8,border:"1px solid #2a2a2a"},children:[x.jsx("div",{style:{color:"#999",fontSize:12},children:"Nombre de trades"}),x.jsx("div",{style:{fontSize:20,fontWeight:700},children:c})]}),x.jsxs("div",{style:{background:"#1b1b1b",padding:12,borderRadius:8,border:"1px solid #2a2a2a"},children:[x.jsx("div",{style:{color:"#999",fontSize:12},children:"Nombre de trades positifs"}),x.jsx("div",{style:{fontSize:20,fontWeight:700},children:h})]}),x.jsxs("div",{style:{background:"#1b1b1b",padding:12,borderRadius:8,border:"1px solid #2a2a2a"},children:[x.jsx("div",{style:{color:"#999",fontSize:12},children:"Rendement total"}),x.jsxs("div",{style:{fontSize:20,fontWeight:700,color:f>=0?"lightgreen":"salmon"},children:[ls(f)," (",cg(m),")"]})]})]})]}),x.jsxs("section",{style:{marginTop:24},children:[x.jsx("h3",{style:{marginTop:0},children:"Positions en cours"}),x.jsxs("div",{style:{background:"#1b1b1b",padding:12,borderRadius:8,border:"1px solid #2a2a2a"},children:[x.jsx("div",{style:j,children:x.jsxs("table",{style:O,children:[x.jsx("thead",{children:x.jsxs("tr",{children:[x.jsx("th",{style:se,children:"Crypto"}),x.jsx("th",{style:se,children:"Date & heure d'achat"}),x.jsx("th",{style:se,children:"ID du placement"}),x.jsx("th",{style:se,children:"Montant investi ($)"}),x.jsx("th",{style:se,children:"Prix d'achat"}),x.jsx("th",{style:se,children:"Prix actuel"}),x.jsx("th",{style:se,children:"Rsultat"}),x.jsx("th",{style:se,children:"Vente"})]})}),x.jsx("tbody",{children:Se.length===0?x.jsx("tr",{children:x.jsx("td",{style:fe,colSpan:8,children:"Aucune position ouverte."})}):Se.map(re=>{const ae=re.curPrice>=re.buyPrice?"lightgreen":"salmon",J=re.resultUSD>=0?"lightgreen":"salmon";return x.jsxs("tr",{children:[x.jsx("td",{style:fe,children:x.jsx("b",{children:re.sym})}),x.jsx("td",{style:fe,children:new Date(re.buyAt).toLocaleString()}),x.jsx("td",{style:fe,title:re.id,children:re.id}),x.jsx("td",{style:fe,children:ls(re.investedUSD)}),x.jsx("td",{style:fe,children:xd(re.buyPrice)}),x.jsx("td",{style:{...fe,color:ae},children:xd(re.curPrice)}),x.jsxs("td",{style:{...fe,color:J},children:[cg(re.resultPct),"  ",ls(re.resultUSD)]}),x.jsx("td",{style:fe,children:x.jsx("button",{onClick:()=>V(re.sym),style:{padding:"6px 10px",border:"none",borderRadius:4,background:"#dc3545",color:"#fff",cursor:"pointer",fontWeight:600},children:"VENTE"})})]},re.id)})})]})}),x.jsxs("p",{style:{color:"#9aa0a6",marginTop:8,fontSize:13},children:["Utilisez ",x.jsx("b",{children:"UPDATE PRICES NOW"})," pour rafrachir les prix et viter tout affichage obsolte."]})]})]}),x.jsxs("section",{style:{marginTop:24},children:[x.jsx("h3",{style:{marginTop:0},children:"Historique"}),x.jsx("div",{style:{background:"#1b1b1b",padding:12,borderRadius:8,border:"1px solid #2a2a2a"},children:x.jsx("div",{style:{...j,maxHeight:420},children:x.jsxs("table",{style:O,children:[x.jsx("thead",{children:x.jsxs("tr",{children:[x.jsx("th",{style:se,children:"ID du placement"}),x.jsx("th",{style:se,children:"Date & heure"}),x.jsx("th",{style:se,children:"Crypto"}),x.jsx("th",{style:se,children:"Type"}),x.jsx("th",{style:se,children:"Investissement ($)"}),x.jsx("th",{style:se,children:"Prix d'achat"}),x.jsx("th",{style:se,children:"Prix de vente"}),x.jsx("th",{style:se,children:"Rsultat"})]})}),x.jsx("tbody",{children:r.length===0?x.jsx("tr",{children:x.jsx("td",{style:fe,colSpan:8,children:"Aucun historique pour le moment."})}):r.map(re=>{const ae=(re.symbol||"").toUpperCase(),J=re.type==="SELL",R=re.type==="BUY"?cn(re.qty,0)*cn(re.price,0):typeof re.buyPrice=="number"&&typeof re.qty=="number"?re.qty*re.buyPrice:0,F=J?typeof re.pnlUSD=="number"?re.pnlUSD:(cn(re.price,0)-cn(re.buyPrice,0))*cn(re.qty,0):0,q=J&&cn(re.buyPrice,0)>0?(cn(re.price,0)-cn(re.buyPrice,0))/cn(re.buyPrice,0)*100:0,K=F>=0?"lightgreen":"salmon";return x.jsxs("tr",{children:[x.jsx("td",{style:fe,title:re.id,children:re.id}),x.jsx("td",{style:fe,children:new Date(re.at).toLocaleString()}),x.jsx("td",{style:fe,children:x.jsx("b",{children:ae})}),x.jsx("td",{style:fe,children:re.type}),x.jsx("td",{style:fe,children:ls(R)}),x.jsx("td",{style:fe,children:typeof re.buyPrice=="number"?xd(re.buyPrice):""}),x.jsx("td",{style:fe,children:J?xd(re.price):""}),x.jsx("td",{style:{...fe,color:K},children:J?`${cg(q)}  ${ls(F)}`:""})]},re.id)})})]})})})]}),x.jsx(rS,{show:N,symbol:$,price:i[($||"").toUpperCase()]??0,percent:Q,positions:D,onClose:()=>z(!1),onConfirm:L,onChangePercent:re=>ie(Number(re.target.value)),onSetMax:()=>ie(100)})]})},l5=()=>{const[n,e]=W.useState(""),[t,r]=W.useState(""),[i,o]=W.useState(""),l=zf(),c=async h=>{h.preventDefault(),o("");try{const f=my(),y=(await Kb(f,n,t)).user,w=await Zy(Bo(kr,"users",y.uid));if(!w.exists())throw new Error("Utilisateur inconnu.");if(!w.data().approved)throw new Error("Compte en attente de validation.");l("/")}catch(f){console.error(f),o(f.message||"Erreur de connexion.")}};return x.jsx("div",{style:{backgroundImage:'url("/backgrounds/homebackground.png")',backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed",minHeight:"100vh",padding:"6rem 1rem 2rem",display:"flex",justifyContent:"center",alignItems:"flex-start",fontFamily:"sans-serif",color:"#fff"},children:x.jsxs("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(8px)",padding:"2rem",borderRadius:"12px",maxWidth:"400px",width:"100%"},children:[x.jsx("h2",{style:{marginBottom:"1.5rem",textAlign:"center"},children:" Connexion"}),x.jsxs("form",{onSubmit:c,style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[x.jsx("input",{type:"email",placeholder:"Email",value:n,onChange:h=>e(h.target.value),required:!0,style:{padding:"10px",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1rem"}}),x.jsx("input",{type:"password",placeholder:"Mot de passe",value:t,onChange:h=>r(h.target.value),required:!0,style:{padding:"10px",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1rem"}}),x.jsx("button",{type:"submit",style:{padding:"10px",backgroundColor:"#4ea8de",color:"#fff",border:"none",borderRadius:"4px",fontWeight:"bold",fontSize:"1rem",cursor:"pointer"},children:"Se connecter"}),i&&x.jsx("p",{style:{color:"salmon",textAlign:"center"},children:i})]}),x.jsxs("div",{style:{marginTop:"2rem",textAlign:"center"},children:[x.jsx("p",{style:{color:"#aaa"},children:"Vous navez pas encore de compte ?"}),x.jsx(Wn,{to:"/register",style:{color:"#4ea8de",fontWeight:"bold",textDecoration:"none"},children:" Faire une demande dinscription"})]})]})})},c5=()=>{const[n,e]=W.useState(""),[t,r]=W.useState(""),[i,o]=W.useState(""),l=zf(),c=async h=>{h.preventDefault(),o("");try{const m=(await IA(Dd,n,t)).user;await e_(Bo(kr,"users",m.uid),{email:n,displayName:"",approved:!1,createdAt:new Date().toISOString()}),l("/login")}catch(f){console.error(f),o(f.message)}};return x.jsx("div",{style:{backgroundImage:'url("/backgrounds/homebackground.png")',backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed",minHeight:"100vh",padding:"6rem 1rem 2rem",display:"flex",justifyContent:"center",alignItems:"flex-start",fontFamily:"sans-serif",color:"#fff"},children:x.jsxs("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(8px)",padding:"2rem",borderRadius:"12px",maxWidth:"400px",width:"100%"},children:[x.jsx("h2",{style:{marginBottom:"1.5rem",textAlign:"center"},children:" Demande d'inscription"}),x.jsxs("form",{onSubmit:c,style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"email",style:{display:"block",marginBottom:"0.5rem",color:"#ccc"},children:"Email :"}),x.jsx("input",{id:"email",type:"email",value:n,onChange:h=>e(h.target.value),required:!0,style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1rem"}})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"password",style:{display:"block",marginBottom:"0.5rem",color:"#ccc"},children:"Mot de passe :"}),x.jsx("input",{id:"password",type:"password",value:t,onChange:h=>r(h.target.value),required:!0,style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1rem"}})]}),i&&x.jsx("div",{style:{color:"salmon",textAlign:"center"},children:i}),x.jsx("button",{type:"submit",style:{backgroundColor:"#4ea8de",color:"#fff",padding:"10px",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold",fontSize:"1rem"},children:"Sinscrire"})]}),x.jsx("p",{style:{marginTop:"1.5rem",fontSize:"0.9rem",color:"#aaa",textAlign:"center"},children:"Une fois votre compte cr, il devra tre valid par ladministrateur avant que vous puissiez vous connecter."})]})})},Sc=({children:n,redirectTo:e="/login"})=>{const{user:t,initializing:r}=yl();return r?null:t?n:x.jsx(X1,{to:e,replace:!0})},u5=typeof window<"u"&&window.innerWidth>=768,h5=()=>{const{user:n}=yl(),{refreshPending:e}=eS(),[t,r]=W.useState([]),[i,o]=W.useState(!1),[l,c]=W.useState("");if(n?.email!=="xzno4rzx@gmail.com")return x.jsx(X1,{to:"/"});const h=async()=>{try{const y=await sf(nf(kr,"users"));r(y.docs.map(w=>({id:w.id,...w.data()})))}catch(y){console.error("Erreur rcupration utilisateurs :",y)}},f=async(y,w)=>{try{await rM(Bo(kr,"users",y),{status:w}),h(),e()}catch(T){console.error("Erreur mise  jour :",T)}},m=async()=>{if(!l.trim()){alert("Merci de saisir un message.");return}o(!0);try{const y=await fetch("https://utc-api.onrender.com".replace(/\/+$/,"")+"/send-manual-signal",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({timestamp:new Date().toISOString(),crypto:"ADMIN",type:"ADMIN_POST",type_ia:"admin_post",score:0,risk:" Info",explanation:[`ADMIN POST: ${l.trim()}`]})});if(!y.ok)throw new Error(`HTTP ${y.status}`);alert(" Message envoy !"),c("")}catch(y){console.error(" Erreur envoi message admin :",y),alert("Erreur lors de lenvoi.")}finally{o(!1)}};return W.useEffect(()=>{h()},[]),x.jsxs("div",{style:{backgroundImage:'url("/backgrounds/homebackground.png")',backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:u5?"fixed":"scroll",padding:"6rem 2rem 2rem",color:"#fff",fontFamily:"sans-serif",minHeight:"100vh"},children:[x.jsxs("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(10px)",padding:"2rem",borderRadius:"12px",marginBottom:"2rem"},children:[x.jsx("h1",{children:" Tableau de bord Admin"}),x.jsx("div",{style:{overflowX:"auto",marginTop:"2rem"},children:x.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.95rem",minWidth:"600px"},children:[x.jsx("thead",{children:x.jsxs("tr",{style:{backgroundColor:"#333"},children:[x.jsx("th",{style:cs,children:"Email"}),x.jsx("th",{style:cs,children:"Nom"}),x.jsx("th",{style:cs,children:"Statut"}),x.jsx("th",{style:cs,children:"Action"})]})}),x.jsx("tbody",{children:t.map((y,w)=>x.jsxs("tr",{style:{background:w%2===0?"#222":"#2a2a2a"},children:[x.jsx("td",{style:cs,children:y.email}),x.jsx("td",{style:cs,children:y.displayName||""}),x.jsx("td",{style:{...cs,color:y.status==="accepted"?"lightgreen":y.status==="refused"?"salmon":"#ccc"},children:y.status||"en attente"}),x.jsxs("td",{style:cs,children:[x.jsx("button",{onClick:()=>f(y.id,"accepted"),style:hb,children:""}),x.jsx("button",{onClick:()=>f(y.id,"refused"),style:{...hb,backgroundColor:"#a00"},children:""})]})]},y.id))})]})})]}),x.jsxs("div",{style:{backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(10px)",padding:"2rem",borderRadius:"12px"},children:[x.jsx("h2",{children:" Envoyer un message admin"}),x.jsx("textarea",{rows:4,value:l,onChange:y=>c(y.target.value),placeholder:"Votre message ici",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",fontFamily:"inherit",marginTop:"0.5rem"}}),x.jsx("button",{onClick:m,disabled:i,style:{marginTop:"1rem",padding:"10px 20px",backgroundColor:"#4ea8de",color:"#fff",border:"none",borderRadius:"6px",fontWeight:"bold",cursor:"pointer"},children:i?"Envoi":" Envoyer"})]})]})},cs={padding:"10px",textAlign:"left",borderBottom:"1px solid #444"},hb={padding:"6px 10px",marginRight:"6px",backgroundColor:"#10b981",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},d5=()=>(W.useEffect(()=>{console.log(" UTC App initialise avec routes.")},[]),console.log(" App.jsx charg"),x.jsxs(x.Fragment,{children:[x.jsx(yN,{}),x.jsxs(iN,{children:[x.jsx(Wr,{path:"/",element:x.jsx(PN,{})}),x.jsx(Wr,{path:"/login",element:x.jsx(l5,{})}),x.jsx(Wr,{path:"/register",element:x.jsx(c5,{})}),x.jsx(Wr,{path:"/trading",element:x.jsx(Sc,{children:x.jsx(MN,{})})}),x.jsx(Wr,{path:"/analysis",element:x.jsx(Sc,{children:x.jsx(t5,{})})}),x.jsx(Wr,{path:"/signals",element:x.jsx(Sc,{children:x.jsx(i5,{})})}),x.jsx(Wr,{path:"/ia-trader",element:x.jsx(Sc,{children:x.jsx(o5,{})})}),x.jsx(Wr,{path:"/profile",element:x.jsx(Sc,{children:x.jsx(a5,{})})}),x.jsx(Wr,{path:"/admin",element:x.jsx(h5,{})})]})]}));fM.createRoot(document.getElementById("root")).render(x.jsx(vf.StrictMode,{children:x.jsx(hN,{children:x.jsx(mN,{children:x.jsx(bN,{children:x.jsx(IN,{children:x.jsx(gN,{children:x.jsx(aM,{children:x.jsx(d5,{})})})})})})})}));
