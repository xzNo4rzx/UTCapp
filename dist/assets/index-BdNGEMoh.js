function vC(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function Tb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Sm={exports:{}},mc={},Im={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $0;function wC(){if($0)return Ve;$0=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function w(F){return F===null||typeof F!="object"?null:(F=y&&F[y]||F["@@iterator"],typeof F=="function"?F:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,k={};function T(F,ee,de){this.props=F,this.context=ee,this.refs=k,this.updater=de||b}T.prototype.isReactComponent={},T.prototype.setState=function(F,ee){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,ee,"setState")},T.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function N(){}N.prototype=T.prototype;function j(F,ee,de){this.props=F,this.context=ee,this.refs=k,this.updater=de||b}var B=j.prototype=new N;B.constructor=j,S(B,T.prototype),B.isPureReactComponent=!0;var K=Array.isArray,q=Object.prototype.hasOwnProperty,J={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function I(F,ee,de){var Te,ke={},Le=null,Re=null;if(ee!=null)for(Te in ee.ref!==void 0&&(Re=ee.ref),ee.key!==void 0&&(Le=""+ee.key),ee)q.call(ee,Te)&&!R.hasOwnProperty(Te)&&(ke[Te]=ee[Te]);var ce=arguments.length-2;if(ce===1)ke.children=de;else if(1<ce){for(var be=Array(ce),Fe=0;Fe<ce;Fe++)be[Fe]=arguments[Fe+2];ke.children=be}if(F&&F.defaultProps)for(Te in ce=F.defaultProps,ce)ke[Te]===void 0&&(ke[Te]=ce[Te]);return{$$typeof:n,type:F,key:Le,ref:Re,props:ke,_owner:J.current}}function P(F,ee){return{$$typeof:n,type:F.type,key:ee,ref:F.ref,props:F.props,_owner:F._owner}}function O(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function L(F){var ee={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(de){return ee[de]})}var V=/\/+/g;function D(F,ee){return typeof F=="object"&&F!==null&&F.key!=null?L(""+F.key):ee.toString(36)}function ne(F,ee,de,Te,ke){var Le=typeof F;(Le==="undefined"||Le==="boolean")&&(F=null);var Re=!1;if(F===null)Re=!0;else switch(Le){case"string":case"number":Re=!0;break;case"object":switch(F.$$typeof){case n:case e:Re=!0}}if(Re)return Re=F,ke=ke(Re),F=Te===""?"."+D(Re,0):Te,K(ke)?(de="",F!=null&&(de=F.replace(V,"$&/")+"/"),ne(ke,ee,de,"",function(Fe){return Fe})):ke!=null&&(O(ke)&&(ke=P(ke,de+(!ke.key||Re&&Re.key===ke.key?"":(""+ke.key).replace(V,"$&/")+"/")+F)),ee.push(ke)),1;if(Re=0,Te=Te===""?".":Te+":",K(F))for(var ce=0;ce<F.length;ce++){Le=F[ce];var be=Te+D(Le,ce);Re+=ne(Le,ee,de,be,ke)}else if(be=w(F),typeof be=="function")for(F=be.call(F),ce=0;!(Le=F.next()).done;)Le=Le.value,be=Te+D(Le,ce++),Re+=ne(Le,ee,de,be,ke);else if(Le==="object")throw ee=String(F),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return Re}function pe(F,ee,de){if(F==null)return F;var Te=[],ke=0;return ne(F,Te,"","",function(Le){return ee.call(de,Le,ke++)}),Te}function ie(F){if(F._status===-1){var ee=F._result;ee=ee(),ee.then(function(de){(F._status===0||F._status===-1)&&(F._status=1,F._result=de)},function(de){(F._status===0||F._status===-1)&&(F._status=2,F._result=de)}),F._status===-1&&(F._status=0,F._result=ee)}if(F._status===1)return F._result.default;throw F._result}var ye={current:null},re={transition:null},he={ReactCurrentDispatcher:ye,ReactCurrentBatchConfig:re,ReactCurrentOwner:J};return Ve.Children={map:pe,forEach:function(F,ee,de){pe(F,function(){ee.apply(this,arguments)},de)},count:function(F){var ee=0;return pe(F,function(){ee++}),ee},toArray:function(F){return pe(F,function(ee){return ee})||[]},only:function(F){if(!O(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Ve.Component=T,Ve.Fragment=t,Ve.Profiler=i,Ve.PureComponent=j,Ve.StrictMode=r,Ve.Suspense=h,Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=he,Ve.cloneElement=function(F,ee,de){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var Te=S({},F.props),ke=F.key,Le=F.ref,Re=F._owner;if(ee!=null){if(ee.ref!==void 0&&(Le=ee.ref,Re=J.current),ee.key!==void 0&&(ke=""+ee.key),F.type&&F.type.defaultProps)var ce=F.type.defaultProps;for(be in ee)q.call(ee,be)&&!R.hasOwnProperty(be)&&(Te[be]=ee[be]===void 0&&ce!==void 0?ce[be]:ee[be])}var be=arguments.length-2;if(be===1)Te.children=de;else if(1<be){ce=Array(be);for(var Fe=0;Fe<be;Fe++)ce[Fe]=arguments[Fe+2];Te.children=ce}return{$$typeof:n,type:F.type,key:ke,ref:Le,props:Te,_owner:Re}},Ve.createContext=function(F){return F={$$typeof:l,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:o,_context:F},F.Consumer=F},Ve.createElement=I,Ve.createFactory=function(F){var ee=I.bind(null,F);return ee.type=F,ee},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(F){return{$$typeof:c,render:F}},Ve.isValidElement=O,Ve.lazy=function(F){return{$$typeof:m,_payload:{_status:-1,_result:F},_init:ie}},Ve.memo=function(F,ee){return{$$typeof:d,type:F,compare:ee===void 0?null:ee}},Ve.startTransition=function(F){var ee=re.transition;re.transition={};try{F()}finally{re.transition=ee}},Ve.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},Ve.useCallback=function(F,ee){return ye.current.useCallback(F,ee)},Ve.useContext=function(F){return ye.current.useContext(F)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(F){return ye.current.useDeferredValue(F)},Ve.useEffect=function(F,ee){return ye.current.useEffect(F,ee)},Ve.useId=function(){return ye.current.useId()},Ve.useImperativeHandle=function(F,ee,de){return ye.current.useImperativeHandle(F,ee,de)},Ve.useInsertionEffect=function(F,ee){return ye.current.useInsertionEffect(F,ee)},Ve.useLayoutEffect=function(F,ee){return ye.current.useLayoutEffect(F,ee)},Ve.useMemo=function(F,ee){return ye.current.useMemo(F,ee)},Ve.useReducer=function(F,ee,de){return ye.current.useReducer(F,ee,de)},Ve.useRef=function(F){return ye.current.useRef(F)},Ve.useState=function(F){return ye.current.useState(F)},Ve.useSyncExternalStore=function(F,ee,de){return ye.current.useSyncExternalStore(F,ee,de)},Ve.useTransition=function(){return ye.current.useTransition()},Ve.version="18.2.0",Ve}var H0;function ry(){return H0||(H0=1,Im.exports=wC()),Im.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W0;function EC(){if(W0)return mc;W0=1;var n=ry(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,h,d){var m,y={},w=null,b=null;d!==void 0&&(w=""+d),h.key!==void 0&&(w=""+h.key),h.ref!==void 0&&(b=h.ref);for(m in h)r.call(h,m)&&!o.hasOwnProperty(m)&&(y[m]=h[m]);if(c&&c.defaultProps)for(m in h=c.defaultProps,h)y[m]===void 0&&(y[m]=h[m]);return{$$typeof:e,type:c,key:w,ref:b,props:y,_owner:i.current}}return mc.Fragment=t,mc.jsx=l,mc.jsxs=l,mc}var q0;function TC(){return q0||(q0=1,Sm.exports=EC()),Sm.exports}var C=TC(),G=ry();const mf=Tb(G),bC=vC({__proto__:null,default:mf},[G]);var Qh={},km={exports:{}},Sn={},Cm={exports:{}},Pm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G0;function xC(){return G0||(G0=1,function(n){function e(re,he){var F=re.length;re.push(he);e:for(;0<F;){var ee=F-1>>>1,de=re[ee];if(0<i(de,he))re[ee]=he,re[F]=de,F=ee;else break e}}function t(re){return re.length===0?null:re[0]}function r(re){if(re.length===0)return null;var he=re[0],F=re.pop();if(F!==he){re[0]=F;e:for(var ee=0,de=re.length,Te=de>>>1;ee<Te;){var ke=2*(ee+1)-1,Le=re[ke],Re=ke+1,ce=re[Re];if(0>i(Le,F))Re<de&&0>i(ce,Le)?(re[ee]=ce,re[Re]=F,ee=Re):(re[ee]=Le,re[ke]=F,ee=ke);else if(Re<de&&0>i(ce,F))re[ee]=ce,re[Re]=F,ee=Re;else break e}}return he}function i(re,he){var F=re.sortIndex-he.sortIndex;return F!==0?F:re.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var h=[],d=[],m=1,y=null,w=3,b=!1,S=!1,k=!1,T=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(re){for(var he=t(d);he!==null;){if(he.callback===null)r(d);else if(he.startTime<=re)r(d),he.sortIndex=he.expirationTime,e(h,he);else break;he=t(d)}}function K(re){if(k=!1,B(re),!S)if(t(h)!==null)S=!0,ie(q);else{var he=t(d);he!==null&&ye(K,he.startTime-re)}}function q(re,he){S=!1,k&&(k=!1,N(I),I=-1),b=!0;var F=w;try{for(B(he),y=t(h);y!==null&&(!(y.expirationTime>he)||re&&!L());){var ee=y.callback;if(typeof ee=="function"){y.callback=null,w=y.priorityLevel;var de=ee(y.expirationTime<=he);he=n.unstable_now(),typeof de=="function"?y.callback=de:y===t(h)&&r(h),B(he)}else r(h);y=t(h)}if(y!==null)var Te=!0;else{var ke=t(d);ke!==null&&ye(K,ke.startTime-he),Te=!1}return Te}finally{y=null,w=F,b=!1}}var J=!1,R=null,I=-1,P=5,O=-1;function L(){return!(n.unstable_now()-O<P)}function V(){if(R!==null){var re=n.unstable_now();O=re;var he=!0;try{he=R(!0,re)}finally{he?D():(J=!1,R=null)}}else J=!1}var D;if(typeof j=="function")D=function(){j(V)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,pe=ne.port2;ne.port1.onmessage=V,D=function(){pe.postMessage(null)}}else D=function(){T(V,0)};function ie(re){R=re,J||(J=!0,D())}function ye(re,he){I=T(function(){re(n.unstable_now())},he)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(re){re.callback=null},n.unstable_continueExecution=function(){S||b||(S=!0,ie(q))},n.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<re?Math.floor(1e3/re):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(re){switch(w){case 1:case 2:case 3:var he=3;break;default:he=w}var F=w;w=he;try{return re()}finally{w=F}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(re,he){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var F=w;w=re;try{return he()}finally{w=F}},n.unstable_scheduleCallback=function(re,he,F){var ee=n.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?ee+F:ee):F=ee,re){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=F+de,re={id:m++,callback:he,priorityLevel:re,startTime:F,expirationTime:de,sortIndex:-1},F>ee?(re.sortIndex=F,e(d,re),t(h)===null&&re===t(d)&&(k?(N(I),I=-1):k=!0,ye(K,F-ee))):(re.sortIndex=de,e(h,re),S||b||(S=!0,ie(q))),re},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(re){var he=w;return function(){var F=w;w=he;try{return re.apply(this,arguments)}finally{w=F}}}}(Pm)),Pm}var K0;function SC(){return K0||(K0=1,Cm.exports=xC()),Cm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y0;function IC(){if(Y0)return Sn;Y0=1;var n=ry(),e=SC();function t(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(s,a){l(s,a),l(s+"Capture",a)}function l(s,a){for(i[s]=a,s=0;s<a.length;s++)r.add(a[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function w(s){return h.call(y,s)?!0:h.call(m,s)?!1:d.test(s)?y[s]=!0:(m[s]=!0,!1)}function b(s,a,u,p){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function S(s,a,u,p){if(a===null||typeof a>"u"||b(s,a,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function k(s,a,u,p,g,v,x){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=p,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=s,this.type=a,this.sanitizeURL=v,this.removeEmptyString=x}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){T[s]=new k(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];T[a]=new k(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){T[s]=new k(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){T[s]=new k(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){T[s]=new k(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){T[s]=new k(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){T[s]=new k(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){T[s]=new k(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){T[s]=new k(s,5,!1,s.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function j(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(N,j);T[a]=new k(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(N,j);T[a]=new k(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(N,j);T[a]=new k(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){T[s]=new k(s,1,!1,s.toLowerCase(),null,!1,!1)}),T.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){T[s]=new k(s,1,!1,s.toLowerCase(),null,!0,!0)});function B(s,a,u,p){var g=T.hasOwnProperty(a)?T[a]:null;(g!==null?g.type!==0:p||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(S(a,u,g,p)&&(u=null),p||g===null?w(a)&&(u===null?s.removeAttribute(a):s.setAttribute(a,""+u)):g.mustUseProperty?s[g.propertyName]=u===null?g.type===3?!1:"":u:(a=g.attributeName,p=g.attributeNamespace,u===null?s.removeAttribute(a):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,p?s.setAttributeNS(p,a,u):s.setAttribute(a,u))))}var K=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,q=Symbol.for("react.element"),J=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),L=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),pe=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),ye=Symbol.for("react.offscreen"),re=Symbol.iterator;function he(s){return s===null||typeof s!="object"?null:(s=re&&s[re]||s["@@iterator"],typeof s=="function"?s:null)}var F=Object.assign,ee;function de(s){if(ee===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);ee=a&&a[1]||""}return`
`+ee+s}var Te=!1;function ke(s,a){if(!s||Te)return"";Te=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(Y){var p=Y}Reflect.construct(s,[],a)}else{try{a.call()}catch(Y){p=Y}s.call(a.prototype)}else{try{throw Error()}catch(Y){p=Y}s()}}catch(Y){if(Y&&p&&typeof Y.stack=="string"){for(var g=Y.stack.split(`
`),v=p.stack.split(`
`),x=g.length-1,M=v.length-1;1<=x&&0<=M&&g[x]!==v[M];)M--;for(;1<=x&&0<=M;x--,M--)if(g[x]!==v[M]){if(x!==1||M!==1)do if(x--,M--,0>M||g[x]!==v[M]){var U=`
`+g[x].replace(" at new "," at ");return s.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",s.displayName)),U}while(1<=x&&0<=M);break}}}finally{Te=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?de(s):""}function Le(s){switch(s.tag){case 5:return de(s.type);case 16:return de("Lazy");case 13:return de("Suspense");case 19:return de("SuspenseList");case 0:case 2:case 15:return s=ke(s.type,!1),s;case 11:return s=ke(s.type.render,!1),s;case 1:return s=ke(s.type,!0),s;default:return""}}function Re(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case R:return"Fragment";case J:return"Portal";case P:return"Profiler";case I:return"StrictMode";case D:return"Suspense";case ne:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case L:return(s.displayName||"Context")+".Consumer";case O:return(s._context.displayName||"Context")+".Provider";case V:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case pe:return a=s.displayName||null,a!==null?a:Re(s.type)||"Memo";case ie:a=s._payload,s=s._init;try{return Re(s(a))}catch{}}return null}function ce(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Re(a);case 8:return a===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function be(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Fe(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function gt(s){var a=Fe(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),p=""+s[a];if(!s.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,v=u.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return g.call(this)},set:function(x){p=""+x,v.call(this,x)}}),Object.defineProperty(s,a,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(x){p=""+x},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Mn(s){s._valueTracker||(s._valueTracker=gt(s))}function gn(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),p="";return s&&(p=Fe(s)?s.checked?"true":"false":s.value),s=p,s!==u?(a.setValue(s),!0):!1}function un(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function yn(s,a){var u=a.checked;return F({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function hn(s,a){var u=a.defaultValue==null?"":a.defaultValue,p=a.checked!=null?a.checked:a.defaultChecked;u=be(a.value!=null?a.value:u),s._wrapperState={initialChecked:p,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function ji(s,a){a=a.checked,a!=null&&B(s,"checked",a,!1)}function $s(s,a){ji(s,a);var u=be(a.value),p=a.type;if(u!=null)p==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(p==="submit"||p==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?Yo(s,a.type,u):a.hasOwnProperty("defaultValue")&&Yo(s,a.type,be(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function Nu(s,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var p=a.type;if(!(p!=="submit"&&p!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,u||a===s.value||(s.value=a),s.defaultValue=a}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function Yo(s,a,u){(a!=="number"||un(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var li=Array.isArray;function ci(s,a,u,p){if(s=s.options,a){a={};for(var g=0;g<u.length;g++)a["$"+u[g]]=!0;for(u=0;u<s.length;u++)g=a.hasOwnProperty("$"+s[u].value),s[u].selected!==g&&(s[u].selected=g),g&&p&&(s[u].defaultSelected=!0)}else{for(u=""+be(u),a=null,g=0;g<s.length;g++){if(s[g].value===u){s[g].selected=!0,p&&(s[g].defaultSelected=!0);return}a!==null||s[g].disabled||(a=s[g])}a!==null&&(a.selected=!0)}}function bl(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return F({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Qo(s,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(li(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}s._wrapperState={initialValue:be(u)}}function Xo(s,a){var u=be(a.value),p=be(a.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),a.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),p!=null&&(s.defaultValue=""+p)}function xl(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function Mt(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nt(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?Mt(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var ui,Sl=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,p,g){MSApp.execUnsafeLocalFunction(function(){return s(a,u,p,g)})}:s}(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(ui=ui||document.createElement("div"),ui.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=ui.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function Ui(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var Hs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ws=["Webkit","ms","Moz","O"];Object.keys(Hs).forEach(function(s){Ws.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),Hs[a]=Hs[s]})});function Il(s,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||Hs.hasOwnProperty(s)&&Hs[s]?(""+a).trim():a+"px"}function kl(s,a){s=s.style;for(var u in a)if(a.hasOwnProperty(u)){var p=u.indexOf("--")===0,g=Il(u,a[u],p);u==="float"&&(u="cssFloat"),p?s.setProperty(u,g):s[u]=g}}var Cl=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pl(s,a){if(a){if(Cl[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Al(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qs=null;function Jo(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Zo=null,qn=null,Dr=null;function ea(s){if(s=ec(s)){if(typeof Zo!="function")throw Error(t(280));var a=s.stateNode;a&&(a=hh(a),Zo(s.stateNode,s.type,a))}}function Or(s){qn?Dr?Dr.push(s):Dr=[s]:qn=s}function Rl(){if(qn){var s=qn,a=Dr;if(Dr=qn=null,ea(s),a)for(s=0;s<a.length;s++)ea(a[s])}}function Gs(s,a){return s(a)}function Dl(){}var hi=!1;function Ol(s,a,u){if(hi)return s(a,u);hi=!0;try{return Gs(s,a,u)}finally{hi=!1,(qn!==null||Dr!==null)&&(Dl(),Rl())}}function wt(s,a){var u=s.stateNode;if(u===null)return null;var p=hh(u);if(p===null)return null;u=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var ta=!1;if(c)try{var lr={};Object.defineProperty(lr,"passive",{get:function(){ta=!0}}),window.addEventListener("test",lr,lr),window.removeEventListener("test",lr,lr)}catch{ta=!1}function Ks(s,a,u,p,g,v,x,M,U){var Y=Array.prototype.slice.call(arguments,3);try{a.apply(u,Y)}catch(oe){this.onError(oe)}}var Ys=!1,na=null,cr=!1,Ml=null,Zf={onError:function(s){Ys=!0,na=s}};function ra(s,a,u,p,g,v,x,M,U){Ys=!1,na=null,Ks.apply(Zf,arguments)}function Lu(s,a,u,p,g,v,x,M,U){if(ra.apply(this,arguments),Ys){if(Ys){var Y=na;Ys=!1,na=null}else throw Error(t(198));cr||(cr=!0,Ml=Y)}}function ur(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function Qs(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function hr(s){if(ur(s)!==s)throw Error(t(188))}function Vu(s){var a=s.alternate;if(!a){if(a=ur(s),a===null)throw Error(t(188));return a!==s?null:s}for(var u=s,p=a;;){var g=u.return;if(g===null)break;var v=g.alternate;if(v===null){if(p=g.return,p!==null){u=p;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===u)return hr(g),s;if(v===p)return hr(g),a;v=v.sibling}throw Error(t(188))}if(u.return!==p.return)u=g,p=v;else{for(var x=!1,M=g.child;M;){if(M===u){x=!0,u=g,p=v;break}if(M===p){x=!0,p=g,u=v;break}M=M.sibling}if(!x){for(M=v.child;M;){if(M===u){x=!0,u=v,p=g;break}if(M===p){x=!0,p=v,u=g;break}M=M.sibling}if(!x)throw Error(t(189))}}if(u.alternate!==p)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?s:a}function Nl(s){return s=Vu(s),s!==null?ia(s):null}function ia(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=ia(s);if(a!==null)return a;s=s.sibling}return null}var sa=e.unstable_scheduleCallback,Ll=e.unstable_cancelCallback,Fu=e.unstable_shouldYield,ep=e.unstable_requestPaint,tt=e.unstable_now,ju=e.unstable_getCurrentPriorityLevel,Xs=e.unstable_ImmediatePriority,zi=e.unstable_UserBlockingPriority,Gn=e.unstable_NormalPriority,Vl=e.unstable_LowPriority,Uu=e.unstable_IdlePriority,Js=null,Nn=null;function zu(s){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(Js,s,void 0,(s.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:$u,Fl=Math.log,Bu=Math.LN2;function $u(s){return s>>>=0,s===0?32:31-(Fl(s)/Bu|0)|0}var oa=64,aa=4194304;function Bi(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Zs(s,a){var u=s.pendingLanes;if(u===0)return 0;var p=0,g=s.suspendedLanes,v=s.pingedLanes,x=u&268435455;if(x!==0){var M=x&~g;M!==0?p=Bi(M):(v&=x,v!==0&&(p=Bi(v)))}else x=u&~g,x!==0?p=Bi(x):v!==0&&(p=Bi(v));if(p===0)return 0;if(a!==0&&a!==p&&(a&g)===0&&(g=p&-p,v=a&-a,g>=v||g===16&&(v&4194240)!==0))return a;if((p&4)!==0&&(p|=u&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=p;0<a;)u=31-dn(a),g=1<<u,p|=s[u],a&=~g;return p}function tp(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function di(s,a){for(var u=s.suspendedLanes,p=s.pingedLanes,g=s.expirationTimes,v=s.pendingLanes;0<v;){var x=31-dn(v),M=1<<x,U=g[x];U===-1?((M&u)===0||(M&p)!==0)&&(g[x]=tp(M,a)):U<=a&&(s.expiredLanes|=M),v&=~M}}function Ln(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function eo(){var s=oa;return oa<<=1,(oa&4194240)===0&&(oa=64),s}function $i(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function Hi(s,a,u){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-dn(a),s[a]=u}function et(s,a){var u=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var p=s.eventTimes;for(s=s.expirationTimes;0<u;){var g=31-dn(u),v=1<<g;a[g]=0,p[g]=-1,s[g]=-1,u&=~v}}function Wi(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var p=31-dn(u),g=1<<p;g&a|s[p]&a&&(s[p]|=a),u&=~g}}var Be=0;function qi(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Hu,la,Wu,qu,Gu,jl=!1,Mr=[],Wt=null,dr=null,fr=null,Gi=new Map,Kn=new Map,Nr=[],np="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ku(s,a){switch(s){case"focusin":case"focusout":Wt=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":Gi.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kn.delete(a.pointerId)}}function _n(s,a,u,p,g,v){return s===null||s.nativeEvent!==v?(s={blockedOn:a,domEventName:u,eventSystemFlags:p,nativeEvent:v,targetContainers:[g]},a!==null&&(a=ec(a),a!==null&&la(a)),s):(s.eventSystemFlags|=p,a=s.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),s)}function rp(s,a,u,p,g){switch(a){case"focusin":return Wt=_n(Wt,s,a,u,p,g),!0;case"dragenter":return dr=_n(dr,s,a,u,p,g),!0;case"mouseover":return fr=_n(fr,s,a,u,p,g),!0;case"pointerover":var v=g.pointerId;return Gi.set(v,_n(Gi.get(v)||null,s,a,u,p,g)),!0;case"gotpointercapture":return v=g.pointerId,Kn.set(v,_n(Kn.get(v)||null,s,a,u,p,g)),!0}return!1}function Yu(s){var a=so(s.target);if(a!==null){var u=ur(a);if(u!==null){if(a=u.tag,a===13){if(a=Qs(u),a!==null){s.blockedOn=a,Gu(s.priority,function(){Wu(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function fi(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=ca(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var p=new u.constructor(u.type,u);qs=p,u.target.dispatchEvent(p),qs=null}else return a=ec(u),a!==null&&la(a),s.blockedOn=u,!1;a.shift()}return!0}function to(s,a,u){fi(s)&&u.delete(a)}function Qu(){jl=!1,Wt!==null&&fi(Wt)&&(Wt=null),dr!==null&&fi(dr)&&(dr=null),fr!==null&&fi(fr)&&(fr=null),Gi.forEach(to),Kn.forEach(to)}function pr(s,a){s.blockedOn===a&&(s.blockedOn=null,jl||(jl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Qu)))}function mr(s){function a(g){return pr(g,s)}if(0<Mr.length){pr(Mr[0],s);for(var u=1;u<Mr.length;u++){var p=Mr[u];p.blockedOn===s&&(p.blockedOn=null)}}for(Wt!==null&&pr(Wt,s),dr!==null&&pr(dr,s),fr!==null&&pr(fr,s),Gi.forEach(a),Kn.forEach(a),u=0;u<Nr.length;u++)p=Nr[u],p.blockedOn===s&&(p.blockedOn=null);for(;0<Nr.length&&(u=Nr[0],u.blockedOn===null);)Yu(u),u.blockedOn===null&&Nr.shift()}var pi=K.ReactCurrentBatchConfig,Ki=!0;function ut(s,a,u,p){var g=Be,v=pi.transition;pi.transition=null;try{Be=1,Ul(s,a,u,p)}finally{Be=g,pi.transition=v}}function ip(s,a,u,p){var g=Be,v=pi.transition;pi.transition=null;try{Be=4,Ul(s,a,u,p)}finally{Be=g,pi.transition=v}}function Ul(s,a,u,p){if(Ki){var g=ca(s,a,u,p);if(g===null)mp(s,a,p,no,u),Ku(s,p);else if(rp(g,s,a,u,p))p.stopPropagation();else if(Ku(s,p),a&4&&-1<np.indexOf(s)){for(;g!==null;){var v=ec(g);if(v!==null&&Hu(v),v=ca(s,a,u,p),v===null&&mp(s,a,p,no,u),v===g)break;g=v}g!==null&&p.stopPropagation()}else mp(s,a,p,null,u)}}var no=null;function ca(s,a,u,p){if(no=null,s=Jo(p),s=so(s),s!==null)if(a=ur(s),a===null)s=null;else if(u=a.tag,u===13){if(s=Qs(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return no=s,null}function zl(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ju()){case Xs:return 1;case zi:return 4;case Gn:case Vl:return 16;case Uu:return 536870912;default:return 16}default:return 16}}var Vn=null,ua=null,vn=null;function Bl(){if(vn)return vn;var s,a=ua,u=a.length,p,g="value"in Vn?Vn.value:Vn.textContent,v=g.length;for(s=0;s<u&&a[s]===g[s];s++);var x=u-s;for(p=1;p<=x&&a[u-p]===g[v-p];p++);return vn=g.slice(s,1<p?1-p:void 0)}function ha(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Lr(){return!0}function $l(){return!1}function qt(s){function a(u,p,g,v,x){this._reactName=u,this._targetInst=g,this.type=p,this.nativeEvent=v,this.target=x,this.currentTarget=null;for(var M in s)s.hasOwnProperty(M)&&(u=s[M],this[M]=u?u(v):v[M]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Lr:$l,this.isPropagationStopped=$l,this}return F(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Lr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Lr)},persist:function(){},isPersistent:Lr}),a}var gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},da=qt(gr),Vr=F({},gr,{view:0,detail:0}),sp=qt(Vr),fa,mi,Yi,ro=F({},Vr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Yi&&(Yi&&s.type==="mousemove"?(fa=s.screenX-Yi.screenX,mi=s.screenY-Yi.screenY):mi=fa=0,Yi=s),fa)},movementY:function(s){return"movementY"in s?s.movementY:mi}}),pa=qt(ro),Hl=F({},ro,{dataTransfer:0}),Xu=qt(Hl),ma=F({},Vr,{relatedTarget:0}),ga=qt(ma),Ju=F({},gr,{animationName:0,elapsedTime:0,pseudoElement:0}),gi=qt(Ju),Zu=F({},gr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),eh=qt(Zu),th=F({},gr,{data:0}),Wl=qt(th),ya={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rh(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=nh[s])?!!a[s]:!1}function Fr(){return rh}var f=F({},Vr,{key:function(s){if(s.key){var a=ya[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=ha(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?fn[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fr,charCode:function(s){return s.type==="keypress"?ha(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ha(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),_=qt(f),E=F({},ro,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),A=qt(E),$=F({},Vr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fr}),Q=qt($),ue=F({},gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xe=qt(ue),Lt=F({},ro,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),$e=qt(Lt),Ut=[9,13,27,32],Ct=c&&"CompositionEvent"in window,Yn=null;c&&"documentMode"in document&&(Yn=document.documentMode);var Fn=c&&"TextEvent"in window&&!Yn,io=c&&(!Ct||Yn&&8<Yn&&11>=Yn),_a=" ",L_=!1;function V_(s,a){switch(s){case"keyup":return Ut.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function F_(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var va=!1;function gk(s,a){switch(s){case"compositionend":return F_(a);case"keypress":return a.which!==32?null:(L_=!0,_a);case"textInput":return s=a.data,s===_a&&L_?null:s;default:return null}}function yk(s,a){if(va)return s==="compositionend"||!Ct&&V_(s,a)?(s=Bl(),vn=ua=Vn=null,va=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return io&&a.locale!=="ko"?null:a.data;default:return null}}var _k={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function j_(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!_k[s.type]:a==="textarea"}function U_(s,a,u,p){Or(p),a=lh(a,"onChange"),0<a.length&&(u=new da("onChange","change",null,u,p),s.push({event:u,listeners:a}))}var ql=null,Gl=null;function vk(s){iv(s,0)}function ih(s){var a=xa(s);if(gn(a))return s}function wk(s,a){if(s==="change")return a}var z_=!1;if(c){var op;if(c){var ap="oninput"in document;if(!ap){var B_=document.createElement("div");B_.setAttribute("oninput","return;"),ap=typeof B_.oninput=="function"}op=ap}else op=!1;z_=op&&(!document.documentMode||9<document.documentMode)}function $_(){ql&&(ql.detachEvent("onpropertychange",H_),Gl=ql=null)}function H_(s){if(s.propertyName==="value"&&ih(Gl)){var a=[];U_(a,Gl,s,Jo(s)),Ol(vk,a)}}function Ek(s,a,u){s==="focusin"?($_(),ql=a,Gl=u,ql.attachEvent("onpropertychange",H_)):s==="focusout"&&$_()}function Tk(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ih(Gl)}function bk(s,a){if(s==="click")return ih(a)}function xk(s,a){if(s==="input"||s==="change")return ih(a)}function Sk(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var yr=typeof Object.is=="function"?Object.is:Sk;function Kl(s,a){if(yr(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),p=Object.keys(a);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var g=u[p];if(!h.call(a,g)||!yr(s[g],a[g]))return!1}return!0}function W_(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function q_(s,a){var u=W_(s);s=0;for(var p;u;){if(u.nodeType===3){if(p=s+u.textContent.length,s<=a&&p>=a)return{node:u,offset:a-s};s=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=W_(u)}}function G_(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?G_(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function K_(){for(var s=window,a=un();a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=un(s.document)}return a}function lp(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function Ik(s){var a=K_(),u=s.focusedElem,p=s.selectionRange;if(a!==u&&u&&u.ownerDocument&&G_(u.ownerDocument.documentElement,u)){if(p!==null&&lp(u)){if(a=p.start,s=p.end,s===void 0&&(s=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(s,u.value.length);else if(s=(a=u.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var g=u.textContent.length,v=Math.min(p.start,g);p=p.end===void 0?v:Math.min(p.end,g),!s.extend&&v>p&&(g=p,p=v,v=g),g=q_(u,v);var x=q_(u,p);g&&x&&(s.rangeCount!==1||s.anchorNode!==g.node||s.anchorOffset!==g.offset||s.focusNode!==x.node||s.focusOffset!==x.offset)&&(a=a.createRange(),a.setStart(g.node,g.offset),s.removeAllRanges(),v>p?(s.addRange(a),s.extend(x.node,x.offset)):(a.setEnd(x.node,x.offset),s.addRange(a)))}}for(a=[],s=u;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)s=a[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var kk=c&&"documentMode"in document&&11>=document.documentMode,wa=null,cp=null,Yl=null,up=!1;function Y_(s,a,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;up||wa==null||wa!==un(p)||(p=wa,"selectionStart"in p&&lp(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Yl&&Kl(Yl,p)||(Yl=p,p=lh(cp,"onSelect"),0<p.length&&(a=new da("onSelect","select",null,a,u),s.push({event:a,listeners:p}),a.target=wa)))}function sh(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var Ea={animationend:sh("Animation","AnimationEnd"),animationiteration:sh("Animation","AnimationIteration"),animationstart:sh("Animation","AnimationStart"),transitionend:sh("Transition","TransitionEnd")},hp={},Q_={};c&&(Q_=document.createElement("div").style,"AnimationEvent"in window||(delete Ea.animationend.animation,delete Ea.animationiteration.animation,delete Ea.animationstart.animation),"TransitionEvent"in window||delete Ea.transitionend.transition);function oh(s){if(hp[s])return hp[s];if(!Ea[s])return s;var a=Ea[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in Q_)return hp[s]=a[u];return s}var X_=oh("animationend"),J_=oh("animationiteration"),Z_=oh("animationstart"),ev=oh("transitionend"),tv=new Map,nv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qi(s,a){tv.set(s,a),o(a,[s])}for(var dp=0;dp<nv.length;dp++){var fp=nv[dp],Ck=fp.toLowerCase(),Pk=fp[0].toUpperCase()+fp.slice(1);Qi(Ck,"on"+Pk)}Qi(X_,"onAnimationEnd"),Qi(J_,"onAnimationIteration"),Qi(Z_,"onAnimationStart"),Qi("dblclick","onDoubleClick"),Qi("focusin","onFocus"),Qi("focusout","onBlur"),Qi(ev,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ak=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ql));function rv(s,a,u){var p=s.type||"unknown-event";s.currentTarget=u,Lu(p,a,void 0,s),s.currentTarget=null}function iv(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var p=s[u],g=p.event;p=p.listeners;e:{var v=void 0;if(a)for(var x=p.length-1;0<=x;x--){var M=p[x],U=M.instance,Y=M.currentTarget;if(M=M.listener,U!==v&&g.isPropagationStopped())break e;rv(g,M,Y),v=U}else for(x=0;x<p.length;x++){if(M=p[x],U=M.instance,Y=M.currentTarget,M=M.listener,U!==v&&g.isPropagationStopped())break e;rv(g,M,Y),v=U}}}if(cr)throw s=Ml,cr=!1,Ml=null,s}function st(s,a){var u=a[Ep];u===void 0&&(u=a[Ep]=new Set);var p=s+"__bubble";u.has(p)||(sv(a,s,2,!1),u.add(p))}function pp(s,a,u){var p=0;a&&(p|=4),sv(u,s,p,a)}var ah="_reactListening"+Math.random().toString(36).slice(2);function Xl(s){if(!s[ah]){s[ah]=!0,r.forEach(function(u){u!=="selectionchange"&&(Ak.has(u)||pp(u,!1,s),pp(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[ah]||(a[ah]=!0,pp("selectionchange",!1,a))}}function sv(s,a,u,p){switch(zl(a)){case 1:var g=ut;break;case 4:g=ip;break;default:g=Ul}u=g.bind(null,a,u,s),g=void 0,!ta||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),p?g!==void 0?s.addEventListener(a,u,{capture:!0,passive:g}):s.addEventListener(a,u,!0):g!==void 0?s.addEventListener(a,u,{passive:g}):s.addEventListener(a,u,!1)}function mp(s,a,u,p,g){var v=p;if((a&1)===0&&(a&2)===0&&p!==null)e:for(;;){if(p===null)return;var x=p.tag;if(x===3||x===4){var M=p.stateNode.containerInfo;if(M===g||M.nodeType===8&&M.parentNode===g)break;if(x===4)for(x=p.return;x!==null;){var U=x.tag;if((U===3||U===4)&&(U=x.stateNode.containerInfo,U===g||U.nodeType===8&&U.parentNode===g))return;x=x.return}for(;M!==null;){if(x=so(M),x===null)return;if(U=x.tag,U===5||U===6){p=v=x;continue e}M=M.parentNode}}p=p.return}Ol(function(){var Y=v,oe=Jo(u),ae=[];e:{var se=tv.get(s);if(se!==void 0){var me=da,ve=s;switch(s){case"keypress":if(ha(u)===0)break e;case"keydown":case"keyup":me=_;break;case"focusin":ve="focus",me=ga;break;case"focusout":ve="blur",me=ga;break;case"beforeblur":case"afterblur":me=ga;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=pa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=Xu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=Q;break;case X_:case J_:case Z_:me=gi;break;case ev:me=Xe;break;case"scroll":me=sp;break;case"wheel":me=$e;break;case"copy":case"cut":case"paste":me=eh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=A}var we=(a&4)!==0,Et=!we&&s==="scroll",H=we?se!==null?se+"Capture":null:se;we=[];for(var z=Y,W;z!==null;){W=z;var le=W.stateNode;if(W.tag===5&&le!==null&&(W=le,H!==null&&(le=wt(z,H),le!=null&&we.push(Jl(z,le,W)))),Et)break;z=z.return}0<we.length&&(se=new me(se,ve,null,u,oe),ae.push({event:se,listeners:we}))}}if((a&7)===0){e:{if(se=s==="mouseover"||s==="pointerover",me=s==="mouseout"||s==="pointerout",se&&u!==qs&&(ve=u.relatedTarget||u.fromElement)&&(so(ve)||ve[yi]))break e;if((me||se)&&(se=oe.window===oe?oe:(se=oe.ownerDocument)?se.defaultView||se.parentWindow:window,me?(ve=u.relatedTarget||u.toElement,me=Y,ve=ve?so(ve):null,ve!==null&&(Et=ur(ve),ve!==Et||ve.tag!==5&&ve.tag!==6)&&(ve=null)):(me=null,ve=Y),me!==ve)){if(we=pa,le="onMouseLeave",H="onMouseEnter",z="mouse",(s==="pointerout"||s==="pointerover")&&(we=A,le="onPointerLeave",H="onPointerEnter",z="pointer"),Et=me==null?se:xa(me),W=ve==null?se:xa(ve),se=new we(le,z+"leave",me,u,oe),se.target=Et,se.relatedTarget=W,le=null,so(oe)===Y&&(we=new we(H,z+"enter",ve,u,oe),we.target=W,we.relatedTarget=Et,le=we),Et=le,me&&ve)t:{for(we=me,H=ve,z=0,W=we;W;W=Ta(W))z++;for(W=0,le=H;le;le=Ta(le))W++;for(;0<z-W;)we=Ta(we),z--;for(;0<W-z;)H=Ta(H),W--;for(;z--;){if(we===H||H!==null&&we===H.alternate)break t;we=Ta(we),H=Ta(H)}we=null}else we=null;me!==null&&ov(ae,se,me,we,!1),ve!==null&&Et!==null&&ov(ae,Et,ve,we,!0)}}e:{if(se=Y?xa(Y):window,me=se.nodeName&&se.nodeName.toLowerCase(),me==="select"||me==="input"&&se.type==="file")var Ee=wk;else if(j_(se))if(z_)Ee=xk;else{Ee=Tk;var Se=Ek}else(me=se.nodeName)&&me.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Ee=bk);if(Ee&&(Ee=Ee(s,Y))){U_(ae,Ee,u,oe);break e}Se&&Se(s,se,Y),s==="focusout"&&(Se=se._wrapperState)&&Se.controlled&&se.type==="number"&&Yo(se,"number",se.value)}switch(Se=Y?xa(Y):window,s){case"focusin":(j_(Se)||Se.contentEditable==="true")&&(wa=Se,cp=Y,Yl=null);break;case"focusout":Yl=cp=wa=null;break;case"mousedown":up=!0;break;case"contextmenu":case"mouseup":case"dragend":up=!1,Y_(ae,u,oe);break;case"selectionchange":if(kk)break;case"keydown":case"keyup":Y_(ae,u,oe)}var Ie;if(Ct)e:{switch(s){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else va?V_(s,u)&&(Ae="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Ae="onCompositionStart");Ae&&(io&&u.locale!=="ko"&&(va||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&va&&(Ie=Bl()):(Vn=oe,ua="value"in Vn?Vn.value:Vn.textContent,va=!0)),Se=lh(Y,Ae),0<Se.length&&(Ae=new Wl(Ae,s,null,u,oe),ae.push({event:Ae,listeners:Se}),Ie?Ae.data=Ie:(Ie=F_(u),Ie!==null&&(Ae.data=Ie)))),(Ie=Fn?gk(s,u):yk(s,u))&&(Y=lh(Y,"onBeforeInput"),0<Y.length&&(oe=new Wl("onBeforeInput","beforeinput",null,u,oe),ae.push({event:oe,listeners:Y}),oe.data=Ie))}iv(ae,a)})}function Jl(s,a,u){return{instance:s,listener:a,currentTarget:u}}function lh(s,a){for(var u=a+"Capture",p=[];s!==null;){var g=s,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=wt(s,u),v!=null&&p.unshift(Jl(s,v,g)),v=wt(s,a),v!=null&&p.push(Jl(s,v,g))),s=s.return}return p}function Ta(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function ov(s,a,u,p,g){for(var v=a._reactName,x=[];u!==null&&u!==p;){var M=u,U=M.alternate,Y=M.stateNode;if(U!==null&&U===p)break;M.tag===5&&Y!==null&&(M=Y,g?(U=wt(u,v),U!=null&&x.unshift(Jl(u,U,M))):g||(U=wt(u,v),U!=null&&x.push(Jl(u,U,M)))),u=u.return}x.length!==0&&s.push({event:a,listeners:x})}var Rk=/\r\n?/g,Dk=/\u0000|\uFFFD/g;function av(s){return(typeof s=="string"?s:""+s).replace(Rk,`
`).replace(Dk,"")}function ch(s,a,u){if(a=av(a),av(s)!==a&&u)throw Error(t(425))}function uh(){}var gp=null,yp=null;function _p(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var vp=typeof setTimeout=="function"?setTimeout:void 0,Ok=typeof clearTimeout=="function"?clearTimeout:void 0,lv=typeof Promise=="function"?Promise:void 0,Mk=typeof queueMicrotask=="function"?queueMicrotask:typeof lv<"u"?function(s){return lv.resolve(null).then(s).catch(Nk)}:vp;function Nk(s){setTimeout(function(){throw s})}function wp(s,a){var u=a,p=0;do{var g=u.nextSibling;if(s.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(p===0){s.removeChild(g),mr(a);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=g}while(u);mr(a)}function Xi(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function cv(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return s;a--}else u==="/$"&&a++}s=s.previousSibling}return null}var ba=Math.random().toString(36).slice(2),jr="__reactFiber$"+ba,Zl="__reactProps$"+ba,yi="__reactContainer$"+ba,Ep="__reactEvents$"+ba,Lk="__reactListeners$"+ba,Vk="__reactHandles$"+ba;function so(s){var a=s[jr];if(a)return a;for(var u=s.parentNode;u;){if(a=u[yi]||u[jr]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=cv(s);s!==null;){if(u=s[jr])return u;s=cv(s)}return a}s=u,u=s.parentNode}return null}function ec(s){return s=s[jr]||s[yi],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function xa(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function hh(s){return s[Zl]||null}var Tp=[],Sa=-1;function Ji(s){return{current:s}}function ot(s){0>Sa||(s.current=Tp[Sa],Tp[Sa]=null,Sa--)}function nt(s,a){Sa++,Tp[Sa]=s.current,s.current=a}var Zi={},Zt=Ji(Zi),wn=Ji(!1),oo=Zi;function Ia(s,a){var u=s.type.contextTypes;if(!u)return Zi;var p=s.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===a)return p.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in u)g[v]=a[v];return p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=g),g}function En(s){return s=s.childContextTypes,s!=null}function dh(){ot(wn),ot(Zt)}function uv(s,a,u){if(Zt.current!==Zi)throw Error(t(168));nt(Zt,a),nt(wn,u)}function hv(s,a,u){var p=s.stateNode;if(a=a.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var g in p)if(!(g in a))throw Error(t(108,ce(s)||"Unknown",g));return F({},u,p)}function fh(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Zi,oo=Zt.current,nt(Zt,s),nt(wn,wn.current),!0}function dv(s,a,u){var p=s.stateNode;if(!p)throw Error(t(169));u?(s=hv(s,a,oo),p.__reactInternalMemoizedMergedChildContext=s,ot(wn),ot(Zt),nt(Zt,s)):ot(wn),nt(wn,u)}var _i=null,ph=!1,bp=!1;function fv(s){_i===null?_i=[s]:_i.push(s)}function Fk(s){ph=!0,fv(s)}function es(){if(!bp&&_i!==null){bp=!0;var s=0,a=Be;try{var u=_i;for(Be=1;s<u.length;s++){var p=u[s];do p=p(!0);while(p!==null)}_i=null,ph=!1}catch(g){throw _i!==null&&(_i=_i.slice(s+1)),sa(Xs,es),g}finally{Be=a,bp=!1}}return null}var ka=[],Ca=0,mh=null,gh=0,Qn=[],Xn=0,ao=null,vi=1,wi="";function lo(s,a){ka[Ca++]=gh,ka[Ca++]=mh,mh=s,gh=a}function pv(s,a,u){Qn[Xn++]=vi,Qn[Xn++]=wi,Qn[Xn++]=ao,ao=s;var p=vi;s=wi;var g=32-dn(p)-1;p&=~(1<<g),u+=1;var v=32-dn(a)+g;if(30<v){var x=g-g%5;v=(p&(1<<x)-1).toString(32),p>>=x,g-=x,vi=1<<32-dn(a)+g|u<<g|p,wi=v+s}else vi=1<<v|u<<g|p,wi=s}function xp(s){s.return!==null&&(lo(s,1),pv(s,1,0))}function Sp(s){for(;s===mh;)mh=ka[--Ca],ka[Ca]=null,gh=ka[--Ca],ka[Ca]=null;for(;s===ao;)ao=Qn[--Xn],Qn[Xn]=null,wi=Qn[--Xn],Qn[Xn]=null,vi=Qn[--Xn],Qn[Xn]=null}var jn=null,Un=null,ht=!1,_r=null;function mv(s,a){var u=tr(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=s,a=s.deletions,a===null?(s.deletions=[u],s.flags|=16):a.push(u)}function gv(s,a){switch(s.tag){case 5:var u=s.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,jn=s,Un=Xi(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,jn=s,Un=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=ao!==null?{id:vi,overflow:wi}:null,s.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=tr(18,null,null,0),u.stateNode=a,u.return=s,s.child=u,jn=s,Un=null,!0):!1;default:return!1}}function Ip(s){return(s.mode&1)!==0&&(s.flags&128)===0}function kp(s){if(ht){var a=Un;if(a){var u=a;if(!gv(s,a)){if(Ip(s))throw Error(t(418));a=Xi(u.nextSibling);var p=jn;a&&gv(s,a)?mv(p,u):(s.flags=s.flags&-4097|2,ht=!1,jn=s)}}else{if(Ip(s))throw Error(t(418));s.flags=s.flags&-4097|2,ht=!1,jn=s}}}function yv(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;jn=s}function yh(s){if(s!==jn)return!1;if(!ht)return yv(s),ht=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!_p(s.type,s.memoizedProps)),a&&(a=Un)){if(Ip(s))throw _v(),Error(t(418));for(;a;)mv(s,a),a=Xi(a.nextSibling)}if(yv(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(a===0){Un=Xi(s.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}s=s.nextSibling}Un=null}}else Un=jn?Xi(s.stateNode.nextSibling):null;return!0}function _v(){for(var s=Un;s;)s=Xi(s.nextSibling)}function Pa(){Un=jn=null,ht=!1}function Cp(s){_r===null?_r=[s]:_r.push(s)}var jk=K.ReactCurrentBatchConfig;function vr(s,a){if(s&&s.defaultProps){a=F({},a),s=s.defaultProps;for(var u in s)a[u]===void 0&&(a[u]=s[u]);return a}return a}var _h=Ji(null),vh=null,Aa=null,Pp=null;function Ap(){Pp=Aa=vh=null}function Rp(s){var a=_h.current;ot(_h),s._currentValue=a}function Dp(s,a,u){for(;s!==null;){var p=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),s===u)break;s=s.return}}function Ra(s,a){vh=s,Pp=Aa=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&(Tn=!0),s.firstContext=null)}function Jn(s){var a=s._currentValue;if(Pp!==s)if(s={context:s,memoizedValue:a,next:null},Aa===null){if(vh===null)throw Error(t(308));Aa=s,vh.dependencies={lanes:0,firstContext:s}}else Aa=Aa.next=s;return a}var co=null;function Op(s){co===null?co=[s]:co.push(s)}function vv(s,a,u,p){var g=a.interleaved;return g===null?(u.next=u,Op(a)):(u.next=g.next,g.next=u),a.interleaved=u,Ei(s,p)}function Ei(s,a){s.lanes|=a;var u=s.alternate;for(u!==null&&(u.lanes|=a),u=s,s=s.return;s!==null;)s.childLanes|=a,u=s.alternate,u!==null&&(u.childLanes|=a),u=s,s=s.return;return u.tag===3?u.stateNode:null}var ts=!1;function Mp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wv(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Ti(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function ns(s,a,u){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,(We&2)!==0){var g=p.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),p.pending=a,Ei(s,u)}return g=p.interleaved,g===null?(a.next=a,Op(p)):(a.next=g.next,g.next=a),p.interleaved=a,Ei(s,u)}function wh(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var p=a.lanes;p&=s.pendingLanes,u|=p,a.lanes=u,Wi(s,u)}}function Ev(s,a){var u=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var g=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var x={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};v===null?g=v=x:v=v.next=x,u=u.next}while(u!==null);v===null?g=v=a:v=v.next=a}else g=v=a;u={baseState:p.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:p.shared,effects:p.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}function Eh(s,a,u,p){var g=s.updateQueue;ts=!1;var v=g.firstBaseUpdate,x=g.lastBaseUpdate,M=g.shared.pending;if(M!==null){g.shared.pending=null;var U=M,Y=U.next;U.next=null,x===null?v=Y:x.next=Y,x=U;var oe=s.alternate;oe!==null&&(oe=oe.updateQueue,M=oe.lastBaseUpdate,M!==x&&(M===null?oe.firstBaseUpdate=Y:M.next=Y,oe.lastBaseUpdate=U))}if(v!==null){var ae=g.baseState;x=0,oe=Y=U=null,M=v;do{var se=M.lane,me=M.eventTime;if((p&se)===se){oe!==null&&(oe=oe.next={eventTime:me,lane:0,tag:M.tag,payload:M.payload,callback:M.callback,next:null});e:{var ve=s,we=M;switch(se=a,me=u,we.tag){case 1:if(ve=we.payload,typeof ve=="function"){ae=ve.call(me,ae,se);break e}ae=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=we.payload,se=typeof ve=="function"?ve.call(me,ae,se):ve,se==null)break e;ae=F({},ae,se);break e;case 2:ts=!0}}M.callback!==null&&M.lane!==0&&(s.flags|=64,se=g.effects,se===null?g.effects=[M]:se.push(M))}else me={eventTime:me,lane:se,tag:M.tag,payload:M.payload,callback:M.callback,next:null},oe===null?(Y=oe=me,U=ae):oe=oe.next=me,x|=se;if(M=M.next,M===null){if(M=g.shared.pending,M===null)break;se=M,M=se.next,se.next=null,g.lastBaseUpdate=se,g.shared.pending=null}}while(!0);if(oe===null&&(U=ae),g.baseState=U,g.firstBaseUpdate=Y,g.lastBaseUpdate=oe,a=g.shared.interleaved,a!==null){g=a;do x|=g.lane,g=g.next;while(g!==a)}else v===null&&(g.shared.lanes=0);fo|=x,s.lanes=x,s.memoizedState=ae}}function Tv(s,a,u){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var p=s[a],g=p.callback;if(g!==null){if(p.callback=null,p=u,typeof g!="function")throw Error(t(191,g));g.call(p)}}}var bv=new n.Component().refs;function Np(s,a,u,p){a=s.memoizedState,u=u(p,a),u=u==null?a:F({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Th={isMounted:function(s){return(s=s._reactInternals)?ur(s)===s:!1},enqueueSetState:function(s,a,u){s=s._reactInternals;var p=mn(),g=os(s),v=Ti(p,g);v.payload=a,u!=null&&(v.callback=u),a=ns(s,v,g),a!==null&&(Tr(a,s,g,p),wh(a,s,g))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var p=mn(),g=os(s),v=Ti(p,g);v.tag=1,v.payload=a,u!=null&&(v.callback=u),a=ns(s,v,g),a!==null&&(Tr(a,s,g,p),wh(a,s,g))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=mn(),p=os(s),g=Ti(u,p);g.tag=2,a!=null&&(g.callback=a),a=ns(s,g,p),a!==null&&(Tr(a,s,p,u),wh(a,s,p))}};function xv(s,a,u,p,g,v,x){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,v,x):a.prototype&&a.prototype.isPureReactComponent?!Kl(u,p)||!Kl(g,v):!0}function Sv(s,a,u){var p=!1,g=Zi,v=a.contextType;return typeof v=="object"&&v!==null?v=Jn(v):(g=En(a)?oo:Zt.current,p=a.contextTypes,v=(p=p!=null)?Ia(s,g):Zi),a=new a(u,v),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Th,s.stateNode=a,a._reactInternals=s,p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=g,s.__reactInternalMemoizedMaskedChildContext=v),a}function Iv(s,a,u,p){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,p),a.state!==s&&Th.enqueueReplaceState(a,a.state,null)}function Lp(s,a,u,p){var g=s.stateNode;g.props=u,g.state=s.memoizedState,g.refs=bv,Mp(s);var v=a.contextType;typeof v=="object"&&v!==null?g.context=Jn(v):(v=En(a)?oo:Zt.current,g.context=Ia(s,v)),g.state=s.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Np(s,a,v,u),g.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(a=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),a!==g.state&&Th.enqueueReplaceState(g,g.state,null),Eh(s,u,g,p),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308)}function tc(s,a,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var p=u.stateNode}if(!p)throw Error(t(147,s));var g=p,v=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===v?a.ref:(a=function(x){var M=g.refs;M===bv&&(M=g.refs={}),x===null?delete M[v]:M[v]=x},a._stringRef=v,a)}if(typeof s!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,s))}return s}function bh(s,a){throw s=Object.prototype.toString.call(a),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function kv(s){var a=s._init;return a(s._payload)}function Cv(s){function a(H,z){if(s){var W=H.deletions;W===null?(H.deletions=[z],H.flags|=16):W.push(z)}}function u(H,z){if(!s)return null;for(;z!==null;)a(H,z),z=z.sibling;return null}function p(H,z){for(H=new Map;z!==null;)z.key!==null?H.set(z.key,z):H.set(z.index,z),z=z.sibling;return H}function g(H,z){return H=ls(H,z),H.index=0,H.sibling=null,H}function v(H,z,W){return H.index=W,s?(W=H.alternate,W!==null?(W=W.index,W<z?(H.flags|=2,z):W):(H.flags|=2,z)):(H.flags|=1048576,z)}function x(H){return s&&H.alternate===null&&(H.flags|=2),H}function M(H,z,W,le){return z===null||z.tag!==6?(z=vm(W,H.mode,le),z.return=H,z):(z=g(z,W),z.return=H,z)}function U(H,z,W,le){var Ee=W.type;return Ee===R?oe(H,z,W.props.children,le,W.key):z!==null&&(z.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===ie&&kv(Ee)===z.type)?(le=g(z,W.props),le.ref=tc(H,z,W),le.return=H,le):(le=Bh(W.type,W.key,W.props,null,H.mode,le),le.ref=tc(H,z,W),le.return=H,le)}function Y(H,z,W,le){return z===null||z.tag!==4||z.stateNode.containerInfo!==W.containerInfo||z.stateNode.implementation!==W.implementation?(z=wm(W,H.mode,le),z.return=H,z):(z=g(z,W.children||[]),z.return=H,z)}function oe(H,z,W,le,Ee){return z===null||z.tag!==7?(z=yo(W,H.mode,le,Ee),z.return=H,z):(z=g(z,W),z.return=H,z)}function ae(H,z,W){if(typeof z=="string"&&z!==""||typeof z=="number")return z=vm(""+z,H.mode,W),z.return=H,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case q:return W=Bh(z.type,z.key,z.props,null,H.mode,W),W.ref=tc(H,null,z),W.return=H,W;case J:return z=wm(z,H.mode,W),z.return=H,z;case ie:var le=z._init;return ae(H,le(z._payload),W)}if(li(z)||he(z))return z=yo(z,H.mode,W,null),z.return=H,z;bh(H,z)}return null}function se(H,z,W,le){var Ee=z!==null?z.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return Ee!==null?null:M(H,z,""+W,le);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case q:return W.key===Ee?U(H,z,W,le):null;case J:return W.key===Ee?Y(H,z,W,le):null;case ie:return Ee=W._init,se(H,z,Ee(W._payload),le)}if(li(W)||he(W))return Ee!==null?null:oe(H,z,W,le,null);bh(H,W)}return null}function me(H,z,W,le,Ee){if(typeof le=="string"&&le!==""||typeof le=="number")return H=H.get(W)||null,M(z,H,""+le,Ee);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case q:return H=H.get(le.key===null?W:le.key)||null,U(z,H,le,Ee);case J:return H=H.get(le.key===null?W:le.key)||null,Y(z,H,le,Ee);case ie:var Se=le._init;return me(H,z,W,Se(le._payload),Ee)}if(li(le)||he(le))return H=H.get(W)||null,oe(z,H,le,Ee,null);bh(z,le)}return null}function ve(H,z,W,le){for(var Ee=null,Se=null,Ie=z,Ae=z=0,$t=null;Ie!==null&&Ae<W.length;Ae++){Ie.index>Ae?($t=Ie,Ie=null):$t=Ie.sibling;var Ge=se(H,Ie,W[Ae],le);if(Ge===null){Ie===null&&(Ie=$t);break}s&&Ie&&Ge.alternate===null&&a(H,Ie),z=v(Ge,z,Ae),Se===null?Ee=Ge:Se.sibling=Ge,Se=Ge,Ie=$t}if(Ae===W.length)return u(H,Ie),ht&&lo(H,Ae),Ee;if(Ie===null){for(;Ae<W.length;Ae++)Ie=ae(H,W[Ae],le),Ie!==null&&(z=v(Ie,z,Ae),Se===null?Ee=Ie:Se.sibling=Ie,Se=Ie);return ht&&lo(H,Ae),Ee}for(Ie=p(H,Ie);Ae<W.length;Ae++)$t=me(Ie,H,Ae,W[Ae],le),$t!==null&&(s&&$t.alternate!==null&&Ie.delete($t.key===null?Ae:$t.key),z=v($t,z,Ae),Se===null?Ee=$t:Se.sibling=$t,Se=$t);return s&&Ie.forEach(function(cs){return a(H,cs)}),ht&&lo(H,Ae),Ee}function we(H,z,W,le){var Ee=he(W);if(typeof Ee!="function")throw Error(t(150));if(W=Ee.call(W),W==null)throw Error(t(151));for(var Se=Ee=null,Ie=z,Ae=z=0,$t=null,Ge=W.next();Ie!==null&&!Ge.done;Ae++,Ge=W.next()){Ie.index>Ae?($t=Ie,Ie=null):$t=Ie.sibling;var cs=se(H,Ie,Ge.value,le);if(cs===null){Ie===null&&(Ie=$t);break}s&&Ie&&cs.alternate===null&&a(H,Ie),z=v(cs,z,Ae),Se===null?Ee=cs:Se.sibling=cs,Se=cs,Ie=$t}if(Ge.done)return u(H,Ie),ht&&lo(H,Ae),Ee;if(Ie===null){for(;!Ge.done;Ae++,Ge=W.next())Ge=ae(H,Ge.value,le),Ge!==null&&(z=v(Ge,z,Ae),Se===null?Ee=Ge:Se.sibling=Ge,Se=Ge);return ht&&lo(H,Ae),Ee}for(Ie=p(H,Ie);!Ge.done;Ae++,Ge=W.next())Ge=me(Ie,H,Ae,Ge.value,le),Ge!==null&&(s&&Ge.alternate!==null&&Ie.delete(Ge.key===null?Ae:Ge.key),z=v(Ge,z,Ae),Se===null?Ee=Ge:Se.sibling=Ge,Se=Ge);return s&&Ie.forEach(function(_C){return a(H,_C)}),ht&&lo(H,Ae),Ee}function Et(H,z,W,le){if(typeof W=="object"&&W!==null&&W.type===R&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case q:e:{for(var Ee=W.key,Se=z;Se!==null;){if(Se.key===Ee){if(Ee=W.type,Ee===R){if(Se.tag===7){u(H,Se.sibling),z=g(Se,W.props.children),z.return=H,H=z;break e}}else if(Se.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===ie&&kv(Ee)===Se.type){u(H,Se.sibling),z=g(Se,W.props),z.ref=tc(H,Se,W),z.return=H,H=z;break e}u(H,Se);break}else a(H,Se);Se=Se.sibling}W.type===R?(z=yo(W.props.children,H.mode,le,W.key),z.return=H,H=z):(le=Bh(W.type,W.key,W.props,null,H.mode,le),le.ref=tc(H,z,W),le.return=H,H=le)}return x(H);case J:e:{for(Se=W.key;z!==null;){if(z.key===Se)if(z.tag===4&&z.stateNode.containerInfo===W.containerInfo&&z.stateNode.implementation===W.implementation){u(H,z.sibling),z=g(z,W.children||[]),z.return=H,H=z;break e}else{u(H,z);break}else a(H,z);z=z.sibling}z=wm(W,H.mode,le),z.return=H,H=z}return x(H);case ie:return Se=W._init,Et(H,z,Se(W._payload),le)}if(li(W))return ve(H,z,W,le);if(he(W))return we(H,z,W,le);bh(H,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,z!==null&&z.tag===6?(u(H,z.sibling),z=g(z,W),z.return=H,H=z):(u(H,z),z=vm(W,H.mode,le),z.return=H,H=z),x(H)):u(H,z)}return Et}var Da=Cv(!0),Pv=Cv(!1),nc={},Ur=Ji(nc),rc=Ji(nc),ic=Ji(nc);function uo(s){if(s===nc)throw Error(t(174));return s}function Vp(s,a){switch(nt(ic,a),nt(rc,s),nt(Ur,nc),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Nt(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=Nt(a,s)}ot(Ur),nt(Ur,a)}function Oa(){ot(Ur),ot(rc),ot(ic)}function Av(s){uo(ic.current);var a=uo(Ur.current),u=Nt(a,s.type);a!==u&&(nt(rc,s),nt(Ur,u))}function Fp(s){rc.current===s&&(ot(Ur),ot(rc))}var dt=Ji(0);function xh(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var jp=[];function Up(){for(var s=0;s<jp.length;s++)jp[s]._workInProgressVersionPrimary=null;jp.length=0}var Sh=K.ReactCurrentDispatcher,zp=K.ReactCurrentBatchConfig,ho=0,ft=null,Vt=null,zt=null,Ih=!1,sc=!1,oc=0,Uk=0;function en(){throw Error(t(321))}function Bp(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!yr(s[u],a[u]))return!1;return!0}function $p(s,a,u,p,g,v){if(ho=v,ft=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Sh.current=s===null||s.memoizedState===null?Hk:Wk,s=u(p,g),sc){v=0;do{if(sc=!1,oc=0,25<=v)throw Error(t(301));v+=1,zt=Vt=null,a.updateQueue=null,Sh.current=qk,s=u(p,g)}while(sc)}if(Sh.current=Ph,a=Vt!==null&&Vt.next!==null,ho=0,zt=Vt=ft=null,Ih=!1,a)throw Error(t(300));return s}function Hp(){var s=oc!==0;return oc=0,s}function zr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?ft.memoizedState=zt=s:zt=zt.next=s,zt}function Zn(){if(Vt===null){var s=ft.alternate;s=s!==null?s.memoizedState:null}else s=Vt.next;var a=zt===null?ft.memoizedState:zt.next;if(a!==null)zt=a,Vt=s;else{if(s===null)throw Error(t(310));Vt=s,s={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},zt===null?ft.memoizedState=zt=s:zt=zt.next=s}return zt}function ac(s,a){return typeof a=="function"?a(s):a}function Wp(s){var a=Zn(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var p=Vt,g=p.baseQueue,v=u.pending;if(v!==null){if(g!==null){var x=g.next;g.next=v.next,v.next=x}p.baseQueue=g=v,u.pending=null}if(g!==null){v=g.next,p=p.baseState;var M=x=null,U=null,Y=v;do{var oe=Y.lane;if((ho&oe)===oe)U!==null&&(U=U.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),p=Y.hasEagerState?Y.eagerState:s(p,Y.action);else{var ae={lane:oe,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};U===null?(M=U=ae,x=p):U=U.next=ae,ft.lanes|=oe,fo|=oe}Y=Y.next}while(Y!==null&&Y!==v);U===null?x=p:U.next=M,yr(p,a.memoizedState)||(Tn=!0),a.memoizedState=p,a.baseState=x,a.baseQueue=U,u.lastRenderedState=p}if(s=u.interleaved,s!==null){g=s;do v=g.lane,ft.lanes|=v,fo|=v,g=g.next;while(g!==s)}else g===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function qp(s){var a=Zn(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var p=u.dispatch,g=u.pending,v=a.memoizedState;if(g!==null){u.pending=null;var x=g=g.next;do v=s(v,x.action),x=x.next;while(x!==g);yr(v,a.memoizedState)||(Tn=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),u.lastRenderedState=v}return[v,p]}function Rv(){}function Dv(s,a){var u=ft,p=Zn(),g=a(),v=!yr(p.memoizedState,g);if(v&&(p.memoizedState=g,Tn=!0),p=p.queue,Gp(Nv.bind(null,u,p,s),[s]),p.getSnapshot!==a||v||zt!==null&&zt.memoizedState.tag&1){if(u.flags|=2048,lc(9,Mv.bind(null,u,p,g,a),void 0,null),Bt===null)throw Error(t(349));(ho&30)!==0||Ov(u,a,g)}return g}function Ov(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=ft.updateQueue,a===null?(a={lastEffect:null,stores:null},ft.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function Mv(s,a,u,p){a.value=u,a.getSnapshot=p,Lv(a)&&Vv(s)}function Nv(s,a,u){return u(function(){Lv(a)&&Vv(s)})}function Lv(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!yr(s,u)}catch{return!0}}function Vv(s){var a=Ei(s,1);a!==null&&Tr(a,s,1,-1)}function Fv(s){var a=zr();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ac,lastRenderedState:s},a.queue=s,s=s.dispatch=$k.bind(null,ft,s),[a.memoizedState,s]}function lc(s,a,u,p){return s={tag:s,create:a,destroy:u,deps:p,next:null},a=ft.updateQueue,a===null?(a={lastEffect:null,stores:null},ft.updateQueue=a,a.lastEffect=s.next=s):(u=a.lastEffect,u===null?a.lastEffect=s.next=s:(p=u.next,u.next=s,s.next=p,a.lastEffect=s)),s}function jv(){return Zn().memoizedState}function kh(s,a,u,p){var g=zr();ft.flags|=s,g.memoizedState=lc(1|a,u,void 0,p===void 0?null:p)}function Ch(s,a,u,p){var g=Zn();p=p===void 0?null:p;var v=void 0;if(Vt!==null){var x=Vt.memoizedState;if(v=x.destroy,p!==null&&Bp(p,x.deps)){g.memoizedState=lc(a,u,v,p);return}}ft.flags|=s,g.memoizedState=lc(1|a,u,v,p)}function Uv(s,a){return kh(8390656,8,s,a)}function Gp(s,a){return Ch(2048,8,s,a)}function zv(s,a){return Ch(4,2,s,a)}function Bv(s,a){return Ch(4,4,s,a)}function $v(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function Hv(s,a,u){return u=u!=null?u.concat([s]):null,Ch(4,4,$v.bind(null,a,s),u)}function Kp(){}function Wv(s,a){var u=Zn();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&Bp(a,p[1])?p[0]:(u.memoizedState=[s,a],s)}function qv(s,a){var u=Zn();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&Bp(a,p[1])?p[0]:(s=s(),u.memoizedState=[s,a],s)}function Gv(s,a,u){return(ho&21)===0?(s.baseState&&(s.baseState=!1,Tn=!0),s.memoizedState=u):(yr(u,a)||(u=eo(),ft.lanes|=u,fo|=u,s.baseState=!0),a)}function zk(s,a){var u=Be;Be=u!==0&&4>u?u:4,s(!0);var p=zp.transition;zp.transition={};try{s(!1),a()}finally{Be=u,zp.transition=p}}function Kv(){return Zn().memoizedState}function Bk(s,a,u){var p=os(s);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},Yv(s))Qv(a,u);else if(u=vv(s,a,u,p),u!==null){var g=mn();Tr(u,s,p,g),Xv(u,a,p)}}function $k(s,a,u){var p=os(s),g={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(Yv(s))Qv(a,g);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var x=a.lastRenderedState,M=v(x,u);if(g.hasEagerState=!0,g.eagerState=M,yr(M,x)){var U=a.interleaved;U===null?(g.next=g,Op(a)):(g.next=U.next,U.next=g),a.interleaved=g;return}}catch{}finally{}u=vv(s,a,g,p),u!==null&&(g=mn(),Tr(u,s,p,g),Xv(u,a,p))}}function Yv(s){var a=s.alternate;return s===ft||a!==null&&a===ft}function Qv(s,a){sc=Ih=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function Xv(s,a,u){if((u&4194240)!==0){var p=a.lanes;p&=s.pendingLanes,u|=p,a.lanes=u,Wi(s,u)}}var Ph={readContext:Jn,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useInsertionEffect:en,useLayoutEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useMutableSource:en,useSyncExternalStore:en,useId:en,unstable_isNewReconciler:!1},Hk={readContext:Jn,useCallback:function(s,a){return zr().memoizedState=[s,a===void 0?null:a],s},useContext:Jn,useEffect:Uv,useImperativeHandle:function(s,a,u){return u=u!=null?u.concat([s]):null,kh(4194308,4,$v.bind(null,a,s),u)},useLayoutEffect:function(s,a){return kh(4194308,4,s,a)},useInsertionEffect:function(s,a){return kh(4,2,s,a)},useMemo:function(s,a){var u=zr();return a=a===void 0?null:a,s=s(),u.memoizedState=[s,a],s},useReducer:function(s,a,u){var p=zr();return a=u!==void 0?u(a):a,p.memoizedState=p.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},p.queue=s,s=s.dispatch=Bk.bind(null,ft,s),[p.memoizedState,s]},useRef:function(s){var a=zr();return s={current:s},a.memoizedState=s},useState:Fv,useDebugValue:Kp,useDeferredValue:function(s){return zr().memoizedState=s},useTransition:function(){var s=Fv(!1),a=s[0];return s=zk.bind(null,s[1]),zr().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,u){var p=ft,g=zr();if(ht){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),Bt===null)throw Error(t(349));(ho&30)!==0||Ov(p,a,u)}g.memoizedState=u;var v={value:u,getSnapshot:a};return g.queue=v,Uv(Nv.bind(null,p,v,s),[s]),p.flags|=2048,lc(9,Mv.bind(null,p,v,u,a),void 0,null),u},useId:function(){var s=zr(),a=Bt.identifierPrefix;if(ht){var u=wi,p=vi;u=(p&~(1<<32-dn(p)-1)).toString(32)+u,a=":"+a+"R"+u,u=oc++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=Uk++,a=":"+a+"r"+u.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},Wk={readContext:Jn,useCallback:Wv,useContext:Jn,useEffect:Gp,useImperativeHandle:Hv,useInsertionEffect:zv,useLayoutEffect:Bv,useMemo:qv,useReducer:Wp,useRef:jv,useState:function(){return Wp(ac)},useDebugValue:Kp,useDeferredValue:function(s){var a=Zn();return Gv(a,Vt.memoizedState,s)},useTransition:function(){var s=Wp(ac)[0],a=Zn().memoizedState;return[s,a]},useMutableSource:Rv,useSyncExternalStore:Dv,useId:Kv,unstable_isNewReconciler:!1},qk={readContext:Jn,useCallback:Wv,useContext:Jn,useEffect:Gp,useImperativeHandle:Hv,useInsertionEffect:zv,useLayoutEffect:Bv,useMemo:qv,useReducer:qp,useRef:jv,useState:function(){return qp(ac)},useDebugValue:Kp,useDeferredValue:function(s){var a=Zn();return Vt===null?a.memoizedState=s:Gv(a,Vt.memoizedState,s)},useTransition:function(){var s=qp(ac)[0],a=Zn().memoizedState;return[s,a]},useMutableSource:Rv,useSyncExternalStore:Dv,useId:Kv,unstable_isNewReconciler:!1};function Ma(s,a){try{var u="",p=a;do u+=Le(p),p=p.return;while(p);var g=u}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:s,source:a,stack:g,digest:null}}function Yp(s,a,u){return{value:s,source:null,stack:u??null,digest:a??null}}function Qp(s,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var Gk=typeof WeakMap=="function"?WeakMap:Map;function Jv(s,a,u){u=Ti(-1,u),u.tag=3,u.payload={element:null};var p=a.value;return u.callback=function(){Lh||(Lh=!0,hm=p),Qp(s,a)},u}function Zv(s,a,u){u=Ti(-1,u),u.tag=3;var p=s.type.getDerivedStateFromError;if(typeof p=="function"){var g=a.value;u.payload=function(){return p(g)},u.callback=function(){Qp(s,a)}}var v=s.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(u.callback=function(){Qp(s,a),typeof p!="function"&&(is===null?is=new Set([this]):is.add(this));var x=a.stack;this.componentDidCatch(a.value,{componentStack:x!==null?x:""})}),u}function e0(s,a,u){var p=s.pingCache;if(p===null){p=s.pingCache=new Gk;var g=new Set;p.set(a,g)}else g=p.get(a),g===void 0&&(g=new Set,p.set(a,g));g.has(u)||(g.add(u),s=aC.bind(null,s,a,u),a.then(s,s))}function t0(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function n0(s,a,u,p,g){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=Ti(-1,1),a.tag=2,ns(u,a,1))),u.lanes|=1),s):(s.flags|=65536,s.lanes=g,s)}var Kk=K.ReactCurrentOwner,Tn=!1;function pn(s,a,u,p){a.child=s===null?Pv(a,null,u,p):Da(a,s.child,u,p)}function r0(s,a,u,p,g){u=u.render;var v=a.ref;return Ra(a,g),p=$p(s,a,u,p,v,g),u=Hp(),s!==null&&!Tn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~g,bi(s,a,g)):(ht&&u&&xp(a),a.flags|=1,pn(s,a,p,g),a.child)}function i0(s,a,u,p,g){if(s===null){var v=u.type;return typeof v=="function"&&!_m(v)&&v.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=v,s0(s,a,v,p,g)):(s=Bh(u.type,null,p,a,a.mode,g),s.ref=a.ref,s.return=a,a.child=s)}if(v=s.child,(s.lanes&g)===0){var x=v.memoizedProps;if(u=u.compare,u=u!==null?u:Kl,u(x,p)&&s.ref===a.ref)return bi(s,a,g)}return a.flags|=1,s=ls(v,p),s.ref=a.ref,s.return=a,a.child=s}function s0(s,a,u,p,g){if(s!==null){var v=s.memoizedProps;if(Kl(v,p)&&s.ref===a.ref)if(Tn=!1,a.pendingProps=p=v,(s.lanes&g)!==0)(s.flags&131072)!==0&&(Tn=!0);else return a.lanes=s.lanes,bi(s,a,g)}return Xp(s,a,u,p,g)}function o0(s,a,u){var p=a.pendingProps,g=p.children,v=s!==null?s.memoizedState:null;if(p.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(La,zn),zn|=u;else{if((u&1073741824)===0)return s=v!==null?v.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,nt(La,zn),zn|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=v!==null?v.baseLanes:u,nt(La,zn),zn|=p}else v!==null?(p=v.baseLanes|u,a.memoizedState=null):p=u,nt(La,zn),zn|=p;return pn(s,a,g,u),a.child}function a0(s,a){var u=a.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function Xp(s,a,u,p,g){var v=En(u)?oo:Zt.current;return v=Ia(a,v),Ra(a,g),u=$p(s,a,u,p,v,g),p=Hp(),s!==null&&!Tn?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~g,bi(s,a,g)):(ht&&p&&xp(a),a.flags|=1,pn(s,a,u,g),a.child)}function l0(s,a,u,p,g){if(En(u)){var v=!0;fh(a)}else v=!1;if(Ra(a,g),a.stateNode===null)Rh(s,a),Sv(a,u,p),Lp(a,u,p,g),p=!0;else if(s===null){var x=a.stateNode,M=a.memoizedProps;x.props=M;var U=x.context,Y=u.contextType;typeof Y=="object"&&Y!==null?Y=Jn(Y):(Y=En(u)?oo:Zt.current,Y=Ia(a,Y));var oe=u.getDerivedStateFromProps,ae=typeof oe=="function"||typeof x.getSnapshotBeforeUpdate=="function";ae||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(M!==p||U!==Y)&&Iv(a,x,p,Y),ts=!1;var se=a.memoizedState;x.state=se,Eh(a,p,x,g),U=a.memoizedState,M!==p||se!==U||wn.current||ts?(typeof oe=="function"&&(Np(a,u,oe,p),U=a.memoizedState),(M=ts||xv(a,u,M,p,se,U,Y))?(ae||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(a.flags|=4194308)):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=U),x.props=p,x.state=U,x.context=Y,p=M):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{x=a.stateNode,wv(s,a),M=a.memoizedProps,Y=a.type===a.elementType?M:vr(a.type,M),x.props=Y,ae=a.pendingProps,se=x.context,U=u.contextType,typeof U=="object"&&U!==null?U=Jn(U):(U=En(u)?oo:Zt.current,U=Ia(a,U));var me=u.getDerivedStateFromProps;(oe=typeof me=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(M!==ae||se!==U)&&Iv(a,x,p,U),ts=!1,se=a.memoizedState,x.state=se,Eh(a,p,x,g);var ve=a.memoizedState;M!==ae||se!==ve||wn.current||ts?(typeof me=="function"&&(Np(a,u,me,p),ve=a.memoizedState),(Y=ts||xv(a,u,Y,p,se,ve,U)||!1)?(oe||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(p,ve,U),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(p,ve,U)),typeof x.componentDidUpdate=="function"&&(a.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof x.componentDidUpdate!="function"||M===s.memoizedProps&&se===s.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&se===s.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=ve),x.props=p,x.state=ve,x.context=U,p=Y):(typeof x.componentDidUpdate!="function"||M===s.memoizedProps&&se===s.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&se===s.memoizedState||(a.flags|=1024),p=!1)}return Jp(s,a,u,p,v,g)}function Jp(s,a,u,p,g,v){a0(s,a);var x=(a.flags&128)!==0;if(!p&&!x)return g&&dv(a,u,!1),bi(s,a,v);p=a.stateNode,Kk.current=a;var M=x&&typeof u.getDerivedStateFromError!="function"?null:p.render();return a.flags|=1,s!==null&&x?(a.child=Da(a,s.child,null,v),a.child=Da(a,null,M,v)):pn(s,a,M,v),a.memoizedState=p.state,g&&dv(a,u,!0),a.child}function c0(s){var a=s.stateNode;a.pendingContext?uv(s,a.pendingContext,a.pendingContext!==a.context):a.context&&uv(s,a.context,!1),Vp(s,a.containerInfo)}function u0(s,a,u,p,g){return Pa(),Cp(g),a.flags|=256,pn(s,a,u,p),a.child}var Zp={dehydrated:null,treeContext:null,retryLane:0};function em(s){return{baseLanes:s,cachePool:null,transitions:null}}function h0(s,a,u){var p=a.pendingProps,g=dt.current,v=!1,x=(a.flags&128)!==0,M;if((M=x)||(M=s!==null&&s.memoizedState===null?!1:(g&2)!==0),M?(v=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(g|=1),nt(dt,g&1),s===null)return kp(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(x=p.children,s=p.fallback,v?(p=a.mode,v=a.child,x={mode:"hidden",children:x},(p&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=x):v=$h(x,p,0,null),s=yo(s,p,u,null),v.return=a,s.return=a,v.sibling=s,a.child=v,a.child.memoizedState=em(u),a.memoizedState=Zp,s):tm(a,x));if(g=s.memoizedState,g!==null&&(M=g.dehydrated,M!==null))return Yk(s,a,x,p,M,g,u);if(v){v=p.fallback,x=a.mode,g=s.child,M=g.sibling;var U={mode:"hidden",children:p.children};return(x&1)===0&&a.child!==g?(p=a.child,p.childLanes=0,p.pendingProps=U,a.deletions=null):(p=ls(g,U),p.subtreeFlags=g.subtreeFlags&14680064),M!==null?v=ls(M,v):(v=yo(v,x,u,null),v.flags|=2),v.return=a,p.return=a,p.sibling=v,a.child=p,p=v,v=a.child,x=s.child.memoizedState,x=x===null?em(u):{baseLanes:x.baseLanes|u,cachePool:null,transitions:x.transitions},v.memoizedState=x,v.childLanes=s.childLanes&~u,a.memoizedState=Zp,p}return v=s.child,s=v.sibling,p=ls(v,{mode:"visible",children:p.children}),(a.mode&1)===0&&(p.lanes=u),p.return=a,p.sibling=null,s!==null&&(u=a.deletions,u===null?(a.deletions=[s],a.flags|=16):u.push(s)),a.child=p,a.memoizedState=null,p}function tm(s,a){return a=$h({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function Ah(s,a,u,p){return p!==null&&Cp(p),Da(a,s.child,null,u),s=tm(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function Yk(s,a,u,p,g,v,x){if(u)return a.flags&256?(a.flags&=-257,p=Yp(Error(t(422))),Ah(s,a,x,p)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(v=p.fallback,g=a.mode,p=$h({mode:"visible",children:p.children},g,0,null),v=yo(v,g,x,null),v.flags|=2,p.return=a,v.return=a,p.sibling=v,a.child=p,(a.mode&1)!==0&&Da(a,s.child,null,x),a.child.memoizedState=em(x),a.memoizedState=Zp,v);if((a.mode&1)===0)return Ah(s,a,x,null);if(g.data==="$!"){if(p=g.nextSibling&&g.nextSibling.dataset,p)var M=p.dgst;return p=M,v=Error(t(419)),p=Yp(v,p,void 0),Ah(s,a,x,p)}if(M=(x&s.childLanes)!==0,Tn||M){if(p=Bt,p!==null){switch(x&-x){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(p.suspendedLanes|x))!==0?0:g,g!==0&&g!==v.retryLane&&(v.retryLane=g,Ei(s,g),Tr(p,s,g,-1))}return ym(),p=Yp(Error(t(421))),Ah(s,a,x,p)}return g.data==="$?"?(a.flags|=128,a.child=s.child,a=lC.bind(null,s),g._reactRetry=a,null):(s=v.treeContext,Un=Xi(g.nextSibling),jn=a,ht=!0,_r=null,s!==null&&(Qn[Xn++]=vi,Qn[Xn++]=wi,Qn[Xn++]=ao,vi=s.id,wi=s.overflow,ao=a),a=tm(a,p.children),a.flags|=4096,a)}function d0(s,a,u){s.lanes|=a;var p=s.alternate;p!==null&&(p.lanes|=a),Dp(s.return,a,u)}function nm(s,a,u,p,g){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:g}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=p,v.tail=u,v.tailMode=g)}function f0(s,a,u){var p=a.pendingProps,g=p.revealOrder,v=p.tail;if(pn(s,a,p.children,u),p=dt.current,(p&2)!==0)p=p&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&d0(s,u,a);else if(s.tag===19)d0(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}p&=1}if(nt(dt,p),(a.mode&1)===0)a.memoizedState=null;else switch(g){case"forwards":for(u=a.child,g=null;u!==null;)s=u.alternate,s!==null&&xh(s)===null&&(g=u),u=u.sibling;u=g,u===null?(g=a.child,a.child=null):(g=u.sibling,u.sibling=null),nm(a,!1,g,u,v);break;case"backwards":for(u=null,g=a.child,a.child=null;g!==null;){if(s=g.alternate,s!==null&&xh(s)===null){a.child=g;break}s=g.sibling,g.sibling=u,u=g,g=s}nm(a,!0,u,null,v);break;case"together":nm(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Rh(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function bi(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),fo|=a.lanes,(u&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(t(153));if(a.child!==null){for(s=a.child,u=ls(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=ls(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function Qk(s,a,u){switch(a.tag){case 3:c0(a),Pa();break;case 5:Av(a);break;case 1:En(a.type)&&fh(a);break;case 4:Vp(a,a.stateNode.containerInfo);break;case 10:var p=a.type._context,g=a.memoizedProps.value;nt(_h,p._currentValue),p._currentValue=g;break;case 13:if(p=a.memoizedState,p!==null)return p.dehydrated!==null?(nt(dt,dt.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?h0(s,a,u):(nt(dt,dt.current&1),s=bi(s,a,u),s!==null?s.sibling:null);nt(dt,dt.current&1);break;case 19:if(p=(u&a.childLanes)!==0,(s.flags&128)!==0){if(p)return f0(s,a,u);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),nt(dt,dt.current),p)break;return null;case 22:case 23:return a.lanes=0,o0(s,a,u)}return bi(s,a,u)}var p0,rm,m0,g0;p0=function(s,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},rm=function(){},m0=function(s,a,u,p){var g=s.memoizedProps;if(g!==p){s=a.stateNode,uo(Ur.current);var v=null;switch(u){case"input":g=yn(s,g),p=yn(s,p),v=[];break;case"select":g=F({},g,{value:void 0}),p=F({},p,{value:void 0}),v=[];break;case"textarea":g=bl(s,g),p=bl(s,p),v=[];break;default:typeof g.onClick!="function"&&typeof p.onClick=="function"&&(s.onclick=uh)}Pl(u,p);var x;u=null;for(Y in g)if(!p.hasOwnProperty(Y)&&g.hasOwnProperty(Y)&&g[Y]!=null)if(Y==="style"){var M=g[Y];for(x in M)M.hasOwnProperty(x)&&(u||(u={}),u[x]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(i.hasOwnProperty(Y)?v||(v=[]):(v=v||[]).push(Y,null));for(Y in p){var U=p[Y];if(M=g?.[Y],p.hasOwnProperty(Y)&&U!==M&&(U!=null||M!=null))if(Y==="style")if(M){for(x in M)!M.hasOwnProperty(x)||U&&U.hasOwnProperty(x)||(u||(u={}),u[x]="");for(x in U)U.hasOwnProperty(x)&&M[x]!==U[x]&&(u||(u={}),u[x]=U[x])}else u||(v||(v=[]),v.push(Y,u)),u=U;else Y==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,M=M?M.__html:void 0,U!=null&&M!==U&&(v=v||[]).push(Y,U)):Y==="children"?typeof U!="string"&&typeof U!="number"||(v=v||[]).push(Y,""+U):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(i.hasOwnProperty(Y)?(U!=null&&Y==="onScroll"&&st("scroll",s),v||M===U||(v=[])):(v=v||[]).push(Y,U))}u&&(v=v||[]).push("style",u);var Y=v;(a.updateQueue=Y)&&(a.flags|=4)}},g0=function(s,a,u,p){u!==p&&(a.flags|=4)};function cc(s,a){if(!ht)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function tn(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,p=0;if(a)for(var g=s.child;g!==null;)u|=g.lanes|g.childLanes,p|=g.subtreeFlags&14680064,p|=g.flags&14680064,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)u|=g.lanes|g.childLanes,p|=g.subtreeFlags,p|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=p,s.childLanes=u,a}function Xk(s,a,u){var p=a.pendingProps;switch(Sp(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(a),null;case 1:return En(a.type)&&dh(),tn(a),null;case 3:return p=a.stateNode,Oa(),ot(wn),ot(Zt),Up(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(s===null||s.child===null)&&(yh(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,_r!==null&&(pm(_r),_r=null))),rm(s,a),tn(a),null;case 5:Fp(a);var g=uo(ic.current);if(u=a.type,s!==null&&a.stateNode!=null)m0(s,a,u,p,g),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!p){if(a.stateNode===null)throw Error(t(166));return tn(a),null}if(s=uo(Ur.current),yh(a)){p=a.stateNode,u=a.type;var v=a.memoizedProps;switch(p[jr]=a,p[Zl]=v,s=(a.mode&1)!==0,u){case"dialog":st("cancel",p),st("close",p);break;case"iframe":case"object":case"embed":st("load",p);break;case"video":case"audio":for(g=0;g<Ql.length;g++)st(Ql[g],p);break;case"source":st("error",p);break;case"img":case"image":case"link":st("error",p),st("load",p);break;case"details":st("toggle",p);break;case"input":hn(p,v),st("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!v.multiple},st("invalid",p);break;case"textarea":Qo(p,v),st("invalid",p)}Pl(u,v),g=null;for(var x in v)if(v.hasOwnProperty(x)){var M=v[x];x==="children"?typeof M=="string"?p.textContent!==M&&(v.suppressHydrationWarning!==!0&&ch(p.textContent,M,s),g=["children",M]):typeof M=="number"&&p.textContent!==""+M&&(v.suppressHydrationWarning!==!0&&ch(p.textContent,M,s),g=["children",""+M]):i.hasOwnProperty(x)&&M!=null&&x==="onScroll"&&st("scroll",p)}switch(u){case"input":Mn(p),Nu(p,v,!0);break;case"textarea":Mn(p),xl(p);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(p.onclick=uh)}p=g,a.updateQueue=p,p!==null&&(a.flags|=4)}else{x=g.nodeType===9?g:g.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Mt(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=x.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof p.is=="string"?s=x.createElement(u,{is:p.is}):(s=x.createElement(u),u==="select"&&(x=s,p.multiple?x.multiple=!0:p.size&&(x.size=p.size))):s=x.createElementNS(s,u),s[jr]=a,s[Zl]=p,p0(s,a,!1,!1),a.stateNode=s;e:{switch(x=Al(u,p),u){case"dialog":st("cancel",s),st("close",s),g=p;break;case"iframe":case"object":case"embed":st("load",s),g=p;break;case"video":case"audio":for(g=0;g<Ql.length;g++)st(Ql[g],s);g=p;break;case"source":st("error",s),g=p;break;case"img":case"image":case"link":st("error",s),st("load",s),g=p;break;case"details":st("toggle",s),g=p;break;case"input":hn(s,p),g=yn(s,p),st("invalid",s);break;case"option":g=p;break;case"select":s._wrapperState={wasMultiple:!!p.multiple},g=F({},p,{value:void 0}),st("invalid",s);break;case"textarea":Qo(s,p),g=bl(s,p),st("invalid",s);break;default:g=p}Pl(u,g),M=g;for(v in M)if(M.hasOwnProperty(v)){var U=M[v];v==="style"?kl(s,U):v==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,U!=null&&Sl(s,U)):v==="children"?typeof U=="string"?(u!=="textarea"||U!=="")&&Ui(s,U):typeof U=="number"&&Ui(s,""+U):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(i.hasOwnProperty(v)?U!=null&&v==="onScroll"&&st("scroll",s):U!=null&&B(s,v,U,x))}switch(u){case"input":Mn(s),Nu(s,p,!1);break;case"textarea":Mn(s),xl(s);break;case"option":p.value!=null&&s.setAttribute("value",""+be(p.value));break;case"select":s.multiple=!!p.multiple,v=p.value,v!=null?ci(s,!!p.multiple,v,!1):p.defaultValue!=null&&ci(s,!!p.multiple,p.defaultValue,!0);break;default:typeof g.onClick=="function"&&(s.onclick=uh)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return tn(a),null;case 6:if(s&&a.stateNode!=null)g0(s,a,s.memoizedProps,p);else{if(typeof p!="string"&&a.stateNode===null)throw Error(t(166));if(u=uo(ic.current),uo(Ur.current),yh(a)){if(p=a.stateNode,u=a.memoizedProps,p[jr]=a,(v=p.nodeValue!==u)&&(s=jn,s!==null))switch(s.tag){case 3:ch(p.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&ch(p.nodeValue,u,(s.mode&1)!==0)}v&&(a.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[jr]=a,a.stateNode=p}return tn(a),null;case 13:if(ot(dt),p=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(ht&&Un!==null&&(a.mode&1)!==0&&(a.flags&128)===0)_v(),Pa(),a.flags|=98560,v=!1;else if(v=yh(a),p!==null&&p.dehydrated!==null){if(s===null){if(!v)throw Error(t(318));if(v=a.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[jr]=a}else Pa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;tn(a),v=!1}else _r!==null&&(pm(_r),_r=null),v=!0;if(!v)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(p=p!==null,p!==(s!==null&&s.memoizedState!==null)&&p&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(dt.current&1)!==0?Ft===0&&(Ft=3):ym())),a.updateQueue!==null&&(a.flags|=4),tn(a),null);case 4:return Oa(),rm(s,a),s===null&&Xl(a.stateNode.containerInfo),tn(a),null;case 10:return Rp(a.type._context),tn(a),null;case 17:return En(a.type)&&dh(),tn(a),null;case 19:if(ot(dt),v=a.memoizedState,v===null)return tn(a),null;if(p=(a.flags&128)!==0,x=v.rendering,x===null)if(p)cc(v,!1);else{if(Ft!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(x=xh(s),x!==null){for(a.flags|=128,cc(v,!1),p=x.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),a.subtreeFlags=0,p=u,u=a.child;u!==null;)v=u,s=p,v.flags&=14680066,x=v.alternate,x===null?(v.childLanes=0,v.lanes=s,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=x.childLanes,v.lanes=x.lanes,v.child=x.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=x.memoizedProps,v.memoizedState=x.memoizedState,v.updateQueue=x.updateQueue,v.type=x.type,s=x.dependencies,v.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return nt(dt,dt.current&1|2),a.child}s=s.sibling}v.tail!==null&&tt()>Va&&(a.flags|=128,p=!0,cc(v,!1),a.lanes=4194304)}else{if(!p)if(s=xh(x),s!==null){if(a.flags|=128,p=!0,u=s.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),cc(v,!0),v.tail===null&&v.tailMode==="hidden"&&!x.alternate&&!ht)return tn(a),null}else 2*tt()-v.renderingStartTime>Va&&u!==1073741824&&(a.flags|=128,p=!0,cc(v,!1),a.lanes=4194304);v.isBackwards?(x.sibling=a.child,a.child=x):(u=v.last,u!==null?u.sibling=x:a.child=x,v.last=x)}return v.tail!==null?(a=v.tail,v.rendering=a,v.tail=a.sibling,v.renderingStartTime=tt(),a.sibling=null,u=dt.current,nt(dt,p?u&1|2:u&1),a):(tn(a),null);case 22:case 23:return gm(),p=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==p&&(a.flags|=8192),p&&(a.mode&1)!==0?(zn&1073741824)!==0&&(tn(a),a.subtreeFlags&6&&(a.flags|=8192)):tn(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function Jk(s,a){switch(Sp(a),a.tag){case 1:return En(a.type)&&dh(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Oa(),ot(wn),ot(Zt),Up(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return Fp(a),null;case 13:if(ot(dt),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(t(340));Pa()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return ot(dt),null;case 4:return Oa(),null;case 10:return Rp(a.type._context),null;case 22:case 23:return gm(),null;case 24:return null;default:return null}}var Dh=!1,nn=!1,Zk=typeof WeakSet=="function"?WeakSet:Set,_e=null;function Na(s,a){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){yt(s,a,p)}else u.current=null}function im(s,a,u){try{u()}catch(p){yt(s,a,p)}}var y0=!1;function eC(s,a){if(gp=Ki,s=K_(),lp(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var g=p.anchorOffset,v=p.focusNode;p=p.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break e}var x=0,M=-1,U=-1,Y=0,oe=0,ae=s,se=null;t:for(;;){for(var me;ae!==u||g!==0&&ae.nodeType!==3||(M=x+g),ae!==v||p!==0&&ae.nodeType!==3||(U=x+p),ae.nodeType===3&&(x+=ae.nodeValue.length),(me=ae.firstChild)!==null;)se=ae,ae=me;for(;;){if(ae===s)break t;if(se===u&&++Y===g&&(M=x),se===v&&++oe===p&&(U=x),(me=ae.nextSibling)!==null)break;ae=se,se=ae.parentNode}ae=me}u=M===-1||U===-1?null:{start:M,end:U}}else u=null}u=u||{start:0,end:0}}else u=null;for(yp={focusedElem:s,selectionRange:u},Ki=!1,_e=a;_e!==null;)if(a=_e,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,_e=s;else for(;_e!==null;){a=_e;try{var ve=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(ve!==null){var we=ve.memoizedProps,Et=ve.memoizedState,H=a.stateNode,z=H.getSnapshotBeforeUpdate(a.elementType===a.type?we:vr(a.type,we),Et);H.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var W=a.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(le){yt(a,a.return,le)}if(s=a.sibling,s!==null){s.return=a.return,_e=s;break}_e=a.return}return ve=y0,y0=!1,ve}function uc(s,a,u){var p=a.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var g=p=p.next;do{if((g.tag&s)===s){var v=g.destroy;g.destroy=void 0,v!==void 0&&im(a,u,v)}g=g.next}while(g!==p)}}function Oh(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&s)===s){var p=u.create;u.destroy=p()}u=u.next}while(u!==a)}}function sm(s){var a=s.ref;if(a!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof a=="function"?a(s):a.current=s}}function _0(s){var a=s.alternate;a!==null&&(s.alternate=null,_0(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[jr],delete a[Zl],delete a[Ep],delete a[Lk],delete a[Vk])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function v0(s){return s.tag===5||s.tag===3||s.tag===4}function w0(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||v0(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function om(s,a,u){var p=s.tag;if(p===5||p===6)s=s.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(s,a):u.insertBefore(s,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(s,u)):(a=u,a.appendChild(s)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=uh));else if(p!==4&&(s=s.child,s!==null))for(om(s,a,u),s=s.sibling;s!==null;)om(s,a,u),s=s.sibling}function am(s,a,u){var p=s.tag;if(p===5||p===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(p!==4&&(s=s.child,s!==null))for(am(s,a,u),s=s.sibling;s!==null;)am(s,a,u),s=s.sibling}var Gt=null,wr=!1;function rs(s,a,u){for(u=u.child;u!==null;)E0(s,a,u),u=u.sibling}function E0(s,a,u){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(Js,u)}catch{}switch(u.tag){case 5:nn||Na(u,a);case 6:var p=Gt,g=wr;Gt=null,rs(s,a,u),Gt=p,wr=g,Gt!==null&&(wr?(s=Gt,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):Gt.removeChild(u.stateNode));break;case 18:Gt!==null&&(wr?(s=Gt,u=u.stateNode,s.nodeType===8?wp(s.parentNode,u):s.nodeType===1&&wp(s,u),mr(s)):wp(Gt,u.stateNode));break;case 4:p=Gt,g=wr,Gt=u.stateNode.containerInfo,wr=!0,rs(s,a,u),Gt=p,wr=g;break;case 0:case 11:case 14:case 15:if(!nn&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){g=p=p.next;do{var v=g,x=v.destroy;v=v.tag,x!==void 0&&((v&2)!==0||(v&4)!==0)&&im(u,a,x),g=g.next}while(g!==p)}rs(s,a,u);break;case 1:if(!nn&&(Na(u,a),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(M){yt(u,a,M)}rs(s,a,u);break;case 21:rs(s,a,u);break;case 22:u.mode&1?(nn=(p=nn)||u.memoizedState!==null,rs(s,a,u),nn=p):rs(s,a,u);break;default:rs(s,a,u)}}function T0(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new Zk),a.forEach(function(p){var g=cC.bind(null,s,p);u.has(p)||(u.add(p),p.then(g,g))})}}function Er(s,a){var u=a.deletions;if(u!==null)for(var p=0;p<u.length;p++){var g=u[p];try{var v=s,x=a,M=x;e:for(;M!==null;){switch(M.tag){case 5:Gt=M.stateNode,wr=!1;break e;case 3:Gt=M.stateNode.containerInfo,wr=!0;break e;case 4:Gt=M.stateNode.containerInfo,wr=!0;break e}M=M.return}if(Gt===null)throw Error(t(160));E0(v,x,g),Gt=null,wr=!1;var U=g.alternate;U!==null&&(U.return=null),g.return=null}catch(Y){yt(g,a,Y)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)b0(a,s),a=a.sibling}function b0(s,a){var u=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Er(a,s),Br(s),p&4){try{uc(3,s,s.return),Oh(3,s)}catch(we){yt(s,s.return,we)}try{uc(5,s,s.return)}catch(we){yt(s,s.return,we)}}break;case 1:Er(a,s),Br(s),p&512&&u!==null&&Na(u,u.return);break;case 5:if(Er(a,s),Br(s),p&512&&u!==null&&Na(u,u.return),s.flags&32){var g=s.stateNode;try{Ui(g,"")}catch(we){yt(s,s.return,we)}}if(p&4&&(g=s.stateNode,g!=null)){var v=s.memoizedProps,x=u!==null?u.memoizedProps:v,M=s.type,U=s.updateQueue;if(s.updateQueue=null,U!==null)try{M==="input"&&v.type==="radio"&&v.name!=null&&ji(g,v),Al(M,x);var Y=Al(M,v);for(x=0;x<U.length;x+=2){var oe=U[x],ae=U[x+1];oe==="style"?kl(g,ae):oe==="dangerouslySetInnerHTML"?Sl(g,ae):oe==="children"?Ui(g,ae):B(g,oe,ae,Y)}switch(M){case"input":$s(g,v);break;case"textarea":Xo(g,v);break;case"select":var se=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var me=v.value;me!=null?ci(g,!!v.multiple,me,!1):se!==!!v.multiple&&(v.defaultValue!=null?ci(g,!!v.multiple,v.defaultValue,!0):ci(g,!!v.multiple,v.multiple?[]:"",!1))}g[Zl]=v}catch(we){yt(s,s.return,we)}}break;case 6:if(Er(a,s),Br(s),p&4){if(s.stateNode===null)throw Error(t(162));g=s.stateNode,v=s.memoizedProps;try{g.nodeValue=v}catch(we){yt(s,s.return,we)}}break;case 3:if(Er(a,s),Br(s),p&4&&u!==null&&u.memoizedState.isDehydrated)try{mr(a.containerInfo)}catch(we){yt(s,s.return,we)}break;case 4:Er(a,s),Br(s);break;case 13:Er(a,s),Br(s),g=s.child,g.flags&8192&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||(um=tt())),p&4&&T0(s);break;case 22:if(oe=u!==null&&u.memoizedState!==null,s.mode&1?(nn=(Y=nn)||oe,Er(a,s),nn=Y):Er(a,s),Br(s),p&8192){if(Y=s.memoizedState!==null,(s.stateNode.isHidden=Y)&&!oe&&(s.mode&1)!==0)for(_e=s,oe=s.child;oe!==null;){for(ae=_e=oe;_e!==null;){switch(se=_e,me=se.child,se.tag){case 0:case 11:case 14:case 15:uc(4,se,se.return);break;case 1:Na(se,se.return);var ve=se.stateNode;if(typeof ve.componentWillUnmount=="function"){p=se,u=se.return;try{a=p,ve.props=a.memoizedProps,ve.state=a.memoizedState,ve.componentWillUnmount()}catch(we){yt(p,u,we)}}break;case 5:Na(se,se.return);break;case 22:if(se.memoizedState!==null){I0(ae);continue}}me!==null?(me.return=se,_e=me):I0(ae)}oe=oe.sibling}e:for(oe=null,ae=s;;){if(ae.tag===5){if(oe===null){oe=ae;try{g=ae.stateNode,Y?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(M=ae.stateNode,U=ae.memoizedProps.style,x=U!=null&&U.hasOwnProperty("display")?U.display:null,M.style.display=Il("display",x))}catch(we){yt(s,s.return,we)}}}else if(ae.tag===6){if(oe===null)try{ae.stateNode.nodeValue=Y?"":ae.memoizedProps}catch(we){yt(s,s.return,we)}}else if((ae.tag!==22&&ae.tag!==23||ae.memoizedState===null||ae===s)&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===s)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===s)break e;oe===ae&&(oe=null),ae=ae.return}oe===ae&&(oe=null),ae.sibling.return=ae.return,ae=ae.sibling}}break;case 19:Er(a,s),Br(s),p&4&&T0(s);break;case 21:break;default:Er(a,s),Br(s)}}function Br(s){var a=s.flags;if(a&2){try{e:{for(var u=s.return;u!==null;){if(v0(u)){var p=u;break e}u=u.return}throw Error(t(160))}switch(p.tag){case 5:var g=p.stateNode;p.flags&32&&(Ui(g,""),p.flags&=-33);var v=w0(s);am(s,v,g);break;case 3:case 4:var x=p.stateNode.containerInfo,M=w0(s);om(s,M,x);break;default:throw Error(t(161))}}catch(U){yt(s,s.return,U)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function tC(s,a,u){_e=s,x0(s)}function x0(s,a,u){for(var p=(s.mode&1)!==0;_e!==null;){var g=_e,v=g.child;if(g.tag===22&&p){var x=g.memoizedState!==null||Dh;if(!x){var M=g.alternate,U=M!==null&&M.memoizedState!==null||nn;M=Dh;var Y=nn;if(Dh=x,(nn=U)&&!Y)for(_e=g;_e!==null;)x=_e,U=x.child,x.tag===22&&x.memoizedState!==null?k0(g):U!==null?(U.return=x,_e=U):k0(g);for(;v!==null;)_e=v,x0(v),v=v.sibling;_e=g,Dh=M,nn=Y}S0(s)}else(g.subtreeFlags&8772)!==0&&v!==null?(v.return=g,_e=v):S0(s)}}function S0(s){for(;_e!==null;){var a=_e;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:nn||Oh(5,a);break;case 1:var p=a.stateNode;if(a.flags&4&&!nn)if(u===null)p.componentDidMount();else{var g=a.elementType===a.type?u.memoizedProps:vr(a.type,u.memoizedProps);p.componentDidUpdate(g,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var v=a.updateQueue;v!==null&&Tv(a,v,p);break;case 3:var x=a.updateQueue;if(x!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}Tv(a,x,u)}break;case 5:var M=a.stateNode;if(u===null&&a.flags&4){u=M;var U=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":U.autoFocus&&u.focus();break;case"img":U.src&&(u.src=U.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var Y=a.alternate;if(Y!==null){var oe=Y.memoizedState;if(oe!==null){var ae=oe.dehydrated;ae!==null&&mr(ae)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}nn||a.flags&512&&sm(a)}catch(se){yt(a,a.return,se)}}if(a===s){_e=null;break}if(u=a.sibling,u!==null){u.return=a.return,_e=u;break}_e=a.return}}function I0(s){for(;_e!==null;){var a=_e;if(a===s){_e=null;break}var u=a.sibling;if(u!==null){u.return=a.return,_e=u;break}_e=a.return}}function k0(s){for(;_e!==null;){var a=_e;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{Oh(4,a)}catch(U){yt(a,u,U)}break;case 1:var p=a.stateNode;if(typeof p.componentDidMount=="function"){var g=a.return;try{p.componentDidMount()}catch(U){yt(a,g,U)}}var v=a.return;try{sm(a)}catch(U){yt(a,v,U)}break;case 5:var x=a.return;try{sm(a)}catch(U){yt(a,x,U)}}}catch(U){yt(a,a.return,U)}if(a===s){_e=null;break}var M=a.sibling;if(M!==null){M.return=a.return,_e=M;break}_e=a.return}}var nC=Math.ceil,Mh=K.ReactCurrentDispatcher,lm=K.ReactCurrentOwner,er=K.ReactCurrentBatchConfig,We=0,Bt=null,Pt=null,Kt=0,zn=0,La=Ji(0),Ft=0,hc=null,fo=0,Nh=0,cm=0,dc=null,bn=null,um=0,Va=1/0,xi=null,Lh=!1,hm=null,is=null,Vh=!1,ss=null,Fh=0,fc=0,dm=null,jh=-1,Uh=0;function mn(){return(We&6)!==0?tt():jh!==-1?jh:jh=tt()}function os(s){return(s.mode&1)===0?1:(We&2)!==0&&Kt!==0?Kt&-Kt:jk.transition!==null?(Uh===0&&(Uh=eo()),Uh):(s=Be,s!==0||(s=window.event,s=s===void 0?16:zl(s.type)),s)}function Tr(s,a,u,p){if(50<fc)throw fc=0,dm=null,Error(t(185));Hi(s,u,p),((We&2)===0||s!==Bt)&&(s===Bt&&((We&2)===0&&(Nh|=u),Ft===4&&as(s,Kt)),xn(s,p),u===1&&We===0&&(a.mode&1)===0&&(Va=tt()+500,ph&&es()))}function xn(s,a){var u=s.callbackNode;di(s,a);var p=Zs(s,s===Bt?Kt:0);if(p===0)u!==null&&Ll(u),s.callbackNode=null,s.callbackPriority=0;else if(a=p&-p,s.callbackPriority!==a){if(u!=null&&Ll(u),a===1)s.tag===0?Fk(P0.bind(null,s)):fv(P0.bind(null,s)),Mk(function(){(We&6)===0&&es()}),u=null;else{switch(qi(p)){case 1:u=Xs;break;case 4:u=zi;break;case 16:u=Gn;break;case 536870912:u=Uu;break;default:u=Gn}u=V0(u,C0.bind(null,s))}s.callbackPriority=a,s.callbackNode=u}}function C0(s,a){if(jh=-1,Uh=0,(We&6)!==0)throw Error(t(327));var u=s.callbackNode;if(Fa()&&s.callbackNode!==u)return null;var p=Zs(s,s===Bt?Kt:0);if(p===0)return null;if((p&30)!==0||(p&s.expiredLanes)!==0||a)a=zh(s,p);else{a=p;var g=We;We|=2;var v=R0();(Bt!==s||Kt!==a)&&(xi=null,Va=tt()+500,mo(s,a));do try{sC();break}catch(M){A0(s,M)}while(!0);Ap(),Mh.current=v,We=g,Pt!==null?a=0:(Bt=null,Kt=0,a=Ft)}if(a!==0){if(a===2&&(g=Ln(s),g!==0&&(p=g,a=fm(s,g))),a===1)throw u=hc,mo(s,0),as(s,p),xn(s,tt()),u;if(a===6)as(s,p);else{if(g=s.current.alternate,(p&30)===0&&!rC(g)&&(a=zh(s,p),a===2&&(v=Ln(s),v!==0&&(p=v,a=fm(s,v))),a===1))throw u=hc,mo(s,0),as(s,p),xn(s,tt()),u;switch(s.finishedWork=g,s.finishedLanes=p,a){case 0:case 1:throw Error(t(345));case 2:go(s,bn,xi);break;case 3:if(as(s,p),(p&130023424)===p&&(a=um+500-tt(),10<a)){if(Zs(s,0)!==0)break;if(g=s.suspendedLanes,(g&p)!==p){mn(),s.pingedLanes|=s.suspendedLanes&g;break}s.timeoutHandle=vp(go.bind(null,s,bn,xi),a);break}go(s,bn,xi);break;case 4:if(as(s,p),(p&4194240)===p)break;for(a=s.eventTimes,g=-1;0<p;){var x=31-dn(p);v=1<<x,x=a[x],x>g&&(g=x),p&=~v}if(p=g,p=tt()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*nC(p/1960))-p,10<p){s.timeoutHandle=vp(go.bind(null,s,bn,xi),p);break}go(s,bn,xi);break;case 5:go(s,bn,xi);break;default:throw Error(t(329))}}}return xn(s,tt()),s.callbackNode===u?C0.bind(null,s):null}function fm(s,a){var u=dc;return s.current.memoizedState.isDehydrated&&(mo(s,a).flags|=256),s=zh(s,a),s!==2&&(a=bn,bn=u,a!==null&&pm(a)),s}function pm(s){bn===null?bn=s:bn.push.apply(bn,s)}function rC(s){for(var a=s;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var g=u[p],v=g.getSnapshot;g=g.value;try{if(!yr(v(),g))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function as(s,a){for(a&=~cm,a&=~Nh,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var u=31-dn(a),p=1<<u;s[u]=-1,a&=~p}}function P0(s){if((We&6)!==0)throw Error(t(327));Fa();var a=Zs(s,0);if((a&1)===0)return xn(s,tt()),null;var u=zh(s,a);if(s.tag!==0&&u===2){var p=Ln(s);p!==0&&(a=p,u=fm(s,p))}if(u===1)throw u=hc,mo(s,0),as(s,a),xn(s,tt()),u;if(u===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,go(s,bn,xi),xn(s,tt()),null}function mm(s,a){var u=We;We|=1;try{return s(a)}finally{We=u,We===0&&(Va=tt()+500,ph&&es())}}function po(s){ss!==null&&ss.tag===0&&(We&6)===0&&Fa();var a=We;We|=1;var u=er.transition,p=Be;try{if(er.transition=null,Be=1,s)return s()}finally{Be=p,er.transition=u,We=a,(We&6)===0&&es()}}function gm(){zn=La.current,ot(La)}function mo(s,a){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,Ok(u)),Pt!==null)for(u=Pt.return;u!==null;){var p=u;switch(Sp(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&dh();break;case 3:Oa(),ot(wn),ot(Zt),Up();break;case 5:Fp(p);break;case 4:Oa();break;case 13:ot(dt);break;case 19:ot(dt);break;case 10:Rp(p.type._context);break;case 22:case 23:gm()}u=u.return}if(Bt=s,Pt=s=ls(s.current,null),Kt=zn=a,Ft=0,hc=null,cm=Nh=fo=0,bn=dc=null,co!==null){for(a=0;a<co.length;a++)if(u=co[a],p=u.interleaved,p!==null){u.interleaved=null;var g=p.next,v=u.pending;if(v!==null){var x=v.next;v.next=g,p.next=x}u.pending=p}co=null}return s}function A0(s,a){do{var u=Pt;try{if(Ap(),Sh.current=Ph,Ih){for(var p=ft.memoizedState;p!==null;){var g=p.queue;g!==null&&(g.pending=null),p=p.next}Ih=!1}if(ho=0,zt=Vt=ft=null,sc=!1,oc=0,lm.current=null,u===null||u.return===null){Ft=1,hc=a,Pt=null;break}e:{var v=s,x=u.return,M=u,U=a;if(a=Kt,M.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){var Y=U,oe=M,ae=oe.tag;if((oe.mode&1)===0&&(ae===0||ae===11||ae===15)){var se=oe.alternate;se?(oe.updateQueue=se.updateQueue,oe.memoizedState=se.memoizedState,oe.lanes=se.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var me=t0(x);if(me!==null){me.flags&=-257,n0(me,x,M,v,a),me.mode&1&&e0(v,Y,a),a=me,U=Y;var ve=a.updateQueue;if(ve===null){var we=new Set;we.add(U),a.updateQueue=we}else ve.add(U);break e}else{if((a&1)===0){e0(v,Y,a),ym();break e}U=Error(t(426))}}else if(ht&&M.mode&1){var Et=t0(x);if(Et!==null){(Et.flags&65536)===0&&(Et.flags|=256),n0(Et,x,M,v,a),Cp(Ma(U,M));break e}}v=U=Ma(U,M),Ft!==4&&(Ft=2),dc===null?dc=[v]:dc.push(v),v=x;do{switch(v.tag){case 3:v.flags|=65536,a&=-a,v.lanes|=a;var H=Jv(v,U,a);Ev(v,H);break e;case 1:M=U;var z=v.type,W=v.stateNode;if((v.flags&128)===0&&(typeof z.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(is===null||!is.has(W)))){v.flags|=65536,a&=-a,v.lanes|=a;var le=Zv(v,M,a);Ev(v,le);break e}}v=v.return}while(v!==null)}O0(u)}catch(Ee){a=Ee,Pt===u&&u!==null&&(Pt=u=u.return);continue}break}while(!0)}function R0(){var s=Mh.current;return Mh.current=Ph,s===null?Ph:s}function ym(){(Ft===0||Ft===3||Ft===2)&&(Ft=4),Bt===null||(fo&268435455)===0&&(Nh&268435455)===0||as(Bt,Kt)}function zh(s,a){var u=We;We|=2;var p=R0();(Bt!==s||Kt!==a)&&(xi=null,mo(s,a));do try{iC();break}catch(g){A0(s,g)}while(!0);if(Ap(),We=u,Mh.current=p,Pt!==null)throw Error(t(261));return Bt=null,Kt=0,Ft}function iC(){for(;Pt!==null;)D0(Pt)}function sC(){for(;Pt!==null&&!Fu();)D0(Pt)}function D0(s){var a=L0(s.alternate,s,zn);s.memoizedProps=s.pendingProps,a===null?O0(s):Pt=a,lm.current=null}function O0(s){var a=s;do{var u=a.alternate;if(s=a.return,(a.flags&32768)===0){if(u=Xk(u,a,zn),u!==null){Pt=u;return}}else{if(u=Jk(u,a),u!==null){u.flags&=32767,Pt=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Ft=6,Pt=null;return}}if(a=a.sibling,a!==null){Pt=a;return}Pt=a=s}while(a!==null);Ft===0&&(Ft=5)}function go(s,a,u){var p=Be,g=er.transition;try{er.transition=null,Be=1,oC(s,a,u,p)}finally{er.transition=g,Be=p}return null}function oC(s,a,u,p){do Fa();while(ss!==null);if((We&6)!==0)throw Error(t(327));u=s.finishedWork;var g=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var v=u.lanes|u.childLanes;if(et(s,v),s===Bt&&(Pt=Bt=null,Kt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Vh||(Vh=!0,V0(Gn,function(){return Fa(),null})),v=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||v){v=er.transition,er.transition=null;var x=Be;Be=1;var M=We;We|=4,lm.current=null,eC(s,u),b0(u,s),Ik(yp),Ki=!!gp,yp=gp=null,s.current=u,tC(u),ep(),We=M,Be=x,er.transition=v}else s.current=u;if(Vh&&(Vh=!1,ss=s,Fh=g),v=s.pendingLanes,v===0&&(is=null),zu(u.stateNode),xn(s,tt()),a!==null)for(p=s.onRecoverableError,u=0;u<a.length;u++)g=a[u],p(g.value,{componentStack:g.stack,digest:g.digest});if(Lh)throw Lh=!1,s=hm,hm=null,s;return(Fh&1)!==0&&s.tag!==0&&Fa(),v=s.pendingLanes,(v&1)!==0?s===dm?fc++:(fc=0,dm=s):fc=0,es(),null}function Fa(){if(ss!==null){var s=qi(Fh),a=er.transition,u=Be;try{if(er.transition=null,Be=16>s?16:s,ss===null)var p=!1;else{if(s=ss,ss=null,Fh=0,(We&6)!==0)throw Error(t(331));var g=We;for(We|=4,_e=s.current;_e!==null;){var v=_e,x=v.child;if((_e.flags&16)!==0){var M=v.deletions;if(M!==null){for(var U=0;U<M.length;U++){var Y=M[U];for(_e=Y;_e!==null;){var oe=_e;switch(oe.tag){case 0:case 11:case 15:uc(8,oe,v)}var ae=oe.child;if(ae!==null)ae.return=oe,_e=ae;else for(;_e!==null;){oe=_e;var se=oe.sibling,me=oe.return;if(_0(oe),oe===Y){_e=null;break}if(se!==null){se.return=me,_e=se;break}_e=me}}}var ve=v.alternate;if(ve!==null){var we=ve.child;if(we!==null){ve.child=null;do{var Et=we.sibling;we.sibling=null,we=Et}while(we!==null)}}_e=v}}if((v.subtreeFlags&2064)!==0&&x!==null)x.return=v,_e=x;else e:for(;_e!==null;){if(v=_e,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:uc(9,v,v.return)}var H=v.sibling;if(H!==null){H.return=v.return,_e=H;break e}_e=v.return}}var z=s.current;for(_e=z;_e!==null;){x=_e;var W=x.child;if((x.subtreeFlags&2064)!==0&&W!==null)W.return=x,_e=W;else e:for(x=z;_e!==null;){if(M=_e,(M.flags&2048)!==0)try{switch(M.tag){case 0:case 11:case 15:Oh(9,M)}}catch(Ee){yt(M,M.return,Ee)}if(M===x){_e=null;break e}var le=M.sibling;if(le!==null){le.return=M.return,_e=le;break e}_e=M.return}}if(We=g,es(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(Js,s)}catch{}p=!0}return p}finally{Be=u,er.transition=a}}return!1}function M0(s,a,u){a=Ma(u,a),a=Jv(s,a,1),s=ns(s,a,1),a=mn(),s!==null&&(Hi(s,1,a),xn(s,a))}function yt(s,a,u){if(s.tag===3)M0(s,s,u);else for(;a!==null;){if(a.tag===3){M0(a,s,u);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(is===null||!is.has(p))){s=Ma(u,s),s=Zv(a,s,1),a=ns(a,s,1),s=mn(),a!==null&&(Hi(a,1,s),xn(a,s));break}}a=a.return}}function aC(s,a,u){var p=s.pingCache;p!==null&&p.delete(a),a=mn(),s.pingedLanes|=s.suspendedLanes&u,Bt===s&&(Kt&u)===u&&(Ft===4||Ft===3&&(Kt&130023424)===Kt&&500>tt()-um?mo(s,0):cm|=u),xn(s,a)}function N0(s,a){a===0&&((s.mode&1)===0?a=1:(a=aa,aa<<=1,(aa&130023424)===0&&(aa=4194304)));var u=mn();s=Ei(s,a),s!==null&&(Hi(s,a,u),xn(s,u))}function lC(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),N0(s,u)}function cC(s,a){var u=0;switch(s.tag){case 13:var p=s.stateNode,g=s.memoizedState;g!==null&&(u=g.retryLane);break;case 19:p=s.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(a),N0(s,u)}var L0;L0=function(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps||wn.current)Tn=!0;else{if((s.lanes&u)===0&&(a.flags&128)===0)return Tn=!1,Qk(s,a,u);Tn=(s.flags&131072)!==0}else Tn=!1,ht&&(a.flags&1048576)!==0&&pv(a,gh,a.index);switch(a.lanes=0,a.tag){case 2:var p=a.type;Rh(s,a),s=a.pendingProps;var g=Ia(a,Zt.current);Ra(a,u),g=$p(null,a,p,s,g,u);var v=Hp();return a.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,En(p)?(v=!0,fh(a)):v=!1,a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Mp(a),g.updater=Th,a.stateNode=g,g._reactInternals=a,Lp(a,p,s,u),a=Jp(null,a,p,!0,v,u)):(a.tag=0,ht&&v&&xp(a),pn(null,a,g,u),a=a.child),a;case 16:p=a.elementType;e:{switch(Rh(s,a),s=a.pendingProps,g=p._init,p=g(p._payload),a.type=p,g=a.tag=hC(p),s=vr(p,s),g){case 0:a=Xp(null,a,p,s,u);break e;case 1:a=l0(null,a,p,s,u);break e;case 11:a=r0(null,a,p,s,u);break e;case 14:a=i0(null,a,p,vr(p.type,s),u);break e}throw Error(t(306,p,""))}return a;case 0:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:vr(p,g),Xp(s,a,p,g,u);case 1:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:vr(p,g),l0(s,a,p,g,u);case 3:e:{if(c0(a),s===null)throw Error(t(387));p=a.pendingProps,v=a.memoizedState,g=v.element,wv(s,a),Eh(a,p,null,u);var x=a.memoizedState;if(p=x.element,v.isDehydrated)if(v={element:p,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){g=Ma(Error(t(423)),a),a=u0(s,a,p,u,g);break e}else if(p!==g){g=Ma(Error(t(424)),a),a=u0(s,a,p,u,g);break e}else for(Un=Xi(a.stateNode.containerInfo.firstChild),jn=a,ht=!0,_r=null,u=Pv(a,null,p,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Pa(),p===g){a=bi(s,a,u);break e}pn(s,a,p,u)}a=a.child}return a;case 5:return Av(a),s===null&&kp(a),p=a.type,g=a.pendingProps,v=s!==null?s.memoizedProps:null,x=g.children,_p(p,g)?x=null:v!==null&&_p(p,v)&&(a.flags|=32),a0(s,a),pn(s,a,x,u),a.child;case 6:return s===null&&kp(a),null;case 13:return h0(s,a,u);case 4:return Vp(a,a.stateNode.containerInfo),p=a.pendingProps,s===null?a.child=Da(a,null,p,u):pn(s,a,p,u),a.child;case 11:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:vr(p,g),r0(s,a,p,g,u);case 7:return pn(s,a,a.pendingProps,u),a.child;case 8:return pn(s,a,a.pendingProps.children,u),a.child;case 12:return pn(s,a,a.pendingProps.children,u),a.child;case 10:e:{if(p=a.type._context,g=a.pendingProps,v=a.memoizedProps,x=g.value,nt(_h,p._currentValue),p._currentValue=x,v!==null)if(yr(v.value,x)){if(v.children===g.children&&!wn.current){a=bi(s,a,u);break e}}else for(v=a.child,v!==null&&(v.return=a);v!==null;){var M=v.dependencies;if(M!==null){x=v.child;for(var U=M.firstContext;U!==null;){if(U.context===p){if(v.tag===1){U=Ti(-1,u&-u),U.tag=2;var Y=v.updateQueue;if(Y!==null){Y=Y.shared;var oe=Y.pending;oe===null?U.next=U:(U.next=oe.next,oe.next=U),Y.pending=U}}v.lanes|=u,U=v.alternate,U!==null&&(U.lanes|=u),Dp(v.return,u,a),M.lanes|=u;break}U=U.next}}else if(v.tag===10)x=v.type===a.type?null:v.child;else if(v.tag===18){if(x=v.return,x===null)throw Error(t(341));x.lanes|=u,M=x.alternate,M!==null&&(M.lanes|=u),Dp(x,u,a),x=v.sibling}else x=v.child;if(x!==null)x.return=v;else for(x=v;x!==null;){if(x===a){x=null;break}if(v=x.sibling,v!==null){v.return=x.return,x=v;break}x=x.return}v=x}pn(s,a,g.children,u),a=a.child}return a;case 9:return g=a.type,p=a.pendingProps.children,Ra(a,u),g=Jn(g),p=p(g),a.flags|=1,pn(s,a,p,u),a.child;case 14:return p=a.type,g=vr(p,a.pendingProps),g=vr(p.type,g),i0(s,a,p,g,u);case 15:return s0(s,a,a.type,a.pendingProps,u);case 17:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:vr(p,g),Rh(s,a),a.tag=1,En(p)?(s=!0,fh(a)):s=!1,Ra(a,u),Sv(a,p,g),Lp(a,p,g,u),Jp(null,a,p,!0,s,u);case 19:return f0(s,a,u);case 22:return o0(s,a,u)}throw Error(t(156,a.tag))};function V0(s,a){return sa(s,a)}function uC(s,a,u,p){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tr(s,a,u,p){return new uC(s,a,u,p)}function _m(s){return s=s.prototype,!(!s||!s.isReactComponent)}function hC(s){if(typeof s=="function")return _m(s)?1:0;if(s!=null){if(s=s.$$typeof,s===V)return 11;if(s===pe)return 14}return 2}function ls(s,a){var u=s.alternate;return u===null?(u=tr(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function Bh(s,a,u,p,g,v){var x=2;if(p=s,typeof s=="function")_m(s)&&(x=1);else if(typeof s=="string")x=5;else e:switch(s){case R:return yo(u.children,g,v,a);case I:x=8,g|=8;break;case P:return s=tr(12,u,a,g|2),s.elementType=P,s.lanes=v,s;case D:return s=tr(13,u,a,g),s.elementType=D,s.lanes=v,s;case ne:return s=tr(19,u,a,g),s.elementType=ne,s.lanes=v,s;case ye:return $h(u,g,v,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case O:x=10;break e;case L:x=9;break e;case V:x=11;break e;case pe:x=14;break e;case ie:x=16,p=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return a=tr(x,u,a,g),a.elementType=s,a.type=p,a.lanes=v,a}function yo(s,a,u,p){return s=tr(7,s,p,a),s.lanes=u,s}function $h(s,a,u,p){return s=tr(22,s,p,a),s.elementType=ye,s.lanes=u,s.stateNode={isHidden:!1},s}function vm(s,a,u){return s=tr(6,s,null,a),s.lanes=u,s}function wm(s,a,u){return a=tr(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function dC(s,a,u,p,g){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$i(0),this.expirationTimes=$i(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$i(0),this.identifierPrefix=p,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Em(s,a,u,p,g,v,x,M,U){return s=new dC(s,a,u,M,U),a===1?(a=1,v===!0&&(a|=8)):a=0,v=tr(3,null,null,a),s.current=v,v.stateNode=s,v.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mp(v),s}function fC(s,a,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:J,key:p==null?null:""+p,children:s,containerInfo:a,implementation:u}}function F0(s){if(!s)return Zi;s=s._reactInternals;e:{if(ur(s)!==s||s.tag!==1)throw Error(t(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(En(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(s.tag===1){var u=s.type;if(En(u))return hv(s,u,a)}return a}function j0(s,a,u,p,g,v,x,M,U){return s=Em(u,p,!0,s,g,v,x,M,U),s.context=F0(null),u=s.current,p=mn(),g=os(u),v=Ti(p,g),v.callback=a??null,ns(u,v,g),s.current.lanes=g,Hi(s,g,p),xn(s,p),s}function Hh(s,a,u,p){var g=a.current,v=mn(),x=os(g);return u=F0(u),a.context===null?a.context=u:a.pendingContext=u,a=Ti(v,x),a.payload={element:s},p=p===void 0?null:p,p!==null&&(a.callback=p),s=ns(g,a,x),s!==null&&(Tr(s,g,x,v),wh(s,g,x)),x}function Wh(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function U0(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function Tm(s,a){U0(s,a),(s=s.alternate)&&U0(s,a)}function pC(){return null}var z0=typeof reportError=="function"?reportError:function(s){console.error(s)};function bm(s){this._internalRoot=s}qh.prototype.render=bm.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(t(409));Hh(s,a,null,null)},qh.prototype.unmount=bm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;po(function(){Hh(null,s,null,null)}),a[yi]=null}};function qh(s){this._internalRoot=s}qh.prototype.unstable_scheduleHydration=function(s){if(s){var a=qu();s={blockedOn:null,target:s,priority:a};for(var u=0;u<Nr.length&&a!==0&&a<Nr[u].priority;u++);Nr.splice(u,0,s),u===0&&Yu(s)}};function xm(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Gh(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function B0(){}function mC(s,a,u,p,g){if(g){if(typeof p=="function"){var v=p;p=function(){var Y=Wh(x);v.call(Y)}}var x=j0(a,p,s,0,null,!1,!1,"",B0);return s._reactRootContainer=x,s[yi]=x.current,Xl(s.nodeType===8?s.parentNode:s),po(),x}for(;g=s.lastChild;)s.removeChild(g);if(typeof p=="function"){var M=p;p=function(){var Y=Wh(U);M.call(Y)}}var U=Em(s,0,!1,null,null,!1,!1,"",B0);return s._reactRootContainer=U,s[yi]=U.current,Xl(s.nodeType===8?s.parentNode:s),po(function(){Hh(a,U,u,p)}),U}function Kh(s,a,u,p,g){var v=u._reactRootContainer;if(v){var x=v;if(typeof g=="function"){var M=g;g=function(){var U=Wh(x);M.call(U)}}Hh(a,x,s,g)}else x=mC(u,a,s,g,p);return Wh(x)}Hu=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var u=Bi(a.pendingLanes);u!==0&&(Wi(a,u|1),xn(a,tt()),(We&6)===0&&(Va=tt()+500,es()))}break;case 13:po(function(){var p=Ei(s,1);if(p!==null){var g=mn();Tr(p,s,1,g)}}),Tm(s,1)}},la=function(s){if(s.tag===13){var a=Ei(s,134217728);if(a!==null){var u=mn();Tr(a,s,134217728,u)}Tm(s,134217728)}},Wu=function(s){if(s.tag===13){var a=os(s),u=Ei(s,a);if(u!==null){var p=mn();Tr(u,s,a,p)}Tm(s,a)}},qu=function(){return Be},Gu=function(s,a){var u=Be;try{return Be=s,a()}finally{Be=u}},Zo=function(s,a,u){switch(a){case"input":if($s(s,u),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var p=u[a];if(p!==s&&p.form===s.form){var g=hh(p);if(!g)throw Error(t(90));gn(p),$s(p,g)}}}break;case"textarea":Xo(s,u);break;case"select":a=u.value,a!=null&&ci(s,!!u.multiple,a,!1)}},Gs=mm,Dl=po;var gC={usingClientEntryPoint:!1,Events:[ec,xa,hh,Or,Rl,mm]},pc={findFiberByHostInstance:so,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},yC={bundleType:pc.bundleType,version:pc.version,rendererPackageName:pc.rendererPackageName,rendererConfig:pc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Nl(s),s===null?null:s.stateNode},findFiberByHostInstance:pc.findFiberByHostInstance||pC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yh.isDisabled&&Yh.supportsFiber)try{Js=Yh.inject(yC),Nn=Yh}catch{}}return Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gC,Sn.createPortal=function(s,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xm(a))throw Error(t(200));return fC(s,a,null,u)},Sn.createRoot=function(s,a){if(!xm(s))throw Error(t(299));var u=!1,p="",g=z0;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(g=a.onRecoverableError)),a=Em(s,1,!1,null,null,u,!1,p,g),s[yi]=a.current,Xl(s.nodeType===8?s.parentNode:s),new bm(a)},Sn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=Nl(a),s=s===null?null:s.stateNode,s},Sn.flushSync=function(s){return po(s)},Sn.hydrate=function(s,a,u){if(!Gh(a))throw Error(t(200));return Kh(null,s,a,!0,u)},Sn.hydrateRoot=function(s,a,u){if(!xm(s))throw Error(t(405));var p=u!=null&&u.hydratedSources||null,g=!1,v="",x=z0;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onRecoverableError!==void 0&&(x=u.onRecoverableError)),a=j0(a,null,s,1,u??null,g,!1,v,x),s[yi]=a.current,Xl(s),p)for(s=0;s<p.length;s++)u=p[s],g=u._getVersion,g=g(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,g]:a.mutableSourceEagerHydrationData.push(u,g);return new qh(a)},Sn.render=function(s,a,u){if(!Gh(a))throw Error(t(200));return Kh(null,s,a,!1,u)},Sn.unmountComponentAtNode=function(s){if(!Gh(s))throw Error(t(40));return s._reactRootContainer?(po(function(){Kh(null,null,s,!1,function(){s._reactRootContainer=null,s[yi]=null})}),!0):!1},Sn.unstable_batchedUpdates=mm,Sn.unstable_renderSubtreeIntoContainer=function(s,a,u,p){if(!Gh(u))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Kh(s,a,u,!1,p)},Sn.version="18.2.0-next-9e3b772b8-20220608",Sn}var Q0;function bb(){if(Q0)return km.exports;Q0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),km.exports=IC(),km.exports}var X0;function kC(){if(X0)return Qh;X0=1;var n=bb();return Qh.createRoot=n.createRoot,Qh.hydrateRoot=n.hydrateRoot,Qh}var CC=kC();const PC=Tb(CC);bb();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yc(){return Yc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Yc.apply(this,arguments)}var _s;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(_s||(_s={}));const J0="popstate";function AC(n){n===void 0&&(n={});function e(r,i){let{pathname:o,search:l,hash:c}=r.location;return cg("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Od(i)}return DC(e,t,null,n)}function kt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function xb(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function RC(){return Math.random().toString(36).substr(2,8)}function Z0(n,e){return{usr:n.state,key:n.key,idx:e}}function cg(n,e,t,r){return t===void 0&&(t=null),Yc({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?ll(e):e,{state:t,key:e&&e.key||r||RC()})}function Od(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ll(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function DC(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,c=_s.Pop,h=null,d=m();d==null&&(d=0,l.replaceState(Yc({},l.state,{idx:d}),""));function m(){return(l.state||{idx:null}).idx}function y(){c=_s.Pop;let T=m(),N=T==null?null:T-d;d=T,h&&h({action:c,location:k.location,delta:N})}function w(T,N){c=_s.Push;let j=cg(k.location,T,N);d=m()+1;let B=Z0(j,d),K=k.createHref(j);try{l.pushState(B,"",K)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;i.location.assign(K)}o&&h&&h({action:c,location:k.location,delta:1})}function b(T,N){c=_s.Replace;let j=cg(k.location,T,N);d=m();let B=Z0(j,d),K=k.createHref(j);l.replaceState(B,"",K),o&&h&&h({action:c,location:k.location,delta:0})}function S(T){let N=i.location.origin!=="null"?i.location.origin:i.location.href,j=typeof T=="string"?T:Od(T);return j=j.replace(/ $/,"%20"),kt(N,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,N)}let k={get action(){return c},get location(){return n(i,l)},listen(T){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(J0,y),h=T,()=>{i.removeEventListener(J0,y),h=null}},createHref(T){return e(i,T)},createURL:S,encodeLocation(T){let N=S(T);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:w,replace:b,go(T){return l.go(T)}};return k}var ew;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(ew||(ew={}));function OC(n,e,t){return t===void 0&&(t="/"),MC(n,e,t)}function MC(n,e,t,r){let i=typeof e=="string"?ll(e):e,o=iy(i.pathname||"/",t);if(o==null)return null;let l=Sb(n);NC(l);let c=null;for(let h=0;c==null&&h<l.length;++h){let d=GC(o);c=HC(l[h],d)}return c}function Sb(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(o,l,c)=>{let h={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};h.relativePath.startsWith("/")&&(kt(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let d=Ts([r,h.relativePath]),m=t.concat(h);o.children&&o.children.length>0&&(kt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Sb(o.children,e,m,d)),!(o.path==null&&!o.index)&&e.push({path:d,score:BC(d,o.index),routesMeta:m})};return n.forEach((o,l)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,l);else for(let h of Ib(o.path))i(o,l,h)}),e}function Ib(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=Ib(r.join("/")),c=[];return c.push(...l.map(h=>h===""?o:[o,h].join("/"))),i&&c.push(...l),c.map(h=>n.startsWith("/")&&h===""?"/":h)}function NC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:$C(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const LC=/^:[\w-]+$/,VC=3,FC=2,jC=1,UC=10,zC=-2,tw=n=>n==="*";function BC(n,e){let t=n.split("/"),r=t.length;return t.some(tw)&&(r+=zC),e&&(r+=FC),t.filter(i=>!tw(i)).reduce((i,o)=>i+(LC.test(o)?VC:o===""?jC:UC),r)}function $C(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function HC(n,e,t){let{routesMeta:r}=n,i={},o="/",l=[];for(let c=0;c<r.length;++c){let h=r[c],d=c===r.length-1,m=o==="/"?e:e.slice(o.length)||"/",y=WC({path:h.relativePath,caseSensitive:h.caseSensitive,end:d},m),w=h.route;if(!y)return null;Object.assign(i,y.params),l.push({params:i,pathname:Ts([o,y.pathname]),pathnameBase:XC(Ts([o,y.pathnameBase])),route:w}),y.pathnameBase!=="/"&&(o=Ts([o,y.pathnameBase]))}return l}function WC(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=qC(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,m,y)=>{let{paramName:w,isOptional:b}=m;if(w==="*"){let k=c[y]||"";l=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const S=c[y];return b&&!S?d[w]=void 0:d[w]=(S||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:l,pattern:n}}function qC(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),xb(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,h)=>(r.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function GC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xb(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function iy(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function KC(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?ll(n):n;return{pathname:t?t.startsWith("/")?t:YC(t,e):e,search:JC(r),hash:ZC(i)}}function YC(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Am(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function QC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function sy(n,e){let t=QC(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function oy(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=ll(n):(i=Yc({},n),kt(!i.pathname||!i.pathname.includes("?"),Am("?","pathname","search",i)),kt(!i.pathname||!i.pathname.includes("#"),Am("#","pathname","hash",i)),kt(!i.search||!i.search.includes("#"),Am("#","search","hash",i)));let o=n===""||i.pathname==="",l=o?"/":i.pathname,c;if(l==null)c=t;else{let y=e.length-1;if(!r&&l.startsWith("..")){let w=l.split("/");for(;w[0]==="..";)w.shift(),y-=1;i.pathname=w.join("/")}c=y>=0?e[y]:"/"}let h=KC(i,c),d=l&&l!=="/"&&l.endsWith("/"),m=(o||l===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(d||m)&&(h.pathname+="/"),h}const Ts=n=>n.join("/").replace(/\/\/+/g,"/"),XC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),JC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,ZC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function eP(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const kb=["post","put","patch","delete"];new Set(kb);const tP=["get",...kb];new Set(tP);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qc(){return Qc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Qc.apply(this,arguments)}const ay=G.createContext(null),nP=G.createContext(null),Ls=G.createContext(null),gf=G.createContext(null),Vs=G.createContext({outlet:null,matches:[],isDataRoute:!1}),Cb=G.createContext(null);function rP(n,e){let{relative:t}=e===void 0?{}:e;cl()||kt(!1);let{basename:r,navigator:i}=G.useContext(Ls),{hash:o,pathname:l,search:c}=Ab(n,{relative:t}),h=l;return r!=="/"&&(h=l==="/"?r:Ts([r,l])),i.createHref({pathname:h,search:c,hash:o})}function cl(){return G.useContext(gf)!=null}function ul(){return cl()||kt(!1),G.useContext(gf).location}function Pb(n){G.useContext(Ls).static||G.useLayoutEffect(n)}function yf(){let{isDataRoute:n}=G.useContext(Vs);return n?gP():iP()}function iP(){cl()||kt(!1);let n=G.useContext(ay),{basename:e,future:t,navigator:r}=G.useContext(Ls),{matches:i}=G.useContext(Vs),{pathname:o}=ul(),l=JSON.stringify(sy(i,t.v7_relativeSplatPath)),c=G.useRef(!1);return Pb(()=>{c.current=!0}),G.useCallback(function(d,m){if(m===void 0&&(m={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let y=oy(d,JSON.parse(l),o,m.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Ts([e,y.pathname])),(m.replace?r.replace:r.push)(y,m.state,m)},[e,r,l,o,n])}function Ab(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=G.useContext(Ls),{matches:i}=G.useContext(Vs),{pathname:o}=ul(),l=JSON.stringify(sy(i,r.v7_relativeSplatPath));return G.useMemo(()=>oy(n,JSON.parse(l),o,t==="path"),[n,l,o,t])}function sP(n,e){return oP(n,e)}function oP(n,e,t,r){cl()||kt(!1);let{navigator:i}=G.useContext(Ls),{matches:o}=G.useContext(Vs),l=o[o.length-1],c=l?l.params:{};l&&l.pathname;let h=l?l.pathnameBase:"/";l&&l.route;let d=ul(),m;if(e){var y;let T=typeof e=="string"?ll(e):e;h==="/"||(y=T.pathname)!=null&&y.startsWith(h)||kt(!1),m=T}else m=d;let w=m.pathname||"/",b=w;if(h!=="/"){let T=h.replace(/^\//,"").split("/");b="/"+w.replace(/^\//,"").split("/").slice(T.length).join("/")}let S=OC(n,{pathname:b}),k=hP(S&&S.map(T=>Object.assign({},T,{params:Object.assign({},c,T.params),pathname:Ts([h,i.encodeLocation?i.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?h:Ts([h,i.encodeLocation?i.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),o,t,r);return e&&k?G.createElement(gf.Provider,{value:{location:Qc({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:_s.Pop}},k):k}function aP(){let n=mP(),e=eP(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),t?G.createElement("pre",{style:i},t):null,null)}const lP=G.createElement(aP,null);class cP extends G.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?G.createElement(Vs.Provider,{value:this.props.routeContext},G.createElement(Cb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function uP(n){let{routeContext:e,match:t,children:r}=n,i=G.useContext(ay);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),G.createElement(Vs.Provider,{value:e},r)}function hP(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var o;if(!t)return null;if(t.errors)n=t.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=(i=t)==null?void 0:i.errors;if(c!=null){let m=l.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);m>=0||kt(!1),l=l.slice(0,Math.min(l.length,m+1))}let h=!1,d=-1;if(t&&r&&r.v7_partialHydration)for(let m=0;m<l.length;m++){let y=l[m];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=m),y.route.id){let{loaderData:w,errors:b}=t,S=y.route.loader&&w[y.route.id]===void 0&&(!b||b[y.route.id]===void 0);if(y.route.lazy||S){h=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((m,y,w)=>{let b,S=!1,k=null,T=null;t&&(b=c&&y.route.id?c[y.route.id]:void 0,k=y.route.errorElement||lP,h&&(d<0&&w===0?(yP("route-fallback"),S=!0,T=null):d===w&&(S=!0,T=y.route.hydrateFallbackElement||null)));let N=e.concat(l.slice(0,w+1)),j=()=>{let B;return b?B=k:S?B=T:y.route.Component?B=G.createElement(y.route.Component,null):y.route.element?B=y.route.element:B=m,G.createElement(uP,{match:y,routeContext:{outlet:m,matches:N,isDataRoute:t!=null},children:B})};return t&&(y.route.ErrorBoundary||y.route.errorElement||w===0)?G.createElement(cP,{location:t.location,revalidation:t.revalidation,component:k,error:b,children:j(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):j()},null)}var Rb=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(Rb||{}),Db=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Db||{});function dP(n){let e=G.useContext(ay);return e||kt(!1),e}function fP(n){let e=G.useContext(nP);return e||kt(!1),e}function pP(n){let e=G.useContext(Vs);return e||kt(!1),e}function Ob(n){let e=pP(),t=e.matches[e.matches.length-1];return t.route.id||kt(!1),t.route.id}function mP(){var n;let e=G.useContext(Cb),t=fP(),r=Ob();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function gP(){let{router:n}=dP(Rb.UseNavigateStable),e=Ob(Db.UseNavigateStable),t=G.useRef(!1);return Pb(()=>{t.current=!0}),G.useCallback(function(i,o){o===void 0&&(o={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,Qc({fromRouteId:e},o)))},[n,e])}const nw={};function yP(n,e,t){nw[n]||(nw[n]=!0)}function _P(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function Mb(n){let{to:e,replace:t,state:r,relative:i}=n;cl()||kt(!1);let{future:o,static:l}=G.useContext(Ls),{matches:c}=G.useContext(Vs),{pathname:h}=ul(),d=yf(),m=oy(e,sy(c,o.v7_relativeSplatPath),h,i==="path"),y=JSON.stringify(m);return G.useEffect(()=>d(JSON.parse(y),{replace:t,state:r,relative:i}),[d,y,i,t,r]),null}function Wr(n){kt(!1)}function vP(n){let{basename:e="/",children:t=null,location:r,navigationType:i=_s.Pop,navigator:o,static:l=!1,future:c}=n;cl()&&kt(!1);let h=e.replace(/^\/*/,"/"),d=G.useMemo(()=>({basename:h,navigator:o,static:l,future:Qc({v7_relativeSplatPath:!1},c)}),[h,c,o,l]);typeof r=="string"&&(r=ll(r));let{pathname:m="/",search:y="",hash:w="",state:b=null,key:S="default"}=r,k=G.useMemo(()=>{let T=iy(m,h);return T==null?null:{location:{pathname:T,search:y,hash:w,state:b,key:S},navigationType:i}},[h,m,y,w,b,S,i]);return k==null?null:G.createElement(Ls.Provider,{value:d},G.createElement(gf.Provider,{children:t,value:k}))}function wP(n){let{children:e,location:t}=n;return sP(ug(e),t)}new Promise(()=>{});function ug(n,e){e===void 0&&(e=[]);let t=[];return G.Children.forEach(n,(r,i)=>{if(!G.isValidElement(r))return;let o=[...e,i];if(r.type===G.Fragment){t.push.apply(t,ug(r.props.children,o));return}r.type!==Wr&&kt(!1),!r.props.index||!r.props.children||kt(!1);let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=ug(r.props.children,o)),t.push(l)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hg(){return hg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},hg.apply(this,arguments)}function EP(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function TP(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function bP(n,e){return n.button===0&&(!e||e==="_self")&&!TP(n)}const xP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],SP="6";try{window.__reactRouterVersion=SP}catch{}const IP="startTransition",rw=bC[IP];function kP(n){let{basename:e,children:t,future:r,window:i}=n,o=G.useRef();o.current==null&&(o.current=AC({window:i,v5Compat:!0}));let l=o.current,[c,h]=G.useState({action:l.action,location:l.location}),{v7_startTransition:d}=r||{},m=G.useCallback(y=>{d&&rw?rw(()=>h(y)):h(y)},[h,d]);return G.useLayoutEffect(()=>l.listen(m),[l,m]),G.useEffect(()=>_P(r),[r]),G.createElement(vP,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:l,future:r})}const CP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",PP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$n=G.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:o,replace:l,state:c,target:h,to:d,preventScrollReset:m,viewTransition:y}=e,w=EP(e,xP),{basename:b}=G.useContext(Ls),S,k=!1;if(typeof d=="string"&&PP.test(d)&&(S=d,CP))try{let B=new URL(window.location.href),K=d.startsWith("//")?new URL(B.protocol+d):new URL(d),q=iy(K.pathname,b);K.origin===B.origin&&q!=null?d=q+K.search+K.hash:k=!0}catch{}let T=rP(d,{relative:i}),N=AP(d,{replace:l,state:c,target:h,preventScrollReset:m,relative:i,viewTransition:y});function j(B){r&&r(B),B.defaultPrevented||N(B)}return G.createElement("a",hg({},w,{href:S||T,onClick:k||o?r:j,ref:t,target:h}))});var iw;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(iw||(iw={}));var sw;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(sw||(sw={}));function AP(n,e){let{target:t,replace:r,state:i,preventScrollReset:o,relative:l,viewTransition:c}=e===void 0?{}:e,h=yf(),d=ul(),m=Ab(n,{relative:l});return G.useCallback(y=>{if(bP(y,t)){y.preventDefault();let w=r!==void 0?r:Od(d)===Od(m);h(n,{replace:w,state:i,preventScrollReset:o,relative:l,viewTransition:c})}},[d,h,m,r,i,t,n,o,l,c])}const RP=()=>{};var ow={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},DP=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],l=n[t++],c=n[t++],h=((i&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Lb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],l=i+1<n.length,c=l?n[i+1]:0,h=i+2<n.length,d=h?n[i+2]:0,m=o>>2,y=(o&3)<<4|c>>4;let w=(c&15)<<2|d>>6,b=d&63;h||(b=64,l||(w=64)),r.push(t[m],t[y],t[w],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Nb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):DP(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const d=i<n.length?t[n.charAt(i)]:64;++i;const y=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||d==null||y==null)throw new OP;const w=o<<2|c>>4;if(r.push(w),d!==64){const b=c<<4&240|d>>2;if(r.push(b),y!==64){const S=d<<6&192|y;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class OP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const MP=function(n){const e=Nb(n);return Lb.encodeByteArray(e,!0)},Md=function(n){return MP(n).replace(/\./g,"")},Vb=function(n){try{return Lb.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP=()=>NP().__FIREBASE_DEFAULTS__,VP=()=>{if(typeof process>"u"||typeof ow>"u")return;const n=ow.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},FP=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Vb(n[1]);return e&&JSON.parse(e)},_f=()=>{try{return RP()||LP()||VP()||FP()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Fb=n=>_f()?.emulatorHosts?.[n],jP=n=>{const e=Fb(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},jb=()=>_f()?.config,Ub=n=>_f()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function zb(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Md(JSON.stringify(t)),Md(JSON.stringify(l)),""].join(".")}const Lc={};function BP(){const n={prod:[],emulator:[]};for(const e of Object.keys(Lc))Lc[e]?n.emulator.push(e):n.prod.push(e);return n}function $P(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let aw=!1;function Bb(n,e){if(typeof window>"u"||typeof document>"u"||!hl(window.location.host)||Lc[n]===e||Lc[n]||aw)return;Lc[n]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",o=BP().prod.length>0;function l(){const w=document.getElementById(r);w&&w.remove()}function c(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function h(w,b){w.setAttribute("width","24"),w.setAttribute("id",b),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function d(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{aw=!0,l()},w}function m(w,b){w.setAttribute("id",b),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function y(){const w=$P(r),b=t("text"),S=document.getElementById(b)||document.createElement("span"),k=t("learnmore"),T=document.getElementById(k)||document.createElement("a"),N=t("preprendIcon"),j=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const B=w.element;c(B),m(T,k);const K=d();h(j,N),B.append(j,S,T,K),document.body.appendChild(B)}o?(S.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function WP(){const n=_f()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $b(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function GP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KP(){const n=cn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function YP(){return!WP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Hb(){try{return typeof indexedDB=="object"}catch{return!1}}function Wb(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}function QP(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP="FirebaseError";class Ar extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=XP,Object.setPrototypeOf(this,Ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zo.prototype.create)}}class zo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],l=o?JP(o,r):"Error",c=`${this.serviceName}: ${l} (${i}).`;return new Ar(i,c,r)}}function JP(n,e){return n.replace(ZP,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const ZP=/\{\$([^}]+)}/g;function eA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Cs(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],l=e[i];if(lw(o)&&lw(l)){if(!Cs(o,l))return!1}else if(o!==l)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function lw(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ic(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function kc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function tA(n,e){const t=new nA(n,e);return t.subscribe.bind(t)}class nA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");rA(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Rm),i.error===void 0&&(i.error=Rm),i.complete===void 0&&(i.complete=Rm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rA(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Rm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=1e3,sA=2,oA=14400*1e3,aA=.5;function cw(n,e=iA,t=sA){const r=e*Math.pow(t,n),i=Math.round(aA*r*(Math.random()-.5)*2);return Math.min(oA,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(n){return n&&n._delegate?n._delegate:n}class Ir{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new UP;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uA(e))try{this.getOrInitializeService({instanceIdentifier:Eo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Eo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Eo){return this.instances.has(e)}getOptions(e=Eo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:cA(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Eo){return this.component?this.component.multipleInstances?e:Eo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cA(n){return n===Eo?void 0:n}function uA(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(je||(je={}));const dA={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},fA=je.INFO,pA={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},mA=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=pA[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vf{constructor(e){this.name=e,this._logLevel=fA,this._logHandler=mA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const gA=(n,e)=>e.some(t=>n instanceof t);let uw,hw;function yA(){return uw||(uw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _A(){return hw||(hw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qb=new WeakMap,dg=new WeakMap,Gb=new WeakMap,Dm=new WeakMap,ly=new WeakMap;function vA(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(bs(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&qb.set(t,n)}).catch(()=>{}),ly.set(e,n),e}function wA(n){if(dg.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});dg.set(n,e)}let fg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return dg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Gb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return bs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function EA(n){fg=n(fg)}function TA(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Om(this),e,...t);return Gb.set(r,e.sort?e.sort():[e]),bs(r)}:_A().includes(n)?function(...e){return n.apply(Om(this),e),bs(qb.get(this))}:function(...e){return bs(n.apply(Om(this),e))}}function bA(n){return typeof n=="function"?TA(n):(n instanceof IDBTransaction&&wA(n),gA(n,yA())?new Proxy(n,fg):n)}function bs(n){if(n instanceof IDBRequest)return vA(n);if(Dm.has(n))return Dm.get(n);const e=bA(n);return e!==n&&(Dm.set(n,e),ly.set(e,n)),e}const Om=n=>ly.get(n);function Kb(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const l=indexedDB.open(n,e),c=bs(l);return r&&l.addEventListener("upgradeneeded",h=>{r(bs(l.result),h.oldVersion,h.newVersion,bs(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const xA=["get","getKey","getAll","getAllKeys","count"],SA=["put","add","delete","clear"],Mm=new Map;function dw(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Mm.get(e))return Mm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=SA.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||xA.includes(t)))return;const o=async function(l,...c){const h=this.transaction(l,i?"readwrite":"readonly");let d=h.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[t](...c),i&&h.done]))[0]};return Mm.set(e,o),o}EA(n=>({...n,get:(e,t,r)=>dw(e,t)||n.get(e,t,r),has:(e,t)=>!!dw(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(kA(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function kA(n){return n.getComponent()?.type==="VERSION"}const pg="@firebase/app",fw="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=new vf("@firebase/app"),CA="@firebase/app-compat",PA="@firebase/analytics-compat",AA="@firebase/analytics",RA="@firebase/app-check-compat",DA="@firebase/app-check",OA="@firebase/auth",MA="@firebase/auth-compat",NA="@firebase/database",LA="@firebase/data-connect",VA="@firebase/database-compat",FA="@firebase/functions",jA="@firebase/functions-compat",UA="@firebase/installations",zA="@firebase/installations-compat",BA="@firebase/messaging",$A="@firebase/messaging-compat",HA="@firebase/performance",WA="@firebase/performance-compat",qA="@firebase/remote-config",GA="@firebase/remote-config-compat",KA="@firebase/storage",YA="@firebase/storage-compat",QA="@firebase/firestore",XA="@firebase/ai",JA="@firebase/firestore-compat",ZA="firebase",eR="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="[DEFAULT]",tR={[pg]:"fire-core",[CA]:"fire-core-compat",[AA]:"fire-analytics",[PA]:"fire-analytics-compat",[DA]:"fire-app-check",[RA]:"fire-app-check-compat",[OA]:"fire-auth",[MA]:"fire-auth-compat",[NA]:"fire-rtdb",[LA]:"fire-data-connect",[VA]:"fire-rtdb-compat",[FA]:"fire-fn",[jA]:"fire-fn-compat",[UA]:"fire-iid",[zA]:"fire-iid-compat",[BA]:"fire-fcm",[$A]:"fire-fcm-compat",[HA]:"fire-perf",[WA]:"fire-perf-compat",[qA]:"fire-rc",[GA]:"fire-rc-compat",[KA]:"fire-gcs",[YA]:"fire-gcs-compat",[QA]:"fire-fst",[JA]:"fire-fst-compat",[XA]:"fire-vertex","fire-js":"fire-js",[ZA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd=new Map,nR=new Map,gg=new Map;function pw(n,e){try{n.container.addComponent(e)}catch(t){Oi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function si(n){const e=n.name;if(gg.has(e))return Oi.debug(`There were multiple attempts to register component ${e}.`),!1;gg.set(e,n);for(const t of Nd.values())pw(t,n);for(const t of nR.values())pw(t,n);return!0}function Bo(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function rr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xs=new zo("app","Firebase",rR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ir("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=eR;function Yb(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:mg,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw xs.create("bad-app-name",{appName:String(i)});if(t||(t=jb()),!t)throw xs.create("no-options");const o=Nd.get(i);if(o){if(Cs(t,o.options)&&Cs(r,o.config))return o;throw xs.create("duplicate-app",{appName:i})}const l=new hA(i);for(const h of gg.values())l.addComponent(h);const c=new iR(t,r,l);return Nd.set(i,c),c}function cy(n=mg){const e=Nd.get(n);if(!e&&n===mg&&jb())return Yb();if(!e)throw xs.create("no-app",{appName:n});return e}function sr(n,e,t){let r=tR[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Oi.warn(l.join(" "));return}si(new Ir(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="firebase-heartbeat-database",oR=1,Xc="firebase-heartbeat-store";let Nm=null;function Qb(){return Nm||(Nm=Kb(sR,oR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Xc)}catch(t){console.warn(t)}}}}).catch(n=>{throw xs.create("idb-open",{originalErrorMessage:n.message})})),Nm}async function aR(n){try{const t=(await Qb()).transaction(Xc),r=await t.objectStore(Xc).get(Xb(n));return await t.done,r}catch(e){if(e instanceof Ar)Oi.warn(e.message);else{const t=xs.create("idb-get",{originalErrorMessage:e?.message});Oi.warn(t.message)}}}async function mw(n,e){try{const r=(await Qb()).transaction(Xc,"readwrite");await r.objectStore(Xc).put(e,Xb(n)),await r.done}catch(t){if(t instanceof Ar)Oi.warn(t.message);else{const r=xs.create("idb-set",{originalErrorMessage:t?.message});Oi.warn(r.message)}}}function Xb(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=1024,cR=30;class uR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new dR(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=gw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>cR){const i=fR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Oi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=gw(),{heartbeatsToSend:t,unsentEntries:r}=hR(this._heartbeatsCache.heartbeats),i=Md(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Oi.warn(e),""}}}function gw(){return new Date().toISOString().substring(0,10)}function hR(n,e=lR){const t=[];let r=n.slice();for(const i of n){const o=t.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),yw(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),yw(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class dR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Hb()?Wb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await aR(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return mw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return mw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function yw(n){return Md(JSON.stringify({version:2,heartbeats:n})).length}function fR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(n){si(new Ir("platform-logger",e=>new IA(e),"PRIVATE")),si(new Ir("heartbeat",e=>new uR(e),"PRIVATE")),sr(pg,fw,n),sr(pg,fw,"esm2020"),sr("fire-js","")}pR("");function Jb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mR=Jb,Zb=new zo("auth","Firebase",Jb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld=new vf("@firebase/auth");function gR(n,...e){Ld.logLevel<=je.WARN&&Ld.warn(`Auth (${dl}): ${n}`,...e)}function _d(n,...e){Ld.logLevel<=je.ERROR&&Ld.error(`Auth (${dl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(n,...e){throw uy(n,...e)}function Xr(n,...e){return uy(n,...e)}function ex(n,e,t){const r={...mR(),[e]:t};return new zo("auth","Firebase",r).create(e,{appName:n.name})}function Ri(n){return ex(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uy(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Zb.create(n,...e)}function Ce(n,e,...t){if(!n)throw uy(e,...t)}function Pi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw _d(e),new Error(e)}function Mi(n,e){n||Pi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(){return typeof self<"u"&&self.location?.href||""}function yR(){return _w()==="http:"||_w()==="https:"}function _w(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yR()||$b()||"connection"in navigator)?navigator.onLine:!0}function vR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Mi(t>e,"Short delay should be less than long delay!"),this.isMobile=HP()||GP()}get(){return _R()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(n,e){Mi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],TR=new pu(3e4,6e4);function Fs(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function js(n,e,t,r,i={}){return nx(n,i,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=fu({key:n.config.apiKey,...l}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const d={method:e,headers:h,...o};return qP()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&hl(n.emulatorConfig.host)&&(d.credentials="include"),tx.fetch()(await rx(n,n.config.apiHost,t,c),d)})}async function nx(n,e,t){n._canInitEmulator=!1;const r={...wR,...e};try{const i=new xR(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Xh(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[h,d]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xh(n,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw Xh(n,"email-already-in-use",l);if(h==="USER_DISABLED")throw Xh(n,"user-disabled",l);const m=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw ex(n,m,d);kr(n,m)}}catch(i){if(i instanceof Ar)throw i;kr(n,"network-request-failed",{message:String(i)})}}async function mu(n,e,t,r,i={}){const o=await js(n,e,t,r,i);return"mfaPendingCredential"in o&&kr(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function rx(n,e,t,r){const i=`${e}${t}?${r}`,o=n,l=o.config.emulator?hy(n.config,i):`${n.config.apiScheme}://${i}`;return ER.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function bR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Xr(this.auth,"network-request-failed")),TR.get())})}}function Xh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Xr(n,e,r);return i.customData._tokenResponse=t,i}function vw(n){return n!==void 0&&n.enterprise!==void 0}class SR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return bR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function IR(n,e){return js(n,"GET","/v2/recaptchaConfig",Fs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kR(n,e){return js(n,"POST","/v1/accounts:delete",e)}async function Vd(n,e){return js(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function CR(n,e=!1){const t=Ot(n),r=await t.getIdToken(e),i=dy(r);Ce(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o?.sign_in_provider;return{claims:i,token:r,authTime:Vc(Lm(i.auth_time)),issuedAtTime:Vc(Lm(i.iat)),expirationTime:Vc(Lm(i.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Lm(n){return Number(n)*1e3}function dy(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return _d("JWT malformed, contained fewer than 3 sections"),null;try{const i=Vb(t);return i?JSON.parse(i):(_d("Failed to decode base64 JWT payload"),null)}catch(i){return _d("Caught error parsing JWT payload as JSON",i?.toString()),null}}function ww(n){const e=dy(n);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ar&&PR(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function PR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vc(this.lastLoginAt),this.creationTime=Vc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fd(n){const e=n.auth,t=await n.getIdToken(),r=await Jc(n,Vd(e,{idToken:t}));Ce(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const o=i.providerUserInfo?.length?ix(i.providerUserInfo):[],l=DR(n.providerData,o),c=n.isAnonymous,h=!(n.email&&i.passwordHash)&&!l?.length,d=c?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new _g(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(n,m)}async function RR(n){const e=Ot(n);await Fd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DR(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ix(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OR(n,e){const t=await nx(n,{},async()=>{const r=fu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,l=await rx(n,i,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:c,body:r};return n.emulatorConfig&&hl(n.emulatorConfig.host)&&(h.credentials="include"),tx.fetch()(l,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function MR(n,e){return js(n,"POST","/v2/accounts:revokeToken",Fs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ww(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const t=ww(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await OR(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,l=new qa;return r&&(Ce(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Ce(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),o&&(Ce(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qa,this.toJSON())}_performRefresh(){return Pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(n,e){Ce(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class br{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new AR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new _g(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Jc(this,this.stsTokenManager.getToken(this.auth,e));return Ce(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return CR(this,e)}reload(){return RR(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new br({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Fd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rr(this.auth.app))return Promise.reject(Ri(this.auth));const e=await this.getIdToken();return await Jc(this,kR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,c=t.tenantId??void 0,h=t._redirectEventId??void 0,d=t.createdAt??void 0,m=t.lastLoginAt??void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:S,stsTokenManager:k}=t;Ce(y&&k,e,"internal-error");const T=qa.fromJSON(this.name,k);Ce(typeof y=="string",e,"internal-error"),us(r,e.name),us(i,e.name),Ce(typeof w=="boolean",e,"internal-error"),Ce(typeof b=="boolean",e,"internal-error"),us(o,e.name),us(l,e.name),us(c,e.name),us(h,e.name),us(d,e.name),us(m,e.name);const N=new br({uid:y,auth:e,email:i,emailVerified:w,displayName:r,isAnonymous:b,photoURL:l,phoneNumber:o,tenantId:c,stsTokenManager:T,createdAt:d,lastLoginAt:m});return S&&Array.isArray(S)&&(N.providerData=S.map(j=>({...j}))),h&&(N._redirectEventId=h),N}static async _fromIdTokenResponse(e,t,r=!1){const i=new qa;i.updateFromServerResponse(t);const o=new br({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Fd(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Ce(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?ix(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!o?.length,c=new qa;c.updateFromIdToken(r);const h=new br({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:l}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new _g(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(h,d),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew=new Map;function Ai(n){Mi(n instanceof Function,"Expected a class definition");let e=Ew.get(n);return e?(Mi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Ew.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}sx.type="NONE";const Tw=sx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(n,e,t){return`firebase:${n}:${e}:${t}`}class Ga{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=vd(this.userKey,i.apiKey,o),this.fullPersistenceKey=vd("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Vd(this.auth,{idToken:e}).catch(()=>{});return t?br._fromGetAccountInfoResponse(this.auth,t,e):null}return br._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ga(Ai(Tw),e,r);const i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=i[0]||Ai(Tw);const l=vd(r,e.config.apiKey,e.name);let c=null;for(const d of t)try{const m=await d._get(l);if(m){let y;if(typeof m=="string"){const w=await Vd(e,{idToken:m}).catch(()=>{});if(!w)break;y=await br._fromGetAccountInfoResponse(e,w,m)}else y=br._fromJSON(e,m);d!==o&&(c=y),o=d;break}}catch{}const h=i.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Ga(o,e,r):(o=h[0],c&&await o._set(l,c.toJSON()),await Promise.all(t.map(async d=>{if(d!==o)try{await d._remove(l)}catch{}})),new Ga(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ox(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hx(e))return"Blackberry";if(dx(e))return"Webos";if(ax(e))return"Safari";if((e.includes("chrome/")||lx(e))&&!e.includes("edge/"))return"Chrome";if(ux(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function ox(n=cn()){return/firefox\//i.test(n)}function ax(n=cn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lx(n=cn()){return/crios\//i.test(n)}function cx(n=cn()){return/iemobile/i.test(n)}function ux(n=cn()){return/android/i.test(n)}function hx(n=cn()){return/blackberry/i.test(n)}function dx(n=cn()){return/webos/i.test(n)}function fy(n=cn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function NR(n=cn()){return fy(n)&&!!window.navigator?.standalone}function LR(){return KP()&&document.documentMode===10}function fx(n=cn()){return fy(n)||ux(n)||dx(n)||hx(n)||/windows phone/i.test(n)||cx(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(n,e=[]){let t;switch(n){case"Browser":t=bw(cn());break;case"Worker":t=`${bw(cn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${dl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,c)=>{try{const h=e(o);l(h)}catch(h){c(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FR(n,e={}){return js(n,"GET","/v2/passwordPolicy",Fs(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=6;class UR{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??jR,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xw(this),this.idTokenSubscription=new xw(this),this.beforeStateQueue=new VR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ai(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ga.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Vd(this,{idToken:e}),r=await br._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(rr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,l=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Fd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rr(this.app))return Promise.reject(Ri(this));const t=e?Ot(e):null;return t&&Ce(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rr(this.app)?Promise.reject(Ri(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rr(this.app)?Promise.reject(Ri(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ai(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FR(this),t=new UR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await MR(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ai(e)||this._popupRedirectResolver;Ce(t,this,"argument-error"),this.redirectPersistenceManager=await Ga.create(this,[Ai(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=px(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(rr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&gR(`Error while retrieving App Check token: ${e.error}`),e?.token}}function $o(n){return Ot(n)}class xw{constructor(e){this.auth=e,this.observer=null,this.addObserver=tA(t=>this.observer=t)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function BR(n){wf=n}function mx(n){return wf.loadJS(n)}function $R(){return wf.recaptchaEnterpriseScript}function HR(){return wf.gapiScript}function WR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class qR{constructor(){this.enterprise=new GR}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class GR{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const KR="recaptcha-enterprise",gx="NO_RECAPTCHA";class YR{constructor(e){this.type=KR,this.auth=$o(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{IR(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new SR(h);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,l(d.siteKey)}}).catch(h=>{c(h)})})}function i(o,l,c){const h=window.grecaptcha;vw(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(d=>{l(d)}).catch(()=>{l(gx)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new qR().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(c=>{if(!t&&vw(window.grecaptcha))i(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=$R();h.length!==0&&(h+=c),mx(h).then(()=>{i(c,o,l)}).catch(d=>{l(d)})}}).catch(c=>{l(c)})})}}async function Sw(n,e,t,r=!1,i=!1){const o=new YR(n);let l;if(i)l=gx;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const h=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const h=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function vg(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Sw(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Sw(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(n,e){const t=Bo(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(Cs(o,e??{}))return i;kr(i,"already-initialized")}return t.initialize({options:e})}function XR(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ai);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function JR(n,e,t){const r=$o(n);Ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=yx(e),{host:l,port:c}=ZR(e),h=c===null?"":`:${c}`,d={url:`${o}//${l}${h}/`},m=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ce(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ce(Cs(d,r.config.emulator)&&Cs(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,hl(l)?(zb(`${o}//${l}${h}`),Bb("Auth",!0)):eD()}function yx(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function ZR(n){const e=yx(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:Iw(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:Iw(l)}}}function Iw(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function eD(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Pi("not implemented")}_getIdTokenResponse(e){return Pi("not implemented")}_linkToIdToken(e,t){return Pi("not implemented")}_getReauthenticationResolver(e){return Pi("not implemented")}}async function tD(n,e){return js(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nD(n,e){return mu(n,"POST","/v1/accounts:signInWithPassword",Fs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rD(n,e){return mu(n,"POST","/v1/accounts:signInWithEmailLink",Fs(n,e))}async function iD(n,e){return mu(n,"POST","/v1/accounts:signInWithEmailLink",Fs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc extends py{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Zc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Zc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vg(e,t,"signInWithPassword",nD);case"emailLink":return rD(e,{email:this._email,oobCode:this._password});default:kr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vg(e,r,"signUpPassword",tD);case"emailLink":return iD(e,{idToken:t,email:this._email,oobCode:this._password});default:kr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ka(n,e){return mu(n,"POST","/v1/accounts:signInWithIdp",Fs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD="http://localhost";class Oo extends py{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Oo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):kr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=t;if(!r||!i)return null;const l=new Oo(r,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Ka(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ka(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ka(e,t)}buildRequest(){const e={requestUri:sD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=fu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function aD(n){const e=Ic(kc(n)).link,t=e?Ic(kc(e)).deep_link_id:null,r=Ic(kc(n)).deep_link_id;return(r?Ic(kc(r)).link:null)||r||t||e||n}class my{constructor(e){const t=Ic(kc(e)),r=t.apiKey??null,i=t.oobCode??null,o=oD(t.mode??null);Ce(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=aD(e);try{return new my(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(){this.providerId=fl.PROVIDER_ID}static credential(e,t){return Zc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=my.parseLink(t);return Ce(r,"argument-error"),Zc._fromEmailAndCode(e,r.code,r.tenantId)}}fl.PROVIDER_ID="password";fl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";fl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu extends _x{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends gu{constructor(){super("facebook.com")}static credential(e){return Oo._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ps.credential(e.oauthAccessToken)}catch{return null}}}ps.FACEBOOK_SIGN_IN_METHOD="facebook.com";ps.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends gu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Oo._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ms.credential(t,r)}catch{return null}}}ms.GOOGLE_SIGN_IN_METHOD="google.com";ms.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends gu{constructor(){super("github.com")}static credential(e){return Oo._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gs.credential(e.oauthAccessToken)}catch{return null}}}gs.GITHUB_SIGN_IN_METHOD="github.com";gs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends gu{constructor(){super("twitter.com")}static credential(e,t){return Oo._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ys.credential(t,r)}catch{return null}}}ys.TWITTER_SIGN_IN_METHOD="twitter.com";ys.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lD(n,e){return mu(n,"POST","/v1/accounts:signUp",Fs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await br._fromIdTokenResponse(e,r,i),l=kw(r);return new Mo({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=kw(r);return new Mo({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function kw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd extends Ar{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,jd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new jd(e,t,r,i)}}function vx(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?jd._fromErrorAndOperation(n,o,e,r):o})}async function cD(n,e,t=!1){const r=await Jc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Mo._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uD(n,e,t=!1){const{auth:r}=n;if(rr(r.app))return Promise.reject(Ri(r));const i="reauthenticate";try{const o=await Jc(n,vx(r,i,e,n),t);Ce(o.idToken,r,"internal-error");const l=dy(o.idToken);Ce(l,r,"internal-error");const{sub:c}=l;return Ce(n.uid===c,r,"user-mismatch"),Mo._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&kr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wx(n,e,t=!1){if(rr(n.app))return Promise.reject(Ri(n));const r="signIn",i=await vx(n,r,e),o=await Mo._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function hD(n,e){return wx($o(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ex(n){const e=$o(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dD(n,e,t){if(rr(n.app))return Promise.reject(Ri(n));const r=$o(n),l=await vg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lD).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&Ex(n),h}),c=await Mo._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(c.user),c}function fD(n,e,t){return rr(n.app)?Promise.reject(Ri(n)):hD(Ot(n),fl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Ex(n),r})}function pD(n,e,t,r){return Ot(n).onIdTokenChanged(e,t,r)}function mD(n,e,t){return Ot(n).beforeAuthStateChanged(e,t)}function gD(n,e,t,r){return Ot(n).onAuthStateChanged(e,t,r)}function Vm(n){return Ot(n).signOut()}const Ud="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ud,"1"),this.storage.removeItem(Ud),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=1e3,_D=10;class bx extends Tx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);LR()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,_D):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},yD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}bx.type="LOCAL";const vD=bx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx extends Tx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}xx.type="SESSION";const Sx=xx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Ef(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,l=this.handlersMap[i];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(l).map(async d=>d(t.origin,o)),h=await wD(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ef.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((c,h)=>{const d=gy("",20);i.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(y){const w=y;if(w.data.eventId===d)switch(w.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(w.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(){return window}function TD(n){Jr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(){return typeof Jr().WorkerGlobalScope<"u"&&typeof Jr().importScripts=="function"}async function bD(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xD(){return navigator?.serviceWorker?.controller||null}function SD(){return Ix()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx="firebaseLocalStorageDb",ID=1,zd="firebaseLocalStorage",Cx="fbase_key";class yu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Tf(n,e){return n.transaction([zd],e?"readwrite":"readonly").objectStore(zd)}function kD(){const n=indexedDB.deleteDatabase(kx);return new yu(n).toPromise()}function wg(){const n=indexedDB.open(kx,ID);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(zd,{keyPath:Cx})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(zd)?e(r):(r.close(),await kD(),e(await wg()))})})}async function Cw(n,e,t){const r=Tf(n,!0).put({[Cx]:e,value:t});return new yu(r).toPromise()}async function CD(n,e){const t=Tf(n,!1).get(e),r=await new yu(t).toPromise();return r===void 0?null:r.value}function Pw(n,e){const t=Tf(n,!0).delete(e);return new yu(t).toPromise()}const PD=800,AD=3;class Px{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>AD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ix()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ef._getInstance(SD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await bD(),!this.activeServiceWorker)return;this.sender=new ED(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wg();return await Cw(e,Ud,"1"),await Pw(e,Ud),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Cw(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>CD(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Pw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Tf(i,!1).getAll();return new yu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),PD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Px.type="LOCAL";const RD=Px;new pu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(n,e){return e?Ai(e):(Ce(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy extends py{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ka(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ka(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ka(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function OD(n){return wx(n.auth,new yy(n),n.bypassAuthState)}function MD(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),uD(t,new yy(n),n.bypassAuthState)}async function ND(n){const{auth:e,user:t}=n;return Ce(t,e,"internal-error"),cD(t,new yy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return OD;case"linkViaPopup":case"linkViaRedirect":return ND;case"reauthViaPopup":case"reauthViaRedirect":return MD;default:kr(this.auth,"internal-error")}}resolve(e){Mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD=new pu(2e3,1e4);class Wa extends Ax{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Wa.currentPopupAction&&Wa.currentPopupAction.cancel(),Wa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){Mi(this.filter.length===1,"Popup operations only handle one event");const e=gy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Xr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Xr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wa.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,LD.get())};e()}}Wa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD="pendingRedirect",wd=new Map;class FD extends Ax{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=wd.get(this.auth._key());if(!e){try{const r=await jD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}wd.set(this.auth._key(),e)}return this.bypassAuthState||wd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jD(n,e){const t=BD(e),r=zD(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function UD(n,e){wd.set(n._key(),e)}function zD(n){return Ai(n._redirectPersistence)}function BD(n){return vd(VD,n.config.apiKey,n.name)}async function $D(n,e,t=!1){if(rr(n.app))return Promise.reject(Ri(n));const r=$o(n),i=DD(r,e),l=await new FD(r,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=600*1e3;class WD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Rx(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Xr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HD&&this.cachedEventUids.clear(),this.cachedEventUids.has(Aw(e))}saveEventToCache(e){this.cachedEventUids.add(Aw(e)),this.lastProcessedEventTime=Date.now()}}function Aw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Rx({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function qD(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rx(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GD(n,e={}){return js(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YD=/^https?/;async function QD(n){if(n.config.emulator)return;const{authorizedDomains:e}=await GD(n);for(const t of e)try{if(XD(t))return}catch{}kr(n,"unauthorized-domain")}function XD(n){const e=yg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!YD.test(t))return!1;if(KD.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=new pu(3e4,6e4);function Rw(){const n=Jr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function ZD(n){return new Promise((e,t)=>{function r(){Rw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Rw(),t(Xr(n,"network-request-failed"))},timeout:JD.get()})}if(Jr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Jr().gapi?.load)r();else{const i=WR("iframefcb");return Jr()[i]=()=>{gapi.load?r():t(Xr(n,"network-request-failed"))},mx(`${HR()}?onload=${i}`).catch(o=>t(o))}}).catch(e=>{throw Ed=null,e})}let Ed=null;function eO(n){return Ed=Ed||ZD(n),Ed}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO=new pu(5e3,15e3),nO="__/auth/iframe",rO="emulator/auth/iframe",iO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oO(n){const e=n.config;Ce(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?hy(e,rO):`https://${n.config.authDomain}/${nO}`,r={apiKey:e.apiKey,appName:n.name,v:dl},i=sO.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${fu(r).slice(1)}`}async function aO(n){const e=await eO(n),t=Jr().gapi;return Ce(t,n,"internal-error"),e.open({where:document.body,url:oO(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iO,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const l=Xr(n,"network-request-failed"),c=Jr().setTimeout(()=>{o(l)},tO.get());function h(){Jr().clearTimeout(c),i(r)}r.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cO=500,uO=600,hO="_blank",dO="http://localhost";class Dw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fO(n,e,t,r=cO,i=uO){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const h={...lO,width:r.toString(),height:i.toString(),top:o,left:l},d=cn().toLowerCase();t&&(c=lx(d)?hO:t),ox(d)&&(e=e||dO,h.scrollbars="yes");const m=Object.entries(h).reduce((w,[b,S])=>`${w}${b}=${S},`,"");if(NR(d)&&c!=="_self")return pO(e||"",c),new Dw(null);const y=window.open(e||"",c,m);Ce(y,n,"popup-blocked");try{y.focus()}catch{}return new Dw(y)}function pO(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO="__/auth/handler",gO="emulator/auth/handler",yO=encodeURIComponent("fac");async function Ow(n,e,t,r,i,o){Ce(n.config.authDomain,n,"auth-domain-config-required"),Ce(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:dl,eventId:i};if(e instanceof _x){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",eA(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,y]of Object.entries({}))l[m]=y}if(e instanceof gu){const m=e.getScopes().filter(y=>y!=="");m.length>0&&(l.scopes=m.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const h=await n._getAppCheckToken(),d=h?`#${yO}=${encodeURIComponent(h)}`:"";return`${_O(n)}?${fu(c).slice(1)}${d}`}function _O({config:n}){return n.emulator?hy(n,gO):`https://${n.authDomain}/${mO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="webStorageSupport";class vO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sx,this._completeRedirectFn=$D,this._overrideRedirectResult=UD}async _openPopup(e,t,r,i){Mi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await Ow(e,t,r,yg(),i);return fO(e,o,gy())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await Ow(e,t,r,yg(),i);return TD(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Mi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await aO(e),r=new WD(e);return t.register("authEvent",i=>(Ce(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Fm,{type:Fm},i=>{const o=i?.[0]?.[Fm];o!==void 0&&t(!!o),kr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=QD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return fx()||ax()||fy()}}const wO=vO;var Mw="@firebase/auth",Nw="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bO(n){si(new Ir("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;Ce(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:px(n)},d=new zR(r,i,o,h);return XR(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),si(new Ir("auth-internal",e=>{const t=$o(e.getProvider("auth").getImmediate());return(r=>new EO(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),sr(Mw,Nw,TO(n)),sr(Mw,Nw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO=300,SO=Ub("authIdTokenMaxAge")||xO;let Lw=null;const IO=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>SO)return;const i=t?.token;Lw!==i&&(Lw=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function _y(n=cy()){const e=Bo(n,"auth");if(e.isInitialized())return e.getImmediate();const t=QR(n,{popupRedirectResolver:wO,persistence:[RD,vD,Sx]}),r=Ub("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=IO(o.toString());mD(t,l,()=>l(t.currentUser)),pD(t,c=>l(c))}}const i=Fb("auth");return i&&JR(t,`http://${i}`),t}function kO(){return document.getElementsByTagName("head")?.[0]??document}BR({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=Xr("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",kO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bO("Browser");var Vw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ss,Dx;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function P(){}P.prototype=I.prototype,R.D=I.prototype,R.prototype=new P,R.prototype.constructor=R,R.C=function(O,L,V){for(var D=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)D[ne-2]=arguments[ne];return I.prototype[L].apply(O,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,I,P){P||(P=0);var O=Array(16);if(typeof I=="string")for(var L=0;16>L;++L)O[L]=I.charCodeAt(P++)|I.charCodeAt(P++)<<8|I.charCodeAt(P++)<<16|I.charCodeAt(P++)<<24;else for(L=0;16>L;++L)O[L]=I[P++]|I[P++]<<8|I[P++]<<16|I[P++]<<24;I=R.g[0],P=R.g[1],L=R.g[2];var V=R.g[3],D=I+(V^P&(L^V))+O[0]+3614090360&4294967295;I=P+(D<<7&4294967295|D>>>25),D=V+(L^I&(P^L))+O[1]+3905402710&4294967295,V=I+(D<<12&4294967295|D>>>20),D=L+(P^V&(I^P))+O[2]+606105819&4294967295,L=V+(D<<17&4294967295|D>>>15),D=P+(I^L&(V^I))+O[3]+3250441966&4294967295,P=L+(D<<22&4294967295|D>>>10),D=I+(V^P&(L^V))+O[4]+4118548399&4294967295,I=P+(D<<7&4294967295|D>>>25),D=V+(L^I&(P^L))+O[5]+1200080426&4294967295,V=I+(D<<12&4294967295|D>>>20),D=L+(P^V&(I^P))+O[6]+2821735955&4294967295,L=V+(D<<17&4294967295|D>>>15),D=P+(I^L&(V^I))+O[7]+4249261313&4294967295,P=L+(D<<22&4294967295|D>>>10),D=I+(V^P&(L^V))+O[8]+1770035416&4294967295,I=P+(D<<7&4294967295|D>>>25),D=V+(L^I&(P^L))+O[9]+2336552879&4294967295,V=I+(D<<12&4294967295|D>>>20),D=L+(P^V&(I^P))+O[10]+4294925233&4294967295,L=V+(D<<17&4294967295|D>>>15),D=P+(I^L&(V^I))+O[11]+2304563134&4294967295,P=L+(D<<22&4294967295|D>>>10),D=I+(V^P&(L^V))+O[12]+1804603682&4294967295,I=P+(D<<7&4294967295|D>>>25),D=V+(L^I&(P^L))+O[13]+4254626195&4294967295,V=I+(D<<12&4294967295|D>>>20),D=L+(P^V&(I^P))+O[14]+2792965006&4294967295,L=V+(D<<17&4294967295|D>>>15),D=P+(I^L&(V^I))+O[15]+1236535329&4294967295,P=L+(D<<22&4294967295|D>>>10),D=I+(L^V&(P^L))+O[1]+4129170786&4294967295,I=P+(D<<5&4294967295|D>>>27),D=V+(P^L&(I^P))+O[6]+3225465664&4294967295,V=I+(D<<9&4294967295|D>>>23),D=L+(I^P&(V^I))+O[11]+643717713&4294967295,L=V+(D<<14&4294967295|D>>>18),D=P+(V^I&(L^V))+O[0]+3921069994&4294967295,P=L+(D<<20&4294967295|D>>>12),D=I+(L^V&(P^L))+O[5]+3593408605&4294967295,I=P+(D<<5&4294967295|D>>>27),D=V+(P^L&(I^P))+O[10]+38016083&4294967295,V=I+(D<<9&4294967295|D>>>23),D=L+(I^P&(V^I))+O[15]+3634488961&4294967295,L=V+(D<<14&4294967295|D>>>18),D=P+(V^I&(L^V))+O[4]+3889429448&4294967295,P=L+(D<<20&4294967295|D>>>12),D=I+(L^V&(P^L))+O[9]+568446438&4294967295,I=P+(D<<5&4294967295|D>>>27),D=V+(P^L&(I^P))+O[14]+3275163606&4294967295,V=I+(D<<9&4294967295|D>>>23),D=L+(I^P&(V^I))+O[3]+4107603335&4294967295,L=V+(D<<14&4294967295|D>>>18),D=P+(V^I&(L^V))+O[8]+1163531501&4294967295,P=L+(D<<20&4294967295|D>>>12),D=I+(L^V&(P^L))+O[13]+2850285829&4294967295,I=P+(D<<5&4294967295|D>>>27),D=V+(P^L&(I^P))+O[2]+4243563512&4294967295,V=I+(D<<9&4294967295|D>>>23),D=L+(I^P&(V^I))+O[7]+1735328473&4294967295,L=V+(D<<14&4294967295|D>>>18),D=P+(V^I&(L^V))+O[12]+2368359562&4294967295,P=L+(D<<20&4294967295|D>>>12),D=I+(P^L^V)+O[5]+4294588738&4294967295,I=P+(D<<4&4294967295|D>>>28),D=V+(I^P^L)+O[8]+2272392833&4294967295,V=I+(D<<11&4294967295|D>>>21),D=L+(V^I^P)+O[11]+1839030562&4294967295,L=V+(D<<16&4294967295|D>>>16),D=P+(L^V^I)+O[14]+4259657740&4294967295,P=L+(D<<23&4294967295|D>>>9),D=I+(P^L^V)+O[1]+2763975236&4294967295,I=P+(D<<4&4294967295|D>>>28),D=V+(I^P^L)+O[4]+1272893353&4294967295,V=I+(D<<11&4294967295|D>>>21),D=L+(V^I^P)+O[7]+4139469664&4294967295,L=V+(D<<16&4294967295|D>>>16),D=P+(L^V^I)+O[10]+3200236656&4294967295,P=L+(D<<23&4294967295|D>>>9),D=I+(P^L^V)+O[13]+681279174&4294967295,I=P+(D<<4&4294967295|D>>>28),D=V+(I^P^L)+O[0]+3936430074&4294967295,V=I+(D<<11&4294967295|D>>>21),D=L+(V^I^P)+O[3]+3572445317&4294967295,L=V+(D<<16&4294967295|D>>>16),D=P+(L^V^I)+O[6]+76029189&4294967295,P=L+(D<<23&4294967295|D>>>9),D=I+(P^L^V)+O[9]+3654602809&4294967295,I=P+(D<<4&4294967295|D>>>28),D=V+(I^P^L)+O[12]+3873151461&4294967295,V=I+(D<<11&4294967295|D>>>21),D=L+(V^I^P)+O[15]+530742520&4294967295,L=V+(D<<16&4294967295|D>>>16),D=P+(L^V^I)+O[2]+3299628645&4294967295,P=L+(D<<23&4294967295|D>>>9),D=I+(L^(P|~V))+O[0]+4096336452&4294967295,I=P+(D<<6&4294967295|D>>>26),D=V+(P^(I|~L))+O[7]+1126891415&4294967295,V=I+(D<<10&4294967295|D>>>22),D=L+(I^(V|~P))+O[14]+2878612391&4294967295,L=V+(D<<15&4294967295|D>>>17),D=P+(V^(L|~I))+O[5]+4237533241&4294967295,P=L+(D<<21&4294967295|D>>>11),D=I+(L^(P|~V))+O[12]+1700485571&4294967295,I=P+(D<<6&4294967295|D>>>26),D=V+(P^(I|~L))+O[3]+2399980690&4294967295,V=I+(D<<10&4294967295|D>>>22),D=L+(I^(V|~P))+O[10]+4293915773&4294967295,L=V+(D<<15&4294967295|D>>>17),D=P+(V^(L|~I))+O[1]+2240044497&4294967295,P=L+(D<<21&4294967295|D>>>11),D=I+(L^(P|~V))+O[8]+1873313359&4294967295,I=P+(D<<6&4294967295|D>>>26),D=V+(P^(I|~L))+O[15]+4264355552&4294967295,V=I+(D<<10&4294967295|D>>>22),D=L+(I^(V|~P))+O[6]+2734768916&4294967295,L=V+(D<<15&4294967295|D>>>17),D=P+(V^(L|~I))+O[13]+1309151649&4294967295,P=L+(D<<21&4294967295|D>>>11),D=I+(L^(P|~V))+O[4]+4149444226&4294967295,I=P+(D<<6&4294967295|D>>>26),D=V+(P^(I|~L))+O[11]+3174756917&4294967295,V=I+(D<<10&4294967295|D>>>22),D=L+(I^(V|~P))+O[2]+718787259&4294967295,L=V+(D<<15&4294967295|D>>>17),D=P+(V^(L|~I))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(L+(D<<21&4294967295|D>>>11))&4294967295,R.g[2]=R.g[2]+L&4294967295,R.g[3]=R.g[3]+V&4294967295}r.prototype.u=function(R,I){I===void 0&&(I=R.length);for(var P=I-this.blockSize,O=this.B,L=this.h,V=0;V<I;){if(L==0)for(;V<=P;)i(this,R,V),V+=this.blockSize;if(typeof R=="string"){for(;V<I;)if(O[L++]=R.charCodeAt(V++),L==this.blockSize){i(this,O),L=0;break}}else for(;V<I;)if(O[L++]=R[V++],L==this.blockSize){i(this,O),L=0;break}}this.h=L,this.o+=I},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;var P=8*this.o;for(I=R.length-8;I<R.length;++I)R[I]=P&255,P/=256;for(this.u(R),R=Array(16),I=P=0;4>I;++I)for(var O=0;32>O;O+=8)R[P++]=this.g[I]>>>O&255;return R};function o(R,I){var P=c;return Object.prototype.hasOwnProperty.call(P,R)?P[R]:P[R]=I(R)}function l(R,I){this.h=I;for(var P=[],O=!0,L=R.length-1;0<=L;L--){var V=R[L]|0;O&&V==I||(P[L]=V,O=!1)}this.g=P}var c={};function h(R){return-128<=R&&128>R?o(R,function(I){return new l([I|0],0>I?-1:0)}):new l([R|0],0>R?-1:0)}function d(R){if(isNaN(R)||!isFinite(R))return y;if(0>R)return T(d(-R));for(var I=[],P=1,O=0;R>=P;O++)I[O]=R/P|0,P*=4294967296;return new l(I,0)}function m(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return T(m(R.substring(1),I));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=d(Math.pow(I,8)),O=y,L=0;L<R.length;L+=8){var V=Math.min(8,R.length-L),D=parseInt(R.substring(L,L+V),I);8>V?(V=d(Math.pow(I,V)),O=O.j(V).add(d(D))):(O=O.j(P),O=O.add(d(D)))}return O}var y=h(0),w=h(1),b=h(16777216);n=l.prototype,n.m=function(){if(k(this))return-T(this).m();for(var R=0,I=1,P=0;P<this.g.length;P++){var O=this.i(P);R+=(0<=O?O:4294967296+O)*I,I*=4294967296}return R},n.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(S(this))return"0";if(k(this))return"-"+T(this).toString(R);for(var I=d(Math.pow(R,6)),P=this,O="";;){var L=K(P,I).g;P=N(P,L.j(I));var V=((0<P.g.length?P.g[0]:P.h)>>>0).toString(R);if(P=L,S(P))return V+O;for(;6>V.length;)V="0"+V;O=V+O}},n.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function S(R){if(R.h!=0)return!1;for(var I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function k(R){return R.h==-1}n.l=function(R){return R=N(this,R),k(R)?-1:S(R)?0:1};function T(R){for(var I=R.g.length,P=[],O=0;O<I;O++)P[O]=~R.g[O];return new l(P,~R.h).add(w)}n.abs=function(){return k(this)?T(this):this},n.add=function(R){for(var I=Math.max(this.g.length,R.g.length),P=[],O=0,L=0;L<=I;L++){var V=O+(this.i(L)&65535)+(R.i(L)&65535),D=(V>>>16)+(this.i(L)>>>16)+(R.i(L)>>>16);O=D>>>16,V&=65535,D&=65535,P[L]=D<<16|V}return new l(P,P[P.length-1]&-2147483648?-1:0)};function N(R,I){return R.add(T(I))}n.j=function(R){if(S(this)||S(R))return y;if(k(this))return k(R)?T(this).j(T(R)):T(T(this).j(R));if(k(R))return T(this.j(T(R)));if(0>this.l(b)&&0>R.l(b))return d(this.m()*R.m());for(var I=this.g.length+R.g.length,P=[],O=0;O<2*I;O++)P[O]=0;for(O=0;O<this.g.length;O++)for(var L=0;L<R.g.length;L++){var V=this.i(O)>>>16,D=this.i(O)&65535,ne=R.i(L)>>>16,pe=R.i(L)&65535;P[2*O+2*L]+=D*pe,j(P,2*O+2*L),P[2*O+2*L+1]+=V*pe,j(P,2*O+2*L+1),P[2*O+2*L+1]+=D*ne,j(P,2*O+2*L+1),P[2*O+2*L+2]+=V*ne,j(P,2*O+2*L+2)}for(O=0;O<I;O++)P[O]=P[2*O+1]<<16|P[2*O];for(O=I;O<2*I;O++)P[O]=0;return new l(P,0)};function j(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function B(R,I){this.g=R,this.h=I}function K(R,I){if(S(I))throw Error("division by zero");if(S(R))return new B(y,y);if(k(R))return I=K(T(R),I),new B(T(I.g),T(I.h));if(k(I))return I=K(R,T(I)),new B(T(I.g),I.h);if(30<R.g.length){if(k(R)||k(I))throw Error("slowDivide_ only works with positive integers.");for(var P=w,O=I;0>=O.l(R);)P=q(P),O=q(O);var L=J(P,1),V=J(O,1);for(O=J(O,2),P=J(P,2);!S(O);){var D=V.add(O);0>=D.l(R)&&(L=L.add(P),V=D),O=J(O,1),P=J(P,1)}return I=N(R,L.j(I)),new B(L,I)}for(L=y;0<=R.l(I);){for(P=Math.max(1,Math.floor(R.m()/I.m())),O=Math.ceil(Math.log(P)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),V=d(P),D=V.j(I);k(D)||0<D.l(R);)P-=O,V=d(P),D=V.j(I);S(V)&&(V=w),L=L.add(V),R=N(R,D)}return new B(L,R)}n.A=function(R){return K(this,R).h},n.and=function(R){for(var I=Math.max(this.g.length,R.g.length),P=[],O=0;O<I;O++)P[O]=this.i(O)&R.i(O);return new l(P,this.h&R.h)},n.or=function(R){for(var I=Math.max(this.g.length,R.g.length),P=[],O=0;O<I;O++)P[O]=this.i(O)|R.i(O);return new l(P,this.h|R.h)},n.xor=function(R){for(var I=Math.max(this.g.length,R.g.length),P=[],O=0;O<I;O++)P[O]=this.i(O)^R.i(O);return new l(P,this.h^R.h)};function q(R){for(var I=R.g.length+1,P=[],O=0;O<I;O++)P[O]=R.i(O)<<1|R.i(O-1)>>>31;return new l(P,R.h)}function J(R,I){var P=I>>5;I%=32;for(var O=R.g.length-P,L=[],V=0;V<O;V++)L[V]=0<I?R.i(V+P)>>>I|R.i(V+P+1)<<32-I:R.i(V+P);return new l(L,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Dx=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=d,l.fromString=m,Ss=l}).apply(typeof Vw<"u"?Vw:typeof self<"u"?self:typeof window<"u"?window:{});var Jh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ox,Cc,Mx,Td,Eg,Nx,Lx,Vx;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,_,E){return f==Array.prototype||f==Object.prototype||(f[_]=E.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jh=="object"&&Jh];for(var _=0;_<f.length;++_){var E=f[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function i(f,_){if(_)e:{var E=r;f=f.split(".");for(var A=0;A<f.length-1;A++){var $=f[A];if(!($ in E))break e;E=E[$]}f=f[f.length-1],A=E[f],_=_(A),_!=A&&_!=null&&e(E,f,{configurable:!0,writable:!0,value:_})}}function o(f,_){f instanceof String&&(f+="");var E=0,A=!1,$={next:function(){if(!A&&E<f.length){var Q=E++;return{value:_(Q,f[Q]),done:!1}}return A=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}i("Array.prototype.values",function(f){return f||function(){return o(this,function(_,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function h(f){var _=typeof f;return _=_!="object"?_:f?Array.isArray(f)?"array":_:"null",_=="array"||_=="object"&&typeof f.length=="number"}function d(f){var _=typeof f;return _=="object"&&f!=null||_=="function"}function m(f,_,E){return f.call.apply(f.bind,arguments)}function y(f,_,E){if(!f)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,A),f.apply(_,$)}}return function(){return f.apply(_,arguments)}}function w(f,_,E){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:y,w.apply(null,arguments)}function b(f,_){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),f.apply(this,A)}}function S(f,_){function E(){}E.prototype=_.prototype,f.aa=_.prototype,f.prototype=new E,f.prototype.constructor=f,f.Qb=function(A,$,Q){for(var ue=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)ue[Xe-2]=arguments[Xe];return _.prototype[$].apply(A,ue)}}function k(f){const _=f.length;if(0<_){const E=Array(_);for(let A=0;A<_;A++)E[A]=f[A];return E}return[]}function T(f,_){for(let E=1;E<arguments.length;E++){const A=arguments[E];if(h(A)){const $=f.length||0,Q=A.length||0;f.length=$+Q;for(let ue=0;ue<Q;ue++)f[$+ue]=A[ue]}else f.push(A)}}class N{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function j(f){return/^[\s\xa0]*$/.test(f)}function B(){var f=c.navigator;return f&&(f=f.userAgent)?f:""}function K(f){return K[" "](f),f}K[" "]=function(){};var q=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function J(f,_,E){for(const A in f)_.call(E,f[A],A,f)}function R(f,_){for(const E in f)_.call(void 0,f[E],E,f)}function I(f){const _={};for(const E in f)_[E]=f[E];return _}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(f,_){let E,A;for(let $=1;$<arguments.length;$++){A=arguments[$];for(E in A)f[E]=A[E];for(let Q=0;Q<P.length;Q++)E=P[Q],Object.prototype.hasOwnProperty.call(A,E)&&(f[E]=A[E])}}function L(f){var _=1;f=f.split(":");const E=[];for(;0<_&&f.length;)E.push(f.shift()),_--;return f.length&&E.push(f.join(":")),E}function V(f){c.setTimeout(()=>{throw f},0)}function D(){var f=he;let _=null;return f.g&&(_=f.g,f.g=f.g.next,f.g||(f.h=null),_.next=null),_}class ne{constructor(){this.h=this.g=null}add(_,E){const A=pe.get();A.set(_,E),this.h?this.h.next=A:this.g=A,this.h=A}}var pe=new N(()=>new ie,f=>f.reset());class ie{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ye,re=!1,he=new ne,F=()=>{const f=c.Promise.resolve(void 0);ye=()=>{f.then(ee)}};var ee=()=>{for(var f;f=D();){try{f.h.call(f.g)}catch(E){V(E)}var _=pe;_.j(f),100>_.h&&(_.h++,f.next=_.g,_.g=f)}re=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Te(f,_){this.type=f,this.g=this.target=_,this.defaultPrevented=!1}Te.prototype.h=function(){this.defaultPrevented=!0};var ke=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var f=!1,_=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const E=()=>{};c.addEventListener("test",E,_),c.removeEventListener("test",E,_)}catch{}return f}();function Le(f,_){if(Te.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var E=this.type=f.type,A=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=_,_=f.relatedTarget){if(q){e:{try{K(_.nodeName);var $=!0;break e}catch{}$=!1}$||(_=null)}}else E=="mouseover"?_=f.fromElement:E=="mouseout"&&(_=f.toElement);this.relatedTarget=_,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:Re[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Le.aa.h.call(this)}}S(Le,Te);var Re={2:"touch",3:"pen",4:"mouse"};Le.prototype.h=function(){Le.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),be=0;function Fe(f,_,E,A,$){this.listener=f,this.proxy=null,this.src=_,this.type=E,this.capture=!!A,this.ha=$,this.key=++be,this.da=this.fa=!1}function gt(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Mn(f){this.src=f,this.g={},this.h=0}Mn.prototype.add=function(f,_,E,A,$){var Q=f.toString();f=this.g[Q],f||(f=this.g[Q]=[],this.h++);var ue=un(f,_,A,$);return-1<ue?(_=f[ue],E||(_.fa=!1)):(_=new Fe(_,this.src,Q,!!A,$),_.fa=E,f.push(_)),_};function gn(f,_){var E=_.type;if(E in f.g){var A=f.g[E],$=Array.prototype.indexOf.call(A,_,void 0),Q;(Q=0<=$)&&Array.prototype.splice.call(A,$,1),Q&&(gt(_),f.g[E].length==0&&(delete f.g[E],f.h--))}}function un(f,_,E,A){for(var $=0;$<f.length;++$){var Q=f[$];if(!Q.da&&Q.listener==_&&Q.capture==!!E&&Q.ha==A)return $}return-1}var yn="closure_lm_"+(1e6*Math.random()|0),hn={};function ji(f,_,E,A,$){if(Array.isArray(_)){for(var Q=0;Q<_.length;Q++)ji(f,_[Q],E,A,$);return null}return E=xl(E),f&&f[ce]?f.K(_,E,d(A)?!!A.capture:!1,$):$s(f,_,E,!1,A,$)}function $s(f,_,E,A,$,Q){if(!_)throw Error("Invalid event type");var ue=d($)?!!$.capture:!!$,Xe=Qo(f);if(Xe||(f[yn]=Xe=new Mn(f)),E=Xe.add(_,E,A,ue,Q),E.proxy)return E;if(A=Nu(),E.proxy=A,A.src=f,A.listener=E,f.addEventListener)ke||($=ue),$===void 0&&($=!1),f.addEventListener(_.toString(),A,$);else if(f.attachEvent)f.attachEvent(ci(_.toString()),A);else if(f.addListener&&f.removeListener)f.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Nu(){function f(E){return _.call(f.src,f.listener,E)}const _=bl;return f}function Yo(f,_,E,A,$){if(Array.isArray(_))for(var Q=0;Q<_.length;Q++)Yo(f,_[Q],E,A,$);else A=d(A)?!!A.capture:!!A,E=xl(E),f&&f[ce]?(f=f.i,_=String(_).toString(),_ in f.g&&(Q=f.g[_],E=un(Q,E,A,$),-1<E&&(gt(Q[E]),Array.prototype.splice.call(Q,E,1),Q.length==0&&(delete f.g[_],f.h--)))):f&&(f=Qo(f))&&(_=f.g[_.toString()],f=-1,_&&(f=un(_,E,A,$)),(E=-1<f?_[f]:null)&&li(E))}function li(f){if(typeof f!="number"&&f&&!f.da){var _=f.src;if(_&&_[ce])gn(_.i,f);else{var E=f.type,A=f.proxy;_.removeEventListener?_.removeEventListener(E,A,f.capture):_.detachEvent?_.detachEvent(ci(E),A):_.addListener&&_.removeListener&&_.removeListener(A),(E=Qo(_))?(gn(E,f),E.h==0&&(E.src=null,_[yn]=null)):gt(f)}}}function ci(f){return f in hn?hn[f]:hn[f]="on"+f}function bl(f,_){if(f.da)f=!0;else{_=new Le(_,this);var E=f.listener,A=f.ha||f.src;f.fa&&li(f),f=E.call(A,_)}return f}function Qo(f){return f=f[yn],f instanceof Mn?f:null}var Xo="__closure_events_fn_"+(1e9*Math.random()>>>0);function xl(f){return typeof f=="function"?f:(f[Xo]||(f[Xo]=function(_){return f.handleEvent(_)}),f[Xo])}function Mt(){de.call(this),this.i=new Mn(this),this.M=this,this.F=null}S(Mt,de),Mt.prototype[ce]=!0,Mt.prototype.removeEventListener=function(f,_,E,A){Yo(this,f,_,E,A)};function Nt(f,_){var E,A=f.F;if(A)for(E=[];A;A=A.F)E.push(A);if(f=f.M,A=_.type||_,typeof _=="string")_=new Te(_,f);else if(_ instanceof Te)_.target=_.target||f;else{var $=_;_=new Te(A,f),O(_,$)}if($=!0,E)for(var Q=E.length-1;0<=Q;Q--){var ue=_.g=E[Q];$=ui(ue,A,!0,_)&&$}if(ue=_.g=f,$=ui(ue,A,!0,_)&&$,$=ui(ue,A,!1,_)&&$,E)for(Q=0;Q<E.length;Q++)ue=_.g=E[Q],$=ui(ue,A,!1,_)&&$}Mt.prototype.N=function(){if(Mt.aa.N.call(this),this.i){var f=this.i,_;for(_ in f.g){for(var E=f.g[_],A=0;A<E.length;A++)gt(E[A]);delete f.g[_],f.h--}}this.F=null},Mt.prototype.K=function(f,_,E,A){return this.i.add(String(f),_,!1,E,A)},Mt.prototype.L=function(f,_,E,A){return this.i.add(String(f),_,!0,E,A)};function ui(f,_,E,A){if(_=f.i.g[String(_)],!_)return!0;_=_.concat();for(var $=!0,Q=0;Q<_.length;++Q){var ue=_[Q];if(ue&&!ue.da&&ue.capture==E){var Xe=ue.listener,Lt=ue.ha||ue.src;ue.fa&&gn(f.i,ue),$=Xe.call(Lt,A)!==!1&&$}}return $&&!A.defaultPrevented}function Sl(f,_,E){if(typeof f=="function")E&&(f=w(f,E));else if(f&&typeof f.handleEvent=="function")f=w(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:c.setTimeout(f,_||0)}function Ui(f){f.g=Sl(()=>{f.g=null,f.i&&(f.i=!1,Ui(f))},f.l);const _=f.h;f.h=null,f.m.apply(null,_)}class Hs extends de{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Ui(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ws(f){de.call(this),this.h=f,this.g={}}S(Ws,de);var Il=[];function kl(f){J(f.g,function(_,E){this.g.hasOwnProperty(E)&&li(_)},f),f.g={}}Ws.prototype.N=function(){Ws.aa.N.call(this),kl(this)},Ws.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cl=c.JSON.stringify,Pl=c.JSON.parse,Al=class{stringify(f){return c.JSON.stringify(f,void 0)}parse(f){return c.JSON.parse(f,void 0)}};function qs(){}qs.prototype.h=null;function Jo(f){return f.h||(f.h=f.i())}function Zo(){}var qn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Dr(){Te.call(this,"d")}S(Dr,Te);function ea(){Te.call(this,"c")}S(ea,Te);var Or={},Rl=null;function Gs(){return Rl=Rl||new Mt}Or.La="serverreachability";function Dl(f){Te.call(this,Or.La,f)}S(Dl,Te);function hi(f){const _=Gs();Nt(_,new Dl(_))}Or.STAT_EVENT="statevent";function Ol(f,_){Te.call(this,Or.STAT_EVENT,f),this.stat=_}S(Ol,Te);function wt(f){const _=Gs();Nt(_,new Ol(_,f))}Or.Ma="timingevent";function ta(f,_){Te.call(this,Or.Ma,f),this.size=_}S(ta,Te);function lr(f,_){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){f()},_)}function Ks(){this.g=!0}Ks.prototype.xa=function(){this.g=!1};function Ys(f,_,E,A,$,Q){f.info(function(){if(f.g)if(Q)for(var ue="",Xe=Q.split("&"),Lt=0;Lt<Xe.length;Lt++){var $e=Xe[Lt].split("=");if(1<$e.length){var Ut=$e[0];$e=$e[1];var Ct=Ut.split("_");ue=2<=Ct.length&&Ct[1]=="type"?ue+(Ut+"="+$e+"&"):ue+(Ut+"=redacted&")}}else ue=null;else ue=Q;return"XMLHTTP REQ ("+A+") [attempt "+$+"]: "+_+`
`+E+`
`+ue})}function na(f,_,E,A,$,Q,ue){f.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+$+"]: "+_+`
`+E+`
`+Q+" "+ue})}function cr(f,_,E,A){f.info(function(){return"XMLHTTP TEXT ("+_+"): "+Zf(f,E)+(A?" "+A:"")})}function Ml(f,_){f.info(function(){return"TIMEOUT: "+_})}Ks.prototype.info=function(){};function Zf(f,_){if(!f.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(f=0;f<E.length;f++)if(Array.isArray(E[f])){var A=E[f];if(!(2>A.length)){var $=A[1];if(Array.isArray($)&&!(1>$.length)){var Q=$[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var ue=1;ue<$.length;ue++)$[ue]=""}}}}return Cl(E)}catch{return _}}var ra={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Lu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ur;function Qs(){}S(Qs,qs),Qs.prototype.g=function(){return new XMLHttpRequest},Qs.prototype.i=function(){return{}},ur=new Qs;function hr(f,_,E,A){this.j=f,this.i=_,this.l=E,this.R=A||1,this.U=new Ws(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Vu}function Vu(){this.i=null,this.g="",this.h=!1}var Nl={},ia={};function sa(f,_,E){f.L=1,f.v=Wi(Ln(_)),f.m=E,f.P=!0,Ll(f,null)}function Ll(f,_){f.F=Date.now(),tt(f),f.A=Ln(f.v);var E=f.A,A=f.R;Array.isArray(A)||(A=[String(A)]),Gi(E.i,"t",A),f.C=0,E=f.j.J,f.h=new Vu,f.g=th(f.j,E?_:null,!f.m),0<f.O&&(f.M=new Hs(w(f.Y,f,f.g),f.O)),_=f.U,E=f.g,A=f.ca;var $="readystatechange";Array.isArray($)||($&&(Il[0]=$.toString()),$=Il);for(var Q=0;Q<$.length;Q++){var ue=ji(E,$[Q],A||_.handleEvent,!1,_.h||_);if(!ue)break;_.g[ue.key]=ue}_=f.H?I(f.H):{},f.m?(f.u||(f.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,_)):(f.u="GET",f.g.ea(f.A,f.u,null,_)),hi(),Ys(f.i,f.u,f.A,f.l,f.R,f.m)}hr.prototype.ca=function(f){f=f.target;const _=this.M;_&&vn(f)==3?_.j():this.Y(f)},hr.prototype.Y=function(f){try{if(f==this.g)e:{const Ct=vn(this.g);var _=this.g.Ba();const Yn=this.g.Z();if(!(3>Ct)&&(Ct!=3||this.g&&(this.h.h||this.g.oa()||Bl(this.g)))){this.J||Ct!=4||_==7||(_==8||0>=Yn?hi(3):hi(2)),Xs(this);var E=this.g.Z();this.X=E;t:if(Fu(this)){var A=Bl(this.g);f="";var $=A.length,Q=vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gn(this),zi(this);var ue="";break t}this.h.i=new c.TextDecoder}for(_=0;_<$;_++)this.h.h=!0,f+=this.h.i.decode(A[_],{stream:!(Q&&_==$-1)});A.length=0,this.h.g+=f,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=E==200,na(this.i,this.u,this.A,this.l,this.R,Ct,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Xe,Lt=this.g;if((Xe=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(Xe)){var $e=Xe;break t}}$e=null}if(E=$e)cr(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vl(this,E);else{this.o=!1,this.s=3,wt(12),Gn(this),zi(this);break e}}if(this.P){E=!0;let Fn;for(;!this.J&&this.C<ue.length;)if(Fn=ep(this,ue),Fn==ia){Ct==4&&(this.s=4,wt(14),E=!1),cr(this.i,this.l,null,"[Incomplete Response]");break}else if(Fn==Nl){this.s=4,wt(15),cr(this.i,this.l,ue,"[Invalid Chunk]"),E=!1;break}else cr(this.i,this.l,Fn,null),Vl(this,Fn);if(Fu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ct!=4||ue.length!=0||this.h.h||(this.s=1,wt(16),E=!1),this.o=this.o&&E,!E)cr(this.i,this.l,ue,"[Invalid Chunked Response]"),Gn(this),zi(this);else if(0<ue.length&&!this.W){this.W=!0;var Ut=this.j;Ut.g==this&&Ut.ba&&!Ut.M&&(Ut.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),Hl(Ut),Ut.M=!0,wt(11))}}else cr(this.i,this.l,ue,null),Vl(this,ue);Ct==4&&Gn(this),this.o&&!this.J&&(Ct==4?ga(this.j,this):(this.o=!1,tt(this)))}else ha(this.g),E==400&&0<ue.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),Gn(this),zi(this)}}}catch{}finally{}};function Fu(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function ep(f,_){var E=f.C,A=_.indexOf(`
`,E);return A==-1?ia:(E=Number(_.substring(E,A)),isNaN(E)?Nl:(A+=1,A+E>_.length?ia:(_=_.slice(A,A+E),f.C=A+E,_)))}hr.prototype.cancel=function(){this.J=!0,Gn(this)};function tt(f){f.S=Date.now()+f.I,ju(f,f.I)}function ju(f,_){if(f.B!=null)throw Error("WatchDog timer not null");f.B=lr(w(f.ba,f),_)}function Xs(f){f.B&&(c.clearTimeout(f.B),f.B=null)}hr.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Ml(this.i,this.A),this.L!=2&&(hi(),wt(17)),Gn(this),this.s=2,zi(this)):ju(this,this.S-f)};function zi(f){f.j.G==0||f.J||ga(f.j,f)}function Gn(f){Xs(f);var _=f.M;_&&typeof _.ma=="function"&&_.ma(),f.M=null,kl(f.U),f.g&&(_=f.g,f.g=null,_.abort(),_.ma())}function Vl(f,_){try{var E=f.j;if(E.G!=0&&(E.g==f||dn(E.h,f))){if(!f.K&&dn(E.h,f)&&E.G==3){try{var A=E.Da.g.parse(_)}catch{A=null}if(Array.isArray(A)&&A.length==3){var $=A;if($[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<f.F)ma(E),gr(E);else break e;pa(E),wt(18)}}else E.za=$[1],0<E.za-E.T&&37500>$[2]&&E.F&&E.v==0&&!E.C&&(E.C=lr(w(E.Za,E),6e3));if(1>=zu(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else gi(E,11)}else if((f.K||E.g==f)&&ma(E),!j(_))for($=E.Da.g.parse(_),_=0;_<$.length;_++){let $e=$[_];if(E.T=$e[0],$e=$e[1],E.G==2)if($e[0]=="c"){E.K=$e[1],E.ia=$e[2];const Ut=$e[3];Ut!=null&&(E.la=Ut,E.j.info("VER="+E.la));const Ct=$e[4];Ct!=null&&(E.Aa=Ct,E.j.info("SVER="+E.Aa));const Yn=$e[5];Yn!=null&&typeof Yn=="number"&&0<Yn&&(A=1.5*Yn,E.L=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const Fn=f.g;if(Fn){const io=Fn.g?Fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(io){var Q=A.h;Q.g||io.indexOf("spdy")==-1&&io.indexOf("quic")==-1&&io.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Fl(Q,Q.h),Q.h=null))}if(A.D){const _a=Fn.g?Fn.g.getResponseHeader("X-HTTP-Session-Id"):null;_a&&(A.ya=_a,et(A.I,A.D,_a))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-f.F,E.j.info("Handshake RTT: "+E.R+"ms")),A=E;var ue=f;if(A.qa=eh(A,A.J?A.ia:null,A.W),ue.K){Bu(A.h,ue);var Xe=ue,Lt=A.L;Lt&&(Xe.I=Lt),Xe.B&&(Xs(Xe),tt(Xe)),A.g=ue}else ro(A);0<E.i.length&&Vr(E)}else $e[0]!="stop"&&$e[0]!="close"||gi(E,7);else E.G==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?gi(E,7):qt(E):$e[0]!="noop"&&E.l&&E.l.ta($e),E.v=0)}}hi(4)}catch{}}var Uu=class{constructor(f,_){this.g=f,this.map=_}};function Js(f){this.l=f||10,c.PerformanceNavigationTiming?(f=c.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Nn(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function zu(f){return f.h?1:f.g?f.g.size:0}function dn(f,_){return f.h?f.h==_:f.g?f.g.has(_):!1}function Fl(f,_){f.g?f.g.add(_):f.h=_}function Bu(f,_){f.h&&f.h==_?f.h=null:f.g&&f.g.has(_)&&f.g.delete(_)}Js.prototype.cancel=function(){if(this.i=$u(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function $u(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let _=f.i;for(const E of f.g.values())_=_.concat(E.D);return _}return k(f.i)}function oa(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(h(f)){for(var _=[],E=f.length,A=0;A<E;A++)_.push(f[A]);return _}_=[],E=0;for(A in f)_[E++]=f[A];return _}function aa(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(h(f)||typeof f=="string"){var _=[];f=f.length;for(var E=0;E<f;E++)_.push(E);return _}_=[],E=0;for(const A in f)_[E++]=A;return _}}}function Bi(f,_){if(f.forEach&&typeof f.forEach=="function")f.forEach(_,void 0);else if(h(f)||typeof f=="string")Array.prototype.forEach.call(f,_,void 0);else for(var E=aa(f),A=oa(f),$=A.length,Q=0;Q<$;Q++)_.call(void 0,A[Q],E&&E[Q],f)}var Zs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tp(f,_){if(f){f=f.split("&");for(var E=0;E<f.length;E++){var A=f[E].indexOf("="),$=null;if(0<=A){var Q=f[E].substring(0,A);$=f[E].substring(A+1)}else Q=f[E];_(Q,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function di(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof di){this.h=f.h,eo(this,f.j),this.o=f.o,this.g=f.g,$i(this,f.s),this.l=f.l;var _=f.i,E=new Mr;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),Hi(this,E),this.m=f.m}else f&&(_=String(f).match(Zs))?(this.h=!1,eo(this,_[1]||"",!0),this.o=Be(_[2]||""),this.g=Be(_[3]||"",!0),$i(this,_[4]),this.l=Be(_[5]||"",!0),Hi(this,_[6]||"",!0),this.m=Be(_[7]||"")):(this.h=!1,this.i=new Mr(null,this.h))}di.prototype.toString=function(){var f=[],_=this.j;_&&f.push(qi(_,la,!0),":");var E=this.g;return(E||_=="file")&&(f.push("//"),(_=this.o)&&f.push(qi(_,la,!0),"@"),f.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&f.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&f.push("/"),f.push(qi(E,E.charAt(0)=="/"?qu:Wu,!0))),(E=this.i.toString())&&f.push("?",E),(E=this.m)&&f.push("#",qi(E,jl)),f.join("")};function Ln(f){return new di(f)}function eo(f,_,E){f.j=E?Be(_,!0):_,f.j&&(f.j=f.j.replace(/:$/,""))}function $i(f,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);f.s=_}else f.s=null}function Hi(f,_,E){_ instanceof Mr?(f.i=_,Nr(f.i,f.h)):(E||(_=qi(_,Gu)),f.i=new Mr(_,f.h))}function et(f,_,E){f.i.set(_,E)}function Wi(f){return et(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Be(f,_){return f?_?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function qi(f,_,E){return typeof f=="string"?(f=encodeURI(f).replace(_,Hu),E&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Hu(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var la=/[#\/\?@]/g,Wu=/[#\?:]/g,qu=/[#\?]/g,Gu=/[#\?@]/g,jl=/#/g;function Mr(f,_){this.h=this.g=null,this.i=f||null,this.j=!!_}function Wt(f){f.g||(f.g=new Map,f.h=0,f.i&&tp(f.i,function(_,E){f.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}n=Mr.prototype,n.add=function(f,_){Wt(this),this.i=null,f=Kn(this,f);var E=this.g.get(f);return E||this.g.set(f,E=[]),E.push(_),this.h+=1,this};function dr(f,_){Wt(f),_=Kn(f,_),f.g.has(_)&&(f.i=null,f.h-=f.g.get(_).length,f.g.delete(_))}function fr(f,_){return Wt(f),_=Kn(f,_),f.g.has(_)}n.forEach=function(f,_){Wt(this),this.g.forEach(function(E,A){E.forEach(function($){f.call(_,$,A,this)},this)},this)},n.na=function(){Wt(this);const f=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let A=0;A<_.length;A++){const $=f[A];for(let Q=0;Q<$.length;Q++)E.push(_[A])}return E},n.V=function(f){Wt(this);let _=[];if(typeof f=="string")fr(this,f)&&(_=_.concat(this.g.get(Kn(this,f))));else{f=Array.from(this.g.values());for(let E=0;E<f.length;E++)_=_.concat(f[E])}return _},n.set=function(f,_){return Wt(this),this.i=null,f=Kn(this,f),fr(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[_]),this.h+=1,this},n.get=function(f,_){return f?(f=this.V(f),0<f.length?String(f[0]):_):_};function Gi(f,_,E){dr(f,_),0<E.length&&(f.i=null,f.g.set(Kn(f,_),k(E)),f.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var A=_[E];const Q=encodeURIComponent(String(A)),ue=this.V(A);for(A=0;A<ue.length;A++){var $=Q;ue[A]!==""&&($+="="+encodeURIComponent(String(ue[A]))),f.push($)}}return this.i=f.join("&")};function Kn(f,_){return _=String(_),f.j&&(_=_.toLowerCase()),_}function Nr(f,_){_&&!f.j&&(Wt(f),f.i=null,f.g.forEach(function(E,A){var $=A.toLowerCase();A!=$&&(dr(this,A),Gi(this,$,E))},f)),f.j=_}function np(f,_){const E=new Ks;if(c.Image){const A=new Image;A.onload=b(_n,E,"TestLoadImage: loaded",!0,_,A),A.onerror=b(_n,E,"TestLoadImage: error",!1,_,A),A.onabort=b(_n,E,"TestLoadImage: abort",!1,_,A),A.ontimeout=b(_n,E,"TestLoadImage: timeout",!1,_,A),c.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=f}else _(!1)}function Ku(f,_){const E=new Ks,A=new AbortController,$=setTimeout(()=>{A.abort(),_n(E,"TestPingServer: timeout",!1,_)},1e4);fetch(f,{signal:A.signal}).then(Q=>{clearTimeout($),Q.ok?_n(E,"TestPingServer: ok",!0,_):_n(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout($),_n(E,"TestPingServer: error",!1,_)})}function _n(f,_,E,A,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),A(E)}catch{}}function rp(){this.g=new Al}function Yu(f,_,E){const A=E||"";try{Bi(f,function($,Q){let ue=$;d($)&&(ue=Cl($)),_.push(A+Q+"="+encodeURIComponent(ue))})}catch($){throw _.push(A+"type="+encodeURIComponent("_badmap")),$}}function fi(f){this.l=f.Ub||null,this.j=f.eb||!1}S(fi,qs),fi.prototype.g=function(){return new to(this.l,this.j)},fi.prototype.i=function(f){return function(){return f}}({});function to(f,_){Mt.call(this),this.D=f,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(to,Mt),n=to.prototype,n.open=function(f,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=_,this.readyState=1,mr(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(_.body=f),(this.D||c).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pr(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,mr(this)),this.g&&(this.readyState=3,mr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qu(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qu(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var _=f.value?f.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!f.done}))&&(this.response=this.responseText+=_)}f.done?pr(this):mr(this),this.readyState==3&&Qu(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,pr(this))},n.Qa=function(f){this.g&&(this.response=f,pr(this))},n.ga=function(){this.g&&pr(this)};function pr(f){f.readyState=4,f.l=null,f.j=null,f.v=null,mr(f)}n.setRequestHeader=function(f,_){this.u.append(f,_)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,f.push(E[0]+": "+E[1]),E=_.next();return f.join(`\r
`)};function mr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(to.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function pi(f){let _="";return J(f,function(E,A){_+=A,_+=":",_+=E,_+=`\r
`}),_}function Ki(f,_,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=pi(E),typeof f=="string"?E!=null&&encodeURIComponent(String(E)):et(f,_,E))}function ut(f){Mt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(ut,Mt);var ip=/^https?$/i,Ul=["POST","PUT"];n=ut.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,_,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);_=_?_.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ur.g(),this.v=this.o?Jo(this.o):Jo(ur),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(_,String(f),!0),this.B=!1}catch(Q){no(this,Q);return}if(f=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var $ in A)E.set($,A[$]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Q of A.keys())E.set(Q,A.get(Q));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find(Q=>Q.toLowerCase()=="content-type"),$=c.FormData&&f instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Ul,_,void 0))||A||$||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ue]of E)this.g.setRequestHeader(Q,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ua(this),this.u=!0,this.g.send(f),this.u=!1}catch(Q){no(this,Q)}};function no(f,_){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=_,f.m=5,ca(f),Vn(f)}function ca(f){f.A||(f.A=!0,Nt(f,"complete"),Nt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Nt(this,"complete"),Nt(this,"abort"),Vn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vn(this,!0)),ut.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?zl(this):this.bb())},n.bb=function(){zl(this)};function zl(f){if(f.h&&typeof l<"u"&&(!f.v[1]||vn(f)!=4||f.Z()!=2)){if(f.u&&vn(f)==4)Sl(f.Ea,0,f);else if(Nt(f,"readystatechange"),vn(f)==4){f.h=!1;try{const ue=f.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var A;if(A=ue===0){var $=String(f.D).match(Zs)[1]||null;!$&&c.self&&c.self.location&&($=c.self.location.protocol.slice(0,-1)),A=!ip.test($?$.toLowerCase():"")}E=A}if(E)Nt(f,"complete"),Nt(f,"success");else{f.m=6;try{var Q=2<vn(f)?f.g.statusText:""}catch{Q=""}f.l=Q+" ["+f.Z()+"]",ca(f)}}finally{Vn(f)}}}}function Vn(f,_){if(f.g){ua(f);const E=f.g,A=f.v[0]?()=>{}:null;f.g=null,f.v=null,_||Nt(f,"ready");try{E.onreadystatechange=A}catch{}}}function ua(f){f.I&&(c.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function vn(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<vn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var _=this.g.responseText;return f&&_.indexOf(f)==0&&(_=_.substring(f.length)),Pl(_)}};function Bl(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function ha(f){const _={};f=(f.g&&2<=vn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<f.length;A++){if(j(f[A]))continue;var E=L(f[A]);const $=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Q=_[$]||[];_[$]=Q,Q.push(E)}R(_,function(A){return A.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Lr(f,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[f]||_}function $l(f){this.Aa=0,this.i=[],this.j=new Ks,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Lr("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Lr("baseRetryDelayMs",5e3,f),this.cb=Lr("retryDelaySeedMs",1e4,f),this.Wa=Lr("forwardChannelMaxRetries",2,f),this.wa=Lr("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Js(f&&f.concurrentRequestLimit),this.Da=new rp,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=$l.prototype,n.la=8,n.G=1,n.connect=function(f,_,E,A){wt(0),this.W=f,this.H=_||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.I=eh(this,null,this.W),Vr(this)};function qt(f){if(da(f),f.G==3){var _=f.U++,E=Ln(f.I);if(et(E,"SID",f.K),et(E,"RID",_),et(E,"TYPE","terminate"),mi(f,E),_=new hr(f,f.j,_),_.L=2,_.v=Wi(Ln(E)),E=!1,c.navigator&&c.navigator.sendBeacon)try{E=c.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&c.Image&&(new Image().src=_.v,E=!0),E||(_.g=th(_.j,null),_.g.ea(_.v)),_.F=Date.now(),tt(_)}Zu(f)}function gr(f){f.g&&(Hl(f),f.g.cancel(),f.g=null)}function da(f){gr(f),f.u&&(c.clearTimeout(f.u),f.u=null),ma(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&c.clearTimeout(f.s),f.s=null)}function Vr(f){if(!Nn(f.h)&&!f.s){f.s=!0;var _=f.Ga;ye||F(),re||(ye(),re=!0),he.add(_,f),f.B=0}}function sp(f,_){return zu(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=_.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=lr(w(f.Ga,f,_),Ju(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const $=new hr(this,this.j,f);let Q=this.o;if(this.S&&(Q?(Q=I(Q),O(Q,this.S)):Q=this.S),this.m!==null||this.O||($.H=Q,Q=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(_+=A,4096<_){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=Yi(this,$,_),E=Ln(this.I),et(E,"RID",f),et(E,"CVER",22),this.D&&et(E,"X-HTTP-Session-Id",this.D),mi(this,E),Q&&(this.O?_="headers="+encodeURIComponent(String(pi(Q)))+"&"+_:this.m&&Ki(E,this.m,Q)),Fl(this.h,$),this.Ua&&et(E,"TYPE","init"),this.P?(et(E,"$req",_),et(E,"SID","null"),$.T=!0,sa($,E,null)):sa($,E,_),this.G=2}}else this.G==3&&(f?fa(this,f):this.i.length==0||Nn(this.h)||fa(this))};function fa(f,_){var E;_?E=_.l:E=f.U++;const A=Ln(f.I);et(A,"SID",f.K),et(A,"RID",E),et(A,"AID",f.T),mi(f,A),f.m&&f.o&&Ki(A,f.m,f.o),E=new hr(f,f.j,E,f.B+1),f.m===null&&(E.H=f.o),_&&(f.i=_.D.concat(f.i)),_=Yi(f,E,1e3),E.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Fl(f.h,E),sa(E,A,_)}function mi(f,_){f.H&&J(f.H,function(E,A){et(_,A,E)}),f.l&&Bi({},function(E,A){et(_,A,E)})}function Yi(f,_,E){E=Math.min(f.i.length,E);var A=f.l?w(f.l.Na,f.l,f):null;e:{var $=f.i;let Q=-1;for(;;){const ue=["count="+E];Q==-1?0<E?(Q=$[0].g,ue.push("ofs="+Q)):Q=0:ue.push("ofs="+Q);let Xe=!0;for(let Lt=0;Lt<E;Lt++){let $e=$[Lt].g;const Ut=$[Lt].map;if($e-=Q,0>$e)Q=Math.max(0,$[Lt].g-100),Xe=!1;else try{Yu(Ut,ue,"req"+$e+"_")}catch{A&&A(Ut)}}if(Xe){A=ue.join("&");break e}}}return f=f.i.splice(0,E),_.D=f,A}function ro(f){if(!f.g&&!f.u){f.Y=1;var _=f.Fa;ye||F(),re||(ye(),re=!0),he.add(_,f),f.v=0}}function pa(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=lr(w(f.Fa,f),Ju(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,Xu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=lr(w(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),gr(this),Xu(this))};function Hl(f){f.A!=null&&(c.clearTimeout(f.A),f.A=null)}function Xu(f){f.g=new hr(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var _=Ln(f.qa);et(_,"RID","rpc"),et(_,"SID",f.K),et(_,"AID",f.T),et(_,"CI",f.F?"0":"1"),!f.F&&f.ja&&et(_,"TO",f.ja),et(_,"TYPE","xmlhttp"),mi(f,_),f.m&&f.o&&Ki(_,f.m,f.o),f.L&&(f.g.I=f.L);var E=f.g;f=f.ia,E.L=1,E.v=Wi(Ln(_)),E.m=null,E.P=!0,Ll(E,f)}n.Za=function(){this.C!=null&&(this.C=null,gr(this),pa(this),wt(19))};function ma(f){f.C!=null&&(c.clearTimeout(f.C),f.C=null)}function ga(f,_){var E=null;if(f.g==_){ma(f),Hl(f),f.g=null;var A=2}else if(dn(f.h,_))E=_.D,Bu(f.h,_),A=1;else return;if(f.G!=0){if(_.o)if(A==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var $=f.B;A=Gs(),Nt(A,new ta(A,E)),Vr(f)}else ro(f);else if($=_.s,$==3||$==0&&0<_.X||!(A==1&&sp(f,_)||A==2&&pa(f)))switch(E&&0<E.length&&(_=f.h,_.i=_.i.concat(E)),$){case 1:gi(f,5);break;case 4:gi(f,10);break;case 3:gi(f,6);break;default:gi(f,2)}}}function Ju(f,_){let E=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(E*=2),E*_}function gi(f,_){if(f.j.info("Error code "+_),_==2){var E=w(f.fb,f),A=f.Xa;const $=!A;A=new di(A||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||eo(A,"https"),Wi(A),$?np(A.toString(),E):Ku(A.toString(),E)}else wt(2);f.G=0,f.l&&f.l.sa(_),Zu(f),da(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Zu(f){if(f.G=0,f.ka=[],f.l){const _=$u(f.h);(_.length!=0||f.i.length!=0)&&(T(f.ka,_),T(f.ka,f.i),f.h.i.length=0,k(f.i),f.i.length=0),f.l.ra()}}function eh(f,_,E){var A=E instanceof di?Ln(E):new di(E);if(A.g!="")_&&(A.g=_+"."+A.g),$i(A,A.s);else{var $=c.location;A=$.protocol,_=_?_+"."+$.hostname:$.hostname,$=+$.port;var Q=new di(null);A&&eo(Q,A),_&&(Q.g=_),$&&$i(Q,$),E&&(Q.l=E),A=Q}return E=f.D,_=f.ya,E&&_&&et(A,E,_),et(A,"VER",f.la),mi(f,A),A}function th(f,_,E){if(_&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=f.Ca&&!f.pa?new ut(new fi({eb:E})):new ut(f.pa),_.Ha(f.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wl(){}n=Wl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ya(){}ya.prototype.g=function(f,_){return new fn(f,_)};function fn(f,_){Mt.call(this),this.g=new $l(_),this.l=f,this.h=_&&_.messageUrlParams||null,f=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(f?f["X-WebChannel-Content-Type"]=_.messageContentType:f={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(f?f["X-WebChannel-Client-Profile"]=_.va:f={"X-WebChannel-Client-Profile":_.va}),this.g.S=f,(f=_&&_.Sb)&&!j(f)&&(this.g.m=f),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!j(_)&&(this.g.D=_,f=this.h,f!==null&&_ in f&&(f=this.h,_ in f&&delete f[_])),this.j=new Fr(this)}S(fn,Mt),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){qt(this.g)},fn.prototype.o=function(f){var _=this.g;if(typeof f=="string"){var E={};E.__data__=f,f=E}else this.u&&(E={},E.__data__=Cl(f),f=E);_.i.push(new Uu(_.Ya++,f)),_.G==3&&Vr(_)},fn.prototype.N=function(){this.g.l=null,delete this.j,qt(this.g),delete this.g,fn.aa.N.call(this)};function nh(f){Dr.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var _=f.__sm__;if(_){e:{for(const E in _){f=E;break e}f=void 0}(this.i=f)&&(f=this.i,_=_!==null&&f in _?_[f]:void 0),this.data=_}else this.data=f}S(nh,Dr);function rh(){ea.call(this),this.status=1}S(rh,ea);function Fr(f){this.g=f}S(Fr,Wl),Fr.prototype.ua=function(){Nt(this.g,"a")},Fr.prototype.ta=function(f){Nt(this.g,new nh(f))},Fr.prototype.sa=function(f){Nt(this.g,new rh)},Fr.prototype.ra=function(){Nt(this.g,"b")},ya.prototype.createWebChannel=ya.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,Vx=function(){return new ya},Lx=function(){return Gs()},Nx=Or,Eg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ra.NO_ERROR=0,ra.TIMEOUT=8,ra.HTTP_ERROR=6,Td=ra,Lu.COMPLETE="complete",Mx=Lu,Zo.EventType=qn,qn.OPEN="a",qn.CLOSE="b",qn.ERROR="c",qn.MESSAGE="d",Mt.prototype.listen=Mt.prototype.K,Cc=Zo,ut.prototype.listenOnce=ut.prototype.L,ut.prototype.getLastError=ut.prototype.Ka,ut.prototype.getLastErrorCode=ut.prototype.Ba,ut.prototype.getStatus=ut.prototype.Z,ut.prototype.getResponseJson=ut.prototype.Oa,ut.prototype.getResponseText=ut.prototype.oa,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Ha,Ox=ut}).apply(typeof Jh<"u"?Jh:typeof self<"u"?self:typeof window<"u"?window:{});const Fw="@firebase/firestore",jw="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pl="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=new vf("@firebase/firestore");function za(){return No.logLevel}function ge(n,...e){if(No.logLevel<=je.DEBUG){const t=e.map(vy);No.debug(`Firestore (${pl}): ${n}`,...t)}}function Ni(n,...e){if(No.logLevel<=je.ERROR){const t=e.map(vy);No.error(`Firestore (${pl}): ${n}`,...t)}}function Ja(n,...e){if(No.logLevel<=je.WARN){const t=e.map(vy);No.warn(`Firestore (${pl}): ${n}`,...t)}}function vy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Fx(n,r,t)}function Fx(n,e,t){let r=`FIRESTORE (${pl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ni(r),new Error(r)}function Qe(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Fx(e,i,r)}function Oe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends Ar{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(sn.UNAUTHENTICATED))}shutdown(){}}class PO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class AO{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0,42304);let r=this.i;const i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let o=new Di;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Di,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await i(this.currentUser)})},c=h=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Di)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qe(typeof r.accessToken=="string",31837,{l:r}),new jx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new sn(e)}}class RO{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class DO{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new RO(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(sn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Uw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OO{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,rr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Qe(this.o===void 0,3512);const r=o=>{o.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,ge("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Uw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Uw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MO(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=MO(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}}function Ue(n,e){return n<e?-1:n>e?1:0}function Tg(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),o=e.charAt(r);if(i!==o)return jm(i)===jm(o)?Ue(i,o):jm(i)?1:-1}return Ue(n.length,e.length)}const NO=55296,LO=57343;function jm(n){const e=n.charCodeAt(0);return e>=NO&&e<=LO}function Za(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw="__name__";class Kr{constructor(e,t,r){t===void 0?t=0:t>e.length&&Pe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Pe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Kr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Kr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=Kr.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Ue(e.length,t.length)}static compareSegments(e,t){const r=Kr.isNumericId(e),i=Kr.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Kr.extractNumericId(e).compare(Kr.extractNumericId(t)):Tg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ss.fromString(e.substring(4,e.length-2))}}class rt extends Kr{construct(e,t,r){return new rt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new fe(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new rt(t)}static emptyPath(){return new rt([])}}const VO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends Kr{construct(e,t,r){return new Qt(e,t,r)}static isValidIdentifier(e){return VO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===zw}static keyField(){return new Qt([zw])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new fe(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new fe(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new fe(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else c==="`"?(l=!l,i++):c!=="."||l?(r+=c,i++):(o(),i++)}if(o(),l)throw new fe(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(t)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.path=e}static fromPath(e){return new xe(rt.fromString(e))}static fromName(e){return new xe(rt.fromString(e).popFirst(5))}static empty(){return new xe(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return rt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new rt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(n,e,t){if(!t)throw new fe(Z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function FO(n,e,t,r){if(e===!0&&r===!0)throw new fe(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Bw(n){if(!xe.isDocumentKey(n))throw new fe(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function $w(n){if(xe.isDocumentKey(n))throw new fe(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function zx(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function bf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Pe(12329,{type:typeof n})}function Li(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new fe(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=bf(n);throw new fe(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function jO(n,e){if(e<=0)throw new fe(Z.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(n,e){const t={typeString:n};return e&&(t.value=e),t}function _u(n,e){if(!zx(n))throw new fe(Z.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(i&&typeof l!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new fe(Z.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw=-62135596800,Ww=1e6;class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Ww);return new lt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Hw)throw new fe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ww}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_u(e,lt._jsonSchema))return new lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Hw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:Dt("string",lt._jsonSchemaVersion),seconds:Dt("number"),nanoseconds:Dt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new lt(0,0))}static max(){return new De(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu=-1;function UO(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=De.fromTimestamp(r===1e9?new lt(t+1,0):new lt(t,r));return new Ps(i,xe.empty(),e)}function zO(n){return new Ps(n.readTime,n.key,eu)}class Ps{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ps(De.min(),xe.empty(),eu)}static max(){return new Ps(De.max(),xe.empty(),eu)}}function BO(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=xe.comparator(n.documentKey,e.documentKey),t!==0?t:Ue(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ml(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==$O)throw n;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):te.reject(t)}static resolve(e){return new te((t,r)=>{t(e)})}static reject(e){return new te((t,r)=>{r(e)})}static waitFor(e){return new te((t,r)=>{let i=0,o=0,l=!1;e.forEach(c=>{++i,c.next(()=>{++o,l&&o===i&&t()},h=>r(h))}),l=!0,o===i&&t()})}static or(e){let t=te.resolve(!1);for(const r of e)t=t.next(i=>i?te.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new te((r,i)=>{const o=e.length,l=new Array(o);let c=0;for(let h=0;h<o;h++){const d=h;t(e[d]).next(m=>{l[d]=m,++c,c===o&&r(l)},m=>i(m))}})}static doWhile(e,t){return new te((r,i)=>{const o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}}function WO(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function gl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey=-1;function Sf(n){return n==null}function Bd(n){return n===0&&1/n==-1/0}function qO(n){return typeof n=="number"&&Number.isInteger(n)&&!Bd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx="";function GO(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=qw(e)),e=KO(n.get(t),e);return qw(e)}function KO(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case Bx:t+="";break;default:t+=o}}return t}function qw(n){return n+Bx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Us(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function $x(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||Yt.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zh(this.root,e,this.comparator,!0)}}class Zh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yt{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??Yt.RED,this.left=i??Yt.EMPTY,this.right=o??Yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new Yt(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Yt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Pe(27949);return e+(this.isRed()?0:1)}}Yt.EMPTY=null,Yt.RED=!0,Yt.BLACK=!1;Yt.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe(57766)}get value(){throw Pe(16141)}get color(){throw Pe(16727)}get left(){throw Pe(29726)}get right(){throw Pe(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Yt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Kw(this.data.getIterator())}getIteratorFrom(e){return new Kw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new jt(this.comparator);return t.data=e,t}}class Kw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new Hn([])}unionWith(e){let t=new jt(Qt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Hn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Za(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Hx("Invalid base64 string: "+o):o}}(e);return new Jt(t)}static fromUint8Array(e){const t=function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o}(e);return new Jt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jt.EMPTY_BYTE_STRING=new Jt("");const YO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function As(n){if(Qe(!!n,39018),typeof n=="string"){let e=0;const t=YO.exec(n);if(Qe(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tt(n.seconds),nanos:Tt(n.nanos)}}function Tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Rs(n){return typeof n=="string"?Jt.fromBase64String(n):Jt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx="server_timestamp",qx="__type__",Gx="__previous_value__",Kx="__local_write_time__";function Ty(n){return(n?.mapValue?.fields||{})[qx]?.stringValue===Wx}function If(n){const e=n.mapValue.fields[Gx];return Ty(e)?If(e):e}function tu(n){const e=As(n.mapValue.fields[Kx].timestampValue);return new lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e,t,r,i,o,l,c,h,d,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=d,this.isUsingEmulator=m}}const $d="(default)";class nu{constructor(e,t){this.projectId=e,this.database=t||$d}static empty(){return new nu("","")}get isDefaultDatabase(){return this.database===$d}isEqual(e){return e instanceof nu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="__type__",XO="__max__",ed={mapValue:{}},Qx="__vector__",Hd="value";function Ds(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ty(n)?4:ZO(n)?9007199254740991:JO(n)?10:11:Pe(28295,{value:n})}function oi(n,e){if(n===e)return!0;const t=Ds(n);if(t!==Ds(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return tu(n).isEqual(tu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=As(i.timestampValue),c=As(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Rs(i.bytesValue).isEqual(Rs(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Tt(i.geoPointValue.latitude)===Tt(o.geoPointValue.latitude)&&Tt(i.geoPointValue.longitude)===Tt(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Tt(i.integerValue)===Tt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=Tt(i.doubleValue),c=Tt(o.doubleValue);return l===c?Bd(l)===Bd(c):isNaN(l)&&isNaN(c)}return!1}(n,e);case 9:return Za(n.arrayValue.values||[],e.arrayValue.values||[],oi);case 10:case 11:return function(i,o){const l=i.mapValue.fields||{},c=o.mapValue.fields||{};if(Gw(l)!==Gw(c))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(c[h]===void 0||!oi(l[h],c[h])))return!1;return!0}(n,e);default:return Pe(52216,{left:n})}}function ru(n,e){return(n.values||[]).find(t=>oi(t,e))!==void 0}function el(n,e){if(n===e)return 0;const t=Ds(n),r=Ds(e);if(t!==r)return Ue(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ue(n.booleanValue,e.booleanValue);case 2:return function(o,l){const c=Tt(o.integerValue||o.doubleValue),h=Tt(l.integerValue||l.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return Yw(n.timestampValue,e.timestampValue);case 4:return Yw(tu(n),tu(e));case 5:return Tg(n.stringValue,e.stringValue);case 6:return function(o,l){const c=Rs(o),h=Rs(l);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const c=o.split("/"),h=l.split("/");for(let d=0;d<c.length&&d<h.length;d++){const m=Ue(c[d],h[d]);if(m!==0)return m}return Ue(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const c=Ue(Tt(o.latitude),Tt(l.latitude));return c!==0?c:Ue(Tt(o.longitude),Tt(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Qw(n.arrayValue,e.arrayValue);case 10:return function(o,l){const c=o.fields||{},h=l.fields||{},d=c[Hd]?.arrayValue,m=h[Hd]?.arrayValue,y=Ue(d?.values?.length||0,m?.values?.length||0);return y!==0?y:Qw(d,m)}(n.mapValue,e.mapValue);case 11:return function(o,l){if(o===ed.mapValue&&l===ed.mapValue)return 0;if(o===ed.mapValue)return 1;if(l===ed.mapValue)return-1;const c=o.fields||{},h=Object.keys(c),d=l.fields||{},m=Object.keys(d);h.sort(),m.sort();for(let y=0;y<h.length&&y<m.length;++y){const w=Tg(h[y],m[y]);if(w!==0)return w;const b=el(c[h[y]],d[m[y]]);if(b!==0)return b}return Ue(h.length,m.length)}(n.mapValue,e.mapValue);default:throw Pe(23264,{he:t})}}function Yw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ue(n,e);const t=As(n),r=As(e),i=Ue(t.seconds,r.seconds);return i!==0?i:Ue(t.nanos,r.nanos)}function Qw(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=el(t[i],r[i]);if(o)return o}return Ue(t.length,r.length)}function tl(n){return bg(n)}function bg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=As(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Rs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return xe.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=bg(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const l of r)o?o=!1:i+=",",i+=`${l}:${bg(t.fields[l])}`;return i+"}"}(n.mapValue):Pe(61005,{value:n})}function bd(n){switch(Ds(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=If(n);return e?16+bd(e):16;case 5:return 2*n.stringValue.length;case 6:return Rs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+bd(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Us(r.fields,(o,l)=>{i+=o.length+bd(l)}),i}(n.mapValue);default:throw Pe(13486,{value:n})}}function Xw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function xg(n){return!!n&&"integerValue"in n}function by(n){return!!n&&"arrayValue"in n}function Jw(n){return!!n&&"nullValue"in n}function Zw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function xd(n){return!!n&&"mapValue"in n}function JO(n){return(n?.mapValue?.fields||{})[Yx]?.stringValue===Qx}function Fc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Us(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Fc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Fc(n.arrayValue.values[t]);return e}return{...n}}function ZO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===XO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.value=e}static empty(){return new Cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!xd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fc(t)}setAll(e){let t=Qt.emptyPath(),r={},i=[];e.forEach((l,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=c.popLast()}l?r[c.lastSegment()]=Fc(l):i.push(c.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());xd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return oi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];xd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Us(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Cn(Fc(this.value))}}function Xx(n){const e=[];return Us(n.fields,(t,r)=>{const i=new Qt([t]);if(xd(r)){const o=Xx(r.mapValue).fields;if(o.length===0)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)}),new Hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,t,r,i,o,l,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new on(e,0,De.min(),De.min(),De.min(),Cn.empty(),0)}static newFoundDocument(e,t,r,i){return new on(e,1,t,De.min(),r,i,0)}static newNoDocument(e,t){return new on(e,2,t,De.min(),De.min(),Cn.empty(),0)}static newUnknownDocument(e,t){return new on(e,3,t,De.min(),De.min(),Cn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,t){this.position=e,this.inclusive=t}}function eE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],l=n.position[i];if(o.field.isKeyField()?r=xe.comparator(xe.fromName(l.referenceValue),t.key):r=el(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function tE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!oi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,t="asc"){this.field=e,this.dir=t}}function e2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{}class Rt extends Jx{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new n2(e,t,r):t==="array-contains"?new s2(e,r):t==="in"?new o2(e,r):t==="not-in"?new a2(e,r):t==="array-contains-any"?new l2(e,r):new Rt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new r2(e,r):new i2(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(el(t,this.value)):t!==null&&Ds(this.value)===Ds(t)&&this.matchesComparison(el(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cr extends Jx{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Cr(e,t)}matches(e){return Zx(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Zx(n){return n.op==="and"}function eS(n){return t2(n)&&Zx(n)}function t2(n){for(const e of n.filters)if(e instanceof Cr)return!1;return!0}function Sg(n){if(n instanceof Rt)return n.field.canonicalString()+n.op.toString()+tl(n.value);if(eS(n))return n.filters.map(e=>Sg(e)).join(",");{const e=n.filters.map(t=>Sg(t)).join(",");return`${n.op}(${e})`}}function tS(n,e){return n instanceof Rt?function(r,i){return i instanceof Rt&&r.op===i.op&&r.field.isEqual(i.field)&&oi(r.value,i.value)}(n,e):n instanceof Cr?function(r,i){return i instanceof Cr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,l,c)=>o&&tS(l,i.filters[c]),!0):!1}(n,e):void Pe(19439)}function nS(n){return n instanceof Rt?function(t){return`${t.field.canonicalString()} ${t.op} ${tl(t.value)}`}(n):n instanceof Cr?function(t){return t.op.toString()+" {"+t.getFilters().map(nS).join(" ,")+"}"}(n):"Filter"}class n2 extends Rt{constructor(e,t,r){super(e,t,r),this.key=xe.fromName(r.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class r2 extends Rt{constructor(e,t){super(e,"in",t),this.keys=rS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class i2 extends Rt{constructor(e,t){super(e,"not-in",t),this.keys=rS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function rS(n,e){return(e.arrayValue?.values||[]).map(t=>xe.fromName(t.referenceValue))}class s2 extends Rt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return by(t)&&ru(t.arrayValue,this.value)}}class o2 extends Rt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ru(this.value.arrayValue,t)}}class a2 extends Rt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ru(this.value.arrayValue,t)}}class l2 extends Rt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!by(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ru(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,t=null,r=[],i=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=c,this.Te=null}}function nE(n,e=null,t=[],r=[],i=null,o=null,l=null){return new c2(n,e,t,r,i,o,l)}function xy(n){const e=Oe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Sg(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Sf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>tl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>tl(r)).join(",")),e.Te=t}return e.Te}function Sy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!e2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!tS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!tE(n.startAt,e.startAt)&&tE(n.endAt,e.endAt)}function Ig(n){return xe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,t=null,r=[],i=[],o=null,l="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function u2(n,e,t,r,i,o,l,c){return new yl(n,e,t,r,i,o,l,c)}function Iy(n){return new yl(n)}function rE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function iS(n){return n.collectionGroup!==null}function jc(n){const e=Oe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new jt(Qt.comparator);return l.filters.forEach(h=>{h.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new iu(o,r))}),t.has(Qt.keyField().canonicalString())||e.Ie.push(new iu(Qt.keyField(),r))}return e.Ie}function Zr(n){const e=Oe(n);return e.Ee||(e.Ee=h2(e,jc(n))),e.Ee}function h2(n,e){if(n.limitType==="F")return nE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new iu(i.field,o)});const t=n.endAt?new Wd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Wd(n.startAt.position,n.startAt.inclusive):null;return nE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function kg(n,e){const t=n.filters.concat([e]);return new yl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function qd(n,e,t){return new yl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function kf(n,e){return Sy(Zr(n),Zr(e))&&n.limitType===e.limitType}function sS(n){return`${xy(Zr(n))}|lt:${n.limitType}`}function Ba(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>nS(i)).join(", ")}]`),Sf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>tl(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>tl(i)).join(",")),`Target(${r})`}(Zr(n))}; limitType=${n.limitType})`}function Cf(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):xe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of jc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(l,c,h){const d=eE(l,c,h);return l.inclusive?d<=0:d<0}(r.startAt,jc(r),i)||r.endAt&&!function(l,c,h){const d=eE(l,c,h);return l.inclusive?d>=0:d>0}(r.endAt,jc(r),i))}(n,e)}function d2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function oS(n){return(e,t)=>{let r=!1;for(const i of jc(n)){const o=f2(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function f2(n,e,t){const r=n.field.isKeyField()?xe.comparator(e.key,t.key):function(o,l,c){const h=l.data.field(o),d=c.data.field(o);return h!==null&&d!==null?el(h,d):Pe(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Pe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Us(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return $x(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2=new mt(xe.comparator);function Vi(){return p2}const aS=new mt(xe.comparator);function Pc(...n){let e=aS;for(const t of n)e=e.insert(t.key,t);return e}function lS(n){let e=aS;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function So(){return Uc()}function cS(){return Uc()}function Uc(){return new Ho(n=>n.toString(),(n,e)=>n.isEqual(e))}const m2=new mt(xe.comparator),g2=new jt(xe.comparator);function ze(...n){let e=g2;for(const t of n)e=e.add(t);return e}const y2=new jt(Ue);function _2(){return y2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bd(e)?"-0":e}}function uS(n){return{integerValue:""+n}}function v2(n,e){return qO(e)?uS(e):ky(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(){this._=void 0}}function w2(n,e,t){return n instanceof Gd?function(i,o){const l={fields:{[qx]:{stringValue:Wx},[Kx]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Ty(o)&&(o=If(o)),o&&(l.fields[Gx]=o),{mapValue:l}}(t,e):n instanceof su?dS(n,e):n instanceof ou?fS(n,e):function(i,o){const l=hS(i,o),c=iE(l)+iE(i.Ae);return xg(l)&&xg(i.Ae)?uS(c):ky(i.serializer,c)}(n,e)}function E2(n,e,t){return n instanceof su?dS(n,e):n instanceof ou?fS(n,e):t}function hS(n,e){return n instanceof Kd?function(r){return xg(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Gd extends Pf{}class su extends Pf{constructor(e){super(),this.elements=e}}function dS(n,e){const t=pS(e);for(const r of n.elements)t.some(i=>oi(i,r))||t.push(r);return{arrayValue:{values:t}}}class ou extends Pf{constructor(e){super(),this.elements=e}}function fS(n,e){let t=pS(e);for(const r of n.elements)t=t.filter(i=>!oi(i,r));return{arrayValue:{values:t}}}class Kd extends Pf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function iE(n){return Tt(n.integerValue||n.doubleValue)}function pS(n){return by(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function T2(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof su&&i instanceof su||r instanceof ou&&i instanceof ou?Za(r.elements,i.elements,oi):r instanceof Kd&&i instanceof Kd?oi(r.Ae,i.Ae):r instanceof Gd&&i instanceof Gd}(n.transform,e.transform)}class b2{constructor(e,t){this.version=e,this.transformResults=t}}class ei{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ei}static exists(e){return new ei(void 0,e)}static updateTime(e){return new ei(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Af{}function mS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new yS(n.key,ei.none()):new vu(n.key,n.data,ei.none());{const t=n.data,r=Cn.empty();let i=new jt(Qt.comparator);for(let o of e.fields)if(!i.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),i=i.add(o)}return new zs(n.key,r,new Hn(i.toArray()),ei.none())}}function x2(n,e,t){n instanceof vu?function(i,o,l){const c=i.value.clone(),h=oE(i.fieldTransforms,o,l.transformResults);c.setAll(h),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(n,e,t):n instanceof zs?function(i,o,l){if(!Sd(i.precondition,o))return void o.convertToUnknownDocument(l.version);const c=oE(i.fieldTransforms,o,l.transformResults),h=o.data;h.setAll(gS(i)),h.setAll(c),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(n,e,t):function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function zc(n,e,t,r){return n instanceof vu?function(o,l,c,h){if(!Sd(o.precondition,l))return c;const d=o.value.clone(),m=aE(o.fieldTransforms,h,l);return d.setAll(m),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof zs?function(o,l,c,h){if(!Sd(o.precondition,l))return c;const d=aE(o.fieldTransforms,h,l),m=l.data;return m.setAll(gS(o)),m.setAll(d),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(n,e,t,r):function(o,l,c){return Sd(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(n,e,t)}function S2(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=hS(r.transform,i||null);o!=null&&(t===null&&(t=Cn.empty()),t.set(r.field,o))}return t||null}function sE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Za(r,i,(o,l)=>T2(o,l))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class vu extends Af{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class zs extends Af{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function gS(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function oE(n,e,t){const r=new Map;Qe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const o=n[i],l=o.transform,c=e.data.field(o.field);r.set(o.field,E2(l,c,t[i]))}return r}function aE(n,e,t){const r=new Map;for(const i of n){const o=i.transform,l=t.data.field(i.field);r.set(i.field,w2(o,l,e))}return r}class yS extends Af{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class I2 extends Af{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&x2(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=zc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=zc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=cS();return this.mutations.forEach(i=>{const o=e.get(i.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=t.has(i.key)?null:c;const h=mS(l,c);h!==null&&r.set(i.key,h),l.isValidDocument()||l.convertToNoDocument(De.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ze())}isEqual(e){return this.batchId===e.batchId&&Za(this.mutations,e.mutations,(t,r)=>sE(t,r))&&Za(this.baseMutations,e.baseMutations,(t,r)=>sE(t,r))}}class Cy{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Qe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return m2}();const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new Cy(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At,He;function A2(n){switch(n){case Z.OK:return Pe(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Pe(15467,{code:n})}}function _S(n){if(n===void 0)return Ni("GRPC error has no .code"),Z.UNKNOWN;switch(n){case At.OK:return Z.OK;case At.CANCELLED:return Z.CANCELLED;case At.UNKNOWN:return Z.UNKNOWN;case At.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case At.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case At.INTERNAL:return Z.INTERNAL;case At.UNAVAILABLE:return Z.UNAVAILABLE;case At.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case At.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case At.NOT_FOUND:return Z.NOT_FOUND;case At.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case At.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case At.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case At.ABORTED:return Z.ABORTED;case At.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case At.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case At.DATA_LOSS:return Z.DATA_LOSS;default:return Pe(39323,{code:n})}}(He=At||(At={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2=new Ss([4294967295,4294967295],0);function lE(n){const e=R2().encode(n),t=new Dx;return t.update(e),new Uint8Array(t.digest())}function cE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ss([t,r],0),new Ss([i,o],0)]}class Py{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ac(`Invalid padding: ${t}`);if(r<0)throw new Ac(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ac(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ac(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ss.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Ss.fromNumber(r)));return i.compare(D2)===1&&(i=new Ss([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=lE(e),[r,i]=cE(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,i,o);if(!this.we(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Py(o,i,t);return r.forEach(c=>l.insert(c)),l}insert(e){if(this.ge===0)return;const t=lE(e),[r,i]=cE(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,i,o);this.Se(l)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Ac extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,wu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Rf(De.min(),i,new mt(Ue),Vi(),ze())}}class wu{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new wu(r,t,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class vS{constructor(e,t){this.targetId=e,this.Ce=t}}class wS{constructor(e,t,r=Jt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class uE{constructor(){this.ve=0,this.Fe=hE(),this.Me=Jt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),t=ze(),r=ze();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Pe(38017,{changeType:o})}}),new wu(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=hE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class O2{constructor(e){this.Ge=e,this.ze=new Map,this.je=Vi(),this.Je=td(),this.He=td(),this.Ye=new mt(Ue)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Pe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const o=i.target;if(Ig(o))if(r===0){const l=new xe(o.path);this.et(t,l,on.newNoDocument(l,De.min()))}else Qe(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const c=this.ut(e),h=c?this.ct(c,e,l):1;if(h!==0){this.it(t);const d=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let l,c;try{l=Rs(r).toUint8Array()}catch(h){if(h instanceof Hx)return Ja("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new Py(l,i,o)}catch(h){return Ja(h instanceof Ac?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const l=this.Ge.ht(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(t,o,null),i++)}),i}Tt(e){const t=new Map;this.ze.forEach((o,l)=>{const c=this.ot(l);if(c){if(o.current&&Ig(c.target)){const h=new xe(c.target.path);this.It(h).has(l)||this.Et(l,h)||this.et(l,h,on.newNoDocument(h,e))}o.Be&&(t.set(l,o.ke()),o.qe())}});let r=ze();this.He.forEach((o,l)=>{let c=!0;l.forEachWhile(h=>{const d=this.ot(h);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.je.forEach((o,l)=>l.setReadTime(e));const i=new Rf(e,t,this.Ye,this.je,r);return this.je=Vi(),this.Je=td(),this.He=td(),this.Ye=new mt(Ue),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new uE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new jt(Ue),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new jt(Ue),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new uE),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function td(){return new mt(xe.comparator)}function hE(){return new mt(xe.comparator)}const M2={asc:"ASCENDING",desc:"DESCENDING"},N2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},L2={and:"AND",or:"OR"};class V2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Cg(n,e){return n.useProto3Json||Sf(e)?e:{value:e}}function Yd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ES(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function F2(n,e){return Yd(n,e.toTimestamp())}function ti(n){return Qe(!!n,49232),De.fromTimestamp(function(t){const r=As(t);return new lt(r.seconds,r.nanos)}(n))}function Ay(n,e){return Pg(n,e).canonicalString()}function Pg(n,e){const t=function(i){return new rt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function TS(n){const e=rt.fromString(n);return Qe(kS(e),10190,{key:e.toString()}),e}function Ag(n,e){return Ay(n.databaseId,e.path)}function Um(n,e){const t=TS(e);if(t.get(1)!==n.databaseId.projectId)throw new fe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new fe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new xe(xS(t))}function bS(n,e){return Ay(n.databaseId,e)}function j2(n){const e=TS(n);return e.length===4?rt.emptyPath():xS(e)}function Rg(n){return new rt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function xS(n){return Qe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function dE(n,e,t){return{name:Ag(n,e),fields:t.value.mapValue.fields}}function U2(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Pe(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(d,m){return d.useProto3Json?(Qe(m===void 0||typeof m=="string",58123),Jt.fromBase64String(m||"")):(Qe(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Jt.fromUint8Array(m||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(d){const m=d.code===void 0?Z.UNKNOWN:_S(d.code);return new fe(m,d.message||"")}(l);t=new wS(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Um(n,r.document.name),o=ti(r.document.updateTime),l=r.document.createTime?ti(r.document.createTime):De.min(),c=new Cn({mapValue:{fields:r.document.fields}}),h=on.newFoundDocument(i,o,l,c),d=r.targetIds||[],m=r.removedTargetIds||[];t=new Id(d,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Um(n,r.document),o=r.readTime?ti(r.readTime):De.min(),l=on.newNoDocument(i,o),c=r.removedTargetIds||[];t=new Id([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Um(n,r.document),o=r.removedTargetIds||[];t=new Id([],o,i,null)}else{if(!("filter"in e))return Pe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,l=new P2(i,o),c=r.targetId;t=new vS(c,l)}}return t}function z2(n,e){let t;if(e instanceof vu)t={update:dE(n,e.key,e.value)};else if(e instanceof yS)t={delete:Ag(n,e.key)};else if(e instanceof zs)t={update:dE(n,e.key,e.data),updateMask:Q2(e.fieldMask)};else{if(!(e instanceof I2))return Pe(16599,{Vt:e.type});t={verify:Ag(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const c=l.transform;if(c instanceof Gd)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof su)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ou)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Kd)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw Pe(20930,{transform:l.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:F2(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Pe(27497)}(n,e.precondition)),t}function B2(n,e){return n&&n.length>0?(Qe(e!==void 0,14353),n.map(t=>function(i,o){let l=i.updateTime?ti(i.updateTime):ti(o);return l.isEqual(De.min())&&(l=ti(o)),new b2(l,i.transformResults||[])}(t,e))):[]}function $2(n,e){return{documents:[bS(n,e.path)]}}function H2(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=bS(n,i);const o=function(d){if(d.length!==0)return IS(Cr.create(d,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const l=function(d){if(d.length!==0)return d.map(m=>function(w){return{field:$a(w.field),direction:G2(w.dir)}}(m))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=Cg(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:t,parent:i}}function W2(n){let e=j2(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Qe(r===1,65062);const m=t.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=function(y){const w=SS(y);return w instanceof Cr&&eS(w)?w.getFilters():[w]}(t.where));let l=[];t.orderBy&&(l=function(y){return y.map(w=>function(S){return new iu(Ha(S.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(w))}(t.orderBy));let c=null;t.limit&&(c=function(y){let w;return w=typeof y=="object"?y.value:y,Sf(w)?null:w}(t.limit));let h=null;t.startAt&&(h=function(y){const w=!!y.before,b=y.values||[];return new Wd(b,w)}(t.startAt));let d=null;return t.endAt&&(d=function(y){const w=!y.before,b=y.values||[];return new Wd(b,w)}(t.endAt)),u2(e,i,l,o,c,"F",h,d)}function q2(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function SS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ha(t.unaryFilter.field);return Rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ha(t.unaryFilter.field);return Rt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ha(t.unaryFilter.field);return Rt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ha(t.unaryFilter.field);return Rt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Pe(61313);default:return Pe(60726)}}(n):n.fieldFilter!==void 0?function(t){return Rt.create(Ha(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Pe(58110);default:return Pe(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Cr.create(t.compositeFilter.filters.map(r=>SS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Pe(1026)}}(t.compositeFilter.op))}(n):Pe(30097,{filter:n})}function G2(n){return M2[n]}function K2(n){return N2[n]}function Y2(n){return L2[n]}function $a(n){return{fieldPath:n.canonicalString()}}function Ha(n){return Qt.fromServerFormat(n.fieldPath)}function IS(n){return n instanceof Rt?function(t){if(t.op==="=="){if(Zw(t.value))return{unaryFilter:{field:$a(t.field),op:"IS_NAN"}};if(Jw(t.value))return{unaryFilter:{field:$a(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Zw(t.value))return{unaryFilter:{field:$a(t.field),op:"IS_NOT_NAN"}};if(Jw(t.value))return{unaryFilter:{field:$a(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$a(t.field),op:K2(t.op),value:t.value}}}(n):n instanceof Cr?function(t){const r=t.getFilters().map(i=>IS(i));return r.length===1?r[0]:{compositeFilter:{op:Y2(t.op),filters:r}}}(n):Pe(54877,{filter:n})}function Q2(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function kS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,t,r,i,o=De.min(),l=De.min(),c=Jt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new vs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e){this.yt=e}}function J2(n){const e=W2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?qd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(){this.Cn=new eM}addToCollectionParentIndex(e,t){return this.Cn.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(Ps.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(Ps.min())}updateCollectionGroup(e,t,r){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class eM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new jt(rt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new jt(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},CS=41943040;class kn{static withCacheSize(e){return new kn(e,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kn.DEFAULT_COLLECTION_PERCENTILE=10,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kn.DEFAULT=new kn(CS,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kn.DISABLED=new kn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new nl(0)}static cr(){return new nl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="LruGarbageCollector",tM=1048576;function mE([n,e],[t,r]){const i=Ue(n,t);return i===0?Ue(e,r):i}class nM{constructor(e){this.Ir=e,this.buffer=new jt(mE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();mE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class rM{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(pE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){gl(t)?ge(pE,"Ignoring IndexedDB error during garbage collection: ",t):await ml(t)}await this.Vr(3e5)})}}class iM{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return te.resolve(xf.ce);const r=new nM(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(fE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fE):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,l,c,h,d;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,l=Date.now(),this.nthSequenceNumber(e,i))).next(y=>(r=y,c=Date.now(),this.removeTargets(e,r,t))).next(y=>(o=y,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(d=Date.now(),za()<=je.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-m}ms
	Determined least recently used ${i} in `+(c-l)+`ms
	Removed ${o} targets in `+(h-c)+`ms
	Removed ${y} documents in `+(d-h)+`ms
Total Duration: ${d-m}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:y})))}}function sM(n,e){return new iM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(){this.changes=new Ho(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?te.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&zc(r.mutation,i,Hn.empty(),lt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ze()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ze()){const i=So();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let l=Pc();return o.forEach((c,h)=>{l=l.insert(c,h.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=So();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ze()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((l,c)=>{t.set(l,c)})})}computeViews(e,t,r,i){let o=Vi();const l=Uc(),c=function(){return Uc()}();return t.forEach((h,d)=>{const m=r.get(d.key);i.has(d.key)&&(m===void 0||m.mutation instanceof zs)?o=o.insert(d.key,d):m!==void 0?(l.set(d.key,m.mutation.getFieldMask()),zc(m.mutation,d,m.mutation.getFieldMask(),lt.now())):l.set(d.key,Hn.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((d,m)=>l.set(d,m)),t.forEach((d,m)=>c.set(d,new aM(m,l.get(d)??null))),c))}recalculateAndSaveOverlays(e,t){const r=Uc();let i=new mt((l,c)=>l-c),o=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const c of l)c.keys().forEach(h=>{const d=t.get(h);if(d===null)return;let m=r.get(h)||Hn.empty();m=c.applyToLocalView(d,m),r.set(h,m);const y=(i.get(c.batchId)||ze()).add(h);i=i.insert(c.batchId,y)})}).next(()=>{const l=[],c=i.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),d=h.key,m=h.value,y=cS();m.forEach(w=>{if(!o.has(w)){const b=mS(t.get(w),r.get(w));b!==null&&y.set(w,b),o=o.add(w)}}),l.push(this.documentOverlayCache.saveOverlays(e,d,y))}return te.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(l){return xe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):iS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):te.resolve(So());let c=eu,h=o;return l.next(d=>te.forEach(d,(m,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),o.get(m)?te.resolve():this.remoteDocumentCache.getEntry(e,m).next(w=>{h=h.insert(m,w)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,h,d,ze())).next(m=>({batchId:c,changes:lS(m)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next(r=>{let i=Pc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let l=Pc();return this.indexManager.getCollectionParents(e,o).next(c=>te.forEach(c,h=>{const d=function(y,w){return new yl(w,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(m=>{m.forEach((y,w)=>{l=l.insert(y,w)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(l=>{o.forEach((h,d)=>{const m=d.getKey();l.get(m)===null&&(l=l.insert(m,on.newInvalidDocument(m)))});let c=Pc();return l.forEach((h,d)=>{const m=o.get(h);m!==void 0&&zc(m.mutation,d,Hn.empty(),lt.now()),Cf(t,d)&&(c=c.insert(h,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return te.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ti(i.createTime)}}(t)),te.resolve()}getNamedQuery(e,t){return te.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(i){return{name:i.name,query:J2(i.bundledQuery),readTime:ti(i.readTime)}}(t)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(){this.overlays=new mt(xe.comparator),this.qr=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const r=So();return te.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),te.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),te.resolve()}getOverlaysForCollection(e,t,r){const i=So(),o=t.length+1,l=new xe(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const h=c.getNext().value,d=h.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===o&&h.largestBatchId>r&&i.set(h.getKey(),h)}return te.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new mt((d,m)=>d-m);const l=this.overlays.getIterator();for(;l.hasNext();){const d=l.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let m=o.get(d.largestBatchId);m===null&&(m=So(),o=o.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const c=So(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((d,m)=>c.set(d,m)),!(c.size()>=i)););return te.resolve(c)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new C2(t,r));let o=this.qr.get(t);o===void 0&&(o=ze(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(){this.sessionToken=Jt.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(){this.Qr=new jt(Ht.$r),this.Ur=new jt(Ht.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Ht(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Ht(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){const t=new xe(new rt([])),r=new Ht(t,e),i=new Ht(t,e+1),o=[];return this.Ur.forEachInRange([r,i],l=>{this.Gr(l),o.push(l.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new xe(new rt([])),r=new Ht(t,e),i=new Ht(t,e+1);let o=ze();return this.Ur.forEachInRange([r,i],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new Ht(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ht{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return xe.comparator(e.key,t.key)||Ue(e.Yr,t.Yr)}static Kr(e,t){return Ue(e.Yr,t.Yr)||xe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new jt(Ht.$r)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new k2(o,t,r,i);this.mutationQueue.push(l);for(const c of i)this.Zr=this.Zr.add(new Ht(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return te.resolve(l)}lookupMutationBatch(e,t){return te.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),o=i<0?0:i;return te.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?Ey:this.tr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ht(t,0),i=new Ht(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],l=>{const c=this.Xr(l.Yr);o.push(c)}),te.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jt(Ue);return t.forEach(i=>{const o=new Ht(i,0),l=new Ht(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],c=>{r=r.add(c.Yr)})}),te.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;xe.isDocumentKey(o)||(o=o.child(""));const l=new Ht(new xe(o),0);let c=new jt(Ue);return this.Zr.forEachWhile(h=>{const d=h.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(h.Yr)),!0)},l),te.resolve(this.ti(c))}ti(e){const t=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Qe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return te.forEach(t.mutations,i=>{const o=new Ht(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){const r=new Ht(t,0),i=this.Zr.firstAfterOrEqual(r);return te.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e){this.ri=e,this.docs=function(){return new mt(xe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,l=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return te.resolve(r?r.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let r=Vi();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():on.newInvalidDocument(i))}),te.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Vi();const l=t.path,c=new xe(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:d,value:{document:m}}=h.getNext();if(!l.isPrefixOf(d.path))break;d.path.length>l.length+1||BO(zO(m),r)<=0||(i.has(m.key)||Cf(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return te.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Pe(9500)}ii(e,t){return te.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new pM(this)}getSize(e){return te.resolve(this.size)}}class pM extends oM{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),te.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e){this.persistence=e,this.si=new Ho(t=>xy(t),Sy),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.oi=0,this._i=new Ry,this.targetCount=0,this.ai=nl.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),te.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new nl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.Pr(t),te.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.si.forEach((l,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),te.waitFor(o).next(()=>i)}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return te.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),te.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(l=>{o.push(i.markPotentiallyOrphaned(e,l))}),te.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),te.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return te.resolve(r)}containsKey(e,t){return te.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,t){this.ui={},this.overlays={},this.ci=new xf(0),this.li=!1,this.li=!0,this.hi=new hM,this.referenceDelegate=e(this),this.Pi=new mM(this),this.indexManager=new Z2,this.remoteDocumentCache=function(i){return new fM(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new X2(t),this.Ii=new cM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new uM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new dM(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ge("MemoryPersistence","Starting transaction:",e);const i=new gM(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return te.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}}class gM extends HO{constructor(e){super(),this.currentSequenceNumber=e}}class Dy{constructor(e){this.persistence=e,this.Ri=new Ry,this.Vi=null}static mi(e){return new Dy(e)}get fi(){if(this.Vi)return this.Vi;throw Pe(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),te.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),te.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.fi,r=>{const i=xe.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,De.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return te.or([()=>te.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Qd{constructor(e,t){this.persistence=e,this.pi=new Ho(r=>GO(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=sM(this,t)}static mi(e,t){return new Qd(e,t)}Ei(){}di(e){return te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return te.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?te.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,l=>this.br(e,l,t).next(c=>{c||(r++,o.removeEntry(l,De.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),te.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),te.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),te.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=bd(e.data.value)),t}br(e,t,r){return te.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return te.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=ze(),i=ze();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Oy(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return YP()?8:WO(cn())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.ys(e,t).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new yM;return this.Ss(e,t,l).next(c=>{if(o.result=c,this.Vs)return this.bs(e,t,l,c.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(za()<=je.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Ba(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),te.resolve()):(za()<=je.DEBUG&&ge("QueryEngine","Query:",Ba(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(za()<=je.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Ba(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zr(t))):te.resolve())}ys(e,t){if(rE(t))return te.resolve(null);let r=Zr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=qd(t,null,"F"),r=Zr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=ze(...o);return this.ps.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,r).next(h=>{const d=this.Ds(t,c);return this.Cs(t,d,l,h.readTime)?this.ys(e,qd(t,null,"F")):this.vs(e,d,t,h)}))})))}ws(e,t,r,i){return rE(t)||i.isEqual(De.min())?te.resolve(null):this.ps.getDocuments(e,r).next(o=>{const l=this.Ds(t,o);return this.Cs(t,l,r,i)?te.resolve(null):(za()<=je.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ba(t)),this.vs(e,l,t,UO(i,eu)).next(c=>c))})}Ds(e,t){let r=new jt(oS(e));return t.forEach((i,o)=>{Cf(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return za()<=je.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Ba(t)),this.ps.getDocumentsMatchingQuery(e,t,Ps.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My="LocalStore",vM=3e8;class wM{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new mt(Ue),this.xs=new Ho(o=>xy(o),Sy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lM(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function EM(n,e,t,r){return new wM(n,e,t,r)}async function AS(n,e){const t=Oe(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],c=[];let h=ze();for(const d of i){l.push(d.batchId);for(const m of d.mutations)h=h.add(m.key)}for(const d of o){c.push(d.batchId);for(const m of d.mutations)h=h.add(m.key)}return t.localDocuments.getDocuments(r,h).next(d=>({Ls:d,removedBatchIds:l,addedBatchIds:c}))})})}function TM(n,e){const t=Oe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return function(c,h,d,m){const y=d.batch,w=y.keys();let b=te.resolve();return w.forEach(S=>{b=b.next(()=>m.getEntry(h,S)).next(k=>{const T=d.docVersions.get(S);Qe(T!==null,48541),k.version.compareTo(T)<0&&(y.applyToRemoteDocument(k,d),k.isValidDocument()&&(k.setReadTime(d.commitVersion),m.addEntry(k)))})}),b.next(()=>c.mutationQueue.removeMutationBatch(h,y))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=ze();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(h=h.add(c.batch.mutations[d].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function RS(n){const e=Oe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function bM(n,e){const t=Oe(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const c=[];e.targetChanges.forEach((m,y)=>{const w=i.get(y);if(!w)return;c.push(t.Pi.removeMatchingKeys(o,m.removedDocuments,y).next(()=>t.Pi.addMatchingKeys(o,m.addedDocuments,y)));let b=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?b=b.withResumeToken(Jt.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):m.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(m.resumeToken,r)),i=i.insert(y,b),function(k,T,N){return k.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=vM?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(w,b,m)&&c.push(t.Pi.updateTargetData(o,b))});let h=Vi(),d=ze();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push(xM(o,l,e.documentUpdates).next(m=>{h=m.ks,d=m.qs})),!r.isEqual(De.min())){const m=t.Pi.getLastRemoteSnapshotVersion(o).next(y=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(m)}return te.waitFor(c).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,h,d)).next(()=>h)}).then(o=>(t.Ms=i,o))}function xM(n,e,t){let r=ze(),i=ze();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=Vi();return t.forEach((c,h)=>{const d=o.get(c);h.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),h.isNoDocument()&&h.version.isEqual(De.min())?(e.removeEntry(c,h.readTime),l=l.insert(c,h)):!d.isValidDocument()||h.version.compareTo(d.version)>0||h.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(h),l=l.insert(c,h)):ge(My,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",h.version)}),{ks:l,qs:i}})}function SM(n,e){const t=Oe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ey),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function IM(n,e){const t=Oe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,te.resolve(i)):t.Pi.allocateTargetId(r).next(l=>(i=new vs(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function Dg(n,e,t){const r=Oe(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!gl(l))throw l;ge(My,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function gE(n,e,t){const r=Oe(n);let i=De.min(),o=ze();return r.persistence.runTransaction("Execute query","readwrite",l=>function(h,d,m){const y=Oe(h),w=y.xs.get(m);return w!==void 0?te.resolve(y.Ms.get(w)):y.Pi.getTargetData(d,m)}(r,l,Zr(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,c.targetId).next(h=>{o=h})}).next(()=>r.Fs.getDocumentsMatchingQuery(l,e,t?i:De.min(),t?o:ze())).next(c=>(kM(r,d2(e),c),{documents:c,Qs:o})))}function kM(n,e,t){let r=n.Os.get(e)||De.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}class yE{constructor(){this.activeTargetIds=_2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CM{constructor(){this.Mo=new yE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new yE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="ConnectivityMonitor";class vE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(_E,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(_E,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nd=null;function Og(){return nd===null?nd=function(){return 268435456+Math.round(2147483648*Math.random())}():nd++,"0x"+nd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm="RestConnection",AM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class RM{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===$d?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){const l=Og(),c=this.zo(e,t.toUriEncodedString());ge(zm,`Sending RPC '${e}' ${l}:`,c,r);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,i,o);const{host:d}=new URL(c),m=hl(d);return this.Jo(e,c,h,r,m).then(y=>(ge(zm,`Received RPC '${e}' ${l}: `,y),y),y=>{throw Ja(zm,`RPC '${e}' ${l} failed with error: `,y,"url: ",c,"request:",r),y})}Ho(e,t,r,i,o,l){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){const r=AM[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class OM extends RM{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){const l=Og();return new Promise((c,h)=>{const d=new Ox;d.setWithCredentials(!0),d.listenOnce(Mx.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Td.NO_ERROR:const y=d.getResponseJson();ge(rn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),c(y);break;case Td.TIMEOUT:ge(rn,`RPC '${e}' ${l} timed out`),h(new fe(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Td.HTTP_ERROR:const w=d.getStatus();if(ge(rn,`RPC '${e}' ${l} failed with status:`,w,"response text:",d.getResponseText()),w>0){let b=d.getResponseJson();Array.isArray(b)&&(b=b[0]);const S=b?.error;if(S&&S.status&&S.message){const k=function(N){const j=N.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(j)>=0?j:Z.UNKNOWN}(S.status);h(new fe(k,S.message))}else h(new fe(Z.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new fe(Z.UNAVAILABLE,"Connection failed."));break;default:Pe(9055,{l_:e,streamId:l,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{ge(rn,`RPC '${e}' ${l} completed.`)}});const m=JSON.stringify(i);ge(rn,`RPC '${e}' ${l} sending request:`,i),d.send(t,"POST",m,r,15)})}T_(e,t,r){const i=Og(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Vx(),c=Lx(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const m=o.join("");ge(rn,`Creating RPC '${e}' stream ${i}: ${m}`,h);const y=l.createWebChannel(m,h);this.I_(y);let w=!1,b=!1;const S=new DM({Yo:T=>{b?ge(rn,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(w||(ge(rn,`Opening RPC '${e}' stream ${i} transport.`),y.open(),w=!0),ge(rn,`RPC '${e}' stream ${i} sending:`,T),y.send(T))},Zo:()=>y.close()}),k=(T,N,j)=>{T.listen(N,B=>{try{j(B)}catch(K){setTimeout(()=>{throw K},0)}})};return k(y,Cc.EventType.OPEN,()=>{b||(ge(rn,`RPC '${e}' stream ${i} transport opened.`),S.o_())}),k(y,Cc.EventType.CLOSE,()=>{b||(b=!0,ge(rn,`RPC '${e}' stream ${i} transport closed`),S.a_(),this.E_(y))}),k(y,Cc.EventType.ERROR,T=>{b||(b=!0,Ja(rn,`RPC '${e}' stream ${i} transport errored. Name:`,T.name,"Message:",T.message),S.a_(new fe(Z.UNAVAILABLE,"The operation could not be completed")))}),k(y,Cc.EventType.MESSAGE,T=>{if(!b){const N=T.data[0];Qe(!!N,16349);const j=N,B=j?.error||j[0]?.error;if(B){ge(rn,`RPC '${e}' stream ${i} received error:`,B);const K=B.status;let q=function(I){const P=At[I];if(P!==void 0)return _S(P)}(K),J=B.message;q===void 0&&(q=Z.INTERNAL,J="Unknown error status: "+K+" with message "+B.message),b=!0,S.a_(new fe(q,J)),y.close()}else ge(rn,`RPC '${e}' stream ${i} received:`,N),S.u_(N)}}),k(c,Nx.STAT_EVENT,T=>{T.stat===Eg.PROXY?ge(rn,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===Eg.NOPROXY&&ge(rn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.__()},0),S}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Bm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(n){return new V2(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ge("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="PersistentStream";class OS{constructor(e,t,r,i,o,l,c,h){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new DS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(Ni(t.toString()),Ni("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{const i=new fe(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ge(wE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(ge(wE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class MM extends OS{constructor(e,t,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=U2(this.serializer,e),r=function(o){if(!("targetChange"in o))return De.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?De.min():l.readTime?ti(l.readTime):De.min()}(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Rg(this.serializer),t.addTarget=function(o,l){let c;const h=l.target;if(c=Ig(h)?{documents:$2(o,h)}:{query:H2(o,h).ft},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=ES(o,l.resumeToken);const d=Cg(o,l.expectedCount);d!==null&&(c.expectedCount=d)}else if(l.snapshotVersion.compareTo(De.min())>0){c.readTime=Yd(o,l.snapshotVersion.toTimestamp());const d=Cg(o,l.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=q2(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Rg(this.serializer),t.removeTarget=e,this.q_(t)}}class NM extends OS{constructor(e,t,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=B2(e.writeResults,e.commitTime),r=ti(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Rg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>z2(this.serializer,r))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{}class VM extends LM{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new fe(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Go(e,Pg(t,r),i,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new fe(Z.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Ho(e,Pg(t,r),i,l,c,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(Z.UNKNOWN,l.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class FM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ni(t),this.aa=!1):ge("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo="RemoteStore";class jM{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(l=>{r.enqueueAndForget(async()=>{Wo(this)&&(ge(Lo,"Restarting streams for network reachability change."),await async function(h){const d=Oe(h);d.Ea.add(4),await Eu(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Of(d)}(this))})}),this.Ra=new FM(r,i)}}async function Of(n){if(Wo(n))for(const e of n.da)await e(!0)}async function Eu(n){for(const e of n.da)await e(!1)}function MS(n,e){const t=Oe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Fy(t)?Vy(t):_l(t).O_()&&Ly(t,e))}function Ny(n,e){const t=Oe(n),r=_l(t);t.Ia.delete(e),r.O_()&&NS(t,e),t.Ia.size===0&&(r.O_()?r.L_():Wo(t)&&t.Ra.set("Unknown"))}function Ly(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_l(n).Y_(e)}function NS(n,e){n.Va.Ue(e),_l(n).Z_(e)}function Vy(n){n.Va=new O2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),_l(n).start(),n.Ra.ua()}function Fy(n){return Wo(n)&&!_l(n).x_()&&n.Ia.size>0}function Wo(n){return Oe(n).Ea.size===0}function LS(n){n.Va=void 0}async function UM(n){n.Ra.set("Online")}async function zM(n){n.Ia.forEach((e,t)=>{Ly(n,e)})}async function BM(n,e){LS(n),Fy(n)?(n.Ra.ha(e),Vy(n)):n.Ra.set("Unknown")}async function $M(n,e,t){if(n.Ra.set("Online"),e instanceof wS&&e.state===2&&e.cause)try{await async function(i,o){const l=o.cause;for(const c of o.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,l),i.Ia.delete(c),i.Va.removeTarget(c))}(n,e)}catch(r){ge(Lo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xd(n,r)}else if(e instanceof Id?n.Va.Ze(e):e instanceof vS?n.Va.st(e):n.Va.tt(e),!t.isEqual(De.min()))try{const r=await RS(n.localStore);t.compareTo(r)>=0&&await function(o,l){const c=o.Va.Tt(l);return c.targetChanges.forEach((h,d)=>{if(h.resumeToken.approximateByteSize()>0){const m=o.Ia.get(d);m&&o.Ia.set(d,m.withResumeToken(h.resumeToken,l))}}),c.targetMismatches.forEach((h,d)=>{const m=o.Ia.get(h);if(!m)return;o.Ia.set(h,m.withResumeToken(Jt.EMPTY_BYTE_STRING,m.snapshotVersion)),NS(o,h);const y=new vs(m.target,h,d,m.sequenceNumber);Ly(o,y)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t)}catch(r){ge(Lo,"Failed to raise snapshot:",r),await Xd(n,r)}}async function Xd(n,e,t){if(!gl(e))throw e;n.Ea.add(1),await Eu(n),n.Ra.set("Offline"),t||(t=()=>RS(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ge(Lo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Of(n)})}function VS(n,e){return e().catch(t=>Xd(n,t,e))}async function Mf(n){const e=Oe(n),t=Os(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ey;for(;HM(e);)try{const i=await SM(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,WM(e,i)}catch(i){await Xd(e,i)}FS(e)&&jS(e)}function HM(n){return Wo(n)&&n.Ta.length<10}function WM(n,e){n.Ta.push(e);const t=Os(n);t.O_()&&t.X_&&t.ea(e.mutations)}function FS(n){return Wo(n)&&!Os(n).x_()&&n.Ta.length>0}function jS(n){Os(n).start()}async function qM(n){Os(n).ra()}async function GM(n){const e=Os(n);for(const t of n.Ta)e.ea(t.mutations)}async function KM(n,e,t){const r=n.Ta.shift(),i=Cy.from(r,e,t);await VS(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Mf(n)}async function YM(n,e){e&&Os(n).X_&&await async function(r,i){if(function(l){return A2(l)&&l!==Z.ABORTED}(i.code)){const o=r.Ta.shift();Os(r).B_(),await VS(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Mf(r)}}(n,e),FS(n)&&jS(n)}async function EE(n,e){const t=Oe(n);t.asyncQueue.verifyOperationInProgress(),ge(Lo,"RemoteStore received new credentials");const r=Wo(t);t.Ea.add(3),await Eu(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Of(t)}async function QM(n,e){const t=Oe(n);e?(t.Ea.delete(2),await Of(t)):e||(t.Ea.add(2),await Eu(t),t.Ra.set("Unknown"))}function _l(n){return n.ma||(n.ma=function(t,r,i){const o=Oe(t);return o.sa(),new MM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:UM.bind(null,n),t_:zM.bind(null,n),r_:BM.bind(null,n),H_:$M.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),Fy(n)?Vy(n):n.Ra.set("Unknown")):(await n.ma.stop(),LS(n))})),n.ma}function Os(n){return n.fa||(n.fa=function(t,r,i){const o=Oe(t);return o.sa(),new NM(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:qM.bind(null,n),r_:YM.bind(null,n),ta:GM.bind(null,n),na:KM.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await Mf(n)):(await n.fa.stop(),n.Ta.length>0&&(ge(Lo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const l=Date.now()+r,c=new jy(e,t,l,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Uy(n,e){if(Ni("AsyncQueue",`${e}: ${n}`),gl(n))return new fe(Z.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{static emptySet(e){return new Ya(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||xe.comparator(t.key,r.key):(t,r)=>xe.comparator(t.key,r.key),this.keyedMap=Pc(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ya)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ya;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(){this.ga=new mt(xe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Pe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}}class rl{constructor(e,t,r,i,o,l,c,h,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,o){const l=[];return t.forEach(c=>{l.push({type:0,doc:c})}),new rl(e,t,Ya.emptySet(t),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class JM{constructor(){this.queries=bE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Oe(t),o=i.queries;i.queries=bE(),o.forEach((l,c)=>{for(const h of c.Sa)h.onError(r)})})(this,new fe(Z.ABORTED,"Firestore shutting down"))}}function bE(){return new Ho(n=>sS(n),kf)}async function US(n,e){const t=Oe(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new XM,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const c=Uy(l,`Initialization of query '${Ba(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&zy(t)}async function zS(n,e){const t=Oe(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function ZM(n,e){const t=Oe(n);let r=!1;for(const i of e){const o=i.query,l=t.queries.get(o);if(l){for(const c of l.Sa)c.Fa(i)&&(r=!0);l.wa=i}}r&&zy(t)}function eN(n,e,t){const r=Oe(n),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(t);r.queries.delete(e)}function zy(n){n.Ca.forEach(e=>{e.next()})}var Mg,xE;(xE=Mg||(Mg={})).Ma="default",xE.Cache="cache";class BS{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new rl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=rl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Mg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e){this.key=e}}class HS{constructor(e){this.key=e}}class tN{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=oS(e),this.tu=new Ya(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new TE,i=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=i,c=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((m,y)=>{const w=i.get(m),b=Cf(this.query,y)?y:null,S=!!w&&this.mutatedKeys.has(w.key),k=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let T=!1;w&&b?w.data.isEqual(b.data)?S!==k&&(r.track({type:3,doc:b}),T=!0):this.su(w,b)||(r.track({type:2,doc:b}),T=!0,(h&&this.eu(b,h)>0||d&&this.eu(b,d)<0)&&(c=!0)):!w&&b?(r.track({type:0,doc:b}),T=!0):w&&!b&&(r.track({type:1,doc:w}),T=!0,(h||d)&&(c=!0)),T&&(b?(l=l.add(b),o=k?o.add(m):o.delete(m)):(l=l.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{tu:l,iu:r,Cs:c,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort((m,y)=>function(b,S){const k=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe(20277,{Rt:T})}};return k(b)-k(S)}(m.type,y.type)||this.eu(m.doc,y.doc)),this.ou(r),i=i??!1;const c=t&&!i?this._u():[],h=this.Xa.size===0&&this.current&&!i?1:0,d=h!==this.Za;return this.Za=h,l.length!==0||d?{snapshot:new rl(this.query,e.tu,o,l,e.mutatedKeys,h===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new TE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new HS(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new $S(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return rl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const By="SyncEngine";class nN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class rN{constructor(e){this.key=e,this.hu=!1}}class iN{constructor(e,t,r,i,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Ho(c=>sS(c),kf),this.Iu=new Map,this.Eu=new Set,this.du=new mt(xe.comparator),this.Au=new Map,this.Ru=new Ry,this.Vu={},this.mu=new Map,this.fu=nl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function sN(n,e,t=!0){const r=QS(n);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await WS(r,e,t,!0),i}async function oN(n,e){const t=QS(n);await WS(t,e,!0,!1)}async function WS(n,e,t,r){const i=await IM(n.localStore,Zr(e)),o=i.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let c;return r&&(c=await aN(n,e,o,l==="current",i.resumeToken)),n.isPrimaryClient&&t&&MS(n.remoteStore,i),c}async function aN(n,e,t,r,i){n.pu=(y,w,b)=>async function(k,T,N,j){let B=T.view.ru(N);B.Cs&&(B=await gE(k.localStore,T.query,!1).then(({documents:R})=>T.view.ru(R,B)));const K=j&&j.targetChanges.get(T.targetId),q=j&&j.targetMismatches.get(T.targetId)!=null,J=T.view.applyChanges(B,k.isPrimaryClient,K,q);return IE(k,T.targetId,J.au),J.snapshot}(n,y,w,b);const o=await gE(n.localStore,e,!0),l=new tN(e,o.Qs),c=l.ru(o.documents),h=wu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=l.applyChanges(c,n.isPrimaryClient,h);IE(n,t,d.au);const m=new nN(e,t,l);return n.Tu.set(e,m),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot}async function lN(n,e,t){const r=Oe(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(l=>!kf(l,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Dg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ny(r.remoteStore,i.targetId),Ng(r,i.targetId)}).catch(ml)):(Ng(r,i.targetId),await Dg(r.localStore,i.targetId,!0))}async function cN(n,e){const t=Oe(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ny(t.remoteStore,r.targetId))}async function uN(n,e,t){const r=yN(n);try{const i=await function(l,c){const h=Oe(l),d=lt.now(),m=c.reduce((b,S)=>b.add(S.key),ze());let y,w;return h.persistence.runTransaction("Locally write mutations","readwrite",b=>{let S=Vi(),k=ze();return h.Ns.getEntries(b,m).next(T=>{S=T,S.forEach((N,j)=>{j.isValidDocument()||(k=k.add(N))})}).next(()=>h.localDocuments.getOverlayedDocuments(b,S)).next(T=>{y=T;const N=[];for(const j of c){const B=S2(j,y.get(j.key).overlayedDocument);B!=null&&N.push(new zs(j.key,B,Xx(B.value.mapValue),ei.exists(!0)))}return h.mutationQueue.addMutationBatch(b,d,N,c)}).next(T=>{w=T;const N=T.applyToLocalDocumentSet(y,k);return h.documentOverlayCache.saveOverlays(b,T.batchId,N)})}).then(()=>({batchId:w.batchId,changes:lS(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,c,h){let d=l.Vu[l.currentUser.toKey()];d||(d=new mt(Ue)),d=d.insert(c,h),l.Vu[l.currentUser.toKey()]=d}(r,i.batchId,t),await Tu(r,i.changes),await Mf(r.remoteStore)}catch(i){const o=Uy(i,"Failed to persist write");t.reject(o)}}async function qS(n,e){const t=Oe(n);try{const r=await bM(t.localStore,e);e.targetChanges.forEach((i,o)=>{const l=t.Au.get(o);l&&(Qe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.hu=!0:i.modifiedDocuments.size>0?Qe(l.hu,14607):i.removedDocuments.size>0&&(Qe(l.hu,42227),l.hu=!1))}),await Tu(t,r,e)}catch(r){await ml(r)}}function SE(n,e,t){const r=Oe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach((o,l)=>{const c=l.view.va(e);c.snapshot&&i.push(c.snapshot)}),function(l,c){const h=Oe(l);h.onlineState=c;let d=!1;h.queries.forEach((m,y)=>{for(const w of y.Sa)w.va(c)&&(d=!0)}),d&&zy(h)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function hN(n,e,t){const r=Oe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),o=i&&i.key;if(o){let l=new mt(xe.comparator);l=l.insert(o,on.newNoDocument(o,De.min()));const c=ze().add(o),h=new Rf(De.min(),new Map,new mt(Ue),l,c);await qS(r,h),r.du=r.du.remove(o),r.Au.delete(e),$y(r)}else await Dg(r.localStore,e,!1).then(()=>Ng(r,e,t)).catch(ml)}async function dN(n,e){const t=Oe(n),r=e.batch.batchId;try{const i=await TM(t.localStore,e);KS(t,r,null),GS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Tu(t,i)}catch(i){await ml(i)}}async function fN(n,e,t){const r=Oe(n);try{const i=await function(l,c){const h=Oe(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return h.mutationQueue.lookupMutationBatch(d,c).next(y=>(Qe(y!==null,37113),m=y.keys(),h.mutationQueue.removeMutationBatch(d,y))).next(()=>h.mutationQueue.performConsistencyCheck(d)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(d,m,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>h.localDocuments.getDocuments(d,m))})}(r.localStore,e);KS(r,e,t),GS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Tu(r,i)}catch(i){await ml(i)}}function GS(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function KS(n,e,t){const r=Oe(n);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Ng(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||YS(n,r)})}function YS(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Ny(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),$y(n))}function IE(n,e,t){for(const r of t)r instanceof $S?(n.Ru.addReference(r.key,e),pN(n,r)):r instanceof HS?(ge(By,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||YS(n,r.key)):Pe(19791,{wu:r})}function pN(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ge(By,"New document in limbo: "+t),n.Eu.add(r),$y(n))}function $y(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new xe(rt.fromString(e)),r=n.fu.next();n.Au.set(r,new rN(t)),n.du=n.du.insert(t,r),MS(n.remoteStore,new vs(Zr(Iy(t.path)),r,"TargetPurposeLimboResolution",xf.ce))}}async function Tu(n,e,t){const r=Oe(n),i=[],o=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach((c,h)=>{l.push(r.pu(h,e,t).then(d=>{if((d||t)&&r.isPrimaryClient){const m=d?!d.fromCache:t?.targetChanges.get(h.targetId)?.current;r.sharedClientState.updateQueryState(h.targetId,m?"current":"not-current")}if(d){i.push(d);const m=Oy.As(h.targetId,d);o.push(m)}}))}),await Promise.all(l),r.Pu.H_(i),await async function(h,d){const m=Oe(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>te.forEach(d,w=>te.forEach(w.Es,b=>m.persistence.referenceDelegate.addReference(y,w.targetId,b)).next(()=>te.forEach(w.ds,b=>m.persistence.referenceDelegate.removeReference(y,w.targetId,b)))))}catch(y){if(!gl(y))throw y;ge(My,"Failed to update sequence numbers: "+y)}for(const y of d){const w=y.targetId;if(!y.fromCache){const b=m.Ms.get(w),S=b.snapshotVersion,k=b.withLastLimboFreeSnapshotVersion(S);m.Ms=m.Ms.insert(w,k)}}}(r.localStore,o))}async function mN(n,e){const t=Oe(n);if(!t.currentUser.isEqual(e)){ge(By,"User change. New user:",e.toKey());const r=await AS(t.localStore,e);t.currentUser=e,function(o,l){o.mu.forEach(c=>{c.forEach(h=>{h.reject(new fe(Z.CANCELLED,l))})}),o.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Tu(t,r.Ls)}}function gN(n,e){const t=Oe(n),r=t.Au.get(e);if(r&&r.hu)return ze().add(r.key);{let i=ze();const o=t.Iu.get(e);if(!o)return i;for(const l of o){const c=t.Tu.get(l);i=i.unionWith(c.view.nu)}return i}}function QS(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=qS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hN.bind(null,e),e.Pu.H_=ZM.bind(null,e.eventManager),e.Pu.yu=eN.bind(null,e.eventManager),e}function yN(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fN.bind(null,e),e}class Jd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Df(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return EM(this.persistence,new _M,e.initialUser,this.serializer)}Cu(e){return new PS(Dy.mi,this.serializer)}Du(e){return new CM}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jd.provider={build:()=>new Jd};class _N extends Jd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Qe(this.persistence.referenceDelegate instanceof Qd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new rM(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?kn.withCacheSize(this.cacheSizeBytes):kn.DEFAULT;return new PS(r=>Qd.mi(r,t),this.serializer)}}class Lg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>SE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=mN.bind(null,this.syncEngine),await QM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new JM}()}createDatastore(e){const t=Df(e.databaseInfo.databaseId),r=function(o){return new OM(o)}(e.databaseInfo);return function(o,l,c,h){return new VM(o,l,c,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,l,c){return new jM(r,i,o,l,c)}(this.localStore,this.datastore,e.asyncQueue,t=>SE(this.syncEngine,t,0),function(){return vE.v()?new vE:new PM}())}createSyncEngine(e,t){return function(i,o,l,c,h,d,m){const y=new iN(i,o,l,c,h,d);return m&&(y.gu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(t){const r=Oe(t);ge(Lo,"RemoteStore shutting down."),r.Ea.add(5),await Eu(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Lg.provider={build:()=>new Lg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ni("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms="FirestoreClient";class vN{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=sn.UNAUTHENTICATED,this.clientId=wy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{ge(Ms,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(ge(Ms,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Uy(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $m(n,e){n.asyncQueue.verifyOperationInProgress(),ge(Ms,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await AS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function kE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await wN(n);ge(Ms,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>EE(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>EE(e.remoteStore,i)),n._onlineComponents=e}async function wN(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge(Ms,"Using user provided OfflineComponentProvider");try{await $m(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===Z.FAILED_PRECONDITION||i.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Ja("Error using user provided cache. Falling back to memory cache: "+t),await $m(n,new Jd)}}else ge(Ms,"Using default OfflineComponentProvider"),await $m(n,new _N(void 0));return n._offlineComponents}async function JS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge(Ms,"Using user provided OnlineComponentProvider"),await kE(n,n._uninitializedComponentsProvider._online)):(ge(Ms,"Using default OnlineComponentProvider"),await kE(n,new Lg))),n._onlineComponents}function EN(n){return JS(n).then(e=>e.syncEngine)}async function ZS(n){const e=await JS(n),t=e.eventManager;return t.onListen=sN.bind(null,e.syncEngine),t.onUnlisten=lN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=oN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=cN.bind(null,e.syncEngine),t}function TN(n,e,t={}){const r=new Di;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,c,h,d){const m=new XS({next:w=>{m.Nu(),l.enqueueAndForget(()=>zS(o,y));const b=w.docs.has(c);!b&&w.fromCache?d.reject(new fe(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&w.fromCache&&h&&h.source==="server"?d.reject(new fe(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(w)},error:w=>d.reject(w)}),y=new BS(Iy(c.path),m,{includeMetadataChanges:!0,qa:!0});return US(o,y)}(await ZS(n),n.asyncQueue,e,t,r)),r.promise}function bN(n,e,t={}){const r=new Di;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,c,h,d){const m=new XS({next:w=>{m.Nu(),l.enqueueAndForget(()=>zS(o,y)),w.fromCache&&h.source==="server"?d.reject(new fe(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(w)},error:w=>d.reject(w)}),y=new BS(c,m,{includeMetadataChanges:!0,qa:!0});return US(o,y)}(await ZS(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="firestore.googleapis.com",PE=!0;class AE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new fe(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=t1,this.ssl=PE}else this.host=e.host,this.ssl=e.ssl??PE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=CS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<tM)throw new fe(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=e1(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nf{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new AE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new AE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new CO;switch(r.type){case"firstParty":return new DO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=CE.get(t);r&&(ge("ComponentProvider","Removing Datastore"),CE.delete(t),r.terminate())}(this),Promise.resolve()}}function xN(n,e,t,r={}){n=Li(n,Nf);const i=hl(e),o=n._getSettings(),l={...o,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;i&&(zb(`https://${c}`),Bb("Firestore",!0)),o.host!==t1&&o.host!==c&&Ja("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:c,ssl:i,emulatorOptions:r};if(!Cs(h,l)&&(n._setSettings(h),r.mockUserToken)){let d,m;if(typeof r.mockUserToken=="string")d=r.mockUserToken,m=sn.MOCK_USER;else{d=zP(r.mockUserToken,n._app?.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new fe(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new sn(y)}n._authCredentials=new PO(new jx(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bs(this.firestore,e,this._query)}}class bt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bt(this.firestore,e,this._key)}toJSON(){return{type:bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(_u(t,bt._jsonSchema))return new bt(e,r||null,new xe(rt.fromString(t.referencePath)))}}bt._jsonSchemaVersion="firestore/documentReference/1.0",bt._jsonSchema={type:Dt("string",bt._jsonSchemaVersion),referencePath:Dt("string")};class Is extends Bs{constructor(e,t,r){super(e,t,Iy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new xe(e))}withConverter(e){return new Is(this.firestore,e,this._path)}}function Hy(n,e,...t){if(n=Ot(n),Ux("collection","path",e),n instanceof Nf){const r=rt.fromString(e,...t);return $w(r),new Is(n,null,r)}{if(!(n instanceof bt||n instanceof Is))throw new fe(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(rt.fromString(e,...t));return $w(r),new Is(n.firestore,null,r)}}function Fi(n,e,...t){if(n=Ot(n),arguments.length===1&&(e=wy.newId()),Ux("doc","path",e),n instanceof Nf){const r=rt.fromString(e,...t);return Bw(r),new bt(n,null,new xe(r))}{if(!(n instanceof bt||n instanceof Is))throw new fe(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(rt.fromString(e,...t));return Bw(r),new bt(n.firestore,n instanceof Is?n.converter:null,new xe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE="AsyncQueue";class DE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new DS(this,"async_queue_retry"),this._c=()=>{const r=Bm();r&&ge(RE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Bm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Bm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Di;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!gl(e))throw e;ge(RE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Ni("INTERNAL UNHANDLED ERROR: ",OE(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=jy.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&Pe(47125,{Pc:OE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function OE(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class bu extends Nf{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new DE,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new DE(e),this._firestoreClient=void 0,await e}}}function SN(n,e){const t=typeof n=="object"?n:cy(),r=typeof n=="string"?n:$d,i=Bo(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=jP("firestore");o&&xN(i,...o)}return i}function Wy(n){if(n._terminated)throw new fe(Z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||IN(n),n._firestoreClient}function IN(n){const e=n._freezeSettings(),t=function(i,o,l,c){return new QO(i,o,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,e1(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new vN(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&function(i){const o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ir(Jt.fromBase64String(e))}catch(t){throw new fe(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ir(Jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ir._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_u(e,ir._jsonSchema))return ir.fromBase64String(e.bytes)}}ir._jsonSchemaVersion="firestore/bytes/1.0",ir._jsonSchema={type:Dt("string",ir._jsonSchemaVersion),bytes:Dt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ni._jsonSchemaVersion}}static fromJSON(e){if(_u(e,ni._jsonSchema))return new ni(e.latitude,e.longitude)}}ni._jsonSchemaVersion="firestore/geoPoint/1.0",ni._jsonSchema={type:Dt("string",ni._jsonSchemaVersion),latitude:Dt("number"),longitude:Dt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ri._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_u(e,ri._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new ri(e.vectorValues);throw new fe(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ri._jsonSchemaVersion="firestore/vectorValue/1.0",ri._jsonSchema={type:Dt("string",ri._jsonSchemaVersion),vectorValues:Dt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=/^__.*__$/;class CN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new zs(e,this.data,this.fieldMask,t,this.fieldTransforms):new vu(e,this.data,t,this.fieldTransforms)}}class n1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new zs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function r1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe(40011,{Ac:n})}}class Gy{constructor(e,t,r,i,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Gy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Zd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(r1(this.Ac)&&kN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class PN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Df(e)}Cc(e,t,r,i=!1){return new Gy({Ac:e,methodName:t,Dc:r,path:Qt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ky(n){const e=n._freezeSettings(),t=Df(n._databaseId);return new PN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function AN(n,e,t,r,i,o={}){const l=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);Yy("Data must be an object, but it was:",l,r);const c=i1(r,l);let h,d;if(o.merge)h=new Hn(l.fieldMask),d=l.fieldTransforms;else if(o.mergeFields){const m=[];for(const y of o.mergeFields){const w=Vg(e,y,t);if(!l.contains(w))throw new fe(Z.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);o1(m,w)||m.push(w)}h=new Hn(m),d=l.fieldTransforms.filter(y=>h.covers(y.field))}else h=null,d=l.fieldTransforms;return new CN(new Cn(c),h,d)}class Vf extends qy{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vf}}function RN(n,e,t,r){const i=n.Cc(1,e,t);Yy("Data must be an object, but it was:",i,r);const o=[],l=Cn.empty();Us(r,(h,d)=>{const m=Qy(e,h,t);d=Ot(d);const y=i.yc(m);if(d instanceof Vf)o.push(m);else{const w=xu(d,y);w!=null&&(o.push(m),l.set(m,w))}});const c=new Hn(o);return new n1(l,c,i.fieldTransforms)}function DN(n,e,t,r,i,o){const l=n.Cc(1,e,t),c=[Vg(e,r,t)],h=[i];if(o.length%2!=0)throw new fe(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)c.push(Vg(e,o[w])),h.push(o[w+1]);const d=[],m=Cn.empty();for(let w=c.length-1;w>=0;--w)if(!o1(d,c[w])){const b=c[w];let S=h[w];S=Ot(S);const k=l.yc(b);if(S instanceof Vf)d.push(b);else{const T=xu(S,k);T!=null&&(d.push(b),m.set(b,T))}}const y=new Hn(d);return new n1(m,y,l.fieldTransforms)}function ON(n,e,t,r=!1){return xu(t,n.Cc(r?4:3,e))}function xu(n,e){if(s1(n=Ot(n)))return Yy("Unsupported field value:",e,n),i1(n,e);if(n instanceof qy)return function(r,i){if(!r1(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const o=[];let l=0;for(const c of r){let h=xu(c,i.wc(l));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),l++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Ot(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return v2(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=lt.fromDate(r);return{timestampValue:Yd(i.serializer,o)}}if(r instanceof lt){const o=new lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yd(i.serializer,o)}}if(r instanceof ni)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ir)return{bytesValue:ES(i.serializer,r._byteString)};if(r instanceof bt){const o=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw i.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ay(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ri)return function(l,c){return{mapValue:{fields:{[Yx]:{stringValue:Qx},[Hd]:{arrayValue:{values:l.toArray().map(d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return ky(c.serializer,d)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${bf(r)}`)}(n,e)}function i1(n,e){const t={};return $x(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Us(n,(r,i)=>{const o=xu(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function s1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof lt||n instanceof ni||n instanceof ir||n instanceof bt||n instanceof qy||n instanceof ri)}function Yy(n,e,t){if(!s1(t)||!zx(t)){const r=bf(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function Vg(n,e,t){if((e=Ot(e))instanceof Lf)return e._internalPath;if(typeof e=="string")return Qy(n,e);throw Zd("Field path arguments must be of type string or ",n,!1,void 0,t)}const MN=new RegExp("[~\\*/\\[\\]]");function Qy(n,e,t){if(e.search(MN)>=0)throw Zd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Lf(...e.split("."))._internalPath}catch{throw Zd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Zd(n,e,t,r,i){const o=r&&!r.isEmpty(),l=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${r}`),l&&(h+=` in document ${i}`),h+=")"),new fe(Z.INVALID_ARGUMENT,c+n+h)}function o1(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new NN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Xy("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class NN extends a1{data(){return super.data()}}function Xy(n,e){return typeof e=="string"?Qy(n,e):e instanceof Lf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new fe(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jy{}class Zy extends Jy{}function VN(n,e,...t){let r=[];e instanceof Jy&&r.push(e),r=r.concat(t),function(o){const l=o.filter(h=>h instanceof t_).length,c=o.filter(h=>h instanceof e_).length;if(l>1||l>0&&c>0)throw new fe(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class e_ extends Zy{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new e_(e,t,r)}_apply(e){const t=this._parse(e);return l1(e._query,t),new Bs(e.firestore,e.converter,kg(e._query,t))}_parse(e){const t=Ky(e.firestore);return function(o,l,c,h,d,m,y){let w;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new fe(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){NE(y,m);const S=[];for(const k of y)S.push(ME(h,o,k));w={arrayValue:{values:S}}}else w=ME(h,o,y)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||NE(y,m),w=ON(c,l,y,m==="in"||m==="not-in");return Rt.create(d,m,w)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class t_ extends Jy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new t_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Cr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let l=i;const c=o.getFlattenedFilters();for(const h of c)l1(l,h),l=kg(l,h)}(e._query,t),new Bs(e.firestore,e.converter,kg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class n_ extends Zy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n_(e,t)}_apply(e){const t=function(i,o,l){if(i.startAt!==null)throw new fe(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new fe(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new iu(o,l)}(e._query,this._field,this._direction);return new Bs(e.firestore,e.converter,function(i,o){const l=i.explicitOrderBy.concat([o]);return new yl(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function FN(n,e="asc"){const t=e,r=Xy("orderBy",n);return n_._create(r,t)}class r_ extends Zy{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new r_(e,t,r)}_apply(e){return new Bs(e.firestore,e.converter,qd(e._query,this._limit,this._limitType))}}function jN(n){return jO("limit",n),r_._create("limit",n,"F")}function ME(n,e,t){if(typeof(t=Ot(t))=="string"){if(t==="")throw new fe(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iS(e)&&t.indexOf("/")!==-1)throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(rt.fromString(t));if(!xe.isDocumentKey(r))throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xw(n,new xe(r))}if(t instanceof bt)return Xw(n,t._key);throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bf(t)}.`)}function NE(n,e){if(!Array.isArray(n)||n.length===0)throw new fe(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function l1(n,e){const t=function(i,o){for(const l of i)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new fe(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class UN{convertValue(e,t="none"){switch(Ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Us(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){const t=e.fields?.[Hd].arrayValue?.values?.map(r=>Tt(r.doubleValue));return new ri(t)}convertGeoPoint(e){return new ni(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=If(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(tu(e));default:return null}}convertTimestamp(e){const t=As(e);return new lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=rt.fromString(e);Qe(kS(r),9688,{name:e});const i=new nu(r.get(1),r.get(3)),o=new xe(r.popFirst(5));return i.isEqual(t)||Ni(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Rc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ao extends a1{constructor(e,t,r,i,o,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new kd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Xy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ao._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ao._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ao._jsonSchema={type:Dt("string",Ao._jsonSchemaVersion),bundleSource:Dt("string","DocumentSnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class kd extends Ao{data(e={}){return super.data(e)}}class Qa{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Rc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new kd(this._firestore,this._userDataWriter,r.key,r,new Rc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(c=>{const h=new kd(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Rc(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const h=new kd(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Rc(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,m=-1;return c.type!==0&&(d=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),m=l.indexOf(c.doc.key)),{type:BN(c.type),doc:h,oldIndex:d,newIndex:m}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Qa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=wy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function BN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(n){n=Li(n,bt);const e=Li(n.firestore,bu);return TN(Wy(e),n._key).then(t=>HN(e,n,t))}Qa._jsonSchemaVersion="firestore/querySnapshot/1.0",Qa._jsonSchema={type:Dt("string",Qa._jsonSchemaVersion),bundleSource:Dt("string","QuerySnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class c1 extends UN{constructor(e){super(),this.firestore=e}convertBytes(e){return new ir(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,t)}}function i_(n){n=Li(n,Bs);const e=Li(n.firestore,bu),t=Wy(e),r=new c1(e);return LN(n._query),bN(t,n._query).then(i=>new Qa(e,r,n,i))}function s_(n,e,t){n=Li(n,bt);const r=Li(n.firestore,bu),i=zN(n.converter,e,t);return u1(r,[AN(Ky(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ei.none())])}function $N(n,e,t,...r){n=Li(n,bt);const i=Li(n.firestore,bu),o=Ky(i);let l;return l=typeof(e=Ot(e))=="string"||e instanceof Lf?DN(o,"updateDoc",n._key,e,t,r):RN(o,"updateDoc",n._key,e),u1(i,[l.toMutation(n._key,ei.exists(!0))])}function u1(n,e){return function(r,i){const o=new Di;return r.asyncQueue.enqueueAndForget(async()=>uN(await EN(r),i,o)),o.promise}(Wy(n),e)}function HN(n,e,t){const r=t.docs.get(e._key),i=new c1(n);return new Ao(n,i,e._key,r,new Rc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){pl=i})(dl),si(new Ir("firestore",(r,{instanceIdentifier:i,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new bu(new AO(r.getProvider("auth-internal")),new OO(l,r.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new fe(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nu(d.options.projectId,m)}(l,i),l);return o={useFetchStreams:t,...o},c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),sr(Fw,jw,e),sr(Fw,jw,"esm2020")})();var WN="firebase",qN="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sr(WN,qN,"app");const h1="@firebase/installations",o_="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=1e4,f1=`w:${o_}`,p1="FIS_v2",GN="https://firebaseinstallations.googleapis.com/v1",KN=3600*1e3,YN="installations",QN="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Vo=new zo(YN,QN,XN);function m1(n){return n instanceof Ar&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1({projectId:n}){return`${GN}/projects/${n}/installations`}function y1(n){return{token:n.token,requestStatus:2,expiresIn:ZN(n.expiresIn),creationTime:Date.now()}}async function _1(n,e){const r=(await e.json()).error;return Vo.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function v1({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function JN(n,{refreshToken:e}){const t=v1(n);return t.append("Authorization",eL(e)),t}async function w1(n){const e=await n();return e.status>=500&&e.status<600?n():e}function ZN(n){return Number(n.replace("s","000"))}function eL(n){return`${p1} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tL({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=g1(n),i=v1(n),o=e.getImmediate({optional:!0});if(o){const d=await o.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const l={fid:t,authVersion:p1,appId:n.appId,sdkVersion:f1},c={method:"POST",headers:i,body:JSON.stringify(l)},h=await w1(()=>fetch(r,c));if(h.ok){const d=await h.json();return{fid:d.fid||t,registrationStatus:2,refreshToken:d.refreshToken,authToken:y1(d.authToken)}}else throw await _1("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nL(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=/^[cdef][\w-]{21}$/,Fg="";function iL(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=sL(n);return rL.test(t)?t:Fg}catch{return Fg}}function sL(n){return nL(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=new Map;function b1(n,e){const t=Ff(n);x1(t,e),oL(t,e)}function x1(n,e){const t=T1.get(n);if(t)for(const r of t)r(e)}function oL(n,e){const t=aL();t&&t.postMessage({key:n,fid:e}),lL()}let Io=null;function aL(){return!Io&&"BroadcastChannel"in self&&(Io=new BroadcastChannel("[Firebase] FID Change"),Io.onmessage=n=>{x1(n.data.key,n.data.fid)}),Io}function lL(){T1.size===0&&Io&&(Io.close(),Io=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL="firebase-installations-database",uL=1,Fo="firebase-installations-store";let Hm=null;function a_(){return Hm||(Hm=Kb(cL,uL,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Fo)}}})),Hm}async function ef(n,e){const t=Ff(n),i=(await a_()).transaction(Fo,"readwrite"),o=i.objectStore(Fo),l=await o.get(t);return await o.put(e,t),await i.done,(!l||l.fid!==e.fid)&&b1(n,e.fid),e}async function S1(n){const e=Ff(n),r=(await a_()).transaction(Fo,"readwrite");await r.objectStore(Fo).delete(e),await r.done}async function jf(n,e){const t=Ff(n),i=(await a_()).transaction(Fo,"readwrite"),o=i.objectStore(Fo),l=await o.get(t),c=e(l);return c===void 0?await o.delete(t):await o.put(c,t),await i.done,c&&(!l||l.fid!==c.fid)&&b1(n,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l_(n){let e;const t=await jf(n.appConfig,r=>{const i=hL(r),o=dL(n,i);return e=o.registrationPromise,o.installationEntry});return t.fid===Fg?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function hL(n){const e=n||{fid:iL(),registrationStatus:0};return I1(e)}function dL(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Vo.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=fL(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:pL(n)}:{installationEntry:e}}async function fL(n,e){try{const t=await tL(n,e);return ef(n.appConfig,t)}catch(t){throw m1(t)&&t.customData.serverCode===409?await S1(n.appConfig):await ef(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function pL(n){let e=await LE(n.appConfig);for(;e.registrationStatus===1;)await E1(100),e=await LE(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await l_(n);return r||t}return e}function LE(n){return jf(n,e=>{if(!e)throw Vo.create("installation-not-found");return I1(e)})}function I1(n){return mL(n)?{fid:n.fid,registrationStatus:0}:n}function mL(n){return n.registrationStatus===1&&n.registrationTime+d1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gL({appConfig:n,heartbeatServiceProvider:e},t){const r=yL(n,t),i=JN(n,t),o=e.getImmediate({optional:!0});if(o){const d=await o.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const l={installation:{sdkVersion:f1,appId:n.appId}},c={method:"POST",headers:i,body:JSON.stringify(l)},h=await w1(()=>fetch(r,c));if(h.ok){const d=await h.json();return y1(d)}else throw await _1("Generate Auth Token",h)}function yL(n,{fid:e}){return`${g1(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c_(n,e=!1){let t;const r=await jf(n.appConfig,o=>{if(!k1(o))throw Vo.create("not-registered");const l=o.authToken;if(!e&&wL(l))return o;if(l.requestStatus===1)return t=_L(n,e),o;{if(!navigator.onLine)throw Vo.create("app-offline");const c=TL(o);return t=vL(n,c),c}});return t?await t:r.authToken}async function _L(n,e){let t=await VE(n.appConfig);for(;t.authToken.requestStatus===1;)await E1(100),t=await VE(n.appConfig);const r=t.authToken;return r.requestStatus===0?c_(n,e):r}function VE(n){return jf(n,e=>{if(!k1(e))throw Vo.create("not-registered");const t=e.authToken;return bL(t)?{...e,authToken:{requestStatus:0}}:e})}async function vL(n,e){try{const t=await gL(n,e),r={...e,authToken:t};return await ef(n.appConfig,r),t}catch(t){if(m1(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await S1(n.appConfig);else{const r={...e,authToken:{requestStatus:0}};await ef(n.appConfig,r)}throw t}}function k1(n){return n!==void 0&&n.registrationStatus===2}function wL(n){return n.requestStatus===2&&!EL(n)}function EL(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+KN}function TL(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function bL(n){return n.requestStatus===1&&n.requestTime+d1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xL(n){const e=n,{installationEntry:t,registrationPromise:r}=await l_(e);return r?r.catch(console.error):c_(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SL(n,e=!1){const t=n;return await IL(t),(await c_(t,e)).token}async function IL(n){const{registrationPromise:e}=await l_(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kL(n){if(!n||!n.options)throw Wm("App Configuration");if(!n.name)throw Wm("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Wm(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Wm(n){return Vo.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1="installations",CL="installations-internal",PL=n=>{const e=n.getProvider("app").getImmediate(),t=kL(e),r=Bo(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},AL=n=>{const e=n.getProvider("app").getImmediate(),t=Bo(e,C1).getImmediate();return{getId:()=>xL(t),getToken:i=>SL(t,i)}};function RL(){si(new Ir(C1,PL,"PUBLIC")),si(new Ir(CL,AL,"PRIVATE"))}RL();sr(h1,o_);sr(h1,o_,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf="analytics",DL="firebase_id",OL="origin",ML=60*1e3,NL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",u_="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn=new vf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Wn=new zo("analytics","Analytics",LL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(n){if(!n.startsWith(u_)){const e=Wn.create("invalid-gtag-resource",{gtagURL:n});return Rn.warn(e.message),""}return n}function P1(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function FL(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function jL(n,e){const t=FL("firebase-js-sdk-policy",{createScriptURL:VL}),r=document.createElement("script"),i=`${u_}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function UL(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function zL(n,e,t,r,i,o){const l=r[i];try{if(l)await e[l];else{const h=(await P1(t)).find(d=>d.measurementId===i);h&&await e[h.appId]}}catch(c){Rn.error(c)}n("config",i,o)}async function BL(n,e,t,r,i){try{let o=[];if(i&&i.send_to){let l=i.send_to;Array.isArray(l)||(l=[l]);const c=await P1(t);for(const h of l){const d=c.find(y=>y.measurementId===h),m=d&&e[d.appId];if(m)o.push(m);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),n("event",r,i||{})}catch(o){Rn.error(o)}}function $L(n,e,t,r){async function i(o,...l){try{if(o==="event"){const[c,h]=l;await BL(n,e,t,c,h)}else if(o==="config"){const[c,h]=l;await zL(n,e,t,r,c,h)}else if(o==="consent"){const[c,h]=l;n("consent",c,h)}else if(o==="get"){const[c,h,d]=l;n("get",c,h,d)}else if(o==="set"){const[c]=l;n("set",c)}else n(o,...l)}catch(c){Rn.error(c)}}return i}function HL(n,e,t,r,i){let o=function(...l){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=$L(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}function WL(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(u_)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL=30,GL=1e3;class KL{constructor(e={},t=GL){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const A1=new KL;function YL(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function QL(n){const{appId:e,apiKey:t}=n,r={method:"GET",headers:YL(t)},i=NL.replace("{app-id}",e),o=await fetch(i,r);if(o.status!==200&&o.status!==304){let l="";try{const c=await o.json();c.error?.message&&(l=c.error.message)}catch{}throw Wn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function XL(n,e=A1,t){const{appId:r,apiKey:i,measurementId:o}=n.options;if(!r)throw Wn.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw Wn.create("no-api-key")}const l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new eV;return setTimeout(async()=>{c.abort()},ML),R1({appId:r,apiKey:i,measurementId:o},l,c,e)}async function R1(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=A1){const{appId:o,measurementId:l}=n;try{await JL(r,e)}catch(c){if(l)return Rn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:o,measurementId:l};throw c}try{const c=await QL(n);return i.deleteThrottleMetadata(o),c}catch(c){const h=c;if(!ZL(h)){if(i.deleteThrottleMetadata(o),l)return Rn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:o,measurementId:l};throw c}const d=Number(h?.customData?.httpStatus)===503?cw(t,i.intervalMillis,qL):cw(t,i.intervalMillis),m={throttleEndTimeMillis:Date.now()+d,backoffCount:t+1};return i.setThrottleMetadata(o,m),Rn.debug(`Calling attemptFetch again in ${d} millis`),R1(n,m,r,i)}}function JL(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(Wn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function ZL(n){if(!(n instanceof Ar)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class eV{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function tV(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const o=await e,l={...r,send_to:o};n("event",t,l)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nV(){if(Hb())try{await Wb()}catch(n){return Rn.warn(Wn.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return Rn.warn(Wn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function rV(n,e,t,r,i,o,l){const c=XL(n);c.then(w=>{t[w.measurementId]=w.appId,n.options.measurementId&&w.measurementId!==n.options.measurementId&&Rn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${w.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(w=>Rn.error(w)),e.push(c);const h=nV().then(w=>{if(w)return r.getId()}),[d,m]=await Promise.all([c,h]);WL(o)||jL(o,d.measurementId),i("js",new Date);const y=l?.config??{};return y[OL]="firebase",y.update=!0,m!=null&&(y[DL]=m),i("config",d.measurementId,y),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e){this.app=e}_delete(){return delete Bc[this.app.options.appId],Promise.resolve()}}let Bc={},FE=[];const jE={};let qm="dataLayer",sV="gtag",UE,D1,zE=!1;function oV(){const n=[];if($b()&&n.push("This is a browser extension environment."),QP()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Wn.create("invalid-analytics-context",{errorInfo:e});Rn.warn(t.message)}}function aV(n,e,t){oV();const r=n.options.appId;if(!r)throw Wn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Rn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Wn.create("no-api-key");if(Bc[r]!=null)throw Wn.create("already-exists",{id:r});if(!zE){UL(qm);const{wrappedGtag:o,gtagCore:l}=HL(Bc,FE,jE,qm,sV);D1=o,UE=l,zE=!0}return Bc[r]=rV(n,FE,jE,e,UE,qm,t),new iV(n)}function lV(n=cy()){n=Ot(n);const e=Bo(n,tf);return e.isInitialized()?e.getImmediate():cV(n)}function cV(n,e={}){const t=Bo(n,tf);if(t.isInitialized()){const i=t.getImmediate();if(Cs(e,t.getOptions()))return i;throw Wn.create("already-initialized")}return t.initialize({options:e})}function uV(n,e,t,r){n=Ot(n),tV(D1,Bc[n.app.options.appId],e,t,r).catch(i=>Rn.error(i))}const BE="@firebase/analytics",$E="0.10.18";function hV(){si(new Ir(tf,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return aV(r,i,t)},"PUBLIC")),si(new Ir("analytics-internal",n,"PRIVATE")),sr(BE,$E),sr(BE,$E,"esm2020");function n(e){try{const t=e.getProvider(tf).getImmediate();return{logEvent:(r,i,o)=>uV(t,r,i,o)}}catch(t){throw Wn.create("interop-component-reg-failed",{reason:t})}}}hV();const dV={apiKey:"AIzaSyA3CAXoBMk5KIb80UgqSY0mNJQISHMfZ9c",authDomain:"no4r-utc-app.firebaseapp.com",projectId:"no4r-utc-app",storageBucket:"no4r-utc-app.appspot.com",messagingSenderId:"139910089353",appId:"1:139910089353:web:dce994c30e4756331b5458",measurementId:"G-VQD24XFCB2"},Uf=Yb(dV);lV(Uf);const or=SN(Uf),fV=_y(Uf),O1=createContext(null),pV=({children:n})=>{const[e,t]=G.useState(null),r=_y(Uf);G.useEffect(()=>{const o=gD(r,async l=>{if(l){if(console.log(" UID Firebase :",l.uid),l.email==="xzno4rzx@gmail.com"){t(l);return}try{const c=Fi(or,"users",l.uid),h=await Su(c);h.exists()?h.data().approved===!0?t(l):(await Vm(r),t(null),alert(" Votre compte na pas encore t approuv.")):(await Vm(r),t(null),alert(" Utilisateur inconnu."))}catch(c){console.error("Erreur AuthContext:",c),t(null)}}else t(null)});return()=>o()},[]);const i=()=>Vm(r);return C.jsx(O1.Provider,{value:{user:e,logout:i},children:n})},vl=()=>G.useContext(O1),M1=createContext(),mV=({children:n})=>{const[e,t]=G.useState(0),r=async()=>{try{const o=(await i_(Hy(or,"users"))).docs.filter(l=>l.data().status!=="accepted").length;t(o)}catch(i){console.error("Erreur fetchPending :",i)}};return G.useEffect(()=>{r()},[]),C.jsx(M1.Provider,{value:{pendingUsers:e,refreshPending:r},children:n})},N1=()=>G.useContext(M1),gV=()=>{const{user:n,logout:e}=vl(),{pendingUsers:t}=N1(),[r,i]=G.useState(!1),o=useRef(null);G.useEffect(()=>{const h=d=>{r&&o.current&&!o.current.contains(d.target)&&i(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[r]);const l=()=>i(!1),c={display:"block",padding:"1rem",color:"#fff",fontSize:"1.2rem",textDecoration:"none"};return C.jsxs(C.Fragment,{children:[C.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100%",padding:"1rem 1rem 1rem 1.5rem",display:"flex",alignItems:"center",gap:"1rem",backgroundColor:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(8px)",zIndex:1e3},children:[C.jsx("button",{onClick:()=>i(!r),style:{fontSize:"2rem",background:"transparent",color:"#fff",border:"none",cursor:"pointer"},children:""}),C.jsx("h1",{style:{color:"#4ea8de",fontFamily:"sans-serif",fontSize:"1.5rem",animation:"slideTitle 2s ease-in-out infinite alternate"},children:"Ultimate Trading Champions"})]}),C.jsxs("div",{ref:o,style:{position:"fixed",top:0,left:r?0:"-260px",width:"260px",height:"100%",backgroundImage:'url("/backgrounds/menubackground.png")',backgroundSize:"cover",backgroundPosition:"center",transition:"left 0.3s ease-in-out",zIndex:999,paddingTop:"5rem",fontFamily:"sans-serif",borderRight:"1px solid #333",overflow:"hidden"},children:[C.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(8px)",zIndex:0}}),C.jsxs("div",{style:{position:"relative",zIndex:1},children:[C.jsx($n,{to:"/",onClick:l,style:c,children:" Accueil"}),n&&C.jsxs(C.Fragment,{children:[C.jsx($n,{to:"/trading",onClick:l,style:c,children:" Trading"}),C.jsx($n,{to:"/ia-trader",onClick:l,style:c,children:" IA Trader"}),C.jsx($n,{to:"/analysis",onClick:l,style:c,children:" Analyse"}),C.jsx($n,{to:"/signals",onClick:l,style:c,children:" Signaux"}),C.jsx($n,{to:"/profile",onClick:l,style:c,children:" Profil"})]}),n?.email==="xzno4rzx@gmail.com"&&C.jsxs($n,{to:"/admin",onClick:l,style:{...c,color:"#4ea8de",position:"relative"},children:[" Admin",t>0&&C.jsx("span",{style:{position:"absolute",top:"8px",right:"20px",background:"red",color:"#fff",borderRadius:"50%",padding:"2px 6px",fontSize:"0.7rem"},children:t})]}),C.jsx("div",{style:{marginTop:"2rem"},children:n?C.jsx("button",{onClick:()=>{e(),i(!1)},style:{...c,background:"transparent",border:"none",cursor:"pointer",textAlign:"left"},children:" Dconnexion"}):C.jsx($n,{to:"/login",onClick:l,style:c,children:" Connexion"})})]})]}),C.jsx("style",{children:`
        @keyframes slideTitle {
          0% { transform: translateX(0px); opacity: 0.8; }
          100% { transform: translateX(4px); opacity: 1; }
        }
      `})]})};function L1(n,e){return function(){return n.apply(e,arguments)}}const{toString:yV}=Object.prototype,{getPrototypeOf:h_}=Object,{iterator:zf,toStringTag:V1}=Symbol,Bf=(n=>e=>{const t=yV.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Rr=n=>(n=n.toLowerCase(),e=>Bf(e)===n),$f=n=>e=>typeof e===n,{isArray:wl}=Array,au=$f("undefined");function Iu(n){return n!==null&&!au(n)&&n.constructor!==null&&!au(n.constructor)&&Dn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const F1=Rr("ArrayBuffer");function _V(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&F1(n.buffer),e}const vV=$f("string"),Dn=$f("function"),j1=$f("number"),ku=n=>n!==null&&typeof n=="object",wV=n=>n===!0||n===!1,Cd=n=>{if(Bf(n)!=="object")return!1;const e=h_(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(V1 in n)&&!(zf in n)},EV=n=>{if(!ku(n)||Iu(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},TV=Rr("Date"),bV=Rr("File"),xV=Rr("Blob"),SV=Rr("FileList"),IV=n=>ku(n)&&Dn(n.pipe),kV=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Dn(n.append)&&((e=Bf(n))==="formdata"||e==="object"&&Dn(n.toString)&&n.toString()==="[object FormData]"))},CV=Rr("URLSearchParams"),[PV,AV,RV,DV]=["ReadableStream","Request","Response","Headers"].map(Rr),OV=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Cu(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,i;if(typeof n!="object"&&(n=[n]),wl(n))for(r=0,i=n.length;r<i;r++)e.call(null,n[r],r,n);else{if(Iu(n))return;const o=t?Object.getOwnPropertyNames(n):Object.keys(n),l=o.length;let c;for(r=0;r<l;r++)c=o[r],e.call(null,n[c],c,n)}}function U1(n,e){if(Iu(n))return null;e=e.toLowerCase();const t=Object.keys(n);let r=t.length,i;for(;r-- >0;)if(i=t[r],e===i.toLowerCase())return i;return null}const ko=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,z1=n=>!au(n)&&n!==ko;function jg(){const{caseless:n}=z1(this)&&this||{},e={},t=(r,i)=>{const o=n&&U1(e,i)||i;Cd(e[o])&&Cd(r)?e[o]=jg(e[o],r):Cd(r)?e[o]=jg({},r):wl(r)?e[o]=r.slice():e[o]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Cu(arguments[r],t);return e}const MV=(n,e,t,{allOwnKeys:r}={})=>(Cu(e,(i,o)=>{t&&Dn(i)?n[o]=L1(i,t):n[o]=i},{allOwnKeys:r}),n),NV=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),LV=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},VV=(n,e,t,r)=>{let i,o,l;const c={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),o=i.length;o-- >0;)l=i[o],(!r||r(l,n,e))&&!c[l]&&(e[l]=n[l],c[l]=!0);n=t!==!1&&h_(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},FV=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},jV=n=>{if(!n)return null;if(wl(n))return n;let e=n.length;if(!j1(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},UV=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&h_(Uint8Array)),zV=(n,e)=>{const r=(n&&n[zf]).call(n);let i;for(;(i=r.next())&&!i.done;){const o=i.value;e.call(n,o[0],o[1])}},BV=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},$V=Rr("HTMLFormElement"),HV=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,i){return r.toUpperCase()+i}),HE=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),WV=Rr("RegExp"),B1=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};Cu(t,(i,o)=>{let l;(l=e(i,o,n))!==!1&&(r[o]=l||i)}),Object.defineProperties(n,r)},qV=n=>{B1(n,(e,t)=>{if(Dn(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(Dn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},GV=(n,e)=>{const t={},r=i=>{i.forEach(o=>{t[o]=!0})};return wl(n)?r(n):r(String(n).split(e)),t},KV=()=>{},YV=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function QV(n){return!!(n&&Dn(n.append)&&n[V1]==="FormData"&&n[zf])}const XV=n=>{const e=new Array(10),t=(r,i)=>{if(ku(r)){if(e.indexOf(r)>=0)return;if(Iu(r))return r;if(!("toJSON"in r)){e[i]=r;const o=wl(r)?[]:{};return Cu(r,(l,c)=>{const h=t(l,i+1);!au(h)&&(o[c]=h)}),e[i]=void 0,o}}return r};return t(n,0)},JV=Rr("AsyncFunction"),ZV=n=>n&&(ku(n)||Dn(n))&&Dn(n.then)&&Dn(n.catch),$1=((n,e)=>n?setImmediate:e?((t,r)=>(ko.addEventListener("message",({source:i,data:o})=>{i===ko&&o===t&&r.length&&r.shift()()},!1),i=>{r.push(i),ko.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Dn(ko.postMessage)),eF=typeof queueMicrotask<"u"?queueMicrotask.bind(ko):typeof process<"u"&&process.nextTick||$1,tF=n=>n!=null&&Dn(n[zf]),X={isArray:wl,isArrayBuffer:F1,isBuffer:Iu,isFormData:kV,isArrayBufferView:_V,isString:vV,isNumber:j1,isBoolean:wV,isObject:ku,isPlainObject:Cd,isEmptyObject:EV,isReadableStream:PV,isRequest:AV,isResponse:RV,isHeaders:DV,isUndefined:au,isDate:TV,isFile:bV,isBlob:xV,isRegExp:WV,isFunction:Dn,isStream:IV,isURLSearchParams:CV,isTypedArray:UV,isFileList:SV,forEach:Cu,merge:jg,extend:MV,trim:OV,stripBOM:NV,inherits:LV,toFlatObject:VV,kindOf:Bf,kindOfTest:Rr,endsWith:FV,toArray:jV,forEachEntry:zV,matchAll:BV,isHTMLForm:$V,hasOwnProperty:HE,hasOwnProp:HE,reduceDescriptors:B1,freezeMethods:qV,toObjectSet:GV,toCamelCase:HV,noop:KV,toFiniteNumber:YV,findKey:U1,global:ko,isContextDefined:z1,isSpecCompliantForm:QV,toJSONObject:XV,isAsyncFn:JV,isThenable:ZV,setImmediate:$1,asap:eF,isIterable:tF};function Ne(n,e,t,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}X.inherits(Ne,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:X.toJSONObject(this.config),code:this.code,status:this.status}}});const H1=Ne.prototype,W1={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{W1[n]={value:n}});Object.defineProperties(Ne,W1);Object.defineProperty(H1,"isAxiosError",{value:!0});Ne.from=(n,e,t,r,i,o)=>{const l=Object.create(H1);return X.toFlatObject(n,l,function(h){return h!==Error.prototype},c=>c!=="isAxiosError"),Ne.call(l,n.message,e,t,r,i),l.cause=n,l.name=n.name,o&&Object.assign(l,o),l};const nF=null;function Ug(n){return X.isPlainObject(n)||X.isArray(n)}function q1(n){return X.endsWith(n,"[]")?n.slice(0,-2):n}function WE(n,e,t){return n?n.concat(e).map(function(i,o){return i=q1(i),!t&&o?"["+i+"]":i}).join(t?".":""):e}function rF(n){return X.isArray(n)&&!n.some(Ug)}const iF=X.toFlatObject(X,{},null,function(e){return/^is[A-Z]/.test(e)});function Hf(n,e,t){if(!X.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=X.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,T){return!X.isUndefined(T[k])});const r=t.metaTokens,i=t.visitor||m,o=t.dots,l=t.indexes,h=(t.Blob||typeof Blob<"u"&&Blob)&&X.isSpecCompliantForm(e);if(!X.isFunction(i))throw new TypeError("visitor must be a function");function d(S){if(S===null)return"";if(X.isDate(S))return S.toISOString();if(X.isBoolean(S))return S.toString();if(!h&&X.isBlob(S))throw new Ne("Blob is not supported. Use a Buffer instead.");return X.isArrayBuffer(S)||X.isTypedArray(S)?h&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function m(S,k,T){let N=S;if(S&&!T&&typeof S=="object"){if(X.endsWith(k,"{}"))k=r?k:k.slice(0,-2),S=JSON.stringify(S);else if(X.isArray(S)&&rF(S)||(X.isFileList(S)||X.endsWith(k,"[]"))&&(N=X.toArray(S)))return k=q1(k),N.forEach(function(B,K){!(X.isUndefined(B)||B===null)&&e.append(l===!0?WE([k],K,o):l===null?k:k+"[]",d(B))}),!1}return Ug(S)?!0:(e.append(WE(T,k,o),d(S)),!1)}const y=[],w=Object.assign(iF,{defaultVisitor:m,convertValue:d,isVisitable:Ug});function b(S,k){if(!X.isUndefined(S)){if(y.indexOf(S)!==-1)throw Error("Circular reference detected in "+k.join("."));y.push(S),X.forEach(S,function(N,j){(!(X.isUndefined(N)||N===null)&&i.call(e,N,X.isString(j)?j.trim():j,k,w))===!0&&b(N,k?k.concat(j):[j])}),y.pop()}}if(!X.isObject(n))throw new TypeError("data must be an object");return b(n),e}function qE(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function d_(n,e){this._pairs=[],n&&Hf(n,this,e)}const G1=d_.prototype;G1.append=function(e,t){this._pairs.push([e,t])};G1.toString=function(e){const t=e?function(r){return e.call(this,r,qE)}:qE;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function sF(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function K1(n,e,t){if(!e)return n;const r=t&&t.encode||sF;X.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let o;if(i?o=i(e,t):o=X.isURLSearchParams(e)?e.toString():new d_(e,t).toString(r),o){const l=n.indexOf("#");l!==-1&&(n=n.slice(0,l)),n+=(n.indexOf("?")===-1?"?":"&")+o}return n}class GE{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){X.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Y1={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},oF=typeof URLSearchParams<"u"?URLSearchParams:d_,aF=typeof FormData<"u"?FormData:null,lF=typeof Blob<"u"?Blob:null,cF={isBrowser:!0,classes:{URLSearchParams:oF,FormData:aF,Blob:lF},protocols:["http","https","file","blob","url","data"]},f_=typeof window<"u"&&typeof document<"u",zg=typeof navigator=="object"&&navigator||void 0,uF=f_&&(!zg||["ReactNative","NativeScript","NS"].indexOf(zg.product)<0),hF=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",dF=f_&&window.location.href||"http://localhost",fF=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:f_,hasStandardBrowserEnv:uF,hasStandardBrowserWebWorkerEnv:hF,navigator:zg,origin:dF},Symbol.toStringTag,{value:"Module"})),an={...fF,...cF};function pF(n,e){return Hf(n,new an.classes.URLSearchParams,{visitor:function(t,r,i,o){return an.isNode&&X.isBuffer(t)?(this.append(r,t.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...e})}function mF(n){return X.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function gF(n){const e={},t=Object.keys(n);let r;const i=t.length;let o;for(r=0;r<i;r++)o=t[r],e[o]=n[o];return e}function Q1(n){function e(t,r,i,o){let l=t[o++];if(l==="__proto__")return!0;const c=Number.isFinite(+l),h=o>=t.length;return l=!l&&X.isArray(i)?i.length:l,h?(X.hasOwnProp(i,l)?i[l]=[i[l],r]:i[l]=r,!c):((!i[l]||!X.isObject(i[l]))&&(i[l]=[]),e(t,r,i[l],o)&&X.isArray(i[l])&&(i[l]=gF(i[l])),!c)}if(X.isFormData(n)&&X.isFunction(n.entries)){const t={};return X.forEachEntry(n,(r,i)=>{e(mF(r),i,t,0)}),t}return null}function yF(n,e,t){if(X.isString(n))try{return(e||JSON.parse)(n),X.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const Pu={transitional:Y1,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",i=r.indexOf("application/json")>-1,o=X.isObject(e);if(o&&X.isHTMLForm(e)&&(e=new FormData(e)),X.isFormData(e))return i?JSON.stringify(Q1(e)):e;if(X.isArrayBuffer(e)||X.isBuffer(e)||X.isStream(e)||X.isFile(e)||X.isBlob(e)||X.isReadableStream(e))return e;if(X.isArrayBufferView(e))return e.buffer;if(X.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return pF(e,this.formSerializer).toString();if((c=X.isFileList(e))||r.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return Hf(c?{"files[]":e}:e,h&&new h,this.formSerializer)}}return o||i?(t.setContentType("application/json",!1),yF(e)):e}],transformResponse:[function(e){const t=this.transitional||Pu.transitional,r=t&&t.forcedJSONParsing,i=this.responseType==="json";if(X.isResponse(e)||X.isReadableStream(e))return e;if(e&&X.isString(e)&&(r&&!this.responseType||i)){const l=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(c){if(l)throw c.name==="SyntaxError"?Ne.from(c,Ne.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:an.classes.FormData,Blob:an.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};X.forEach(["delete","get","head","post","put","patch"],n=>{Pu.headers[n]={}});const _F=X.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),vF=n=>{const e={};let t,r,i;return n&&n.split(`
`).forEach(function(l){i=l.indexOf(":"),t=l.substring(0,i).trim().toLowerCase(),r=l.substring(i+1).trim(),!(!t||e[t]&&_F[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},KE=Symbol("internals");function gc(n){return n&&String(n).trim().toLowerCase()}function Pd(n){return n===!1||n==null?n:X.isArray(n)?n.map(Pd):String(n)}function wF(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const EF=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Gm(n,e,t,r,i){if(X.isFunction(r))return r.call(this,e,t);if(i&&(e=t),!!X.isString(e)){if(X.isString(r))return e.indexOf(r)!==-1;if(X.isRegExp(r))return r.test(e)}}function TF(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function bF(n,e){const t=X.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(i,o,l){return this[r].call(this,e,i,o,l)},configurable:!0})})}let On=class{constructor(e){e&&this.set(e)}set(e,t,r){const i=this;function o(c,h,d){const m=gc(h);if(!m)throw new Error("header name must be a non-empty string");const y=X.findKey(i,m);(!y||i[y]===void 0||d===!0||d===void 0&&i[y]!==!1)&&(i[y||h]=Pd(c))}const l=(c,h)=>X.forEach(c,(d,m)=>o(d,m,h));if(X.isPlainObject(e)||e instanceof this.constructor)l(e,t);else if(X.isString(e)&&(e=e.trim())&&!EF(e))l(vF(e),t);else if(X.isObject(e)&&X.isIterable(e)){let c={},h,d;for(const m of e){if(!X.isArray(m))throw TypeError("Object iterator must return a key-value pair");c[d=m[0]]=(h=c[d])?X.isArray(h)?[...h,m[1]]:[h,m[1]]:m[1]}l(c,t)}else e!=null&&o(t,e,r);return this}get(e,t){if(e=gc(e),e){const r=X.findKey(this,e);if(r){const i=this[r];if(!t)return i;if(t===!0)return wF(i);if(X.isFunction(t))return t.call(this,i,r);if(X.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=gc(e),e){const r=X.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||Gm(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let i=!1;function o(l){if(l=gc(l),l){const c=X.findKey(r,l);c&&(!t||Gm(r,r[c],c,t))&&(delete r[c],i=!0)}}return X.isArray(e)?e.forEach(o):o(e),i}clear(e){const t=Object.keys(this);let r=t.length,i=!1;for(;r--;){const o=t[r];(!e||Gm(this,this[o],o,e,!0))&&(delete this[o],i=!0)}return i}normalize(e){const t=this,r={};return X.forEach(this,(i,o)=>{const l=X.findKey(r,o);if(l){t[l]=Pd(i),delete t[o];return}const c=e?TF(o):String(o).trim();c!==o&&delete t[o],t[c]=Pd(i),r[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return X.forEach(this,(r,i)=>{r!=null&&r!==!1&&(t[i]=e&&X.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[KE]=this[KE]={accessors:{}}).accessors,i=this.prototype;function o(l){const c=gc(l);r[c]||(bF(i,l),r[c]=!0)}return X.isArray(e)?e.forEach(o):o(e),this}};On.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);X.reduceDescriptors(On.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});X.freezeMethods(On);function Km(n,e){const t=this||Pu,r=e||t,i=On.from(r.headers);let o=r.data;return X.forEach(n,function(c){o=c.call(t,o,i.normalize(),e?e.status:void 0)}),i.normalize(),o}function X1(n){return!!(n&&n.__CANCEL__)}function El(n,e,t){Ne.call(this,n??"canceled",Ne.ERR_CANCELED,e,t),this.name="CanceledError"}X.inherits(El,Ne,{__CANCEL__:!0});function J1(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new Ne("Request failed with status code "+t.status,[Ne.ERR_BAD_REQUEST,Ne.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function xF(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function SF(n,e){n=n||10;const t=new Array(n),r=new Array(n);let i=0,o=0,l;return e=e!==void 0?e:1e3,function(h){const d=Date.now(),m=r[o];l||(l=d),t[i]=h,r[i]=d;let y=o,w=0;for(;y!==i;)w+=t[y++],y=y%n;if(i=(i+1)%n,i===o&&(o=(o+1)%n),d-l<e)return;const b=m&&d-m;return b?Math.round(w*1e3/b):void 0}}function IF(n,e){let t=0,r=1e3/e,i,o;const l=(d,m=Date.now())=>{t=m,i=null,o&&(clearTimeout(o),o=null),n(...d)};return[(...d)=>{const m=Date.now(),y=m-t;y>=r?l(d,m):(i=d,o||(o=setTimeout(()=>{o=null,l(i)},r-y)))},()=>i&&l(i)]}const nf=(n,e,t=3)=>{let r=0;const i=SF(50,250);return IF(o=>{const l=o.loaded,c=o.lengthComputable?o.total:void 0,h=l-r,d=i(h),m=l<=c;r=l;const y={loaded:l,total:c,progress:c?l/c:void 0,bytes:h,rate:d||void 0,estimated:d&&c&&m?(c-l)/d:void 0,event:o,lengthComputable:c!=null,[e?"download":"upload"]:!0};n(y)},t)},YE=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},QE=n=>(...e)=>X.asap(()=>n(...e)),kF=an.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,an.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(an.origin),an.navigator&&/(msie|trident)/i.test(an.navigator.userAgent)):()=>!0,CF=an.hasStandardBrowserEnv?{write(n,e,t,r,i,o){const l=[n+"="+encodeURIComponent(e)];X.isNumber(t)&&l.push("expires="+new Date(t).toGMTString()),X.isString(r)&&l.push("path="+r),X.isString(i)&&l.push("domain="+i),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function PF(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function AF(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function Z1(n,e,t){let r=!PF(e);return n&&(r||t==!1)?AF(n,e):e}const XE=n=>n instanceof On?{...n}:n;function jo(n,e){e=e||{};const t={};function r(d,m,y,w){return X.isPlainObject(d)&&X.isPlainObject(m)?X.merge.call({caseless:w},d,m):X.isPlainObject(m)?X.merge({},m):X.isArray(m)?m.slice():m}function i(d,m,y,w){if(X.isUndefined(m)){if(!X.isUndefined(d))return r(void 0,d,y,w)}else return r(d,m,y,w)}function o(d,m){if(!X.isUndefined(m))return r(void 0,m)}function l(d,m){if(X.isUndefined(m)){if(!X.isUndefined(d))return r(void 0,d)}else return r(void 0,m)}function c(d,m,y){if(y in e)return r(d,m);if(y in n)return r(void 0,d)}const h={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:c,headers:(d,m,y)=>i(XE(d),XE(m),y,!0)};return X.forEach(Object.keys({...n,...e}),function(m){const y=h[m]||i,w=y(n[m],e[m],m);X.isUndefined(w)&&y!==c||(t[m]=w)}),t}const eI=n=>{const e=jo({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:o,headers:l,auth:c}=e;e.headers=l=On.from(l),e.url=K1(Z1(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),c&&l.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let h;if(X.isFormData(t)){if(an.hasStandardBrowserEnv||an.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((h=l.getContentType())!==!1){const[d,...m]=h?h.split(";").map(y=>y.trim()).filter(Boolean):[];l.setContentType([d||"multipart/form-data",...m].join("; "))}}if(an.hasStandardBrowserEnv&&(r&&X.isFunction(r)&&(r=r(e)),r||r!==!1&&kF(e.url))){const d=i&&o&&CF.read(o);d&&l.set(i,d)}return e},RF=typeof XMLHttpRequest<"u",DF=RF&&function(n){return new Promise(function(t,r){const i=eI(n);let o=i.data;const l=On.from(i.headers).normalize();let{responseType:c,onUploadProgress:h,onDownloadProgress:d}=i,m,y,w,b,S;function k(){b&&b(),S&&S(),i.cancelToken&&i.cancelToken.unsubscribe(m),i.signal&&i.signal.removeEventListener("abort",m)}let T=new XMLHttpRequest;T.open(i.method.toUpperCase(),i.url,!0),T.timeout=i.timeout;function N(){if(!T)return;const B=On.from("getAllResponseHeaders"in T&&T.getAllResponseHeaders()),q={data:!c||c==="text"||c==="json"?T.responseText:T.response,status:T.status,statusText:T.statusText,headers:B,config:n,request:T};J1(function(R){t(R),k()},function(R){r(R),k()},q),T=null}"onloadend"in T?T.onloadend=N:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(N)},T.onabort=function(){T&&(r(new Ne("Request aborted",Ne.ECONNABORTED,n,T)),T=null)},T.onerror=function(){r(new Ne("Network Error",Ne.ERR_NETWORK,n,T)),T=null},T.ontimeout=function(){let K=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const q=i.transitional||Y1;i.timeoutErrorMessage&&(K=i.timeoutErrorMessage),r(new Ne(K,q.clarifyTimeoutError?Ne.ETIMEDOUT:Ne.ECONNABORTED,n,T)),T=null},o===void 0&&l.setContentType(null),"setRequestHeader"in T&&X.forEach(l.toJSON(),function(K,q){T.setRequestHeader(q,K)}),X.isUndefined(i.withCredentials)||(T.withCredentials=!!i.withCredentials),c&&c!=="json"&&(T.responseType=i.responseType),d&&([w,S]=nf(d,!0),T.addEventListener("progress",w)),h&&T.upload&&([y,b]=nf(h),T.upload.addEventListener("progress",y),T.upload.addEventListener("loadend",b)),(i.cancelToken||i.signal)&&(m=B=>{T&&(r(!B||B.type?new El(null,n,T):B),T.abort(),T=null)},i.cancelToken&&i.cancelToken.subscribe(m),i.signal&&(i.signal.aborted?m():i.signal.addEventListener("abort",m)));const j=xF(i.url);if(j&&an.protocols.indexOf(j)===-1){r(new Ne("Unsupported protocol "+j+":",Ne.ERR_BAD_REQUEST,n));return}T.send(o||null)})},OF=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,i;const o=function(d){if(!i){i=!0,c();const m=d instanceof Error?d:this.reason;r.abort(m instanceof Ne?m:new El(m instanceof Error?m.message:m))}};let l=e&&setTimeout(()=>{l=null,o(new Ne(`timeout ${e} of ms exceeded`,Ne.ETIMEDOUT))},e);const c=()=>{n&&(l&&clearTimeout(l),l=null,n.forEach(d=>{d.unsubscribe?d.unsubscribe(o):d.removeEventListener("abort",o)}),n=null)};n.forEach(d=>d.addEventListener("abort",o));const{signal:h}=r;return h.unsubscribe=()=>X.asap(c),h}},MF=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,i;for(;r<t;)i=r+e,yield n.slice(r,i),r=i},NF=async function*(n,e){for await(const t of LF(n))yield*MF(t,e)},LF=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},JE=(n,e,t,r)=>{const i=NF(n,e);let o=0,l,c=h=>{l||(l=!0,r&&r(h))};return new ReadableStream({async pull(h){try{const{done:d,value:m}=await i.next();if(d){c(),h.close();return}let y=m.byteLength;if(t){let w=o+=y;t(w)}h.enqueue(new Uint8Array(m))}catch(d){throw c(d),d}},cancel(h){return c(h),i.return()}},{highWaterMark:2})},Wf=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",tI=Wf&&typeof ReadableStream=="function",VF=Wf&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),nI=(n,...e)=>{try{return!!n(...e)}catch{return!1}},FF=tI&&nI(()=>{let n=!1;const e=new Request(an.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),ZE=64*1024,Bg=tI&&nI(()=>X.isReadableStream(new Response("").body)),rf={stream:Bg&&(n=>n.body)};Wf&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!rf[e]&&(rf[e]=X.isFunction(n[e])?t=>t[e]():(t,r)=>{throw new Ne(`Response type '${e}' is not supported`,Ne.ERR_NOT_SUPPORT,r)})})})(new Response);const jF=async n=>{if(n==null)return 0;if(X.isBlob(n))return n.size;if(X.isSpecCompliantForm(n))return(await new Request(an.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(X.isArrayBufferView(n)||X.isArrayBuffer(n))return n.byteLength;if(X.isURLSearchParams(n)&&(n=n+""),X.isString(n))return(await VF(n)).byteLength},UF=async(n,e)=>{const t=X.toFiniteNumber(n.getContentLength());return t??jF(e)},zF=Wf&&(async n=>{let{url:e,method:t,data:r,signal:i,cancelToken:o,timeout:l,onDownloadProgress:c,onUploadProgress:h,responseType:d,headers:m,withCredentials:y="same-origin",fetchOptions:w}=eI(n);d=d?(d+"").toLowerCase():"text";let b=OF([i,o&&o.toAbortSignal()],l),S;const k=b&&b.unsubscribe&&(()=>{b.unsubscribe()});let T;try{if(h&&FF&&t!=="get"&&t!=="head"&&(T=await UF(m,r))!==0){let q=new Request(e,{method:"POST",body:r,duplex:"half"}),J;if(X.isFormData(r)&&(J=q.headers.get("content-type"))&&m.setContentType(J),q.body){const[R,I]=YE(T,nf(QE(h)));r=JE(q.body,ZE,R,I)}}X.isString(y)||(y=y?"include":"omit");const N="credentials"in Request.prototype;S=new Request(e,{...w,signal:b,method:t.toUpperCase(),headers:m.normalize().toJSON(),body:r,duplex:"half",credentials:N?y:void 0});let j=await fetch(S,w);const B=Bg&&(d==="stream"||d==="response");if(Bg&&(c||B&&k)){const q={};["status","statusText","headers"].forEach(P=>{q[P]=j[P]});const J=X.toFiniteNumber(j.headers.get("content-length")),[R,I]=c&&YE(J,nf(QE(c),!0))||[];j=new Response(JE(j.body,ZE,R,()=>{I&&I(),k&&k()}),q)}d=d||"text";let K=await rf[X.findKey(rf,d)||"text"](j,n);return!B&&k&&k(),await new Promise((q,J)=>{J1(q,J,{data:K,headers:On.from(j.headers),status:j.status,statusText:j.statusText,config:n,request:S})})}catch(N){throw k&&k(),N&&N.name==="TypeError"&&/Load failed|fetch/i.test(N.message)?Object.assign(new Ne("Network Error",Ne.ERR_NETWORK,n,S),{cause:N.cause||N}):Ne.from(N,N&&N.code,n,S)}}),$g={http:nF,xhr:DF,fetch:zF};X.forEach($g,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const eT=n=>`- ${n}`,BF=n=>X.isFunction(n)||n===null||n===!1,rI={getAdapter:n=>{n=X.isArray(n)?n:[n];const{length:e}=n;let t,r;const i={};for(let o=0;o<e;o++){t=n[o];let l;if(r=t,!BF(t)&&(r=$g[(l=String(t)).toLowerCase()],r===void 0))throw new Ne(`Unknown adapter '${l}'`);if(r)break;i[l||"#"+o]=r}if(!r){const o=Object.entries(i).map(([c,h])=>`adapter ${c} `+(h===!1?"is not supported by the environment":"is not available in the build"));let l=e?o.length>1?`since :
`+o.map(eT).join(`
`):" "+eT(o[0]):"as no adapter specified";throw new Ne("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return r},adapters:$g};function Ym(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new El(null,n)}function tT(n){return Ym(n),n.headers=On.from(n.headers),n.data=Km.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),rI.getAdapter(n.adapter||Pu.adapter)(n).then(function(r){return Ym(n),r.data=Km.call(n,n.transformResponse,r),r.headers=On.from(r.headers),r},function(r){return X1(r)||(Ym(n),r&&r.response&&(r.response.data=Km.call(n,n.transformResponse,r.response),r.response.headers=On.from(r.response.headers))),Promise.reject(r)})}const iI="1.11.0",qf={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{qf[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const nT={};qf.transitional=function(e,t,r){function i(o,l){return"[Axios v"+iI+"] Transitional option '"+o+"'"+l+(r?". "+r:"")}return(o,l,c)=>{if(e===!1)throw new Ne(i(l," has been removed"+(t?" in "+t:"")),Ne.ERR_DEPRECATED);return t&&!nT[l]&&(nT[l]=!0,console.warn(i(l," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,l,c):!0}};qf.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function $F(n,e,t){if(typeof n!="object")throw new Ne("options must be an object",Ne.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let i=r.length;for(;i-- >0;){const o=r[i],l=e[o];if(l){const c=n[o],h=c===void 0||l(c,o,n);if(h!==!0)throw new Ne("option "+o+" must be "+h,Ne.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Ne("Unknown option "+o,Ne.ERR_BAD_OPTION)}}const Ad={assertOptions:$F,validators:qf},$r=Ad.validators;let Ro=class{constructor(e){this.defaults=e||{},this.interceptors={request:new GE,response:new GE}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=jo(this.defaults,t);const{transitional:r,paramsSerializer:i,headers:o}=t;r!==void 0&&Ad.assertOptions(r,{silentJSONParsing:$r.transitional($r.boolean),forcedJSONParsing:$r.transitional($r.boolean),clarifyTimeoutError:$r.transitional($r.boolean)},!1),i!=null&&(X.isFunction(i)?t.paramsSerializer={serialize:i}:Ad.assertOptions(i,{encode:$r.function,serialize:$r.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Ad.assertOptions(t,{baseUrl:$r.spelling("baseURL"),withXsrfToken:$r.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let l=o&&X.merge(o.common,o[t.method]);o&&X.forEach(["delete","get","head","post","put","patch","common"],S=>{delete o[S]}),t.headers=On.concat(l,o);const c=[];let h=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(t)===!1||(h=h&&k.synchronous,c.unshift(k.fulfilled,k.rejected))});const d=[];this.interceptors.response.forEach(function(k){d.push(k.fulfilled,k.rejected)});let m,y=0,w;if(!h){const S=[tT.bind(this),void 0];for(S.unshift(...c),S.push(...d),w=S.length,m=Promise.resolve(t);y<w;)m=m.then(S[y++],S[y++]);return m}w=c.length;let b=t;for(y=0;y<w;){const S=c[y++],k=c[y++];try{b=S(b)}catch(T){k.call(this,T);break}}try{m=tT.call(this,b)}catch(S){return Promise.reject(S)}for(y=0,w=d.length;y<w;)m=m.then(d[y++],d[y++]);return m}getUri(e){e=jo(this.defaults,e);const t=Z1(e.baseURL,e.url,e.allowAbsoluteUrls);return K1(t,e.params,e.paramsSerializer)}};X.forEach(["delete","get","head","options"],function(e){Ro.prototype[e]=function(t,r){return this.request(jo(r||{},{method:e,url:t,data:(r||{}).data}))}});X.forEach(["post","put","patch"],function(e){function t(r){return function(o,l,c){return this.request(jo(c||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}Ro.prototype[e]=t(),Ro.prototype[e+"Form"]=t(!0)});let HF=class sI{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(o){t=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const l=new Promise(c=>{r.subscribe(c),o=c}).then(i);return l.cancel=function(){r.unsubscribe(o)},l},e(function(o,l,c){r.reason||(r.reason=new El(o,l,c),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new sI(function(i){e=i}),cancel:e}}};function WF(n){return function(t){return n.apply(null,t)}}function qF(n){return X.isObject(n)&&n.isAxiosError===!0}const Hg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Hg).forEach(([n,e])=>{Hg[e]=n});function oI(n){const e=new Ro(n),t=L1(Ro.prototype.request,e);return X.extend(t,Ro.prototype,e,{allOwnKeys:!0}),X.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return oI(jo(n,i))},t}const it=oI(Pu);it.Axios=Ro;it.CanceledError=El;it.CancelToken=HF;it.isCancel=X1;it.VERSION=iI;it.toFormData=Hf;it.AxiosError=Ne;it.Cancel=it.CanceledError;it.all=function(e){return Promise.all(e)};it.spread=WF;it.isAxiosError=qF;it.mergeConfig=jo;it.AxiosHeaders=On;it.formToJSON=n=>Q1(X.isHTMLForm(n)?new FormData(n):n);it.getAdapter=rI.getAdapter;it.HttpStatusCode=Hg;it.default=it;const{Axios:wB,AxiosError:EB,CanceledError:TB,isCancel:bB,CancelToken:xB,VERSION:SB,all:IB,Cancel:kB,isAxiosError:CB,spread:PB,toFormData:AB,AxiosHeaders:RB,HttpStatusCode:DB,formToJSON:OB,getAdapter:MB,mergeConfig:NB}=it,GF="https://utc-api.onrender.com",KF=async()=>{try{const n=await fetch(`${GF}/signals`,{headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error(`HTTP ${n.status}`);const e=await n.json();return Array.isArray(e)?e:Array.isArray(e.signals)?e.signals:[]}catch(n){return console.error(" Erreur fetch /signals :",n.message||n),[]}},YF=async n=>{const e=Fi(or,"portfolios",n),t=await Su(e);return t.exists()?t.data():null},QF=async(n,e)=>{const t=Fi(or,"portfolios",n);await s_(t,e,{merge:!0})},Gf=createContext(),XF=void 0,JF="https://min-api.cryptocompare.com/data",rT=async n=>{if(n.length===0)return{};const e=`${JF}/pricemulti?fsyms=${n.join(",")}&tsyms=USD&api_key=${XF}`,t=i=>`https://api.binance.com/api/v3/ticker/price?symbol=${i}USDT`,r={};try{const{data:i}=await it.get(e);for(const o of n){const l=i?.[o]?.USD;if(typeof l=="number"&&l>0)r[o]=l;else{console.warn(` Prix invalide pour ${o}, fallback Binance...`);try{const c=await it.get(t(o)),h=parseFloat(c.data?.price);isNaN(h)||(r[o]=h,console.log(` Binance fallback ${o} : ${h}`))}catch{console.warn(` Fallback Binance chou pour ${o}`)}}}}catch(i){console.error("Erreur rcupration CryptoCompare :",i)}return r},ZF=()=>typeof window<"u"&&window.location.pathname.includes("iatrader"),e4=({children:n})=>{const{user:e}=vl(),[t,r]=G.useState(""),[i,o]=G.useState(1e4),[l,c]=G.useState([]),[h,d]=G.useState([]),[m,y]=G.useState({}),[w,b]=G.useState([]),[S,k]=G.useState([]);G.useEffect(()=>{(async()=>{if(!e)return;const P=await YF(e.uid);P&&(o(P.cash??1e4),c(P.positions??[]),d(P.history??[]),r(P.name??"PT"),k(P.ptNames??[]),b(P.nidList??[]))})()},[e]);const T=()=>{e&&QF(e.uid,{name:t,cash:i,positions:l,history:h,ptNames:S,nidList:w,updatedAt:new Date().toISOString()})},N=async()=>{const I=l.map(O=>O.symbol),P=await rT(I);y(O=>{const L={...O};for(const V of I)typeof P[V]=="number"&&P[V]>0&&(L[V]=P[V]);return L})};G.useEffect(()=>{if(N(),ZF()){const I=setInterval(async()=>{try{const{signals:P}=await KF();if(!P?.length)return;const O=P[0];if(l.some(re=>re.symbol===O.crypto)||i<10)return;const V=await rT([O.crypto]),D=typeof V[O.crypto]=="number"?V[O.crypto]:null;if(!D)return;const pe=i/3/D;q(O.crypto,pe,D,3,5)}catch(P){console.error("IA Trader erreur :",P)}},6e4);return()=>clearInterval(I)}},[l]);const j=l.reduce((I,P)=>I+P.quantity*P.buyPrice,0),B=h.filter(I=>I.type==="sell").reduce((I,P)=>I+P.profit,0)+l.reduce((I,P)=>{const O=typeof m[P.symbol]=="number"?m[P.symbol]:P.buyPrice;return I+P.quantity*(O-P.buyPrice)},0),K=j?B/1e4*100:0,q=(I,P,O,L=0,V=0)=>{const D=new Date,ne=D.toISOString().slice(2,16).replace(/[-T:]/g,""),pe=w.length<9?"A":"B",ie=String(w.length+1).padStart(3,"0"),ye=`${ne}-${ie}${pe}${w.length%9+1}`,re=P*O,he=[...l,{id:ye,symbol:I,quantity:P,buyPrice:O,date:D.toISOString(),tpPercent:L,slPercent:V}],F=[{id:ye,type:"buy",symbol:I,quantity:P,buyPrice:O,investment:re,date:D.toISOString()},...h];b([...w,ye]),c(he),o(i-re),d(F),T()},J=(I,P,O)=>{const L=l.find(ie=>ie.id===I);if(!L||P>L.quantity)return;const V=P*O,D=P*L.buyPrice,ne=V-D,pe=l.map(ie=>ie.id===I?{...ie,quantity:ie.quantity-P}:ie).filter(ie=>ie.quantity>0);c(pe),o(i+V),d([{id:Date.now(),type:"sell",symbol:L.symbol,quantity:P,buyPrice:L.buyPrice,sellPrice:O,profit:ne,date:new Date().toISOString(),investment:D},...h]),T()},R=()=>{const I=new Date,P=`PT-${I.getFullYear()}-${String(I.getMonth()+1).padStart(2,"0")}`,O=(S.filter(V=>V.startsWith(P)).length+1).toString().padStart(3,"0"),L=`${P}-${O}`;k([...S,L]),r(L),o(1e4),c([]),d([]),b([]),y({}),T()};return C.jsx(Gf.Provider,{value:{portfolioName:t,cash:i,positions:l,history:h,currentPrices:m,investedAmount:j,activePositionsCount:l.length,totalTrades:h.filter(I=>I.type==="buy").length,positiveTrades:h.filter(I=>I.type==="sell"&&I.profit>0).length,totalProfit:B,totalProfitPercent:K,updatePrices:N,buyPosition:q,sellPosition:J,resetPortfolio:R},children:n})},t4=async n=>{try{const e=Fi(or,"iatraders",n),t=await Su(e);return t.exists()?t.data():null}catch(e){return console.error(" Firestore loadIATrader:",e),null}},n4=async(n,e)=>{try{const t=Fi(or,"iatraders",n);await s_(t,e,{merge:!0})}catch(t){console.error(" Firestore saveIATrader:",t)}},p_=createContext(),r4=({children:n})=>{const{user:e}=vl(),[t]=G.useState("IA Trader"),[r,i]=G.useState(()=>new Date().toISOString()),[o,l]=G.useState(1e4),[c,h]=G.useState([]),[d,m]=G.useState([]),[y,w]=G.useState({});G.useEffect(()=>{if(!e)return;(async()=>{const j=await t4(e.uid);j&&(i(j.iaStart||new Date().toISOString()),l(j.iaCash||1e4),h(j.iaPositions||[]),m(j.iaHistory||[]))})()},[e]),G.useEffect(()=>{if(!e)return;(async()=>{await n4(e.uid,{iaStart:r,iaCash:o,iaPositions:c,iaHistory:d,updatedAt:new Date().toISOString()})})()},[e,r,o,c,d]);const b=async()=>{const N=c.map(j=>j.symbol);if(N.length!==0)try{const{data:j}=await it.get("https://min-api.cryptocompare.com/data/pricemulti",{params:{fsyms:N.join(","),tsyms:"USD",api_key:void 0}}),B={};for(const K of N){const q=j?.[K]?.USD;if(typeof q=="number"&&q>0)B[K]=q;else{console.warn(` CryptoCompare a chou pour ${K}, fallback Binance...`);try{const J=K.toUpperCase()+"USDT",R=await it.get(`https://api.binance.com/api/v3/ticker/price?symbol=${J}`),I=parseFloat(R.data?.price);!isNaN(I)&&I>0?B[K]=I:console.warn(` Binance a chou aussi pour ${K}`)}catch(J){console.error(` Fallback Binance chou pour ${K}`,J.message)}}}w(K=>({...K,...B}))}catch(j){console.error("Erreur CryptoCompare (IA Trader) :",j)}},S=()=>{const N=new Date().toISOString();i(N),l(1e4),h([]),m([]),w({})};useMemo(()=>c.reduce((N,j)=>N+j.quantity*j.buyPrice,0),[c]);const k=useMemo(()=>{const N=d.filter(B=>B.type==="sell").reduce((B,K)=>B+K.profit,0),j=c.reduce((B,K)=>{const q=y[K.symbol]??K.buyPrice;return B+K.quantity*(q-K.buyPrice)},0);return N+j},[d,c,y]),T=useMemo(()=>k/1e4*100,[k]);return C.jsx(p_.Provider,{value:{iaName:t,iaStart:r,iaCash:o,iaPositions:c,iaHistory:d,iaCurrentPrices:y,iaTotalProfit:k,iaTotalProfitPercent:T,updateIaPrices:b,resetIATrader:S},children:n})},m_=(n,e=null)=>{const{user:t}=vl(),r=t?.uid;if(!r)return[e,()=>{}];const i=`${n}-${r}`,o=()=>{try{const c=localStorage.getItem(i);return c?JSON.parse(c):e}catch{return e}},l=c=>{try{localStorage.setItem(i,JSON.stringify(c))}catch(h){console.error("Erreur storage:",h)}};return[o(),l]},i4=()=>{const{portfolioName:n,cash:e,positions:t,history:r,currentPrices:i}=G.useContext(Gf),{iaName:o,iaStart:l,iaCash:c,iaPositions:h,iaHistory:d,iaCurrentPrices:m}=G.useContext(p_),[y]=m_("ptStartDate",null),w=(T,N=2)=>T?Number(T).toFixed(N):"0.00",b=T=>new Date(T||new Date).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),S=(T=[])=>T.filter(N=>N.profit>0).length,k=({title:T,name:N,start:j,cash:B,positions:K=[],history:q=[],currentPrices:J,to:R})=>{const I=S(q),P=q.length,O=K.reduce((ne,pe)=>ne+pe.quantity*pe.buyPrice,0),L=K.reduce((ne,pe)=>{const ie=(pe?.symbol&&J?.[pe.symbol])??pe.buyPrice;return ne+pe.quantity*ie},0),V=B+L-1e4,D=(B+L-1e4)/1e4*100;return C.jsxs("section",{className:"slide-up-box",style:a4,children:[C.jsx("h2",{children:T}),C.jsxs("p",{style:{color:"#aaa",fontSize:"0.9rem"},children:["Nom : ",C.jsx("strong",{children:N}),C.jsx("br",{}),"Dmarr le : ",j?b(j):"",C.jsx("br",{}),"Cash disponible : $",w(B),C.jsx("br",{}),"Positions en cours : ",K.length,C.jsx("br",{}),"Valeur actuelle : $",w(L),C.jsx("br",{}),"Total investi : $",w(O),C.jsx("br",{}),"Trades gagnants : ",I," / ",P]}),C.jsxs("div",{style:{marginTop:"1rem",padding:"0.5rem",backgroundColor:V>=0?"#153d27":"#3d1d1d",color:V>=0?"lightgreen":"salmon",borderRadius:"6px",textAlign:"center",fontSize:"0.9rem",maxWidth:"90px"},children:[C.jsx("div",{style:{fontWeight:"bold"},children:"Rendement total"}),C.jsxs("div",{children:["$",w(V),C.jsx("br",{}),"(",w(D),"%)"]})]}),C.jsx($n,{to:R,style:l4,children:" Accder"})]})};return C.jsxs("div",{style:s4,children:[C.jsxs("div",{style:o4,children:[k({title:" Portefeuille virtuel",name:n,start:y,cash:e,positions:t,history:r,currentPrices:i,to:"/trading"}),k({title:" IA Trader",name:o,start:l,cash:c,positions:h,history:d,currentPrices:m,to:"/ia-trader"})]}),C.jsxs("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",marginTop:"3rem"},children:[C.jsxs($n,{to:"/analysis",style:Qm,children:[" Analyse",C.jsx("br",{}),"Voir les tendances"]}),C.jsxs($n,{to:"/signals",style:Qm,children:[" Signaux",C.jsx("br",{}),"Opportunits IA"]}),C.jsxs($n,{to:"/profile",style:Qm,children:[" Profil",C.jsx("br",{}),"Historique & stats"]})]}),C.jsx("style",{children:`
        .slide-up-box {
          opacity: 0;
          transform: translateY(20px);
          animation: slideUp 0.6s ease-out forwards;
        }
        @keyframes slideUp {
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})},s4={padding:"6rem 2rem 2rem",backgroundImage:'url("/backgrounds/homebackground.png")',backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed",minHeight:"100vh",color:"#eee"},o4={display:"flex",justifyContent:"center",gap:"2rem",flexWrap:"wrap"},a4={width:"250px",padding:"1.5rem",backgroundColor:"rgba(30,30,30,0.6)",borderRadius:"8px",fontFamily:"sans-serif",backdropFilter:"blur(10px)",flexShrink:0},Qm={flex:"1",minWidth:"250px",backgroundColor:"rgba(30,30,30,0.6)",color:"#eee",textDecoration:"none",borderRadius:"6px",padding:"1rem",border:"1px solid #333",backdropFilter:"blur(6px)",fontWeight:"bold"},l4={display:"inline-block",marginTop:"1rem",padding:"4px 8px",backgroundColor:"#4ea8de",color:"#fff",textDecoration:"none",borderRadius:"4px",fontWeight:"bold",fontSize:"0.85rem"},c4=6e4;let iT=0,Xm=null;function u4(){try{return JSON.parse(localStorage.getItem("price_history"))||{}}catch{return{}}}function h4(n){localStorage.setItem("price_history",JSON.stringify(n))}function d4(n,e){return!e||e===0?0:(n-e)/e*100}async function f4(){const n=Date.now();if(Xm&&n-iT<c4)return Xm;const t=(await it.get("https://api.coingecko.com/api/v3/coins/markets",{params:{vs_currency:"usd",order:"market_cap_desc",per_page:50,page:1,sparkline:!1,price_change_percentage:"24h,7d"}})).data,r=u4(),i=t.map(m=>{const y=m.symbol.toUpperCase(),w=m.current_price,b=n;r[y]||(r[y]=[]),r[y].push({timestamp:b,price:w}),r[y]=r[y].filter(B=>b-B.timestamp<=10080*60*1e3);const k=(B=>{const K=b-B*60*1e3,q=r[y].filter(R=>R.timestamp<=K);return q.length===0?null:q.reduce((R,I)=>Math.abs(I.timestamp-K)<Math.abs(R.timestamp-K)?I:R).price})(5),T=d4(w,k),N=m.price_change_percentage_24h_in_currency??0,j=m.price_change_percentage_7d_in_currency??0;return{symbol:y,currentPrice:w,change5min:T,change1d:N,change7d:j}});h4(r);const o=[...i].sort((m,y)=>y.change5min-m.change5min),l=o.slice(0,5),c=o.slice(-5).reverse(),h=i.filter(m=>!l.some(y=>y.symbol===m.symbol)&&!c.some(y=>y.symbol===m.symbol)),d={top5Up:l,top5Down:c,rest:h};return Xm=d,iT=n,d}const aI=({show:n,symbol:e,price:t,percent:r,positions:i,onClose:o,onConfirm:l,onChangePercent:c,onSetMax:h})=>{if(!n)return null;const d=i.find(T=>T.symbol===e),m=t??0,y=d?.buyPrice??0,w=d?.quantity??0,b=(m*w).toFixed(2),S=(y*w).toFixed(2),k=(m-y)*w;return C.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#0009",zIndex:999},children:C.jsxs("div",{style:{backgroundColor:"#1e1e1e",margin:"10% auto",padding:"2rem",borderRadius:"8px",maxWidth:"500px",color:"#fff"},children:[C.jsxs("h3",{children:["Vendre ",e]}),C.jsxs("p",{children:["Investi : $",S,"  Valeur actuelle : $",b]}),C.jsxs("p",{style:{color:k>=0?"lightgreen":"salmon"},children:["P&L : $",k.toFixed(2)]}),C.jsxs("label",{children:["Pourcentage  vendre : ",r,"%"]}),C.jsx("input",{type:"range",min:"1",max:"100",value:r,onChange:c,style:{width:"100%"}}),C.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"1rem"},children:[C.jsx("button",{onClick:h,style:{padding:"8px 12px",backgroundColor:"#555",color:"#fff",border:"none"},children:"MAX"}),C.jsx("button",{onClick:o,style:{padding:"8px 12px",backgroundColor:"#999",color:"#fff",border:"none"},children:"Annuler"}),C.jsx("button",{onClick:l,style:{padding:"8px 12px",backgroundColor:"#dc3545",color:"#fff",border:"none"},children:"VENDRE"})]})]})})},p4=()=>{const{portfolioName:n,cash:e,positions:t,currentPrices:r,buyPosition:i,sellPosition:o,updatePrices:l,investedAmount:c,totalProfit:h,totalProfitPercent:d}=G.useContext(Gf),[m,y]=G.useState([]),[w,b]=G.useState(null),[S,k]=G.useState(!1),[T,N]=G.useState(""),[j,B]=G.useState(0),[K,q]=G.useState(100),[J,R]=G.useState(!0),[I,P]=G.useState([]),[O,L]=G.useState([]),[V,D]=G.useState({}),[ne,pe]=m_("ptStartDate",new Date);G.useEffect(()=>{pe(ne)},[ne]);const ie=(ce,be)=>{N(ce),B(be),q(100),k(!0)},ye=()=>{const ce=t?.find(Fe=>Fe.symbol===T);if(!ce)return;const be=K/100*ce.quantity;o(ce.id,be,j),k(!1)},re=(ce,be)=>{const Fe=window.prompt(`Montant en USD  investir dans ${ce} :`,"100"),gt=window.prompt("Take Profit en % (0 = dsactiv)","0"),Mn=window.prompt("Stop Loss en % (0 = dsactiv)","0"),gn=parseFloat(Fe),un=parseFloat(gt),yn=parseFloat(Mn);if(isNaN(gn)||gn<=0||isNaN(un)||isNaN(yn)){alert("Valeurs invalides.");return}if(gn>e){alert("Fonds insuffisants !");return}if(window.confirm(`Confirmer achat de ${ce} pour $${gn.toFixed(2)} (TP : ${un}%, SL : ${yn}%) ?`)){const hn=gn/be;i(ce,hn,be,un,yn)}},he=async()=>{const ce=document.getElementById("update-btn");ce&&(ce.classList.add("shake"),setTimeout(()=>ce.classList.remove("shake"),500));try{const{top5Up:be,top5Down:Fe,rest:gt}=await f4(),Mn=new Date().toLocaleTimeString(),gn=[...be,...Fe,...gt],un=Array.from(new Map(gn.map(hn=>[hn.symbol,hn])).values()),yn={};un.forEach(hn=>{const ji=m.find($s=>$s.symbol===hn.symbol);ji&&ji.currentPrice!==hn.currentPrice&&(yn[hn.symbol]=!0)}),D(yn),y(un),P(be),L(Fe),b(Mn),l()}catch(be){console.error("Erreur lors de la mise  jour :",be)}};G.useEffect(()=>{he();const ce=setInterval(he,300*1e3);return()=>clearInterval(ce)},[]),G.useEffect(()=>{t.forEach(ce=>{const be=r[ce.symbol]??ce.buyPrice;if(!be)return;const Fe=ce.tpPercent||0,gt=ce.slPercent||0;(Fe>0&&be>=ce.buyPrice*(1+Fe/100)||gt>0&&be<=ce.buyPrice*(1-gt/100))&&o(ce.id,ce.quantity,be)})},[r]);const F=["BTC","ETH","BNB","SOL","XRP","ADA","AVAX","DOGE","MATIC","DOT"],ee=useMemo(()=>[...m].sort((ce,be)=>{const Fe=F.indexOf(ce.symbol),gt=F.indexOf(be.symbol);return Fe!==-1&&gt!==-1?Fe-gt:Fe!==-1?-1:gt!==-1?1:ce.symbol.localeCompare(be.symbol)}),[m]),de=useMemo(()=>{const ce=(t??[]).reduce((be,Fe)=>{const gt=r?.[Fe.symbol]??Fe.buyPrice;return be+Fe.quantity*gt},0);return{count:t?.length??0,value:ce}},[t,r]),Te=ce=>q(Number(ce.target.value)),ke=()=>q(100),Le=()=>k(!1),Re=ce=>{const be=t?.some(gt=>gt.symbol===ce.symbol&&gt.quantity>0),Fe=V[ce.symbol];return C.jsxs("div",{style:{borderLeft:`6px solid ${ce.change5min>=0?"#0f0":"#f00"}`,backgroundColor:"rgba(30, 30, 30, 0.6)",backdropFilter:"blur(8px)",borderRadius:"8px",padding:"1rem",width:"100%",boxSizing:"border-box"},children:[C.jsxs("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",alignItems:"center"},children:[C.jsx("div",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:ce.symbol}),C.jsxs("div",{className:Fe?"animate-price":"",style:{color:"#ccc",fontSize:"1rem"},children:["$",ce.currentPrice?.toFixed(4)]}),C.jsxs("div",{style:{fontSize:"0.9rem",color:"#ccc",lineHeight:"1.4"},children:[C.jsxs("span",{style:{color:ce.change5min>=0?"lightgreen":"salmon"},children:["5m: ",ce.change5min?.toFixed(2),"%"]})," | ",C.jsxs("span",{style:{color:ce.change1d>=0?"lightgreen":"salmon"},children:["1j: ",ce.change1d?.toFixed(2),"%"]})," | ",C.jsxs("span",{style:{color:ce.change7d>=0?"lightgreen":"salmon"},children:["7j: ",ce.change7d?.toFixed(2),"%"]})]})]}),C.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"1rem",flexWrap:"wrap",gap:"1rem"},children:[C.jsx("button",{onClick:()=>re(ce.symbol,ce.currentPrice),style:{padding:"6px 12px",backgroundColor:"#4ea8de",color:"#fff",border:"none",borderRadius:"4px"},children:"ACHAT"}),C.jsx("button",{onClick:()=>ie(ce.symbol,ce.currentPrice),disabled:!be,style:{backgroundColor:be?"#dc3545":"#555",color:"#fff",padding:"6px 12px",border:"none",borderRadius:"4px"},children:"VENTE"}),C.jsx("a",{href:`https://www.tradingview.com/symbols/${ce.symbol}USD`,target:"_blank",rel:"noreferrer",style:{color:"#4ea8de",fontWeight:"bold",textDecoration:"none",alignSelf:"center"},children:" TradingView"})]})]},ce.symbol)};return C.jsxs("div",{style:{backgroundImage:'url("/backgrounds/homebackground.png")',backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed",padding:"6rem 2rem 2rem",minHeight:"100vh",color:"#fff",fontFamily:"sans-serif"},children:[C.jsxs("div",{style:{position:"sticky",top:"0",zIndex:100,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(8px)",padding:"1rem",marginBottom:"2rem",borderRadius:"6px"},children:[C.jsx("h1",{children:" TradingVirtuel"}),C.jsxs("h2",{style:{marginTop:"-1rem",color:"#aaa"},children:[n," |  Dbut : ",new Date(ne).toLocaleString()]}),C.jsxs("div",{style:{marginTop:"1rem"},children:[C.jsx("button",{onClick:()=>R(!J),style:{marginBottom:"1rem",padding:"6px 12px",backgroundColor:"#444",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:J?" Masquer les dtails":" Afficher les dtails"}),C.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",alignItems:"center"},children:[J&&C.jsxs(C.Fragment,{children:[C.jsxs("div",{children:[" Solde total : $",(e+c).toFixed(2)]}),C.jsxs("div",{children:[" Cash disponible : $",e.toFixed(2)]}),C.jsxs("div",{children:[" Investi : $",c.toFixed(2)]}),C.jsxs("div",{children:[" Positions places : ",de.count]}),C.jsxs("div",{children:[" Valeur actuelle : $",de.value.toFixed(2)]})]}),C.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.1rem",padding:"0.5rem 1rem",backgroundColor:"#222",borderRadius:"6px",color:h>=0?"lightgreen":"salmon",marginLeft:"auto"},children:[" Rendement total : $",h.toFixed(2)," (",d.toFixed(2),"%)"]})]})]}),C.jsxs("div",{style:{marginTop:"1rem"},children:[C.jsx("button",{id:"update-btn",onClick:he,style:{marginRight:"1rem",padding:"10px 20px",backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem"},children:" UPDATE PRICES NOW"}),w&&C.jsxs("span",{style:{fontSize:"0.9rem",color:"#ccc"},children:["Dernire mise  jour : ",w]})]})]}),C.jsxs("div",{style:{marginBottom:"1.5rem"},children:[C.jsx("h3",{children:" Top 5 hausses"}),C.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:I.map(Re)})]}),C.jsxs("div",{style:{marginBottom:"1.5rem"},children:[C.jsx("h3",{children:" Top 5 baisses"}),C.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:O.map(Re)})]}),C.jsx("h3",{children:" Autres cryptos"}),C.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:ee.map(Re)}),C.jsx(aI,{show:S,symbol:T,price:j,percent:K,positions:t,onChangePercent:Te,onSetMax:ke,onClose:Le,onConfirm:ye}),C.jsx("style",{children:`
        @keyframes shake {
          0% { transform: translateX(0); }
          20% { transform: translateX(-3px); }
          40% { transform: translateX(3px); }
          60% { transform: translateX(-2px); }
          80% { transform: translateX(2px); }
          100% { transform: translateX(0); }
        }
        .shake {
          animation: shake 0.4s ease-in-out;
        }
        .animate-price {
          animation: pulse 0.3s ease-in-out;
        }
        @keyframes pulse {
          0% { transform: scale(1); }
          50% { transform: scale(1.08); }
          100% { transform: scale(1); }
        }
      `})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Au(n){return n+.5|0}const ws=(n,e,t)=>Math.max(Math.min(n,t),e);function Dc(n){return ws(Au(n*2.55),0,255)}function ks(n){return ws(Au(n*255),0,255)}function Ci(n){return ws(Au(n/2.55)/100,0,1)}function sT(n){return ws(Au(n*100),0,100)}const nr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Wg=[..."0123456789ABCDEF"],m4=n=>Wg[n&15],g4=n=>Wg[(n&240)>>4]+Wg[n&15],rd=n=>(n&240)>>4===(n&15),y4=n=>rd(n.r)&&rd(n.g)&&rd(n.b)&&rd(n.a);function _4(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&nr[n[1]]*17,g:255&nr[n[2]]*17,b:255&nr[n[3]]*17,a:e===5?nr[n[4]]*17:255}:(e===7||e===9)&&(t={r:nr[n[1]]<<4|nr[n[2]],g:nr[n[3]]<<4|nr[n[4]],b:nr[n[5]]<<4|nr[n[6]],a:e===9?nr[n[7]]<<4|nr[n[8]]:255})),t}const v4=(n,e)=>n<255?e(n):"";function w4(n){var e=y4(n)?m4:g4;return n?"#"+e(n.r)+e(n.g)+e(n.b)+v4(n.a,e):void 0}const E4=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function lI(n,e,t){const r=e*Math.min(t,1-t),i=(o,l=(o+n/30)%12)=>t-r*Math.max(Math.min(l-3,9-l,1),-1);return[i(0),i(8),i(4)]}function T4(n,e,t){const r=(i,o=(i+n/60)%6)=>t-t*e*Math.max(Math.min(o,4-o,1),0);return[r(5),r(3),r(1)]}function b4(n,e,t){const r=lI(n,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)r[i]*=1-e-t,r[i]+=e;return r}function x4(n,e,t,r,i){return n===i?(e-t)/r+(e<t?6:0):e===i?(t-n)/r+2:(n-e)/r+4}function g_(n){const t=n.r/255,r=n.g/255,i=n.b/255,o=Math.max(t,r,i),l=Math.min(t,r,i),c=(o+l)/2;let h,d,m;return o!==l&&(m=o-l,d=c>.5?m/(2-o-l):m/(o+l),h=x4(t,r,i,m,o),h=h*60+.5),[h|0,d||0,c]}function y_(n,e,t,r){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,r)).map(ks)}function __(n,e,t){return y_(lI,n,e,t)}function S4(n,e,t){return y_(b4,n,e,t)}function I4(n,e,t){return y_(T4,n,e,t)}function cI(n){return(n%360+360)%360}function k4(n){const e=E4.exec(n);let t=255,r;if(!e)return;e[5]!==r&&(t=e[6]?Dc(+e[5]):ks(+e[5]));const i=cI(+e[2]),o=+e[3]/100,l=+e[4]/100;return e[1]==="hwb"?r=S4(i,o,l):e[1]==="hsv"?r=I4(i,o,l):r=__(i,o,l),{r:r[0],g:r[1],b:r[2],a:t}}function C4(n,e){var t=g_(n);t[0]=cI(t[0]+e),t=__(t),n.r=t[0],n.g=t[1],n.b=t[2]}function P4(n){if(!n)return;const e=g_(n),t=e[0],r=sT(e[1]),i=sT(e[2]);return n.a<255?`hsla(${t}, ${r}%, ${i}%, ${Ci(n.a)})`:`hsl(${t}, ${r}%, ${i}%)`}const oT={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},aT={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function A4(){const n={},e=Object.keys(aT),t=Object.keys(oT);let r,i,o,l,c;for(r=0;r<e.length;r++){for(l=c=e[r],i=0;i<t.length;i++)o=t[i],c=c.replace(o,oT[o]);o=parseInt(aT[l],16),n[c]=[o>>16&255,o>>8&255,o&255]}return n}let id;function R4(n){id||(id=A4(),id.transparent=[0,0,0,0]);const e=id[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const D4=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function O4(n){const e=D4.exec(n);let t=255,r,i,o;if(e){if(e[7]!==r){const l=+e[7];t=e[8]?Dc(l):ws(l*255,0,255)}return r=+e[1],i=+e[3],o=+e[5],r=255&(e[2]?Dc(r):ws(r,0,255)),i=255&(e[4]?Dc(i):ws(i,0,255)),o=255&(e[6]?Dc(o):ws(o,0,255)),{r,g:i,b:o,a:t}}}function M4(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Ci(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Jm=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,ja=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function N4(n,e,t){const r=ja(Ci(n.r)),i=ja(Ci(n.g)),o=ja(Ci(n.b));return{r:ks(Jm(r+t*(ja(Ci(e.r))-r))),g:ks(Jm(i+t*(ja(Ci(e.g))-i))),b:ks(Jm(o+t*(ja(Ci(e.b))-o))),a:n.a+t*(e.a-n.a)}}function sd(n,e,t){if(n){let r=g_(n);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,e===0?360:1)),r=__(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function uI(n,e){return n&&Object.assign(e||{},n)}function lT(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=ks(n[3]))):(e=uI(n,{r:0,g:0,b:0,a:1}),e.a=ks(e.a)),e}function L4(n){return n.charAt(0)==="r"?O4(n):k4(n)}class lu{constructor(e){if(e instanceof lu)return e;const t=typeof e;let r;t==="object"?r=lT(e):t==="string"&&(r=_4(e)||R4(e)||L4(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=uI(this._rgb);return e&&(e.a=Ci(e.a)),e}set rgb(e){this._rgb=lT(e)}rgbString(){return this._valid?M4(this._rgb):void 0}hexString(){return this._valid?w4(this._rgb):void 0}hslString(){return this._valid?P4(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,i=e.rgb;let o;const l=t===o?.5:t,c=2*l-1,h=r.a-i.a,d=((c*h===-1?c:(c+h)/(1+c*h))+1)/2;o=1-d,r.r=255&d*r.r+o*i.r+.5,r.g=255&d*r.g+o*i.g+.5,r.b=255&d*r.b+o*i.b+.5,r.a=l*r.a+(1-l)*i.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=N4(this._rgb,e._rgb,t)),this}clone(){return new lu(this.rgb)}alpha(e){return this._rgb.a=ks(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Au(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return sd(this._rgb,2,e),this}darken(e){return sd(this._rgb,2,-e),this}saturate(e){return sd(this._rgb,1,e),this}desaturate(e){return sd(this._rgb,1,-e),this}rotate(e){return C4(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Si(){}const V4=(()=>{let n=0;return()=>n++})();function ct(n){return n==null}function Xt(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ke(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function ar(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Hr(n,e){return ar(n)?n:e}function qe(n,e){return typeof n>"u"?e:n}const F4=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function at(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Ze(n,e,t,r){let i,o,l;if(Xt(n))for(o=n.length,i=0;i<o;i++)e.call(t,n[i],i);else if(Ke(n))for(l=Object.keys(n),o=l.length,i=0;i<o;i++)e.call(t,n[l[i]],l[i])}function sf(n,e){let t,r,i,o;if(!n||!e||n.length!==e.length)return!1;for(t=0,r=n.length;t<r;++t)if(i=n[t],o=e[t],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function of(n){if(Xt(n))return n.map(of);if(Ke(n)){const e=Object.create(null),t=Object.keys(n),r=t.length;let i=0;for(;i<r;++i)e[t[i]]=of(n[t[i]]);return e}return n}function hI(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function j4(n,e,t,r){if(!hI(n))return;const i=e[n],o=t[n];Ke(i)&&Ke(o)?cu(i,o,r):e[n]=of(o)}function cu(n,e,t){const r=Xt(e)?e:[e],i=r.length;if(!Ke(n))return n;t=t||{};const o=t.merger||j4;let l;for(let c=0;c<i;++c){if(l=r[c],!Ke(l))continue;const h=Object.keys(l);for(let d=0,m=h.length;d<m;++d)o(h[d],n,l,t)}return n}function $c(n,e){return cu(n,e,{merger:U4})}function U4(n,e,t){if(!hI(n))return;const r=e[n],i=t[n];Ke(r)&&Ke(i)?$c(r,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=of(i))}const cT={"":n=>n,x:n=>n.x,y:n=>n.y};function z4(n){const e=n.split("."),t=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}function B4(n){const e=z4(n);return t=>{for(const r of e){if(r==="")break;t=t&&t[r]}return t}}function af(n,e){return(cT[e]||(cT[e]=B4(e)))(n)}function v_(n){return n.charAt(0).toUpperCase()+n.slice(1)}const lf=n=>typeof n<"u",Ns=n=>typeof n=="function",uT=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function $4(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const ln=Math.PI,ii=2*ln,H4=ii+ln,cf=Number.POSITIVE_INFINITY,W4=ln/180,xr=ln/2,_o=ln/4,hT=ln*2/3,dI=Math.log10,il=Math.sign;function Hc(n,e,t){return Math.abs(n-e)<t}function dT(n){const e=Math.round(n);n=Hc(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(dI(n))),r=n/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function q4(n){const e=[],t=Math.sqrt(n);let r;for(r=1;r<t;r++)n%r===0&&(e.push(r),e.push(n/r));return t===(t|0)&&e.push(t),e.sort((i,o)=>i-o).pop(),e}function G4(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function uu(n){return!G4(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function K4(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function Y4(n,e,t){let r,i,o;for(r=0,i=n.length;r<i;r++)o=n[r][t],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function Co(n){return n*(ln/180)}function Q4(n){return n*(180/ln)}function fT(n){if(!ar(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function X4(n,e){const t=e.x-n.x,r=e.y-n.y,i=Math.sqrt(t*t+r*r);let o=Math.atan2(r,t);return o<-.5*ln&&(o+=ii),{angle:o,distance:i}}function qg(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function J4(n,e){return(n-e+H4)%ii-ln}function fs(n){return(n%ii+ii)%ii}function fI(n,e,t,r){const i=fs(n),o=fs(e),l=fs(t),c=fs(o-i),h=fs(l-i),d=fs(i-o),m=fs(i-l);return i===o||i===l||r&&o===l||c>h&&d<m}function Sr(n,e,t){return Math.max(e,Math.min(t,n))}function Z4(n){return Sr(n,-32768,32767)}function Oc(n,e,t,r=1e-6){return n>=Math.min(e,t)-r&&n<=Math.max(e,t)+r}function w_(n,e,t){t=t||(l=>n[l]<e);let r=n.length-1,i=0,o;for(;r-i>1;)o=i+r>>1,t(o)?i=o:r=o;return{lo:i,hi:r}}const Po=(n,e,t,r)=>w_(n,t,r?i=>{const o=n[i][e];return o<t||o===t&&n[i+1][e]===t}:i=>n[i][e]<t),ej=(n,e,t)=>w_(n,t,r=>n[r][e]>=t);function tj(n,e,t){let r=0,i=n.length;for(;r<i&&n[r]<e;)r++;for(;i>r&&n[i-1]>t;)i--;return r>0||i<n.length?n.slice(r,i):n}const pI=["push","pop","shift","splice","unshift"];function nj(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),pI.forEach(t=>{const r="_onData"+v_(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...o){const l=i.apply(this,o);return n._chartjs.listeners.forEach(c=>{typeof c[r]=="function"&&c[r](...o)}),l}})})}function pT(n,e){const t=n._chartjs;if(!t)return;const r=t.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(pI.forEach(o=>{delete n[o]}),delete n._chartjs)}function rj(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const mI=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function gI(n,e){let t=[],r=!1;return function(...i){t=i,r||(r=!0,mI.call(window,()=>{r=!1,n.apply(e,t)}))}}function ij(n,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(n,e,r)):n.apply(this,r),e}}const yI=n=>n==="start"?"left":n==="end"?"right":"center",Bn=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,sj=(n,e,t,r)=>n===(r?"left":"right")?t:n==="center"?(e+t)/2:e;function oj(n,e,t){const r=e.length;let i=0,o=r;if(n._sorted){const{iScale:l,vScale:c,_parsed:h}=n,d=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,m=l.axis,{min:y,max:w,minDefined:b,maxDefined:S}=l.getUserBounds();if(b){if(i=Math.min(Po(h,m,y).lo,t?r:Po(e,m,l.getPixelForValue(y)).lo),d){const k=h.slice(0,i+1).reverse().findIndex(T=>!ct(T[c.axis]));i-=Math.max(0,k)}i=Sr(i,0,r-1)}if(S){let k=Math.max(Po(h,l.axis,w,!0).hi+1,t?0:Po(e,m,l.getPixelForValue(w),!0).hi+1);if(d){const T=h.slice(k-1).findIndex(N=>!ct(N[c.axis]));k+=Math.max(0,T)}o=Sr(k,i,r)-i}else o=r-i}return{start:i,count:o}}function aj(n){const{xScale:e,yScale:t,_scaleRanges:r}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return n._scaleRanges=i,!0;const o=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,i),o}const od=n=>n===0||n===1,mT=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*ii/t)),gT=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*ii/t)+1,Wc={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*xr)+1,easeOutSine:n=>Math.sin(n*xr),easeInOutSine:n=>-.5*(Math.cos(ln*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>od(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>od(n)?n:mT(n,.075,.3),easeOutElastic:n=>od(n)?n:gT(n,.075,.3),easeInOutElastic(n){return od(n)?n:n<.5?.5*mT(n*2,.1125,.45):.5+.5*gT(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Wc.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Wc.easeInBounce(n*2)*.5:Wc.easeOutBounce(n*2-1)*.5+.5};function E_(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function yT(n){return E_(n)?n:new lu(n)}function Zm(n){return E_(n)?n:new lu(n).saturate(.5).darken(.1).hexString()}const lj=["x","y","borderWidth","radius","tension"],cj=["color","borderColor","backgroundColor"];function uj(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:cj},numbers:{type:"number",properties:lj}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function hj(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const _T=new Map;function dj(n,e){e=e||{};const t=n+JSON.stringify(e);let r=_T.get(t);return r||(r=new Intl.NumberFormat(n,e),_T.set(t,r)),r}function _I(n,e,t){return dj(e,t).format(n)}const fj={values(n){return Xt(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const r=this.chart.options.locale;let i,o=n;if(t.length>1){const d=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(d<1e-4||d>1e15)&&(i="scientific"),o=pj(n,t)}const l=dI(Math.abs(o)),c=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),h={notation:i,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(h,this.options.ticks.format),_I(n,r,h)}};function pj(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var vI={formatters:fj};function mj(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:vI.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Uo=Object.create(null),Gg=Object.create(null);function qc(n,e){if(!e)return n;const t=e.split(".");for(let r=0,i=t.length;r<i;++r){const o=t[r];n=n[o]||(n[o]=Object.create(null))}return n}function eg(n,e,t){return typeof e=="string"?cu(qc(n,e),t):cu(qc(n,""),e)}class gj{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>Zm(i.backgroundColor),this.hoverBorderColor=(r,i)=>Zm(i.borderColor),this.hoverColor=(r,i)=>Zm(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return eg(this,e,t)}get(e){return qc(this,e)}describe(e,t){return eg(Gg,e,t)}override(e,t){return eg(Uo,e,t)}route(e,t,r,i){const o=qc(this,e),l=qc(this,r),c="_"+t;Object.defineProperties(o,{[c]:{value:o[t],writable:!0},[t]:{enumerable:!0,get(){const h=this[c],d=l[i];return Ke(h)?Object.assign({},d,h):qe(h,d)},set(h){this[c]=h}}})}apply(e){e.forEach(t=>t(this))}}var xt=new gj({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[uj,hj,mj]);function yj(n){return!n||ct(n.size)||ct(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function vT(n,e,t,r,i){let o=e[i];return o||(o=e[i]=n.measureText(i).width,t.push(i)),o>r&&(r=o),r}function vo(n,e,t){const r=n.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*r)/r+i}function wT(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function Kg(n,e,t,r){wI(n,e,t,r,null)}function wI(n,e,t,r,i){let o,l,c,h,d,m,y,w;const b=e.pointStyle,S=e.rotation,k=e.radius;let T=(S||0)*W4;if(b&&typeof b=="object"&&(o=b.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(t,r),n.rotate(T),n.drawImage(b,-b.width/2,-b.height/2,b.width,b.height),n.restore();return}if(!(isNaN(k)||k<=0)){switch(n.beginPath(),b){default:i?n.ellipse(t,r,i/2,k,0,0,ii):n.arc(t,r,k,0,ii),n.closePath();break;case"triangle":m=i?i/2:k,n.moveTo(t+Math.sin(T)*m,r-Math.cos(T)*k),T+=hT,n.lineTo(t+Math.sin(T)*m,r-Math.cos(T)*k),T+=hT,n.lineTo(t+Math.sin(T)*m,r-Math.cos(T)*k),n.closePath();break;case"rectRounded":d=k*.516,h=k-d,l=Math.cos(T+_o)*h,y=Math.cos(T+_o)*(i?i/2-d:h),c=Math.sin(T+_o)*h,w=Math.sin(T+_o)*(i?i/2-d:h),n.arc(t-y,r-c,d,T-ln,T-xr),n.arc(t+w,r-l,d,T-xr,T),n.arc(t+y,r+c,d,T,T+xr),n.arc(t-w,r+l,d,T+xr,T+ln),n.closePath();break;case"rect":if(!S){h=Math.SQRT1_2*k,m=i?i/2:h,n.rect(t-m,r-h,2*m,2*h);break}T+=_o;case"rectRot":y=Math.cos(T)*(i?i/2:k),l=Math.cos(T)*k,c=Math.sin(T)*k,w=Math.sin(T)*(i?i/2:k),n.moveTo(t-y,r-c),n.lineTo(t+w,r-l),n.lineTo(t+y,r+c),n.lineTo(t-w,r+l),n.closePath();break;case"crossRot":T+=_o;case"cross":y=Math.cos(T)*(i?i/2:k),l=Math.cos(T)*k,c=Math.sin(T)*k,w=Math.sin(T)*(i?i/2:k),n.moveTo(t-y,r-c),n.lineTo(t+y,r+c),n.moveTo(t+w,r-l),n.lineTo(t-w,r+l);break;case"star":y=Math.cos(T)*(i?i/2:k),l=Math.cos(T)*k,c=Math.sin(T)*k,w=Math.sin(T)*(i?i/2:k),n.moveTo(t-y,r-c),n.lineTo(t+y,r+c),n.moveTo(t+w,r-l),n.lineTo(t-w,r+l),T+=_o,y=Math.cos(T)*(i?i/2:k),l=Math.cos(T)*k,c=Math.sin(T)*k,w=Math.sin(T)*(i?i/2:k),n.moveTo(t-y,r-c),n.lineTo(t+y,r+c),n.moveTo(t+w,r-l),n.lineTo(t-w,r+l);break;case"line":l=i?i/2:Math.cos(T)*k,c=Math.sin(T)*k,n.moveTo(t-l,r-c),n.lineTo(t+l,r+c);break;case"dash":n.moveTo(t,r),n.lineTo(t+Math.cos(T)*(i?i/2:k),r+Math.sin(T)*k);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function hu(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function T_(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function b_(n){n.restore()}function _j(n,e,t,r,i){if(!e)return n.lineTo(t.x,t.y);if(i==="middle"){const o=(e.x+t.x)/2;n.lineTo(o,e.y),n.lineTo(o,t.y)}else i==="after"!=!!r?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function vj(n,e,t,r){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function wj(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),ct(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function Ej(n,e,t,r,i){if(i.strikethrough||i.underline){const o=n.measureText(r),l=e-o.actualBoundingBoxLeft,c=e+o.actualBoundingBoxRight,h=t-o.actualBoundingBoxAscent,d=t+o.actualBoundingBoxDescent,m=i.strikethrough?(h+d)/2:d;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(l,m),n.lineTo(c,m),n.stroke()}}function Tj(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function uf(n,e,t,r,i,o={}){const l=Xt(e)?e:[e],c=o.strokeWidth>0&&o.strokeColor!=="";let h,d;for(n.save(),n.font=i.string,wj(n,o),h=0;h<l.length;++h)d=l[h],o.backdrop&&Tj(n,o.backdrop),c&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),ct(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(d,t,r,o.maxWidth)),n.fillText(d,t,r,o.maxWidth),Ej(n,t,r,d,o),r+=Number(i.lineHeight);n.restore()}function Yg(n,e){const{x:t,y:r,w:i,h:o,radius:l}=e;n.arc(t+l.topLeft,r+l.topLeft,l.topLeft,1.5*ln,ln,!0),n.lineTo(t,r+o-l.bottomLeft),n.arc(t+l.bottomLeft,r+o-l.bottomLeft,l.bottomLeft,ln,xr,!0),n.lineTo(t+i-l.bottomRight,r+o),n.arc(t+i-l.bottomRight,r+o-l.bottomRight,l.bottomRight,xr,0,!0),n.lineTo(t+i,r+l.topRight),n.arc(t+i-l.topRight,r+l.topRight,l.topRight,0,-xr,!0),n.lineTo(t+l.topLeft,r)}const bj=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,xj=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Sj(n,e){const t=(""+n).match(bj);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const Ij=n=>+n||0;function EI(n,e){const t={},r=Ke(e),i=r?Object.keys(e):e,o=Ke(n)?r?l=>qe(n[l],n[e[l]]):l=>n[l]:()=>n;for(const l of i)t[l]=Ij(o(l));return t}function kj(n){return EI(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Gc(n){return EI(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Pr(n){const e=kj(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function An(n,e){n=n||{},e=e||xt.font;let t=qe(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let r=qe(n.style,e.style);r&&!(""+r).match(xj)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:qe(n.family,e.family),lineHeight:Sj(qe(n.lineHeight,e.lineHeight),t),size:t,style:r,weight:qe(n.weight,e.weight),string:""};return i.string=yj(i),i}function ad(n,e,t,r){let i,o,l;for(i=0,o=n.length;i<o;++i)if(l=n[i],l!==void 0&&l!==void 0)return l}function Cj(n,e,t){const{min:r,max:i}=n,o=F4(e,(i-r)/2),l=(c,h)=>t&&c===0?0:c+h;return{min:l(r,-Math.abs(o)),max:l(i,o)}}function qo(n,e){return Object.assign(Object.create(n),e)}function x_(n,e=[""],t,r,i=()=>n[0]){const o=t||n;typeof r>"u"&&(r=SI("_fallback",n));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:r,_getTarget:i,override:c=>x_([c,...n],e,o,r)};return new Proxy(l,{deleteProperty(c,h){return delete c[h],delete c._keys,delete n[0][h],!0},get(c,h){return bI(c,h,()=>Lj(h,e,n,c))},getOwnPropertyDescriptor(c,h){return Reflect.getOwnPropertyDescriptor(c._scopes[0],h)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(c,h){return TT(c).includes(h)},ownKeys(c){return TT(c)},set(c,h,d){const m=c._storage||(c._storage=i());return c[h]=m[h]=d,delete c._keys,!0}})}function sl(n,e,t,r){const i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:TI(n,r),setContext:o=>sl(n,o,t,r),override:o=>sl(n.override(o),e,t,r)};return new Proxy(i,{deleteProperty(o,l){return delete o[l],delete n[l],!0},get(o,l,c){return bI(o,l,()=>Aj(o,l,c))},getOwnPropertyDescriptor(o,l){return o._descriptors.allKeys?Reflect.has(n,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,l)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,l){return Reflect.has(n,l)},ownKeys(){return Reflect.ownKeys(n)},set(o,l,c){return n[l]=c,delete o[l],!0}})}function TI(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:r,isScriptable:Ns(t)?t:()=>t,isIndexable:Ns(r)?r:()=>r}}const Pj=(n,e)=>n?n+v_(e):e,S_=(n,e)=>Ke(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function bI(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const r=t();return n[e]=r,r}function Aj(n,e,t){const{_proxy:r,_context:i,_subProxy:o,_descriptors:l}=n;let c=r[e];return Ns(c)&&l.isScriptable(e)&&(c=Rj(e,c,n,t)),Xt(c)&&c.length&&(c=Dj(e,c,n,l.isIndexable)),S_(e,c)&&(c=sl(c,i,o&&o[e],l)),c}function Rj(n,e,t,r){const{_proxy:i,_context:o,_subProxy:l,_stack:c}=t;if(c.has(n))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+n);c.add(n);let h=e(o,l||r);return c.delete(n),S_(n,h)&&(h=I_(i._scopes,i,n,h)),h}function Dj(n,e,t,r){const{_proxy:i,_context:o,_subProxy:l,_descriptors:c}=t;if(typeof o.index<"u"&&r(n))return e[o.index%e.length];if(Ke(e[0])){const h=e,d=i._scopes.filter(m=>m!==h);e=[];for(const m of h){const y=I_(d,i,n,m);e.push(sl(y,o,l&&l[n],c))}}return e}function xI(n,e,t){return Ns(n)?n(e,t):n}const Oj=(n,e)=>n===!0?e:typeof n=="string"?af(e,n):void 0;function Mj(n,e,t,r,i){for(const o of e){const l=Oj(t,o);if(l){n.add(l);const c=xI(l._fallback,t,i);if(typeof c<"u"&&c!==t&&c!==r)return c}else if(l===!1&&typeof r<"u"&&t!==r)return null}return!1}function I_(n,e,t,r){const i=e._rootScopes,o=xI(e._fallback,t,r),l=[...n,...i],c=new Set;c.add(r);let h=ET(c,l,t,o||t,r);return h===null||typeof o<"u"&&o!==t&&(h=ET(c,l,o,h,r),h===null)?!1:x_(Array.from(c),[""],i,o,()=>Nj(e,t,r))}function ET(n,e,t,r,i){for(;t;)t=Mj(n,e,t,r,i);return t}function Nj(n,e,t){const r=n._getTarget();e in r||(r[e]={});const i=r[e];return Xt(i)&&Ke(t)?t:i||{}}function Lj(n,e,t,r){let i;for(const o of e)if(i=SI(Pj(o,n),t),typeof i<"u")return S_(n,i)?I_(t,r,n,i):i}function SI(n,e){for(const t of e){if(!t)continue;const r=t[n];if(typeof r<"u")return r}}function TT(n){let e=n._keys;return e||(e=n._keys=Vj(n._scopes)),e}function Vj(n){const e=new Set;for(const t of n)for(const r of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const Fj=Number.EPSILON||1e-14,ol=(n,e)=>e<n.length&&!n[e].skip&&n[e],II=n=>n==="x"?"y":"x";function jj(n,e,t,r){const i=n.skip?e:n,o=e,l=t.skip?e:t,c=qg(o,i),h=qg(l,o);let d=c/(c+h),m=h/(c+h);d=isNaN(d)?0:d,m=isNaN(m)?0:m;const y=r*d,w=r*m;return{previous:{x:o.x-y*(l.x-i.x),y:o.y-y*(l.y-i.y)},next:{x:o.x+w*(l.x-i.x),y:o.y+w*(l.y-i.y)}}}function Uj(n,e,t){const r=n.length;let i,o,l,c,h,d=ol(n,0);for(let m=0;m<r-1;++m)if(h=d,d=ol(n,m+1),!(!h||!d)){if(Hc(e[m],0,Fj)){t[m]=t[m+1]=0;continue}i=t[m]/e[m],o=t[m+1]/e[m],c=Math.pow(i,2)+Math.pow(o,2),!(c<=9)&&(l=3/Math.sqrt(c),t[m]=i*l*e[m],t[m+1]=o*l*e[m])}}function zj(n,e,t="x"){const r=II(t),i=n.length;let o,l,c,h=ol(n,0);for(let d=0;d<i;++d){if(l=c,c=h,h=ol(n,d+1),!c)continue;const m=c[t],y=c[r];l&&(o=(m-l[t])/3,c[`cp1${t}`]=m-o,c[`cp1${r}`]=y-o*e[d]),h&&(o=(h[t]-m)/3,c[`cp2${t}`]=m+o,c[`cp2${r}`]=y+o*e[d])}}function Bj(n,e="x"){const t=II(e),r=n.length,i=Array(r).fill(0),o=Array(r);let l,c,h,d=ol(n,0);for(l=0;l<r;++l)if(c=h,h=d,d=ol(n,l+1),!!h){if(d){const m=d[e]-h[e];i[l]=m!==0?(d[t]-h[t])/m:0}o[l]=c?d?il(i[l-1])!==il(i[l])?0:(i[l-1]+i[l])/2:i[l-1]:i[l]}Uj(n,i,o),zj(n,o,e)}function ld(n,e,t){return Math.max(Math.min(n,t),e)}function $j(n,e){let t,r,i,o,l,c=hu(n[0],e);for(t=0,r=n.length;t<r;++t)l=o,o=c,c=t<r-1&&hu(n[t+1],e),o&&(i=n[t],l&&(i.cp1x=ld(i.cp1x,e.left,e.right),i.cp1y=ld(i.cp1y,e.top,e.bottom)),c&&(i.cp2x=ld(i.cp2x,e.left,e.right),i.cp2y=ld(i.cp2y,e.top,e.bottom)))}function Hj(n,e,t,r,i){let o,l,c,h;if(e.spanGaps&&(n=n.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")Bj(n,i);else{let d=r?n[n.length-1]:n[0];for(o=0,l=n.length;o<l;++o)c=n[o],h=jj(d,c,n[Math.min(o+1,l-(r?0:1))%l],e.tension),c.cp1x=h.previous.x,c.cp1y=h.previous.y,c.cp2x=h.next.x,c.cp2y=h.next.y,d=c}e.capBezierPoints&&$j(n,t)}function k_(){return typeof window<"u"&&typeof document<"u"}function C_(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function hf(n,e,t){let r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!==-1&&(r=r/100*e.parentNode[t])):r=n,r}const Kf=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function Wj(n,e){return Kf(n).getPropertyValue(e)}const qj=["top","right","bottom","left"];function Do(n,e,t){const r={};t=t?"-"+t:"";for(let i=0;i<4;i++){const o=qj[i];r[o]=parseFloat(n[e+"-"+o+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const Gj=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function Kj(n,e){const t=n.touches,r=t&&t.length?t[0]:n,{offsetX:i,offsetY:o}=r;let l=!1,c,h;if(Gj(i,o,n.target))c=i,h=o;else{const d=e.getBoundingClientRect();c=r.clientX-d.left,h=r.clientY-d.top,l=!0}return{x:c,y:h,box:l}}function To(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:r}=e,i=Kf(t),o=i.boxSizing==="border-box",l=Do(i,"padding"),c=Do(i,"border","width"),{x:h,y:d,box:m}=Kj(n,t),y=l.left+(m&&c.left),w=l.top+(m&&c.top);let{width:b,height:S}=e;return o&&(b-=l.width+c.width,S-=l.height+c.height),{x:Math.round((h-y)/b*t.width/r),y:Math.round((d-w)/S*t.height/r)}}function Yj(n,e,t){let r,i;if(e===void 0||t===void 0){const o=n&&C_(n);if(!o)e=n.clientWidth,t=n.clientHeight;else{const l=o.getBoundingClientRect(),c=Kf(o),h=Do(c,"border","width"),d=Do(c,"padding");e=l.width-d.width-h.width,t=l.height-d.height-h.height,r=hf(c.maxWidth,o,"clientWidth"),i=hf(c.maxHeight,o,"clientHeight")}}return{width:e,height:t,maxWidth:r||cf,maxHeight:i||cf}}const cd=n=>Math.round(n*10)/10;function Qj(n,e,t,r){const i=Kf(n),o=Do(i,"margin"),l=hf(i.maxWidth,n,"clientWidth")||cf,c=hf(i.maxHeight,n,"clientHeight")||cf,h=Yj(n,e,t);let{width:d,height:m}=h;if(i.boxSizing==="content-box"){const w=Do(i,"border","width"),b=Do(i,"padding");d-=b.width+w.width,m-=b.height+w.height}return d=Math.max(0,d-o.width),m=Math.max(0,r?d/r:m-o.height),d=cd(Math.min(d,l,h.maxWidth)),m=cd(Math.min(m,c,h.maxHeight)),d&&!m&&(m=cd(d/2)),(e!==void 0||t!==void 0)&&r&&h.height&&m>h.height&&(m=h.height,d=cd(Math.floor(m*r))),{width:d,height:m}}function bT(n,e,t){const r=e||1,i=Math.floor(n.height*r),o=Math.floor(n.width*r);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const l=n.canvas;return l.style&&(t||!l.style.height&&!l.style.width)&&(l.style.height=`${n.height}px`,l.style.width=`${n.width}px`),n.currentDevicePixelRatio!==r||l.height!==i||l.width!==o?(n.currentDevicePixelRatio=r,l.height=i,l.width=o,n.ctx.setTransform(r,0,0,r,0,0),!0):!1}const Xj=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};k_()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function xT(n,e){const t=Wj(n,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function bo(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function Jj(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:r==="middle"?t<.5?n.y:e.y:r==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function Zj(n,e,t,r){const i={x:n.cp2x,y:n.cp2y},o={x:e.cp1x,y:e.cp1y},l=bo(n,i,t),c=bo(i,o,t),h=bo(o,e,t),d=bo(l,c,t),m=bo(c,h,t);return bo(d,m,t)}const e3=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,r){return t-r},leftForLtr(t,r){return t-r}}},t3=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Xa(n,e,t){return n?e3(e,t):t3()}function kI(n,e){let t,r;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=r)}function CI(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function PI(n){return n==="angle"?{between:fI,compare:J4,normalize:fs}:{between:Oc,compare:(e,t)=>e-t,normalize:e=>e}}function ST({start:n,end:e,count:t,loop:r,style:i}){return{start:n%t,end:e%t,loop:r&&(e-n+1)%t===0,style:i}}function n3(n,e,t){const{property:r,start:i,end:o}=t,{between:l,normalize:c}=PI(r),h=e.length;let{start:d,end:m,loop:y}=n,w,b;if(y){for(d+=h,m+=h,w=0,b=h;w<b&&l(c(e[d%h][r]),i,o);++w)d--,m--;d%=h,m%=h}return m<d&&(m+=h),{start:d,end:m,loop:y,style:n.style}}function r3(n,e,t){if(!t)return[n];const{property:r,start:i,end:o}=t,l=e.length,{compare:c,between:h,normalize:d}=PI(r),{start:m,end:y,loop:w,style:b}=n3(n,e,t),S=[];let k=!1,T=null,N,j,B;const K=()=>h(i,B,N)&&c(i,B)!==0,q=()=>c(o,N)===0||h(o,B,N),J=()=>k||K(),R=()=>!k||q();for(let I=m,P=m;I<=y;++I)j=e[I%l],!j.skip&&(N=d(j[r]),N!==B&&(k=h(N,i,o),T===null&&J()&&(T=c(N,i)===0?I:P),T!==null&&R()&&(S.push(ST({start:T,end:I,loop:w,count:l,style:b})),T=null),P=I,B=N));return T!==null&&S.push(ST({start:T,end:y,loop:w,count:l,style:b})),S}function i3(n,e){const t=[],r=n.segments;for(let i=0;i<r.length;i++){const o=r3(r[i],n.points,e);o.length&&t.push(...o)}return t}function s3(n,e,t,r){let i=0,o=e-1;if(t&&!r)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(o+=i);o>i&&n[o%e].skip;)o--;return o%=e,{start:i,end:o}}function o3(n,e,t,r){const i=n.length,o=[];let l=e,c=n[e],h;for(h=e+1;h<=t;++h){const d=n[h%i];d.skip||d.stop?c.skip||(r=!1,o.push({start:e%i,end:(h-1)%i,loop:r}),e=l=d.stop?h:null):(l=h,c.skip&&(e=h)),c=d}return l!==null&&o.push({start:e%i,end:l%i,loop:r}),o}function a3(n,e){const t=n.points,r=n.options.spanGaps,i=t.length;if(!i)return[];const o=!!n._loop,{start:l,end:c}=s3(t,i,o,r);if(r===!0)return IT(n,[{start:l,end:c,loop:o}],t,e);const h=c<l?c+i:c,d=!!n._fullLoop&&l===0&&c===i-1;return IT(n,o3(t,l,h,d),t,e)}function IT(n,e,t,r){return!r||!r.setContext||!t?e:l3(n,e,t,r)}function l3(n,e,t,r){const i=n._chart.getContext(),o=kT(n.options),{_datasetIndex:l,options:{spanGaps:c}}=n,h=t.length,d=[];let m=o,y=e[0].start,w=y;function b(S,k,T,N){const j=c?-1:1;if(S!==k){for(S+=h;t[S%h].skip;)S-=j;for(;t[k%h].skip;)k+=j;S%h!==k%h&&(d.push({start:S%h,end:k%h,loop:T,style:N}),m=N,y=k%h)}}for(const S of e){y=c?y:S.start;let k=t[y%h],T;for(w=y+1;w<=S.end;w++){const N=t[w%h];T=kT(r.setContext(qo(i,{type:"segment",p0:k,p1:N,p0DataIndex:(w-1)%h,p1DataIndex:w%h,datasetIndex:l}))),c3(T,m)&&b(y,w-1,S.loop,m),k=N,m=T}y<w-1&&b(y,w-1,S.loop,m)}return d}function kT(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function c3(n,e){if(!e)return!1;const t=[],r=function(i,o){return E_(o)?(t.includes(o)||t.push(o),t.indexOf(o)):o};return JSON.stringify(n,r)!==JSON.stringify(e,r)}function ud(n,e,t){return n.options.clip?n[t]:e[t]}function u3(n,e){const{xScale:t,yScale:r}=n;return t&&r?{left:ud(t,e,"left"),right:ud(t,e,"right"),top:ud(r,e,"top"),bottom:ud(r,e,"bottom")}:e}function h3(n,e){const t=e._clip;if(t.disabled)return!1;const r=u3(e,n.chartArea);return{left:t.left===!1?0:r.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:r.right+(t.right===!0?0:t.right),top:t.top===!1?0:r.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:r.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class d3{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,i){const o=t.listeners[i],l=t.duration;o.forEach(c=>c({chart:e,initial:t.initial,numSteps:l,currentStep:Math.min(r-t.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=mI.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const o=r.items;let l=o.length-1,c=!1,h;for(;l>=0;--l)h=o[l],h._active?(h._total>r.duration&&(r.duration=h._total),h.tick(e),c=!0):(o[l]=o[o.length-1],o.pop());c&&(i.draw(),this._notify(i,r,e,"progress")),o.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),t+=o.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ii=new d3;const CT="transparent",f3={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const r=yT(n||CT),i=r.valid&&yT(e||CT);return i&&i.valid?i.mix(r,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class p3{constructor(e,t,r,i){const o=t[r];i=ad([e.to,i,o,e.from]);const l=ad([e.from,o,i]);this._active=!0,this._fn=e.fn||f3[e.type||typeof l],this._easing=Wc[e.easing]||Wc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=l,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const i=this._target[this._prop],o=r-this._start,l=this._duration-o;this._start=r,this._duration=Math.floor(Math.max(l,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=ad([e.to,t,i,e.from]),this._from=ad([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,i=this._prop,o=this._from,l=this._loop,c=this._to;let h;if(this._active=o!==c&&(l||t<r),!this._active){this._target[i]=c,this._notify(!0);return}if(t<0){this._target[i]=o;return}h=t/r%2,h=l&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[i]=this._fn(o,c,h)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}}class AI{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Ke(e))return;const t=Object.keys(xt.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const o=e[i];if(!Ke(o))return;const l={};for(const c of t)l[c]=o[c];(Xt(o.properties)&&o.properties||[i]).forEach(c=>{(c===i||!r.has(c))&&r.set(c,l)})})}_animateOptions(e,t){const r=t.options,i=g3(e,r);if(!i)return[];const o=this._createAnimations(i,r);return r.$shared&&m3(e.options.$animations,r).then(()=>{e.options=r},()=>{}),o}_createAnimations(e,t){const r=this._properties,i=[],o=e.$animations||(e.$animations={}),l=Object.keys(t),c=Date.now();let h;for(h=l.length-1;h>=0;--h){const d=l[h];if(d.charAt(0)==="$")continue;if(d==="options"){i.push(...this._animateOptions(e,t));continue}const m=t[d];let y=o[d];const w=r.get(d);if(y)if(w&&y.active()){y.update(w,m,c);continue}else y.cancel();if(!w||!w.duration){e[d]=m;continue}o[d]=y=new p3(w,e,d,m),i.push(y)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const r=this._createAnimations(e,t);if(r.length)return Ii.add(this._chart,r),!0}}function m3(n,e){const t=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const o=n[r[i]];o&&o.active()&&t.push(o.wait())}return Promise.all(t)}function g3(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function PT(n,e){const t=n&&n.options||{},r=t.reverse,i=t.min===void 0?e:0,o=t.max===void 0?e:0;return{start:r?o:i,end:r?i:o}}function y3(n,e,t){if(t===!1)return!1;const r=PT(n,t),i=PT(e,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function _3(n){let e,t,r,i;return Ke(n)?(e=n.top,t=n.right,r=n.bottom,i=n.left):e=t=r=i=n,{top:e,right:t,bottom:r,left:i,disabled:n===!1}}function RI(n,e){const t=[],r=n._getSortedDatasetMetas(e);let i,o;for(i=0,o=r.length;i<o;++i)t.push(r[i].index);return t}function AT(n,e,t,r={}){const i=n.keys,o=r.mode==="single";let l,c,h,d;if(e===null)return;let m=!1;for(l=0,c=i.length;l<c;++l){if(h=+i[l],h===t){if(m=!0,r.all)continue;break}d=n.values[h],ar(d)&&(o||e===0||il(e)===il(d))&&(e+=d)}return!m&&!r.all?0:e}function v3(n,e){const{iScale:t,vScale:r}=e,i=t.axis==="x"?"x":"y",o=r.axis==="x"?"x":"y",l=Object.keys(n),c=new Array(l.length);let h,d,m;for(h=0,d=l.length;h<d;++h)m=l[h],c[h]={[i]:m,[o]:n[m]};return c}function tg(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function w3(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function E3(n){const{min:e,max:t,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function T3(n,e,t){const r=n[e]||(n[e]={});return r[t]||(r[t]={})}function RT(n,e,t,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const o=n[i.index];if(t&&o>0||!t&&o<0)return i.index}return null}function DT(n,e){const{chart:t,_cachedMeta:r}=n,i=t._stacks||(t._stacks={}),{iScale:o,vScale:l,index:c}=r,h=o.axis,d=l.axis,m=w3(o,l,r),y=e.length;let w;for(let b=0;b<y;++b){const S=e[b],{[h]:k,[d]:T}=S,N=S._stacks||(S._stacks={});w=N[d]=T3(i,m,k),w[c]=T,w._top=RT(w,l,!0,r.type),w._bottom=RT(w,l,!1,r.type);const j=w._visualValues||(w._visualValues={});j[c]=T}}function ng(n,e){const t=n.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function b3(n,e){return qo(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function x3(n,e,t){return qo(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function yc(n,e){const t=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){e=e||n._parsed;for(const i of e){const o=i._stacks;if(!o||o[r]===void 0||o[r][t]===void 0)return;delete o[r][t],o[r]._visualValues!==void 0&&o[r]._visualValues[t]!==void 0&&delete o[r]._visualValues[t]}}}const rg=n=>n==="reset"||n==="none",OT=(n,e)=>e?n:Object.assign({},n),S3=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:RI(t,!0),values:null};class DI{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=tg(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&yc(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,r=this.getDataset(),i=(y,w,b,S)=>y==="x"?w:y==="r"?S:b,o=t.xAxisID=qe(r.xAxisID,ng(e,"x")),l=t.yAxisID=qe(r.yAxisID,ng(e,"y")),c=t.rAxisID=qe(r.rAxisID,ng(e,"r")),h=t.indexAxis,d=t.iAxisID=i(h,o,l,c),m=t.vAxisID=i(h,l,o,c);t.xScale=this.getScaleForId(o),t.yScale=this.getScaleForId(l),t.rScale=this.getScaleForId(c),t.iScale=this.getScaleForId(d),t.vScale=this.getScaleForId(m)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&pT(this._data,this),e._stacked&&yc(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),r=this._data;if(Ke(t)){const i=this._cachedMeta;this._data=v3(t,i)}else if(r!==t){if(r){pT(r,this);const i=this._cachedMeta;yc(i),i._parsed=[]}t&&Object.isExtensible(t)&&nj(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const o=t._stacked;t._stacked=tg(t.vScale,t),t.stack!==r.stack&&(i=!0,yc(t),t.stack=r.stack),this._resyncElements(e),(i||o!==t._stacked)&&(DT(this,t._parsed),t._stacked=tg(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:r,_data:i}=this,{iScale:o,_stacked:l}=r,c=o.axis;let h=e===0&&t===i.length?!0:r._sorted,d=e>0&&r._parsed[e-1],m,y,w;if(this._parsing===!1)r._parsed=i,r._sorted=!0,w=i;else{Xt(i[e])?w=this.parseArrayData(r,i,e,t):Ke(i[e])?w=this.parseObjectData(r,i,e,t):w=this.parsePrimitiveData(r,i,e,t);const b=()=>y[c]===null||d&&y[c]<d[c];for(m=0;m<t;++m)r._parsed[m+e]=y=w[m],h&&(b()&&(h=!1),d=y);r._sorted=h}l&&DT(this,w)}parsePrimitiveData(e,t,r,i){const{iScale:o,vScale:l}=e,c=o.axis,h=l.axis,d=o.getLabels(),m=o===l,y=new Array(i);let w,b,S;for(w=0,b=i;w<b;++w)S=w+r,y[w]={[c]:m||o.parse(d[S],S),[h]:l.parse(t[S],S)};return y}parseArrayData(e,t,r,i){const{xScale:o,yScale:l}=e,c=new Array(i);let h,d,m,y;for(h=0,d=i;h<d;++h)m=h+r,y=t[m],c[h]={x:o.parse(y[0],m),y:l.parse(y[1],m)};return c}parseObjectData(e,t,r,i){const{xScale:o,yScale:l}=e,{xAxisKey:c="x",yAxisKey:h="y"}=this._parsing,d=new Array(i);let m,y,w,b;for(m=0,y=i;m<y;++m)w=m+r,b=t[w],d[m]={x:o.parse(af(b,c),w),y:l.parse(af(b,h),w)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,r){const i=this.chart,o=this._cachedMeta,l=t[e.axis],c={keys:RI(i,!0),values:t._stacks[e.axis]._visualValues};return AT(c,l,o.index,{mode:r})}updateRangeFromParsed(e,t,r,i){const o=r[t.axis];let l=o===null?NaN:o;const c=i&&r._stacks[t.axis];i&&c&&(i.values=c,l=AT(i,o,this._cachedMeta.index)),e.min=Math.min(e.min,l),e.max=Math.max(e.max,l)}getMinMax(e,t){const r=this._cachedMeta,i=r._parsed,o=r._sorted&&e===r.iScale,l=i.length,c=this._getOtherScale(e),h=S3(t,r,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:m,max:y}=E3(c);let w,b;function S(){b=i[w];const k=b[c.axis];return!ar(b[e.axis])||m>k||y<k}for(w=0;w<l&&!(!S()&&(this.updateRangeFromParsed(d,e,b,h),o));++w);if(o){for(w=l-1;w>=0;--w)if(!S()){this.updateRangeFromParsed(d,e,b,h);break}}return d}getAllParsedValues(e){const t=this._cachedMeta._parsed,r=[];let i,o,l;for(i=0,o=t.length;i<o;++i)l=t[i][e.axis],ar(l)&&r.push(l);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,r=t.iScale,i=t.vScale,o=this.getParsed(e);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:i?""+i.getLabelForValue(o[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=_3(qe(this.options.clip,y3(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,r=this._cachedMeta,i=r.data||[],o=t.chartArea,l=[],c=this._drawStart||0,h=this._drawCount||i.length-c,d=this.options.drawActiveElementsOnTop;let m;for(r.dataset&&r.dataset.draw(e,o,c,h),m=c;m<c+h;++m){const y=i[m];y.hidden||(y.active&&d?l.push(y):y.draw(e,o))}for(m=0;m<l.length;++m)l[m].draw(e,o)}getStyle(e,t){const r=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,t,r){const i=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const l=this._cachedMeta.data[e];o=l.$context||(l.$context=x3(this.getContext(),e,l)),o.parsed=this.getParsed(e),o.raw=i.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=b3(this.chart.getContext(),this.index)),o.dataset=i,o.index=o.datasetIndex=this.index;return o.active=!!t,o.mode=r,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",r){const i=t==="active",o=this._cachedDataOpts,l=e+"-"+t,c=o[l],h=this.enableOptionSharing&&lf(r);if(c)return OT(c,h);const d=this.chart.config,m=d.datasetElementScopeKeys(this._type,e),y=i?[`${e}Hover`,"hover",e,""]:[e,""],w=d.getOptionScopes(this.getDataset(),m),b=Object.keys(xt.elements[e]),S=()=>this.getContext(r,i,t),k=d.resolveNamedOptions(w,b,S,y);return k.$shared&&(k.$shared=h,o[l]=Object.freeze(OT(k,h))),k}_resolveAnimations(e,t,r){const i=this.chart,o=this._cachedDataOpts,l=`animation-${t}`,c=o[l];if(c)return c;let h;if(i.options.animation!==!1){const m=this.chart.config,y=m.datasetAnimationScopeKeys(this._type,t),w=m.getOptionScopes(this.getDataset(),y);h=m.createResolver(w,this.getContext(e,r,t))}const d=new AI(i,h&&h.animations);return h&&h._cacheable&&(o[l]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||rg(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const r=this.resolveDataElementOptions(e,t),i=this._sharedOptions,o=this.getSharedOptions(r),l=this.includeOptions(t,o)||o!==i;return this.updateSharedOptions(o,t,r),{sharedOptions:o,includeOptions:l}}updateElement(e,t,r,i){rg(i)?Object.assign(e,r):this._resolveAnimations(t,i).update(e,r)}updateSharedOptions(e,t,r){e&&!rg(t)&&this._resolveAnimations(void 0,t).update(e,r)}_setStyle(e,t,r,i){e.active=i;const o=this.getStyle(t,i);this._resolveAnimations(t,r,i).update(e,{options:!i&&this.getSharedOptions(o)||o})}removeHoverStyle(e,t,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,t,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,r=this._cachedMeta.data;for(const[c,h,d]of this._syncList)this[c](h,d);this._syncList=[];const i=r.length,o=t.length,l=Math.min(o,i);l&&this.parse(0,l),o>i?this._insertElements(i,o-i,e):o<i&&this._removeElements(o,i-o)}_insertElements(e,t,r=!0){const i=this._cachedMeta,o=i.data,l=e+t;let c;const h=d=>{for(d.length+=t,c=d.length-1;c>=l;c--)d[c]=d[c-t]};for(h(o),c=e;c<l;++c)o[c]=new this.dataElementType;this._parsing&&h(i._parsed),this.parse(e,t),r&&this.updateElements(o,e,t,"reset")}updateElements(e,t,r,i){}_removeElements(e,t){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,t);r._stacked&&yc(r,i)}r.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,r,i]=e;this[t](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class I3 extends DI{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:r,data:i=[],_dataset:o}=t,l=this.chart._animationsDisabled;let{start:c,count:h}=oj(t,i,l);this._drawStart=c,this._drawCount=h,aj(t)&&(c=0,h=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=i;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(r,void 0,{animated:!l,options:d},e),this.updateElements(i,c,h,e)}updateElements(e,t,r,i){const o=i==="reset",{iScale:l,vScale:c,_stacked:h,_dataset:d}=this._cachedMeta,{sharedOptions:m,includeOptions:y}=this._getSharedOptions(t,i),w=l.axis,b=c.axis,{spanGaps:S,segment:k}=this.options,T=uu(S)?S:Number.POSITIVE_INFINITY,N=this.chart._animationsDisabled||o||i==="none",j=t+r,B=e.length;let K=t>0&&this.getParsed(t-1);for(let q=0;q<B;++q){const J=e[q],R=N?J:{};if(q<t||q>=j){R.skip=!0;continue}const I=this.getParsed(q),P=ct(I[b]),O=R[w]=l.getPixelForValue(I[w],q),L=R[b]=o||P?c.getBasePixel():c.getPixelForValue(h?this.applyStack(c,I,h):I[b],q);R.skip=isNaN(O)||isNaN(L)||P,R.stop=q>0&&Math.abs(I[w]-K[w])>T,k&&(R.parsed=I,R.raw=d.data[q]),y&&(R.options=m||this.resolveDataElementOptions(q,J.active?"active":i)),N||this.updateElement(J,q,R,i),K=I}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,r=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const o=i[0].size(this.resolveDataElementOptions(0)),l=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,o,l)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function wo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class P_{static override(e){Object.assign(P_.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return wo()}parse(){return wo()}format(){return wo()}add(){return wo()}diff(){return wo()}startOf(){return wo()}endOf(){return wo()}}var OI={_date:P_};function k3(n,e,t,r){const{controller:i,data:o,_sorted:l}=n,c=i._cachedMeta.iScale,h=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(c&&e===c.axis&&e!=="r"&&l&&o.length){const d=c._reversePixels?ej:Po;if(r){if(i._sharedOptions){const m=o[0],y=typeof m.getRange=="function"&&m.getRange(e);if(y){const w=d(o,e,t-y),b=d(o,e,t+y);return{lo:w.lo,hi:b.hi}}}}else{const m=d(o,e,t);if(h){const{vScale:y}=i._cachedMeta,{_parsed:w}=n,b=w.slice(0,m.lo+1).reverse().findIndex(k=>!ct(k[y.axis]));m.lo-=Math.max(0,b);const S=w.slice(m.hi).findIndex(k=>!ct(k[y.axis]));m.hi+=Math.max(0,S)}return m}}return{lo:0,hi:o.length-1}}function Yf(n,e,t,r,i){const o=n.getSortedVisibleDatasetMetas(),l=t[e];for(let c=0,h=o.length;c<h;++c){const{index:d,data:m}=o[c],{lo:y,hi:w}=k3(o[c],e,l,i);for(let b=y;b<=w;++b){const S=m[b];S.skip||r(S,d,b)}}}function C3(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(r,i){const o=e?Math.abs(r.x-i.x):0,l=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(l,2))}}function ig(n,e,t,r,i){const o=[];return!i&&!n.isPointInArea(e)||Yf(n,t,e,function(c,h,d){!i&&!hu(c,n.chartArea,0)||c.inRange(e.x,e.y,r)&&o.push({element:c,datasetIndex:h,index:d})},!0),o}function P3(n,e,t,r){let i=[];function o(l,c,h){const{startAngle:d,endAngle:m}=l.getProps(["startAngle","endAngle"],r),{angle:y}=X4(l,{x:e.x,y:e.y});fI(y,d,m)&&i.push({element:l,datasetIndex:c,index:h})}return Yf(n,t,e,o),i}function A3(n,e,t,r,i,o){let l=[];const c=C3(t);let h=Number.POSITIVE_INFINITY;function d(m,y,w){const b=m.inRange(e.x,e.y,i);if(r&&!b)return;const S=m.getCenterPoint(i);if(!(!!o||n.isPointInArea(S))&&!b)return;const T=c(e,S);T<h?(l=[{element:m,datasetIndex:y,index:w}],h=T):T===h&&l.push({element:m,datasetIndex:y,index:w})}return Yf(n,t,e,d),l}function sg(n,e,t,r,i,o){return!o&&!n.isPointInArea(e)?[]:t==="r"&&!r?P3(n,e,t,i):A3(n,e,t,r,i,o)}function MT(n,e,t,r,i){const o=[],l=t==="x"?"inXRange":"inYRange";let c=!1;return Yf(n,t,e,(h,d,m)=>{h[l]&&h[l](e[t],i)&&(o.push({element:h,datasetIndex:d,index:m}),c=c||h.inRange(e.x,e.y,i))}),r&&!c?[]:o}var R3={modes:{index(n,e,t,r){const i=To(e,n),o=t.axis||"x",l=t.includeInvisible||!1,c=t.intersect?ig(n,i,o,r,l):sg(n,i,o,!1,r,l),h=[];return c.length?(n.getSortedVisibleDatasetMetas().forEach(d=>{const m=c[0].index,y=d.data[m];y&&!y.skip&&h.push({element:y,datasetIndex:d.index,index:m})}),h):[]},dataset(n,e,t,r){const i=To(e,n),o=t.axis||"xy",l=t.includeInvisible||!1;let c=t.intersect?ig(n,i,o,r,l):sg(n,i,o,!1,r,l);if(c.length>0){const h=c[0].datasetIndex,d=n.getDatasetMeta(h).data;c=[];for(let m=0;m<d.length;++m)c.push({element:d[m],datasetIndex:h,index:m})}return c},point(n,e,t,r){const i=To(e,n),o=t.axis||"xy",l=t.includeInvisible||!1;return ig(n,i,o,r,l)},nearest(n,e,t,r){const i=To(e,n),o=t.axis||"xy",l=t.includeInvisible||!1;return sg(n,i,o,t.intersect,r,l)},x(n,e,t,r){const i=To(e,n);return MT(n,i,"x",t.intersect,r)},y(n,e,t,r){const i=To(e,n);return MT(n,i,"y",t.intersect,r)}}};const MI=["left","top","right","bottom"];function _c(n,e){return n.filter(t=>t.pos===e)}function NT(n,e){return n.filter(t=>MI.indexOf(t.pos)===-1&&t.box.axis===e)}function vc(n,e){return n.sort((t,r)=>{const i=e?r:t,o=e?t:r;return i.weight===o.weight?i.index-o.index:i.weight-o.weight})}function D3(n){const e=[];let t,r,i,o,l,c;for(t=0,r=(n||[]).length;t<r;++t)i=n[t],{position:o,options:{stack:l,stackWeight:c=1}}=i,e.push({index:t,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:l&&o+l,stackWeight:c});return e}function O3(n){const e={};for(const t of n){const{stack:r,pos:i,stackWeight:o}=t;if(!r||!MI.includes(i))continue;const l=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=o}return e}function M3(n,e){const t=O3(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let o,l,c;for(o=0,l=n.length;o<l;++o){c=n[o];const{fullSize:h}=c.box,d=t[c.stack],m=d&&c.stackWeight/d.weight;c.horizontal?(c.width=m?m*r:h&&e.availableWidth,c.height=i):(c.width=r,c.height=m?m*i:h&&e.availableHeight)}return t}function N3(n){const e=D3(n),t=vc(e.filter(d=>d.box.fullSize),!0),r=vc(_c(e,"left"),!0),i=vc(_c(e,"right")),o=vc(_c(e,"top"),!0),l=vc(_c(e,"bottom")),c=NT(e,"x"),h=NT(e,"y");return{fullSize:t,leftAndTop:r.concat(o),rightAndBottom:i.concat(h).concat(l).concat(c),chartArea:_c(e,"chartArea"),vertical:r.concat(i).concat(h),horizontal:o.concat(l).concat(c)}}function LT(n,e,t,r){return Math.max(n[t],e[t])+Math.max(n[r],e[r])}function NI(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function L3(n,e,t,r){const{pos:i,box:o}=t,l=n.maxPadding;if(!Ke(i)){t.size&&(n[i]-=t.size);const y=r[t.stack]||{size:0,count:1};y.size=Math.max(y.size,t.horizontal?o.height:o.width),t.size=y.size/y.count,n[i]+=t.size}o.getPadding&&NI(l,o.getPadding());const c=Math.max(0,e.outerWidth-LT(l,n,"left","right")),h=Math.max(0,e.outerHeight-LT(l,n,"top","bottom")),d=c!==n.w,m=h!==n.h;return n.w=c,n.h=h,t.horizontal?{same:d,other:m}:{same:m,other:d}}function V3(n){const e=n.maxPadding;function t(r){const i=Math.max(e[r]-n[r],0);return n[r]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function F3(n,e){const t=e.maxPadding;function r(i){const o={left:0,top:0,right:0,bottom:0};return i.forEach(l=>{o[l]=Math.max(e[l],t[l])}),o}return r(n?["left","right"]:["top","bottom"])}function Mc(n,e,t,r){const i=[];let o,l,c,h,d,m;for(o=0,l=n.length,d=0;o<l;++o){c=n[o],h=c.box,h.update(c.width||e.w,c.height||e.h,F3(c.horizontal,e));const{same:y,other:w}=L3(e,t,c,r);d|=y&&i.length,m=m||w,h.fullSize||i.push(c)}return d&&Mc(i,e,t,r)||m}function hd(n,e,t,r,i){n.top=t,n.left=e,n.right=e+r,n.bottom=t+i,n.width=r,n.height=i}function VT(n,e,t,r){const i=t.padding;let{x:o,y:l}=e;for(const c of n){const h=c.box,d=r[c.stack]||{placed:0,weight:1},m=c.stackWeight/d.weight||1;if(c.horizontal){const y=e.w*m,w=d.size||h.height;lf(d.start)&&(l=d.start),h.fullSize?hd(h,i.left,l,t.outerWidth-i.right-i.left,w):hd(h,e.left+d.placed,l,y,w),d.start=l,d.placed+=y,l=h.bottom}else{const y=e.h*m,w=d.size||h.width;lf(d.start)&&(o=d.start),h.fullSize?hd(h,o,i.top,w,t.outerHeight-i.bottom-i.top):hd(h,o,e.top+d.placed,w,y),d.start=o,d.placed+=y,o=h.right}}e.x=o,e.y=l}var Es={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,r){if(!n)return;const i=Pr(n.options.layout.padding),o=Math.max(e-i.width,0),l=Math.max(t-i.height,0),c=N3(n.boxes),h=c.vertical,d=c.horizontal;Ze(n.boxes,k=>{typeof k.beforeLayout=="function"&&k.beforeLayout()});const m=h.reduce((k,T)=>T.box.options&&T.box.options.display===!1?k:k+1,0)||1,y=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:o,availableHeight:l,vBoxMaxWidth:o/2/m,hBoxMaxHeight:l/2}),w=Object.assign({},i);NI(w,Pr(r));const b=Object.assign({maxPadding:w,w:o,h:l,x:i.left,y:i.top},i),S=M3(h.concat(d),y);Mc(c.fullSize,b,y,S),Mc(h,b,y,S),Mc(d,b,y,S)&&Mc(h,b,y,S),V3(b),VT(c.leftAndTop,b,y,S),b.x+=b.w,b.y+=b.h,VT(c.rightAndBottom,b,y,S),n.chartArea={left:b.left,top:b.top,right:b.left+b.w,bottom:b.top+b.h,height:b.h,width:b.w},Ze(c.chartArea,k=>{const T=k.box;Object.assign(T,n.chartArea),T.update(b.w,b.h,{left:0,top:0,right:0,bottom:0})})}};class LI{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,i){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(e){return!0}updateConfig(e){}}class j3 extends LI{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Rd="$chartjs",U3={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},FT=n=>n===null||n==="";function z3(n,e){const t=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[Rd]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",FT(i)){const o=xT(n,"width");o!==void 0&&(n.width=o)}if(FT(r))if(n.style.height==="")n.height=n.width/(e||2);else{const o=xT(n,"height");o!==void 0&&(n.height=o)}return n}const VI=Xj?{passive:!0}:!1;function B3(n,e,t){n&&n.addEventListener(e,t,VI)}function $3(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,VI)}function H3(n,e){const t=U3[n.type]||n.type,{x:r,y:i}=To(n,e);return{type:t,chart:e,native:n,x:r!==void 0?r:null,y:i!==void 0?i:null}}function df(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function W3(n,e,t){const r=n.canvas,i=new MutationObserver(o=>{let l=!1;for(const c of o)l=l||df(c.addedNodes,r),l=l&&!df(c.removedNodes,r);l&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function q3(n,e,t){const r=n.canvas,i=new MutationObserver(o=>{let l=!1;for(const c of o)l=l||df(c.removedNodes,r),l=l&&!df(c.addedNodes,r);l&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const du=new Map;let jT=0;function FI(){const n=window.devicePixelRatio;n!==jT&&(jT=n,du.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function G3(n,e){du.size||window.addEventListener("resize",FI),du.set(n,e)}function K3(n){du.delete(n),du.size||window.removeEventListener("resize",FI)}function Y3(n,e,t){const r=n.canvas,i=r&&C_(r);if(!i)return;const o=gI((c,h)=>{const d=i.clientWidth;t(c,h),d<i.clientWidth&&t()},window),l=new ResizeObserver(c=>{const h=c[0],d=h.contentRect.width,m=h.contentRect.height;d===0&&m===0||o(d,m)});return l.observe(i),G3(n,o),l}function og(n,e,t){t&&t.disconnect(),e==="resize"&&K3(n)}function Q3(n,e,t){const r=n.canvas,i=gI(o=>{n.ctx!==null&&t(H3(o,n))},n);return B3(r,e,i),i}class X3 extends LI{acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(z3(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[Rd])return!1;const r=t[Rd].initial;["height","width"].forEach(o=>{const l=r[o];ct(l)?t.removeAttribute(o):t.setAttribute(o,l)});const i=r.style||{};return Object.keys(i).forEach(o=>{t.style[o]=i[o]}),t.width=t.width,delete t[Rd],!0}addEventListener(e,t,r){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),l={attach:W3,detach:q3,resize:Y3}[t]||Q3;i[t]=l(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),i=r[t];if(!i)return;({attach:og,detach:og,resize:og}[t]||$3)(e,t,i),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,i){return Qj(e,t,r,i)}isAttached(e){const t=e&&C_(e);return!!(t&&t.isConnected)}}function J3(n){return!k_()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?j3:X3}class Tl{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return uu(this.x)&&uu(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const i={};return e.forEach(o=>{i[o]=r[o]&&r[o].active()?r[o]._to:this[o]}),i}}function Z3(n,e){const t=n.options.ticks,r=eU(n),i=Math.min(t.maxTicksLimit||r,r),o=t.major.enabled?nU(e):[],l=o.length,c=o[0],h=o[l-1],d=[];if(l>i)return rU(e,d,o,l/i),d;const m=tU(o,e,i);if(l>0){let y,w;const b=l>1?Math.round((h-c)/(l-1)):null;for(dd(e,d,m,ct(b)?0:c-b,c),y=0,w=l-1;y<w;y++)dd(e,d,m,o[y],o[y+1]);return dd(e,d,m,h,ct(b)?e.length:h+b),d}return dd(e,d,m),d}function eU(n){const e=n.options.offset,t=n._tickSize(),r=n._length/t+(e?0:1),i=n._maxLength/t;return Math.floor(Math.min(r,i))}function tU(n,e,t){const r=iU(n),i=e.length/t;if(!r)return Math.max(i,1);const o=q4(r);for(let l=0,c=o.length-1;l<c;l++){const h=o[l];if(h>i)return h}return Math.max(i,1)}function nU(n){const e=[];let t,r;for(t=0,r=n.length;t<r;t++)n[t].major&&e.push(t);return e}function rU(n,e,t,r){let i=0,o=t[0],l;for(r=Math.ceil(r),l=0;l<n.length;l++)l===o&&(e.push(n[l]),i++,o=t[i*r])}function dd(n,e,t,r,i){const o=qe(r,0),l=Math.min(qe(i,n.length),n.length);let c=0,h,d,m;for(t=Math.ceil(t),i&&(h=i-r,t=h/Math.floor(h/t)),m=o;m<0;)c++,m=Math.round(o+c*t);for(d=Math.max(o,0);d<l;d++)d===m&&(e.push(n[d]),c++,m=Math.round(o+c*t))}function iU(n){const e=n.length;let t,r;if(e<2)return!1;for(r=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==r)return!1;return r}const sU=n=>n==="left"?"right":n==="right"?"left":n,UT=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,zT=(n,e)=>Math.min(e||n,n);function BT(n,e){const t=[],r=n.length/e,i=n.length;let o=0;for(;o<i;o+=r)t.push(n[Math.floor(o)]);return t}function oU(n,e,t){const r=n.ticks.length,i=Math.min(e,r-1),o=n._startPixel,l=n._endPixel,c=1e-6;let h=n.getPixelForTick(i),d;if(!(t&&(r===1?d=Math.max(h-o,l-h):e===0?d=(n.getPixelForTick(1)-h)/2:d=(h-n.getPixelForTick(i-1))/2,h+=i<e?d:-d,h<o-c||h>l+c)))return h}function aU(n,e){Ze(n,t=>{const r=t.gc,i=r.length/2;let o;if(i>e){for(o=0;o<i;++o)delete t.data[r[o]];r.splice(0,i)}})}function wc(n){return n.drawTicks?n.tickLength:0}function $T(n,e){if(!n.display)return 0;const t=An(n.font,e),r=Pr(n.padding);return(Xt(n.text)?n.text.length:1)*t.lineHeight+r.height}function lU(n,e){return qo(n,{scale:e,type:"scale"})}function cU(n,e,t){return qo(n,{tick:t,index:e,type:"tick"})}function uU(n,e,t){let r=yI(n);return(t&&e!=="right"||!t&&e==="right")&&(r=sU(r)),r}function hU(n,e,t,r){const{top:i,left:o,bottom:l,right:c,chart:h}=n,{chartArea:d,scales:m}=h;let y=0,w,b,S;const k=l-i,T=c-o;if(n.isHorizontal()){if(b=Bn(r,o,c),Ke(t)){const N=Object.keys(t)[0],j=t[N];S=m[N].getPixelForValue(j)+k-e}else t==="center"?S=(d.bottom+d.top)/2+k-e:S=UT(n,t,e);w=c-o}else{if(Ke(t)){const N=Object.keys(t)[0],j=t[N];b=m[N].getPixelForValue(j)-T+e}else t==="center"?b=(d.left+d.right)/2-T+e:b=UT(n,t,e);S=Bn(r,l,i),y=t==="left"?-xr:xr}return{titleX:b,titleY:S,maxWidth:w,rotation:y}}class Ru extends Tl{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return e=Hr(e,Number.POSITIVE_INFINITY),t=Hr(t,Number.NEGATIVE_INFINITY),r=Hr(r,Number.POSITIVE_INFINITY),i=Hr(i,Number.NEGATIVE_INFINITY),{min:Hr(e,r),max:Hr(t,i),minDefined:ar(e),maxDefined:ar(t)}}getMinMax(e){let{min:t,max:r,minDefined:i,maxDefined:o}=this.getUserBounds(),l;if(i&&o)return{min:t,max:r};const c=this.getMatchingVisibleMetas();for(let h=0,d=c.length;h<d;++h)l=c[h].controller.getMinMax(this,e),i||(t=Math.min(t,l.min)),o||(r=Math.max(r,l.max));return t=o&&t>r?r:t,r=i&&t>r?t:r,{min:Hr(t,Hr(r,t)),max:Hr(r,Hr(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){at(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:i,grace:o,ticks:l}=this.options,c=l.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Cj(this,o,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=c<this.ticks.length;this._convertTicksToLabels(h?BT(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=Z3(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,r;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){at(this.options.afterUpdate,[this])}beforeSetDimensions(){at(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){at(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),at(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){at(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,i,o;for(r=0,i=e.length;r<i;r++)o=e[r],o.label=at(t.callback,[o.value,r,e],this)}afterTickToLabelConversion(){at(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){at(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=zT(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,o=t.maxRotation;let l=i,c,h,d;if(!this._isVisible()||!t.display||i>=o||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const m=this._getLabelSizes(),y=m.widest.width,w=m.highest.height,b=Sr(this.chart.width-y,0,this.maxWidth);c=e.offset?this.maxWidth/r:b/(r-1),y+6>c&&(c=b/(r-(e.offset?.5:1)),h=this.maxHeight-wc(e.grid)-t.padding-$T(e.title,this.chart.options.font),d=Math.sqrt(y*y+w*w),l=Q4(Math.min(Math.asin(Sr((m.highest.height+6)/c,-1,1)),Math.asin(Sr(h/d,-1,1))-Math.asin(Sr(w/d,-1,1)))),l=Math.max(i,Math.min(o,l))),this.labelRotation=l}afterCalculateLabelRotation(){at(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){at(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:o}}=this,l=this._isVisible(),c=this.isHorizontal();if(l){const h=$T(i,t.options.font);if(c?(e.width=this.maxWidth,e.height=wc(o)+h):(e.height=this.maxHeight,e.width=wc(o)+h),r.display&&this.ticks.length){const{first:d,last:m,widest:y,highest:w}=this._getLabelSizes(),b=r.padding*2,S=Co(this.labelRotation),k=Math.cos(S),T=Math.sin(S);if(c){const N=r.mirror?0:T*y.width+k*w.height;e.height=Math.min(this.maxHeight,e.height+N+b)}else{const N=r.mirror?0:k*y.width+T*w.height;e.width=Math.min(this.maxWidth,e.width+N+b)}this._calculatePadding(d,m,T,k)}}this._handleMargins(),c?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,i){const{ticks:{align:o,padding:l},position:c}=this.options,h=this.labelRotation!==0,d=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const m=this.getPixelForTick(0)-this.left,y=this.right-this.getPixelForTick(this.ticks.length-1);let w=0,b=0;h?d?(w=i*e.width,b=r*t.height):(w=r*e.height,b=i*t.width):o==="start"?b=t.width:o==="end"?w=e.width:o!=="inner"&&(w=e.width/2,b=t.width/2),this.paddingLeft=Math.max((w-m+l)*this.width/(this.width-m),0),this.paddingRight=Math.max((b-y+l)*this.width/(this.width-y),0)}else{let m=t.height/2,y=e.height/2;o==="start"?(m=0,y=e.height):o==="end"&&(m=t.height,y=0),this.paddingTop=m+l,this.paddingBottom=y+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){at(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,r;for(t=0,r=e.length;t<r;t++)ct(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=BT(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){const{ctx:i,_longestTextCache:o}=this,l=[],c=[],h=Math.floor(t/zT(t,r));let d=0,m=0,y,w,b,S,k,T,N,j,B,K,q;for(y=0;y<t;y+=h){if(S=e[y].label,k=this._resolveTickFontOptions(y),i.font=T=k.string,N=o[T]=o[T]||{data:{},gc:[]},j=k.lineHeight,B=K=0,!ct(S)&&!Xt(S))B=vT(i,N.data,N.gc,B,S),K=j;else if(Xt(S))for(w=0,b=S.length;w<b;++w)q=S[w],!ct(q)&&!Xt(q)&&(B=vT(i,N.data,N.gc,B,q),K+=j);l.push(B),c.push(K),d=Math.max(B,d),m=Math.max(K,m)}aU(o,t);const J=l.indexOf(d),R=c.indexOf(m),I=P=>({width:l[P]||0,height:c[P]||0});return{first:I(0),last:I(t-1),widest:I(J),highest:I(R),widths:l,heights:c}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return Z4(this._alignToPixels?vo(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=cU(this.getContext(),e,r))}return this.$context||(this.$context=lU(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Co(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),o=this._getLabelSizes(),l=e.autoSkipPadding||0,c=o?o.widest.width+l:0,h=o?o.highest.height+l:0;return this.isHorizontal()?h*r>c*i?c/r:h/i:h*i<c*r?h/r:c/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,i=this.options,{grid:o,position:l,border:c}=i,h=o.offset,d=this.isHorizontal(),y=this.ticks.length+(h?1:0),w=wc(o),b=[],S=c.setContext(this.getContext()),k=S.display?S.width:0,T=k/2,N=function(ie){return vo(r,ie,k)};let j,B,K,q,J,R,I,P,O,L,V,D;if(l==="top")j=N(this.bottom),R=this.bottom-w,P=j-T,L=N(e.top)+T,D=e.bottom;else if(l==="bottom")j=N(this.top),L=e.top,D=N(e.bottom)-T,R=j+T,P=this.top+w;else if(l==="left")j=N(this.right),J=this.right-w,I=j-T,O=N(e.left)+T,V=e.right;else if(l==="right")j=N(this.left),O=e.left,V=N(e.right)-T,J=j+T,I=this.left+w;else if(t==="x"){if(l==="center")j=N((e.top+e.bottom)/2+.5);else if(Ke(l)){const ie=Object.keys(l)[0],ye=l[ie];j=N(this.chart.scales[ie].getPixelForValue(ye))}L=e.top,D=e.bottom,R=j+T,P=R+w}else if(t==="y"){if(l==="center")j=N((e.left+e.right)/2);else if(Ke(l)){const ie=Object.keys(l)[0],ye=l[ie];j=N(this.chart.scales[ie].getPixelForValue(ye))}J=j-T,I=J-w,O=e.left,V=e.right}const ne=qe(i.ticks.maxTicksLimit,y),pe=Math.max(1,Math.ceil(y/ne));for(B=0;B<y;B+=pe){const ie=this.getContext(B),ye=o.setContext(ie),re=c.setContext(ie),he=ye.lineWidth,F=ye.color,ee=re.dash||[],de=re.dashOffset,Te=ye.tickWidth,ke=ye.tickColor,Le=ye.tickBorderDash||[],Re=ye.tickBorderDashOffset;K=oU(this,B,h),K!==void 0&&(q=vo(r,K,he),d?J=I=O=V=q:R=P=L=D=q,b.push({tx1:J,ty1:R,tx2:I,ty2:P,x1:O,y1:L,x2:V,y2:D,width:he,color:F,borderDash:ee,borderDashOffset:de,tickWidth:Te,tickColor:ke,tickBorderDash:Le,tickBorderDashOffset:Re}))}return this._ticksLength=y,this._borderValue=j,b}_computeLabelItems(e){const t=this.axis,r=this.options,{position:i,ticks:o}=r,l=this.isHorizontal(),c=this.ticks,{align:h,crossAlign:d,padding:m,mirror:y}=o,w=wc(r.grid),b=w+m,S=y?-m:b,k=-Co(this.labelRotation),T=[];let N,j,B,K,q,J,R,I,P,O,L,V,D="middle";if(i==="top")J=this.bottom-S,R=this._getXAxisLabelAlignment();else if(i==="bottom")J=this.top+S,R=this._getXAxisLabelAlignment();else if(i==="left"){const pe=this._getYAxisLabelAlignment(w);R=pe.textAlign,q=pe.x}else if(i==="right"){const pe=this._getYAxisLabelAlignment(w);R=pe.textAlign,q=pe.x}else if(t==="x"){if(i==="center")J=(e.top+e.bottom)/2+b;else if(Ke(i)){const pe=Object.keys(i)[0],ie=i[pe];J=this.chart.scales[pe].getPixelForValue(ie)+b}R=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")q=(e.left+e.right)/2-b;else if(Ke(i)){const pe=Object.keys(i)[0],ie=i[pe];q=this.chart.scales[pe].getPixelForValue(ie)}R=this._getYAxisLabelAlignment(w).textAlign}t==="y"&&(h==="start"?D="top":h==="end"&&(D="bottom"));const ne=this._getLabelSizes();for(N=0,j=c.length;N<j;++N){B=c[N],K=B.label;const pe=o.setContext(this.getContext(N));I=this.getPixelForTick(N)+o.labelOffset,P=this._resolveTickFontOptions(N),O=P.lineHeight,L=Xt(K)?K.length:1;const ie=L/2,ye=pe.color,re=pe.textStrokeColor,he=pe.textStrokeWidth;let F=R;l?(q=I,R==="inner"&&(N===j-1?F=this.options.reverse?"left":"right":N===0?F=this.options.reverse?"right":"left":F="center"),i==="top"?d==="near"||k!==0?V=-L*O+O/2:d==="center"?V=-ne.highest.height/2-ie*O+O:V=-ne.highest.height+O/2:d==="near"||k!==0?V=O/2:d==="center"?V=ne.highest.height/2-ie*O:V=ne.highest.height-L*O,y&&(V*=-1),k!==0&&!pe.showLabelBackdrop&&(q+=O/2*Math.sin(k))):(J=I,V=(1-L)*O/2);let ee;if(pe.showLabelBackdrop){const de=Pr(pe.backdropPadding),Te=ne.heights[N],ke=ne.widths[N];let Le=V-de.top,Re=0-de.left;switch(D){case"middle":Le-=Te/2;break;case"bottom":Le-=Te;break}switch(R){case"center":Re-=ke/2;break;case"right":Re-=ke;break;case"inner":N===j-1?Re-=ke:N>0&&(Re-=ke/2);break}ee={left:Re,top:Le,width:ke+de.width,height:Te+de.height,color:pe.backdropColor}}T.push({label:K,font:P,textOffset:V,options:{rotation:k,color:ye,strokeColor:re,strokeWidth:he,textAlign:F,textBaseline:D,translation:[q,J],backdrop:ee}})}return T}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Co(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:i,padding:o}}=this.options,l=this._getLabelSizes(),c=e+o,h=l.widest.width;let d,m;return t==="left"?i?(m=this.right+o,r==="near"?d="left":r==="center"?(d="center",m+=h/2):(d="right",m+=h)):(m=this.right-c,r==="near"?d="right":r==="center"?(d="center",m-=h/2):(d="left",m=this.left)):t==="right"?i?(m=this.left+o,r==="near"?d="right":r==="center"?(d="center",m-=h/2):(d="left",m-=h)):(m=this.left+c,r==="near"?d="left":r==="center"?(d="center",m+=h/2):(d="right",m=this.right)):d="right",{textAlign:d,x:m}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:i,width:o,height:l}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,i,o,l),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(o=>o.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,l;const c=(h,d,m)=>{!m.width||!m.color||(r.save(),r.lineWidth=m.width,r.strokeStyle=m.color,r.setLineDash(m.borderDash||[]),r.lineDashOffset=m.borderDashOffset,r.beginPath(),r.moveTo(h.x,h.y),r.lineTo(d.x,d.y),r.stroke(),r.restore())};if(t.display)for(o=0,l=i.length;o<l;++o){const h=i[o];t.drawOnChartArea&&c({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),t.drawTicks&&c({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:r,grid:i}}=this,o=r.setContext(this.getContext()),l=r.display?o.width:0;if(!l)return;const c=i.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let d,m,y,w;this.isHorizontal()?(d=vo(e,this.left,l)-l/2,m=vo(e,this.right,c)+c/2,y=w=h):(y=vo(e,this.top,l)-l/2,w=vo(e,this.bottom,c)+c/2,d=m=h),t.save(),t.lineWidth=o.width,t.strokeStyle=o.color,t.beginPath(),t.moveTo(d,y),t.lineTo(m,w),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&T_(r,i);const o=this.getLabelItems(e);for(const l of o){const c=l.options,h=l.font,d=l.label,m=l.textOffset;uf(r,d,0,m,h,c)}i&&b_(r)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;const o=An(r.font),l=Pr(r.padding),c=r.align;let h=o.lineHeight/2;t==="bottom"||t==="center"||Ke(t)?(h+=l.bottom,Xt(r.text)&&(h+=o.lineHeight*(r.text.length-1))):h+=l.top;const{titleX:d,titleY:m,maxWidth:y,rotation:w}=hU(this,h,t,c);uf(e,r.text,0,0,o,{color:r.color,maxWidth:y,rotation:w,textAlign:uU(c,t,i),textBaseline:"middle",translation:[d,m]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=qe(e.grid&&e.grid.z,-1),i=qe(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Ru.prototype.draw?[{z:t,draw:o=>{this.draw(o)}}]:[{z:r,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let o,l;for(o=0,l=t.length;o<l;++o){const c=t[o];c[r]===this.id&&(!e||c.type===e)&&i.push(c)}return i}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return An(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class fd{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;pU(t)&&(r=this.register(t));const i=this.items,o=e.id,l=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in i||(i[o]=e,dU(e,l,r),this.override&&xt.override(e.id,e.overrides)),l}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,i=this.scope;r in t&&delete t[r],i&&r in xt[i]&&(delete xt[i][r],this.override&&delete Uo[r])}}function dU(n,e,t){const r=cu(Object.create(null),[t?xt.get(t):{},xt.get(e),n.defaults]);xt.set(e,r),n.defaultRoutes&&fU(e,n.defaultRoutes),n.descriptors&&xt.describe(e,n.descriptors)}function fU(n,e){Object.keys(e).forEach(t=>{const r=t.split("."),i=r.pop(),o=[n].concat(r).join("."),l=e[t].split("."),c=l.pop(),h=l.join(".");xt.route(o,i,h,c)})}function pU(n){return"id"in n&&"defaults"in n}class mU{constructor(){this.controllers=new fd(DI,"datasets",!0),this.elements=new fd(Tl,"elements"),this.plugins=new fd(Object,"plugins"),this.scales=new fd(Ru,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(i=>{const o=r||this._getRegistryForType(i);r||o.isForType(i)||o===this.plugins&&i.id?this._exec(e,o,i):Ze(i,l=>{const c=r||this._getRegistryForType(l);this._exec(e,c,l)})})}_exec(e,t,r){const i=v_(e);at(r["before"+i],[],r),t[e](r),at(r["after"+i],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Gr=new mU;class gU{constructor(){this._init=[]}notify(e,t,r,i){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const o=i?this._descriptors(e).filter(i):this._descriptors(e),l=this._notify(o,e,t,r);return t==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),l}_notify(e,t,r,i){i=i||{};for(const o of e){const l=o.plugin,c=l[r],h=[t,i,o.options];if(at(c,h,l)===!1&&i.cancelable)return!1}return!0}invalidate(){ct(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,i=qe(r.options&&r.options.plugins,{}),o=yU(r);return i===!1&&!t?[]:vU(e,o,i,t)}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,i=(o,l)=>o.filter(c=>!l.some(h=>c.plugin.id===h.plugin.id));this._notify(i(t,r),e,"stop"),this._notify(i(r,t),e,"start")}}function yU(n){const e={},t=[],r=Object.keys(Gr.plugins.items);for(let o=0;o<r.length;o++)t.push(Gr.getPlugin(r[o]));const i=n.plugins||[];for(let o=0;o<i.length;o++){const l=i[o];t.indexOf(l)===-1&&(t.push(l),e[l.id]=!0)}return{plugins:t,localIds:e}}function _U(n,e){return!e&&n===!1?null:n===!0?{}:n}function vU(n,{plugins:e,localIds:t},r,i){const o=[],l=n.getContext();for(const c of e){const h=c.id,d=_U(r[h],i);d!==null&&o.push({plugin:c,options:wU(n.config,{plugin:c,local:t[h]},d,l)})}return o}function wU(n,{plugin:e,local:t},r,i){const o=n.pluginScopeKeys(e),l=n.getOptionScopes(r,o);return t&&e.defaults&&l.push(e.defaults),n.createResolver(l,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Qg(n,e){const t=xt.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function EU(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function TU(n,e){return n===e?"_index_":"_value_"}function HT(n){if(n==="x"||n==="y"||n==="r")return n}function bU(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Xg(n,...e){if(HT(n))return n;for(const t of e){const r=t.axis||bU(t.position)||n.length>1&&HT(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function WT(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function xU(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(t.length)return WT(n,"x",t[0])||WT(n,"y",t[0])}return{}}function SU(n,e){const t=Uo[n.type]||{scales:{}},r=e.scales||{},i=Qg(n.type,e),o=Object.create(null);return Object.keys(r).forEach(l=>{const c=r[l];if(!Ke(c))return console.error(`Invalid scale configuration for scale: ${l}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const h=Xg(l,c,xU(l,n),xt.scales[c.type]),d=TU(h,i),m=t.scales||{};o[l]=$c(Object.create(null),[{axis:h},c,m[h],m[d]])}),n.data.datasets.forEach(l=>{const c=l.type||n.type,h=l.indexAxis||Qg(c,e),m=(Uo[c]||{}).scales||{};Object.keys(m).forEach(y=>{const w=EU(y,h),b=l[w+"AxisID"]||w;o[b]=o[b]||Object.create(null),$c(o[b],[{axis:w},r[b],m[y]])})}),Object.keys(o).forEach(l=>{const c=o[l];$c(c,[xt.scales[c.type],xt.scale])}),o}function jI(n){const e=n.options||(n.options={});e.plugins=qe(e.plugins,{}),e.scales=SU(n,e)}function UI(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function IU(n){return n=n||{},n.data=UI(n.data),jI(n),n}const qT=new Map,zI=new Set;function pd(n,e){let t=qT.get(n);return t||(t=e(),qT.set(n,t),zI.add(t)),t}const Ec=(n,e,t)=>{const r=af(e,t);r!==void 0&&n.add(r)};class kU{constructor(e){this._config=IU(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=UI(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),jI(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return pd(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return pd(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return pd(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,r=this.type;return pd(`${r}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const r=this._scopeCache;let i=r.get(e);return(!i||t)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,t,r){const{options:i,type:o}=this,l=this._cachedScopes(e,r),c=l.get(t);if(c)return c;const h=new Set;t.forEach(m=>{e&&(h.add(e),m.forEach(y=>Ec(h,e,y))),m.forEach(y=>Ec(h,i,y)),m.forEach(y=>Ec(h,Uo[o]||{},y)),m.forEach(y=>Ec(h,xt,y)),m.forEach(y=>Ec(h,Gg,y))});const d=Array.from(h);return d.length===0&&d.push(Object.create(null)),zI.has(t)&&l.set(t,d),d}chartOptionScopes(){const{options:e,type:t}=this;return[e,Uo[t]||{},xt.datasets[t]||{},{type:t},xt,Gg]}resolveNamedOptions(e,t,r,i=[""]){const o={$shared:!0},{resolver:l,subPrefixes:c}=GT(this._resolverCache,e,i);let h=l;if(PU(l,t)){o.$shared=!1,r=Ns(r)?r():r;const d=this.createResolver(e,r,c);h=sl(l,r,d)}for(const d of t)o[d]=h[d];return o}createResolver(e,t,r=[""],i){const{resolver:o}=GT(this._resolverCache,e,r);return Ke(t)?sl(o,t,void 0,i):o}}function GT(n,e,t){let r=n.get(e);r||(r=new Map,n.set(e,r));const i=t.join();let o=r.get(i);return o||(o={resolver:x_(e,t),subPrefixes:t.filter(c=>!c.toLowerCase().includes("hover"))},r.set(i,o)),o}const CU=n=>Ke(n)&&Object.getOwnPropertyNames(n).some(e=>Ns(n[e]));function PU(n,e){const{isScriptable:t,isIndexable:r}=TI(n);for(const i of e){const o=t(i),l=r(i),c=(l||o)&&n[i];if(o&&(Ns(c)||CU(c))||l&&Xt(c))return!0}return!1}var AU="4.5.0";const RU=["top","bottom","left","right","chartArea"];function KT(n,e){return n==="top"||n==="bottom"||RU.indexOf(n)===-1&&e==="x"}function YT(n,e){return function(t,r){return t[n]===r[n]?t[e]-r[e]:t[n]-r[n]}}function QT(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),at(t&&t.onComplete,[n],e)}function DU(n){const e=n.chart,t=e.options.animation;at(t&&t.onProgress,[n],e)}function BI(n){return k_()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Dd={},XT=n=>{const e=BI(n);return Object.values(Dd).filter(t=>t.canvas===e).pop()};function OU(n,e,t){const r=Object.keys(n);for(const i of r){const o=+i;if(o>=e){const l=n[i];delete n[i],(t>0||o>e)&&(n[o+t]=l)}}}function MU(n,e,t,r){return!t||n.type==="mouseout"?null:r?e:n}let Qf=class{static defaults=xt;static instances=Dd;static overrides=Uo;static registry=Gr;static version=AU;static getChart=XT;static register(...e){Gr.add(...e),JT()}static unregister(...e){Gr.remove(...e),JT()}constructor(e,t){const r=this.config=new kU(t),i=BI(e),o=XT(i);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const l=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||J3(i)),this.platform.updateConfig(r);const c=this.platform.acquireContext(i,l.aspectRatio),h=c&&c.canvas,d=h&&h.height,m=h&&h.width;if(this.id=V4(),this.ctx=c,this.canvas=h,this.width=m,this.height=d,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new gU,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=ij(y=>this.update(y),l.resizeDelay||0),this._dataChanges=[],Dd[this.id]=this,!c||!h){console.error("Failed to create chart: can't acquire context from the given item");return}Ii.listen(this,"complete",QT),Ii.listen(this,"progress",DU),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:r,height:i,_aspectRatio:o}=this;return ct(e)?t&&o?o:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Gr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():bT(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return wT(this.canvas,this.ctx),this}stop(){return Ii.stop(this),this}resize(e,t){Ii.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const r=this.options,i=this.canvas,o=r.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(i,e,t,o),c=r.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,bT(this,c,!0)&&(this.notifyPlugins("resize",{size:l}),at(r.onResize,[this,l],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};Ze(t,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,t=e.scales,r=this.scales,i=Object.keys(r).reduce((l,c)=>(l[c]=!1,l),{});let o=[];t&&(o=o.concat(Object.keys(t).map(l=>{const c=t[l],h=Xg(l,c),d=h==="r",m=h==="x";return{options:c,dposition:d?"chartArea":m?"bottom":"left",dtype:d?"radialLinear":m?"category":"linear"}}))),Ze(o,l=>{const c=l.options,h=c.id,d=Xg(h,c),m=qe(c.type,l.dtype);(c.position===void 0||KT(c.position,d)!==KT(l.dposition))&&(c.position=l.dposition),i[h]=!0;let y=null;if(h in r&&r[h].type===m)y=r[h];else{const w=Gr.getScale(m);y=new w({id:h,type:m,ctx:this.ctx,chart:this}),r[y.id]=y}y.init(c,e)}),Ze(i,(l,c)=>{l||delete r[c]}),Ze(r,l=>{Es.configure(this,l,l.options),Es.addBox(this,l)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,r=e.length;if(e.sort((i,o)=>i.index-o.index),r>t){for(let i=t;i<r;++i)this._destroyDatasetMeta(i);e.splice(t,r-t)}this._sortedMetasets=e.slice(0).sort(YT("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((r,i)=>{t.filter(o=>o===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=t.length;r<i;r++){const o=t[r];let l=this.getDatasetMeta(r);const c=o.type||this.config.type;if(l.type&&l.type!==c&&(this._destroyDatasetMeta(r),l=this.getDatasetMeta(r)),l.type=c,l.indexAxis=o.indexAxis||Qg(c,this.options),l.order=o.order||0,l.index=r,l.label=""+o.label,l.visible=this.isDatasetVisible(r),l.controller)l.controller.updateIndex(r),l.controller.linkScales();else{const h=Gr.getController(c),{datasetElementType:d,dataElementType:m}=xt.datasets[c];Object.assign(h,{dataElementType:Gr.getElement(m),datasetElementType:d&&Gr.getElement(d)}),l.controller=new h(this,r),e.push(l.controller)}}return this._updateMetasets(),e}_resetElements(){Ze(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const r=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let d=0,m=this.data.datasets.length;d<m;d++){const{controller:y}=this.getDatasetMeta(d),w=!i&&o.indexOf(y)===-1;y.buildOrUpdateElements(w),l=Math.max(+y.getMaxOverflow(),l)}l=this._minPadding=r.layout.autoPadding?l:0,this._updateLayout(l),i||Ze(o,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(YT("z","_idx"));const{_active:c,_lastEvent:h}=this;h?this._eventHandler(h,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){Ze(this.scales,e=>{Es.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!uT(t,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:o}of t){const l=r==="_removeElements"?-o:o;OU(e,i,l)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,r=o=>new Set(e.filter(l=>l[0]===o).map((l,c)=>c+","+l.splice(1).join(","))),i=r(0);for(let o=1;o<t;o++)if(!uT(i,r(o)))return;return Array.from(i).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Es.update(this,this.width,this.height,e);const t=this.chartArea,r=t.width<=0||t.height<=0;this._layers=[],Ze(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,o)=>{i._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,r=this.data.datasets.length;t<r;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,r=this.data.datasets.length;t<r;++t)this._updateDataset(t,Ns(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ii.has(this)?this.attached&&!Ii.running(this)&&Ii.start(this):(this.draw(),QT({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,r=[];let i,o;for(i=0,o=t.length;i<o;++i){const l=t[i];(!e||l.visible)&&r.push(l)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=h3(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&T_(t,i),e.controller.draw(),i&&b_(t),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return hu(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,r,i){const o=R3.modes[t];return typeof o=="function"?o(this,e,r,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],r=this._metasets;let i=r.filter(o=>o&&o._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=qo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!t.hidden}setDatasetVisibility(e,t){const r=this.getDatasetMeta(e);r.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,r){const i=r?"show":"hide",o=this.getDatasetMeta(e),l=o.controller._resolveAnimations(void 0,i);lf(t)?(o.data[t].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),l.update(o,{visible:r}),this.update(c=>c.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Ii.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),wT(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Dd[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,r=(o,l)=>{t.addEventListener(this,o,l),e[o]=l},i=(o,l,c)=>{o.offsetX=l,o.offsetY=c,this._eventHandler(o)};Ze(this.options.events,o=>r(o,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,r=(h,d)=>{t.addEventListener(this,h,d),e[h]=d},i=(h,d)=>{e[h]&&(t.removeEventListener(this,h,d),delete e[h])},o=(h,d)=>{this.canvas&&this.resize(h,d)};let l;const c=()=>{i("attach",c),this.attached=!0,this.resize(),r("resize",o),r("detach",l)};l=()=>{this.attached=!1,i("resize",o),this._stop(),this._resize(0,0),r("attach",c)},t.isAttached(this.canvas)?c():l()}unbindEvents(){Ze(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Ze(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,r){const i=r?"set":"remove";let o,l,c,h;for(t==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+i+"DatasetHoverStyle"]()),c=0,h=e.length;c<h;++c){l=e[c];const d=l&&this.getDatasetMeta(l.datasetIndex).controller;d&&d[i+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],r=e.map(({datasetIndex:o,index:l})=>{const c=this.getDatasetMeta(o);if(!c)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:c.data[l],index:l}});!sf(r,t)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,t))}notifyPlugins(e,t,r){return this._plugins.notify(this,e,t,r)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,r){const i=this.options.hover,o=(h,d)=>h.filter(m=>!d.some(y=>m.datasetIndex===y.datasetIndex&&m.index===y.index)),l=o(t,e),c=r?e:o(e,t);l.length&&this.updateHoverStyle(l,i.mode,!1),c.length&&i.mode&&this.updateHoverStyle(c,i.mode,!0)}_eventHandler(e,t){const r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=l=>(l.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const o=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(o||r.changed)&&this.render(),this}_handleEvent(e,t,r){const{_active:i=[],options:o}=this,l=t,c=this._getActiveElements(e,i,r,l),h=$4(e),d=MU(e,this._lastEvent,r,h);r&&(this._lastEvent=null,at(o.onHover,[e,c,this],this),h&&at(o.onClick,[e,c,this],this));const m=!sf(c,i);return(m||t)&&(this._active=c,this._updateHoverStyles(c,i,t)),this._lastEvent=d,m}_getActiveElements(e,t,r,i){if(e.type==="mouseout")return[];if(!r)return t;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,i)}};function JT(){return Ze(Qf.instances,n=>n._plugins.invalidate())}function $I(n,e,t=e){n.lineCap=qe(t.borderCapStyle,e.borderCapStyle),n.setLineDash(qe(t.borderDash,e.borderDash)),n.lineDashOffset=qe(t.borderDashOffset,e.borderDashOffset),n.lineJoin=qe(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=qe(t.borderWidth,e.borderWidth),n.strokeStyle=qe(t.borderColor,e.borderColor)}function NU(n,e,t){n.lineTo(t.x,t.y)}function LU(n){return n.stepped?_j:n.tension||n.cubicInterpolationMode==="monotone"?vj:NU}function HI(n,e,t={}){const r=n.length,{start:i=0,end:o=r-1}=t,{start:l,end:c}=e,h=Math.max(i,l),d=Math.min(o,c),m=i<l&&o<l||i>c&&o>c;return{count:r,start:h,loop:e.loop,ilen:d<h&&!m?r+d-h:d-h}}function VU(n,e,t,r){const{points:i,options:o}=e,{count:l,start:c,loop:h,ilen:d}=HI(i,t,r),m=LU(o);let{move:y=!0,reverse:w}=r||{},b,S,k;for(b=0;b<=d;++b)S=i[(c+(w?d-b:b))%l],!S.skip&&(y?(n.moveTo(S.x,S.y),y=!1):m(n,k,S,w,o.stepped),k=S);return h&&(S=i[(c+(w?d:0))%l],m(n,k,S,w,o.stepped)),!!h}function FU(n,e,t,r){const i=e.points,{count:o,start:l,ilen:c}=HI(i,t,r),{move:h=!0,reverse:d}=r||{};let m=0,y=0,w,b,S,k,T,N;const j=K=>(l+(d?c-K:K))%o,B=()=>{k!==T&&(n.lineTo(m,T),n.lineTo(m,k),n.lineTo(m,N))};for(h&&(b=i[j(0)],n.moveTo(b.x,b.y)),w=0;w<=c;++w){if(b=i[j(w)],b.skip)continue;const K=b.x,q=b.y,J=K|0;J===S?(q<k?k=q:q>T&&(T=q),m=(y*m+K)/++y):(B(),n.lineTo(K,q),S=J,y=0,k=T=q),N=q}B()}function Jg(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?FU:VU}function jU(n){return n.stepped?Jj:n.tension||n.cubicInterpolationMode==="monotone"?Zj:bo}function UU(n,e,t,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,r)&&i.closePath()),$I(n,e.options),n.stroke(i)}function zU(n,e,t,r){const{segments:i,options:o}=e,l=Jg(e);for(const c of i)$I(n,o,c.style),n.beginPath(),l(n,e,c,{start:t,end:t+r-1})&&n.closePath(),n.stroke()}const BU=typeof Path2D=="function";function $U(n,e,t,r){BU&&!e.options.segment?UU(n,e,t,r):zU(n,e,t,r)}class HU extends Tl{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;Hj(this._points,r,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=a3(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,r=e.length;return r&&t[e[r-1].end]}interpolate(e,t){const r=this.options,i=e[t],o=this.points,l=i3(this,{property:t,start:i,end:i});if(!l.length)return;const c=[],h=jU(r);let d,m;for(d=0,m=l.length;d<m;++d){const{start:y,end:w}=l[d],b=o[y],S=o[w];if(b===S){c.push(b);continue}const k=Math.abs((i-b[t])/(S[t]-b[t])),T=h(b,S,k,r.stepped);T[t]=e[t],c.push(T)}return c.length===1?c[0]:c}pathSegment(e,t,r){return Jg(this)(e,this,t,r)}path(e,t,r){const i=this.segments,o=Jg(this);let l=this._loop;t=t||0,r=r||this.points.length-t;for(const c of i)l&=o(e,this,c,{start:t,end:t+r-1});return!!l}draw(e,t,r,i){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),$U(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function ZT(n,e,t,r){const i=n.options,{[t]:o}=n.getProps([t],r);return Math.abs(e-o)<i.radius+i.hitRadius}class WU extends Tl{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,r){const i=this.options,{x:o,y:l}=this.getProps(["x","y"],r);return Math.pow(e-o,2)+Math.pow(t-l,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,t){return ZT(this,e,"x",t)}inYRange(e,t){return ZT(this,e,"y",t)}getCenterPoint(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const r=t&&e.borderWidth||0;return(t+r)*2}draw(e,t){const r=this.options;this.skip||r.radius<.1||!hu(this,t,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,Kg(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}const eb=(n,e)=>{let{boxHeight:t=e,boxWidth:r=e}=n;return n.usePointStyle&&(t=Math.min(t,e),r=n.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}},qU=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class tb extends Tl{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=at(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=An(r.font),o=i.size,l=this._computeTitleHeight(),{boxWidth:c,itemHeight:h}=eb(r,o);let d,m;t.font=i.string,this.isHorizontal()?(d=this.maxWidth,m=this._fitRows(l,o,c,h)+10):(m=this.maxHeight,d=this._fitCols(l,i,c,h)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(m,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,i){const{ctx:o,maxWidth:l,options:{labels:{padding:c}}}=this,h=this.legendHitBoxes=[],d=this.lineWidths=[0],m=i+c;let y=e;o.textAlign="left",o.textBaseline="middle";let w=-1,b=-m;return this.legendItems.forEach((S,k)=>{const T=r+t/2+o.measureText(S.text).width;(k===0||d[d.length-1]+T+2*c>l)&&(y+=m,d[d.length-(k>0?0:1)]=0,b+=m,w++),h[k]={left:0,top:b,row:w,width:T,height:i},d[d.length-1]+=T+c}),y}_fitCols(e,t,r,i){const{ctx:o,maxHeight:l,options:{labels:{padding:c}}}=this,h=this.legendHitBoxes=[],d=this.columnSizes=[],m=l-e;let y=c,w=0,b=0,S=0,k=0;return this.legendItems.forEach((T,N)=>{const{itemWidth:j,itemHeight:B}=GU(r,t,o,T,i);N>0&&b+B+2*c>m&&(y+=w+c,d.push({width:w,height:b}),S+=w+c,k++,w=b=0),h[N]={left:S,top:b,col:k,width:j,height:B},w=Math.max(w,j),b+=B+c}),y+=w,d.push({width:w,height:b}),y}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:o}}=this,l=Xa(o,this.left,this.width);if(this.isHorizontal()){let c=0,h=Bn(r,this.left+i,this.right-this.lineWidths[c]);for(const d of t)c!==d.row&&(c=d.row,h=Bn(r,this.left+i,this.right-this.lineWidths[c])),d.top+=this.top+e+i,d.left=l.leftForLtr(l.x(h),d.width),h+=d.width+i}else{let c=0,h=Bn(r,this.top+e+i,this.bottom-this.columnSizes[c].height);for(const d of t)d.col!==c&&(c=d.col,h=Bn(r,this.top+e+i,this.bottom-this.columnSizes[c].height)),d.top=h,d.left+=this.left+i,d.left=l.leftForLtr(l.x(d.left),d.width),h+=d.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;T_(e,this),this._draw(),b_(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:r,ctx:i}=this,{align:o,labels:l}=e,c=xt.color,h=Xa(e.rtl,this.left,this.width),d=An(l.font),{padding:m}=l,y=d.size,w=y/2;let b;this.drawTitle(),i.textAlign=h.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=d.string;const{boxWidth:S,boxHeight:k,itemHeight:T}=eb(l,y),N=function(J,R,I){if(isNaN(S)||S<=0||isNaN(k)||k<0)return;i.save();const P=qe(I.lineWidth,1);if(i.fillStyle=qe(I.fillStyle,c),i.lineCap=qe(I.lineCap,"butt"),i.lineDashOffset=qe(I.lineDashOffset,0),i.lineJoin=qe(I.lineJoin,"miter"),i.lineWidth=P,i.strokeStyle=qe(I.strokeStyle,c),i.setLineDash(qe(I.lineDash,[])),l.usePointStyle){const O={radius:k*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:P},L=h.xPlus(J,S/2),V=R+w;wI(i,O,L,V,l.pointStyleWidth&&S)}else{const O=R+Math.max((y-k)/2,0),L=h.leftForLtr(J,S),V=Gc(I.borderRadius);i.beginPath(),Object.values(V).some(D=>D!==0)?Yg(i,{x:L,y:O,w:S,h:k,radius:V}):i.rect(L,O,S,k),i.fill(),P!==0&&i.stroke()}i.restore()},j=function(J,R,I){uf(i,I.text,J,R+T/2,d,{strikethrough:I.hidden,textAlign:h.textAlign(I.textAlign)})},B=this.isHorizontal(),K=this._computeTitleHeight();B?b={x:Bn(o,this.left+m,this.right-r[0]),y:this.top+m+K,line:0}:b={x:this.left+m,y:Bn(o,this.top+K+m,this.bottom-t[0].height),line:0},kI(this.ctx,e.textDirection);const q=T+m;this.legendItems.forEach((J,R)=>{i.strokeStyle=J.fontColor,i.fillStyle=J.fontColor;const I=i.measureText(J.text).width,P=h.textAlign(J.textAlign||(J.textAlign=l.textAlign)),O=S+w+I;let L=b.x,V=b.y;h.setWidth(this.width),B?R>0&&L+O+m>this.right&&(V=b.y+=q,b.line++,L=b.x=Bn(o,this.left+m,this.right-r[b.line])):R>0&&V+q>this.bottom&&(L=b.x=L+t[b.line].width+m,b.line++,V=b.y=Bn(o,this.top+K+m,this.bottom-t[b.line].height));const D=h.x(L);if(N(D,V,J),L=sj(P,L+S+w,B?L+O:this.right,e.rtl),j(h.x(L),V,J),B)b.x+=O+m;else if(typeof J.text!="string"){const ne=d.lineHeight;b.y+=WI(J,ne)+m}else b.y+=q}),CI(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,r=An(t.font),i=Pr(t.padding);if(!t.display)return;const o=Xa(e.rtl,this.left,this.width),l=this.ctx,c=t.position,h=r.size/2,d=i.top+h;let m,y=this.left,w=this.width;if(this.isHorizontal())w=Math.max(...this.lineWidths),m=this.top+d,y=Bn(e.align,y,this.right-w);else{const S=this.columnSizes.reduce((k,T)=>Math.max(k,T.height),0);m=d+Bn(e.align,this.top,this.bottom-S-e.labels.padding-this._computeTitleHeight())}const b=Bn(c,y,y+w);l.textAlign=o.textAlign(yI(c)),l.textBaseline="middle",l.strokeStyle=t.color,l.fillStyle=t.color,l.font=r.string,uf(l,t.text,b,m,r)}_computeTitleHeight(){const e=this.options.title,t=An(e.font),r=Pr(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,i,o;if(Oc(e,this.left,this.right)&&Oc(t,this.top,this.bottom)){for(o=this.legendHitBoxes,r=0;r<o.length;++r)if(i=o[r],Oc(e,i.left,i.left+i.width)&&Oc(t,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const t=this.options;if(!QU(e.type,t))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,o=qU(i,r);i&&!o&&at(t.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!o&&at(t.onHover,[e,r,this],this)}else r&&at(t.onClick,[e,r,this],this)}}function GU(n,e,t,r,i){const o=KU(r,n,e,t),l=YU(i,r,e.lineHeight);return{itemWidth:o,itemHeight:l}}function KU(n,e,t,r){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((o,l)=>o.length>l.length?o:l)),e+t.size/2+r.measureText(i).width}function YU(n,e,t){let r=n;return typeof e.text!="string"&&(r=WI(e,t)),r}function WI(n,e){const t=n.text?n.text.length:0;return e*t}function QU(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var XU={id:"legend",_element:tb,start(n,e,t){const r=n.legend=new tb({ctx:n.ctx,options:t,chart:n});Es.configure(n,r,t),Es.addBox(n,r)},stop(n){Es.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const r=n.legend;Es.configure(n,r,t),r.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const r=e.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:o,useBorderRadius:l,borderRadius:c}}=n.legend.options;return n._getSortedDatasetMetas().map(h=>{const d=h.controller.getStyle(t?0:void 0),m=Pr(d.borderWidth);return{text:e[h.index].label,fillStyle:d.backgroundColor,fontColor:o,hidden:!h.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(m.width+m.height)/4,strokeStyle:d.borderColor,pointStyle:r||d.pointStyle,rotation:d.rotation,textAlign:i||d.textAlign,borderRadius:l&&(c||d.borderRadius),datasetIndex:h.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};const Nc={average(n){if(!n.length)return!1;let e,t,r=new Set,i=0,o=0;for(e=0,t=n.length;e<t;++e){const c=n[e].element;if(c&&c.hasValue()){const h=c.tooltipPosition();r.add(h.x),i+=h.y,++o}}return o===0||r.size===0?!1:{x:[...r].reduce((c,h)=>c+h)/r.size,y:i/o}},nearest(n,e){if(!n.length)return!1;let t=e.x,r=e.y,i=Number.POSITIVE_INFINITY,o,l,c;for(o=0,l=n.length;o<l;++o){const h=n[o].element;if(h&&h.hasValue()){const d=h.getCenterPoint(),m=qg(e,d);m<i&&(i=m,c=h)}}if(c){const h=c.tooltipPosition();t=h.x,r=h.y}return{x:t,y:r}}};function qr(n,e){return e&&(Xt(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function ki(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function JU(n,e){const{element:t,datasetIndex:r,index:i}=e,o=n.getDatasetMeta(r).controller,{label:l,value:c}=o.getLabelAndValue(i);return{chart:n,label:l,parsed:o.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:c,dataset:o.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function nb(n,e){const t=n.chart.ctx,{body:r,footer:i,title:o}=n,{boxWidth:l,boxHeight:c}=e,h=An(e.bodyFont),d=An(e.titleFont),m=An(e.footerFont),y=o.length,w=i.length,b=r.length,S=Pr(e.padding);let k=S.height,T=0,N=r.reduce((K,q)=>K+q.before.length+q.lines.length+q.after.length,0);if(N+=n.beforeBody.length+n.afterBody.length,y&&(k+=y*d.lineHeight+(y-1)*e.titleSpacing+e.titleMarginBottom),N){const K=e.displayColors?Math.max(c,h.lineHeight):h.lineHeight;k+=b*K+(N-b)*h.lineHeight+(N-1)*e.bodySpacing}w&&(k+=e.footerMarginTop+w*m.lineHeight+(w-1)*e.footerSpacing);let j=0;const B=function(K){T=Math.max(T,t.measureText(K).width+j)};return t.save(),t.font=d.string,Ze(n.title,B),t.font=h.string,Ze(n.beforeBody.concat(n.afterBody),B),j=e.displayColors?l+2+e.boxPadding:0,Ze(r,K=>{Ze(K.before,B),Ze(K.lines,B),Ze(K.after,B)}),j=0,t.font=m.string,Ze(n.footer,B),t.restore(),T+=S.width,{width:T,height:k}}function ZU(n,e){const{y:t,height:r}=e;return t<r/2?"top":t>n.height-r/2?"bottom":"center"}function e5(n,e,t,r){const{x:i,width:o}=r,l=t.caretSize+t.caretPadding;if(n==="left"&&i+o+l>e.width||n==="right"&&i-o-l<0)return!0}function t5(n,e,t,r){const{x:i,width:o}=t,{width:l,chartArea:{left:c,right:h}}=n;let d="center";return r==="center"?d=i<=(c+h)/2?"left":"right":i<=o/2?d="left":i>=l-o/2&&(d="right"),e5(d,n,e,t)&&(d="center"),d}function rb(n,e,t){const r=t.yAlign||e.yAlign||ZU(n,t);return{xAlign:t.xAlign||e.xAlign||t5(n,e,t,r),yAlign:r}}function n5(n,e){let{x:t,width:r}=n;return e==="right"?t-=r:e==="center"&&(t-=r/2),t}function r5(n,e,t){let{y:r,height:i}=n;return e==="top"?r+=t:e==="bottom"?r-=i+t:r-=i/2,r}function ib(n,e,t,r){const{caretSize:i,caretPadding:o,cornerRadius:l}=n,{xAlign:c,yAlign:h}=t,d=i+o,{topLeft:m,topRight:y,bottomLeft:w,bottomRight:b}=Gc(l);let S=n5(e,c);const k=r5(e,h,d);return h==="center"?c==="left"?S+=d:c==="right"&&(S-=d):c==="left"?S-=Math.max(m,w)+i:c==="right"&&(S+=Math.max(y,b)+i),{x:Sr(S,0,r.width-e.width),y:Sr(k,0,r.height-e.height)}}function md(n,e,t){const r=Pr(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-r.right:n.x+r.left}function sb(n){return qr([],ki(n))}function i5(n,e,t){return qo(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function ob(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const qI={beforeTitle:Si,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:Si,beforeBody:Si,beforeLabel:Si,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return ct(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Si,afterBody:Si,beforeFooter:Si,footer:Si,afterFooter:Si};function In(n,e,t,r){const i=n[e].call(t,r);return typeof i>"u"?qI[e].call(t,r):i}class ab extends Tl{static positioners=Nc;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&t.options.animation&&r.animations,o=new AI(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=i5(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:r}=t,i=In(r,"beforeTitle",this,e),o=In(r,"title",this,e),l=In(r,"afterTitle",this,e);let c=[];return c=qr(c,ki(i)),c=qr(c,ki(o)),c=qr(c,ki(l)),c}getBeforeBody(e,t){return sb(In(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:r}=t,i=[];return Ze(e,o=>{const l={before:[],lines:[],after:[]},c=ob(r,o);qr(l.before,ki(In(c,"beforeLabel",this,o))),qr(l.lines,In(c,"label",this,o)),qr(l.after,ki(In(c,"afterLabel",this,o))),i.push(l)}),i}getAfterBody(e,t){return sb(In(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:r}=t,i=In(r,"beforeFooter",this,e),o=In(r,"footer",this,e),l=In(r,"afterFooter",this,e);let c=[];return c=qr(c,ki(i)),c=qr(c,ki(o)),c=qr(c,ki(l)),c}_createItems(e){const t=this._active,r=this.chart.data,i=[],o=[],l=[];let c=[],h,d;for(h=0,d=t.length;h<d;++h)c.push(JU(this.chart,t[h]));return e.filter&&(c=c.filter((m,y,w)=>e.filter(m,y,w,r))),e.itemSort&&(c=c.sort((m,y)=>e.itemSort(m,y,r))),Ze(c,m=>{const y=ob(e.callbacks,m);i.push(In(y,"labelColor",this,m)),o.push(In(y,"labelPointStyle",this,m)),l.push(In(y,"labelTextColor",this,m))}),this.labelColors=i,this.labelPointStyles=o,this.labelTextColors=l,this.dataPoints=c,c}update(e,t){const r=this.options.setContext(this.getContext()),i=this._active;let o,l=[];if(!i.length)this.opacity!==0&&(o={opacity:0});else{const c=Nc[r.position].call(this,i,this._eventPosition);l=this._createItems(r),this.title=this.getTitle(l,r),this.beforeBody=this.getBeforeBody(l,r),this.body=this.getBody(l,r),this.afterBody=this.getAfterBody(l,r),this.footer=this.getFooter(l,r);const h=this._size=nb(this,r),d=Object.assign({},c,h),m=rb(this.chart,r,d),y=ib(r,d,m,this.chart);this.xAlign=m.xAlign,this.yAlign=m.yAlign,o={opacity:1,x:y.x,y:y.y,width:h.width,height:h.height,caretX:c.x,caretY:c.y}}this._tooltipItems=l,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,r,i){const o=this.getCaretPosition(e,r,i);t.lineTo(o.x1,o.y1),t.lineTo(o.x2,o.y2),t.lineTo(o.x3,o.y3)}getCaretPosition(e,t,r){const{xAlign:i,yAlign:o}=this,{caretSize:l,cornerRadius:c}=r,{topLeft:h,topRight:d,bottomLeft:m,bottomRight:y}=Gc(c),{x:w,y:b}=e,{width:S,height:k}=t;let T,N,j,B,K,q;return o==="center"?(K=b+k/2,i==="left"?(T=w,N=T-l,B=K+l,q=K-l):(T=w+S,N=T+l,B=K-l,q=K+l),j=T):(i==="left"?N=w+Math.max(h,m)+l:i==="right"?N=w+S-Math.max(d,y)-l:N=this.caretX,o==="top"?(B=b,K=B-l,T=N-l,j=N+l):(B=b+k,K=B+l,T=N+l,j=N-l),q=B),{x1:T,x2:N,x3:j,y1:B,y2:K,y3:q}}drawTitle(e,t,r){const i=this.title,o=i.length;let l,c,h;if(o){const d=Xa(r.rtl,this.x,this.width);for(e.x=md(this,r.titleAlign,r),t.textAlign=d.textAlign(r.titleAlign),t.textBaseline="middle",l=An(r.titleFont),c=r.titleSpacing,t.fillStyle=r.titleColor,t.font=l.string,h=0;h<o;++h)t.fillText(i[h],d.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+c,h+1===o&&(e.y+=r.titleMarginBottom-c)}}_drawColorBox(e,t,r,i,o){const l=this.labelColors[r],c=this.labelPointStyles[r],{boxHeight:h,boxWidth:d}=o,m=An(o.bodyFont),y=md(this,"left",o),w=i.x(y),b=h<m.lineHeight?(m.lineHeight-h)/2:0,S=t.y+b;if(o.usePointStyle){const k={radius:Math.min(d,h)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},T=i.leftForLtr(w,d)+d/2,N=S+h/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,Kg(e,k,T,N),e.strokeStyle=l.borderColor,e.fillStyle=l.backgroundColor,Kg(e,k,T,N)}else{e.lineWidth=Ke(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,e.strokeStyle=l.borderColor,e.setLineDash(l.borderDash||[]),e.lineDashOffset=l.borderDashOffset||0;const k=i.leftForLtr(w,d),T=i.leftForLtr(i.xPlus(w,1),d-2),N=Gc(l.borderRadius);Object.values(N).some(j=>j!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,Yg(e,{x:k,y:S,w:d,h,radius:N}),e.fill(),e.stroke(),e.fillStyle=l.backgroundColor,e.beginPath(),Yg(e,{x:T,y:S+1,w:d-2,h:h-2,radius:N}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(k,S,d,h),e.strokeRect(k,S,d,h),e.fillStyle=l.backgroundColor,e.fillRect(T,S+1,d-2,h-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,t,r){const{body:i}=this,{bodySpacing:o,bodyAlign:l,displayColors:c,boxHeight:h,boxWidth:d,boxPadding:m}=r,y=An(r.bodyFont);let w=y.lineHeight,b=0;const S=Xa(r.rtl,this.x,this.width),k=function(I){t.fillText(I,S.x(e.x+b),e.y+w/2),e.y+=w+o},T=S.textAlign(l);let N,j,B,K,q,J,R;for(t.textAlign=l,t.textBaseline="middle",t.font=y.string,e.x=md(this,T,r),t.fillStyle=r.bodyColor,Ze(this.beforeBody,k),b=c&&T!=="right"?l==="center"?d/2+m:d+2+m:0,K=0,J=i.length;K<J;++K){for(N=i[K],j=this.labelTextColors[K],t.fillStyle=j,Ze(N.before,k),B=N.lines,c&&B.length&&(this._drawColorBox(t,e,K,S,r),w=Math.max(y.lineHeight,h)),q=0,R=B.length;q<R;++q)k(B[q]),w=y.lineHeight;Ze(N.after,k)}b=0,w=y.lineHeight,Ze(this.afterBody,k),e.y-=o}drawFooter(e,t,r){const i=this.footer,o=i.length;let l,c;if(o){const h=Xa(r.rtl,this.x,this.width);for(e.x=md(this,r.footerAlign,r),e.y+=r.footerMarginTop,t.textAlign=h.textAlign(r.footerAlign),t.textBaseline="middle",l=An(r.footerFont),t.fillStyle=r.footerColor,t.font=l.string,c=0;c<o;++c)t.fillText(i[c],h.x(e.x),e.y+l.lineHeight/2),e.y+=l.lineHeight+r.footerSpacing}}drawBackground(e,t,r,i){const{xAlign:o,yAlign:l}=this,{x:c,y:h}=e,{width:d,height:m}=r,{topLeft:y,topRight:w,bottomLeft:b,bottomRight:S}=Gc(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(c+y,h),l==="top"&&this.drawCaret(e,t,r,i),t.lineTo(c+d-w,h),t.quadraticCurveTo(c+d,h,c+d,h+w),l==="center"&&o==="right"&&this.drawCaret(e,t,r,i),t.lineTo(c+d,h+m-S),t.quadraticCurveTo(c+d,h+m,c+d-S,h+m),l==="bottom"&&this.drawCaret(e,t,r,i),t.lineTo(c+b,h+m),t.quadraticCurveTo(c,h+m,c,h+m-b),l==="center"&&o==="left"&&this.drawCaret(e,t,r,i),t.lineTo(c,h+y),t.quadraticCurveTo(c,h,c+y,h),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,r=this.$animations,i=r&&r.x,o=r&&r.y;if(i||o){const l=Nc[e.position].call(this,this._active,this._eventPosition);if(!l)return;const c=this._size=nb(this,e),h=Object.assign({},l,this._size),d=rb(t,e,h),m=ib(e,h,d,t);(i._to!==m.x||o._to!==m.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=c.width,this.height=c.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,m))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const l=Pr(t.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&c&&(e.save(),e.globalAlpha=r,this.drawBackground(o,e,i,t),kI(e,t.textDirection),o.y+=l.top,this.drawTitle(o,e,t),this.drawBody(o,e,t),this.drawFooter(o,e,t),CI(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const r=this._active,i=e.map(({datasetIndex:c,index:h})=>{const d=this.chart.getDatasetMeta(c);if(!d)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:d.data[h],index:h}}),o=!sf(r,i),l=this._positionChanged(i,t);(o||l)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,r=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,o=this._active||[],l=this._getActiveElements(e,o,t,r),c=this._positionChanged(l,e),h=t||!sf(l,o)||c;return h&&(this._active=l,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),h}_getActiveElements(e,t,r,i){const o=this.options;if(e.type==="mouseout")return[];if(!i)return t.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const l=this.chart.getElementsAtEventForMode(e,o.mode,o,r);return o.reverse&&l.reverse(),l}_positionChanged(e,t){const{caretX:r,caretY:i,options:o}=this,l=Nc[o.position].call(this,e,t);return l!==!1&&(r!==l.x||i!==l.y)}}var s5={id:"tooltip",_element:ab,positioners:Nc,afterInit(n,e,t){t&&(n.tooltip=new ab({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:qI},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function o5(n,e){const t=[],{bounds:i,step:o,min:l,max:c,precision:h,count:d,maxTicks:m,maxDigits:y,includeBounds:w}=n,b=o||1,S=m-1,{min:k,max:T}=e,N=!ct(l),j=!ct(c),B=!ct(d),K=(T-k)/(y+1);let q=dT((T-k)/S/b)*b,J,R,I,P;if(q<1e-14&&!N&&!j)return[{value:k},{value:T}];P=Math.ceil(T/q)-Math.floor(k/q),P>S&&(q=dT(P*q/S/b)*b),ct(h)||(J=Math.pow(10,h),q=Math.ceil(q*J)/J),i==="ticks"?(R=Math.floor(k/q)*q,I=Math.ceil(T/q)*q):(R=k,I=T),N&&j&&o&&K4((c-l)/o,q/1e3)?(P=Math.round(Math.min((c-l)/q,m)),q=(c-l)/P,R=l,I=c):B?(R=N?l:R,I=j?c:I,P=d-1,q=(I-R)/P):(P=(I-R)/q,Hc(P,Math.round(P),q/1e3)?P=Math.round(P):P=Math.ceil(P));const O=Math.max(fT(q),fT(R));J=Math.pow(10,ct(h)?O:h),R=Math.round(R*J)/J,I=Math.round(I*J)/J;let L=0;for(N&&(w&&R!==l?(t.push({value:l}),R<l&&L++,Hc(Math.round((R+L*q)*J)/J,l,lb(l,K,n))&&L++):R<l&&L++);L<P;++L){const V=Math.round((R+L*q)*J)/J;if(j&&V>c)break;t.push({value:V})}return j&&w&&I!==c?t.length&&Hc(t[t.length-1].value,c,lb(c,K,n))?t[t.length-1].value=c:t.push({value:c}):(!j||I===c)&&t.push({value:I}),t}function lb(n,e,{horizontal:t,minRotation:r}){const i=Co(r),o=(t?Math.sin(i):Math.cos(i))||.001,l=.75*e*(""+n).length;return Math.min(e/o,l)}class a5 extends Ru{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return ct(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:i,max:o}=this;const l=h=>i=t?i:h,c=h=>o=r?o:h;if(e){const h=il(i),d=il(o);h<0&&d<0?c(0):h>0&&d>0&&l(0)}if(i===o){let h=o===0?1:Math.abs(o*.05);c(o+h),e||l(i-h)}this.min=i,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},o=this._range||this,l=o5(i,o);return e.bounds==="ticks"&&Y4(l,this,"value"),e.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-t)/Math.max(e.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return _I(e,this.chart.options.locale,this.options.ticks.format)}}class l5 extends a5{static id="linear";static defaults={ticks:{callback:vI.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ar(e)?e:0,this.max=ar(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=Co(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,o.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Xf={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Pn=Object.keys(Xf);function cb(n,e){return n-e}function ub(n,e){if(ct(e))return null;const t=n._adapter,{parser:r,round:i,isoWeekday:o}=n._parseOpts;let l=e;return typeof r=="function"&&(l=r(l)),ar(l)||(l=typeof r=="string"?t.parse(l,r):t.parse(l)),l===null?null:(i&&(l=i==="week"&&(uu(o)||o===!0)?t.startOf(l,"isoWeek",o):t.startOf(l,i)),+l)}function hb(n,e,t,r){const i=Pn.length;for(let o=Pn.indexOf(n);o<i-1;++o){const l=Xf[Pn[o]],c=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((t-e)/(c*l.size))<=r)return Pn[o]}return Pn[i-1]}function c5(n,e,t,r,i){for(let o=Pn.length-1;o>=Pn.indexOf(t);o--){const l=Pn[o];if(Xf[l].common&&n._adapter.diff(i,r,l)>=e-1)return l}return Pn[t?Pn.indexOf(t):0]}function u5(n){for(let e=Pn.indexOf(n)+1,t=Pn.length;e<t;++e)if(Xf[Pn[e]].common)return Pn[e]}function db(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:r,hi:i}=w_(t,e),o=t[r]>=e?t[r]:t[i];n[o]=!0}}function h5(n,e,t,r){const i=n._adapter,o=+i.startOf(e[0].value,r),l=e[e.length-1].value;let c,h;for(c=o;c<=l;c=+i.add(c,1,r))h=t[c],h>=0&&(e[h].major=!0);return e}function fb(n,e,t){const r=[],i={},o=e.length;let l,c;for(l=0;l<o;++l)c=e[l],i[c]=l,r.push({value:c,major:!1});return o===0||!t?r:h5(n,r,i,t)}class Zg extends Ru{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const r=e.time||(e.time={}),i=this._adapter=new OI._date(e.adapters.date);i.init(t),$c(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:ub(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,r=e.time.unit||"day";let{min:i,max:o,minDefined:l,maxDefined:c}=this.getUserBounds();function h(d){!l&&!isNaN(d.min)&&(i=Math.min(i,d.min)),!c&&!isNaN(d.max)&&(o=Math.max(o,d.max))}(!l||!c)&&(h(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&h(this.getMinMax(!1))),i=ar(i)&&!isNaN(i)?i:+t.startOf(Date.now(),r),o=ar(o)&&!isNaN(o)?o:+t.endOf(Date.now(),r)+1,this.min=Math.min(i,o-1),this.max=Math.max(i+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],r=e[e.length-1]),{min:t,max:r}}buildTicks(){const e=this.options,t=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const o=this.min,l=this.max,c=tj(i,o,l);return this._unit=t.unit||(r.autoSkip?hb(t.minUnit,this.min,this.max,this._getLabelCapacity(o)):c5(this,c.length,t.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:u5(this._unit),this.initOffsets(i),e.reverse&&c.reverse(),fb(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,r=0,i,o;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?t=1-i:t=(this.getDecimalForValue(e[1])-i)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?r=o:r=(o-this.getDecimalForValue(e[e.length-2]))/2);const l=e.length<3?.5:.25;t=Sr(t,0,l),r=Sr(r,0,l),this._offsets={start:t,end:r,factor:1/(t+1+r)}}_generate(){const e=this._adapter,t=this.min,r=this.max,i=this.options,o=i.time,l=o.unit||hb(o.minUnit,t,r,this._getLabelCapacity(t)),c=qe(i.ticks.stepSize,1),h=l==="week"?o.isoWeekday:!1,d=uu(h)||h===!0,m={};let y=t,w,b;if(d&&(y=+e.startOf(y,"isoWeek",h)),y=+e.startOf(y,d?"day":l),e.diff(r,t,l)>1e5*c)throw new Error(t+" and "+r+" are too far apart with stepSize of "+c+" "+l);const S=i.ticks.source==="data"&&this.getDataTimestamps();for(w=y,b=0;w<r;w=+e.add(w,c,l),b++)db(m,w,S);return(w===r||i.bounds==="ticks"||b===1)&&db(m,w,S),Object.keys(m).sort(cb).map(k=>+k)}getLabelForValue(e){const t=this._adapter,r=this.options.time;return r.tooltipFormat?t.format(e,r.tooltipFormat):t.format(e,r.displayFormats.datetime)}format(e,t){const i=this.options.time.displayFormats,o=this._unit,l=t||i[o];return this._adapter.format(e,l)}_tickFormatFunction(e,t,r,i){const o=this.options,l=o.ticks.callback;if(l)return at(l,[e,t,r],this);const c=o.time.displayFormats,h=this._unit,d=this._majorUnit,m=h&&c[h],y=d&&c[d],w=r[t],b=d&&y&&w&&w.major;return this._adapter.format(e,i||(b?y:m))}generateTickLabels(e){let t,r,i;for(t=0,r=e.length;t<r;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+r)*t.factor)}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,r=this.ctx.measureText(e).width,i=Co(this.isHorizontal()?t.maxRotation:t.minRotation),o=Math.cos(i),l=Math.sin(i),c=this._resolveTickFontOptions(0).size;return{w:r*o+c*l,h:r*l+c*o}}_getLabelCapacity(e){const t=this.options.time,r=t.displayFormats,i=r[t.unit]||r.millisecond,o=this._tickFormatFunction(e,0,fb(this,[e],this._majorUnit),i),l=this._getLabelSize(o),c=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return c>0?c:1}getDataTimestamps(){let e=this._cache.data||[],t,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,r=i.length;t<r;++t)e=e.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,r;if(e.length)return e;const i=this.getLabels();for(t=0,r=i.length;t<r;++t)e.push(ub(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return rj(e.sort(cb))}}function gd(n,e,t){let r=0,i=n.length-1,o,l,c,h;t?(e>=n[r].pos&&e<=n[i].pos&&({lo:r,hi:i}=Po(n,"pos",e)),{pos:o,time:c}=n[r],{pos:l,time:h}=n[i]):(e>=n[r].time&&e<=n[i].time&&({lo:r,hi:i}=Po(n,"time",e)),{time:o,pos:c}=n[r],{time:l,pos:h}=n[i]);const d=l-o;return d?c+(h-c)*(e-o)/d:c}class VB extends Zg{static id="timeseries";static defaults=Zg.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=gd(t,this.min),this._tableRange=gd(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:r}=this,i=[],o=[];let l,c,h,d,m;for(l=0,c=e.length;l<c;++l)d=e[l],d>=t&&d<=r&&i.push(d);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(l=0,c=i.length;l<c;++l)m=i[l+1],h=i[l-1],d=i[l],Math.round((m+h)/2)!==d&&o.push({time:d,pos:l/(c-1)});return o}_generate(){const e=this.min,t=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||r.length===1)&&r.push(t),r.sort((i,o)=>i-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return t.length&&r.length?e=this.normalize(t.concat(r)):e=t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(gd(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return gd(this._table,r*this._tableRange+this._minPos,!0)}}const GI="label";function pb(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function d5(n,e){const t=n.options;t&&e&&Object.assign(t,e)}function KI(n,e){n.labels=e}function YI(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:GI;const r=[];n.datasets=e.map(i=>{const o=n.datasets.find(l=>l[t]===i[t]);return!o||!i.data||r.includes(o)?{...i}:(r.push(o),Object.assign(o,i),o)})}function f5(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:GI;const t={labels:[],datasets:[]};return KI(t,n.labels),YI(t,n.datasets,e),t}function p5(n,e){const{height:t=150,width:r=300,redraw:i=!1,datasetIdKey:o,type:l,data:c,options:h,plugins:d=[],fallbackContent:m,updateMode:y,...w}=n,b=G.useRef(null),S=G.useRef(null),k=()=>{b.current&&(S.current=new Qf(b.current,{type:l,data:f5(c,o),options:h&&{...h},plugins:d}),pb(e,S.current))},T=()=>{pb(e,null),S.current&&(S.current.destroy(),S.current=null)};return G.useEffect(()=>{!i&&S.current&&h&&d5(S.current,h)},[i,h]),G.useEffect(()=>{!i&&S.current&&KI(S.current.config.data,c.labels)},[i,c.labels]),G.useEffect(()=>{!i&&S.current&&c.datasets&&YI(S.current.config.data,c.datasets,o)},[i,c.datasets]),G.useEffect(()=>{S.current&&(i?(T(),setTimeout(k)):S.current.update(y))},[i,h,c.labels,c.datasets,y]),G.useEffect(()=>{S.current&&(T(),setTimeout(k))},[l]),G.useEffect(()=>(k(),()=>T()),[]),mf.createElement("canvas",{ref:b,role:"img",height:t,width:r,...w},m)}const m5=G.forwardRef(p5);function g5(n,e){return Qf.register(e),G.forwardRef((t,r)=>mf.createElement(m5,{...t,ref:r,type:n}))}const y5=g5("line",I3),QI=6048e5,_5=864e5,Du=6e4,Ou=36e5,v5=1e3,mb=Symbol.for("constructDateFrom");function _t(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&mb in n?n[mb](e):n instanceof Date?new n.constructor(e):new Date(e)}function Me(n,e){return _t(e||n,n)}function Jf(n,e,t){const r=Me(n,t?.in);return isNaN(e)?_t(t?.in||n,NaN):(e&&r.setDate(r.getDate()+e),r)}function A_(n,e,t){const r=Me(n,t?.in);if(isNaN(e))return _t(n,NaN);if(!e)return r;const i=r.getDate(),o=_t(n,r.getTime());o.setMonth(r.getMonth()+e+1,0);const l=o.getDate();return i>=l?o:(r.setFullYear(o.getFullYear(),o.getMonth(),i),r)}function R_(n,e,t){return _t(n,+Me(n)+e)}function w5(n,e,t){return R_(n,e*Ou)}let E5={};function Go(){return E5}function ai(n,e){const t=Go(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=Me(n,e?.in),o=i.getDay(),l=(o<r?7:0)+o-r;return i.setDate(i.getDate()-l),i.setHours(0,0,0,0),i}function al(n,e){return ai(n,{...e,weekStartsOn:1})}function XI(n,e){const t=Me(n,e?.in),r=t.getFullYear(),i=_t(t,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const o=al(i),l=_t(t,0);l.setFullYear(r,0,4),l.setHours(0,0,0,0);const c=al(l);return t.getTime()>=o.getTime()?r+1:t.getTime()>=c.getTime()?r:r-1}function ff(n){const e=Me(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function Ko(n,...e){const t=_t.bind(null,e.find(r=>typeof r=="object"));return e.map(t)}function ey(n,e){const t=Me(n,e?.in);return t.setHours(0,0,0,0),t}function JI(n,e,t){const[r,i]=Ko(t?.in,n,e),o=ey(r),l=ey(i),c=+o-ff(o),h=+l-ff(l);return Math.round((c-h)/_5)}function T5(n,e){const t=XI(n,e),r=_t(n,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),al(r)}function b5(n,e,t){const r=Me(n,t?.in);return r.setTime(r.getTime()+e*Du),r}function x5(n,e,t){return A_(n,e*3,t)}function S5(n,e,t){return R_(n,e*1e3)}function I5(n,e,t){return Jf(n,e*7,t)}function k5(n,e,t){return A_(n,e*12,t)}function Kc(n,e){const t=+Me(n)-+Me(e);return t<0?-1:t>0?1:t}function C5(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function ZI(n){return!(!C5(n)&&typeof n!="number"||isNaN(+Me(n)))}function P5(n,e,t){const[r,i]=Ko(t?.in,n,e),o=r.getFullYear()-i.getFullYear(),l=r.getMonth()-i.getMonth();return o*12+l}function A5(n,e,t){const[r,i]=Ko(t?.in,n,e);return r.getFullYear()-i.getFullYear()}function ek(n,e,t){const[r,i]=Ko(t?.in,n,e),o=gb(r,i),l=Math.abs(JI(r,i));r.setDate(r.getDate()-o*l);const c=+(gb(r,i)===-o),h=o*(l-c);return h===0?0:h}function gb(n,e){const t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function Mu(n){return e=>{const r=(n?Math[n]:Math.trunc)(e);return r===0?0:r}}function R5(n,e,t){const[r,i]=Ko(t?.in,n,e),o=(+r-+i)/Ou;return Mu(t?.roundingMethod)(o)}function D_(n,e){return+Me(n)-+Me(e)}function D5(n,e,t){const r=D_(n,e)/Du;return Mu(t?.roundingMethod)(r)}function tk(n,e){const t=Me(n,e?.in);return t.setHours(23,59,59,999),t}function nk(n,e){const t=Me(n,e?.in),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function O5(n,e){const t=Me(n,e?.in);return+tk(t,e)==+nk(t,e)}function rk(n,e,t){const[r,i,o]=Ko(t?.in,n,n,e),l=Kc(i,o),c=Math.abs(P5(i,o));if(c<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-l*c);let h=Kc(i,o)===-l;O5(r)&&c===1&&Kc(r,o)===1&&(h=!1);const d=l*(c-+h);return d===0?0:d}function M5(n,e,t){const r=rk(n,e,t)/3;return Mu(t?.roundingMethod)(r)}function N5(n,e,t){const r=D_(n,e)/1e3;return Mu(t?.roundingMethod)(r)}function L5(n,e,t){const r=ek(n,e,t)/7;return Mu(t?.roundingMethod)(r)}function V5(n,e,t){const[r,i]=Ko(t?.in,n,e),o=Kc(r,i),l=Math.abs(A5(r,i));r.setFullYear(1584),i.setFullYear(1584);const c=Kc(r,i)===-o,h=o*(l-+c);return h===0?0:h}function F5(n,e){const t=Me(n,e?.in),r=t.getMonth(),i=r-r%3;return t.setMonth(i,1),t.setHours(0,0,0,0),t}function j5(n,e){const t=Me(n,e?.in);return t.setDate(1),t.setHours(0,0,0,0),t}function U5(n,e){const t=Me(n,e?.in),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(23,59,59,999),t}function ik(n,e){const t=Me(n,e?.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function z5(n,e){const t=Me(n,e?.in);return t.setMinutes(59,59,999),t}function B5(n,e){const t=Go(),r=t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=Me(n,e?.in),o=i.getDay(),l=(o<r?-7:0)+6-(o-r);return i.setDate(i.getDate()+l),i.setHours(23,59,59,999),i}function $5(n,e){const t=Me(n,e?.in);return t.setSeconds(59,999),t}function H5(n,e){const t=Me(n,e?.in),r=t.getMonth(),i=r-r%3+3;return t.setMonth(i,0),t.setHours(23,59,59,999),t}function W5(n,e){const t=Me(n,e?.in);return t.setMilliseconds(999),t}const q5={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},G5=(n,e,t)=>{let r;const i=q5[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function ag(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const K5={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Y5={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Q5={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},X5={date:ag({formats:K5,defaultWidth:"full"}),time:ag({formats:Y5,defaultWidth:"full"}),dateTime:ag({formats:Q5,defaultWidth:"full"})},J5={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Z5=(n,e,t,r)=>J5[n];function Tc(n){return(e,t)=>{const r=t?.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const l=n.defaultFormattingWidth||n.defaultWidth,c=t?.width?String(t.width):l;i=n.formattingValues[c]||n.formattingValues[l]}else{const l=n.defaultWidth,c=t?.width?String(t.width):n.defaultWidth;i=n.values[c]||n.values[l]}const o=n.argumentCallback?n.argumentCallback(e):e;return i[o]}}const e6={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},t6={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},n6={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},r6={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},i6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},s6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},o6=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},a6={ordinalNumber:o6,era:Tc({values:e6,defaultWidth:"wide"}),quarter:Tc({values:t6,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Tc({values:n6,defaultWidth:"wide"}),day:Tc({values:r6,defaultWidth:"wide"}),dayPeriod:Tc({values:i6,defaultWidth:"wide",formattingValues:s6,defaultFormattingWidth:"wide"})};function bc(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],o=e.match(i);if(!o)return null;const l=o[0],c=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],h=Array.isArray(c)?c6(c,y=>y.test(l)):l6(c,y=>y.test(l));let d;d=n.valueCallback?n.valueCallback(h):h,d=t.valueCallback?t.valueCallback(d):d;const m=e.slice(l.length);return{value:d,rest:m}}}function l6(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function c6(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function u6(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],o=e.match(n.parsePattern);if(!o)return null;let l=n.valueCallback?n.valueCallback(o[0]):o[0];l=t.valueCallback?t.valueCallback(l):l;const c=e.slice(i.length);return{value:l,rest:c}}}const h6=/^(\d+)(th|st|nd|rd)?/i,d6=/\d+/i,f6={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},p6={any:[/^b/i,/^(a|c)/i]},m6={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},g6={any:[/1/i,/2/i,/3/i,/4/i]},y6={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},_6={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},v6={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},w6={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},E6={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},T6={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},b6={ordinalNumber:u6({matchPattern:h6,parsePattern:d6,valueCallback:n=>parseInt(n,10)}),era:bc({matchPatterns:f6,defaultMatchWidth:"wide",parsePatterns:p6,defaultParseWidth:"any"}),quarter:bc({matchPatterns:m6,defaultMatchWidth:"wide",parsePatterns:g6,defaultParseWidth:"any",valueCallback:n=>n+1}),month:bc({matchPatterns:y6,defaultMatchWidth:"wide",parsePatterns:_6,defaultParseWidth:"any"}),day:bc({matchPatterns:v6,defaultMatchWidth:"wide",parsePatterns:w6,defaultParseWidth:"any"}),dayPeriod:bc({matchPatterns:E6,defaultMatchWidth:"any",parsePatterns:T6,defaultParseWidth:"any"})},sk={code:"en-US",formatDistance:G5,formatLong:X5,formatRelative:Z5,localize:a6,match:b6,options:{weekStartsOn:0,firstWeekContainsDate:1}};function x6(n,e){const t=Me(n,e?.in);return JI(t,ik(t))+1}function ok(n,e){const t=Me(n,e?.in),r=+al(t)-+T5(t);return Math.round(r/QI)+1}function O_(n,e){const t=Me(n,e?.in),r=t.getFullYear(),i=Go(),o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,l=_t(e?.in||n,0);l.setFullYear(r+1,0,o),l.setHours(0,0,0,0);const c=ai(l,e),h=_t(e?.in||n,0);h.setFullYear(r,0,o),h.setHours(0,0,0,0);const d=ai(h,e);return+t>=+c?r+1:+t>=+d?r:r-1}function S6(n,e){const t=Go(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,i=O_(n,e),o=_t(e?.in||n,0);return o.setFullYear(i,0,r),o.setHours(0,0,0,0),ai(o,e)}function ak(n,e){const t=Me(n,e?.in),r=+ai(t,e)-+S6(t,e);return Math.round(r/QI)+1}function Je(n,e){const t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}const hs={y(n,e){const t=n.getFullYear(),r=t>0?t:1-t;return Je(e==="yy"?r%100:r,e.length)},M(n,e){const t=n.getMonth();return e==="M"?String(t+1):Je(t+1,2)},d(n,e){return Je(n.getDate(),e.length)},a(n,e){const t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Je(n.getHours()%12||12,e.length)},H(n,e){return Je(n.getHours(),e.length)},m(n,e){return Je(n.getMinutes(),e.length)},s(n,e){return Je(n.getSeconds(),e.length)},S(n,e){const t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return Je(i,e.length)}},Ua={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},yb={G:function(n,e,t){const r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){const r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return hs.y(n,e)},Y:function(n,e,t,r){const i=O_(n,r),o=i>0?i:1-i;if(e==="YY"){const l=o%100;return Je(l,2)}return e==="Yo"?t.ordinalNumber(o,{unit:"year"}):Je(o,e.length)},R:function(n,e){const t=XI(n);return Je(t,e.length)},u:function(n,e){const t=n.getFullYear();return Je(t,e.length)},Q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Je(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){const r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Je(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){const r=n.getMonth();switch(e){case"M":case"MM":return hs.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){const r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return Je(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){const i=ak(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):Je(i,e.length)},I:function(n,e,t){const r=ok(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):Je(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):hs.d(n,e)},D:function(n,e,t){const r=x6(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):Je(r,e.length)},E:function(n,e,t){const r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){const i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Je(o,2);case"eo":return t.ordinalNumber(o,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){const i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Je(o,e.length);case"co":return t.ordinalNumber(o,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){const r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Je(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){const i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){const r=n.getHours();let i;switch(r===12?i=Ua.noon:r===0?i=Ua.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){const r=n.getHours();let i;switch(r>=17?i=Ua.evening:r>=12?i=Ua.afternoon:r>=4?i=Ua.morning:i=Ua.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return hs.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):hs.H(n,e)},K:function(n,e,t){const r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):Je(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):Je(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):hs.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):hs.s(n,e)},S:function(n,e){return hs.S(n,e)},X:function(n,e,t){const r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return vb(r);case"XXXX":case"XX":return xo(r);case"XXXXX":case"XXX":default:return xo(r,":")}},x:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"x":return vb(r);case"xxxx":case"xx":return xo(r);case"xxxxx":case"xxx":default:return xo(r,":")}},O:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+_b(r,":");case"OOOO":default:return"GMT"+xo(r,":")}},z:function(n,e,t){const r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+_b(r,":");case"zzzz":default:return"GMT"+xo(r,":")}},t:function(n,e,t){const r=Math.trunc(+n/1e3);return Je(r,e.length)},T:function(n,e,t){return Je(+n,e.length)}};function _b(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),o=r%60;return o===0?t+String(i):t+String(i)+e+Je(o,2)}function vb(n,e){return n%60===0?(n>0?"-":"+")+Je(Math.abs(n)/60,2):xo(n,e)}function xo(n,e=""){const t=n>0?"-":"+",r=Math.abs(n),i=Je(Math.trunc(r/60),2),o=Je(r%60,2);return t+i+e+o}const wb=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},lk=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},I6=(n,e)=>{const t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return wb(n,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",wb(r,e)).replace("{{time}}",lk(i,e))},ty={p:lk,P:I6},k6=/^D+$/,C6=/^Y+$/,P6=["D","DD","YY","YYYY"];function ck(n){return k6.test(n)}function uk(n){return C6.test(n)}function ny(n,e,t){const r=A6(n,e,t);if(console.warn(r),P6.includes(n))throw new RangeError(r)}function A6(n,e,t){const r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const R6=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,D6=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,O6=/^'([^]*?)'?$/,M6=/''/g,N6=/[a-zA-Z]/;function L6(n,e,t){const r=Go(),i=t?.locale??r.locale??sk,o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,l=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,c=Me(n,t?.in);if(!ZI(c))throw new RangeError("Invalid time value");let h=e.match(D6).map(m=>{const y=m[0];if(y==="p"||y==="P"){const w=ty[y];return w(m,i.formatLong)}return m}).join("").match(R6).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const y=m[0];if(y==="'")return{isToken:!1,value:V6(m)};if(yb[y])return{isToken:!0,value:m};if(y.match(N6))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:m}});i.localize.preprocessor&&(h=i.localize.preprocessor(c,h));const d={firstWeekContainsDate:o,weekStartsOn:l,locale:i};return h.map(m=>{if(!m.isToken)return m.value;const y=m.value;(!t?.useAdditionalWeekYearTokens&&uk(y)||!t?.useAdditionalDayOfYearTokens&&ck(y))&&ny(y,e,String(n));const w=yb[y[0]];return w(c,y,i.localize,d)}).join("")}function V6(n){const e=n.match(O6);return e?e[1].replace(M6,"'"):n}function F6(){return Object.assign({},Go())}function j6(n,e){const t=Me(n,e?.in).getDay();return t===0?7:t}function U6(n,e){const t=z6(e)?new e(0):_t(e,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),t}function z6(n){return typeof n=="function"&&n.prototype?.constructor===n}const B6=10;class hk{subPriority=0;validate(e,t){return!0}}class $6 extends hk{constructor(e,t,r,i,o){super(),this.value=e,this.validateValue=t,this.setValue=r,this.priority=i,o&&(this.subPriority=o)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,r){return this.setValue(e,t,this.value,r)}}class H6 extends hk{priority=B6;subPriority=-1;constructor(e,t){super(),this.context=e||(r=>_t(t,r))}set(e,t){return t.timestampIsSet?e:_t(e,U6(e,this.context))}}class Ye{run(e,t,r,i){const o=this.parse(e,t,r,i);return o?{setter:new $6(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(e,t,r){return!0}}class W6 extends Ye{priority=140;parse(e,t,r){switch(t){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});case"GGGG":default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,t,r){return t.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]}const St={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Yr={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function It(n,e){return n&&{value:e(n.value),rest:n.rest}}function pt(n,e){const t=e.match(n);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function Qr(n,e){const t=e.match(n);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const r=t[1]==="+"?1:-1,i=t[2]?parseInt(t[2],10):0,o=t[3]?parseInt(t[3],10):0,l=t[5]?parseInt(t[5],10):0;return{value:r*(i*Ou+o*Du+l*v5),rest:e.slice(t[0].length)}}function dk(n){return pt(St.anyDigitsSigned,n)}function vt(n,e){switch(n){case 1:return pt(St.singleDigit,e);case 2:return pt(St.twoDigits,e);case 3:return pt(St.threeDigits,e);case 4:return pt(St.fourDigits,e);default:return pt(new RegExp("^\\d{1,"+n+"}"),e)}}function pf(n,e){switch(n){case 1:return pt(St.singleDigitSigned,e);case 2:return pt(St.twoDigitsSigned,e);case 3:return pt(St.threeDigitsSigned,e);case 4:return pt(St.fourDigitsSigned,e);default:return pt(new RegExp("^-?\\d{1,"+n+"}"),e)}}function M_(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function fk(n,e){const t=e>0,r=t?e:1-e;let i;if(r<=50)i=n||100;else{const o=r+50,l=Math.trunc(o/100)*100,c=n>=o%100;i=n+l-(c?100:0)}return t?i:1-i}function pk(n){return n%400===0||n%4===0&&n%100!==0}class q6 extends Ye{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,t,r){const i=o=>({year:o,isTwoDigitYear:t==="yy"});switch(t){case"y":return It(vt(4,e),i);case"yo":return It(r.ordinalNumber(e,{unit:"year"}),i);default:return It(vt(t.length,e),i)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r){const i=e.getFullYear();if(r.isTwoDigitYear){const l=fk(r.year,i);return e.setFullYear(l,0,1),e.setHours(0,0,0,0),e}const o=!("era"in t)||t.era===1?r.year:1-r.year;return e.setFullYear(o,0,1),e.setHours(0,0,0,0),e}}class G6 extends Ye{priority=130;parse(e,t,r){const i=o=>({year:o,isTwoDigitYear:t==="YY"});switch(t){case"Y":return It(vt(4,e),i);case"Yo":return It(r.ordinalNumber(e,{unit:"year"}),i);default:return It(vt(t.length,e),i)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r,i){const o=O_(e,i);if(r.isTwoDigitYear){const c=fk(r.year,o);return e.setFullYear(c,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),ai(e,i)}const l=!("era"in t)||t.era===1?r.year:1-r.year;return e.setFullYear(l,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),ai(e,i)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class K6 extends Ye{priority=130;parse(e,t){return pf(t==="R"?4:t.length,e)}set(e,t,r){const i=_t(e,0);return i.setFullYear(r,0,4),i.setHours(0,0,0,0),al(i)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class Y6 extends Ye{priority=130;parse(e,t){return pf(t==="u"?4:t.length,e)}set(e,t,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class Q6 extends Ye{priority=120;parse(e,t,r){switch(t){case"Q":case"QQ":return vt(t.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class X6 extends Ye{priority=120;parse(e,t,r){switch(t){case"q":case"qq":return vt(t.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth((r-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class J6 extends Ye{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,t,r){const i=o=>o-1;switch(t){case"M":return It(pt(St.month,e),i);case"MM":return It(vt(2,e),i);case"Mo":return It(r.ordinalNumber(e,{unit:"month"}),i);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}}class Z6 extends Ye{priority=110;parse(e,t,r){const i=o=>o-1;switch(t){case"L":return It(pt(St.month,e),i);case"LL":return It(vt(2,e),i);case"Lo":return It(r.ordinalNumber(e,{unit:"month"}),i);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function ez(n,e,t){const r=Me(n,t?.in),i=ak(r,t)-e;return r.setDate(r.getDate()-i*7),Me(r,t?.in)}class tz extends Ye{priority=100;parse(e,t,r){switch(t){case"w":return pt(St.week,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return vt(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r,i){return ai(ez(e,r,i),i)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function nz(n,e,t){const r=Me(n,t?.in),i=ok(r,t)-e;return r.setDate(r.getDate()-i*7),r}class rz extends Ye{priority=100;parse(e,t,r){switch(t){case"I":return pt(St.week,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return vt(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r){return al(nz(e,r))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const iz=[31,28,31,30,31,30,31,31,30,31,30,31],sz=[31,29,31,30,31,30,31,31,30,31,30,31];class oz extends Ye{priority=90;subPriority=1;parse(e,t,r){switch(t){case"d":return pt(St.date,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return vt(t.length,e)}}validate(e,t){const r=e.getFullYear(),i=pk(r),o=e.getMonth();return i?t>=1&&t<=sz[o]:t>=1&&t<=iz[o]}set(e,t,r){return e.setDate(r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class az extends Ye{priority=90;subpriority=1;parse(e,t,r){switch(t){case"D":case"DD":return pt(St.dayOfYear,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return vt(t.length,e)}}validate(e,t){const r=e.getFullYear();return pk(r)?t>=1&&t<=366:t>=1&&t<=365}set(e,t,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function N_(n,e,t){const r=Go(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,o=Me(n,t?.in),l=o.getDay(),h=(e%7+7)%7,d=7-i,m=e<0||e>6?e-(l+d)%7:(h+d)%7-(l+d)%7;return Jf(o,m,t)}class lz extends Ye{priority=90;parse(e,t,r){switch(t){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,i){return e=N_(e,r,i),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]}class cz extends Ye{priority=90;parse(e,t,r,i){const o=l=>{const c=Math.floor((l-1)/7)*7;return(l+i.weekStartsOn+6)%7+c};switch(t){case"e":case"ee":return It(vt(t.length,e),o);case"eo":return It(r.ordinalNumber(e,{unit:"day"}),o);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,i){return e=N_(e,r,i),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class uz extends Ye{priority=90;parse(e,t,r,i){const o=l=>{const c=Math.floor((l-1)/7)*7;return(l+i.weekStartsOn+6)%7+c};switch(t){case"c":case"cc":return It(vt(t.length,e),o);case"co":return It(r.ordinalNumber(e,{unit:"day"}),o);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,i){return e=N_(e,r,i),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function hz(n,e,t){const r=Me(n,t?.in),i=j6(r,t),o=e-i;return Jf(r,o,t)}class dz extends Ye{priority=90;parse(e,t,r){const i=o=>o===0?7:o;switch(t){case"i":case"ii":return vt(t.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return It(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),i);case"iiiii":return It(r.day(e,{width:"narrow",context:"formatting"}),i);case"iiiiii":return It(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),i);case"iiii":default:return It(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),i)}}validate(e,t){return t>=1&&t<=7}set(e,t,r){return e=hz(e,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class fz extends Ye{priority=80;parse(e,t,r){switch(t){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(M_(r),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]}class pz extends Ye{priority=80;parse(e,t,r){switch(t){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(M_(r),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]}class mz extends Ye{priority=80;parse(e,t,r){switch(t){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(M_(r),0,0,0),e}incompatibleTokens=["a","b","t","T"]}class gz extends Ye{priority=70;parse(e,t,r){switch(t){case"h":return pt(St.hour12h,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return vt(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,r){const i=e.getHours()>=12;return i&&r<12?e.setHours(r+12,0,0,0):!i&&r===12?e.setHours(0,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]}class yz extends Ye{priority=70;parse(e,t,r){switch(t){case"H":return pt(St.hour23h,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return vt(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,r){return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]}class _z extends Ye{priority=70;parse(e,t,r){switch(t){case"K":return pt(St.hour11h,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return vt(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]}class vz extends Ye{priority=70;parse(e,t,r){switch(t){case"k":return pt(St.hour24h,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return vt(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,r){const i=r<=24?r%24:r;return e.setHours(i,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]}class wz extends Ye{priority=60;parse(e,t,r){switch(t){case"m":return pt(St.minute,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return vt(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setMinutes(r,0,0),e}incompatibleTokens=["t","T"]}class Ez extends Ye{priority=50;parse(e,t,r){switch(t){case"s":return pt(St.second,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return vt(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setSeconds(r,0),e}incompatibleTokens=["t","T"]}class Tz extends Ye{priority=30;parse(e,t){const r=i=>Math.trunc(i*Math.pow(10,-t.length+3));return It(vt(t.length,e),r)}set(e,t,r){return e.setMilliseconds(r),e}incompatibleTokens=["t","T"]}class bz extends Ye{priority=10;parse(e,t){switch(t){case"X":return Qr(Yr.basicOptionalMinutes,e);case"XX":return Qr(Yr.basic,e);case"XXXX":return Qr(Yr.basicOptionalSeconds,e);case"XXXXX":return Qr(Yr.extendedOptionalSeconds,e);case"XXX":default:return Qr(Yr.extended,e)}}set(e,t,r){return t.timestampIsSet?e:_t(e,e.getTime()-ff(e)-r)}incompatibleTokens=["t","T","x"]}class xz extends Ye{priority=10;parse(e,t){switch(t){case"x":return Qr(Yr.basicOptionalMinutes,e);case"xx":return Qr(Yr.basic,e);case"xxxx":return Qr(Yr.basicOptionalSeconds,e);case"xxxxx":return Qr(Yr.extendedOptionalSeconds,e);case"xxx":default:return Qr(Yr.extended,e)}}set(e,t,r){return t.timestampIsSet?e:_t(e,e.getTime()-ff(e)-r)}incompatibleTokens=["t","T","X"]}class Sz extends Ye{priority=40;parse(e){return dk(e)}set(e,t,r){return[_t(e,r*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class Iz extends Ye{priority=20;parse(e){return dk(e)}set(e,t,r){return[_t(e,r),{timestampIsSet:!0}]}incompatibleTokens="*"}const kz={G:new W6,y:new q6,Y:new G6,R:new K6,u:new Y6,Q:new Q6,q:new X6,M:new J6,L:new Z6,w:new tz,I:new rz,d:new oz,D:new az,E:new lz,e:new cz,c:new uz,i:new dz,a:new fz,b:new pz,B:new mz,h:new gz,H:new yz,K:new _z,k:new vz,m:new wz,s:new Ez,S:new Tz,X:new bz,x:new xz,t:new Sz,T:new Iz},Cz=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Pz=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Az=/^'([^]*?)'?$/,Rz=/''/g,Dz=/\S/,Oz=/[a-zA-Z]/;function Mz(n,e,t,r){const i=()=>_t(r?.in||t,NaN),o=F6(),l=r?.locale??o.locale??sk,c=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,h=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??o.weekStartsOn??o.locale?.options?.weekStartsOn??0;if(!e)return n?i():Me(t,r?.in);const d={firstWeekContainsDate:c,weekStartsOn:h,locale:l},m=[new H6(r?.in,t)],y=e.match(Pz).map(T=>{const N=T[0];if(N in ty){const j=ty[N];return j(T,l.formatLong)}return T}).join("").match(Cz),w=[];for(let T of y){!r?.useAdditionalWeekYearTokens&&uk(T)&&ny(T,e,n),!r?.useAdditionalDayOfYearTokens&&ck(T)&&ny(T,e,n);const N=T[0],j=kz[N];if(j){const{incompatibleTokens:B}=j;if(Array.isArray(B)){const q=w.find(J=>B.includes(J.token)||J.token===N);if(q)throw new RangeError(`The format string mustn't contain \`${q.fullToken}\` and \`${T}\` at the same time`)}else if(j.incompatibleTokens==="*"&&w.length>0)throw new RangeError(`The format string mustn't contain \`${T}\` and any other token at the same time`);w.push({token:N,fullToken:T});const K=j.run(n,T,l.match,d);if(!K)return i();m.push(K.setter),n=K.rest}else{if(N.match(Oz))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");if(T==="''"?T="'":N==="'"&&(T=Nz(T)),n.indexOf(T)===0)n=n.slice(T.length);else return i()}}if(n.length>0&&Dz.test(n))return i();const b=m.map(T=>T.priority).sort((T,N)=>N-T).filter((T,N,j)=>j.indexOf(T)===N).map(T=>m.filter(N=>N.priority===T).sort((N,j)=>j.subPriority-N.subPriority)).map(T=>T[0]);let S=Me(t,r?.in);if(isNaN(+S))return i();const k={};for(const T of b){if(!T.validate(S,d))return i();const N=T.set(S,k,d);Array.isArray(N)?(S=N[0],Object.assign(k,N[1])):S=N}return S}function Nz(n){return n.match(Az)[1].replace(Rz,"'")}function Lz(n,e){const t=Me(n,e?.in);return t.setMinutes(0,0,0),t}function Vz(n,e){const t=Me(n,e?.in);return t.setSeconds(0,0),t}function Fz(n,e){const t=Me(n,e?.in);return t.setMilliseconds(0),t}function jz(n,e){const t=()=>_t(e?.in,NaN),r=e?.additionalDigits??2,i=$z(n);let o;if(i.date){const d=Hz(i.date,r);o=Wz(d.restDateString,d.year)}if(!o||isNaN(+o))return t();const l=+o;let c=0,h;if(i.time&&(c=qz(i.time),isNaN(c)))return t();if(i.timezone){if(h=Gz(i.timezone),isNaN(h))return t()}else{const d=new Date(l+c),m=Me(0,e?.in);return m.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),m.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),m}return Me(l+c+h,e?.in)}const yd={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Uz=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,zz=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Bz=/^([+-])(\d{2})(?::?(\d{2}))?$/;function $z(n){const e={},t=n.split(yd.dateTimeDelimiter);let r;if(t.length>2)return e;if(/:/.test(t[0])?r=t[0]:(e.date=t[0],r=t[1],yd.timeZoneDelimiter.test(e.date)&&(e.date=n.split(yd.timeZoneDelimiter)[0],r=n.substr(e.date.length,n.length))),r){const i=yd.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function Hz(n,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=n.match(t);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,o=r[2]?parseInt(r[2]):null;return{year:o===null?i:o*100,restDateString:n.slice((r[1]||r[2]).length)}}function Wz(n,e){if(e===null)return new Date(NaN);const t=n.match(Uz);if(!t)return new Date(NaN);const r=!!t[4],i=xc(t[1]),o=xc(t[2])-1,l=xc(t[3]),c=xc(t[4]),h=xc(t[5])-1;if(r)return Jz(e,c,h)?Kz(e,c,h):new Date(NaN);{const d=new Date(0);return!Qz(e,o,l)||!Xz(e,i)?new Date(NaN):(d.setUTCFullYear(e,o,Math.max(i,l)),d)}}function xc(n){return n?parseInt(n):1}function qz(n){const e=n.match(zz);if(!e)return NaN;const t=lg(e[1]),r=lg(e[2]),i=lg(e[3]);return Zz(t,r,i)?t*Ou+r*Du+i*1e3:NaN}function lg(n){return n&&parseFloat(n.replace(",","."))||0}function Gz(n){if(n==="Z")return 0;const e=n.match(Bz);if(!e)return 0;const t=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return eB(r,i)?t*(r*Ou+i*Du):NaN}function Kz(n,e,t){const r=new Date(0);r.setUTCFullYear(n,0,4);const i=r.getUTCDay()||7,o=(e-1)*7+t+1-i;return r.setUTCDate(r.getUTCDate()+o),r}const Yz=[31,null,31,30,31,30,31,31,30,31,30,31];function mk(n){return n%400===0||n%4===0&&n%100!==0}function Qz(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(Yz[e]||(mk(n)?29:28))}function Xz(n,e){return e>=1&&e<=(mk(n)?366:365)}function Jz(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function Zz(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function eB(n,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const tB={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};OI._date.override({_id:"date-fns",formats:function(){return tB},parse:function(n,e){if(n===null||typeof n>"u")return null;const t=typeof n;return t==="number"||n instanceof Date?n=Me(n):t==="string"&&(typeof e=="string"?n=Mz(n,e,new Date,this.options):n=jz(n,this.options)),ZI(n)?n.getTime():null},format:function(n,e){return L6(n,e,this.options)},add:function(n,e,t){switch(t){case"millisecond":return R_(n,e);case"second":return S5(n,e);case"minute":return b5(n,e);case"hour":return w5(n,e);case"day":return Jf(n,e);case"week":return I5(n,e);case"month":return A_(n,e);case"quarter":return x5(n,e);case"year":return k5(n,e);default:return n}},diff:function(n,e,t){switch(t){case"millisecond":return D_(n,e);case"second":return N5(n,e);case"minute":return D5(n,e);case"hour":return R5(n,e);case"day":return ek(n,e);case"week":return L5(n,e);case"month":return rk(n,e);case"quarter":return M5(n,e);case"year":return V5(n,e);default:return 0}},startOf:function(n,e,t){switch(e){case"second":return Fz(n);case"minute":return Vz(n);case"hour":return Lz(n);case"day":return ey(n);case"week":return ai(n);case"isoWeek":return ai(n,{weekStartsOn:+t});case"month":return j5(n);case"quarter":return F5(n);case"year":return ik(n);default:return n}},endOf:function(n,e){switch(e){case"second":return W5(n);case"minute":return $5(n);case"hour":return z5(n);case"day":return tk(n);case"week":return B5(n);case"month":return nk(n);case"quarter":return H5(n);case"year":return U5(n);default:return n}}});const nB=typeof window<"u"&&window.innerWidth>=768;Qf.register(Zg,l5,WU,HU,s5,XU);const rB={"1h":{limit:60,aggregate:1,unit:"minute"},"1d":{limit:24,aggregate:1,unit:"hour"},"7d":{limit:7,aggregate:1,unit:"day"},"1m":{limit:30,aggregate:1,unit:"day"},"6m":{limit:180,aggregate:1,unit:"day"}},iB=["BTC","ETH","SOL","ADA","MATIC"],sB=()=>{const[n,e]=G.useState("BTC"),[t,r]=G.useState("1h"),[i,o]=G.useState([]),[l,c]=G.useState("");G.useEffect(()=>{(async()=>{try{const w=rB[t],k=(await it.get(`https://min-api.cryptocompare.com/data/v2/histo${w.unit}`,{params:{fsym:n,tsym:"USD",...w}})).data.Data.Data.map(T=>({time:T.time*1e3,close:T.close}));if(o(k),k.length>1){const T=k[0].close,j=(k[k.length-1].close-T)/T*100;c(`Sur la priode ${t}, ${n} a ${j>=0?"gagn":"perdu"} ${Math.abs(j).toFixed(2)}%.`)}}catch(w){console.error("Erreur fetch historique :",w.message),o([]),c("")}})()},[n,t]);const h=useMemo(()=>{if(i.length<20)return[];const b=i.map(j=>j.close),S=(j,B)=>j.map((K,q)=>q<B-1?null:j.slice(q-B+1,q+1).reduce((J,R)=>J+R,0)/B),k=S(b,5),T=S(b,20),N=[];for(let j=1;j<i.length;j++)k[j-1]!=null&&T[j-1]!=null&&(k[j]>T[j]&&k[j-1]<=T[j-1]&&N.push({time:i[j].time,type:"buy"}),k[j]<T[j]&&k[j-1]>=T[j-1]&&N.push({time:i[j].time,type:"sell"}));return N},[i]),d=useMemo(()=>({datasets:[{label:`${n} prix`,data:i.map(y=>({x:y.time,y:y.close})),borderColor:"#eee",pointRadius:0},{label:"Signaux achat",data:h.filter(y=>y.type==="buy").map(y=>({x:y.time,y:null})),borderColor:"#10b981",backgroundColor:"#10b981",showLine:!1,pointStyle:"triangle",pointRadius:8},{label:"Signaux vente",data:h.filter(y=>y.type==="sell").map(y=>({x:y.time,y:null})),borderColor:"#ef4444",backgroundColor:"#ef4444",showLine:!1,pointStyle:"rectRot",pointRadius:8}]}),[n,i,h]),m={responsive:!0,scales:{x:{type:"time",grid:{color:"#333"},ticks:{color:"#ccc"}},y:{grid:{color:"#333"},ticks:{color:"#ccc"}}},plugins:{legend:{labels:{color:"#ccc"}},tooltip:{bodyColor:"#000",backgroundColor:"#fff"}}};return C.jsxs("div",{style:{padding:"6rem 2rem 2rem",marginTop:"4rem",backgroundImage:'url("/backgrounds/homebackground.png")',backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:nB?"fixed":"scroll",color:"#eee",fontFamily:"sans-serif",minHeight:"100vh"},children:[C.jsxs("h1",{children:[" Analyse ",n,"/USD  ",t]}),C.jsxs("div",{style:{marginBottom:"1rem",backgroundColor:"rgba(0,0,0,0.5)",padding:"1rem",borderRadius:"8px",backdropFilter:"blur(8px)"},children:[C.jsx("select",{value:n,onChange:y=>e(y.target.value),style:{padding:"0.5rem",marginRight:"1rem",background:"#222",color:"#eee",border:"1px solid #444"},children:iB.map(y=>C.jsx("option",{value:y,children:y},y))}),["1h","1d","7d","1m","6m"].map(y=>C.jsx("button",{onClick:()=>r(y),style:{marginRight:"0.5rem",padding:"0.5rem 1rem",background:y===t?"#10b981":"#222",color:y===t?"#000":"#ccc",border:"1px solid #444",cursor:"pointer"},children:y},y))]}),C.jsx("div",{style:{padding:"1rem",backgroundColor:"rgba(0,0,0,0.5)",borderRadius:"8px",backdropFilter:"blur(8px)",boxShadow:"0 2px 8px rgba(0,0,0,0.6)"},children:C.jsx(y5,{data:d,options:m})}),C.jsxs("div",{style:{marginTop:"1.5rem",color:"#ccc",backgroundColor:"rgba(0,0,0,0.5)",padding:"1rem",borderRadius:"8px",backdropFilter:"blur(8px)"},children:[C.jsx("strong",{children:"Lgende :"}),C.jsxs("ul",{style:{marginTop:"0.5rem",lineHeight:1.6},children:[C.jsxs("li",{children:[C.jsx("span",{style:{color:"#10b981"},children:""})," : signal dachat"]}),C.jsxs("li",{children:[C.jsx("span",{style:{color:"#ef4444"},children:""})," : signal de vente"]})]})]}),l&&C.jsx("p",{style:{marginTop:"1rem",color:"#aaa",backgroundColor:"rgba(0,0,0,0.5)",padding:"1rem",borderRadius:"8px",backdropFilter:"blur(8px)"},children:l})]})};async function oB(n=25){const e=Hy(or,"signals"),t=VN(e,FN("timestamp","desc"),jN(n));return(await i_(t)).docs.map(i=>i.data())}const aB=typeof window<"u"&&window.innerWidth>=768,lB=()=>{const[n,e]=G.useState([]),[t,r]=G.useState([]),i=d=>Number(d||0).toFixed(2),o=d=>d==="BUY"?"#0f0":d==="SELL"?"#f00":d==="CONTEXT"?"#4ea8de":"#aaa",l=(d="")=>d.includes("Faible")?"lightgreen":d.includes("Moyen")?"orange":d.includes("lev")?"salmon":"#ccc",c=async()=>{try{const m=await(await fetch("https://ai-signal-api.onrender.com/signals-log")).json();Array.isArray(m.log)?r(m.log.slice(-25).reverse()):r([" Format de logs inattendu."])}catch(d){console.error(" Erreur chargement logs:",d),r(m=>[...m," Erreur lecture logs serveur."])}},h=async()=>{try{const d=await oB();if(!Array.isArray(d))throw new Error("Donnes invalides");const m=[...d].sort((y,w)=>{const b=new Date(y.timestamp||0);return new Date(w.timestamp||0)-b});e(m)}catch(d){console.error(" Erreur chargement Firestore :",d),e([])}};return G.useEffect(()=>{h(),c();const d=setInterval(()=>{h(),c()},3e4);return()=>clearInterval(d)},[]),C.jsxs("div",{style:{backgroundImage:'url("/backgrounds/homebackground.png")',backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:aB?"fixed":"scroll",padding:"6rem 2rem 2rem",minHeight:"100vh",color:"#fff",fontFamily:"sans-serif"},children:[C.jsx("div",{style:{position:"sticky",top:0,zIndex:100,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(8px)",padding:"1rem",borderRadius:"6px",marginBottom:"1.5rem"},children:C.jsx("h1",{children:" Signaux IA"})}),C.jsx("div",{style:{backgroundColor:"rgba(0,0,0,0.5)",borderRadius:"6px",padding:"1rem",marginBottom:"2rem",fontFamily:"monospace",fontSize:"0.9rem",maxHeight:"180px",overflowY:"auto",boxShadow:"inset 0 0 4px #000"},children:t.length===0?C.jsx("div",{style:{color:"#888"},children:"Aucun log pour le moment"}):t.map((d,m)=>C.jsx("div",{style:{color:"#4ea8de"},children:d},m))}),C.jsx("div",{style:{backgroundColor:"rgba(0,0,0,0.5)",padding:"1rem",borderRadius:"8px",maxHeight:"65vh",overflowY:"auto"},children:n.length===0?C.jsx("p",{style:{color:"#888"},children:"Aucun signal pour linstant."}):C.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:n.map((d,m)=>C.jsxs("div",{style:{borderLeft:`6px solid ${o(d.type)}`,backgroundColor:"rgba(30, 30, 30, 0.6)",backdropFilter:"blur(8px)",borderRadius:"8px",padding:"1rem",width:"100%",boxSizing:"border-box"},children:[C.jsxs("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",alignItems:"center"},children:[C.jsx("div",{style:{fontWeight:"bold",fontSize:"1.2rem"},children:d.crypto||""}),C.jsxs("div",{style:{color:"#ccc",fontSize:"1rem"},children:[" ",d.type_ia||d.type||"inconnu"]}),C.jsxs("div",{style:{color:l(d.risk),fontSize:"1rem"},children:["Risque : ",d.risk||""]})]}),C.jsxs("div",{style:{fontSize:"0.9rem",color:"#aaa",marginTop:"0.3rem"},children:[" Score IA : ",i(d.score)," / 5",d.score20!==void 0&&` | Score global : ${i(d.score20)} / 20`,C.jsx("br",{})," ",new Date(d.timestamp).toLocaleString()]}),Array.isArray(d.explanation)&&C.jsx("ul",{style:{marginTop:"0.5rem",color:"#ddd",fontSize:"0.95rem",lineHeight:"1.4",paddingLeft:"1.2rem"},children:d.explanation.map((y,w)=>C.jsx("li",{children:y},w))}),C.jsx("div",{style:{marginTop:"0.5rem"},children:C.jsx("a",{href:`https://www.tradingview.com/symbols/${d.crypto?.replace("/","")}USD`,target:"_blank",rel:"noreferrer",style:{color:"#4ea8de",fontWeight:"bold",textDecoration:"none"},children:" Voir sur TradingView"})})]},m))})})]})},cB=({show:n,symbol:e,price:t,percent:r,onChangePercent:i,onSetMax:o,onClose:l,onConfirm:c})=>n?C.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"sans-serif"},children:C.jsxs("div",{style:{backgroundColor:"#222",padding:"2rem",borderRadius:"8px",maxWidth:"400px",width:"90%",color:"#fff"},children:[C.jsxs("h2",{children:[" Vente IA : ",e]}),C.jsxs("p",{children:[" Prix actuel : $",t.toFixed(4)]}),C.jsx("label",{htmlFor:"percent",children:" Pourcentage  vendre :"}),C.jsx("input",{id:"percent",type:"range",min:"1",max:"100",value:r,onChange:i,style:{width:"100%",margin:"0.5rem 0"}}),C.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.9rem"},children:[C.jsxs("span",{children:[r,"%"]}),C.jsx("button",{onClick:o,style:{backgroundColor:"#4ea8de",border:"none",padding:"4px 8px",borderRadius:"4px",cursor:"pointer",color:"#fff"},children:"MAX"})]}),C.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"1rem",marginTop:"1.5rem"},children:[C.jsx("button",{onClick:l,style:{padding:"6px 12px",backgroundColor:"#888",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Annuler"}),C.jsx("button",{onClick:c,style:{padding:"6px 12px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"VENDRE"})]})]})}):null,uB=()=>{const{iaName:n,iaStart:e,iaCash:t,iaPositions:r=[],iaHistory:i=[],iaCurrentPrices:o={},iaTotalProfit:l,iaTotalProfitPercent:c,updateIaPrices:h,resetIATrader:d}=G.useContext(p_),[m]=G.useState(()=>new Date(e)),[y,w]=G.useState([]),[b,S]=G.useState(!0),[k,T]=G.useState([]),[N,j]=G.useState(!1),[B,K]=G.useState(""),[q,J]=G.useState(0),[R,I]=G.useState(100);G.useEffect(()=>{const ne=JSON.parse(localStorage.getItem("ia-pt-history")||"[]");w(ne)},[]),G.useEffect(()=>{const ne=async()=>{try{const re=(await(await fetch("https://ai-signal-api.onrender.com/trader-log")).text()).split(`
`).filter(Boolean).slice(-50).reverse();T(re)}catch{T([" Erreur lors du chargement des logs du Trader."])}};ne();const pe=setInterval(ne,15e3);return()=>clearInterval(pe)},[]);const P=ne=>Number(ne).toFixed(2),O=r.reduce((ne,pe)=>ne+pe.quantity*pe.buyPrice,0),L=r.length,V=i.filter(ne=>ne.type==="buy").length,D=i.filter(ne=>ne.type==="sell"&&ne.profit>0).length;return C.jsxs("div",{style:{padding:"6rem 2rem 2rem",backgroundImage:'url("/backgrounds/iatraderbackground.png")',backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed",color:"#fff",fontFamily:"sans-serif",minHeight:"100vh"},children:[C.jsxs("div",{style:{position:"sticky",top:"5rem",zIndex:100,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(8px)",padding:"1rem",borderRadius:"6px",marginBottom:"2rem"},children:[C.jsx("h1",{children:" IA Trader"}),C.jsxs("div",{style:{marginBottom:"1rem"},children:[C.jsx("button",{onClick:()=>S(!b),style:{padding:"8px 12px",backgroundColor:"#4ea8de",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:b?" Masquer Console IA":" Afficher Console IA"}),b&&C.jsx("div",{style:{marginTop:"1rem",backgroundColor:"rgba(0,0,0,0.6)",borderRadius:"6px",padding:"1rem",fontFamily:"monospace",fontSize:"0.85rem",maxHeight:"240px",overflowY:"scroll",boxShadow:"inset 0 0 4px #000"},children:k.map((ne,pe)=>C.jsx("div",{style:{color:"#ccc",marginBottom:"2px"},children:ne},pe))})]}),C.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[C.jsxs("h2",{style:{color:"#aaa"},children:[n," |  Dbut du PT : ",m.toLocaleString()]}),C.jsx("button",{onClick:h,style:{padding:"6px 12px",backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",animation:"shake 0.4s"},children:" UPDATE PRICES NOW"}),C.jsx("button",{onClick:()=>{window.confirm("Confirmer la rinitialisation de l'IA Trader  10 000 $ ?")&&d()},style:{padding:"6px 12px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:" RESET IA TRADER TO 10000$"})]})]}),C.jsxs("section",{style:{backgroundColor:"rgba(30,30,30,0.6)",backdropFilter:"blur(8px)",padding:"1rem",borderRadius:"8px",marginBottom:"2rem"},children:[C.jsx("h3",{style:{marginTop:0},children:" Bilan"}),C.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem"},children:[C.jsxs("div",{children:[" Solde total : $",P(t+O)]}),C.jsxs("div",{children:[" Cash disponible : $",P(t)]}),C.jsxs("div",{children:[" Investi : $",P(O)]}),C.jsxs("div",{children:[" Positions ouvertes : ",L]}),C.jsxs("div",{children:[" Nombre de trades : ",V]}),C.jsxs("div",{children:[" Trades positifs : ",D," / ",V]}),C.jsxs("div",{style:{marginLeft:"auto",fontWeight:"bold",fontSize:"1.1rem",padding:"0.5rem 1rem",backgroundColor:"#222",borderRadius:"6px",color:l>=0?"lightgreen":"salmon"},children:[" Rendement total : $",P(l)," (",P(c),"%)"]})]})]}),C.jsxs("section",{style:{marginBottom:"2rem"},children:[C.jsx("h3",{children:" Positions en cours"}),r.length===0?C.jsx("p",{children:"Aucune position ouverte."}):C.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:r.map(ne=>{const pe=o[ne.symbol]??0,ie=ne.quantity*ne.buyPrice,ye=ne.quantity*pe,re=ye-ie,he=(ye/ie-1)*100;return C.jsxs("div",{style:{borderLeft:`6px solid ${re>=0?"#0f0":"#f00"}`,backgroundColor:"rgba(30,30,30,0.6)",backdropFilter:"blur(8px)",borderRadius:"8px",padding:"1rem",width:"100%",boxSizing:"border-box"},children:[C.jsxs("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[C.jsx("div",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:ne.symbol}),C.jsxs("div",{style:{color:pe>=ne.buyPrice?"lightgreen":"salmon"},children:["$",P(pe)]}),C.jsxs("div",{style:{color:re>=0?"lightgreen":"salmon"},children:["$",P(re)," / ",P(he),"%"]})]}),C.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.9rem",color:"#ccc"},children:[" ",new Date(ne.date).toLocaleString()," | ID : ",ne.id," | Investi : $",P(ie)," | Prix d'achat : $",P(ne.buyPrice)]})]},ne.id)})})]}),C.jsxs("section",{style:{marginBottom:"2rem"},children:[C.jsx("h3",{children:" Historique"}),i.length===0?C.jsx("p",{children:"Aucun trade enregistr."}):C.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",maxHeight:"500px",overflowY:"auto"},children:i.map(ne=>C.jsxs("div",{style:{borderLeft:`6px solid ${ne.type==="sell"?ne.profit>=0?"#0f0":"#f00":"#888"}`,backgroundColor:"rgba(30,30,30,0.6)",backdropFilter:"blur(8px)",borderRadius:"8px",padding:"1rem",width:"100%",boxSizing:"border-box"},children:[C.jsxs("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[C.jsx("div",{style:{fontWeight:"bold"},children:ne.symbol}),C.jsx("div",{style:{color:"#ccc"},children:ne.type.toUpperCase()}),C.jsx("div",{style:{color:ne.type==="sell"?ne.profit>=0?"lightgreen":"salmon":"#ccc"},children:ne.type==="sell"?`$${P(ne.profit)} (${P(ne.profit/(ne.buyPrice*ne.quantity)*100)}%)`:""})]}),C.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.9rem",color:"#ccc"},children:[" ",new Date(ne.date).toLocaleString()," | ID : ",ne.id," | Investi : $",P(ne.quantity*ne.buyPrice)," | Achat : $",P(ne.buyPrice)," | Vente : ",ne.type==="sell"?`$${P(ne.sellPrice)}`:""]})]},ne.id))})]}),C.jsxs("section",{children:[C.jsx("h3",{children:" Historique des anciens IA Trader"}),y.length===0?C.jsx("p",{children:"Aucun PT prcdent."}):C.jsxs(C.Fragment,{children:[C.jsxs("p",{style:{color:"#aaa"},children:["Moyenne des rendements :"," ",C.jsxs("strong",{style:{color:"lightgreen"},children:[(y.reduce((ne,pe)=>ne+parseFloat(pe.percent),0)/y.length).toFixed(2),"%"]})]}),C.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:y.map((ne,pe)=>C.jsxs("div",{style:{borderLeft:`6px solid ${ne.percent>=0?"#0f0":"#f00"}`,backgroundColor:"rgba(30,30,30,0.6)",backdropFilter:"blur(8px)",borderRadius:"8px",padding:"1rem"},children:[C.jsx("div",{style:{fontWeight:"bold"},children:ne.name}),C.jsxs("div",{children:["Dbut : ",new Date(ne.start).toLocaleString()]}),C.jsxs("div",{children:["Fin : ",new Date(ne.end).toLocaleString()]}),C.jsxs("div",{children:["Rsultat : $",ne.result]}),C.jsxs("div",{style:{color:ne.percent>=0?"lightgreen":"salmon"},children:["Rendement : ",ne.percent,"%"]})]},pe))})]})]}),C.jsx(cB,{show:N,symbol:B,price:q,percent:R,onChangePercent:ne=>I(Number(ne.target.value)),onSetMax:()=>I(100),onClose:()=>j(!1),onConfirm:()=>{}})]})},hB=()=>{const{portfolioName:n,cash:e,positions:t,history:r,currentPrices:i,investedAmount:o,activePositionsCount:l,totalTrades:c,positiveTrades:h,totalProfit:d,totalProfitPercent:m,updatePrices:y,resetPortfolio:w,sellPosition:b}=G.useContext(Gf),[S,k]=G.useState(!1),[T,N]=G.useState(""),[j,B]=G.useState(0),[K,q]=G.useState(100),[J,R]=G.useState([]),[I,P]=m_("ptStartDate",new Date),O=(ie,ye)=>{N(ie),B(ye),q(100),k(!0)},L=()=>{const ie=t.find(ye=>ye.symbol===T);ie&&(b(ie.id,K/100*ie.quantity,j),k(!1))},V=ie=>Number(ie).toFixed(2),[D,ne]=G.useState(!0),pe=()=>{const ie=document.getElementById("update-btn");ie&&(ie.classList.add("wizz"),setTimeout(()=>ie.classList.remove("wizz"),400));const ye={};t.forEach(re=>{ye[re.symbol]=i[re.symbol]??0}),y(),setTimeout(()=>{const re=t.filter(he=>i[he.symbol]!==ye[he.symbol]).map(he=>he.symbol);R(re),setTimeout(()=>R([]),600)},200)};return C.jsxs("div",{style:{backgroundImage:'url("/backgrounds/homebackground.png")',backgroundSize:"cover",backgroundAttachment:"fixed",backgroundPosition:"center",minHeight:"100vh",padding:"6rem 2rem 2rem",fontFamily:"sans-serif",color:"#fff"},children:[C.jsxs("div",{style:{position:"sticky",top:0,zIndex:100,backdropFilter:"blur(8px)",backgroundColor:"rgba(0,0,0,0.6)",padding:"1rem",borderRadius:"8px",marginBottom:"2rem"},children:[C.jsx("h1",{children:" Mon Portefeuille"}),C.jsxs("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[C.jsxs("h2",{style:{color:"#aaa"},children:[n," |  Dbut du PT : ",new Date(I).toLocaleString()]}),C.jsx("button",{onClick:()=>{window.confirm("Confirmer la remise  zro ?")&&(P(new Date),w())},style:{padding:"6px 12px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:" RESET PT TO 10000$"})]}),C.jsxs("section",{style:{marginTop:"1rem"},children:[C.jsx("h3",{style:{marginTop:0},children:" Bilan"}),C.jsx("button",{onClick:()=>ne(!D),style:{marginBottom:"1rem",padding:"6px 12px",backgroundColor:"#444",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:D?" Masquer les dtails":" Afficher les dtails"}),C.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",alignItems:"center"},children:[D&&C.jsxs(C.Fragment,{children:[C.jsxs("div",{children:[" Solde total : $",V(e+o)]}),C.jsxs("div",{children:[" Cash disponible : $",V(e)]}),C.jsxs("div",{children:[" Investi : $",V(o)]}),C.jsxs("div",{children:[" Positions ouvertes : ",l]}),C.jsxs("div",{children:[" Nombre de trades : ",c]}),C.jsxs("div",{children:[" Trades positifs : ",h," / ",c]})]}),C.jsxs("div",{style:{fontWeight:"bold",fontSize:"1.1rem",padding:"0.5rem 1rem",backgroundColor:"#222",borderRadius:"6px",color:d>=0?"lightgreen":"salmon",marginLeft:"auto"},children:[" Rendement total : $",V(d)," (",V(m),"%)"]}),C.jsx("button",{id:"update-btn",onClick:pe,style:{padding:"8px 16px",backgroundColor:"#007bff",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:" UPDATE PRICES NOW"})]})]})]}),C.jsxs("section",{children:[C.jsx("h3",{children:" Positions en cours"}),t.length===0?C.jsx("p",{children:"Aucune position ouverte."}):t.map(ie=>{const ye=i[ie.symbol]??0,re=ie.quantity*ie.buyPrice,he=ie.quantity*ye,F=he-re,ee=(he/re-1)*100;return C.jsxs("div",{style:{borderLeft:`6px solid ${F>=0?"#0f0":"#f00"}`,backgroundColor:"rgba(30,30,30,0.6)",backdropFilter:"blur(8px)",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:[C.jsxs("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[C.jsx("div",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:ie.symbol}),C.jsxs("div",{className:J.includes(ie.symbol)?"wizz":"",style:{color:ye>=ie.buyPrice?"lightgreen":"salmon"},children:["$",V(ye)]}),C.jsxs("div",{style:{color:F>=0?"lightgreen":"salmon"},children:[V(F),"$ / ",V(ee),"%"]})]}),C.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.9rem",color:"#ccc"},children:[" ",new Date(ie.date).toLocaleString()," | ID : ",ie.id," | Investi : $",V(re)," | Achat : $",V(ie.buyPrice)]}),C.jsx("div",{style:{marginTop:"0.5rem"},children:C.jsx("button",{onClick:()=>O(ie.symbol,ye),style:{padding:"6px 12px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"VENDRE"})})]},ie.id)})]}),C.jsxs("section",{style:{marginTop:"2rem",maxHeight:"400px",overflowY:"auto"},children:[C.jsx("h3",{children:" Historique"}),r.length===0?C.jsx("p",{children:"Aucun trade enregistr."}):r.map(ie=>{const ye=ie.type==="sell"?ie.profit/(ie.buyPrice*ie.quantity)*100:null;return C.jsxs("div",{style:{borderLeft:`6px solid ${ie.type==="sell"?ie.profit>=0?"#0f0":"#f00":"#888"}`,backgroundColor:"rgba(30,30,30,0.6)",backdropFilter:"blur(8px)",borderRadius:"8px",padding:"1rem",marginBottom:"1rem"},children:[C.jsxs("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[C.jsx("div",{style:{fontWeight:"bold"},children:ie.symbol}),C.jsx("div",{style:{color:"#ccc"},children:ie.type.toUpperCase()}),C.jsx("div",{style:{color:ie.type==="sell"?ie.profit>=0?"lightgreen":"salmon":"#ccc"},children:ie.type==="sell"?`$${V(ie.profit)} (${V(ye)}%)`:""})]}),C.jsxs("div",{style:{marginTop:"0.5rem",fontSize:"0.9rem",color:"#ccc"},children:[" ",new Date(ie.date).toLocaleString()," | ID : ",ie.id," | Investi : $",V(ie.quantity*ie.buyPrice)," | Achat : $",V(ie.buyPrice)," | Vente : ",ie.type==="sell"?`$${V(ie.sellPrice)}`:""]})]},ie.id)})]}),C.jsx(aI,{show:S,symbol:T,price:j,percent:K,positions:t,onChangePercent:ie=>q(Number(ie.target.value)),onSetMax:()=>q(100),onClose:()=>k(!1),onConfirm:L}),C.jsx("style",{children:`
        @keyframes wizz {
          0% { transform: scale(1); }
          50% { transform: scale(1.08); }
          100% { transform: scale(1); }
        }
        .wizz {
          animation: wizz 0.4s ease-in-out;
        }
      `})]})},dB=()=>{const[n,e]=G.useState(""),[t,r]=G.useState(""),[i,o]=G.useState(""),l=yf(),c=async h=>{h.preventDefault(),o("");try{const d=_y(),y=(await fD(d,n,t)).user,w=await Su(Fi(or,"users",y.uid));if(!w.exists())throw new Error("Utilisateur inconnu.");if(!w.data().approved)throw new Error("Compte en attente de validation.");l("/")}catch(d){console.error(d),o(d.message||"Erreur de connexion.")}};return C.jsx("div",{style:{backgroundImage:'url("/backgrounds/homebackground.png")',backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed",minHeight:"100vh",padding:"6rem 1rem 2rem",display:"flex",justifyContent:"center",alignItems:"flex-start",fontFamily:"sans-serif",color:"#fff"},children:C.jsxs("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(8px)",padding:"2rem",borderRadius:"12px",maxWidth:"400px",width:"100%"},children:[C.jsx("h2",{style:{marginBottom:"1.5rem",textAlign:"center"},children:" Connexion"}),C.jsxs("form",{onSubmit:c,style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[C.jsx("input",{type:"email",placeholder:"Email",value:n,onChange:h=>e(h.target.value),required:!0,style:{padding:"10px",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1rem"}}),C.jsx("input",{type:"password",placeholder:"Mot de passe",value:t,onChange:h=>r(h.target.value),required:!0,style:{padding:"10px",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1rem"}}),C.jsx("button",{type:"submit",style:{padding:"10px",backgroundColor:"#4ea8de",color:"#fff",border:"none",borderRadius:"4px",fontWeight:"bold",fontSize:"1rem",cursor:"pointer"},children:"Se connecter"}),i&&C.jsx("p",{style:{color:"salmon",textAlign:"center"},children:i})]}),C.jsxs("div",{style:{marginTop:"2rem",textAlign:"center"},children:[C.jsx("p",{style:{color:"#aaa"},children:"Vous navez pas encore de compte ?"}),C.jsx($n,{to:"/register",style:{color:"#4ea8de",fontWeight:"bold",textDecoration:"none"},children:" Faire une demande dinscription"})]})]})})},fB=()=>{const[n,e]=G.useState(""),[t,r]=G.useState(""),[i,o]=G.useState(""),l=yf(),c=async h=>{h.preventDefault(),o("");try{const m=(await dD(fV,n,t)).user;await s_(Fi(or,"users",m.uid),{email:n,displayName:"",approved:!1,createdAt:new Date().toISOString()}),l("/login")}catch(d){console.error(d),o(d.message)}};return C.jsx("div",{style:{backgroundImage:'url("/backgrounds/homebackground.png")',backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed",minHeight:"100vh",padding:"6rem 1rem 2rem",display:"flex",justifyContent:"center",alignItems:"flex-start",fontFamily:"sans-serif",color:"#fff"},children:C.jsxs("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(8px)",padding:"2rem",borderRadius:"12px",maxWidth:"400px",width:"100%"},children:[C.jsx("h2",{style:{marginBottom:"1.5rem",textAlign:"center"},children:" Demande d'inscription"}),C.jsxs("form",{onSubmit:c,style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[C.jsxs("div",{children:[C.jsx("label",{htmlFor:"email",style:{display:"block",marginBottom:"0.5rem",color:"#ccc"},children:"Email :"}),C.jsx("input",{id:"email",type:"email",value:n,onChange:h=>e(h.target.value),required:!0,style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1rem"}})]}),C.jsxs("div",{children:[C.jsx("label",{htmlFor:"password",style:{display:"block",marginBottom:"0.5rem",color:"#ccc"},children:"Mot de passe :"}),C.jsx("input",{id:"password",type:"password",value:t,onChange:h=>r(h.target.value),required:!0,style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1rem"}})]}),i&&C.jsx("div",{style:{color:"salmon",textAlign:"center"},children:i}),C.jsx("button",{type:"submit",style:{backgroundColor:"#4ea8de",color:"#fff",padding:"10px",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold",fontSize:"1rem"},children:"Sinscrire"})]}),C.jsx("p",{style:{marginTop:"1.5rem",fontSize:"0.9rem",color:"#aaa",textAlign:"center"},children:"Une fois votre compte cr, il devra tre valid par ladministrateur avant que vous puissiez vous connecter."})]})})},Sc=({children:n})=>{const{user:e}=vl();ul();const[t,r]=G.useState("checking");return G.useEffect(()=>{(async()=>{if(!e)return r("denied");if(e.email==="xzno4rzx@gmail.com")return r("allowed");try{const o=await Su(Fi(or,"users",e.uid));if(o.exists()){const l=o.data();r(l.status==="accepted"?"allowed":"denied")}else r("denied")}catch(o){console.error("Erreur Firestore :",o),r("denied")}})()},[e]),t==="checking"?C.jsx("div",{style:{color:"#ccc",padding:"2rem"},children:" Vrification..."}):t==="denied"?C.jsx(Mb,{to:"/login",replace:!0}):n},pB=typeof window<"u"&&window.innerWidth>=768,mB=()=>{const{user:n}=vl(),{refreshPending:e}=N1(),[t,r]=G.useState([]),[i,o]=G.useState(!1),[l,c]=G.useState("");if(n?.email!=="xzno4rzx@gmail.com")return C.jsx(Mb,{to:"/"});const h=async()=>{try{const y=await i_(Hy(or,"users"));r(y.docs.map(w=>({id:w.id,...w.data()})))}catch(y){console.error("Erreur rcupration utilisateurs :",y)}},d=async(y,w)=>{try{await $N(Fi(or,"users",y),{status:w}),h(),e()}catch(b){console.error("Erreur mise  jour :",b)}},m=async()=>{if(!l.trim()){alert("Merci de saisir un message.");return}o(!0);try{const y=await fetch("https://utc-api.onrender.com/send-manual-signal",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({timestamp:new Date().toISOString(),crypto:"ADMIN",type:"ADMIN_POST",type_ia:"admin_post",score:0,risk:" Info",explanation:[`ADMIN POST: ${l.trim()}`]})});if(!y.ok)throw new Error(`HTTP ${y.status}`);alert(" Message envoy !"),c("")}catch(y){console.error(" Erreur envoi message admin :",y),alert("Erreur lors de lenvoi.")}finally{o(!1)}};return G.useEffect(()=>{h()},[]),C.jsxs("div",{style:{backgroundImage:'url("/backgrounds/homebackground.png")',backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:pB?"fixed":"scroll",padding:"6rem 2rem 2rem",color:"#fff",fontFamily:"sans-serif",minHeight:"100vh"},children:[C.jsxs("div",{style:{backgroundColor:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(10px)",padding:"2rem",borderRadius:"12px",marginBottom:"2rem"},children:[C.jsx("h1",{children:" Tableau de bord Admin"}),C.jsx("div",{style:{overflowX:"auto",marginTop:"2rem"},children:C.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.95rem",minWidth:"600px"},children:[C.jsx("thead",{children:C.jsxs("tr",{style:{backgroundColor:"#333"},children:[C.jsx("th",{style:ds,children:"Email"}),C.jsx("th",{style:ds,children:"Nom"}),C.jsx("th",{style:ds,children:"Statut"}),C.jsx("th",{style:ds,children:"Action"})]})}),C.jsx("tbody",{children:t.map((y,w)=>C.jsxs("tr",{style:{background:w%2===0?"#222":"#2a2a2a"},children:[C.jsx("td",{style:ds,children:y.email}),C.jsx("td",{style:ds,children:y.displayName||""}),C.jsx("td",{style:{...ds,color:y.status==="accepted"?"lightgreen":y.status==="refused"?"salmon":"#ccc"},children:y.status||"en attente"}),C.jsxs("td",{style:ds,children:[C.jsx("button",{onClick:()=>d(y.id,"accepted"),style:Eb,children:""}),C.jsx("button",{onClick:()=>d(y.id,"refused"),style:{...Eb,backgroundColor:"#a00"},children:""})]})]},y.id))})]})})]}),C.jsxs("div",{style:{backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(10px)",padding:"2rem",borderRadius:"12px"},children:[C.jsx("h2",{children:" Envoyer un message admin"}),C.jsx("textarea",{rows:4,value:l,onChange:y=>c(y.target.value),placeholder:"Votre message ici",style:{width:"100%",padding:"10px",borderRadius:"6px",border:"1px solid #444",fontFamily:"inherit",marginTop:"0.5rem"}}),C.jsx("button",{onClick:m,disabled:i,style:{marginTop:"1rem",padding:"10px 20px",backgroundColor:"#4ea8de",color:"#fff",border:"none",borderRadius:"6px",fontWeight:"bold",cursor:"pointer"},children:i?"Envoi":" Envoyer"})]})]})},ds={padding:"10px",textAlign:"left",borderBottom:"1px solid #444"},Eb={padding:"6px 10px",marginRight:"6px",backgroundColor:"#10b981",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},gB=()=>(G.useEffect(()=>{console.log(" UTC App initialise avec routes.")},[]),console.log(" App.jsx charg"),C.jsxs(C.Fragment,{children:[C.jsx(gV,{}),C.jsxs(wP,{children:[C.jsx(Wr,{path:"/",element:C.jsx(i4,{})}),C.jsx(Wr,{path:"/login",element:C.jsx(dB,{})}),C.jsx(Wr,{path:"/register",element:C.jsx(fB,{})}),C.jsx(Wr,{path:"/trading",element:C.jsx(Sc,{children:C.jsx(p4,{})})}),C.jsx(Wr,{path:"/analysis",element:C.jsx(Sc,{children:C.jsx(sB,{})})}),C.jsx(Wr,{path:"/signals",element:C.jsx(Sc,{children:C.jsx(lB,{})})}),C.jsx(Wr,{path:"/ia-trader",element:C.jsx(Sc,{children:C.jsx(uB,{})})}),C.jsx(Wr,{path:"/profile",element:C.jsx(Sc,{children:C.jsx(hB,{})})}),C.jsx(Wr,{path:"/admin",element:C.jsx(mB,{})})]})]}));PC.createRoot(document.getElementById("root")).render(C.jsx(mf.StrictMode,{children:C.jsx(kP,{children:C.jsx(pV,{children:C.jsx(e4,{children:C.jsx(r4,{children:C.jsx(mV,{children:C.jsx(gB,{})})})})})})}));
